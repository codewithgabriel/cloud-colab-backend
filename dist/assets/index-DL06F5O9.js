function t_(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const y of a.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&n(y)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Gh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ah(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function lS(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var r_={exports:{}},oh={},n_={exports:{}},Hr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xu=Symbol.for("react.element"),uS=Symbol.for("react.portal"),dS=Symbol.for("react.fragment"),pS=Symbol.for("react.strict_mode"),hS=Symbol.for("react.profiler"),fS=Symbol.for("react.provider"),mS=Symbol.for("react.context"),gS=Symbol.for("react.forward_ref"),vS=Symbol.for("react.suspense"),yS=Symbol.for("react.memo"),_S=Symbol.for("react.lazy"),Fv=Symbol.iterator;function wS(e){return e===null||typeof e!="object"?null:(e=Fv&&e[Fv]||e["@@iterator"],typeof e=="function"?e:null)}var i_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s_=Object.assign,a_={};function wl(e,t,r){this.props=e,this.context=t,this.refs=a_,this.updater=r||i_}wl.prototype.isReactComponent={};wl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function o_(){}o_.prototype=wl.prototype;function Qm(e,t,r){this.props=e,this.context=t,this.refs=a_,this.updater=r||i_}var Ym=Qm.prototype=new o_;Ym.constructor=Qm;s_(Ym,wl.prototype);Ym.isPureReactComponent=!0;var Uv=Array.isArray,c_=Object.prototype.hasOwnProperty,Xm={current:null},l_={key:!0,ref:!0,__self:!0,__source:!0};function u_(e,t,r){var n,i={},a=null,y=null;if(t!=null)for(n in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(a=""+t.key),t)c_.call(t,n)&&!l_.hasOwnProperty(n)&&(i[n]=t[n]);var E=arguments.length-2;if(E===1)i.children=r;else if(1<E){for(var p=Array(E),o=0;o<E;o++)p[o]=arguments[o+2];i.children=p}if(e&&e.defaultProps)for(n in E=e.defaultProps,E)i[n]===void 0&&(i[n]=E[n]);return{$$typeof:Xu,type:e,key:a,ref:y,props:i,_owner:Xm.current}}function bS(e,t){return{$$typeof:Xu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Zm(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xu}function SS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var zv=/\/+/g;function Jh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?SS(""+e.key):t.toString(36)}function ip(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(a){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case Xu:case uS:y=!0}}if(y)return y=e,i=i(y),e=n===""?"."+Jh(y,0):n,Uv(i)?(r="",e!=null&&(r=e.replace(zv,"$&/")+"/"),ip(i,t,r,"",function(o){return o})):i!=null&&(Zm(i)&&(i=bS(i,r+(!i.key||y&&y.key===i.key?"":(""+i.key).replace(zv,"$&/")+"/")+e)),t.push(i)),1;if(y=0,n=n===""?".":n+":",Uv(e))for(var E=0;E<e.length;E++){a=e[E];var p=n+Jh(a,E);y+=ip(a,t,r,p,i)}else if(p=wS(e),typeof p=="function")for(e=p.call(e),E=0;!(a=e.next()).done;)a=a.value,p=n+Jh(a,E++),y+=ip(a,t,r,p,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function jd(e,t,r){if(e==null)return e;var n=[],i=0;return ip(e,n,"","",function(a){return t.call(r,a,i++)}),n}function RS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var cs={current:null},sp={transition:null},ES={ReactCurrentDispatcher:cs,ReactCurrentBatchConfig:sp,ReactCurrentOwner:Xm};function d_(){throw Error("act(...) is not supported in production builds of React.")}Hr.Children={map:jd,forEach:function(e,t,r){jd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return jd(e,function(){t++}),t},toArray:function(e){return jd(e,function(t){return t})||[]},only:function(e){if(!Zm(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Hr.Component=wl;Hr.Fragment=dS;Hr.Profiler=hS;Hr.PureComponent=Qm;Hr.StrictMode=pS;Hr.Suspense=vS;Hr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ES;Hr.act=d_;Hr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=s_({},e.props),i=e.key,a=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,y=Xm.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var E=e.type.defaultProps;for(p in t)c_.call(t,p)&&!l_.hasOwnProperty(p)&&(n[p]=t[p]===void 0&&E!==void 0?E[p]:t[p])}var p=arguments.length-2;if(p===1)n.children=r;else if(1<p){E=Array(p);for(var o=0;o<p;o++)E[o]=arguments[o+2];n.children=E}return{$$typeof:Xu,type:e.type,key:i,ref:a,props:n,_owner:y}};Hr.createContext=function(e){return e={$$typeof:mS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:fS,_context:e},e.Consumer=e};Hr.createElement=u_;Hr.createFactory=function(e){var t=u_.bind(null,e);return t.type=e,t};Hr.createRef=function(){return{current:null}};Hr.forwardRef=function(e){return{$$typeof:gS,render:e}};Hr.isValidElement=Zm;Hr.lazy=function(e){return{$$typeof:_S,_payload:{_status:-1,_result:e},_init:RS}};Hr.memo=function(e,t){return{$$typeof:yS,type:e,compare:t===void 0?null:t}};Hr.startTransition=function(e){var t=sp.transition;sp.transition={};try{e()}finally{sp.transition=t}};Hr.unstable_act=d_;Hr.useCallback=function(e,t){return cs.current.useCallback(e,t)};Hr.useContext=function(e){return cs.current.useContext(e)};Hr.useDebugValue=function(){};Hr.useDeferredValue=function(e){return cs.current.useDeferredValue(e)};Hr.useEffect=function(e,t){return cs.current.useEffect(e,t)};Hr.useId=function(){return cs.current.useId()};Hr.useImperativeHandle=function(e,t,r){return cs.current.useImperativeHandle(e,t,r)};Hr.useInsertionEffect=function(e,t){return cs.current.useInsertionEffect(e,t)};Hr.useLayoutEffect=function(e,t){return cs.current.useLayoutEffect(e,t)};Hr.useMemo=function(e,t){return cs.current.useMemo(e,t)};Hr.useReducer=function(e,t,r){return cs.current.useReducer(e,t,r)};Hr.useRef=function(e){return cs.current.useRef(e)};Hr.useState=function(e){return cs.current.useState(e)};Hr.useSyncExternalStore=function(e,t,r){return cs.current.useSyncExternalStore(e,t,r)};Hr.useTransition=function(){return cs.current.useTransition()};Hr.version="18.3.1";n_.exports=Hr;var Oe=n_.exports;const p_=ah(Oe),kS=t_({__proto__:null,default:p_},[Oe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CS=Oe,PS=Symbol.for("react.element"),TS=Symbol.for("react.fragment"),xS=Object.prototype.hasOwnProperty,OS=CS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,DS={key:!0,ref:!0,__self:!0,__source:!0};function h_(e,t,r){var n,i={},a=null,y=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(y=t.ref);for(n in t)xS.call(t,n)&&!DS.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:PS,type:e,key:a,ref:y,props:i,_owner:OS.current}}oh.Fragment=TS;oh.jsx=h_;oh.jsxs=h_;r_.exports=oh;var le=r_.exports,f_={exports:{}},js={},m_={exports:{}},g_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,j){var V=L.length;L.push(j);e:for(;0<V;){var $=V-1>>>1,Z=L[$];if(0<i(Z,j))L[$]=j,L[V]=Z,V=$;else break e}}function r(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var j=L[0],V=L.pop();if(V!==j){L[0]=V;e:for(var $=0,Z=L.length,ne=Z>>>1;$<ne;){var pe=2*($+1)-1,ge=L[pe],_e=pe+1,Me=L[_e];if(0>i(ge,V))_e<Z&&0>i(Me,ge)?(L[$]=Me,L[_e]=V,$=_e):(L[$]=ge,L[pe]=V,$=pe);else if(_e<Z&&0>i(Me,V))L[$]=Me,L[_e]=V,$=_e;else break e}}return j}function i(L,j){var V=L.sortIndex-j.sortIndex;return V!==0?V:L.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var y=Date,E=y.now();e.unstable_now=function(){return y.now()-E}}var p=[],o=[],C=1,_=null,h=3,b=!1,k=!1,f=!1,g=typeof setTimeout=="function"?setTimeout:null,s=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var j=r(o);j!==null;){if(j.callback===null)n(o);else if(j.startTime<=L)n(o),j.sortIndex=j.expirationTime,t(p,j);else break;j=r(o)}}function T(L){if(f=!1,S(L),!k)if(r(p)!==null)k=!0,D(x);else{var j=r(o);j!==null&&N(T,j.startTime-L)}}function x(L,j){k=!1,f&&(f=!1,s(R),R=-1),b=!0;var V=h;try{for(S(j),_=r(p);_!==null&&(!(_.expirationTime>j)||L&&!v());){var $=_.callback;if(typeof $=="function"){_.callback=null,h=_.priorityLevel;var Z=$(_.expirationTime<=j);j=e.unstable_now(),typeof Z=="function"?_.callback=Z:_===r(p)&&n(p),S(j)}else n(p);_=r(p)}if(_!==null)var ne=!0;else{var pe=r(o);pe!==null&&N(T,pe.startTime-j),ne=!1}return ne}finally{_=null,h=V,b=!1}}var O=!1,P=null,R=-1,I=5,d=-1;function v(){return!(e.unstable_now()-d<I)}function c(){if(P!==null){var L=e.unstable_now();d=L;var j=!0;try{j=P(!0,L)}finally{j?u():(O=!1,P=null)}}else O=!1}var u;if(typeof w=="function")u=function(){w(c)};else if(typeof MessageChannel<"u"){var l=new MessageChannel,m=l.port2;l.port1.onmessage=c,u=function(){m.postMessage(null)}}else u=function(){g(c,0)};function D(L){P=L,O||(O=!0,u())}function N(L,j){R=g(function(){L(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){k||b||(k=!0,D(x))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(p)},e.unstable_next=function(L){switch(h){case 1:case 2:case 3:var j=3;break;default:j=h}var V=h;h=j;try{return L()}finally{h=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,j){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var V=h;h=L;try{return j()}finally{h=V}},e.unstable_scheduleCallback=function(L,j,V){var $=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?$+V:$):V=$,L){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=V+Z,L={id:C++,callback:j,priorityLevel:L,startTime:V,expirationTime:Z,sortIndex:-1},V>$?(L.sortIndex=V,t(o,L),r(p)===null&&L===r(o)&&(f?(s(R),R=-1):f=!0,N(T,V-$))):(L.sortIndex=Z,t(p,L),k||b||(k=!0,D(x))),L},e.unstable_shouldYield=v,e.unstable_wrapCallback=function(L){var j=h;return function(){var V=h;h=j;try{return L.apply(this,arguments)}finally{h=V}}}})(g_);m_.exports=g_;var IS=m_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MS=Oe,Ls=IS;function pt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v_=new Set,Ou={};function mc(e,t){ll(e,t),ll(e+"Capture",t)}function ll(e,t){for(Ou[e]=t,e=0;e<t.length;e++)v_.add(t[e])}var Na=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jf=Object.prototype.hasOwnProperty,AS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hv={},Wv={};function LS(e){return jf.call(Wv,e)?!0:jf.call(Hv,e)?!1:AS.test(e)?Wv[e]=!0:(Hv[e]=!0,!1)}function NS(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function jS(e,t,r,n){if(t===null||typeof t>"u"||NS(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ls(e,t,r,n,i,a,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=y}var zi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){zi[e]=new ls(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];zi[t]=new ls(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){zi[e]=new ls(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){zi[e]=new ls(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){zi[e]=new ls(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){zi[e]=new ls(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){zi[e]=new ls(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){zi[e]=new ls(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){zi[e]=new ls(e,5,!1,e.toLowerCase(),null,!1,!1)});var eg=/[\-:]([a-z])/g;function tg(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(eg,tg);zi[t]=new ls(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(eg,tg);zi[t]=new ls(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(eg,tg);zi[t]=new ls(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){zi[e]=new ls(e,1,!1,e.toLowerCase(),null,!1,!1)});zi.xlinkHref=new ls("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){zi[e]=new ls(e,1,!1,e.toLowerCase(),null,!0,!0)});function rg(e,t,r,n){var i=zi.hasOwnProperty(t)?zi[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(jS(t,r,i,n)&&(r=null),n||i===null?LS(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ua=MS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Bd=Symbol.for("react.element"),Uc=Symbol.for("react.portal"),zc=Symbol.for("react.fragment"),ng=Symbol.for("react.strict_mode"),Bf=Symbol.for("react.profiler"),y_=Symbol.for("react.provider"),__=Symbol.for("react.context"),ig=Symbol.for("react.forward_ref"),Ff=Symbol.for("react.suspense"),Uf=Symbol.for("react.suspense_list"),sg=Symbol.for("react.memo"),fo=Symbol.for("react.lazy"),w_=Symbol.for("react.offscreen"),Vv=Symbol.iterator;function Zl(e){return e===null||typeof e!="object"?null:(e=Vv&&e[Vv]||e["@@iterator"],typeof e=="function"?e:null)}var Fn=Object.assign,Qh;function fu(e){if(Qh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Qh=t&&t[1]||""}return`
`+Qh+e}var Yh=!1;function Xh(e,t){if(!e||Yh)return"";Yh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(o){var n=o}Reflect.construct(e,[],t)}else{try{t.call()}catch(o){n=o}e.call(t.prototype)}else{try{throw Error()}catch(o){n=o}e()}}catch(o){if(o&&n&&typeof o.stack=="string"){for(var i=o.stack.split(`
`),a=n.stack.split(`
`),y=i.length-1,E=a.length-1;1<=y&&0<=E&&i[y]!==a[E];)E--;for(;1<=y&&0<=E;y--,E--)if(i[y]!==a[E]){if(y!==1||E!==1)do if(y--,E--,0>E||i[y]!==a[E]){var p=`
`+i[y].replace(" at new "," at ");return e.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",e.displayName)),p}while(1<=y&&0<=E);break}}}finally{Yh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?fu(e):""}function BS(e){switch(e.tag){case 5:return fu(e.type);case 16:return fu("Lazy");case 13:return fu("Suspense");case 19:return fu("SuspenseList");case 0:case 2:case 15:return e=Xh(e.type,!1),e;case 11:return e=Xh(e.type.render,!1),e;case 1:return e=Xh(e.type,!0),e;default:return""}}function zf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case zc:return"Fragment";case Uc:return"Portal";case Bf:return"Profiler";case ng:return"StrictMode";case Ff:return"Suspense";case Uf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case __:return(e.displayName||"Context")+".Consumer";case y_:return(e._context.displayName||"Context")+".Provider";case ig:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case sg:return t=e.displayName||null,t!==null?t:zf(e.type)||"Memo";case fo:t=e._payload,e=e._init;try{return zf(e(t))}catch{}}return null}function FS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zf(t);case 8:return t===ng?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Io(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function b_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function US(e){var t=b_(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(y){n=""+y,a.call(this,y)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(y){n=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fd(e){e._valueTracker||(e._valueTracker=US(e))}function S_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=b_(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Cp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Hf(e,t){var r=t.checked;return Fn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function $v(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Io(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function R_(e,t){t=t.checked,t!=null&&rg(e,"checked",t,!1)}function Wf(e,t){R_(e,t);var r=Io(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Vf(e,t.type,r):t.hasOwnProperty("defaultValue")&&Vf(e,t.type,Io(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function qv(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Vf(e,t,r){(t!=="number"||Cp(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var mu=Array.isArray;function Zc(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Io(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function $f(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(pt(91));return Fn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Kv(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(pt(92));if(mu(r)){if(1<r.length)throw Error(pt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Io(r)}}function E_(e,t){var r=Io(t.value),n=Io(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Gv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function k_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?k_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ud,C_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ud=Ud||document.createElement("div"),Ud.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ud.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Du(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var bu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zS=["Webkit","ms","Moz","O"];Object.keys(bu).forEach(function(e){zS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bu[t]=bu[e]})});function P_(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||bu.hasOwnProperty(e)&&bu[e]?(""+t).trim():t+"px"}function T_(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=P_(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var HS=Fn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kf(e,t){if(t){if(HS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(pt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(pt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(pt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(pt(62))}}function Gf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Jf=null;function ag(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Qf=null,el=null,tl=null;function Jv(e){if(e=td(e)){if(typeof Qf!="function")throw Error(pt(280));var t=e.stateNode;t&&(t=ph(t),Qf(e.stateNode,e.type,t))}}function x_(e){el?tl?tl.push(e):tl=[e]:el=e}function O_(){if(el){var e=el,t=tl;if(tl=el=null,Jv(e),t)for(e=0;e<t.length;e++)Jv(t[e])}}function D_(e,t){return e(t)}function I_(){}var Zh=!1;function M_(e,t,r){if(Zh)return e(t,r);Zh=!0;try{return D_(e,t,r)}finally{Zh=!1,(el!==null||tl!==null)&&(I_(),O_())}}function Iu(e,t){var r=e.stateNode;if(r===null)return null;var n=ph(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(pt(231,t,typeof r));return r}var Yf=!1;if(Na)try{var eu={};Object.defineProperty(eu,"passive",{get:function(){Yf=!0}}),window.addEventListener("test",eu,eu),window.removeEventListener("test",eu,eu)}catch{Yf=!1}function WS(e,t,r,n,i,a,y,E,p){var o=Array.prototype.slice.call(arguments,3);try{t.apply(r,o)}catch(C){this.onError(C)}}var Su=!1,Pp=null,Tp=!1,Xf=null,VS={onError:function(e){Su=!0,Pp=e}};function $S(e,t,r,n,i,a,y,E,p){Su=!1,Pp=null,WS.apply(VS,arguments)}function qS(e,t,r,n,i,a,y,E,p){if($S.apply(this,arguments),Su){if(Su){var o=Pp;Su=!1,Pp=null}else throw Error(pt(198));Tp||(Tp=!0,Xf=o)}}function gc(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function A_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Qv(e){if(gc(e)!==e)throw Error(pt(188))}function KS(e){var t=e.alternate;if(!t){if(t=gc(e),t===null)throw Error(pt(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Qv(i),e;if(a===n)return Qv(i),t;a=a.sibling}throw Error(pt(188))}if(r.return!==n.return)r=i,n=a;else{for(var y=!1,E=i.child;E;){if(E===r){y=!0,r=i,n=a;break}if(E===n){y=!0,n=i,r=a;break}E=E.sibling}if(!y){for(E=a.child;E;){if(E===r){y=!0,r=a,n=i;break}if(E===n){y=!0,n=a,r=i;break}E=E.sibling}if(!y)throw Error(pt(189))}}if(r.alternate!==n)throw Error(pt(190))}if(r.tag!==3)throw Error(pt(188));return r.stateNode.current===r?e:t}function L_(e){return e=KS(e),e!==null?N_(e):null}function N_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=N_(e);if(t!==null)return t;e=e.sibling}return null}var j_=Ls.unstable_scheduleCallback,Yv=Ls.unstable_cancelCallback,GS=Ls.unstable_shouldYield,JS=Ls.unstable_requestPaint,Zn=Ls.unstable_now,QS=Ls.unstable_getCurrentPriorityLevel,og=Ls.unstable_ImmediatePriority,B_=Ls.unstable_UserBlockingPriority,xp=Ls.unstable_NormalPriority,YS=Ls.unstable_LowPriority,F_=Ls.unstable_IdlePriority,ch=null,ba=null;function XS(e){if(ba&&typeof ba.onCommitFiberRoot=="function")try{ba.onCommitFiberRoot(ch,e,void 0,(e.current.flags&128)===128)}catch{}}var oa=Math.clz32?Math.clz32:tR,ZS=Math.log,eR=Math.LN2;function tR(e){return e>>>=0,e===0?32:31-(ZS(e)/eR|0)|0}var zd=64,Hd=4194304;function gu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Op(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,y=r&268435455;if(y!==0){var E=y&~i;E!==0?n=gu(E):(a&=y,a!==0&&(n=gu(a)))}else y=r&~i,y!==0?n=gu(y):a!==0&&(n=gu(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-oa(t),i=1<<r,n|=e[r],t&=~i;return n}function rR(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nR(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var y=31-oa(a),E=1<<y,p=i[y];p===-1?(!(E&r)||E&n)&&(i[y]=rR(E,t)):p<=t&&(e.expiredLanes|=E),a&=~E}}function Zf(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function U_(){var e=zd;return zd<<=1,!(zd&4194240)&&(zd=64),e}function ef(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Zu(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-oa(t),e[t]=r}function iR(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-oa(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function cg(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-oa(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var dn=0;function z_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var H_,lg,W_,V_,$_,em=!1,Wd=[],Ro=null,Eo=null,ko=null,Mu=new Map,Au=new Map,go=[],sR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xv(e,t){switch(e){case"focusin":case"focusout":Ro=null;break;case"dragenter":case"dragleave":Eo=null;break;case"mouseover":case"mouseout":ko=null;break;case"pointerover":case"pointerout":Mu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Au.delete(t.pointerId)}}function tu(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=td(t),t!==null&&lg(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function aR(e,t,r,n,i){switch(t){case"focusin":return Ro=tu(Ro,e,t,r,n,i),!0;case"dragenter":return Eo=tu(Eo,e,t,r,n,i),!0;case"mouseover":return ko=tu(ko,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return Mu.set(a,tu(Mu.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Au.set(a,tu(Au.get(a)||null,e,t,r,n,i)),!0}return!1}function q_(e){var t=Xo(e.target);if(t!==null){var r=gc(t);if(r!==null){if(t=r.tag,t===13){if(t=A_(r),t!==null){e.blockedOn=t,$_(e.priority,function(){W_(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ap(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=tm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Jf=n,r.target.dispatchEvent(n),Jf=null}else return t=td(r),t!==null&&lg(t),e.blockedOn=r,!1;t.shift()}return!0}function Zv(e,t,r){ap(e)&&r.delete(t)}function oR(){em=!1,Ro!==null&&ap(Ro)&&(Ro=null),Eo!==null&&ap(Eo)&&(Eo=null),ko!==null&&ap(ko)&&(ko=null),Mu.forEach(Zv),Au.forEach(Zv)}function ru(e,t){e.blockedOn===t&&(e.blockedOn=null,em||(em=!0,Ls.unstable_scheduleCallback(Ls.unstable_NormalPriority,oR)))}function Lu(e){function t(i){return ru(i,e)}if(0<Wd.length){ru(Wd[0],e);for(var r=1;r<Wd.length;r++){var n=Wd[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Ro!==null&&ru(Ro,e),Eo!==null&&ru(Eo,e),ko!==null&&ru(ko,e),Mu.forEach(t),Au.forEach(t),r=0;r<go.length;r++)n=go[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<go.length&&(r=go[0],r.blockedOn===null);)q_(r),r.blockedOn===null&&go.shift()}var rl=Ua.ReactCurrentBatchConfig,Dp=!0;function cR(e,t,r,n){var i=dn,a=rl.transition;rl.transition=null;try{dn=1,ug(e,t,r,n)}finally{dn=i,rl.transition=a}}function lR(e,t,r,n){var i=dn,a=rl.transition;rl.transition=null;try{dn=4,ug(e,t,r,n)}finally{dn=i,rl.transition=a}}function ug(e,t,r,n){if(Dp){var i=tm(e,t,r,n);if(i===null)df(e,t,n,Ip,r),Xv(e,n);else if(aR(i,e,t,r,n))n.stopPropagation();else if(Xv(e,n),t&4&&-1<sR.indexOf(e)){for(;i!==null;){var a=td(i);if(a!==null&&H_(a),a=tm(e,t,r,n),a===null&&df(e,t,n,Ip,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else df(e,t,n,null,r)}}var Ip=null;function tm(e,t,r,n){if(Ip=null,e=ag(n),e=Xo(e),e!==null)if(t=gc(e),t===null)e=null;else if(r=t.tag,r===13){if(e=A_(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ip=e,null}function K_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(QS()){case og:return 1;case B_:return 4;case xp:case YS:return 16;case F_:return 536870912;default:return 16}default:return 16}}var yo=null,dg=null,op=null;function G_(){if(op)return op;var e,t=dg,r=t.length,n,i="value"in yo?yo.value:yo.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var y=r-e;for(n=1;n<=y&&t[r-n]===i[a-n];n++);return op=i.slice(e,1<n?1-n:void 0)}function cp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vd(){return!0}function e0(){return!1}function Bs(e){function t(r,n,i,a,y){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=y,this.currentTarget=null;for(var E in e)e.hasOwnProperty(E)&&(r=e[E],this[E]=r?r(a):a[E]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Vd:e0,this.isPropagationStopped=e0,this}return Fn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Vd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Vd)},persist:function(){},isPersistent:Vd}),t}var bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pg=Bs(bl),ed=Fn({},bl,{view:0,detail:0}),uR=Bs(ed),tf,rf,nu,lh=Fn({},ed,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==nu&&(nu&&e.type==="mousemove"?(tf=e.screenX-nu.screenX,rf=e.screenY-nu.screenY):rf=tf=0,nu=e),tf)},movementY:function(e){return"movementY"in e?e.movementY:rf}}),t0=Bs(lh),dR=Fn({},lh,{dataTransfer:0}),pR=Bs(dR),hR=Fn({},ed,{relatedTarget:0}),nf=Bs(hR),fR=Fn({},bl,{animationName:0,elapsedTime:0,pseudoElement:0}),mR=Bs(fR),gR=Fn({},bl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vR=Bs(gR),yR=Fn({},bl,{data:0}),r0=Bs(yR),_R={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SR(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=bR[e])?!!t[e]:!1}function hg(){return SR}var RR=Fn({},ed,{key:function(e){if(e.key){var t=_R[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=cp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?wR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hg,charCode:function(e){return e.type==="keypress"?cp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?cp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),ER=Bs(RR),kR=Fn({},lh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),n0=Bs(kR),CR=Fn({},ed,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hg}),PR=Bs(CR),TR=Fn({},bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),xR=Bs(TR),OR=Fn({},lh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),DR=Bs(OR),IR=[9,13,27,32],fg=Na&&"CompositionEvent"in window,Ru=null;Na&&"documentMode"in document&&(Ru=document.documentMode);var MR=Na&&"TextEvent"in window&&!Ru,J_=Na&&(!fg||Ru&&8<Ru&&11>=Ru),i0=" ",s0=!1;function Q_(e,t){switch(e){case"keyup":return IR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Y_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Hc=!1;function AR(e,t){switch(e){case"compositionend":return Y_(t);case"keypress":return t.which!==32?null:(s0=!0,i0);case"textInput":return e=t.data,e===i0&&s0?null:e;default:return null}}function LR(e,t){if(Hc)return e==="compositionend"||!fg&&Q_(e,t)?(e=G_(),op=dg=yo=null,Hc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return J_&&t.locale!=="ko"?null:t.data;default:return null}}var NR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function a0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!NR[e.type]:t==="textarea"}function X_(e,t,r,n){x_(n),t=Mp(t,"onChange"),0<t.length&&(r=new pg("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Eu=null,Nu=null;function jR(e){lw(e,0)}function uh(e){var t=$c(e);if(S_(t))return e}function BR(e,t){if(e==="change")return t}var Z_=!1;if(Na){var sf;if(Na){var af="oninput"in document;if(!af){var o0=document.createElement("div");o0.setAttribute("oninput","return;"),af=typeof o0.oninput=="function"}sf=af}else sf=!1;Z_=sf&&(!document.documentMode||9<document.documentMode)}function c0(){Eu&&(Eu.detachEvent("onpropertychange",ew),Nu=Eu=null)}function ew(e){if(e.propertyName==="value"&&uh(Nu)){var t=[];X_(t,Nu,e,ag(e)),M_(jR,t)}}function FR(e,t,r){e==="focusin"?(c0(),Eu=t,Nu=r,Eu.attachEvent("onpropertychange",ew)):e==="focusout"&&c0()}function UR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return uh(Nu)}function zR(e,t){if(e==="click")return uh(t)}function HR(e,t){if(e==="input"||e==="change")return uh(t)}function WR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var la=typeof Object.is=="function"?Object.is:WR;function ju(e,t){if(la(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!jf.call(t,i)||!la(e[i],t[i]))return!1}return!0}function l0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function u0(e,t){var r=l0(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=l0(r)}}function tw(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?tw(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rw(){for(var e=window,t=Cp();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Cp(e.document)}return t}function mg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function VR(e){var t=rw(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&tw(r.ownerDocument.documentElement,r)){if(n!==null&&mg(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=u0(r,a);var y=u0(r,n);i&&y&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var $R=Na&&"documentMode"in document&&11>=document.documentMode,Wc=null,rm=null,ku=null,nm=!1;function d0(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;nm||Wc==null||Wc!==Cp(n)||(n=Wc,"selectionStart"in n&&mg(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ku&&ju(ku,n)||(ku=n,n=Mp(rm,"onSelect"),0<n.length&&(t=new pg("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=Wc)))}function $d(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Vc={animationend:$d("Animation","AnimationEnd"),animationiteration:$d("Animation","AnimationIteration"),animationstart:$d("Animation","AnimationStart"),transitionend:$d("Transition","TransitionEnd")},of={},nw={};Na&&(nw=document.createElement("div").style,"AnimationEvent"in window||(delete Vc.animationend.animation,delete Vc.animationiteration.animation,delete Vc.animationstart.animation),"TransitionEvent"in window||delete Vc.transitionend.transition);function dh(e){if(of[e])return of[e];if(!Vc[e])return e;var t=Vc[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in nw)return of[e]=t[r];return e}var iw=dh("animationend"),sw=dh("animationiteration"),aw=dh("animationstart"),ow=dh("transitionend"),cw=new Map,p0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ao(e,t){cw.set(e,t),mc(t,[e])}for(var cf=0;cf<p0.length;cf++){var lf=p0[cf],qR=lf.toLowerCase(),KR=lf[0].toUpperCase()+lf.slice(1);Ao(qR,"on"+KR)}Ao(iw,"onAnimationEnd");Ao(sw,"onAnimationIteration");Ao(aw,"onAnimationStart");Ao("dblclick","onDoubleClick");Ao("focusin","onFocus");Ao("focusout","onBlur");Ao(ow,"onTransitionEnd");ll("onMouseEnter",["mouseout","mouseover"]);ll("onMouseLeave",["mouseout","mouseover"]);ll("onPointerEnter",["pointerout","pointerover"]);ll("onPointerLeave",["pointerout","pointerover"]);mc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));mc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));mc("onBeforeInput",["compositionend","keypress","textInput","paste"]);mc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));mc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));mc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var vu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GR=new Set("cancel close invalid load scroll toggle".split(" ").concat(vu));function h0(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,qS(n,t,void 0,e),e.currentTarget=null}function lw(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var y=n.length-1;0<=y;y--){var E=n[y],p=E.instance,o=E.currentTarget;if(E=E.listener,p!==a&&i.isPropagationStopped())break e;h0(i,E,o),a=p}else for(y=0;y<n.length;y++){if(E=n[y],p=E.instance,o=E.currentTarget,E=E.listener,p!==a&&i.isPropagationStopped())break e;h0(i,E,o),a=p}}}if(Tp)throw e=Xf,Tp=!1,Xf=null,e}function En(e,t){var r=t[cm];r===void 0&&(r=t[cm]=new Set);var n=e+"__bubble";r.has(n)||(uw(t,e,2,!1),r.add(n))}function uf(e,t,r){var n=0;t&&(n|=4),uw(r,e,n,t)}var qd="_reactListening"+Math.random().toString(36).slice(2);function Bu(e){if(!e[qd]){e[qd]=!0,v_.forEach(function(r){r!=="selectionchange"&&(GR.has(r)||uf(r,!1,e),uf(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[qd]||(t[qd]=!0,uf("selectionchange",!1,t))}}function uw(e,t,r,n){switch(K_(t)){case 1:var i=cR;break;case 4:i=lR;break;default:i=ug}r=i.bind(null,t,r,e),i=void 0,!Yf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function df(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var y=n.tag;if(y===3||y===4){var E=n.stateNode.containerInfo;if(E===i||E.nodeType===8&&E.parentNode===i)break;if(y===4)for(y=n.return;y!==null;){var p=y.tag;if((p===3||p===4)&&(p=y.stateNode.containerInfo,p===i||p.nodeType===8&&p.parentNode===i))return;y=y.return}for(;E!==null;){if(y=Xo(E),y===null)return;if(p=y.tag,p===5||p===6){n=a=y;continue e}E=E.parentNode}}n=n.return}M_(function(){var o=a,C=ag(r),_=[];e:{var h=cw.get(e);if(h!==void 0){var b=pg,k=e;switch(e){case"keypress":if(cp(r)===0)break e;case"keydown":case"keyup":b=ER;break;case"focusin":k="focus",b=nf;break;case"focusout":k="blur",b=nf;break;case"beforeblur":case"afterblur":b=nf;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=t0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=pR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=PR;break;case iw:case sw:case aw:b=mR;break;case ow:b=xR;break;case"scroll":b=uR;break;case"wheel":b=DR;break;case"copy":case"cut":case"paste":b=vR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=n0}var f=(t&4)!==0,g=!f&&e==="scroll",s=f?h!==null?h+"Capture":null:h;f=[];for(var w=o,S;w!==null;){S=w;var T=S.stateNode;if(S.tag===5&&T!==null&&(S=T,s!==null&&(T=Iu(w,s),T!=null&&f.push(Fu(w,T,S)))),g)break;w=w.return}0<f.length&&(h=new b(h,k,null,r,C),_.push({event:h,listeners:f}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",h&&r!==Jf&&(k=r.relatedTarget||r.fromElement)&&(Xo(k)||k[ja]))break e;if((b||h)&&(h=C.window===C?C:(h=C.ownerDocument)?h.defaultView||h.parentWindow:window,b?(k=r.relatedTarget||r.toElement,b=o,k=k?Xo(k):null,k!==null&&(g=gc(k),k!==g||k.tag!==5&&k.tag!==6)&&(k=null)):(b=null,k=o),b!==k)){if(f=t0,T="onMouseLeave",s="onMouseEnter",w="mouse",(e==="pointerout"||e==="pointerover")&&(f=n0,T="onPointerLeave",s="onPointerEnter",w="pointer"),g=b==null?h:$c(b),S=k==null?h:$c(k),h=new f(T,w+"leave",b,r,C),h.target=g,h.relatedTarget=S,T=null,Xo(C)===o&&(f=new f(s,w+"enter",k,r,C),f.target=S,f.relatedTarget=g,T=f),g=T,b&&k)t:{for(f=b,s=k,w=0,S=f;S;S=Ac(S))w++;for(S=0,T=s;T;T=Ac(T))S++;for(;0<w-S;)f=Ac(f),w--;for(;0<S-w;)s=Ac(s),S--;for(;w--;){if(f===s||s!==null&&f===s.alternate)break t;f=Ac(f),s=Ac(s)}f=null}else f=null;b!==null&&f0(_,h,b,f,!1),k!==null&&g!==null&&f0(_,g,k,f,!0)}}e:{if(h=o?$c(o):window,b=h.nodeName&&h.nodeName.toLowerCase(),b==="select"||b==="input"&&h.type==="file")var x=BR;else if(a0(h))if(Z_)x=HR;else{x=UR;var O=FR}else(b=h.nodeName)&&b.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=zR);if(x&&(x=x(e,o))){X_(_,x,r,C);break e}O&&O(e,h,o),e==="focusout"&&(O=h._wrapperState)&&O.controlled&&h.type==="number"&&Vf(h,"number",h.value)}switch(O=o?$c(o):window,e){case"focusin":(a0(O)||O.contentEditable==="true")&&(Wc=O,rm=o,ku=null);break;case"focusout":ku=rm=Wc=null;break;case"mousedown":nm=!0;break;case"contextmenu":case"mouseup":case"dragend":nm=!1,d0(_,r,C);break;case"selectionchange":if($R)break;case"keydown":case"keyup":d0(_,r,C)}var P;if(fg)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Hc?Q_(e,r)&&(R="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(R="onCompositionStart");R&&(J_&&r.locale!=="ko"&&(Hc||R!=="onCompositionStart"?R==="onCompositionEnd"&&Hc&&(P=G_()):(yo=C,dg="value"in yo?yo.value:yo.textContent,Hc=!0)),O=Mp(o,R),0<O.length&&(R=new r0(R,e,null,r,C),_.push({event:R,listeners:O}),P?R.data=P:(P=Y_(r),P!==null&&(R.data=P)))),(P=MR?AR(e,r):LR(e,r))&&(o=Mp(o,"onBeforeInput"),0<o.length&&(C=new r0("onBeforeInput","beforeinput",null,r,C),_.push({event:C,listeners:o}),C.data=P))}lw(_,t)})}function Fu(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Mp(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Iu(e,r),a!=null&&n.unshift(Fu(e,a,i)),a=Iu(e,t),a!=null&&n.push(Fu(e,a,i))),e=e.return}return n}function Ac(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function f0(e,t,r,n,i){for(var a=t._reactName,y=[];r!==null&&r!==n;){var E=r,p=E.alternate,o=E.stateNode;if(p!==null&&p===n)break;E.tag===5&&o!==null&&(E=o,i?(p=Iu(r,a),p!=null&&y.unshift(Fu(r,p,E))):i||(p=Iu(r,a),p!=null&&y.push(Fu(r,p,E)))),r=r.return}y.length!==0&&e.push({event:t,listeners:y})}var JR=/\r\n?/g,QR=/\u0000|\uFFFD/g;function m0(e){return(typeof e=="string"?e:""+e).replace(JR,`
`).replace(QR,"")}function Kd(e,t,r){if(t=m0(t),m0(e)!==t&&r)throw Error(pt(425))}function Ap(){}var im=null,sm=null;function am(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var om=typeof setTimeout=="function"?setTimeout:void 0,YR=typeof clearTimeout=="function"?clearTimeout:void 0,g0=typeof Promise=="function"?Promise:void 0,XR=typeof queueMicrotask=="function"?queueMicrotask:typeof g0<"u"?function(e){return g0.resolve(null).then(e).catch(ZR)}:om;function ZR(e){setTimeout(function(){throw e})}function pf(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Lu(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Lu(t)}function Co(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function v0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Sl=Math.random().toString(36).slice(2),wa="__reactFiber$"+Sl,Uu="__reactProps$"+Sl,ja="__reactContainer$"+Sl,cm="__reactEvents$"+Sl,eE="__reactListeners$"+Sl,tE="__reactHandles$"+Sl;function Xo(e){var t=e[wa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[ja]||r[wa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=v0(e);e!==null;){if(r=e[wa])return r;e=v0(e)}return t}e=r,r=e.parentNode}return null}function td(e){return e=e[wa]||e[ja],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function $c(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(pt(33))}function ph(e){return e[Uu]||null}var lm=[],qc=-1;function Lo(e){return{current:e}}function kn(e){0>qc||(e.current=lm[qc],lm[qc]=null,qc--)}function wn(e,t){qc++,lm[qc]=e.current,e.current=t}var Mo={},Yi=Lo(Mo),gs=Lo(!1),oc=Mo;function ul(e,t){var r=e.type.contextTypes;if(!r)return Mo;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function vs(e){return e=e.childContextTypes,e!=null}function Lp(){kn(gs),kn(Yi)}function y0(e,t,r){if(Yi.current!==Mo)throw Error(pt(168));wn(Yi,t),wn(gs,r)}function dw(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(pt(108,FS(e)||"Unknown",i));return Fn({},r,n)}function Np(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mo,oc=Yi.current,wn(Yi,e),wn(gs,gs.current),!0}function _0(e,t,r){var n=e.stateNode;if(!n)throw Error(pt(169));r?(e=dw(e,t,oc),n.__reactInternalMemoizedMergedChildContext=e,kn(gs),kn(Yi),wn(Yi,e)):kn(gs),wn(gs,r)}var Oa=null,hh=!1,hf=!1;function pw(e){Oa===null?Oa=[e]:Oa.push(e)}function rE(e){hh=!0,pw(e)}function No(){if(!hf&&Oa!==null){hf=!0;var e=0,t=dn;try{var r=Oa;for(dn=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Oa=null,hh=!1}catch(i){throw Oa!==null&&(Oa=Oa.slice(e+1)),j_(og,No),i}finally{dn=t,hf=!1}}return null}var Kc=[],Gc=0,jp=null,Bp=0,Ws=[],Vs=0,cc=null,Da=1,Ia="";function Jo(e,t){Kc[Gc++]=Bp,Kc[Gc++]=jp,jp=e,Bp=t}function hw(e,t,r){Ws[Vs++]=Da,Ws[Vs++]=Ia,Ws[Vs++]=cc,cc=e;var n=Da;e=Ia;var i=32-oa(n)-1;n&=~(1<<i),r+=1;var a=32-oa(t)+i;if(30<a){var y=i-i%5;a=(n&(1<<y)-1).toString(32),n>>=y,i-=y,Da=1<<32-oa(t)+i|r<<i|n,Ia=a+e}else Da=1<<a|r<<i|n,Ia=e}function gg(e){e.return!==null&&(Jo(e,1),hw(e,1,0))}function vg(e){for(;e===jp;)jp=Kc[--Gc],Kc[Gc]=null,Bp=Kc[--Gc],Kc[Gc]=null;for(;e===cc;)cc=Ws[--Vs],Ws[Vs]=null,Ia=Ws[--Vs],Ws[Vs]=null,Da=Ws[--Vs],Ws[Vs]=null}var Ms=null,Is=null,On=!1,aa=null;function fw(e,t){var r=qs(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function w0(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ms=e,Is=Co(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ms=e,Is=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=cc!==null?{id:Da,overflow:Ia}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=qs(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ms=e,Is=null,!0):!1;default:return!1}}function um(e){return(e.mode&1)!==0&&(e.flags&128)===0}function dm(e){if(On){var t=Is;if(t){var r=t;if(!w0(e,t)){if(um(e))throw Error(pt(418));t=Co(r.nextSibling);var n=Ms;t&&w0(e,t)?fw(n,r):(e.flags=e.flags&-4097|2,On=!1,Ms=e)}}else{if(um(e))throw Error(pt(418));e.flags=e.flags&-4097|2,On=!1,Ms=e}}}function b0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ms=e}function Gd(e){if(e!==Ms)return!1;if(!On)return b0(e),On=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!am(e.type,e.memoizedProps)),t&&(t=Is)){if(um(e))throw mw(),Error(pt(418));for(;t;)fw(e,t),t=Co(t.nextSibling)}if(b0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(pt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Is=Co(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Is=null}}else Is=Ms?Co(e.stateNode.nextSibling):null;return!0}function mw(){for(var e=Is;e;)e=Co(e.nextSibling)}function dl(){Is=Ms=null,On=!1}function yg(e){aa===null?aa=[e]:aa.push(e)}var nE=Ua.ReactCurrentBatchConfig;function iu(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(pt(309));var n=r.stateNode}if(!n)throw Error(pt(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(y){var E=i.refs;y===null?delete E[a]:E[a]=y},t._stringRef=a,t)}if(typeof e!="string")throw Error(pt(284));if(!r._owner)throw Error(pt(290,e))}return e}function Jd(e,t){throw e=Object.prototype.toString.call(t),Error(pt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function S0(e){var t=e._init;return t(e._payload)}function gw(e){function t(s,w){if(e){var S=s.deletions;S===null?(s.deletions=[w],s.flags|=16):S.push(w)}}function r(s,w){if(!e)return null;for(;w!==null;)t(s,w),w=w.sibling;return null}function n(s,w){for(s=new Map;w!==null;)w.key!==null?s.set(w.key,w):s.set(w.index,w),w=w.sibling;return s}function i(s,w){return s=Oo(s,w),s.index=0,s.sibling=null,s}function a(s,w,S){return s.index=S,e?(S=s.alternate,S!==null?(S=S.index,S<w?(s.flags|=2,w):S):(s.flags|=2,w)):(s.flags|=1048576,w)}function y(s){return e&&s.alternate===null&&(s.flags|=2),s}function E(s,w,S,T){return w===null||w.tag!==6?(w=wf(S,s.mode,T),w.return=s,w):(w=i(w,S),w.return=s,w)}function p(s,w,S,T){var x=S.type;return x===zc?C(s,w,S.props.children,T,S.key):w!==null&&(w.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===fo&&S0(x)===w.type)?(T=i(w,S.props),T.ref=iu(s,w,S),T.return=s,T):(T=mp(S.type,S.key,S.props,null,s.mode,T),T.ref=iu(s,w,S),T.return=s,T)}function o(s,w,S,T){return w===null||w.tag!==4||w.stateNode.containerInfo!==S.containerInfo||w.stateNode.implementation!==S.implementation?(w=bf(S,s.mode,T),w.return=s,w):(w=i(w,S.children||[]),w.return=s,w)}function C(s,w,S,T,x){return w===null||w.tag!==7?(w=ic(S,s.mode,T,x),w.return=s,w):(w=i(w,S),w.return=s,w)}function _(s,w,S){if(typeof w=="string"&&w!==""||typeof w=="number")return w=wf(""+w,s.mode,S),w.return=s,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Bd:return S=mp(w.type,w.key,w.props,null,s.mode,S),S.ref=iu(s,null,w),S.return=s,S;case Uc:return w=bf(w,s.mode,S),w.return=s,w;case fo:var T=w._init;return _(s,T(w._payload),S)}if(mu(w)||Zl(w))return w=ic(w,s.mode,S,null),w.return=s,w;Jd(s,w)}return null}function h(s,w,S,T){var x=w!==null?w.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return x!==null?null:E(s,w,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Bd:return S.key===x?p(s,w,S,T):null;case Uc:return S.key===x?o(s,w,S,T):null;case fo:return x=S._init,h(s,w,x(S._payload),T)}if(mu(S)||Zl(S))return x!==null?null:C(s,w,S,T,null);Jd(s,S)}return null}function b(s,w,S,T,x){if(typeof T=="string"&&T!==""||typeof T=="number")return s=s.get(S)||null,E(w,s,""+T,x);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Bd:return s=s.get(T.key===null?S:T.key)||null,p(w,s,T,x);case Uc:return s=s.get(T.key===null?S:T.key)||null,o(w,s,T,x);case fo:var O=T._init;return b(s,w,S,O(T._payload),x)}if(mu(T)||Zl(T))return s=s.get(S)||null,C(w,s,T,x,null);Jd(w,T)}return null}function k(s,w,S,T){for(var x=null,O=null,P=w,R=w=0,I=null;P!==null&&R<S.length;R++){P.index>R?(I=P,P=null):I=P.sibling;var d=h(s,P,S[R],T);if(d===null){P===null&&(P=I);break}e&&P&&d.alternate===null&&t(s,P),w=a(d,w,R),O===null?x=d:O.sibling=d,O=d,P=I}if(R===S.length)return r(s,P),On&&Jo(s,R),x;if(P===null){for(;R<S.length;R++)P=_(s,S[R],T),P!==null&&(w=a(P,w,R),O===null?x=P:O.sibling=P,O=P);return On&&Jo(s,R),x}for(P=n(s,P);R<S.length;R++)I=b(P,s,R,S[R],T),I!==null&&(e&&I.alternate!==null&&P.delete(I.key===null?R:I.key),w=a(I,w,R),O===null?x=I:O.sibling=I,O=I);return e&&P.forEach(function(v){return t(s,v)}),On&&Jo(s,R),x}function f(s,w,S,T){var x=Zl(S);if(typeof x!="function")throw Error(pt(150));if(S=x.call(S),S==null)throw Error(pt(151));for(var O=x=null,P=w,R=w=0,I=null,d=S.next();P!==null&&!d.done;R++,d=S.next()){P.index>R?(I=P,P=null):I=P.sibling;var v=h(s,P,d.value,T);if(v===null){P===null&&(P=I);break}e&&P&&v.alternate===null&&t(s,P),w=a(v,w,R),O===null?x=v:O.sibling=v,O=v,P=I}if(d.done)return r(s,P),On&&Jo(s,R),x;if(P===null){for(;!d.done;R++,d=S.next())d=_(s,d.value,T),d!==null&&(w=a(d,w,R),O===null?x=d:O.sibling=d,O=d);return On&&Jo(s,R),x}for(P=n(s,P);!d.done;R++,d=S.next())d=b(P,s,R,d.value,T),d!==null&&(e&&d.alternate!==null&&P.delete(d.key===null?R:d.key),w=a(d,w,R),O===null?x=d:O.sibling=d,O=d);return e&&P.forEach(function(c){return t(s,c)}),On&&Jo(s,R),x}function g(s,w,S,T){if(typeof S=="object"&&S!==null&&S.type===zc&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Bd:e:{for(var x=S.key,O=w;O!==null;){if(O.key===x){if(x=S.type,x===zc){if(O.tag===7){r(s,O.sibling),w=i(O,S.props.children),w.return=s,s=w;break e}}else if(O.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===fo&&S0(x)===O.type){r(s,O.sibling),w=i(O,S.props),w.ref=iu(s,O,S),w.return=s,s=w;break e}r(s,O);break}else t(s,O);O=O.sibling}S.type===zc?(w=ic(S.props.children,s.mode,T,S.key),w.return=s,s=w):(T=mp(S.type,S.key,S.props,null,s.mode,T),T.ref=iu(s,w,S),T.return=s,s=T)}return y(s);case Uc:e:{for(O=S.key;w!==null;){if(w.key===O)if(w.tag===4&&w.stateNode.containerInfo===S.containerInfo&&w.stateNode.implementation===S.implementation){r(s,w.sibling),w=i(w,S.children||[]),w.return=s,s=w;break e}else{r(s,w);break}else t(s,w);w=w.sibling}w=bf(S,s.mode,T),w.return=s,s=w}return y(s);case fo:return O=S._init,g(s,w,O(S._payload),T)}if(mu(S))return k(s,w,S,T);if(Zl(S))return f(s,w,S,T);Jd(s,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,w!==null&&w.tag===6?(r(s,w.sibling),w=i(w,S),w.return=s,s=w):(r(s,w),w=wf(S,s.mode,T),w.return=s,s=w),y(s)):r(s,w)}return g}var pl=gw(!0),vw=gw(!1),Fp=Lo(null),Up=null,Jc=null,_g=null;function wg(){_g=Jc=Up=null}function bg(e){var t=Fp.current;kn(Fp),e._currentValue=t}function pm(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function nl(e,t){Up=e,_g=Jc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ms=!0),e.firstContext=null)}function Gs(e){var t=e._currentValue;if(_g!==e)if(e={context:e,memoizedValue:t,next:null},Jc===null){if(Up===null)throw Error(pt(308));Jc=e,Up.dependencies={lanes:0,firstContext:e}}else Jc=Jc.next=e;return t}var Zo=null;function Sg(e){Zo===null?Zo=[e]:Zo.push(e)}function yw(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,Sg(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ba(e,n)}function Ba(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var mo=!1;function Rg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _w(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ma(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Po(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Xr&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Ba(e,r)}return i=n.interleaved,i===null?(t.next=t,Sg(n)):(t.next=i.next,i.next=t),n.interleaved=t,Ba(e,r)}function lp(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,cg(e,r)}}function R0(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var y={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=y:a=a.next=y,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function zp(e,t,r,n){var i=e.updateQueue;mo=!1;var a=i.firstBaseUpdate,y=i.lastBaseUpdate,E=i.shared.pending;if(E!==null){i.shared.pending=null;var p=E,o=p.next;p.next=null,y===null?a=o:y.next=o,y=p;var C=e.alternate;C!==null&&(C=C.updateQueue,E=C.lastBaseUpdate,E!==y&&(E===null?C.firstBaseUpdate=o:E.next=o,C.lastBaseUpdate=p))}if(a!==null){var _=i.baseState;y=0,C=o=p=null,E=a;do{var h=E.lane,b=E.eventTime;if((n&h)===h){C!==null&&(C=C.next={eventTime:b,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var k=e,f=E;switch(h=t,b=r,f.tag){case 1:if(k=f.payload,typeof k=="function"){_=k.call(b,_,h);break e}_=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=f.payload,h=typeof k=="function"?k.call(b,_,h):k,h==null)break e;_=Fn({},_,h);break e;case 2:mo=!0}}E.callback!==null&&E.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[E]:h.push(E))}else b={eventTime:b,lane:h,tag:E.tag,payload:E.payload,callback:E.callback,next:null},C===null?(o=C=b,p=_):C=C.next=b,y|=h;if(E=E.next,E===null){if(E=i.shared.pending,E===null)break;h=E,E=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(C===null&&(p=_),i.baseState=p,i.firstBaseUpdate=o,i.lastBaseUpdate=C,t=i.shared.interleaved,t!==null){i=t;do y|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);uc|=y,e.lanes=y,e.memoizedState=_}}function E0(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(pt(191,i));i.call(n)}}}var rd={},Sa=Lo(rd),zu=Lo(rd),Hu=Lo(rd);function ec(e){if(e===rd)throw Error(pt(174));return e}function Eg(e,t){switch(wn(Hu,t),wn(zu,e),wn(Sa,rd),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:qf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=qf(t,e)}kn(Sa),wn(Sa,t)}function hl(){kn(Sa),kn(zu),kn(Hu)}function ww(e){ec(Hu.current);var t=ec(Sa.current),r=qf(t,e.type);t!==r&&(wn(zu,e),wn(Sa,r))}function kg(e){zu.current===e&&(kn(Sa),kn(zu))}var jn=Lo(0);function Hp(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ff=[];function Cg(){for(var e=0;e<ff.length;e++)ff[e]._workInProgressVersionPrimary=null;ff.length=0}var up=Ua.ReactCurrentDispatcher,mf=Ua.ReactCurrentBatchConfig,lc=0,Bn=null,gi=null,ki=null,Wp=!1,Cu=!1,Wu=0,iE=0;function qi(){throw Error(pt(321))}function Pg(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!la(e[r],t[r]))return!1;return!0}function Tg(e,t,r,n,i,a){if(lc=a,Bn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,up.current=e===null||e.memoizedState===null?cE:lE,e=r(n,i),Cu){a=0;do{if(Cu=!1,Wu=0,25<=a)throw Error(pt(301));a+=1,ki=gi=null,t.updateQueue=null,up.current=uE,e=r(n,i)}while(Cu)}if(up.current=Vp,t=gi!==null&&gi.next!==null,lc=0,ki=gi=Bn=null,Wp=!1,t)throw Error(pt(300));return e}function xg(){var e=Wu!==0;return Wu=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ki===null?Bn.memoizedState=ki=e:ki=ki.next=e,ki}function Js(){if(gi===null){var e=Bn.alternate;e=e!==null?e.memoizedState:null}else e=gi.next;var t=ki===null?Bn.memoizedState:ki.next;if(t!==null)ki=t,gi=e;else{if(e===null)throw Error(pt(310));gi=e,e={memoizedState:gi.memoizedState,baseState:gi.baseState,baseQueue:gi.baseQueue,queue:gi.queue,next:null},ki===null?Bn.memoizedState=ki=e:ki=ki.next=e}return ki}function Vu(e,t){return typeof t=="function"?t(e):t}function gf(e){var t=Js(),r=t.queue;if(r===null)throw Error(pt(311));r.lastRenderedReducer=e;var n=gi,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var y=i.next;i.next=a.next,a.next=y}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var E=y=null,p=null,o=a;do{var C=o.lane;if((lc&C)===C)p!==null&&(p=p.next={lane:0,action:o.action,hasEagerState:o.hasEagerState,eagerState:o.eagerState,next:null}),n=o.hasEagerState?o.eagerState:e(n,o.action);else{var _={lane:C,action:o.action,hasEagerState:o.hasEagerState,eagerState:o.eagerState,next:null};p===null?(E=p=_,y=n):p=p.next=_,Bn.lanes|=C,uc|=C}o=o.next}while(o!==null&&o!==a);p===null?y=n:p.next=E,la(n,t.memoizedState)||(ms=!0),t.memoizedState=n,t.baseState=y,t.baseQueue=p,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,Bn.lanes|=a,uc|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function vf(e){var t=Js(),r=t.queue;if(r===null)throw Error(pt(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var y=i=i.next;do a=e(a,y.action),y=y.next;while(y!==i);la(a,t.memoizedState)||(ms=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function bw(){}function Sw(e,t){var r=Bn,n=Js(),i=t(),a=!la(n.memoizedState,i);if(a&&(n.memoizedState=i,ms=!0),n=n.queue,Og(kw.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||ki!==null&&ki.memoizedState.tag&1){if(r.flags|=2048,$u(9,Ew.bind(null,r,n,i,t),void 0,null),Ci===null)throw Error(pt(349));lc&30||Rw(r,t,i)}return i}function Rw(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Bn.updateQueue,t===null?(t={lastEffect:null,stores:null},Bn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Ew(e,t,r,n){t.value=r,t.getSnapshot=n,Cw(t)&&Pw(e)}function kw(e,t,r){return r(function(){Cw(t)&&Pw(e)})}function Cw(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!la(e,r)}catch{return!0}}function Pw(e){var t=Ba(e,1);t!==null&&ca(t,e,1,-1)}function k0(e){var t=ya();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vu,lastRenderedState:e},t.queue=e,e=e.dispatch=oE.bind(null,Bn,e),[t.memoizedState,e]}function $u(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Bn.updateQueue,t===null?(t={lastEffect:null,stores:null},Bn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Tw(){return Js().memoizedState}function dp(e,t,r,n){var i=ya();Bn.flags|=e,i.memoizedState=$u(1|t,r,void 0,n===void 0?null:n)}function fh(e,t,r,n){var i=Js();n=n===void 0?null:n;var a=void 0;if(gi!==null){var y=gi.memoizedState;if(a=y.destroy,n!==null&&Pg(n,y.deps)){i.memoizedState=$u(t,r,a,n);return}}Bn.flags|=e,i.memoizedState=$u(1|t,r,a,n)}function C0(e,t){return dp(8390656,8,e,t)}function Og(e,t){return fh(2048,8,e,t)}function xw(e,t){return fh(4,2,e,t)}function Ow(e,t){return fh(4,4,e,t)}function Dw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Iw(e,t,r){return r=r!=null?r.concat([e]):null,fh(4,4,Dw.bind(null,t,e),r)}function Dg(){}function Mw(e,t){var r=Js();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Pg(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Aw(e,t){var r=Js();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&Pg(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function Lw(e,t,r){return lc&21?(la(r,t)||(r=U_(),Bn.lanes|=r,uc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ms=!0),e.memoizedState=r)}function sE(e,t){var r=dn;dn=r!==0&&4>r?r:4,e(!0);var n=mf.transition;mf.transition={};try{e(!1),t()}finally{dn=r,mf.transition=n}}function Nw(){return Js().memoizedState}function aE(e,t,r){var n=xo(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},jw(e))Bw(t,r);else if(r=yw(e,t,r,n),r!==null){var i=os();ca(r,e,n,i),Fw(r,t,n)}}function oE(e,t,r){var n=xo(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(jw(e))Bw(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var y=t.lastRenderedState,E=a(y,r);if(i.hasEagerState=!0,i.eagerState=E,la(E,y)){var p=t.interleaved;p===null?(i.next=i,Sg(t)):(i.next=p.next,p.next=i),t.interleaved=i;return}}catch{}finally{}r=yw(e,t,i,n),r!==null&&(i=os(),ca(r,e,n,i),Fw(r,t,n))}}function jw(e){var t=e.alternate;return e===Bn||t!==null&&t===Bn}function Bw(e,t){Cu=Wp=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Fw(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,cg(e,r)}}var Vp={readContext:Gs,useCallback:qi,useContext:qi,useEffect:qi,useImperativeHandle:qi,useInsertionEffect:qi,useLayoutEffect:qi,useMemo:qi,useReducer:qi,useRef:qi,useState:qi,useDebugValue:qi,useDeferredValue:qi,useTransition:qi,useMutableSource:qi,useSyncExternalStore:qi,useId:qi,unstable_isNewReconciler:!1},cE={readContext:Gs,useCallback:function(e,t){return ya().memoizedState=[e,t===void 0?null:t],e},useContext:Gs,useEffect:C0,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,dp(4194308,4,Dw.bind(null,t,e),r)},useLayoutEffect:function(e,t){return dp(4194308,4,e,t)},useInsertionEffect:function(e,t){return dp(4,2,e,t)},useMemo:function(e,t){var r=ya();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=ya();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=aE.bind(null,Bn,e),[n.memoizedState,e]},useRef:function(e){var t=ya();return e={current:e},t.memoizedState=e},useState:k0,useDebugValue:Dg,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=k0(!1),t=e[0];return e=sE.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Bn,i=ya();if(On){if(r===void 0)throw Error(pt(407));r=r()}else{if(r=t(),Ci===null)throw Error(pt(349));lc&30||Rw(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,C0(kw.bind(null,n,a,e),[e]),n.flags|=2048,$u(9,Ew.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=ya(),t=Ci.identifierPrefix;if(On){var r=Ia,n=Da;r=(n&~(1<<32-oa(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Wu++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=iE++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},lE={readContext:Gs,useCallback:Mw,useContext:Gs,useEffect:Og,useImperativeHandle:Iw,useInsertionEffect:xw,useLayoutEffect:Ow,useMemo:Aw,useReducer:gf,useRef:Tw,useState:function(){return gf(Vu)},useDebugValue:Dg,useDeferredValue:function(e){var t=Js();return Lw(t,gi.memoizedState,e)},useTransition:function(){var e=gf(Vu)[0],t=Js().memoizedState;return[e,t]},useMutableSource:bw,useSyncExternalStore:Sw,useId:Nw,unstable_isNewReconciler:!1},uE={readContext:Gs,useCallback:Mw,useContext:Gs,useEffect:Og,useImperativeHandle:Iw,useInsertionEffect:xw,useLayoutEffect:Ow,useMemo:Aw,useReducer:vf,useRef:Tw,useState:function(){return vf(Vu)},useDebugValue:Dg,useDeferredValue:function(e){var t=Js();return gi===null?t.memoizedState=e:Lw(t,gi.memoizedState,e)},useTransition:function(){var e=vf(Vu)[0],t=Js().memoizedState;return[e,t]},useMutableSource:bw,useSyncExternalStore:Sw,useId:Nw,unstable_isNewReconciler:!1};function ra(e,t){if(e&&e.defaultProps){t=Fn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function hm(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Fn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var mh={isMounted:function(e){return(e=e._reactInternals)?gc(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=os(),i=xo(e),a=Ma(n,i);a.payload=t,r!=null&&(a.callback=r),t=Po(e,a,i),t!==null&&(ca(t,e,i,n),lp(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=os(),i=xo(e),a=Ma(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=Po(e,a,i),t!==null&&(ca(t,e,i,n),lp(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=os(),n=xo(e),i=Ma(r,n);i.tag=2,t!=null&&(i.callback=t),t=Po(e,i,n),t!==null&&(ca(t,e,n,r),lp(t,e,n))}};function P0(e,t,r,n,i,a,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,y):t.prototype&&t.prototype.isPureReactComponent?!ju(r,n)||!ju(i,a):!0}function Uw(e,t,r){var n=!1,i=Mo,a=t.contextType;return typeof a=="object"&&a!==null?a=Gs(a):(i=vs(t)?oc:Yi.current,n=t.contextTypes,a=(n=n!=null)?ul(e,i):Mo),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=mh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function T0(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&mh.enqueueReplaceState(t,t.state,null)}function fm(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},Rg(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Gs(a):(a=vs(t)?oc:Yi.current,i.context=ul(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(hm(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&mh.enqueueReplaceState(i,i.state,null),zp(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function fl(e,t){try{var r="",n=t;do r+=BS(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function yf(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function mm(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var dE=typeof WeakMap=="function"?WeakMap:Map;function zw(e,t,r){r=Ma(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){qp||(qp=!0,km=n),mm(e,t)},r}function Hw(e,t,r){r=Ma(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){mm(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){mm(e,t),typeof n!="function"&&(To===null?To=new Set([this]):To.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),r}function x0(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new dE;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=kE.bind(null,e,t,r),t.then(e,e))}function O0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function D0(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Ma(-1,1),t.tag=2,Po(r,t,1))),r.lanes|=1),e)}var pE=Ua.ReactCurrentOwner,ms=!1;function as(e,t,r,n){t.child=e===null?vw(t,null,r,n):pl(t,e.child,r,n)}function I0(e,t,r,n,i){r=r.render;var a=t.ref;return nl(t,i),n=Tg(e,t,r,n,a,i),r=xg(),e!==null&&!ms?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Fa(e,t,i)):(On&&r&&gg(t),t.flags|=1,as(e,t,n,i),t.child)}function M0(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!Fg(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Ww(e,t,a,n,i)):(e=mp(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var y=a.memoizedProps;if(r=r.compare,r=r!==null?r:ju,r(y,n)&&e.ref===t.ref)return Fa(e,t,i)}return t.flags|=1,e=Oo(a,n),e.ref=t.ref,e.return=t,t.child=e}function Ww(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(ju(a,n)&&e.ref===t.ref)if(ms=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(ms=!0);else return t.lanes=e.lanes,Fa(e,t,i)}return gm(e,t,r,n,i)}function Vw(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},wn(Yc,Os),Os|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,wn(Yc,Os),Os|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,wn(Yc,Os),Os|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,wn(Yc,Os),Os|=n;return as(e,t,i,r),t.child}function $w(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function gm(e,t,r,n,i){var a=vs(r)?oc:Yi.current;return a=ul(t,a),nl(t,i),r=Tg(e,t,r,n,a,i),n=xg(),e!==null&&!ms?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Fa(e,t,i)):(On&&n&&gg(t),t.flags|=1,as(e,t,r,i),t.child)}function A0(e,t,r,n,i){if(vs(r)){var a=!0;Np(t)}else a=!1;if(nl(t,i),t.stateNode===null)pp(e,t),Uw(t,r,n),fm(t,r,n,i),n=!0;else if(e===null){var y=t.stateNode,E=t.memoizedProps;y.props=E;var p=y.context,o=r.contextType;typeof o=="object"&&o!==null?o=Gs(o):(o=vs(r)?oc:Yi.current,o=ul(t,o));var C=r.getDerivedStateFromProps,_=typeof C=="function"||typeof y.getSnapshotBeforeUpdate=="function";_||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==n||p!==o)&&T0(t,y,n,o),mo=!1;var h=t.memoizedState;y.state=h,zp(t,n,y,i),p=t.memoizedState,E!==n||h!==p||gs.current||mo?(typeof C=="function"&&(hm(t,r,C,n),p=t.memoizedState),(E=mo||P0(t,r,E,n,h,p,o))?(_||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=p),y.props=n,y.state=p,y.context=o,n=E):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{y=t.stateNode,_w(e,t),E=t.memoizedProps,o=t.type===t.elementType?E:ra(t.type,E),y.props=o,_=t.pendingProps,h=y.context,p=r.contextType,typeof p=="object"&&p!==null?p=Gs(p):(p=vs(r)?oc:Yi.current,p=ul(t,p));var b=r.getDerivedStateFromProps;(C=typeof b=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(E!==_||h!==p)&&T0(t,y,n,p),mo=!1,h=t.memoizedState,y.state=h,zp(t,n,y,i);var k=t.memoizedState;E!==_||h!==k||gs.current||mo?(typeof b=="function"&&(hm(t,r,b,n),k=t.memoizedState),(o=mo||P0(t,r,o,n,h,k,p)||!1)?(C||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(n,k,p),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(n,k,p)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||E===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=k),y.props=n,y.state=k,y.context=p,n=o):(typeof y.componentDidUpdate!="function"||E===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||E===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return vm(e,t,r,n,a,i)}function vm(e,t,r,n,i,a){$w(e,t);var y=(t.flags&128)!==0;if(!n&&!y)return i&&_0(t,r,!1),Fa(e,t,a);n=t.stateNode,pE.current=t;var E=y&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&y?(t.child=pl(t,e.child,null,a),t.child=pl(t,null,E,a)):as(e,t,E,a),t.memoizedState=n.state,i&&_0(t,r,!0),t.child}function qw(e){var t=e.stateNode;t.pendingContext?y0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&y0(e,t.context,!1),Eg(e,t.containerInfo)}function L0(e,t,r,n,i){return dl(),yg(i),t.flags|=256,as(e,t,r,n),t.child}var ym={dehydrated:null,treeContext:null,retryLane:0};function _m(e){return{baseLanes:e,cachePool:null,transitions:null}}function Kw(e,t,r){var n=t.pendingProps,i=jn.current,a=!1,y=(t.flags&128)!==0,E;if((E=y)||(E=e!==null&&e.memoizedState===null?!1:(i&2)!==0),E?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),wn(jn,i&1),e===null)return dm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=n.children,e=n.fallback,a?(n=t.mode,a=t.child,y={mode:"hidden",children:y},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=y):a=yh(y,n,0,null),e=ic(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=_m(r),t.memoizedState=ym,e):Ig(t,y));if(i=e.memoizedState,i!==null&&(E=i.dehydrated,E!==null))return hE(e,t,y,n,E,i,r);if(a){a=n.fallback,y=t.mode,i=e.child,E=i.sibling;var p={mode:"hidden",children:n.children};return!(y&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=p,t.deletions=null):(n=Oo(i,p),n.subtreeFlags=i.subtreeFlags&14680064),E!==null?a=Oo(E,a):(a=ic(a,y,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,y=e.child.memoizedState,y=y===null?_m(r):{baseLanes:y.baseLanes|r,cachePool:null,transitions:y.transitions},a.memoizedState=y,a.childLanes=e.childLanes&~r,t.memoizedState=ym,n}return a=e.child,e=a.sibling,n=Oo(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ig(e,t){return t=yh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Qd(e,t,r,n){return n!==null&&yg(n),pl(t,e.child,null,r),e=Ig(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hE(e,t,r,n,i,a,y){if(r)return t.flags&256?(t.flags&=-257,n=yf(Error(pt(422))),Qd(e,t,y,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=yh({mode:"visible",children:n.children},i,0,null),a=ic(a,i,y,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&pl(t,e.child,null,y),t.child.memoizedState=_m(y),t.memoizedState=ym,a);if(!(t.mode&1))return Qd(e,t,y,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var E=n.dgst;return n=E,a=Error(pt(419)),n=yf(a,n,void 0),Qd(e,t,y,n)}if(E=(y&e.childLanes)!==0,ms||E){if(n=Ci,n!==null){switch(y&-y){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|y)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Ba(e,i),ca(n,e,i,-1))}return Bg(),n=yf(Error(pt(421))),Qd(e,t,y,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=CE.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Is=Co(i.nextSibling),Ms=t,On=!0,aa=null,e!==null&&(Ws[Vs++]=Da,Ws[Vs++]=Ia,Ws[Vs++]=cc,Da=e.id,Ia=e.overflow,cc=t),t=Ig(t,n.children),t.flags|=4096,t)}function N0(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),pm(e.return,t,r)}function _f(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function Gw(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(as(e,t,n.children,r),n=jn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&N0(e,r,t);else if(e.tag===19)N0(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(wn(jn,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Hp(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),_f(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Hp(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}_f(t,!0,r,null,a);break;case"together":_f(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function pp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Fa(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),uc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(pt(153));if(t.child!==null){for(e=t.child,r=Oo(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Oo(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function fE(e,t,r){switch(t.tag){case 3:qw(t),dl();break;case 5:ww(t);break;case 1:vs(t.type)&&Np(t);break;case 4:Eg(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;wn(Fp,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(wn(jn,jn.current&1),t.flags|=128,null):r&t.child.childLanes?Kw(e,t,r):(wn(jn,jn.current&1),e=Fa(e,t,r),e!==null?e.sibling:null);wn(jn,jn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Gw(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),wn(jn,jn.current),n)break;return null;case 22:case 23:return t.lanes=0,Vw(e,t,r)}return Fa(e,t,r)}var Jw,wm,Qw,Yw;Jw=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};wm=function(){};Qw=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,ec(Sa.current);var a=null;switch(r){case"input":i=Hf(e,i),n=Hf(e,n),a=[];break;case"select":i=Fn({},i,{value:void 0}),n=Fn({},n,{value:void 0}),a=[];break;case"textarea":i=$f(e,i),n=$f(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ap)}Kf(r,n);var y;r=null;for(o in i)if(!n.hasOwnProperty(o)&&i.hasOwnProperty(o)&&i[o]!=null)if(o==="style"){var E=i[o];for(y in E)E.hasOwnProperty(y)&&(r||(r={}),r[y]="")}else o!=="dangerouslySetInnerHTML"&&o!=="children"&&o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ou.hasOwnProperty(o)?a||(a=[]):(a=a||[]).push(o,null));for(o in n){var p=n[o];if(E=i!=null?i[o]:void 0,n.hasOwnProperty(o)&&p!==E&&(p!=null||E!=null))if(o==="style")if(E){for(y in E)!E.hasOwnProperty(y)||p&&p.hasOwnProperty(y)||(r||(r={}),r[y]="");for(y in p)p.hasOwnProperty(y)&&E[y]!==p[y]&&(r||(r={}),r[y]=p[y])}else r||(a||(a=[]),a.push(o,r)),r=p;else o==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,E=E?E.__html:void 0,p!=null&&E!==p&&(a=a||[]).push(o,p)):o==="children"?typeof p!="string"&&typeof p!="number"||(a=a||[]).push(o,""+p):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&(Ou.hasOwnProperty(o)?(p!=null&&o==="onScroll"&&En("scroll",e),a||E===p||(a=[])):(a=a||[]).push(o,p))}r&&(a=a||[]).push("style",r);var o=a;(t.updateQueue=o)&&(t.flags|=4)}};Yw=function(e,t,r,n){r!==n&&(t.flags|=4)};function su(e,t){if(!On)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ki(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function mE(e,t,r){var n=t.pendingProps;switch(vg(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ki(t),null;case 1:return vs(t.type)&&Lp(),Ki(t),null;case 3:return n=t.stateNode,hl(),kn(gs),kn(Yi),Cg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Gd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,aa!==null&&(Tm(aa),aa=null))),wm(e,t),Ki(t),null;case 5:kg(t);var i=ec(Hu.current);if(r=t.type,e!==null&&t.stateNode!=null)Qw(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(pt(166));return Ki(t),null}if(e=ec(Sa.current),Gd(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[wa]=t,n[Uu]=a,e=(t.mode&1)!==0,r){case"dialog":En("cancel",n),En("close",n);break;case"iframe":case"object":case"embed":En("load",n);break;case"video":case"audio":for(i=0;i<vu.length;i++)En(vu[i],n);break;case"source":En("error",n);break;case"img":case"image":case"link":En("error",n),En("load",n);break;case"details":En("toggle",n);break;case"input":$v(n,a),En("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},En("invalid",n);break;case"textarea":Kv(n,a),En("invalid",n)}Kf(r,a),i=null;for(var y in a)if(a.hasOwnProperty(y)){var E=a[y];y==="children"?typeof E=="string"?n.textContent!==E&&(a.suppressHydrationWarning!==!0&&Kd(n.textContent,E,e),i=["children",E]):typeof E=="number"&&n.textContent!==""+E&&(a.suppressHydrationWarning!==!0&&Kd(n.textContent,E,e),i=["children",""+E]):Ou.hasOwnProperty(y)&&E!=null&&y==="onScroll"&&En("scroll",n)}switch(r){case"input":Fd(n),qv(n,a,!0);break;case"textarea":Fd(n),Gv(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Ap)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{y=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=k_(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=y.createElement(r,{is:n.is}):(e=y.createElement(r),r==="select"&&(y=e,n.multiple?y.multiple=!0:n.size&&(y.size=n.size))):e=y.createElementNS(e,r),e[wa]=t,e[Uu]=n,Jw(e,t,!1,!1),t.stateNode=e;e:{switch(y=Gf(r,n),r){case"dialog":En("cancel",e),En("close",e),i=n;break;case"iframe":case"object":case"embed":En("load",e),i=n;break;case"video":case"audio":for(i=0;i<vu.length;i++)En(vu[i],e);i=n;break;case"source":En("error",e),i=n;break;case"img":case"image":case"link":En("error",e),En("load",e),i=n;break;case"details":En("toggle",e),i=n;break;case"input":$v(e,n),i=Hf(e,n),En("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Fn({},n,{value:void 0}),En("invalid",e);break;case"textarea":Kv(e,n),i=$f(e,n),En("invalid",e);break;default:i=n}Kf(r,i),E=i;for(a in E)if(E.hasOwnProperty(a)){var p=E[a];a==="style"?T_(e,p):a==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&C_(e,p)):a==="children"?typeof p=="string"?(r!=="textarea"||p!=="")&&Du(e,p):typeof p=="number"&&Du(e,""+p):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ou.hasOwnProperty(a)?p!=null&&a==="onScroll"&&En("scroll",e):p!=null&&rg(e,a,p,y))}switch(r){case"input":Fd(e),qv(e,n,!1);break;case"textarea":Fd(e),Gv(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Io(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Zc(e,!!n.multiple,a,!1):n.defaultValue!=null&&Zc(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ap)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ki(t),null;case 6:if(e&&t.stateNode!=null)Yw(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(pt(166));if(r=ec(Hu.current),ec(Sa.current),Gd(t)){if(n=t.stateNode,r=t.memoizedProps,n[wa]=t,(a=n.nodeValue!==r)&&(e=Ms,e!==null))switch(e.tag){case 3:Kd(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Kd(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[wa]=t,t.stateNode=n}return Ki(t),null;case 13:if(kn(jn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(On&&Is!==null&&t.mode&1&&!(t.flags&128))mw(),dl(),t.flags|=98560,a=!1;else if(a=Gd(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(pt(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(pt(317));a[wa]=t}else dl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ki(t),a=!1}else aa!==null&&(Tm(aa),aa=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||jn.current&1?vi===0&&(vi=3):Bg())),t.updateQueue!==null&&(t.flags|=4),Ki(t),null);case 4:return hl(),wm(e,t),e===null&&Bu(t.stateNode.containerInfo),Ki(t),null;case 10:return bg(t.type._context),Ki(t),null;case 17:return vs(t.type)&&Lp(),Ki(t),null;case 19:if(kn(jn),a=t.memoizedState,a===null)return Ki(t),null;if(n=(t.flags&128)!==0,y=a.rendering,y===null)if(n)su(a,!1);else{if(vi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=Hp(e),y!==null){for(t.flags|=128,su(a,!1),n=y.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,y=a.alternate,y===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=y.childLanes,a.lanes=y.lanes,a.child=y.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=y.memoizedProps,a.memoizedState=y.memoizedState,a.updateQueue=y.updateQueue,a.type=y.type,e=y.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return wn(jn,jn.current&1|2),t.child}e=e.sibling}a.tail!==null&&Zn()>ml&&(t.flags|=128,n=!0,su(a,!1),t.lanes=4194304)}else{if(!n)if(e=Hp(y),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),su(a,!0),a.tail===null&&a.tailMode==="hidden"&&!y.alternate&&!On)return Ki(t),null}else 2*Zn()-a.renderingStartTime>ml&&r!==1073741824&&(t.flags|=128,n=!0,su(a,!1),t.lanes=4194304);a.isBackwards?(y.sibling=t.child,t.child=y):(r=a.last,r!==null?r.sibling=y:t.child=y,a.last=y)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Zn(),t.sibling=null,r=jn.current,wn(jn,n?r&1|2:r&1),t):(Ki(t),null);case 22:case 23:return jg(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Os&1073741824&&(Ki(t),t.subtreeFlags&6&&(t.flags|=8192)):Ki(t),null;case 24:return null;case 25:return null}throw Error(pt(156,t.tag))}function gE(e,t){switch(vg(t),t.tag){case 1:return vs(t.type)&&Lp(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hl(),kn(gs),kn(Yi),Cg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return kg(t),null;case 13:if(kn(jn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(pt(340));dl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return kn(jn),null;case 4:return hl(),null;case 10:return bg(t.type._context),null;case 22:case 23:return jg(),null;case 24:return null;default:return null}}var Yd=!1,Ji=!1,vE=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function Qc(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Hn(e,t,n)}else r.current=null}function bm(e,t,r){try{r()}catch(n){Hn(e,t,n)}}var j0=!1;function yE(e,t){if(im=Dp,e=rw(),mg(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var y=0,E=-1,p=-1,o=0,C=0,_=e,h=null;t:for(;;){for(var b;_!==r||i!==0&&_.nodeType!==3||(E=y+i),_!==a||n!==0&&_.nodeType!==3||(p=y+n),_.nodeType===3&&(y+=_.nodeValue.length),(b=_.firstChild)!==null;)h=_,_=b;for(;;){if(_===e)break t;if(h===r&&++o===i&&(E=y),h===a&&++C===n&&(p=y),(b=_.nextSibling)!==null)break;_=h,h=_.parentNode}_=b}r=E===-1||p===-1?null:{start:E,end:p}}else r=null}r=r||{start:0,end:0}}else r=null;for(sm={focusedElem:e,selectionRange:r},Dp=!1,Vt=t;Vt!==null;)if(t=Vt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Vt=e;else for(;Vt!==null;){t=Vt;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var f=k.memoizedProps,g=k.memoizedState,s=t.stateNode,w=s.getSnapshotBeforeUpdate(t.elementType===t.type?f:ra(t.type,f),g);s.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(pt(163))}}catch(T){Hn(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,Vt=e;break}Vt=t.return}return k=j0,j0=!1,k}function Pu(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&bm(t,r,a)}i=i.next}while(i!==n)}}function gh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Sm(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Xw(e){var t=e.alternate;t!==null&&(e.alternate=null,Xw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[wa],delete t[Uu],delete t[cm],delete t[eE],delete t[tE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zw(e){return e.tag===5||e.tag===3||e.tag===4}function B0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ap));else if(n!==4&&(e=e.child,e!==null))for(Rm(e,t,r),e=e.sibling;e!==null;)Rm(e,t,r),e=e.sibling}function Em(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Em(e,t,r),e=e.sibling;e!==null;)Em(e,t,r),e=e.sibling}var Fi=null,na=!1;function uo(e,t,r){for(r=r.child;r!==null;)e1(e,t,r),r=r.sibling}function e1(e,t,r){if(ba&&typeof ba.onCommitFiberUnmount=="function")try{ba.onCommitFiberUnmount(ch,r)}catch{}switch(r.tag){case 5:Ji||Qc(r,t);case 6:var n=Fi,i=na;Fi=null,uo(e,t,r),Fi=n,na=i,Fi!==null&&(na?(e=Fi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Fi.removeChild(r.stateNode));break;case 18:Fi!==null&&(na?(e=Fi,r=r.stateNode,e.nodeType===8?pf(e.parentNode,r):e.nodeType===1&&pf(e,r),Lu(e)):pf(Fi,r.stateNode));break;case 4:n=Fi,i=na,Fi=r.stateNode.containerInfo,na=!0,uo(e,t,r),Fi=n,na=i;break;case 0:case 11:case 14:case 15:if(!Ji&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,y=a.destroy;a=a.tag,y!==void 0&&(a&2||a&4)&&bm(r,t,y),i=i.next}while(i!==n)}uo(e,t,r);break;case 1:if(!Ji&&(Qc(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(E){Hn(r,t,E)}uo(e,t,r);break;case 21:uo(e,t,r);break;case 22:r.mode&1?(Ji=(n=Ji)||r.memoizedState!==null,uo(e,t,r),Ji=n):uo(e,t,r);break;default:uo(e,t,r)}}function F0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new vE),t.forEach(function(n){var i=PE.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function ta(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,y=t,E=y;e:for(;E!==null;){switch(E.tag){case 5:Fi=E.stateNode,na=!1;break e;case 3:Fi=E.stateNode.containerInfo,na=!0;break e;case 4:Fi=E.stateNode.containerInfo,na=!0;break e}E=E.return}if(Fi===null)throw Error(pt(160));e1(a,y,i),Fi=null,na=!1;var p=i.alternate;p!==null&&(p.return=null),i.return=null}catch(o){Hn(i,t,o)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)t1(t,e),t=t.sibling}function t1(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ta(t,e),va(e),n&4){try{Pu(3,e,e.return),gh(3,e)}catch(f){Hn(e,e.return,f)}try{Pu(5,e,e.return)}catch(f){Hn(e,e.return,f)}}break;case 1:ta(t,e),va(e),n&512&&r!==null&&Qc(r,r.return);break;case 5:if(ta(t,e),va(e),n&512&&r!==null&&Qc(r,r.return),e.flags&32){var i=e.stateNode;try{Du(i,"")}catch(f){Hn(e,e.return,f)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,y=r!==null?r.memoizedProps:a,E=e.type,p=e.updateQueue;if(e.updateQueue=null,p!==null)try{E==="input"&&a.type==="radio"&&a.name!=null&&R_(i,a),Gf(E,y);var o=Gf(E,a);for(y=0;y<p.length;y+=2){var C=p[y],_=p[y+1];C==="style"?T_(i,_):C==="dangerouslySetInnerHTML"?C_(i,_):C==="children"?Du(i,_):rg(i,C,_,o)}switch(E){case"input":Wf(i,a);break;case"textarea":E_(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var b=a.value;b!=null?Zc(i,!!a.multiple,b,!1):h!==!!a.multiple&&(a.defaultValue!=null?Zc(i,!!a.multiple,a.defaultValue,!0):Zc(i,!!a.multiple,a.multiple?[]:"",!1))}i[Uu]=a}catch(f){Hn(e,e.return,f)}}break;case 6:if(ta(t,e),va(e),n&4){if(e.stateNode===null)throw Error(pt(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(f){Hn(e,e.return,f)}}break;case 3:if(ta(t,e),va(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Lu(t.containerInfo)}catch(f){Hn(e,e.return,f)}break;case 4:ta(t,e),va(e);break;case 13:ta(t,e),va(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(Lg=Zn())),n&4&&F0(e);break;case 22:if(C=r!==null&&r.memoizedState!==null,e.mode&1?(Ji=(o=Ji)||C,ta(t,e),Ji=o):ta(t,e),va(e),n&8192){if(o=e.memoizedState!==null,(e.stateNode.isHidden=o)&&!C&&e.mode&1)for(Vt=e,C=e.child;C!==null;){for(_=Vt=C;Vt!==null;){switch(h=Vt,b=h.child,h.tag){case 0:case 11:case 14:case 15:Pu(4,h,h.return);break;case 1:Qc(h,h.return);var k=h.stateNode;if(typeof k.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(f){Hn(n,r,f)}}break;case 5:Qc(h,h.return);break;case 22:if(h.memoizedState!==null){z0(_);continue}}b!==null?(b.return=h,Vt=b):z0(_)}C=C.sibling}e:for(C=null,_=e;;){if(_.tag===5){if(C===null){C=_;try{i=_.stateNode,o?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(E=_.stateNode,p=_.memoizedProps.style,y=p!=null&&p.hasOwnProperty("display")?p.display:null,E.style.display=P_("display",y))}catch(f){Hn(e,e.return,f)}}}else if(_.tag===6){if(C===null)try{_.stateNode.nodeValue=o?"":_.memoizedProps}catch(f){Hn(e,e.return,f)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===e)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===e)break e;for(;_.sibling===null;){if(_.return===null||_.return===e)break e;C===_&&(C=null),_=_.return}C===_&&(C=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:ta(t,e),va(e),n&4&&F0(e);break;case 21:break;default:ta(t,e),va(e)}}function va(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Zw(r)){var n=r;break e}r=r.return}throw Error(pt(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Du(i,""),n.flags&=-33);var a=B0(e);Em(e,a,i);break;case 3:case 4:var y=n.stateNode.containerInfo,E=B0(e);Rm(e,E,y);break;default:throw Error(pt(161))}}catch(p){Hn(e,e.return,p)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _E(e,t,r){Vt=e,r1(e)}function r1(e,t,r){for(var n=(e.mode&1)!==0;Vt!==null;){var i=Vt,a=i.child;if(i.tag===22&&n){var y=i.memoizedState!==null||Yd;if(!y){var E=i.alternate,p=E!==null&&E.memoizedState!==null||Ji;E=Yd;var o=Ji;if(Yd=y,(Ji=p)&&!o)for(Vt=i;Vt!==null;)y=Vt,p=y.child,y.tag===22&&y.memoizedState!==null?H0(i):p!==null?(p.return=y,Vt=p):H0(i);for(;a!==null;)Vt=a,r1(a),a=a.sibling;Vt=i,Yd=E,Ji=o}U0(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,Vt=a):U0(e)}}function U0(e){for(;Vt!==null;){var t=Vt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ji||gh(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ji)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:ra(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&E0(t,a,n);break;case 3:var y=t.updateQueue;if(y!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}E0(t,y,r)}break;case 5:var E=t.stateNode;if(r===null&&t.flags&4){r=E;var p=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&r.focus();break;case"img":p.src&&(r.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var o=t.alternate;if(o!==null){var C=o.memoizedState;if(C!==null){var _=C.dehydrated;_!==null&&Lu(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(pt(163))}Ji||t.flags&512&&Sm(t)}catch(h){Hn(t,t.return,h)}}if(t===e){Vt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Vt=r;break}Vt=t.return}}function z0(e){for(;Vt!==null;){var t=Vt;if(t===e){Vt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Vt=r;break}Vt=t.return}}function H0(e){for(;Vt!==null;){var t=Vt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{gh(4,t)}catch(p){Hn(t,r,p)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(p){Hn(t,i,p)}}var a=t.return;try{Sm(t)}catch(p){Hn(t,a,p)}break;case 5:var y=t.return;try{Sm(t)}catch(p){Hn(t,y,p)}}}catch(p){Hn(t,t.return,p)}if(t===e){Vt=null;break}var E=t.sibling;if(E!==null){E.return=t.return,Vt=E;break}Vt=t.return}}var wE=Math.ceil,$p=Ua.ReactCurrentDispatcher,Mg=Ua.ReactCurrentOwner,Ks=Ua.ReactCurrentBatchConfig,Xr=0,Ci=null,ci=null,Ui=0,Os=0,Yc=Lo(0),vi=0,qu=null,uc=0,vh=0,Ag=0,Tu=null,fs=null,Lg=0,ml=1/0,xa=null,qp=!1,km=null,To=null,Xd=!1,_o=null,Kp=0,xu=0,Cm=null,hp=-1,fp=0;function os(){return Xr&6?Zn():hp!==-1?hp:hp=Zn()}function xo(e){return e.mode&1?Xr&2&&Ui!==0?Ui&-Ui:nE.transition!==null?(fp===0&&(fp=U_()),fp):(e=dn,e!==0||(e=window.event,e=e===void 0?16:K_(e.type)),e):1}function ca(e,t,r,n){if(50<xu)throw xu=0,Cm=null,Error(pt(185));Zu(e,r,n),(!(Xr&2)||e!==Ci)&&(e===Ci&&(!(Xr&2)&&(vh|=r),vi===4&&vo(e,Ui)),ys(e,n),r===1&&Xr===0&&!(t.mode&1)&&(ml=Zn()+500,hh&&No()))}function ys(e,t){var r=e.callbackNode;nR(e,t);var n=Op(e,e===Ci?Ui:0);if(n===0)r!==null&&Yv(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Yv(r),t===1)e.tag===0?rE(W0.bind(null,e)):pw(W0.bind(null,e)),XR(function(){!(Xr&6)&&No()}),r=null;else{switch(z_(n)){case 1:r=og;break;case 4:r=B_;break;case 16:r=xp;break;case 536870912:r=F_;break;default:r=xp}r=u1(r,n1.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function n1(e,t){if(hp=-1,fp=0,Xr&6)throw Error(pt(327));var r=e.callbackNode;if(il()&&e.callbackNode!==r)return null;var n=Op(e,e===Ci?Ui:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Gp(e,n);else{t=n;var i=Xr;Xr|=2;var a=s1();(Ci!==e||Ui!==t)&&(xa=null,ml=Zn()+500,nc(e,t));do try{RE();break}catch(E){i1(e,E)}while(!0);wg(),$p.current=a,Xr=i,ci!==null?t=0:(Ci=null,Ui=0,t=vi)}if(t!==0){if(t===2&&(i=Zf(e),i!==0&&(n=i,t=Pm(e,i))),t===1)throw r=qu,nc(e,0),vo(e,n),ys(e,Zn()),r;if(t===6)vo(e,n);else{if(i=e.current.alternate,!(n&30)&&!bE(i)&&(t=Gp(e,n),t===2&&(a=Zf(e),a!==0&&(n=a,t=Pm(e,a))),t===1))throw r=qu,nc(e,0),vo(e,n),ys(e,Zn()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(pt(345));case 2:Qo(e,fs,xa);break;case 3:if(vo(e,n),(n&130023424)===n&&(t=Lg+500-Zn(),10<t)){if(Op(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){os(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=om(Qo.bind(null,e,fs,xa),t);break}Qo(e,fs,xa);break;case 4:if(vo(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var y=31-oa(n);a=1<<y,y=t[y],y>i&&(i=y),n&=~a}if(n=i,n=Zn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*wE(n/1960))-n,10<n){e.timeoutHandle=om(Qo.bind(null,e,fs,xa),n);break}Qo(e,fs,xa);break;case 5:Qo(e,fs,xa);break;default:throw Error(pt(329))}}}return ys(e,Zn()),e.callbackNode===r?n1.bind(null,e):null}function Pm(e,t){var r=Tu;return e.current.memoizedState.isDehydrated&&(nc(e,t).flags|=256),e=Gp(e,t),e!==2&&(t=fs,fs=r,t!==null&&Tm(t)),e}function Tm(e){fs===null?fs=e:fs.push.apply(fs,e)}function bE(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!la(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vo(e,t){for(t&=~Ag,t&=~vh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-oa(t),n=1<<r;e[r]=-1,t&=~n}}function W0(e){if(Xr&6)throw Error(pt(327));il();var t=Op(e,0);if(!(t&1))return ys(e,Zn()),null;var r=Gp(e,t);if(e.tag!==0&&r===2){var n=Zf(e);n!==0&&(t=n,r=Pm(e,n))}if(r===1)throw r=qu,nc(e,0),vo(e,t),ys(e,Zn()),r;if(r===6)throw Error(pt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qo(e,fs,xa),ys(e,Zn()),null}function Ng(e,t){var r=Xr;Xr|=1;try{return e(t)}finally{Xr=r,Xr===0&&(ml=Zn()+500,hh&&No())}}function dc(e){_o!==null&&_o.tag===0&&!(Xr&6)&&il();var t=Xr;Xr|=1;var r=Ks.transition,n=dn;try{if(Ks.transition=null,dn=1,e)return e()}finally{dn=n,Ks.transition=r,Xr=t,!(Xr&6)&&No()}}function jg(){Os=Yc.current,kn(Yc)}function nc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,YR(r)),ci!==null)for(r=ci.return;r!==null;){var n=r;switch(vg(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Lp();break;case 3:hl(),kn(gs),kn(Yi),Cg();break;case 5:kg(n);break;case 4:hl();break;case 13:kn(jn);break;case 19:kn(jn);break;case 10:bg(n.type._context);break;case 22:case 23:jg()}r=r.return}if(Ci=e,ci=e=Oo(e.current,null),Ui=Os=t,vi=0,qu=null,Ag=vh=uc=0,fs=Tu=null,Zo!==null){for(t=0;t<Zo.length;t++)if(r=Zo[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var y=a.next;a.next=i,n.next=y}r.pending=n}Zo=null}return e}function i1(e,t){do{var r=ci;try{if(wg(),up.current=Vp,Wp){for(var n=Bn.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Wp=!1}if(lc=0,ki=gi=Bn=null,Cu=!1,Wu=0,Mg.current=null,r===null||r.return===null){vi=1,qu=t,ci=null;break}e:{var a=e,y=r.return,E=r,p=t;if(t=Ui,E.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var o=p,C=E,_=C.tag;if(!(C.mode&1)&&(_===0||_===11||_===15)){var h=C.alternate;h?(C.updateQueue=h.updateQueue,C.memoizedState=h.memoizedState,C.lanes=h.lanes):(C.updateQueue=null,C.memoizedState=null)}var b=O0(y);if(b!==null){b.flags&=-257,D0(b,y,E,a,t),b.mode&1&&x0(a,o,t),t=b,p=o;var k=t.updateQueue;if(k===null){var f=new Set;f.add(p),t.updateQueue=f}else k.add(p);break e}else{if(!(t&1)){x0(a,o,t),Bg();break e}p=Error(pt(426))}}else if(On&&E.mode&1){var g=O0(y);if(g!==null){!(g.flags&65536)&&(g.flags|=256),D0(g,y,E,a,t),yg(fl(p,E));break e}}a=p=fl(p,E),vi!==4&&(vi=2),Tu===null?Tu=[a]:Tu.push(a),a=y;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var s=zw(a,p,t);R0(a,s);break e;case 1:E=p;var w=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof w.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(To===null||!To.has(S)))){a.flags|=65536,t&=-t,a.lanes|=t;var T=Hw(a,E,t);R0(a,T);break e}}a=a.return}while(a!==null)}o1(r)}catch(x){t=x,ci===r&&r!==null&&(ci=r=r.return);continue}break}while(!0)}function s1(){var e=$p.current;return $p.current=Vp,e===null?Vp:e}function Bg(){(vi===0||vi===3||vi===2)&&(vi=4),Ci===null||!(uc&268435455)&&!(vh&268435455)||vo(Ci,Ui)}function Gp(e,t){var r=Xr;Xr|=2;var n=s1();(Ci!==e||Ui!==t)&&(xa=null,nc(e,t));do try{SE();break}catch(i){i1(e,i)}while(!0);if(wg(),Xr=r,$p.current=n,ci!==null)throw Error(pt(261));return Ci=null,Ui=0,vi}function SE(){for(;ci!==null;)a1(ci)}function RE(){for(;ci!==null&&!GS();)a1(ci)}function a1(e){var t=l1(e.alternate,e,Os);e.memoizedProps=e.pendingProps,t===null?o1(e):ci=t,Mg.current=null}function o1(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=gE(r,t),r!==null){r.flags&=32767,ci=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{vi=6,ci=null;return}}else if(r=mE(r,t,Os),r!==null){ci=r;return}if(t=t.sibling,t!==null){ci=t;return}ci=t=e}while(t!==null);vi===0&&(vi=5)}function Qo(e,t,r){var n=dn,i=Ks.transition;try{Ks.transition=null,dn=1,EE(e,t,r,n)}finally{Ks.transition=i,dn=n}return null}function EE(e,t,r,n){do il();while(_o!==null);if(Xr&6)throw Error(pt(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(pt(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(iR(e,a),e===Ci&&(ci=Ci=null,Ui=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Xd||(Xd=!0,u1(xp,function(){return il(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Ks.transition,Ks.transition=null;var y=dn;dn=1;var E=Xr;Xr|=4,Mg.current=null,yE(e,r),t1(r,e),VR(sm),Dp=!!im,sm=im=null,e.current=r,_E(r),JS(),Xr=E,dn=y,Ks.transition=a}else e.current=r;if(Xd&&(Xd=!1,_o=e,Kp=i),a=e.pendingLanes,a===0&&(To=null),XS(r.stateNode),ys(e,Zn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(qp)throw qp=!1,e=km,km=null,e;return Kp&1&&e.tag!==0&&il(),a=e.pendingLanes,a&1?e===Cm?xu++:(xu=0,Cm=e):xu=0,No(),null}function il(){if(_o!==null){var e=z_(Kp),t=Ks.transition,r=dn;try{if(Ks.transition=null,dn=16>e?16:e,_o===null)var n=!1;else{if(e=_o,_o=null,Kp=0,Xr&6)throw Error(pt(331));var i=Xr;for(Xr|=4,Vt=e.current;Vt!==null;){var a=Vt,y=a.child;if(Vt.flags&16){var E=a.deletions;if(E!==null){for(var p=0;p<E.length;p++){var o=E[p];for(Vt=o;Vt!==null;){var C=Vt;switch(C.tag){case 0:case 11:case 15:Pu(8,C,a)}var _=C.child;if(_!==null)_.return=C,Vt=_;else for(;Vt!==null;){C=Vt;var h=C.sibling,b=C.return;if(Xw(C),C===o){Vt=null;break}if(h!==null){h.return=b,Vt=h;break}Vt=b}}}var k=a.alternate;if(k!==null){var f=k.child;if(f!==null){k.child=null;do{var g=f.sibling;f.sibling=null,f=g}while(f!==null)}}Vt=a}}if(a.subtreeFlags&2064&&y!==null)y.return=a,Vt=y;else e:for(;Vt!==null;){if(a=Vt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Pu(9,a,a.return)}var s=a.sibling;if(s!==null){s.return=a.return,Vt=s;break e}Vt=a.return}}var w=e.current;for(Vt=w;Vt!==null;){y=Vt;var S=y.child;if(y.subtreeFlags&2064&&S!==null)S.return=y,Vt=S;else e:for(y=w;Vt!==null;){if(E=Vt,E.flags&2048)try{switch(E.tag){case 0:case 11:case 15:gh(9,E)}}catch(x){Hn(E,E.return,x)}if(E===y){Vt=null;break e}var T=E.sibling;if(T!==null){T.return=E.return,Vt=T;break e}Vt=E.return}}if(Xr=i,No(),ba&&typeof ba.onPostCommitFiberRoot=="function")try{ba.onPostCommitFiberRoot(ch,e)}catch{}n=!0}return n}finally{dn=r,Ks.transition=t}}return!1}function V0(e,t,r){t=fl(r,t),t=zw(e,t,1),e=Po(e,t,1),t=os(),e!==null&&(Zu(e,1,t),ys(e,t))}function Hn(e,t,r){if(e.tag===3)V0(e,e,r);else for(;t!==null;){if(t.tag===3){V0(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(To===null||!To.has(n))){e=fl(r,e),e=Hw(t,e,1),t=Po(t,e,1),e=os(),t!==null&&(Zu(t,1,e),ys(t,e));break}}t=t.return}}function kE(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=os(),e.pingedLanes|=e.suspendedLanes&r,Ci===e&&(Ui&r)===r&&(vi===4||vi===3&&(Ui&130023424)===Ui&&500>Zn()-Lg?nc(e,0):Ag|=r),ys(e,t)}function c1(e,t){t===0&&(e.mode&1?(t=Hd,Hd<<=1,!(Hd&130023424)&&(Hd=4194304)):t=1);var r=os();e=Ba(e,t),e!==null&&(Zu(e,t,r),ys(e,r))}function CE(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),c1(e,r)}function PE(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(pt(314))}n!==null&&n.delete(t),c1(e,r)}var l1;l1=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||gs.current)ms=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ms=!1,fE(e,t,r);ms=!!(e.flags&131072)}else ms=!1,On&&t.flags&1048576&&hw(t,Bp,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;pp(e,t),e=t.pendingProps;var i=ul(t,Yi.current);nl(t,r),i=Tg(null,t,n,e,i,r);var a=xg();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vs(n)?(a=!0,Np(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Rg(t),i.updater=mh,t.stateNode=i,i._reactInternals=t,fm(t,n,e,r),t=vm(null,t,n,!0,a,r)):(t.tag=0,On&&a&&gg(t),as(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(pp(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=xE(n),e=ra(n,e),i){case 0:t=gm(null,t,n,e,r);break e;case 1:t=A0(null,t,n,e,r);break e;case 11:t=I0(null,t,n,e,r);break e;case 14:t=M0(null,t,n,ra(n.type,e),r);break e}throw Error(pt(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ra(n,i),gm(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ra(n,i),A0(e,t,n,i,r);case 3:e:{if(qw(t),e===null)throw Error(pt(387));n=t.pendingProps,a=t.memoizedState,i=a.element,_w(e,t),zp(t,n,null,r);var y=t.memoizedState;if(n=y.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=fl(Error(pt(423)),t),t=L0(e,t,n,r,i);break e}else if(n!==i){i=fl(Error(pt(424)),t),t=L0(e,t,n,r,i);break e}else for(Is=Co(t.stateNode.containerInfo.firstChild),Ms=t,On=!0,aa=null,r=vw(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(dl(),n===i){t=Fa(e,t,r);break e}as(e,t,n,r)}t=t.child}return t;case 5:return ww(t),e===null&&dm(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,y=i.children,am(n,i)?y=null:a!==null&&am(n,a)&&(t.flags|=32),$w(e,t),as(e,t,y,r),t.child;case 6:return e===null&&dm(t),null;case 13:return Kw(e,t,r);case 4:return Eg(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=pl(t,null,n,r):as(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ra(n,i),I0(e,t,n,i,r);case 7:return as(e,t,t.pendingProps,r),t.child;case 8:return as(e,t,t.pendingProps.children,r),t.child;case 12:return as(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,y=i.value,wn(Fp,n._currentValue),n._currentValue=y,a!==null)if(la(a.value,y)){if(a.children===i.children&&!gs.current){t=Fa(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var E=a.dependencies;if(E!==null){y=a.child;for(var p=E.firstContext;p!==null;){if(p.context===n){if(a.tag===1){p=Ma(-1,r&-r),p.tag=2;var o=a.updateQueue;if(o!==null){o=o.shared;var C=o.pending;C===null?p.next=p:(p.next=C.next,C.next=p),o.pending=p}}a.lanes|=r,p=a.alternate,p!==null&&(p.lanes|=r),pm(a.return,r,t),E.lanes|=r;break}p=p.next}}else if(a.tag===10)y=a.type===t.type?null:a.child;else if(a.tag===18){if(y=a.return,y===null)throw Error(pt(341));y.lanes|=r,E=y.alternate,E!==null&&(E.lanes|=r),pm(y,r,t),y=a.sibling}else y=a.child;if(y!==null)y.return=a;else for(y=a;y!==null;){if(y===t){y=null;break}if(a=y.sibling,a!==null){a.return=y.return,y=a;break}y=y.return}a=y}as(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,nl(t,r),i=Gs(i),n=n(i),t.flags|=1,as(e,t,n,r),t.child;case 14:return n=t.type,i=ra(n,t.pendingProps),i=ra(n.type,i),M0(e,t,n,i,r);case 15:return Ww(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ra(n,i),pp(e,t),t.tag=1,vs(n)?(e=!0,Np(t)):e=!1,nl(t,r),Uw(t,n,i),fm(t,n,i,r),vm(null,t,n,!0,e,r);case 19:return Gw(e,t,r);case 22:return Vw(e,t,r)}throw Error(pt(156,t.tag))};function u1(e,t){return j_(e,t)}function TE(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qs(e,t,r,n){return new TE(e,t,r,n)}function Fg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function xE(e){if(typeof e=="function")return Fg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ig)return 11;if(e===sg)return 14}return 2}function Oo(e,t){var r=e.alternate;return r===null?(r=qs(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function mp(e,t,r,n,i,a){var y=2;if(n=e,typeof e=="function")Fg(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case zc:return ic(r.children,i,a,t);case ng:y=8,i|=8;break;case Bf:return e=qs(12,r,t,i|2),e.elementType=Bf,e.lanes=a,e;case Ff:return e=qs(13,r,t,i),e.elementType=Ff,e.lanes=a,e;case Uf:return e=qs(19,r,t,i),e.elementType=Uf,e.lanes=a,e;case w_:return yh(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case y_:y=10;break e;case __:y=9;break e;case ig:y=11;break e;case sg:y=14;break e;case fo:y=16,n=null;break e}throw Error(pt(130,e==null?e:typeof e,""))}return t=qs(y,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function ic(e,t,r,n){return e=qs(7,e,n,t),e.lanes=r,e}function yh(e,t,r,n){return e=qs(22,e,n,t),e.elementType=w_,e.lanes=r,e.stateNode={isHidden:!1},e}function wf(e,t,r){return e=qs(6,e,null,t),e.lanes=r,e}function bf(e,t,r){return t=qs(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function OE(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ef(0),this.expirationTimes=ef(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ef(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Ug(e,t,r,n,i,a,y,E,p){return e=new OE(e,t,r,E,p),t===1?(t=1,a===!0&&(t|=8)):t=0,a=qs(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rg(a),e}function DE(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uc,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function d1(e){if(!e)return Mo;e=e._reactInternals;e:{if(gc(e)!==e||e.tag!==1)throw Error(pt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(pt(171))}if(e.tag===1){var r=e.type;if(vs(r))return dw(e,r,t)}return t}function p1(e,t,r,n,i,a,y,E,p){return e=Ug(r,n,!0,e,i,a,y,E,p),e.context=d1(null),r=e.current,n=os(),i=xo(r),a=Ma(n,i),a.callback=t??null,Po(r,a,i),e.current.lanes=i,Zu(e,i,n),ys(e,n),e}function _h(e,t,r,n){var i=t.current,a=os(),y=xo(i);return r=d1(r),t.context===null?t.context=r:t.pendingContext=r,t=Ma(a,y),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Po(i,t,y),e!==null&&(ca(e,i,y,a),lp(e,i,y)),y}function Jp(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function zg(e,t){$0(e,t),(e=e.alternate)&&$0(e,t)}function IE(){return null}var h1=typeof reportError=="function"?reportError:function(e){console.error(e)};function Hg(e){this._internalRoot=e}wh.prototype.render=Hg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(pt(409));_h(e,t,null,null)};wh.prototype.unmount=Hg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;dc(function(){_h(null,e,null,null)}),t[ja]=null}};function wh(e){this._internalRoot=e}wh.prototype.unstable_scheduleHydration=function(e){if(e){var t=V_();e={blockedOn:null,target:e,priority:t};for(var r=0;r<go.length&&t!==0&&t<go[r].priority;r++);go.splice(r,0,e),r===0&&q_(e)}};function Wg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function bh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function q0(){}function ME(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var o=Jp(y);a.call(o)}}var y=p1(t,n,e,0,null,!1,!1,"",q0);return e._reactRootContainer=y,e[ja]=y.current,Bu(e.nodeType===8?e.parentNode:e),dc(),y}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var E=n;n=function(){var o=Jp(p);E.call(o)}}var p=Ug(e,0,!1,null,null,!1,!1,"",q0);return e._reactRootContainer=p,e[ja]=p.current,Bu(e.nodeType===8?e.parentNode:e),dc(function(){_h(t,p,r,n)}),p}function Sh(e,t,r,n,i){var a=r._reactRootContainer;if(a){var y=a;if(typeof i=="function"){var E=i;i=function(){var p=Jp(y);E.call(p)}}_h(t,y,e,i)}else y=ME(r,t,e,i,n);return Jp(y)}H_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=gu(t.pendingLanes);r!==0&&(cg(t,r|1),ys(t,Zn()),!(Xr&6)&&(ml=Zn()+500,No()))}break;case 13:dc(function(){var n=Ba(e,1);if(n!==null){var i=os();ca(n,e,1,i)}}),zg(e,1)}};lg=function(e){if(e.tag===13){var t=Ba(e,134217728);if(t!==null){var r=os();ca(t,e,134217728,r)}zg(e,134217728)}};W_=function(e){if(e.tag===13){var t=xo(e),r=Ba(e,t);if(r!==null){var n=os();ca(r,e,t,n)}zg(e,t)}};V_=function(){return dn};$_=function(e,t){var r=dn;try{return dn=e,t()}finally{dn=r}};Qf=function(e,t,r){switch(t){case"input":if(Wf(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=ph(n);if(!i)throw Error(pt(90));S_(n),Wf(n,i)}}}break;case"textarea":E_(e,r);break;case"select":t=r.value,t!=null&&Zc(e,!!r.multiple,t,!1)}};D_=Ng;I_=dc;var AE={usingClientEntryPoint:!1,Events:[td,$c,ph,x_,O_,Ng]},au={findFiberByHostInstance:Xo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LE={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=L_(e),e===null?null:e.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||IE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zd.isDisabled&&Zd.supportsFiber)try{ch=Zd.inject(LE),ba=Zd}catch{}}js.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AE;js.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wg(t))throw Error(pt(200));return DE(e,t,null,r)};js.createRoot=function(e,t){if(!Wg(e))throw Error(pt(299));var r=!1,n="",i=h1;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Ug(e,1,!1,null,null,r,!1,n,i),e[ja]=t.current,Bu(e.nodeType===8?e.parentNode:e),new Hg(t)};js.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(pt(188)):(e=Object.keys(e).join(","),Error(pt(268,e)));return e=L_(t),e=e===null?null:e.stateNode,e};js.flushSync=function(e){return dc(e)};js.hydrate=function(e,t,r){if(!bh(t))throw Error(pt(200));return Sh(null,e,t,!0,r)};js.hydrateRoot=function(e,t,r){if(!Wg(e))throw Error(pt(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",y=h1;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(y=r.onRecoverableError)),t=p1(t,null,e,1,r??null,i,!1,a,y),e[ja]=t.current,Bu(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new wh(t)};js.render=function(e,t,r){if(!bh(t))throw Error(pt(200));return Sh(null,e,t,!1,r)};js.unmountComponentAtNode=function(e){if(!bh(e))throw Error(pt(40));return e._reactRootContainer?(dc(function(){Sh(null,null,e,!1,function(){e._reactRootContainer=null,e[ja]=null})}),!0):!1};js.unstable_batchedUpdates=Ng;js.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!bh(r))throw Error(pt(200));if(e==null||e._reactInternals===void 0)throw Error(pt(38));return Sh(e,t,r,!1,n)};js.version="18.3.1-next-f1338f8080-20240426";function f1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f1)}catch(e){console.error(e)}}f1(),f_.exports=js;var Vg=f_.exports;const NE=ah(Vg),jE=t_({__proto__:null,default:NE},[Vg]);var m1,K0=Vg;m1=K0.createRoot,K0.hydrateRoot;/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nn(){return Nn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nn.apply(this,arguments)}var oi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(oi||(oi={}));const G0="popstate";function BE(e){e===void 0&&(e={});function t(n,i){let{pathname:a,search:y,hash:E}=n.location;return Ku("",{pathname:a,search:y,hash:E},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:pc(i)}return UE(t,r,null,e)}function zr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function gl(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function FE(){return Math.random().toString(36).substr(2,8)}function J0(e,t){return{usr:e.state,key:e.key,idx:t}}function Ku(e,t,r,n){return r===void 0&&(r=null),Nn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?jo(t):t,{state:r,key:t&&t.key||n||FE()})}function pc(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function jo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function UE(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,y=i.history,E=oi.Pop,p=null,o=C();o==null&&(o=0,y.replaceState(Nn({},y.state,{idx:o}),""));function C(){return(y.state||{idx:null}).idx}function _(){E=oi.Pop;let g=C(),s=g==null?null:g-o;o=g,p&&p({action:E,location:f.location,delta:s})}function h(g,s){E=oi.Push;let w=Ku(f.location,g,s);o=C()+1;let S=J0(w,o),T=f.createHref(w);try{y.pushState(S,"",T)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(T)}a&&p&&p({action:E,location:f.location,delta:1})}function b(g,s){E=oi.Replace;let w=Ku(f.location,g,s);o=C();let S=J0(w,o),T=f.createHref(w);y.replaceState(S,"",T),a&&p&&p({action:E,location:f.location,delta:0})}function k(g){let s=i.location.origin!=="null"?i.location.origin:i.location.href,w=typeof g=="string"?g:pc(g);return w=w.replace(/ $/,"%20"),zr(s,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,s)}let f={get action(){return E},get location(){return e(i,y)},listen(g){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(G0,_),p=g,()=>{i.removeEventListener(G0,_),p=null}},createHref(g){return t(i,g)},createURL:k,encodeLocation(g){let s=k(g);return{pathname:s.pathname,search:s.search,hash:s.hash}},push:h,replace:b,go(g){return y.go(g)}};return f}var gn;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(gn||(gn={}));const zE=new Set(["lazy","caseSensitive","path","id","index","children"]);function HE(e){return e.index===!0}function Gu(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((i,a)=>{let y=[...r,String(a)],E=typeof i.id=="string"?i.id:y.join("-");if(zr(i.index!==!0||!i.children,"Cannot specify children on an index route"),zr(!n[E],'Found a route id collision on id "'+E+`".  Route id's must be globally unique within Data Router usages`),HE(i)){let p=Nn({},i,t(i),{id:E});return n[E]=p,p}else{let p=Nn({},i,t(i),{id:E,children:void 0});return n[E]=p,i.children&&(p.children=Gu(i.children,t,y,n)),p}})}function Yo(e,t,r){return r===void 0&&(r="/"),gp(e,t,r,!1)}function gp(e,t,r,n){let i=typeof t=="string"?jo(t):t,a=Rl(i.pathname||"/",r);if(a==null)return null;let y=g1(e);VE(y);let E=null;for(let p=0;E==null&&p<y.length;++p){let o=tk(a);E=ZE(y[p],o,n)}return E}function WE(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],handle:r.handle}}function g1(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,y,E)=>{let p={relativePath:E===void 0?a.path||"":E,caseSensitive:a.caseSensitive===!0,childrenIndex:y,route:a};p.relativePath.startsWith("/")&&(zr(p.relativePath.startsWith(n),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(n.length));let o=Aa([n,p.relativePath]),C=r.concat(p);a.children&&a.children.length>0&&(zr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+o+'".')),g1(a.children,t,C,o)),!(a.path==null&&!a.index)&&t.push({path:o,score:YE(o,a.index),routesMeta:C})};return e.forEach((a,y)=>{var E;if(a.path===""||!((E=a.path)!=null&&E.includes("?")))i(a,y);else for(let p of v1(a.path))i(a,y,p)}),t}function v1(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let y=v1(n.join("/")),E=[];return E.push(...y.map(p=>p===""?a:[a,p].join("/"))),i&&E.push(...y),E.map(p=>e.startsWith("/")&&p===""?"/":p)}function VE(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:XE(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const $E=/^:[\w-]+$/,qE=3,KE=2,GE=1,JE=10,QE=-2,Q0=e=>e==="*";function YE(e,t){let r=e.split("/"),n=r.length;return r.some(Q0)&&(n+=QE),t&&(n+=KE),r.filter(i=>!Q0(i)).reduce((i,a)=>i+($E.test(a)?qE:a===""?GE:JE),n)}function XE(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function ZE(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,i={},a="/",y=[];for(let E=0;E<n.length;++E){let p=n[E],o=E===n.length-1,C=a==="/"?t:t.slice(a.length)||"/",_=Y0({path:p.relativePath,caseSensitive:p.caseSensitive,end:o},C),h=p.route;if(!_&&o&&r&&!n[n.length-1].route.index&&(_=Y0({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},C)),!_)return null;Object.assign(i,_.params),y.push({params:i,pathname:Aa([a,_.pathname]),pathnameBase:ik(Aa([a,_.pathnameBase])),route:h}),_.pathnameBase!=="/"&&(a=Aa([a,_.pathnameBase]))}return y}function Y0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=ek(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],y=a.replace(/(.)\/+$/,"$1"),E=i.slice(1);return{params:n.reduce((o,C,_)=>{let{paramName:h,isOptional:b}=C;if(h==="*"){let f=E[_]||"";y=a.slice(0,a.length-f.length).replace(/(.)\/+$/,"$1")}const k=E[_];return b&&!k?o[h]=void 0:o[h]=(k||"").replace(/%2F/g,"/"),o},{}),pathname:a,pathnameBase:y,pattern:e}}function ek(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),gl(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,E,p)=>(n.push({paramName:E,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function tk(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return gl(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Rl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function rk(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?jo(e):e;return{pathname:r?r.startsWith("/")?r:nk(r,t):t,search:sk(n),hash:ak(i)}}function nk(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Sf(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function y1(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function $g(e,t){let r=y1(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function qg(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=jo(e):(i=Nn({},e),zr(!i.pathname||!i.pathname.includes("?"),Sf("?","pathname","search",i)),zr(!i.pathname||!i.pathname.includes("#"),Sf("#","pathname","hash",i)),zr(!i.search||!i.search.includes("#"),Sf("#","search","hash",i)));let a=e===""||i.pathname==="",y=a?"/":i.pathname,E;if(y==null)E=r;else{let _=t.length-1;if(!n&&y.startsWith("..")){let h=y.split("/");for(;h[0]==="..";)h.shift(),_-=1;i.pathname=h.join("/")}E=_>=0?t[_]:"/"}let p=rk(i,E),o=y&&y!=="/"&&y.endsWith("/"),C=(a||y===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(o||C)&&(p.pathname+="/"),p}const Aa=e=>e.join("/").replace(/\/\/+/g,"/"),ik=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),sk=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ak=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Qp{constructor(t,r,n,i){i===void 0&&(i=!1),this.status=t,this.statusText=r||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function Rh(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const _1=["post","put","patch","delete"],ok=new Set(_1),ck=["get",..._1],lk=new Set(ck),uk=new Set([301,302,303,307,308]),dk=new Set([307,308]),Rf={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},pk={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},ou={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Kg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,hk=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),w1="remix-router-transitions";function fk(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",n=!r;zr(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let ie=e.detectErrorBoundary;i=Q=>({hasErrorBoundary:ie(Q)})}else i=hk;let a={},y=Gu(e.routes,i,void 0,a),E,p=e.basename||"/",o=e.unstable_dataStrategy||wk,C=e.unstable_patchRoutesOnNavigation,_=Nn({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),h=null,b=new Set,k=1e3,f=new Set,g=null,s=null,w=null,S=e.hydrationData!=null,T=Yo(y,e.history.location,p),x=null;if(T==null&&!C){let ie=ss(404,{pathname:e.history.location.pathname}),{matches:Q,route:he}=ay(y);T=Q,x={[he.id]:ie}}T&&!e.hydrationData&&De(T,y,e.history.location.pathname).active&&(T=null);let O;if(T)if(T.some(ie=>ie.route.lazy))O=!1;else if(!T.some(ie=>ie.route.loader))O=!0;else if(_.v7_partialHydration){let ie=e.hydrationData?e.hydrationData.loaderData:null,Q=e.hydrationData?e.hydrationData.errors:null,he=Re=>Re.route.loader?typeof Re.route.loader=="function"&&Re.route.loader.hydrate===!0?!1:ie&&ie[Re.route.id]!==void 0||Q&&Q[Re.route.id]!==void 0:!0;if(Q){let Re=T.findIndex(Le=>Q[Le.route.id]!==void 0);O=T.slice(0,Re+1).every(he)}else O=T.every(he)}else O=e.hydrationData!=null;else if(O=!1,T=[],_.v7_partialHydration){let ie=De(null,y,e.history.location.pathname);ie.active&&ie.matches&&(T=ie.matches)}let P,R={historyAction:e.history.action,location:e.history.location,matches:T,initialized:O,navigation:Rf,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||x,fetchers:new Map,blockers:new Map},I=oi.Pop,d=!1,v,c=!1,u=new Map,l=null,m=!1,D=!1,N=[],L=new Set,j=new Map,V=0,$=-1,Z=new Map,ne=new Set,pe=new Map,ge=new Map,_e=new Set,Me=new Map,me=new Map,oe=new Map,ve;function we(){if(h=e.history.listen(ie=>{let{action:Q,location:he,delta:Re}=ie;if(ve){ve(),ve=void 0;return}gl(me.size===0||Re!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Le=Zi({currentLocation:R.location,nextLocation:he,historyAction:Q});if(Le&&Re!=null){let ht=new Promise(xt=>{ve=xt});e.history.go(Re*-1),pi(Le,{state:"blocked",location:he,proceed(){pi(Le,{state:"proceeding",proceed:void 0,reset:void 0,location:he}),ht.then(()=>e.history.go(Re))},reset(){let xt=new Map(R.blockers);xt.set(Le,ou),Ot({blockers:xt})}});return}return Kt(Q,he)}),r){Lk(t,u);let ie=()=>Nk(t,u);t.addEventListener("pagehide",ie),l=()=>t.removeEventListener("pagehide",ie)}return R.initialized||Kt(oi.Pop,R.location,{initialHydration:!0}),P}function be(){h&&h(),l&&l(),b.clear(),v&&v.abort(),R.fetchers.forEach((ie,Q)=>tr(Q)),R.blockers.forEach((ie,Q)=>Ti(Q))}function lt(ie){return b.add(ie),()=>b.delete(ie)}function Ot(ie,Q){Q===void 0&&(Q={}),R=Nn({},R,ie);let he=[],Re=[];_.v7_fetcherPersist&&R.fetchers.forEach((Le,ht)=>{Le.state==="idle"&&(_e.has(ht)?Re.push(ht):he.push(ht))}),[...b].forEach(Le=>Le(R,{deletedFetchers:Re,unstable_viewTransitionOpts:Q.viewTransitionOpts,unstable_flushSync:Q.flushSync===!0})),_.v7_fetcherPersist&&(he.forEach(Le=>R.fetchers.delete(Le)),Re.forEach(Le=>tr(Le)))}function Yt(ie,Q,he){var Re,Le;let{flushSync:ht}=he===void 0?{}:he,xt=R.actionData!=null&&R.navigation.formMethod!=null&&ia(R.navigation.formMethod)&&R.navigation.state==="loading"&&((Re=ie.state)==null?void 0:Re._isRedirect)!==!0,Ke;Q.actionData?Object.keys(Q.actionData).length>0?Ke=Q.actionData:Ke=null:xt?Ke=R.actionData:Ke=null;let et=Q.loaderData?iy(R.loaderData,Q.loaderData,Q.matches||[],Q.errors):R.loaderData,$e=R.blockers;$e.size>0&&($e=new Map($e),$e.forEach((ke,Tr)=>$e.set(Tr,ou)));let St=d===!0||R.navigation.formMethod!=null&&ia(R.navigation.formMethod)&&((Le=ie.state)==null?void 0:Le._isRedirect)!==!0;E&&(y=E,E=void 0),m||I===oi.Pop||(I===oi.Push?e.history.push(ie,ie.state):I===oi.Replace&&e.history.replace(ie,ie.state));let Ft;if(I===oi.Pop){let ke=u.get(R.location.pathname);ke&&ke.has(ie.pathname)?Ft={currentLocation:R.location,nextLocation:ie}:u.has(ie.pathname)&&(Ft={currentLocation:ie,nextLocation:R.location})}else if(c){let ke=u.get(R.location.pathname);ke?ke.add(ie.pathname):(ke=new Set([ie.pathname]),u.set(R.location.pathname,ke)),Ft={currentLocation:R.location,nextLocation:ie}}Ot(Nn({},Q,{actionData:Ke,loaderData:et,historyAction:I,location:ie,initialized:!0,navigation:Rf,revalidation:"idle",restoreScrollPosition:Rr(ie,Q.matches||R.matches),preventScrollReset:St,blockers:$e}),{viewTransitionOpts:Ft,flushSync:ht===!0}),I=oi.Pop,d=!1,c=!1,m=!1,D=!1,N=[]}async function vt(ie,Q){if(typeof ie=="number"){e.history.go(ie);return}let he=xm(R.location,R.matches,p,_.v7_prependBasename,ie,_.v7_relativeSplatPath,Q==null?void 0:Q.fromRouteId,Q==null?void 0:Q.relative),{path:Re,submission:Le,error:ht}=X0(_.v7_normalizeFormMethod,!1,he,Q),xt=R.location,Ke=Ku(R.location,Re,Q&&Q.state);Ke=Nn({},Ke,e.history.encodeLocation(Ke));let et=Q&&Q.replace!=null?Q.replace:void 0,$e=oi.Push;et===!0?$e=oi.Replace:et===!1||Le!=null&&ia(Le.formMethod)&&Le.formAction===R.location.pathname+R.location.search&&($e=oi.Replace);let St=Q&&"preventScrollReset"in Q?Q.preventScrollReset===!0:void 0,Ft=(Q&&Q.unstable_flushSync)===!0,ke=Zi({currentLocation:xt,nextLocation:Ke,historyAction:$e});if(ke){pi(ke,{state:"blocked",location:Ke,proceed(){pi(ke,{state:"proceeding",proceed:void 0,reset:void 0,location:Ke}),vt(ie,Q)},reset(){let Tr=new Map(R.blockers);Tr.set(ke,ou),Ot({blockers:Tr})}});return}return await Kt($e,Ke,{submission:Le,pendingError:ht,preventScrollReset:St,replace:Q&&Q.replace,enableViewTransition:Q&&Q.unstable_viewTransition,flushSync:Ft})}function Mr(){if(Ut(),Ot({revalidation:"loading"}),R.navigation.state!=="submitting"){if(R.navigation.state==="idle"){Kt(R.historyAction,R.location,{startUninterruptedRevalidation:!0});return}Kt(I||R.historyAction,R.navigation.location,{overrideNavigation:R.navigation,enableViewTransition:c===!0})}}async function Kt(ie,Q,he){v&&v.abort(),v=null,I=ie,m=(he&&he.startUninterruptedRevalidation)===!0,ze(R.location,R.matches),d=(he&&he.preventScrollReset)===!0,c=(he&&he.enableViewTransition)===!0;let Re=E||y,Le=he&&he.overrideNavigation,ht=Yo(Re,Q,p),xt=(he&&he.flushSync)===!0,Ke=De(ht,Re,Q.pathname);if(Ke.active&&Ke.matches&&(ht=Ke.matches),!ht){let{error:Er,notFoundMatches:an,route:cn}=Wn(Q.pathname);Yt(Q,{matches:an,loaderData:{},errors:{[cn.id]:Er}},{flushSync:xt});return}if(R.initialized&&!D&&Ck(R.location,Q)&&!(he&&he.submission&&ia(he.submission.formMethod))){Yt(Q,{matches:ht},{flushSync:xt});return}v=new AbortController;let et=Lc(e.history,Q,v.signal,he&&he.submission),$e;if(he&&he.pendingError)$e=[Xc(ht).route.id,{type:gn.error,error:he.pendingError}];else if(he&&he.submission&&ia(he.submission.formMethod)){let Er=await At(et,Q,he.submission,ht,Ke.active,{replace:he.replace,flushSync:xt});if(Er.shortCircuited)return;if(Er.pendingActionResult){let[an,cn]=Er.pendingActionResult;if(Ds(cn)&&Rh(cn.error)&&cn.error.status===404){v=null,Yt(Q,{matches:Er.matches,loaderData:{},errors:{[an]:cn.error}});return}}ht=Er.matches||ht,$e=Er.pendingActionResult,Le=Ef(Q,he.submission),xt=!1,Ke.active=!1,et=Lc(e.history,et.url,et.signal)}let{shortCircuited:St,matches:Ft,loaderData:ke,errors:Tr}=await Ar(et,Q,ht,Ke.active,Le,he&&he.submission,he&&he.fetcherSubmission,he&&he.replace,he&&he.initialHydration===!0,xt,$e);St||(v=null,Yt(Q,Nn({matches:Ft||ht},sy($e),{loaderData:ke,errors:Tr})))}async function At(ie,Q,he,Re,Le,ht){ht===void 0&&(ht={}),Ut();let xt=Mk(Q,he);if(Ot({navigation:xt},{flushSync:ht.flushSync===!0}),Le){let $e=await fr(Re,Q.pathname,ie.signal);if($e.type==="aborted")return{shortCircuited:!0};if($e.type==="error"){let{boundaryId:St,error:Ft}=Lt(Q.pathname,$e);return{matches:$e.partialMatches,pendingActionResult:[St,{type:gn.error,error:Ft}]}}else if($e.matches)Re=$e.matches;else{let{notFoundMatches:St,error:Ft,route:ke}=Wn(Q.pathname);return{matches:St,pendingActionResult:[ke.id,{type:gn.error,error:Ft}]}}}let Ke,et=yu(Re,Q);if(!et.route.action&&!et.route.lazy)Ke={type:gn.error,error:ss(405,{method:ie.method,pathname:Q.pathname,routeId:et.route.id})};else if(Ke=(await er("action",R,ie,[et],Re,null))[et.route.id],ie.signal.aborted)return{shortCircuited:!0};if(tc(Ke)){let $e;return ht&&ht.replace!=null?$e=ht.replace:$e=ty(Ke.response.headers.get("Location"),new URL(ie.url),p)===R.location.pathname+R.location.search,await Jr(ie,Ke,!0,{submission:he,replace:$e}),{shortCircuited:!0}}if(wo(Ke))throw ss(400,{type:"defer-action"});if(Ds(Ke)){let $e=Xc(Re,et.route.id);return(ht&&ht.replace)!==!0&&(I=oi.Push),{matches:Re,pendingActionResult:[$e.route.id,Ke]}}return{matches:Re,pendingActionResult:[et.route.id,Ke]}}async function Ar(ie,Q,he,Re,Le,ht,xt,Ke,et,$e,St){let Ft=Le||Ef(Q,ht),ke=ht||xt||cy(Ft),Tr=!m&&(!_.v7_partialHydration||!et);if(Re){if(Tr){let zt=Dt(St);Ot(Nn({navigation:Ft},zt!==void 0?{actionData:zt}:{}),{flushSync:$e})}let at=await fr(he,Q.pathname,ie.signal);if(at.type==="aborted")return{shortCircuited:!0};if(at.type==="error"){let{boundaryId:zt,error:Gt}=Lt(Q.pathname,at);return{matches:at.partialMatches,loaderData:{},errors:{[zt]:Gt}}}else if(at.matches)he=at.matches;else{let{error:zt,notFoundMatches:Gt,route:Rt}=Wn(Q.pathname);return{matches:Gt,loaderData:{},errors:{[Rt.id]:zt}}}}let Er=E||y,[an,cn]=Z0(e.history,R,he,ke,Q,_.v7_partialHydration&&et===!0,_.v7_skipActionErrorRevalidation,D,N,L,_e,pe,ne,Er,p,St);if(Ne(at=>!(he&&he.some(zt=>zt.route.id===at))||an&&an.some(zt=>zt.route.id===at)),$=++V,an.length===0&&cn.length===0){let at=sn();return Yt(Q,Nn({matches:he,loaderData:{},errors:St&&Ds(St[1])?{[St[0]]:St[1].error}:null},sy(St),at?{fetchers:new Map(R.fetchers)}:{}),{flushSync:$e}),{shortCircuited:!0}}if(Tr){let at={};if(!Re){at.navigation=Ft;let zt=Dt(St);zt!==void 0&&(at.actionData=zt)}cn.length>0&&(at.fetchers=Xt(cn)),Ot(at,{flushSync:$e})}cn.forEach(at=>{j.has(at.key)&&sr(at.key),at.controller&&j.set(at.key,at.controller)});let us=()=>cn.forEach(at=>sr(at.key));v&&v.signal.addEventListener("abort",us);let{loaderResults:hi,fetcherResults:Pe}=await Ze(R,he,an,cn,ie);if(ie.signal.aborted)return{shortCircuited:!0};v&&v.signal.removeEventListener("abort",us),cn.forEach(at=>j.delete(at.key));let es=ep(hi);if(es)return await Jr(ie,es.result,!0,{replace:Ke}),{shortCircuited:!0};if(es=ep(Pe),es)return ne.add(es.key),await Jr(ie,es.result,!0,{replace:Ke}),{shortCircuited:!0};let{loaderData:Se,errors:Ue}=ny(R,he,an,hi,St,cn,Pe,Me);Me.forEach((at,zt)=>{at.subscribe(Gt=>{(Gt||at.done)&&Me.delete(zt)})}),_.v7_partialHydration&&et&&R.errors&&Object.entries(R.errors).filter(at=>{let[zt]=at;return!an.some(Gt=>Gt.route.id===zt)}).forEach(at=>{let[zt,Gt]=at;Ue=Object.assign(Ue||{},{[zt]:Gt})});let We=sn(),ft=Mt($),$t=We||ft||cn.length>0;return Nn({matches:he,loaderData:Se,errors:Ue},$t?{fetchers:new Map(R.fetchers)}:{})}function Dt(ie){if(ie&&!Ds(ie[1]))return{[ie[0]]:ie[1].data};if(R.actionData)return Object.keys(R.actionData).length===0?null:R.actionData}function Xt(ie){return ie.forEach(Q=>{let he=R.fetchers.get(Q.key),Re=cu(void 0,he?he.data:void 0);R.fetchers.set(Q.key,Re)}),new Map(R.fetchers)}function hn(ie,Q,he,Re){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");j.has(ie)&&sr(ie);let Le=(Re&&Re.unstable_flushSync)===!0,ht=E||y,xt=xm(R.location,R.matches,p,_.v7_prependBasename,he,_.v7_relativeSplatPath,Q,Re==null?void 0:Re.relative),Ke=Yo(ht,xt,p),et=De(Ke,ht,xt);if(et.active&&et.matches&&(Ke=et.matches),!Ke){Fe(ie,Q,ss(404,{pathname:xt}),{flushSync:Le});return}let{path:$e,submission:St,error:Ft}=X0(_.v7_normalizeFormMethod,!0,xt,Re);if(Ft){Fe(ie,Q,Ft,{flushSync:Le});return}let ke=yu(Ke,$e);if(d=(Re&&Re.preventScrollReset)===!0,St&&ia(St.formMethod)){kr(ie,Q,$e,ke,Ke,et.active,Le,St);return}pe.set(ie,{routeId:Q,path:$e}),Lr(ie,Q,$e,ke,Ke,et.active,Le,St)}async function kr(ie,Q,he,Re,Le,ht,xt,Ke){Ut(),pe.delete(ie);function et(Rt){if(!Rt.route.action&&!Rt.route.lazy){let _r=ss(405,{method:Ke.formMethod,pathname:he,routeId:Q});return Fe(ie,Q,_r,{flushSync:xt}),!0}return!1}if(!ht&&et(Re))return;let $e=R.fetchers.get(ie);hr(ie,Ak(Ke,$e),{flushSync:xt});let St=new AbortController,Ft=Lc(e.history,he,St.signal,Ke);if(ht){let Rt=await fr(Le,he,Ft.signal);if(Rt.type==="aborted")return;if(Rt.type==="error"){let{error:_r}=Lt(he,Rt);Fe(ie,Q,_r,{flushSync:xt});return}else if(Rt.matches){if(Le=Rt.matches,Re=yu(Le,he),et(Re))return}else{Fe(ie,Q,ss(404,{pathname:he}),{flushSync:xt});return}}j.set(ie,St);let ke=V,Er=(await er("action",R,Ft,[Re],Le,ie))[Re.route.id];if(Ft.signal.aborted){j.get(ie)===St&&j.delete(ie);return}if(_.v7_fetcherPersist&&_e.has(ie)){if(tc(Er)||Ds(Er)){hr(ie,ho(void 0));return}}else{if(tc(Er))if(j.delete(ie),$>ke){hr(ie,ho(void 0));return}else return ne.add(ie),hr(ie,cu(Ke)),Jr(Ft,Er,!1,{fetcherSubmission:Ke});if(Ds(Er)){Fe(ie,Q,Er.error);return}}if(wo(Er))throw ss(400,{type:"defer-action"});let an=R.navigation.location||R.location,cn=Lc(e.history,an,St.signal),us=E||y,hi=R.navigation.state!=="idle"?Yo(us,R.navigation.location,p):R.matches;zr(hi,"Didn't find any matches after fetcher action");let Pe=++V;Z.set(ie,Pe);let es=cu(Ke,Er.data);R.fetchers.set(ie,es);let[Se,Ue]=Z0(e.history,R,hi,Ke,an,!1,_.v7_skipActionErrorRevalidation,D,N,L,_e,pe,ne,us,p,[Re.route.id,Er]);Ue.filter(Rt=>Rt.key!==ie).forEach(Rt=>{let _r=Rt.key,Jt=R.fetchers.get(_r),br=cu(void 0,Jt?Jt.data:void 0);R.fetchers.set(_r,br),j.has(_r)&&sr(_r),Rt.controller&&j.set(_r,Rt.controller)}),Ot({fetchers:new Map(R.fetchers)});let We=()=>Ue.forEach(Rt=>sr(Rt.key));St.signal.addEventListener("abort",We);let{loaderResults:ft,fetcherResults:$t}=await Ze(R,hi,Se,Ue,cn);if(St.signal.aborted)return;St.signal.removeEventListener("abort",We),Z.delete(ie),j.delete(ie),Ue.forEach(Rt=>j.delete(Rt.key));let at=ep(ft);if(at)return Jr(cn,at.result,!1);if(at=ep($t),at)return ne.add(at.key),Jr(cn,at.result,!1);let{loaderData:zt,errors:Gt}=ny(R,hi,Se,ft,void 0,Ue,$t,Me);if(R.fetchers.has(ie)){let Rt=ho(Er.data);R.fetchers.set(ie,Rt)}Mt(Pe),R.navigation.state==="loading"&&Pe>$?(zr(I,"Expected pending action"),v&&v.abort(),Yt(R.navigation.location,{matches:hi,loaderData:zt,errors:Gt,fetchers:new Map(R.fetchers)})):(Ot({errors:Gt,loaderData:iy(R.loaderData,zt,hi,Gt),fetchers:new Map(R.fetchers)}),D=!1)}async function Lr(ie,Q,he,Re,Le,ht,xt,Ke){let et=R.fetchers.get(ie);hr(ie,cu(Ke,et?et.data:void 0),{flushSync:xt});let $e=new AbortController,St=Lc(e.history,he,$e.signal);if(ht){let Er=await fr(Le,he,St.signal);if(Er.type==="aborted")return;if(Er.type==="error"){let{error:an}=Lt(he,Er);Fe(ie,Q,an,{flushSync:xt});return}else if(Er.matches)Le=Er.matches,Re=yu(Le,he);else{Fe(ie,Q,ss(404,{pathname:he}),{flushSync:xt});return}}j.set(ie,$e);let Ft=V,Tr=(await er("loader",R,St,[Re],Le,ie))[Re.route.id];if(wo(Tr)&&(Tr=await Gg(Tr,St.signal,!0)||Tr),j.get(ie)===$e&&j.delete(ie),!St.signal.aborted){if(_e.has(ie)){hr(ie,ho(void 0));return}if(tc(Tr))if($>Ft){hr(ie,ho(void 0));return}else{ne.add(ie),await Jr(St,Tr,!1);return}if(Ds(Tr)){Fe(ie,Q,Tr.error);return}zr(!wo(Tr),"Unhandled fetcher deferred data"),hr(ie,ho(Tr.data))}}async function Jr(ie,Q,he,Re){let{submission:Le,fetcherSubmission:ht,replace:xt}=Re===void 0?{}:Re;Q.response.headers.has("X-Remix-Revalidate")&&(D=!0);let Ke=Q.response.headers.get("Location");zr(Ke,"Expected a Location header on the redirect Response"),Ke=ty(Ke,new URL(ie.url),p);let et=Ku(R.location,Ke,{_isRedirect:!0});if(r){let Er=!1;if(Q.response.headers.has("X-Remix-Reload-Document"))Er=!0;else if(Kg.test(Ke)){const an=e.history.createURL(Ke);Er=an.origin!==t.location.origin||Rl(an.pathname,p)==null}if(Er){xt?t.location.replace(Ke):t.location.assign(Ke);return}}v=null;let $e=xt===!0||Q.response.headers.has("X-Remix-Replace")?oi.Replace:oi.Push,{formMethod:St,formAction:Ft,formEncType:ke}=R.navigation;!Le&&!ht&&St&&Ft&&ke&&(Le=cy(R.navigation));let Tr=Le||ht;if(dk.has(Q.response.status)&&Tr&&ia(Tr.formMethod))await Kt($e,et,{submission:Nn({},Tr,{formAction:Ke}),preventScrollReset:d,enableViewTransition:he?c:void 0});else{let Er=Ef(et,Le);await Kt($e,et,{overrideNavigation:Er,fetcherSubmission:ht,preventScrollReset:d,enableViewTransition:he?c:void 0})}}async function er(ie,Q,he,Re,Le,ht){let xt,Ke={};try{xt=await bk(o,ie,Q,he,Re,Le,ht,a,i)}catch(et){return Re.forEach($e=>{Ke[$e.route.id]={type:gn.error,error:et}}),Ke}for(let[et,$e]of Object.entries(xt))if(Tk($e)){let St=$e.result;Ke[et]={type:gn.redirect,response:Ek(St,he,et,Le,p,_.v7_relativeSplatPath)}}else Ke[et]=await Rk($e);return Ke}async function Ze(ie,Q,he,Re,Le){let ht=ie.matches,xt=er("loader",ie,Le,he,Q,null),Ke=Promise.all(Re.map(async St=>{if(St.matches&&St.match&&St.controller){let ke=(await er("loader",ie,Lc(e.history,St.path,St.controller.signal),[St.match],St.matches,St.key))[St.match.route.id];return{[St.key]:ke}}else return Promise.resolve({[St.key]:{type:gn.error,error:ss(404,{pathname:St.path})}})})),et=await xt,$e=(await Ke).reduce((St,Ft)=>Object.assign(St,Ft),{});return await Promise.all([Dk(Q,et,Le.signal,ht,ie.loaderData),Ik(Q,$e,Re)]),{loaderResults:et,fetcherResults:$e}}function Ut(){D=!0,N.push(...Ne()),pe.forEach((ie,Q)=>{j.has(Q)&&(L.add(Q),sr(Q))})}function hr(ie,Q,he){he===void 0&&(he={}),R.fetchers.set(ie,Q),Ot({fetchers:new Map(R.fetchers)},{flushSync:(he&&he.flushSync)===!0})}function Fe(ie,Q,he,Re){Re===void 0&&(Re={});let Le=Xc(R.matches,Q);tr(ie),Ot({errors:{[Le.route.id]:he},fetchers:new Map(R.fetchers)},{flushSync:(Re&&Re.flushSync)===!0})}function st(ie){return _.v7_fetcherPersist&&(ge.set(ie,(ge.get(ie)||0)+1),_e.has(ie)&&_e.delete(ie)),R.fetchers.get(ie)||pk}function tr(ie){let Q=R.fetchers.get(ie);j.has(ie)&&!(Q&&Q.state==="loading"&&Z.has(ie))&&sr(ie),pe.delete(ie),Z.delete(ie),ne.delete(ie),_e.delete(ie),L.delete(ie),R.fetchers.delete(ie)}function Tt(ie){if(_.v7_fetcherPersist){let Q=(ge.get(ie)||0)-1;Q<=0?(ge.delete(ie),_e.add(ie)):ge.set(ie,Q)}else tr(ie);Ot({fetchers:new Map(R.fetchers)})}function sr(ie){let Q=j.get(ie);zr(Q,"Expected fetch controller: "+ie),Q.abort(),j.delete(ie)}function Zr(ie){for(let Q of ie){let he=st(Q),Re=ho(he.data);R.fetchers.set(Q,Re)}}function sn(){let ie=[],Q=!1;for(let he of ne){let Re=R.fetchers.get(he);zr(Re,"Expected fetcher: "+he),Re.state==="loading"&&(ne.delete(he),ie.push(he),Q=!0)}return Zr(ie),Q}function Mt(ie){let Q=[];for(let[he,Re]of Z)if(Re<ie){let Le=R.fetchers.get(he);zr(Le,"Expected fetcher: "+he),Le.state==="loading"&&(sr(he),Z.delete(he),Q.push(he))}return Zr(Q),Q.length>0}function di(ie,Q){let he=R.blockers.get(ie)||ou;return me.get(ie)!==Q&&me.set(ie,Q),he}function Ti(ie){R.blockers.delete(ie),me.delete(ie)}function pi(ie,Q){let he=R.blockers.get(ie)||ou;zr(he.state==="unblocked"&&Q.state==="blocked"||he.state==="blocked"&&Q.state==="blocked"||he.state==="blocked"&&Q.state==="proceeding"||he.state==="blocked"&&Q.state==="unblocked"||he.state==="proceeding"&&Q.state==="unblocked","Invalid blocker state transition: "+he.state+" -> "+Q.state);let Re=new Map(R.blockers);Re.set(ie,Q),Ot({blockers:Re})}function Zi(ie){let{currentLocation:Q,nextLocation:he,historyAction:Re}=ie;if(me.size===0)return;me.size>1&&gl(!1,"A router only supports one blocker at a time");let Le=Array.from(me.entries()),[ht,xt]=Le[Le.length-1],Ke=R.blockers.get(ht);if(!(Ke&&Ke.state==="proceeding")&&xt({currentLocation:Q,nextLocation:he,historyAction:Re}))return ht}function Wn(ie){let Q=ss(404,{pathname:ie}),he=E||y,{matches:Re,route:Le}=ay(he);return Ne(),{notFoundMatches:Re,route:Le,error:Q}}function Lt(ie,Q){return{boundaryId:Xc(Q.partialMatches).route.id,error:ss(400,{type:"route-discovery",pathname:ie,message:Q.error!=null&&"message"in Q.error?Q.error:String(Q.error)})}}function Ne(ie){let Q=[];return Me.forEach((he,Re)=>{(!ie||ie(Re))&&(he.cancel(),Q.push(Re),Me.delete(Re))}),Q}function yt(ie,Q,he){if(g=ie,w=Q,s=he||null,!S&&R.navigation===Rf){S=!0;let Re=Rr(R.location,R.matches);Re!=null&&Ot({restoreScrollPosition:Re})}return()=>{g=null,w=null,s=null}}function ut(ie,Q){return s&&s(ie,Q.map(Re=>WE(Re,R.loaderData)))||ie.key}function ze(ie,Q){if(g&&w){let he=ut(ie,Q);g[he]=w()}}function Rr(ie,Q){if(g){let he=ut(ie,Q),Re=g[he];if(typeof Re=="number")return Re}return null}function De(ie,Q,he){if(C){if(f.has(he))return{active:!1,matches:ie};if(ie){if(Object.keys(ie[0].params).length>0)return{active:!0,matches:gp(Q,he,p,!0)}}else return{active:!0,matches:gp(Q,he,p,!0)||[]}}return{active:!1,matches:null}}async function fr(ie,Q,he){let Re=ie;for(;;){let Le=E==null,ht=E||y;try{await yk(C,Q,Re,ht,a,i,oe,he)}catch(et){return{type:"error",error:et,partialMatches:Re}}finally{Le&&(y=[...y])}if(he.aborted)return{type:"aborted"};let xt=Yo(ht,Q,p);if(xt)return Pr(Q,f),{type:"success",matches:xt};let Ke=gp(ht,Q,p,!0);if(!Ke||Re.length===Ke.length&&Re.every((et,$e)=>et.route.id===Ke[$e].route.id))return Pr(Q,f),{type:"success",matches:null};Re=Ke}}function Pr(ie,Q){if(Q.size>=k){let he=Q.values().next().value;Q.delete(he)}Q.add(ie)}function wr(ie){a={},E=Gu(ie,i,void 0,a)}function qr(ie,Q){let he=E==null;S1(ie,Q,E||y,a,i),he&&(y=[...y],Ot({}))}return P={get basename(){return p},get future(){return _},get state(){return R},get routes(){return y},get window(){return t},initialize:we,subscribe:lt,enableScrollRestoration:yt,navigate:vt,fetch:hn,revalidate:Mr,createHref:ie=>e.history.createHref(ie),encodeLocation:ie=>e.history.encodeLocation(ie),getFetcher:st,deleteFetcher:Tt,dispose:be,getBlocker:di,deleteBlocker:Ti,patchRoutes:qr,_internalFetchControllers:j,_internalActiveDeferreds:Me,_internalSetRoutes:wr},P}function mk(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function xm(e,t,r,n,i,a,y,E){let p,o;if(y){p=[];for(let _ of t)if(p.push(_),_.route.id===y){o=_;break}}else p=t,o=t[t.length-1];let C=qg(i||".",$g(p,a),Rl(e.pathname,r)||e.pathname,E==="path");return i==null&&(C.search=e.search,C.hash=e.hash),(i==null||i===""||i===".")&&o&&o.route.index&&!Jg(C.search)&&(C.search=C.search?C.search.replace(/^\?/,"?index&"):"?index"),n&&r!=="/"&&(C.pathname=C.pathname==="/"?r:Aa([r,C.pathname])),pc(C)}function X0(e,t,r,n){if(!n||!mk(n))return{path:r};if(n.formMethod&&!Ok(n.formMethod))return{path:r,error:ss(405,{method:n.formMethod})};let i=()=>({path:r,error:ss(400,{type:"invalid-body"})}),a=n.formMethod||"get",y=e?a.toUpperCase():a.toLowerCase(),E=R1(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!ia(y))return i();let h=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((b,k)=>{let[f,g]=k;return""+b+f+"="+g+`
`},""):String(n.body);return{path:r,submission:{formMethod:y,formAction:E,formEncType:n.formEncType,formData:void 0,json:void 0,text:h}}}else if(n.formEncType==="application/json"){if(!ia(y))return i();try{let h=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:y,formAction:E,formEncType:n.formEncType,formData:void 0,json:h,text:void 0}}}catch{return i()}}}zr(typeof FormData=="function","FormData is not available in this environment");let p,o;if(n.formData)p=Om(n.formData),o=n.formData;else if(n.body instanceof FormData)p=Om(n.body),o=n.body;else if(n.body instanceof URLSearchParams)p=n.body,o=ry(p);else if(n.body==null)p=new URLSearchParams,o=new FormData;else try{p=new URLSearchParams(n.body),o=ry(p)}catch{return i()}let C={formMethod:y,formAction:E,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:o,json:void 0,text:void 0};if(ia(C.formMethod))return{path:r,submission:C};let _=jo(r);return t&&_.search&&Jg(_.search)&&p.append("index",""),_.search="?"+p,{path:pc(_),submission:C}}function gk(e,t){let r=e;if(t){let n=e.findIndex(i=>i.route.id===t);n>=0&&(r=e.slice(0,n))}return r}function Z0(e,t,r,n,i,a,y,E,p,o,C,_,h,b,k,f){let g=f?Ds(f[1])?f[1].error:f[1].data:void 0,s=e.createURL(t.location),w=e.createURL(i),S=f&&Ds(f[1])?f[0]:void 0,T=S?gk(r,S):r,x=f?f[1].statusCode:void 0,O=y&&x&&x>=400,P=T.filter((I,d)=>{let{route:v}=I;if(v.lazy)return!0;if(v.loader==null)return!1;if(a)return typeof v.loader!="function"||v.loader.hydrate?!0:t.loaderData[v.id]===void 0&&(!t.errors||t.errors[v.id]===void 0);if(vk(t.loaderData,t.matches[d],I)||p.some(l=>l===I.route.id))return!0;let c=t.matches[d],u=I;return ey(I,Nn({currentUrl:s,currentParams:c.params,nextUrl:w,nextParams:u.params},n,{actionResult:g,actionStatus:x,defaultShouldRevalidate:O?!1:E||s.pathname+s.search===w.pathname+w.search||s.search!==w.search||b1(c,u)}))}),R=[];return _.forEach((I,d)=>{if(a||!r.some(m=>m.route.id===I.routeId)||C.has(d))return;let v=Yo(b,I.path,k);if(!v){R.push({key:d,routeId:I.routeId,path:I.path,matches:null,match:null,controller:null});return}let c=t.fetchers.get(d),u=yu(v,I.path),l=!1;h.has(d)?l=!1:o.has(d)?(o.delete(d),l=!0):c&&c.state!=="idle"&&c.data===void 0?l=E:l=ey(u,Nn({currentUrl:s,currentParams:t.matches[t.matches.length-1].params,nextUrl:w,nextParams:r[r.length-1].params},n,{actionResult:g,actionStatus:x,defaultShouldRevalidate:O?!1:E})),l&&R.push({key:d,routeId:I.routeId,path:I.path,matches:v,match:u,controller:new AbortController})}),[P,R]}function vk(e,t,r){let n=!t||r.route.id!==t.route.id,i=e[r.route.id]===void 0;return n||i}function b1(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function ey(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function yk(e,t,r,n,i,a,y,E){let p=[t,...r.map(o=>o.route.id)].join("-");try{let o=y.get(p);o||(o=e({path:t,matches:r,patch:(C,_)=>{E.aborted||S1(C,_,n,i,a)}}),y.set(p,o)),o&&Pk(o)&&await o}finally{y.delete(p)}}function S1(e,t,r,n,i){if(e){var a;let y=n[e];zr(y,"No route found to patch children into: routeId = "+e);let E=Gu(t,i,[e,"patch",String(((a=y.children)==null?void 0:a.length)||"0")],n);y.children?y.children.push(...E):y.children=E}else{let y=Gu(t,i,["patch",String(r.length||"0")],n);r.push(...y)}}async function _k(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let i=r[e.id];zr(i,"No route found in manifest");let a={};for(let y in n){let p=i[y]!==void 0&&y!=="hasErrorBoundary";gl(!p,'Route "'+i.id+'" has a static property "'+y+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+y+'" will be ignored.')),!p&&!zE.has(y)&&(a[y]=n[y])}Object.assign(i,a),Object.assign(i,Nn({},t(i),{lazy:void 0}))}async function wk(e){let{matches:t}=e,r=t.filter(i=>i.shouldLoad);return(await Promise.all(r.map(i=>i.resolve()))).reduce((i,a,y)=>Object.assign(i,{[r[y].route.id]:a}),{})}async function bk(e,t,r,n,i,a,y,E,p,o){let C=a.map(b=>b.route.lazy?_k(b.route,p,E):void 0),_=a.map((b,k)=>{let f=C[k],g=i.some(w=>w.route.id===b.route.id);return Nn({},b,{shouldLoad:g,resolve:async w=>(w&&n.method==="GET"&&(b.route.lazy||b.route.loader)&&(g=!0),g?Sk(t,n,b,f,w,o):Promise.resolve({type:gn.data,result:void 0}))})}),h=await e({matches:_,request:n,params:a[0].params,fetcherKey:y,context:o});try{await Promise.all(C)}catch{}return h}async function Sk(e,t,r,n,i,a){let y,E,p=o=>{let C,_=new Promise((k,f)=>C=f);E=()=>C(),t.signal.addEventListener("abort",E);let h=k=>typeof o!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):o({request:t,params:r.params,context:a},...k!==void 0?[k]:[]),b=(async()=>{try{return{type:"data",result:await(i?i(f=>h(f)):h())}}catch(k){return{type:"error",result:k}}})();return Promise.race([b,_])};try{let o=r.route[e];if(n)if(o){let C,[_]=await Promise.all([p(o).catch(h=>{C=h}),n]);if(C!==void 0)throw C;y=_}else if(await n,o=r.route[e],o)y=await p(o);else if(e==="action"){let C=new URL(t.url),_=C.pathname+C.search;throw ss(405,{method:t.method,pathname:_,routeId:r.route.id})}else return{type:gn.data,result:void 0};else if(o)y=await p(o);else{let C=new URL(t.url),_=C.pathname+C.search;throw ss(404,{pathname:_})}zr(y.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(o){return{type:gn.error,result:o}}finally{E&&t.signal.removeEventListener("abort",E)}return y}async function Rk(e){let{result:t,type:r}=e;if(E1(t)){let o;try{let C=t.headers.get("Content-Type");C&&/\bapplication\/json\b/.test(C)?t.body==null?o=null:o=await t.json():o=await t.text()}catch(C){return{type:gn.error,error:C}}return r===gn.error?{type:gn.error,error:new Qp(t.status,t.statusText,o),statusCode:t.status,headers:t.headers}:{type:gn.data,data:o,statusCode:t.status,headers:t.headers}}if(r===gn.error){if(oy(t)){var n;if(t.data instanceof Error){var i;return{type:gn.error,error:t.data,statusCode:(i=t.init)==null?void 0:i.status}}t=new Qp(((n=t.init)==null?void 0:n.status)||500,void 0,t.data)}return{type:gn.error,error:t,statusCode:Rh(t)?t.status:void 0}}if(xk(t)){var a,y;return{type:gn.deferred,deferredData:t,statusCode:(a=t.init)==null?void 0:a.status,headers:((y=t.init)==null?void 0:y.headers)&&new Headers(t.init.headers)}}if(oy(t)){var E,p;return{type:gn.data,data:t.data,statusCode:(E=t.init)==null?void 0:E.status,headers:(p=t.init)!=null&&p.headers?new Headers(t.init.headers):void 0}}return{type:gn.data,data:t}}function Ek(e,t,r,n,i,a){let y=e.headers.get("Location");if(zr(y,"Redirects returned/thrown from loaders/actions must have a Location header"),!Kg.test(y)){let E=n.slice(0,n.findIndex(p=>p.route.id===r)+1);y=xm(new URL(t.url),E,i,!0,y,a),e.headers.set("Location",y)}return e}function ty(e,t,r){if(Kg.test(e)){let n=e,i=n.startsWith("//")?new URL(t.protocol+n):new URL(n),a=Rl(i.pathname,r)!=null;if(i.origin===t.origin&&a)return i.pathname+i.search+i.hash}return e}function Lc(e,t,r,n){let i=e.createURL(R1(t)).toString(),a={signal:r};if(n&&ia(n.formMethod)){let{formMethod:y,formEncType:E}=n;a.method=y.toUpperCase(),E==="application/json"?(a.headers=new Headers({"Content-Type":E}),a.body=JSON.stringify(n.json)):E==="text/plain"?a.body=n.text:E==="application/x-www-form-urlencoded"&&n.formData?a.body=Om(n.formData):a.body=n.formData}return new Request(i,a)}function Om(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function ry(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function kk(e,t,r,n,i){let a={},y=null,E,p=!1,o={},C=r&&Ds(r[1])?r[1].error:void 0;return e.forEach(_=>{if(!(_.route.id in t))return;let h=_.route.id,b=t[h];if(zr(!tc(b),"Cannot handle redirect results in processLoaderData"),Ds(b)){let k=b.error;C!==void 0&&(k=C,C=void 0),y=y||{};{let f=Xc(e,h);y[f.route.id]==null&&(y[f.route.id]=k)}a[h]=void 0,p||(p=!0,E=Rh(b.error)?b.error.status:500),b.headers&&(o[h]=b.headers)}else wo(b)?(n.set(h,b.deferredData),a[h]=b.deferredData.data,b.statusCode!=null&&b.statusCode!==200&&!p&&(E=b.statusCode),b.headers&&(o[h]=b.headers)):(a[h]=b.data,b.statusCode&&b.statusCode!==200&&!p&&(E=b.statusCode),b.headers&&(o[h]=b.headers))}),C!==void 0&&r&&(y={[r[0]]:C},a[r[0]]=void 0),{loaderData:a,errors:y,statusCode:E||200,loaderHeaders:o}}function ny(e,t,r,n,i,a,y,E){let{loaderData:p,errors:o}=kk(t,n,i,E);return a.forEach(C=>{let{key:_,match:h,controller:b}=C,k=y[_];if(zr(k,"Did not find corresponding fetcher result"),!(b&&b.signal.aborted))if(Ds(k)){let f=Xc(e.matches,h==null?void 0:h.route.id);o&&o[f.route.id]||(o=Nn({},o,{[f.route.id]:k.error})),e.fetchers.delete(_)}else if(tc(k))zr(!1,"Unhandled fetcher revalidation redirect");else if(wo(k))zr(!1,"Unhandled fetcher deferred data");else{let f=ho(k.data);e.fetchers.set(_,f)}}),{loaderData:p,errors:o}}function iy(e,t,r,n){let i=Nn({},t);for(let a of r){let y=a.route.id;if(t.hasOwnProperty(y)?t[y]!==void 0&&(i[y]=t[y]):e[y]!==void 0&&a.route.loader&&(i[y]=e[y]),n&&n.hasOwnProperty(y))break}return i}function sy(e){return e?Ds(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Xc(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function ay(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function ss(e,t){let{pathname:r,routeId:n,method:i,type:a,message:y}=t===void 0?{}:t,E="Unknown Server Error",p="Unknown @remix-run/router error";return e===400?(E="Bad Request",a==="route-discovery"?p='Unable to match URL "'+r+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+y):i&&r&&n?p="You made a "+i+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":a==="defer-action"?p="defer() is not supported in actions":a==="invalid-body"&&(p="Unable to encode submission body")):e===403?(E="Forbidden",p='Route "'+n+'" does not match URL "'+r+'"'):e===404?(E="Not Found",p='No route matches URL "'+r+'"'):e===405&&(E="Method Not Allowed",i&&r&&n?p="You made a "+i.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":i&&(p='Invalid request method "'+i.toUpperCase()+'"')),new Qp(e||500,E,new Error(p),!0)}function ep(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[n,i]=t[r];if(tc(i))return{key:n,result:i}}}function R1(e){let t=typeof e=="string"?jo(e):e;return pc(Nn({},t,{hash:""}))}function Ck(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Pk(e){return typeof e=="object"&&e!=null&&"then"in e}function Tk(e){return E1(e.result)&&uk.has(e.result.status)}function wo(e){return e.type===gn.deferred}function Ds(e){return e.type===gn.error}function tc(e){return(e&&e.type)===gn.redirect}function oy(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function xk(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function E1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function Ok(e){return lk.has(e.toLowerCase())}function ia(e){return ok.has(e.toLowerCase())}async function Dk(e,t,r,n,i){let a=Object.entries(t);for(let y=0;y<a.length;y++){let[E,p]=a[y],o=e.find(h=>(h==null?void 0:h.route.id)===E);if(!o)continue;let C=n.find(h=>h.route.id===o.route.id),_=C!=null&&!b1(C,o)&&(i&&i[o.route.id])!==void 0;wo(p)&&_&&await Gg(p,r,!1).then(h=>{h&&(t[E]=h)})}}async function Ik(e,t,r){for(let n=0;n<r.length;n++){let{key:i,routeId:a,controller:y}=r[n],E=t[i];e.find(o=>(o==null?void 0:o.route.id)===a)&&wo(E)&&(zr(y,"Expected an AbortController for revalidating fetcher deferred result"),await Gg(E,y.signal,!0).then(o=>{o&&(t[i]=o)}))}}async function Gg(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:gn.data,data:e.deferredData.unwrappedData}}catch(i){return{type:gn.error,error:i}}return{type:gn.data,data:e.deferredData.data}}}function Jg(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function yu(e,t){let r=typeof t=="string"?jo(t).search:t.search;if(e[e.length-1].route.index&&Jg(r||""))return e[e.length-1];let n=y1(e);return n[n.length-1]}function cy(e){let{formMethod:t,formAction:r,formEncType:n,text:i,formData:a,json:y}=e;if(!(!t||!r||!n)){if(i!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i};if(a!=null)return{formMethod:t,formAction:r,formEncType:n,formData:a,json:void 0,text:void 0};if(y!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:y,text:void 0}}}function Ef(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Mk(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function cu(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Ak(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function ho(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Lk(e,t){try{let r=e.sessionStorage.getItem(w1);if(r){let n=JSON.parse(r);for(let[i,a]of Object.entries(n||{}))a&&Array.isArray(a)&&t.set(i,new Set(a||[]))}}catch{}}function Nk(e,t){if(t.size>0){let r={};for(let[n,i]of t)r[n]=[...i];try{e.sessionStorage.setItem(w1,JSON.stringify(r))}catch(n){gl(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yp(){return Yp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yp.apply(this,arguments)}const Eh=Oe.createContext(null),k1=Oe.createContext(null),vc=Oe.createContext(null),Qg=Oe.createContext(null),yc=Oe.createContext({outlet:null,matches:[],isDataRoute:!1}),C1=Oe.createContext(null);function jk(e,t){let{relative:r}=t===void 0?{}:t;nd()||zr(!1);let{basename:n,navigator:i}=Oe.useContext(vc),{hash:a,pathname:y,search:E}=T1(e,{relative:r}),p=y;return n!=="/"&&(p=y==="/"?n:Aa([n,y])),i.createHref({pathname:p,search:E,hash:a})}function nd(){return Oe.useContext(Qg)!=null}function kh(){return nd()||zr(!1),Oe.useContext(Qg).location}function P1(e){Oe.useContext(vc).static||Oe.useLayoutEffect(e)}function Bk(){let{isDataRoute:e}=Oe.useContext(yc);return e?Qk():Fk()}function Fk(){nd()||zr(!1);let e=Oe.useContext(Eh),{basename:t,future:r,navigator:n}=Oe.useContext(vc),{matches:i}=Oe.useContext(yc),{pathname:a}=kh(),y=JSON.stringify($g(i,r.v7_relativeSplatPath)),E=Oe.useRef(!1);return P1(()=>{E.current=!0}),Oe.useCallback(function(o,C){if(C===void 0&&(C={}),!E.current)return;if(typeof o=="number"){n.go(o);return}let _=qg(o,JSON.parse(y),a,C.relative==="path");e==null&&t!=="/"&&(_.pathname=_.pathname==="/"?t:Aa([t,_.pathname])),(C.replace?n.replace:n.push)(_,C.state,C)},[t,n,y,a,e])}function T1(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=Oe.useContext(vc),{matches:i}=Oe.useContext(yc),{pathname:a}=kh(),y=JSON.stringify($g(i,n.v7_relativeSplatPath));return Oe.useMemo(()=>qg(e,JSON.parse(y),a,r==="path"),[e,y,a,r])}function Uk(e,t,r,n){nd()||zr(!1);let{navigator:i}=Oe.useContext(vc),{matches:a}=Oe.useContext(yc),y=a[a.length-1],E=y?y.params:{};y&&y.pathname;let p=y?y.pathnameBase:"/";y&&y.route;let o=kh(),C;C=o;let _=C.pathname||"/",h=_;if(p!=="/"){let f=p.replace(/^\//,"").split("/");h="/"+_.replace(/^\//,"").split("/").slice(f.length).join("/")}let b=Yo(e,{pathname:h});return $k(b&&b.map(f=>Object.assign({},f,{params:Object.assign({},E,f.params),pathname:Aa([p,i.encodeLocation?i.encodeLocation(f.pathname).pathname:f.pathname]),pathnameBase:f.pathnameBase==="/"?p:Aa([p,i.encodeLocation?i.encodeLocation(f.pathnameBase).pathname:f.pathnameBase])})),a,r,n)}function zk(){let e=Jk(),t=Rh(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return Oe.createElement(Oe.Fragment,null,Oe.createElement("h2",null,"Unexpected Application Error!"),Oe.createElement("h3",{style:{fontStyle:"italic"}},t),r?Oe.createElement("pre",{style:i},r):null,null)}const Hk=Oe.createElement(zk,null);class Wk extends Oe.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?Oe.createElement(yc.Provider,{value:this.props.routeContext},Oe.createElement(C1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Vk(e){let{routeContext:t,match:r,children:n}=e,i=Oe.useContext(Eh);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),Oe.createElement(yc.Provider,{value:t},n)}function $k(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let y=e,E=(i=r)==null?void 0:i.errors;if(E!=null){let C=y.findIndex(_=>_.route.id&&(E==null?void 0:E[_.route.id])!==void 0);C>=0||zr(!1),y=y.slice(0,Math.min(y.length,C+1))}let p=!1,o=-1;if(r&&n&&n.v7_partialHydration)for(let C=0;C<y.length;C++){let _=y[C];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(o=C),_.route.id){let{loaderData:h,errors:b}=r,k=_.route.loader&&h[_.route.id]===void 0&&(!b||b[_.route.id]===void 0);if(_.route.lazy||k){p=!0,o>=0?y=y.slice(0,o+1):y=[y[0]];break}}}return y.reduceRight((C,_,h)=>{let b,k=!1,f=null,g=null;r&&(b=E&&_.route.id?E[_.route.id]:void 0,f=_.route.errorElement||Hk,p&&(o<0&&h===0?(Yk("route-fallback"),k=!0,g=null):o===h&&(k=!0,g=_.route.hydrateFallbackElement||null)));let s=t.concat(y.slice(0,h+1)),w=()=>{let S;return b?S=f:k?S=g:_.route.Component?S=Oe.createElement(_.route.Component,null):_.route.element?S=_.route.element:S=C,Oe.createElement(Vk,{match:_,routeContext:{outlet:C,matches:s,isDataRoute:r!=null},children:S})};return r&&(_.route.ErrorBoundary||_.route.errorElement||h===0)?Oe.createElement(Wk,{location:r.location,revalidation:r.revalidation,component:f,error:b,children:w(),routeContext:{outlet:null,matches:s,isDataRoute:!0}}):w()},null)}var x1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(x1||{}),Xp=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Xp||{});function qk(e){let t=Oe.useContext(Eh);return t||zr(!1),t}function Kk(e){let t=Oe.useContext(k1);return t||zr(!1),t}function Gk(e){let t=Oe.useContext(yc);return t||zr(!1),t}function O1(e){let t=Gk(),r=t.matches[t.matches.length-1];return r.route.id||zr(!1),r.route.id}function Jk(){var e;let t=Oe.useContext(C1),r=Kk(Xp.UseRouteError),n=O1(Xp.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Qk(){let{router:e}=qk(x1.UseNavigateStable),t=O1(Xp.UseNavigateStable),r=Oe.useRef(!1);return P1(()=>{r.current=!0}),Oe.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Yp({fromRouteId:t},a)))},[e,t])}const ly={};function Yk(e,t,r){ly[e]||(ly[e]=!0)}function Xk(e){let{basename:t="/",children:r=null,location:n,navigationType:i=oi.Pop,navigator:a,static:y=!1,future:E}=e;nd()&&zr(!1);let p=t.replace(/^\/*/,"/"),o=Oe.useMemo(()=>({basename:p,navigator:a,static:y,future:Yp({v7_relativeSplatPath:!1},E)}),[p,E,a,y]);typeof n=="string"&&(n=jo(n));let{pathname:C="/",search:_="",hash:h="",state:b=null,key:k="default"}=n,f=Oe.useMemo(()=>{let g=Rl(C,p);return g==null?null:{location:{pathname:g,search:_,hash:h,state:b,key:k},navigationType:i}},[p,C,_,h,b,k,i]);return f==null?null:Oe.createElement(vc.Provider,{value:o},Oe.createElement(Qg.Provider,{children:r,value:f}))}new Promise(()=>{});function Zk(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:Oe.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:Oe.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:Oe.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ju(){return Ju=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ju.apply(this,arguments)}function eC(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function tC(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function rC(e,t){return e.button===0&&(!t||t==="_self")&&!tC(e)}const nC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],iC="6";try{window.__reactRouterVersion=iC}catch{}function sC(e,t){return fk({basename:void 0,future:Ju({},void 0,{v7_prependBasename:!0}),history:BE({window:void 0}),hydrationData:aC(),routes:e,mapRouteProperties:Zk,unstable_dataStrategy:void 0,unstable_patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function aC(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=Ju({},t,{errors:oC(t.errors)})),t}function oC(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&i.__type==="RouteErrorResponse")r[n]=new Qp(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let a=window[i.__subType];if(typeof a=="function")try{let y=new a(i.message);y.stack="",r[n]=y}catch{}}if(r[n]==null){let a=new Error(i.message);a.stack="",r[n]=a}}else r[n]=i;return r}const cC=Oe.createContext({isTransitioning:!1}),lC=Oe.createContext(new Map),uC="startTransition",uy=kS[uC],dC="flushSync",dy=jE[dC];function pC(e){uy?uy(e):e()}function lu(e){dy?dy(e):e()}class hC{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}}function fC(e){let{fallbackElement:t,router:r,future:n}=e,[i,a]=Oe.useState(r.state),[y,E]=Oe.useState(),[p,o]=Oe.useState({isTransitioning:!1}),[C,_]=Oe.useState(),[h,b]=Oe.useState(),[k,f]=Oe.useState(),g=Oe.useRef(new Map),{v7_startTransition:s}=n||{},w=Oe.useCallback(R=>{s?pC(R):R()},[s]),S=Oe.useCallback((R,I)=>{let{deletedFetchers:d,unstable_flushSync:v,unstable_viewTransitionOpts:c}=I;d.forEach(l=>g.current.delete(l)),R.fetchers.forEach((l,m)=>{l.data!==void 0&&g.current.set(m,l.data)});let u=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!c||u){v?lu(()=>a(R)):w(()=>a(R));return}if(v){lu(()=>{h&&(C&&C.resolve(),h.skipTransition()),o({isTransitioning:!0,flushSync:!0,currentLocation:c.currentLocation,nextLocation:c.nextLocation})});let l=r.window.document.startViewTransition(()=>{lu(()=>a(R))});l.finished.finally(()=>{lu(()=>{_(void 0),b(void 0),E(void 0),o({isTransitioning:!1})})}),lu(()=>b(l));return}h?(C&&C.resolve(),h.skipTransition(),f({state:R,currentLocation:c.currentLocation,nextLocation:c.nextLocation})):(E(R),o({isTransitioning:!0,flushSync:!1,currentLocation:c.currentLocation,nextLocation:c.nextLocation}))},[r.window,h,C,g,w]);Oe.useLayoutEffect(()=>r.subscribe(S),[r,S]),Oe.useEffect(()=>{p.isTransitioning&&!p.flushSync&&_(new hC)},[p]),Oe.useEffect(()=>{if(C&&y&&r.window){let R=y,I=C.promise,d=r.window.document.startViewTransition(async()=>{w(()=>a(R)),await I});d.finished.finally(()=>{_(void 0),b(void 0),E(void 0),o({isTransitioning:!1})}),b(d)}},[w,y,C,r.window]),Oe.useEffect(()=>{C&&y&&i.location.key===y.location.key&&C.resolve()},[C,h,i.location,y]),Oe.useEffect(()=>{!p.isTransitioning&&k&&(E(k.state),o({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}),f(void 0))},[p.isTransitioning,k]),Oe.useEffect(()=>{},[]);let T=Oe.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:R=>r.navigate(R),push:(R,I,d)=>r.navigate(R,{state:I,preventScrollReset:d==null?void 0:d.preventScrollReset}),replace:(R,I,d)=>r.navigate(R,{replace:!0,state:I,preventScrollReset:d==null?void 0:d.preventScrollReset})}),[r]),x=r.basename||"/",O=Oe.useMemo(()=>({router:r,navigator:T,static:!1,basename:x}),[r,T,x]),P=Oe.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return Oe.createElement(Oe.Fragment,null,Oe.createElement(Eh.Provider,{value:O},Oe.createElement(k1.Provider,{value:i},Oe.createElement(lC.Provider,{value:g.current},Oe.createElement(cC.Provider,{value:p},Oe.createElement(Xk,{basename:x,location:i.location,navigationType:i.historyAction,navigator:T,future:P},i.initialized||r.future.v7_partialHydration?Oe.createElement(mC,{routes:r.routes,future:r.future,state:i}):t))))),null)}const mC=Oe.memo(gC);function gC(e){let{routes:t,future:r,state:n}=e;return Uk(t,void 0,n,r)}const vC=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Yg=Oe.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:a,replace:y,state:E,target:p,to:o,preventScrollReset:C,unstable_viewTransition:_}=t,h=eC(t,nC),{basename:b}=Oe.useContext(vc),k,f=!1;if(typeof o=="string"&&yC.test(o)&&(k=o,vC))try{let S=new URL(window.location.href),T=o.startsWith("//")?new URL(S.protocol+o):new URL(o),x=Rl(T.pathname,b);T.origin===S.origin&&x!=null?o=x+T.search+T.hash:f=!0}catch{}let g=jk(o,{relative:i}),s=_C(o,{replace:y,state:E,target:p,preventScrollReset:C,relative:i,unstable_viewTransition:_});function w(S){n&&n(S),S.defaultPrevented||s(S)}return Oe.createElement("a",Ju({},h,{href:k||g,onClick:f||a?n:w,ref:r,target:p}))});var py;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(py||(py={}));var hy;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(hy||(hy={}));function _C(e,t){let{target:r,replace:n,state:i,preventScrollReset:a,relative:y,unstable_viewTransition:E}=t===void 0?{}:t,p=Bk(),o=kh(),C=T1(e,{relative:y});return Oe.useCallback(_=>{if(rC(_,r)){_.preventDefault();let h=n!==void 0?n:pc(o)===pc(C);p(e,{replace:h,state:i,preventScrollReset:a,relative:y,unstable_viewTransition:E})}},[o,p,C,n,i,r,e,a,y,E])}/*!
* sweetalert2 v11.14.2
* Released under the MIT License.
*/function D1(e,t,r){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}function wC(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function fy(e,t){return e.get(D1(e,t))}function bC(e,t,r){wC(e,t),t.set(e,r)}function SC(e,t,r){return e.set(D1(e,t),r),r}const RC=100,gr={},EC=()=>{gr.previousActiveElement instanceof HTMLElement?(gr.previousActiveElement.focus(),gr.previousActiveElement=null):document.body&&document.body.focus()},kC=e=>new Promise(t=>{if(!e)return t();const r=window.scrollX,n=window.scrollY;gr.restoreFocusTimeout=setTimeout(()=>{EC(),t()},RC),window.scrollTo(r,n)}),I1="swal2-",CC=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],je=CC.reduce((e,t)=>(e[t]=I1+t,e),{}),PC=["success","warning","info","question","error"],Zp=PC.reduce((e,t)=>(e[t]=I1+t,e),{}),M1="SweetAlert2:",Xg=e=>e.charAt(0).toUpperCase()+e.slice(1),Ss=e=>{console.warn(`${M1} ${typeof e=="object"?e.join(" "):e}`)},_c=e=>{console.error(`${M1} ${e}`)},my=[],TC=e=>{my.includes(e)||(my.push(e),Ss(e))},A1=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;TC(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},Ch=e=>typeof e=="function"?e():e,Zg=e=>e&&typeof e.toPromise=="function",id=e=>Zg(e)?e.toPromise():Promise.resolve(e),ev=e=>e&&Promise.resolve(e)===e,Rs=()=>document.body.querySelector(`.${je.container}`),sd=e=>{const t=Rs();return t?t.querySelector(e):null},Fs=e=>sd(`.${e}`),pn=()=>Fs(je.popup),ad=()=>Fs(je.icon),xC=()=>Fs(je["icon-content"]),L1=()=>Fs(je.title),tv=()=>Fs(je["html-container"]),N1=()=>Fs(je.image),rv=()=>Fs(je["progress-steps"]),Ph=()=>Fs(je["validation-message"]),Ra=()=>sd(`.${je.actions} .${je.confirm}`),El=()=>sd(`.${je.actions} .${je.cancel}`),wc=()=>sd(`.${je.actions} .${je.deny}`),OC=()=>Fs(je["input-label"]),kl=()=>sd(`.${je.loader}`),od=()=>Fs(je.actions),j1=()=>Fs(je.footer),Th=()=>Fs(je["timer-progress-bar"]),nv=()=>Fs(je.close),DC=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,iv=()=>{const e=pn();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),r=Array.from(t).sort((a,y)=>{const E=parseInt(a.getAttribute("tabindex")||"0"),p=parseInt(y.getAttribute("tabindex")||"0");return E>p?1:E<p?-1:0}),n=e.querySelectorAll(DC),i=Array.from(n).filter(a=>a.getAttribute("tabindex")!=="-1");return[...new Set(r.concat(i))].filter(a=>_s(a))},sv=()=>La(document.body,je.shown)&&!La(document.body,je["toast-shown"])&&!La(document.body,je["no-backdrop"]),xh=()=>{const e=pn();return e?La(e,je.toast):!1},IC=()=>{const e=pn();return e?e.hasAttribute("data-loading"):!1},Us=(e,t)=>{if(e.textContent="",t){const n=new DOMParser().parseFromString(t,"text/html"),i=n.querySelector("head");i&&Array.from(i.childNodes).forEach(y=>{e.appendChild(y)});const a=n.querySelector("body");a&&Array.from(a.childNodes).forEach(y=>{y instanceof HTMLVideoElement||y instanceof HTMLAudioElement?e.appendChild(y.cloneNode(!0)):e.appendChild(y)})}},La=(e,t)=>{if(!t)return!1;const r=t.split(/\s+/);for(let n=0;n<r.length;n++)if(!e.classList.contains(r[n]))return!1;return!0},MC=(e,t)=>{Array.from(e.classList).forEach(r=>{!Object.values(je).includes(r)&&!Object.values(Zp).includes(r)&&!Object.values(t.showClass||{}).includes(r)&&e.classList.remove(r)})},Ns=(e,t,r)=>{if(MC(e,t),!t.customClass)return;const n=t.customClass[r];if(n){if(typeof n!="string"&&!n.forEach){Ss(`Invalid type of customClass.${r}! Expected string or iterable object, got "${typeof n}"`);return}nn(e,n)}},Oh=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${je.popup} > .${je[t]}`);case"checkbox":return e.querySelector(`.${je.popup} > .${je.checkbox} input`);case"radio":return e.querySelector(`.${je.popup} > .${je.radio} input:checked`)||e.querySelector(`.${je.popup} > .${je.radio} input:first-child`);case"range":return e.querySelector(`.${je.popup} > .${je.range} input`);default:return e.querySelector(`.${je.popup} > .${je.input}`)}},B1=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},F1=(e,t,r)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(n=>{Array.isArray(e)?e.forEach(i=>{r?i.classList.add(n):i.classList.remove(n)}):r?e.classList.add(n):e.classList.remove(n)}))},nn=(e,t)=>{F1(e,t,!0)},Ea=(e,t)=>{F1(e,t,!1)},bo=(e,t)=>{const r=Array.from(e.children);for(let n=0;n<r.length;n++){const i=r[n];if(i instanceof HTMLElement&&La(i,t))return i}},sc=(e,t,r)=>{r===`${parseInt(r)}`&&(r=parseInt(r)),r||parseInt(r)===0?e.style.setProperty(t,typeof r=="number"?`${r}px`:r):e.style.removeProperty(t)},Pi=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";e&&(e.style.display=t)},Xi=e=>{e&&(e.style.display="none")},av=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";e&&new MutationObserver(()=>{cd(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},gy=(e,t,r,n)=>{const i=e.querySelector(t);i&&i.style.setProperty(r,n)},cd=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";t?Pi(e,r):Xi(e)},_s=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),AC=()=>!_s(Ra())&&!_s(wc())&&!_s(El()),vy=e=>e.scrollHeight>e.clientHeight,U1=e=>{const t=window.getComputedStyle(e),r=parseFloat(t.getPropertyValue("animation-duration")||"0"),n=parseFloat(t.getPropertyValue("transition-duration")||"0");return r>0||n>0},ov=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=Th();r&&_s(r)&&(t&&(r.style.transition="none",r.style.width="100%"),setTimeout(()=>{r.style.transition=`width ${e/1e3}s linear`,r.style.width="0%"},10))},LC=()=>{const e=Th();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const r=parseInt(window.getComputedStyle(e).width),n=t/r*100;e.style.width=`${n}%`},NC=()=>typeof window>"u"||typeof document>"u",jC=`
 <div aria-labelledby="${je.title}" aria-describedby="${je["html-container"]}" class="${je.popup}" tabindex="-1">
   <button type="button" class="${je.close}"></button>
   <ul class="${je["progress-steps"]}"></ul>
   <div class="${je.icon}"></div>
   <img class="${je.image}" />
   <h2 class="${je.title}" id="${je.title}"></h2>
   <div class="${je["html-container"]}" id="${je["html-container"]}"></div>
   <input class="${je.input}" id="${je.input}" />
   <input type="file" class="${je.file}" />
   <div class="${je.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${je.select}" id="${je.select}"></select>
   <div class="${je.radio}"></div>
   <label class="${je.checkbox}">
     <input type="checkbox" id="${je.checkbox}" />
     <span class="${je.label}"></span>
   </label>
   <textarea class="${je.textarea}" id="${je.textarea}"></textarea>
   <div class="${je["validation-message"]}" id="${je["validation-message"]}"></div>
   <div class="${je.actions}">
     <div class="${je.loader}"></div>
     <button type="button" class="${je.confirm}"></button>
     <button type="button" class="${je.deny}"></button>
     <button type="button" class="${je.cancel}"></button>
   </div>
   <div class="${je.footer}"></div>
   <div class="${je["timer-progress-bar-container"]}">
     <div class="${je["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),BC=()=>{const e=Rs();return e?(e.remove(),Ea([document.documentElement,document.body],[je["no-backdrop"],je["toast-shown"],je["has-column"]]),!0):!1},Go=()=>{gr.currentInstance.resetValidationMessage()},FC=()=>{const e=pn(),t=bo(e,je.input),r=bo(e,je.file),n=e.querySelector(`.${je.range} input`),i=e.querySelector(`.${je.range} output`),a=bo(e,je.select),y=e.querySelector(`.${je.checkbox} input`),E=bo(e,je.textarea);t.oninput=Go,r.onchange=Go,a.onchange=Go,y.onchange=Go,E.oninput=Go,n.oninput=()=>{Go(),i.value=n.value},n.onchange=()=>{Go(),i.value=n.value}},UC=e=>typeof e=="string"?document.querySelector(e):e,zC=e=>{const t=pn();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},HC=e=>{window.getComputedStyle(e).direction==="rtl"&&nn(Rs(),je.rtl)},WC=e=>{const t=BC();if(NC()){_c("SweetAlert2 requires document to initialize");return}const r=document.createElement("div");r.className=je.container,t&&nn(r,je["no-transition"]),Us(r,jC);const n=UC(e.target);n.appendChild(r),zC(e),HC(n),FC()},cv=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?VC(e,t):e&&Us(t,e)},VC=(e,t)=>{e.jquery?$C(t,e):Us(t,e.toString())},$C=(e,t)=>{if(e.textContent="",0 in t)for(let r=0;r in t;r++)e.appendChild(t[r].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},qC=(e,t)=>{const r=od(),n=kl();!r||!n||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?Xi(r):Pi(r),Ns(r,t,"actions"),KC(r,n,t),Us(n,t.loaderHtml||""),Ns(n,t,"loader"))};function KC(e,t,r){const n=Ra(),i=wc(),a=El();!n||!i||!a||(kf(n,"confirm",r),kf(i,"deny",r),kf(a,"cancel",r),GC(n,i,a,r),r.reverseButtons&&(r.toast?(e.insertBefore(a,n),e.insertBefore(i,n)):(e.insertBefore(a,t),e.insertBefore(i,t),e.insertBefore(n,t))))}function GC(e,t,r,n){if(!n.buttonsStyling){Ea([e,t,r],je.styled);return}nn([e,t,r],je.styled),n.confirmButtonColor&&(e.style.backgroundColor=n.confirmButtonColor,nn(e,je["default-outline"])),n.denyButtonColor&&(t.style.backgroundColor=n.denyButtonColor,nn(t,je["default-outline"])),n.cancelButtonColor&&(r.style.backgroundColor=n.cancelButtonColor,nn(r,je["default-outline"]))}function kf(e,t,r){const n=Xg(t);cd(e,r[`show${n}Button`],"inline-block"),Us(e,r[`${t}ButtonText`]||""),e.setAttribute("aria-label",r[`${t}ButtonAriaLabel`]||""),e.className=je[t],Ns(e,r,`${t}Button`)}const JC=(e,t)=>{const r=nv();r&&(Us(r,t.closeButtonHtml||""),Ns(r,t,"closeButton"),cd(r,t.showCloseButton),r.setAttribute("aria-label",t.closeButtonAriaLabel||""))},QC=(e,t)=>{const r=Rs();r&&(YC(r,t.backdrop),XC(r,t.position),ZC(r,t.grow),Ns(r,t,"container"))};function YC(e,t){typeof t=="string"?e.style.background=t:t||nn([document.documentElement,document.body],je["no-backdrop"])}function XC(e,t){t&&(t in je?nn(e,je[t]):(Ss('The "position" parameter is not valid, defaulting to "center"'),nn(e,je.center)))}function ZC(e,t){t&&nn(e,je[`grow-${t}`])}var bn={innerParams:new WeakMap,domCache:new WeakMap};const eP=["input","file","range","select","radio","checkbox","textarea"],tP=(e,t)=>{const r=pn();if(!r)return;const n=bn.innerParams.get(e),i=!n||t.input!==n.input;eP.forEach(a=>{const y=bo(r,je[a]);y&&(iP(a,t.inputAttributes),y.className=je[a],i&&Xi(y))}),t.input&&(i&&rP(t),sP(t))},rP=e=>{if(!e.input)return;if(!Xn[e.input]){_c(`Unexpected type of input! Expected ${Object.keys(Xn).join(" | ")}, got "${e.input}"`);return}const t=z1(e.input);if(!t)return;const r=Xn[e.input](t,e);Pi(t),e.inputAutoFocus&&setTimeout(()=>{B1(r)})},nP=e=>{for(let t=0;t<e.attributes.length;t++){const r=e.attributes[t].name;["id","type","value","style"].includes(r)||e.removeAttribute(r)}},iP=(e,t)=>{const r=pn();if(!r)return;const n=Oh(r,e);if(n){nP(n);for(const i in t)n.setAttribute(i,t[i])}},sP=e=>{if(!e.input)return;const t=z1(e.input);t&&Ns(t,e,"input")},lv=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},ld=(e,t,r)=>{if(r.inputLabel){const n=document.createElement("label"),i=je["input-label"];n.setAttribute("for",e.id),n.className=i,typeof r.customClass=="object"&&nn(n,r.customClass.inputLabel),n.innerText=r.inputLabel,t.insertAdjacentElement("beforebegin",n)}},z1=e=>{const t=pn();if(t)return bo(t,je[e]||je.input)},eh=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:ev(t)||Ss(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},Xn={};Xn.text=Xn.email=Xn.password=Xn.number=Xn.tel=Xn.url=Xn.search=Xn.date=Xn["datetime-local"]=Xn.time=Xn.week=Xn.month=(e,t)=>(eh(e,t.inputValue),ld(e,e,t),lv(e,t),e.type=t.input,e);Xn.file=(e,t)=>(ld(e,e,t),lv(e,t),e);Xn.range=(e,t)=>{const r=e.querySelector("input"),n=e.querySelector("output");return eh(r,t.inputValue),r.type=t.input,eh(n,t.inputValue),ld(r,e,t),e};Xn.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const r=document.createElement("option");Us(r,t.inputPlaceholder),r.value="",r.disabled=!0,r.selected=!0,e.appendChild(r)}return ld(e,e,t),e};Xn.radio=e=>(e.textContent="",e);Xn.checkbox=(e,t)=>{const r=Oh(pn(),"checkbox");r.value="1",r.checked=!!t.inputValue;const n=e.querySelector("span");return Us(n,t.inputPlaceholder||t.inputLabel),r};Xn.textarea=(e,t)=>{eh(e,t.inputValue),lv(e,t),ld(e,e,t);const r=n=>parseInt(window.getComputedStyle(n).marginLeft)+parseInt(window.getComputedStyle(n).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const n=parseInt(window.getComputedStyle(pn()).width),i=()=>{if(!document.body.contains(e))return;const a=e.offsetWidth+r(e);a>n?pn().style.width=`${a}px`:sc(pn(),"width",t.width)};new MutationObserver(i).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const aP=(e,t)=>{const r=tv();r&&(av(r),Ns(r,t,"htmlContainer"),t.html?(cv(t.html,r),Pi(r,"block")):t.text?(r.textContent=t.text,Pi(r,"block")):Xi(r),tP(e,t))},oP=(e,t)=>{const r=j1();r&&(av(r),cd(r,t.footer,"block"),t.footer&&cv(t.footer,r),Ns(r,t,"footer"))},cP=(e,t)=>{const r=bn.innerParams.get(e),n=ad();if(n){if(r&&t.icon===r.icon){_y(n,t),yy(n,t);return}if(!t.icon&&!t.iconHtml){Xi(n);return}if(t.icon&&Object.keys(Zp).indexOf(t.icon)===-1){_c(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),Xi(n);return}Pi(n),_y(n,t),yy(n,t),nn(n,t.showClass&&t.showClass.icon)}},yy=(e,t)=>{for(const[r,n]of Object.entries(Zp))t.icon!==r&&Ea(e,n);nn(e,t.icon&&Zp[t.icon]),pP(e,t),lP(),Ns(e,t,"icon")},lP=()=>{const e=pn();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),r=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let n=0;n<r.length;n++)r[n].style.backgroundColor=t},uP=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,dP=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,_y=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let r=e.innerHTML,n="";t.iconHtml?n=wy(t.iconHtml):t.icon==="success"?(n=uP,r=r.replace(/ style=".*?"/g,"")):t.icon==="error"?n=dP:t.icon&&(n=wy({question:"?",warning:"!",info:"i"}[t.icon])),r.trim()!==n.trim()&&Us(e,n)},pP=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const r of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])gy(e,r,"background-color",t.iconColor);gy(e,".swal2-success-ring","border-color",t.iconColor)}},wy=e=>`<div class="${je["icon-content"]}">${e}</div>`,hP=(e,t)=>{const r=N1();if(r){if(!t.imageUrl){Xi(r);return}Pi(r,""),r.setAttribute("src",t.imageUrl),r.setAttribute("alt",t.imageAlt||""),sc(r,"width",t.imageWidth),sc(r,"height",t.imageHeight),r.className=je.image,Ns(r,t,"image")}},fP=(e,t)=>{const r=Rs(),n=pn();if(!(!r||!n)){if(t.toast){sc(r,"width",t.width),n.style.width="100%";const i=kl();i&&n.insertBefore(i,ad())}else sc(n,"width",t.width);sc(n,"padding",t.padding),t.color&&(n.style.color=t.color),t.background&&(n.style.background=t.background),Xi(Ph()),mP(n,t)}},mP=(e,t)=>{const r=t.showClass||{};e.className=`${je.popup} ${_s(e)?r.popup:""}`,t.toast?(nn([document.documentElement,document.body],je["toast-shown"]),nn(e,je.toast)):nn(e,je.modal),Ns(e,t,"popup"),typeof t.customClass=="string"&&nn(e,t.customClass),t.icon&&nn(e,je[`icon-${t.icon}`])},gP=(e,t)=>{const r=rv();if(!r)return;const{progressSteps:n,currentProgressStep:i}=t;if(!n||n.length===0||i===void 0){Xi(r);return}Pi(r),r.textContent="",i>=n.length&&Ss("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),n.forEach((a,y)=>{const E=vP(a);if(r.appendChild(E),y===i&&nn(E,je["active-progress-step"]),y!==n.length-1){const p=yP(t);r.appendChild(p)}})},vP=e=>{const t=document.createElement("li");return nn(t,je["progress-step"]),Us(t,e),t},yP=e=>{const t=document.createElement("li");return nn(t,je["progress-step-line"]),e.progressStepsDistance&&sc(t,"width",e.progressStepsDistance),t},_P=(e,t)=>{const r=L1();r&&(av(r),cd(r,t.title||t.titleText,"block"),t.title&&cv(t.title,r),t.titleText&&(r.innerText=t.titleText),Ns(r,t,"title"))},H1=(e,t)=>{fP(e,t),QC(e,t),gP(e,t),cP(e,t),hP(e,t),_P(e,t),JC(e,t),aP(e,t),qC(e,t),oP(e,t);const r=pn();typeof t.didRender=="function"&&r&&t.didRender(r),gr.eventEmitter.emit("didRender",r)},wP=()=>_s(pn()),W1=()=>{var e;return(e=Ra())===null||e===void 0?void 0:e.click()},bP=()=>{var e;return(e=wc())===null||e===void 0?void 0:e.click()},SP=()=>{var e;return(e=El())===null||e===void 0?void 0:e.click()},Cl=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),V1=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},RP=(e,t,r)=>{V1(e),t.toast||(e.keydownHandler=n=>kP(t,n,r),e.keydownTarget=t.keydownListenerCapture?window:pn(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},Dm=(e,t)=>{var r;const n=iv();if(n.length){e=e+t,e===n.length?e=0:e===-1&&(e=n.length-1),n[e].focus();return}(r=pn())===null||r===void 0||r.focus()},$1=["ArrowRight","ArrowDown"],EP=["ArrowLeft","ArrowUp"],kP=(e,t,r)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?CP(t,e):t.key==="Tab"?PP(t):[...$1,...EP].includes(t.key)?TP(t.key):t.key==="Escape"&&xP(t,e,r)))},CP=(e,t)=>{if(!Ch(t.allowEnterKey))return;const r=Oh(pn(),t.input);if(e.target&&r&&e.target instanceof HTMLElement&&e.target.outerHTML===r.outerHTML){if(["textarea","file"].includes(t.input))return;W1(),e.preventDefault()}},PP=e=>{const t=e.target,r=iv();let n=-1;for(let i=0;i<r.length;i++)if(t===r[i]){n=i;break}e.shiftKey?Dm(n,-1):Dm(n,1),e.stopPropagation(),e.preventDefault()},TP=e=>{const t=od(),r=Ra(),n=wc(),i=El();if(!t||!r||!n||!i)return;const a=[r,n,i];if(document.activeElement instanceof HTMLElement&&!a.includes(document.activeElement))return;const y=$1.includes(e)?"nextElementSibling":"previousElementSibling";let E=document.activeElement;if(E){for(let p=0;p<t.children.length;p++){if(E=E[y],!E)return;if(E instanceof HTMLButtonElement&&_s(E))break}E instanceof HTMLButtonElement&&E.focus()}},xP=(e,t,r)=>{Ch(t.allowEscapeKey)&&(e.preventDefault(),r(Cl.esc))};var vl={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const OP=()=>{const e=Rs();Array.from(document.body.children).forEach(r=>{r.contains(e)||(r.hasAttribute("aria-hidden")&&r.setAttribute("data-previous-aria-hidden",r.getAttribute("aria-hidden")||""),r.setAttribute("aria-hidden","true"))})},q1=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},K1=typeof window<"u"&&!!window.GestureEvent,DP=()=>{if(K1&&!La(document.body,je.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,nn(document.body,je.iosfix),IP()}},IP=()=>{const e=Rs();if(!e)return;let t;e.ontouchstart=r=>{t=MP(r)},e.ontouchmove=r=>{t&&(r.preventDefault(),r.stopPropagation())}},MP=e=>{const t=e.target,r=Rs(),n=tv();return!r||!n||AP(e)||LP(e)?!1:t===r||!vy(r)&&t instanceof HTMLElement&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(vy(n)&&n.contains(t))},AP=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",LP=e=>e.touches&&e.touches.length>1,NP=()=>{if(La(document.body,je.iosfix)){const e=parseInt(document.body.style.top,10);Ea(document.body,je.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},jP=()=>{const e=document.createElement("div");e.className=je["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let sl=null;const BP=e=>{sl===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(sl=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${sl+jP()}px`)},FP=()=>{sl!==null&&(document.body.style.paddingRight=`${sl}px`,sl=null)};function G1(e,t,r,n){xh()?by(e,n):(kC(r).then(()=>by(e,n)),V1(gr)),K1?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),sv()&&(FP(),NP(),q1()),UP()}function UP(){Ea([document.documentElement,document.body],[je.shown,je["height-auto"],je["no-backdrop"],je["toast-shown"]])}function So(e){e=HP(e);const t=vl.swalPromiseResolve.get(this),r=zP(this);this.isAwaitingPromise?e.isDismissed||(ud(this),t(e)):r&&t(e)}const zP=e=>{const t=pn();if(!t)return!1;const r=bn.innerParams.get(e);if(!r||La(t,r.hideClass.popup))return!1;Ea(t,r.showClass.popup),nn(t,r.hideClass.popup);const n=Rs();return Ea(n,r.showClass.backdrop),nn(n,r.hideClass.backdrop),WP(e,t,r),!0};function J1(e){const t=vl.swalPromiseReject.get(this);ud(this),t&&t(e)}const ud=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,bn.innerParams.get(e)||e._destroy())},HP=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),WP=(e,t,r)=>{const n=Rs(),i=U1(t);typeof r.willClose=="function"&&r.willClose(t),gr.eventEmitter.emit("willClose",t),i?VP(e,t,n,r.returnFocus,r.didClose):G1(e,n,r.returnFocus,r.didClose)},VP=(e,t,r,n,i)=>{gr.swalCloseEventFinishedCallback=G1.bind(null,e,r,n,i),t.addEventListener("animationend",function(a){a.target===t&&(gr.swalCloseEventFinishedCallback(),delete gr.swalCloseEventFinishedCallback)})},by=(e,t)=>{setTimeout(()=>{typeof t=="function"&&t.bind(e.params)(),gr.eventEmitter.emit("didClose"),e._destroy&&e._destroy()})},yl=e=>{let t=pn();if(t||new Qi,t=pn(),!t)return;const r=kl();xh()?Xi(ad()):$P(t,e),Pi(r),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},$P=(e,t)=>{const r=od(),n=kl();!r||!n||(!t&&_s(Ra())&&(t=Ra()),Pi(r),t&&(Xi(t),n.setAttribute("data-button-to-replace",t.className),r.insertBefore(n,t)),nn([e,r],je.loading))},qP=(e,t)=>{t.input==="select"||t.input==="radio"?YP(e,t):["text","email","number","tel","textarea"].some(r=>r===t.input)&&(Zg(t.inputValue)||ev(t.inputValue))&&(yl(Ra()),XP(e,t))},KP=(e,t)=>{const r=e.getInput();if(!r)return null;switch(t.input){case"checkbox":return GP(r);case"radio":return JP(r);case"file":return QP(r);default:return t.inputAutoTrim?r.value.trim():r.value}},GP=e=>e.checked?1:0,JP=e=>e.checked?e.value:null,QP=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,YP=(e,t)=>{const r=pn();if(!r)return;const n=i=>{t.input==="select"?ZP(r,th(i),t):t.input==="radio"&&eT(r,th(i),t)};Zg(t.inputOptions)||ev(t.inputOptions)?(yl(Ra()),id(t.inputOptions).then(i=>{e.hideLoading(),n(i)})):typeof t.inputOptions=="object"?n(t.inputOptions):_c(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},XP=(e,t)=>{const r=e.getInput();r&&(Xi(r),id(t.inputValue).then(n=>{r.value=t.input==="number"?`${parseFloat(n)||0}`:`${n}`,Pi(r),r.focus(),e.hideLoading()}).catch(n=>{_c(`Error in inputValue promise: ${n}`),r.value="",Pi(r),r.focus(),e.hideLoading()}))};function ZP(e,t,r){const n=bo(e,je.select);if(!n)return;const i=(a,y,E)=>{const p=document.createElement("option");p.value=E,Us(p,y),p.selected=Q1(E,r.inputValue),a.appendChild(p)};t.forEach(a=>{const y=a[0],E=a[1];if(Array.isArray(E)){const p=document.createElement("optgroup");p.label=y,p.disabled=!1,n.appendChild(p),E.forEach(o=>i(p,o[1],o[0]))}else i(n,E,y)}),n.focus()}function eT(e,t,r){const n=bo(e,je.radio);if(!n)return;t.forEach(a=>{const y=a[0],E=a[1],p=document.createElement("input"),o=document.createElement("label");p.type="radio",p.name=je.radio,p.value=y,Q1(y,r.inputValue)&&(p.checked=!0);const C=document.createElement("span");Us(C,E),C.className=je.label,o.appendChild(p),o.appendChild(C),n.appendChild(o)});const i=n.querySelectorAll("input");i.length&&i[0].focus()}const th=e=>{const t=[];return e instanceof Map?e.forEach((r,n)=>{let i=r;typeof i=="object"&&(i=th(i)),t.push([n,i])}):Object.keys(e).forEach(r=>{let n=e[r];typeof n=="object"&&(n=th(n)),t.push([r,n])}),t},Q1=(e,t)=>!!t&&t.toString()===e.toString(),tT=e=>{const t=bn.innerParams.get(e);e.disableButtons(),t.input?Y1(e,"confirm"):dv(e,!0)},rT=e=>{const t=bn.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?Y1(e,"deny"):uv(e,!1)},nT=(e,t)=>{e.disableButtons(),t(Cl.cancel)},Y1=(e,t)=>{const r=bn.innerParams.get(e);if(!r.input){_c(`The "input" parameter is needed to be set when using returnInputValueOn${Xg(t)}`);return}const n=e.getInput(),i=KP(e,r);r.inputValidator?iT(e,i,t):n&&!n.checkValidity()?(e.enableButtons(),e.showValidationMessage(r.validationMessage||n.validationMessage)):t==="deny"?uv(e,i):dv(e,i)},iT=(e,t,r)=>{const n=bn.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>id(n.inputValidator(t,n.validationMessage))).then(a=>{e.enableButtons(),e.enableInput(),a?e.showValidationMessage(a):r==="deny"?uv(e,t):dv(e,t)})},uv=(e,t)=>{const r=bn.innerParams.get(e||void 0);r.showLoaderOnDeny&&yl(wc()),r.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>id(r.preDeny(t,r.validationMessage))).then(i=>{i===!1?(e.hideLoading(),ud(e)):e.close({isDenied:!0,value:typeof i>"u"?t:i})}).catch(i=>X1(e||void 0,i))):e.close({isDenied:!0,value:t})},Sy=(e,t)=>{e.close({isConfirmed:!0,value:t})},X1=(e,t)=>{e.rejectPromise(t)},dv=(e,t)=>{const r=bn.innerParams.get(e||void 0);r.showLoaderOnConfirm&&yl(),r.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>id(r.preConfirm(t,r.validationMessage))).then(i=>{_s(Ph())||i===!1?(e.hideLoading(),ud(e)):Sy(e,typeof i>"u"?t:i)}).catch(i=>X1(e||void 0,i))):Sy(e,t)};function rh(){const e=bn.innerParams.get(this);if(!e)return;const t=bn.domCache.get(this);Xi(t.loader),xh()?e.icon&&Pi(ad()):sT(t),Ea([t.popup,t.actions],je.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const sT=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?Pi(t[0],"inline-block"):AC()&&Xi(e.actions)};function Z1(){const e=bn.innerParams.get(this),t=bn.domCache.get(this);return t?Oh(t.popup,e.input):null}function eb(e,t,r){const n=bn.domCache.get(e);t.forEach(i=>{n[i].disabled=r})}function tb(e,t){const r=pn();if(!(!r||!e))if(e.type==="radio"){const n=r.querySelectorAll(`[name="${je.radio}"]`);for(let i=0;i<n.length;i++)n[i].disabled=t}else e.disabled=t}function rb(){eb(this,["confirmButton","denyButton","cancelButton"],!1)}function nb(){eb(this,["confirmButton","denyButton","cancelButton"],!0)}function ib(){tb(this.getInput(),!1)}function sb(){tb(this.getInput(),!0)}function ab(e){const t=bn.domCache.get(this),r=bn.innerParams.get(this);Us(t.validationMessage,e),t.validationMessage.className=je["validation-message"],r.customClass&&r.customClass.validationMessage&&nn(t.validationMessage,r.customClass.validationMessage),Pi(t.validationMessage);const n=this.getInput();n&&(n.setAttribute("aria-invalid","true"),n.setAttribute("aria-describedby",je["validation-message"]),B1(n),nn(n,je.inputerror))}function ob(){const e=bn.domCache.get(this);e.validationMessage&&Xi(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),Ea(t,je.inputerror))}const al={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},aT=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],oT={allowEnterKey:void 0},cT=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],cb=e=>Object.prototype.hasOwnProperty.call(al,e),lb=e=>aT.indexOf(e)!==-1,ub=e=>oT[e],lT=e=>{cb(e)||Ss(`Unknown parameter "${e}"`)},uT=e=>{cT.includes(e)&&Ss(`The parameter "${e}" is incompatible with toasts`)},dT=e=>{const t=ub(e);t&&A1(e,t)},pT=e=>{e.backdrop===!1&&e.allowOutsideClick&&Ss('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in e)lT(t),e.toast&&uT(t),dT(t)};function db(e){const t=pn(),r=bn.innerParams.get(this);if(!t||La(t,r.hideClass.popup)){Ss("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const n=hT(e),i=Object.assign({},r,n);H1(this,i),bn.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const hT=e=>{const t={};return Object.keys(e).forEach(r=>{lb(r)?t[r]=e[r]:Ss(`Invalid parameter to update: ${r}`)}),t};function pb(){const e=bn.domCache.get(this),t=bn.innerParams.get(this);if(!t){hb(this);return}e.popup&&gr.swalCloseEventFinishedCallback&&(gr.swalCloseEventFinishedCallback(),delete gr.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),gr.eventEmitter.emit("didDestroy"),fT(this)}const fT=e=>{hb(e),delete e.params,delete gr.keydownHandler,delete gr.keydownTarget,delete gr.currentInstance},hb=e=>{e.isAwaitingPromise?(Cf(bn,e),e.isAwaitingPromise=!0):(Cf(vl,e),Cf(bn,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},Cf=(e,t)=>{for(const r in e)e[r].delete(t)};var mT=Object.freeze({__proto__:null,_destroy:pb,close:So,closeModal:So,closePopup:So,closeToast:So,disableButtons:nb,disableInput:sb,disableLoading:rh,enableButtons:rb,enableInput:ib,getInput:Z1,handleAwaitingPromise:ud,hideLoading:rh,rejectPromise:J1,resetValidationMessage:ob,showValidationMessage:ab,update:db});const gT=(e,t,r)=>{e.toast?vT(e,t,r):(_T(t),wT(t),bT(e,t,r))},vT=(e,t,r)=>{t.popup.onclick=()=>{e&&(yT(e)||e.timer||e.input)||r(Cl.close)}},yT=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let nh=!1;const _T=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(nh=!0)}}},wT=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(r){e.popup.onmouseup=()=>{},(r.target===e.popup||r.target instanceof HTMLElement&&e.popup.contains(r.target))&&(nh=!0)}}},bT=(e,t,r)=>{t.container.onclick=n=>{if(nh){nh=!1;return}n.target===t.container&&Ch(e.allowOutsideClick)&&r(Cl.backdrop)}},ST=e=>typeof e=="object"&&e.jquery,Ry=e=>e instanceof Element||ST(e),RT=e=>{const t={};return typeof e[0]=="object"&&!Ry(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((r,n)=>{const i=e[n];typeof i=="string"||Ry(i)?t[r]=i:i!==void 0&&_c(`Unexpected type of ${r}! Expected "string" or "Element", got ${typeof i}`)}),t};function ET(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new this(...t)}function kT(e){class t extends this{_main(n,i){return super._main(n,Object.assign({},e,i))}}return t}const CT=()=>gr.timeout&&gr.timeout.getTimerLeft(),fb=()=>{if(gr.timeout)return LC(),gr.timeout.stop()},mb=()=>{if(gr.timeout){const e=gr.timeout.start();return ov(e),e}},PT=()=>{const e=gr.timeout;return e&&(e.running?fb():mb())},TT=e=>{if(gr.timeout){const t=gr.timeout.increase(e);return ov(t,!0),t}},xT=()=>!!(gr.timeout&&gr.timeout.isRunning());let Ey=!1;const Im={};function OT(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Im[e]=this,Ey||(document.body.addEventListener("click",DT),Ey=!0)}const DT=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const r in Im){const n=t.getAttribute(r);if(n){Im[r].fire({template:n});return}}};let IT=class{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,r){const n=this._getHandlersByEventName(t);n.includes(r)||n.push(r)}once(t,r){var n=this;const i=function(){n.removeListener(t,i);for(var a=arguments.length,y=new Array(a),E=0;E<a;E++)y[E]=arguments[E];r.apply(n,y)};this.on(t,i)}emit(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];this._getHandlersByEventName(t).forEach(a=>{try{a.apply(this,n)}catch(y){console.error(y)}})}removeListener(t,r){const n=this._getHandlersByEventName(t),i=n.indexOf(r);i>-1&&n.splice(i,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}};gr.eventEmitter=new IT;const MT=(e,t)=>{gr.eventEmitter.on(e,t)},AT=(e,t)=>{gr.eventEmitter.once(e,t)},LT=(e,t)=>{if(!e){gr.eventEmitter.reset();return}t?gr.eventEmitter.removeListener(e,t):gr.eventEmitter.removeAllListeners(e)};var NT=Object.freeze({__proto__:null,argsToParams:RT,bindClickHandler:OT,clickCancel:SP,clickConfirm:W1,clickDeny:bP,enableLoading:yl,fire:ET,getActions:od,getCancelButton:El,getCloseButton:nv,getConfirmButton:Ra,getContainer:Rs,getDenyButton:wc,getFocusableElements:iv,getFooter:j1,getHtmlContainer:tv,getIcon:ad,getIconContent:xC,getImage:N1,getInputLabel:OC,getLoader:kl,getPopup:pn,getProgressSteps:rv,getTimerLeft:CT,getTimerProgressBar:Th,getTitle:L1,getValidationMessage:Ph,increaseTimer:TT,isDeprecatedParameter:ub,isLoading:IC,isTimerRunning:xT,isUpdatableParameter:lb,isValidParameter:cb,isVisible:wP,mixin:kT,off:LT,on:MT,once:AT,resumeTimer:mb,showLoading:yl,stopTimer:fb,toggleTimer:PT});class jT{constructor(t,r){this.callback=t,this.remaining=r,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const r=this.running;return r&&this.stop(),this.remaining+=t,r&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const gb=["swal-title","swal-html","swal-footer"],BT=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const r=t.content;return qT(r),Object.assign(FT(r),UT(r),zT(r),HT(r),WT(r),VT(r),$T(r,gb))},FT=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(n=>{hc(n,["name","value"]);const i=n.getAttribute("name"),a=n.getAttribute("value");!i||!a||(typeof al[i]=="boolean"?t[i]=a!=="false":typeof al[i]=="object"?t[i]=JSON.parse(a):t[i]=a)}),t},UT=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(n=>{const i=n.getAttribute("name"),a=n.getAttribute("value");!i||!a||(t[i]=new Function(`return ${a}`)())}),t},zT=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(n=>{hc(n,["type","color","aria-label"]);const i=n.getAttribute("type");!i||!["confirm","cancel","deny"].includes(i)||(t[`${i}ButtonText`]=n.innerHTML,t[`show${Xg(i)}Button`]=!0,n.hasAttribute("color")&&(t[`${i}ButtonColor`]=n.getAttribute("color")),n.hasAttribute("aria-label")&&(t[`${i}ButtonAriaLabel`]=n.getAttribute("aria-label")))}),t},HT=e=>{const t={},r=e.querySelector("swal-image");return r&&(hc(r,["src","width","height","alt"]),r.hasAttribute("src")&&(t.imageUrl=r.getAttribute("src")||void 0),r.hasAttribute("width")&&(t.imageWidth=r.getAttribute("width")||void 0),r.hasAttribute("height")&&(t.imageHeight=r.getAttribute("height")||void 0),r.hasAttribute("alt")&&(t.imageAlt=r.getAttribute("alt")||void 0)),t},WT=e=>{const t={},r=e.querySelector("swal-icon");return r&&(hc(r,["type","color"]),r.hasAttribute("type")&&(t.icon=r.getAttribute("type")),r.hasAttribute("color")&&(t.iconColor=r.getAttribute("color")),t.iconHtml=r.innerHTML),t},VT=e=>{const t={},r=e.querySelector("swal-input");r&&(hc(r,["type","label","placeholder","value"]),t.input=r.getAttribute("type")||"text",r.hasAttribute("label")&&(t.inputLabel=r.getAttribute("label")),r.hasAttribute("placeholder")&&(t.inputPlaceholder=r.getAttribute("placeholder")),r.hasAttribute("value")&&(t.inputValue=r.getAttribute("value")));const n=Array.from(e.querySelectorAll("swal-input-option"));return n.length&&(t.inputOptions={},n.forEach(i=>{hc(i,["value"]);const a=i.getAttribute("value");if(!a)return;const y=i.innerHTML;t.inputOptions[a]=y})),t},$T=(e,t)=>{const r={};for(const n in t){const i=t[n],a=e.querySelector(i);a&&(hc(a,[]),r[i.replace(/^swal-/,"")]=a.innerHTML.trim())}return r},qT=e=>{const t=gb.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(r=>{const n=r.tagName.toLowerCase();t.includes(n)||Ss(`Unrecognized element <${n}>`)})},hc=(e,t)=>{Array.from(e.attributes).forEach(r=>{t.indexOf(r.name)===-1&&Ss([`Unrecognized attribute "${r.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},vb=10,KT=e=>{const t=Rs(),r=pn();typeof e.willOpen=="function"&&e.willOpen(r),gr.eventEmitter.emit("willOpen",r);const i=window.getComputedStyle(document.body).overflowY;QT(t,r,e),setTimeout(()=>{GT(t,r)},vb),sv()&&(JT(t,e.scrollbarPadding,i),OP()),!xh()&&!gr.previousActiveElement&&(gr.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(r)),gr.eventEmitter.emit("didOpen",r),Ea(t,je["no-transition"])},yb=e=>{const t=pn();if(e.target!==t)return;const r=Rs();t.removeEventListener("animationend",yb),r.style.overflowY="auto"},GT=(e,t)=>{U1(t)?(e.style.overflowY="hidden",t.addEventListener("animationend",yb)):e.style.overflowY="auto"},JT=(e,t,r)=>{DP(),t&&r!=="hidden"&&BP(r),setTimeout(()=>{e.scrollTop=0})},QT=(e,t,r)=>{nn(e,r.showClass.backdrop),r.animation?(t.style.setProperty("opacity","0","important"),Pi(t,"grid"),setTimeout(()=>{nn(t,r.showClass.popup),t.style.removeProperty("opacity")},vb)):Pi(t,"grid"),nn([document.documentElement,document.body],je.shown),r.heightAuto&&r.backdrop&&!r.toast&&nn([document.documentElement,document.body],je["height-auto"])};var ky={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function YT(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=ky.email),e.input==="url"&&(e.inputValidator=ky.url))}function XT(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(Ss('Target parameter is not valid, defaulting to "body"'),e.target="body")}function ZT(e){YT(e),e.showLoaderOnConfirm&&!e.preConfirm&&Ss(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),XT(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),WC(e)}let _a;var tp=new WeakMap;class ei{constructor(){if(bC(this,tp,void 0),typeof window>"u")return;_a=this;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];const i=Object.freeze(this.constructor.argsToParams(r));this.params=i,this.isAwaitingPromise=!1,SC(tp,this,this._main(_a.params))}_main(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(pT(Object.assign({},r,t)),gr.currentInstance){const a=vl.swalPromiseResolve.get(gr.currentInstance),{isAwaitingPromise:y}=gr.currentInstance;gr.currentInstance._destroy(),y||a({isDismissed:!0}),sv()&&q1()}gr.currentInstance=_a;const n=tx(t,r);ZT(n),Object.freeze(n),gr.timeout&&(gr.timeout.stop(),delete gr.timeout),clearTimeout(gr.restoreFocusTimeout);const i=rx(_a);return H1(_a,n),bn.innerParams.set(_a,n),ex(_a,i,n)}then(t){return fy(tp,this).then(t)}finally(t){return fy(tp,this).finally(t)}}const ex=(e,t,r)=>new Promise((n,i)=>{const a=y=>{e.close({isDismissed:!0,dismiss:y})};vl.swalPromiseResolve.set(e,n),vl.swalPromiseReject.set(e,i),t.confirmButton.onclick=()=>{tT(e)},t.denyButton.onclick=()=>{rT(e)},t.cancelButton.onclick=()=>{nT(e,a)},t.closeButton.onclick=()=>{a(Cl.close)},gT(r,t,a),RP(gr,r,a),qP(e,r),KT(r),nx(gr,r,a),ix(t,r),setTimeout(()=>{t.container.scrollTop=0})}),tx=(e,t)=>{const r=BT(e),n=Object.assign({},al,t,r,e);return n.showClass=Object.assign({},al.showClass,n.showClass),n.hideClass=Object.assign({},al.hideClass,n.hideClass),n.animation===!1&&(n.showClass={backdrop:"swal2-noanimation"},n.hideClass={}),n},rx=e=>{const t={popup:pn(),container:Rs(),actions:od(),confirmButton:Ra(),denyButton:wc(),cancelButton:El(),loader:kl(),closeButton:nv(),validationMessage:Ph(),progressSteps:rv()};return bn.domCache.set(e,t),t},nx=(e,t,r)=>{const n=Th();Xi(n),t.timer&&(e.timeout=new jT(()=>{r("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(Pi(n),Ns(n,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&ov(t.timer)})))},ix=(e,t)=>{if(!t.toast){if(!Ch(t.allowEnterKey)){A1("allowEnterKey"),ox();return}sx(e)||ax(e,t)||Dm(-1,1)}},sx=e=>{const t=e.popup.querySelectorAll("[autofocus]");for(const r of t)if(r instanceof HTMLElement&&_s(r))return r.focus(),!0;return!1},ax=(e,t)=>t.focusDeny&&_s(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&_s(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&_s(e.confirmButton)?(e.confirmButton.focus(),!0):!1,ox=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const r=document.createElement("audio");r.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",r.loop=!0,document.body.appendChild(r),setTimeout(()=>{r.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${e}`)}ei.prototype.disableButtons=nb;ei.prototype.enableButtons=rb;ei.prototype.getInput=Z1;ei.prototype.disableInput=sb;ei.prototype.enableInput=ib;ei.prototype.hideLoading=rh;ei.prototype.disableLoading=rh;ei.prototype.showValidationMessage=ab;ei.prototype.resetValidationMessage=ob;ei.prototype.close=So;ei.prototype.closePopup=So;ei.prototype.closeModal=So;ei.prototype.closeToast=So;ei.prototype.rejectPromise=J1;ei.prototype.update=db;ei.prototype._destroy=pb;Object.assign(ei,NT);Object.keys(mT).forEach(e=>{ei[e]=function(){return _a&&_a[e]?_a[e](...arguments):null}});ei.DismissReason=Cl;ei.version="11.14.2";const Qi=ei;Qi.default=Qi;typeof document<"u"&&function(e,t){var r=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(r),r.styleSheet)r.styleSheet.disabled||(r.styleSheet.cssText=t);else try{r.innerHTML=t}catch{r.innerText=t}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:hsl(0,0%,33%);font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid hsl(0,0%,85%);border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:hsl(0,0%,94%);color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:rgb(249.95234375,205.965625,167.74765625);color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:rgb(156.7033492823,224.2822966507,246.2966507177);color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:rgb(200.8064516129,217.9677419355,225.1935483871);color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}');const cx=()=>{const[e,t]=Oe.useState({role:"Doctor"});async function r(i){i.preventDefault(),console.log(e);try{Qi.fire({title:"",text:"Loading...",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,width:"300px",padding:"1em",willOpen:()=>{Qi.showLoading()},didClose:()=>{Qi.hideLoading()}});let y=await(await fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e})})).json();y.error?(console.log(y.reason),Qi.fire({text:y.reason,icon:"error",toast:!0,width:"300px",padding:"1em",position:"center"})):(Qi.fire({text:y.reason,icon:"success",toast:!0,width:"300px",padding:"1em",position:"center"}),setTimeout(()=>window.location.href="/",3e3)),console.log(y)}catch(a){console.error(a)}}function n(i){let a=i.target.name,y=i.target.value;t(()=>({...e,[a]:y}))}return le.jsxs("main",{className:"w-full flex",children:[le.jsxs("div",{className:"relative flex-1 hidden items-center justify-center h-screen bg-gray-900 lg:flex",children:[le.jsx("div",{className:"relative z-10 w-full max-w-md",children:le.jsxs("div",{className:" mt-16 space-y-3",children:[le.jsx("h3",{className:"text-white text-3xl font-bold",children:"Cloud Based Collaboration Platform for Health Care Providers"}),le.jsx("p",{className:"text-gray-300",children:"A project by Fullname Matric No:"}),le.jsxs("div",{className:"flex items-center -space-x-2 overflow-hidden",children:[le.jsx("img",{src:"https://randomuser.me/api/portraits/women/79.jpg",className:"w-10 h-10 rounded-full border-2 border-white"}),le.jsx("img",{src:"https://api.uifaces.co/our-content/donated/xZ4wg2Xj.jpg",className:"w-10 h-10 rounded-full border-2 border-white"}),le.jsx("img",{src:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-0.3.5&q=80&fm=jpg&crop=faces&fit=crop&h=200&w=200&s=a72ca28288878f8404a795f39642a46f",className:"w-10 h-10 rounded-full border-2 border-white"}),le.jsx("img",{src:"https://randomuser.me/api/portraits/men/86.jpg",className:"w-10 h-10 rounded-full border-2 border-white"}),le.jsx("img",{src:"https://images.unsplash.com/photo-1510227272981-87123e259b17?ixlib=rb-0.3.5&q=80&fm=jpg&crop=faces&fit=crop&h=200&w=200&s=3759e09a5b9fbe53088b23c615b6312e",className:"w-10 h-10 rounded-full border-2 border-white"}),le.jsx("p",{className:"text-sm text-gray-400 font-medium translate-x-5",children:"Join Now"})]})]})}),le.jsx("div",{className:"absolute inset-0 my-auto h-[500px]",style:{background:"linear-gradient(152.92deg, rgba(192, 132, 252, 0.2) 4.54%, rgba(232, 121, 249, 0.26) 34.2%, rgba(192, 132, 252, 0.1) 77.55%)",filter:"blur(118px)"}})]}),le.jsx("div",{className:"flex-1 flex items-center justify-center h-screen dark:bg-gray-900",children:le.jsxs("div",{className:"w-full max-w-md space-y-8 px-4 bg-white dark:bg-gray-900 dark:text-white text-gray-600 sm:px-0",children:[le.jsx("div",{className:"",children:le.jsxs("div",{className:"mt-5 space-y-2",children:[le.jsx("h3",{className:"dark:text-white text-gray-800 text-2xl font-bold sm:text-3xl",children:"Sign up"}),le.jsxs("p",{className:"",children:["Already have an account?"," ",le.jsx(Yg,{to:"/",href:"javascript:void(0)",className:"font-medium text-bg-blue-500 hover:text-indigo-500",children:"Log in"})]})]})}),le.jsxs("form",{onSubmit:r,className:"space-y-5",children:[le.jsxs("div",{children:[le.jsx("label",{className:"block mb-2 text-sm text-gray-600 dark:text-gray-200",children:"Fullname"}),le.jsx("input",{type:"text",name:"fullname",required:!0,className:"block w-full px-4 py-2 mt-2 text-gray-700 placeholder-gray-400 bg-white border border-gray-200 rounded-lg dark:placeholder-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:border-gray-700 focus:border-blue-400 dark:focus:border-blue-400 focus:ring-blue-400 focus:outline-none focus:ring focus:ring-opacity-40"})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block mb-2 text-sm text-gray-600 dark:text-gray-200",children:"Email"}),le.jsx("input",{type:"email",required:!0,name:"email",onChange:n,className:"block w-full px-4 py-2 mt-2 text-gray-700 placeholder-gray-400 bg-white border border-gray-200 rounded-lg dark:placeholder-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:border-gray-700 focus:border-blue-400 dark:focus:border-blue-400 focus:ring-blue-400 focus:outline-none focus:ring focus:ring-opacity-40"})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block mb-2 text-sm text-gray-600 dark:text-gray-200",children:" Role "}),le.jsxs("select",{name:"role",onChange:n,className:"block w-full px-4 py-2 mt-2 text-gray-700 placeholder-gray-400 bg-white border border-gray-200 rounded-lg dark:placeholder-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:border-gray-700 focus:border-blue-400 dark:focus:border-blue-400 focus:ring-blue-400 focus:outline-none focus:ring focus:ring-opacity-40",id:"role",children:[le.jsx("option",{className:"block mb-2 text-sm text-gray-600 dark:text-gray-200",value:"Doctor",selected:!0,children:" Doctor "}),le.jsx("option",{className:"block mb-2 text-sm text-gray-600 dark:text-gray-200",value:"Nurse",children:" Nurse "}),le.jsx("option",{className:"block mb-2 text-sm text-gray-600 dark:text-gray-200",value:"Patient",children:" Patient "})]})]}),le.jsxs("div",{children:[le.jsx("label",{className:"block mb-2 text-sm text-gray-600 dark:text-gray-200",children:"Password"}),le.jsx("input",{type:"password",required:!0,name:"password",onChange:n,className:"block w-full px-4 py-2 mt-2 text-gray-700 placeholder-gray-400 bg-white border border-gray-200 rounded-lg dark:placeholder-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:border-gray-700 focus:border-blue-400 dark:focus:border-blue-400 focus:ring-blue-400 focus:outline-none focus:ring focus:ring-opacity-40"})]}),le.jsx("button",{className:"w-full px-4 py-2 tracking-wide text-white transition-colors duration-300 transform bg-blue-500 rounded-lg hover:bg-blue-400 focus:outline-none focus:bg-blue-400 focus:ring focus:ring-blue-300 focus:ring-opacity-50",children:"Create account"})]})]})})]})},lx="/assets/image-49-G2uWm.jpg",ux=()=>{const[e,t]=Oe.useState({});async function r(i){i.preventDefault(),console.log(e);try{Qi.fire({title:"",text:"Authenticating...",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,width:"300px",padding:"1em",willOpen:()=>{Qi.showLoading()},didClose:()=>{Qi.hideLoading()}});let y=await(await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e})})).json();y.error?(console.log(y.reason),Qi.fire({text:y.reason,icon:"error",width:"300px",padding:"1em",toast:!0,position:"center"})):(localStorage.setItem("authToken",y.authToken),Qi.fire({text:`${y.reason}`,icon:"success",toast:!0,width:"300px",padding:"1em",position:"center"}),setTimeout(()=>window.location.href="/dashboard",3e3)),console.log(y)}catch(a){console.error(a)}}function n(i){let a=i.target.name,y=i.target.value;t(()=>({...e,[a]:y}))}return le.jsx(le.Fragment,{children:le.jsx("div",{className:"bg-white dark:bg-gray-900",children:le.jsxs("div",{className:"flex justify-center h-screen",children:[le.jsx("div",{className:"hidden bg-cover lg:block lg:w-2/3 z-20 bg-gray-800",style:{backgroundImage:`url(${lx})`},children:le.jsx("div",{className:"flex items-center h-full px-20 bg-gray-900 bg-opacity-40",children:le.jsxs("div",{children:[le.jsx("h2",{className:"text-2xl font-bold text-white sm:text-3xl",children:"Cloud Based Collaboration Platform for Health-care Professionals"}),le.jsx("p",{className:"max-w-xl mt-3 text-gray-300",children:"A project By Fullname Matric No"})]})})}),le.jsx("div",{className:"flex items-center w-full max-w-md px-6 mx-auto lg:w-2/6 z-10",children:le.jsxs("div",{className:"flex-1",children:[le.jsxs("div",{className:"text-center",children:[le.jsx("div",{className:"flex justify-center mx-auto"}),le.jsx("p",{className:"mt-3 text-gray-500 dark:text-gray-300",children:"Sign in to access your account"})]}),le.jsxs("div",{className:"mt-8",children:[le.jsxs("form",{onSubmit:r,children:[le.jsxs("div",{children:[le.jsx("label",{htmlFor:"email",className:"block mb-2 text-sm text-gray-600 dark:text-gray-200",children:"Email Address"}),le.jsx("input",{type:"email",name:"email",id:"email",required:!0,onChange:n,placeholder:"example@example.com",className:"block w-full px-4 py-2 mt-2 text-gray-700 placeholder-gray-400 bg-white border border-gray-200 rounded-lg dark:placeholder-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:border-gray-700 focus:border-blue-400 dark:focus:border-blue-400 focus:ring-blue-400 focus:outline-none focus:ring focus:ring-opacity-40"})]}),le.jsxs("div",{className:"mt-6",children:[le.jsxs("div",{className:"flex justify-between mb-2",children:[le.jsx("label",{htmlFor:"password",className:"text-sm text-gray-600 dark:text-gray-200",children:"Password"}),le.jsx("a",{href:"#",className:"text-sm text-gray-400 focus:text-blue-500 hover:text-blue-500 hover:underline",children:"Forgot password?"})]}),le.jsx("input",{type:"password",name:"password",id:"password",required:!0,onChange:n,placeholder:"Your Password",className:"block w-full px-4 py-2 mt-2 text-gray-700 placeholder-gray-400 bg-white border border-gray-200 rounded-lg dark:placeholder-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:border-gray-700 focus:border-blue-400 dark:focus:border-blue-400 focus:ring-blue-400 focus:outline-none focus:ring focus:ring-opacity-40"})]}),le.jsx("div",{className:"mt-6",children:le.jsx("button",{className:"w-full px-4 py-2 tracking-wide text-white transition-colors duration-300 transform bg-blue-500 rounded-lg hover:bg-blue-400 focus:outline-none focus:bg-blue-400 focus:ring focus:ring-blue-300 focus:ring-opacity-50",children:"Sign in"})})]}),le.jsxs("p",{className:"mt-6 text-sm text-center text-gray-400",children:["Don't have an account yet?"," ",le.jsx(Yg,{to:"/signup",href:"#",className:"text-blue-500 focus:outline-none focus:underline hover:underline",children:"Sign up"}),"."]})]})]})})]})})})};var pv={exports:{}},ol=typeof Reflect=="object"?Reflect:null,Cy=ol&&typeof ol.apply=="function"?ol.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},vp;ol&&typeof ol.ownKeys=="function"?vp=ol.ownKeys:Object.getOwnPropertySymbols?vp=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:vp=function(t){return Object.getOwnPropertyNames(t)};function dx(e){console&&console.warn&&console.warn(e)}var _b=Number.isNaN||function(t){return t!==t};function vn(){vn.init.call(this)}pv.exports=vn;pv.exports.once=mx;vn.EventEmitter=vn;vn.prototype._events=void 0;vn.prototype._eventsCount=0;vn.prototype._maxListeners=void 0;var Py=10;function Dh(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(vn,"defaultMaxListeners",{enumerable:!0,get:function(){return Py},set:function(e){if(typeof e!="number"||e<0||_b(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");Py=e}});vn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};vn.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||_b(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function wb(e){return e._maxListeners===void 0?vn.defaultMaxListeners:e._maxListeners}vn.prototype.getMaxListeners=function(){return wb(this)};vn.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=t==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var y;if(r.length>0&&(y=r[0]),y instanceof Error)throw y;var E=new Error("Unhandled error."+(y?" ("+y.message+")":""));throw E.context=y,E}var p=a[t];if(p===void 0)return!1;if(typeof p=="function")Cy(p,this,r);else for(var o=p.length,C=kb(p,o),n=0;n<o;++n)Cy(C[n],this,r);return!0};function bb(e,t,r,n){var i,a,y;if(Dh(r),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),y=a[t]),y===void 0)y=a[t]=r,++e._eventsCount;else if(typeof y=="function"?y=a[t]=n?[r,y]:[y,r]:n?y.unshift(r):y.push(r),i=wb(e),i>0&&y.length>i&&!y.warned){y.warned=!0;var E=new Error("Possible EventEmitter memory leak detected. "+y.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");E.name="MaxListenersExceededWarning",E.emitter=e,E.type=t,E.count=y.length,dx(E)}return e}vn.prototype.addListener=function(t,r){return bb(this,t,r,!1)};vn.prototype.on=vn.prototype.addListener;vn.prototype.prependListener=function(t,r){return bb(this,t,r,!0)};function px(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Sb(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=px.bind(n);return i.listener=r,n.wrapFn=i,i}vn.prototype.once=function(t,r){return Dh(r),this.on(t,Sb(this,t,r)),this};vn.prototype.prependOnceListener=function(t,r){return Dh(r),this.prependListener(t,Sb(this,t,r)),this};vn.prototype.removeListener=function(t,r){var n,i,a,y,E;if(Dh(r),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(a=-1,y=n.length-1;y>=0;y--)if(n[y]===r||n[y].listener===r){E=n[y].listener,a=y;break}if(a<0)return this;a===0?n.shift():hx(n,a),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,E||r)}return this};vn.prototype.off=vn.prototype.removeListener;vn.prototype.removeAllListeners=function(t){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var a=Object.keys(n),y;for(i=0;i<a.length;++i)y=a[i],y!=="removeListener"&&this.removeAllListeners(y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(t,r[i]);return this};function Rb(e,t,r){var n=e._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?fx(i):kb(i,i.length)}vn.prototype.listeners=function(t){return Rb(this,t,!0)};vn.prototype.rawListeners=function(t){return Rb(this,t,!1)};vn.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Eb.call(e,t)};vn.prototype.listenerCount=Eb;function Eb(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}vn.prototype.eventNames=function(){return this._eventsCount>0?vp(this._events):[]};function kb(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function hx(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function fx(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function mx(e,t){return new Promise(function(r,n){function i(y){e.removeListener(t,a),n(y)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",i),r([].slice.call(arguments))}Cb(e,t,a,{once:!0}),t!=="error"&&gx(e,i,{once:!0})})}function gx(e,t,r){typeof e.on=="function"&&Cb(e,"error",t,r)}function Cb(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(a){n.once&&e.removeEventListener(t,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var vx=pv.exports;const yx=ah(vx);var Pb={exports:{}};(function(e,t){var r={};/*! For license information please see videosdk.js.LICENSE.txt */(function(n,i){e.exports=i()})(self,()=>(()=>{var n={5414:E=>{E.exports=(()=>{var p={43:function(h,b,k){var f,g;(function(){f=function(){var s=function(){},w="undefined",S=typeof window!==w&&typeof window.navigator!==w&&/Trident\/|MSIE /.test(window.navigator.userAgent),T=["trace","debug","info","warn","error"];function x(l,m){var D=l[m];if(typeof D.bind=="function")return D.bind(l);try{return Function.prototype.bind.call(D,l)}catch{return function(){return Function.prototype.apply.apply(D,[l,arguments])}}}function O(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function P(l,m){for(var D=0;D<T.length;D++){var N=T[D];this[N]=D<l?s:this.methodFactory(N,l,m)}this.log=this.debug}function R(l,m,D){return function(){typeof console!==w&&(P.call(this,m,D),this[l].apply(this,arguments))}}function I(l,m,D){return function(N){return N==="debug"&&(N="log"),typeof console!==w&&(N==="trace"&&S?O:console[N]!==void 0?x(console,N):console.log!==void 0?x(console,"log"):s)}(l)||R.apply(this,arguments)}function d(l,m,D){var N,L=this,j="loglevel";function V(){var Z;if(typeof window!==w&&j){try{Z=window.localStorage[j]}catch{}if(typeof Z===w)try{var ne=window.document.cookie,pe=ne.indexOf(encodeURIComponent(j)+"=");pe!==-1&&(Z=/^([^;]+)/.exec(ne.slice(pe))[1])}catch{}return L.levels[Z]===void 0&&(Z=void 0),Z}}typeof l=="string"?j+=":"+l:typeof l=="symbol"&&(j=void 0),L.name=l,L.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},L.methodFactory=D||I,L.getLevel=function(){return N},L.setLevel=function(Z,ne){if(typeof Z=="string"&&L.levels[Z.toUpperCase()]!==void 0&&(Z=L.levels[Z.toUpperCase()]),!(typeof Z=="number"&&Z>=0&&Z<=L.levels.SILENT))throw"log.setLevel() called with invalid level: "+Z;if(N=Z,ne!==!1&&function(pe){var ge=(T[pe]||"silent").toUpperCase();if(typeof window!==w&&j){try{return void(window.localStorage[j]=ge)}catch{}try{window.document.cookie=encodeURIComponent(j)+"="+ge+";"}catch{}}}(Z),P.call(L,Z,l),typeof console===w&&Z<L.levels.SILENT)return"No console available for logging"},L.setDefaultLevel=function(Z){V()||L.setLevel(Z,!1)},L.enableAll=function(Z){L.setLevel(L.levels.TRACE,Z)},L.disableAll=function(Z){L.setLevel(L.levels.SILENT,Z)};var $=V();$==null&&($=m??"WARN"),L.setLevel($,!1)}var v=new d,c={};v.getLogger=function(l){if(typeof l!="symbol"&&typeof l!="string"||l==="")throw new TypeError("You must supply a name when creating a logger.");var m=c[l];return m||(m=c[l]=new d(l,v.getLevel(),v.methodFactory)),m};var u=typeof window!==w?window.log:void 0;return v.noConflict=function(){return typeof window!==w&&window.log===v&&(window.log=u),v},v.getLoggers=function(){return c},v.default=v,v},(g=f.call(b,k,b,h))===void 0||(h.exports=g)})()}},o={};function C(h){var b=o[h];if(b!==void 0)return b.exports;var k=o[h]={exports:{}};return p[h].call(k.exports,k,k.exports,C),k.exports}C.d=(h,b)=>{for(var k in b)C.o(b,k)&&!C.o(h,k)&&Object.defineProperty(h,k,{enumerable:!0,get:b[k]})},C.o=(h,b)=>Object.prototype.hasOwnProperty.call(h,b),C.r=h=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})};var _={};return(()=>{C.r(_),C.d(_,{VideoSDKMetrics:()=>Wn});const h="inbound",b="outbound",k={codec_id_in:"",codec_in:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_in:0,delta_rtt_ms_out:null,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,timestamp_in:null,ssrc:"",total_concealment_events:0,delta_concealment_events:0,total_inserted_samples_for_decelaration:0,delta_inserted_samples_for_decelaration:0,total_removed_samples_for_accelaration:0,delta_removed_samples_for_accelaration:0,direction:h},f={codec_id_out:"",codec_out:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,timestamp_out:null,ssrc:"",direction:b},g={codec_id_in:"",size_in:{width:null,height:null,framerate:null},codec_in:{mime_type:null,clock_rate:null},delta_jitter_ms_in:0,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,ssrc:"",direction:h},s={codec_id_out:"",size_out:{width:null,height:null,framerate:null},codec_out:{mime_type:null,clock_rate:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,limitation_out:{reason:null,durations:null,resolutionChanges:0},timestamp_out:null,ssrc:"",direction:b},w="inbound-rtp",S="bytesReceived",T="bytesSent",x="clockRate",O="codecId",P="currentRoundTripTime",R="roundTripTime",I="fractionLost",d="frameHeight",v="frameWidth",c="qualityLimitationReason",u="qualityLimitationDurations",l="qualityLimitationResolutionChanges",m="id",D="jitter",N="kind",L="mimeType",j="packetsLost",V="packetsReceived",$="packetsSent",Z="responsesReceived",ne="ssrc",pe="selected",ge="timestamp",_e="totalRoundTripTime",Me="roundTripTimeMeasurements",me="type",oe="framesDecoded",ve="framesEncoded",we="totalDecodeTime",be="totalEncodeTime",lt="pliCount",Ot="nackCount",Yt="trackId",vt="trackIdentifier",Mr="mediaSourceId",Kt="audio",At="video",Ar={0:"ETHERNET",2:"CELLULAR_5G",3:"WIFI",5:"CELLULAR_4G",10:"CELLULAR"},Dt="audio",Xt="video",hn="network",kr="data";var Lr=C(43);const Jr=()=>`${new Date().toISOString()} | metrics`,er=(Lt,Ne,yt)=>`${Lt} | ${Ne} | ${yt}`;Lr.setDefaultLevel(Lr.levels.TRACE);const Ze=(Lt,Ne,yt)=>{yt?Lr.debug(er(Jr(),Lt,Ne),yt):Lr.debug(er(Jr(),Lt,Ne))},Ut=(Lt,Ne)=>{Lr.warn(er(Jr(),Lt,Ne))},hr=(Lt,Ne)=>{Lr.error(er(Jr(),Lt,Ne))},Fe="extractor   ",st=(Lt,Ne,yt)=>{if(!Ne)return null;const ut={};let ze=Ne[Kt][Lt];ze||(ze=yt===h?{...k}:{...f}),ut[Kt]=ze;let Rr=Ne[At][Lt];return Rr||(Rr=yt===h?{...g}:{...s}),ut[At]=Rr,ut},tr=(Lt,Ne,yt,ut)=>{let ze=!1;const Rr=ut[Ne].total_rtt_ms_out,De=ut[Ne].total_rtt_measure_out,fr=yt?yt[Ne].total_rtt_ms_out:0,Pr=yt?yt[Ne].total_rtt_measure_out:0,wr={rtt:null,totalRTT:Rr,totalRTTMeasurements:De};if(Lt[ge]===ut[Ne].timestamp_out||!Object.prototype.hasOwnProperty.call(Lt,R)||Object.prototype.hasOwnProperty.call(Lt,Me)&&(ze=!0,Number(Lt[Me])===0||Number(Lt[Me])-Pr===De))return wr;const qr=1e3*Number(Lt[R]);let ie=Rr+qr,Q=De+1;return ze&&(ie=1e3*Number(Lt[_e])-fr,Q=Number(Lt[Me])-Pr),{rtt:qr,totalRTT:ie,totalRTTMeasurements:Q}},Tt=(Lt,Ne,yt)=>Lt[ge]===yt[Ne].timestamp_out?null:Object.prototype.hasOwnProperty.call(Lt,D)?1e3*(Number(Lt[D])||0):null,sr=(Lt,Ne,yt,ut)=>{if(!Object.prototype.hasOwnProperty.call(Lt,$)||!Object.prototype.hasOwnProperty.call(Lt,T))return{packetsSent:yt[Ne].total_packets_out,packetsLost:yt[Ne].total_packets_lost_out,bytesSent:yt[Ne].total_KBytes_out};const ze=Number(Lt[$])||0-(ut?ut[Ne].total_packets_out:0),Rr=ze-yt[Ne].total_packets_out,De=Number(Lt[T])/1024-(ut?ut[Ne].total_KBytes_out:0),fr=De-yt[Ne].total_KBytes_out,Pr=Lt[ge]||Date.now(),wr=ut?ut.timestamp:null;let qr=yt.timestamp;!qr&&wr&&(qr=wr);const ie=qr?Pr-qr:0;return{packetsSent:ze,deltaPacketsSent:Rr,KBytesSent:De,deltaKBytesSent:fr,kbsSent:ie>0?.008*fr*1024/ie*1e3:0}},Zr=(Lt,Ne,yt,ut)=>{let ze=yt[Ne].total_packets_lost_out,Rr=0,De=0;return Object.prototype.hasOwnProperty.call(Lt,j)&&(ze=Number(Lt[j])||0-(ut?ut[Ne].total_packets_lost_out:0),Rr=ze-yt[Ne].total_packets_lost_out),Object.prototype.hasOwnProperty.call(Lt,I)&&(De=Number(100*Lt[I])),{packetsLost:ze,deltaPacketsLost:Rr,fractionLost:De}},sn=(Lt,Ne,yt,ut)=>{if(!Object.prototype.hasOwnProperty.call(Lt,V)||!Object.prototype.hasOwnProperty.call(Lt,j)||!Object.prototype.hasOwnProperty.call(Lt,S))return{percent_packets_lost:yt[Ne].percent_packets_lost_in,packetsReceived:yt[Ne].total_packets_in,packetsLost:yt[Ne].total_packets_lost_in,bytesReceived:yt[Ne].total_KBytes_in};const ze=(Number(Lt[V])||0)-(ut?ut[Ne].total_packets_in:0),Rr=(Number(Lt[j])||0)-(ut?ut[Ne].total_packets_lost_in:0),De=Rr-yt[Ne].total_packets_lost_in,fr=ze-yt[Ne].total_packets_in,Pr=ze!==yt[Ne].total_packets_in?100*De/(De+fr):0,wr=Number(Lt[S])/1024-(ut?ut[Ne].total_KBytes_in:0),qr=wr-yt[Ne].total_KBytes_in,ie=Lt[ge]||Date.now(),Q=ut?ut.timestamp:null;let he=yt.timestamp;!he&&Q&&(he=Q);const Re=he?ie-he:0;return{percentPacketsLost:Pr,packetsReceived:ze,deltaPacketsReceived:fr,packetsLost:Rr,deltaPacketsLost:De,KBytesReceived:wr,deltaKBytesReceived:qr,kbsReceived:Re>0?.008*qr*1024/Re*1e3:0}},Mt=Lt=>Lt.candidateType!=="relay"?"":Lt.relayProtocol||"",di=Lt=>Object.prototype.hasOwnProperty.call(Lt,d)&&Object.prototype.hasOwnProperty.call(Lt,v)?{width:Lt[v]||null,height:Lt[d]||null,framerate:Lt.framesPerSecond}:{width:null,height:null,framerate:null};class Ti{constructor(Ne,yt){this._callbacks={onStatsCollected:null},this._id=`collector-${yt}`,this._moduleName=this._id,this._probeId=yt,this._config=Ne,this._state="idle",this._statsReports=[]}registerCallback(Ne,yt,ut){Ne in this._callbacks?(this._callbacks[Ne]={callback:yt,context:ut},Ze(this._moduleName,`registered callback '${Ne}'`)):hr(this._moduleName,`can't register callback for '${Ne}' - not found`)}unregisterCallback(Ne){Ne in this._callbacks?(this._callbacks[Ne]=null,delete this._callbacks[Ne],Ze(this._moduleName,`unregistered callback '${Ne}'`)):hr(this._moduleName,`can't unregister callback for '${Ne}' - not found`)}analyze(Ne,yt){const ut=(Rr=>{const De={name:"",meetingId:"",peerId:"",timestamp:null,count:0,audio:{},video:{},network:{infrastructure:3},data:{delta_kbs_bandwidth_in:0,delta_kbs_bandwidth_out:0,delta_rtt_connectivity_ms:null,total_rtt_connectivity_ms:0}};if(Rr){const fr={...Rr,audio:{},video:{},data:{...Rr.data},network:{...Rr.network}};return Object.keys(Rr.audio).forEach(Pr=>{fr.audio[Pr]={...Rr.audio[Pr]}}),Object.keys(Rr.video).forEach(Pr=>{fr.video[Pr]={...Rr.video[Pr]}}),fr}return{...De,audio:{},video:{},data:{...De.data},network:{...De.network}}})(yt);ut.name=this._config.name,ut.meetingId=this._config.meetingId,ut.peerId=this._config.peerId,ut.count=yt?yt.count+1:1;let ze=null;return Ne.forEach(Rr=>{!ze&&Rr.timestamp&&(ze=Rr.timestamp),((De,fr,Pr,wr)=>{if(!De)return[];switch(De[me]){case"candidate-pair":let qr=!1;if(De.nominated&&De.state==="succeeded"&&(qr=!0,Ze(Fe,`analyze() - got stats ${De[me]} for ${Pr}`,De),pe in De&&!De[pe]&&(qr=!1)),qr){De.localCandidateId,De.remoteCandidateId;const Q=((Re,Le,ht)=>{const xt=(Re[S]||0)/1024-0,Ke=(Re[T]||0)/1024-0,et=Re[ge]||Date.now(),$e=xt-Le.data.total_KBytes_in,St=Ke-Le.data.total_KBytes_out,Ft=null;let ke=Le.timestamp;!ke&&Ft&&(ke=Ft);const Tr=ke?et-ke:0;return{total_KBytes_received:xt,total_KBytes_sent:Ke,delta_KBytes_received:$e,delta_KBytes_sent:St,kbs_speed_received:Tr>0?.008*$e*1024/Tr*1e3:0,kbs_speed_sent:Tr>0?.008*St*1024/Tr*1e3:0}})(De,fr),he=((Re=>{Re.availableIncomingBitrate,Re.availableOutgoingBitrate})(De),((Re,Le,ht,xt)=>{if(!Object.prototype.hasOwnProperty.call(Re,P))return{rtt:null,totalRTT:xt[Le].total_rtt_connectivity_ms,totalRTTMeasurements:xt[Le].total_rtt_connectivity_measure};const Ke=1e3*Number(Re[P]);let et=xt[Le].total_rtt_connectivity_ms+Ke,$e=xt[Le].total_rtt_connectivity_measure+1;return Object.prototype.hasOwnProperty.call(Re,_e)&&(et=1e3*Number(Re[_e])-0),Object.prototype.hasOwnProperty.call(Re,Z)&&($e=Number(Re[Z])-0),{rtt:Ke,totalRTT:et,totalRTTMeasurements:$e}})(De,"data",wr,fr));return[{type:kr,value:{total_KBytes_in:Q.total_KBytes_received}},{type:kr,value:{total_KBytes_out:Q.total_KBytes_sent}},{type:kr,value:{delta_KBytes_in:Q.delta_KBytes_received}},{type:kr,value:{delta_KBytes_out:Q.delta_KBytes_sent}},{type:kr,value:{delta_kbs_in:Q.kbs_speed_received}},{type:kr,value:{delta_kbs_out:Q.kbs_speed_sent}},{type:kr,value:{delta_rtt_connectivity_ms:he.rtt}}]}break;case"local-candidate":if(De[m]===fr.network.local_candidate_id)return[{type:hn,value:{infrastructure:De.networkType}},{type:hn,value:{local_candidate_protocol:De.protocol||""}},{type:hn,value:{local_candidate_relay_protocol:Mt(De)}}];break;case w:{Ze(Fe,`analyze() - got stats ${De[me]} for ${Pr}`,De);const Q=De[ne],he=st(Q,fr,h);he&&(he.timestamp=fr.timestamp);const Re=st(Q,wr,h);if(Re&&(Re.timestamp=wr.timestamp),De[N]===Kt){const Le=sn(De,Kt,he,Re),ht=Tt(De,Kt,he),xt=De[O]||"",Ke=((et,$e,St)=>{const Ft=Number(et.concealmentEvents)||0,ke=Ft-(St[$e].total_concealment_events||0),Tr=Number(et.insertedSamplesForDeceleration)||0,Er=Tr-(St[$e].total_inserted_samples_for_decelaration||0),an=Number(et.removedSamplesForAcceleration)||0;return{totalConcealmentEvents:Ft,deltaConcealmentEvents:ke,totalInsertedSamplesForDecelaration:Tr,deltaInsertedSamplesForDecelaration:Er,totalRemovedSamplesForAccelaration:an,deltaRemovedSampleForAccelaration:an-(St[$e].total_removed_samples_for_accelaration||0)}})(De,Kt,he);return[{ssrc:Q,type:Dt,value:{codec_id_in:xt}},{ssrc:Q,type:Dt,value:{total_packets_in:Le.packetsReceived}},{ssrc:Q,type:Dt,value:{delta_packets_in:Le.deltaPacketsReceived}},{ssrc:Q,type:Dt,value:{total_packets_lost_in:Le.packetsLost}},{ssrc:Q,type:Dt,value:{delta_packets_lost_in:Le.deltaPacketsLost}},{ssrc:Q,type:Dt,value:{percent_packets_lost_in:Le.percentPacketsLost}},{ssrc:Q,type:Dt,value:{total_KBytes_in:Le.KBytesReceived}},{ssrc:Q,type:Dt,value:{delta_KBytes_in:Le.deltaKBytesReceived}},{ssrc:Q,type:Dt,value:{delta_kbs_in:Le.kbsReceived}},{ssrc:Q,type:Dt,value:{delta_jitter_ms_in:ht}},{ssrc:Q,type:Dt,value:{total_concealment_events:Ke.totalConcealmentEvents}},{ssrc:Q,type:Dt,value:{delta_concealment_events:Ke.deltaConcealmentEvents}},{ssrc:Q,type:Dt,value:{total_inserted_samples_for_decelaration:Ke.totalInsertedSamplesForDecelaration}},{ssrc:Q,type:Dt,value:{delta_inserted_samples_for_decelaration:Ke.deltaInsertedSamplesForDecelaration}},{ssrc:Q,type:Dt,value:{total_removed_samples_for_accelaration:Ke.totalRemovedSamplesForAccelaration}},{ssrc:Q,type:Dt,value:{delta_removed_samples_for_accelaration:Ke.deltaRemovedSampleForAccelaration}},{ssrc:Q,type:Dt,value:{track_in:De[Yt]}},{ssrc:Q,type:Dt,value:{track_id_in:De[vt]}},{ssrc:Q,type:Dt,value:{media_source_id:De[Mr]}}]}if(De[N]===At){((et,$e)=>{if(!Object.prototype.hasOwnProperty.call(et,oe)||!Object.prototype.hasOwnProperty.call(et,we))return{delta_ms_decode_frame:$e[At].delta_ms_decode_frame_in,frames_decoded:$e[At].total_frames_decoded_in,total_decode_time:$e[At].total_time_decoded_in};et[oe],et[we],$e[At].total_time_decoded_in,$e[At].total_frames_decoded_in})(De,he);const Le=sn(De,At,he,Re),ht=Tt(De,At,he),xt=(De.decoderImplementation,De[O]||null),Ke=di(De);return((et,$e,St)=>{if(!Object.prototype.hasOwnProperty.call(et,lt)||!Object.prototype.hasOwnProperty.call(et,Ot))return{pliCount:$e.total_pli_sent_in,nackCount:$e.total_nack_sent_in,deltaPliCount:0,deltaNackCount:0};et[lt],St&&St[At].total_pli_sent_in,et[Ot],St&&St[At].total_nack_sent_in,$e[At].total_pli_sent_in,$e[At].total_nack_sent_in})(De,he,Re),[{ssrc:Q,type:Xt,value:{codec_id_in:xt}},{ssrc:Q,type:Xt,value:{total_packets_in:Le.packetsReceived}},{ssrc:Q,type:Xt,value:{delta_packets_in:Le.deltaPacketsReceived}},{ssrc:Q,type:Xt,value:{total_packets_lost_in:Le.packetsLost}},{ssrc:Q,type:Xt,value:{delta_packets_lost_in:Le.deltaPacketsLost}},{ssrc:Q,type:Xt,value:{percent_packets_lost_in:Le.percentPacketsLost}},{ssrc:Q,type:Xt,value:{total_KBytes_in:Le.KBytesReceived}},{ssrc:Q,type:Xt,value:{delta_KBytes_in:Le.deltaKBytesReceived}},{ssrc:Q,type:Xt,value:{delta_kbs_in:Le.kbsReceived}},{ssrc:Q,type:Xt,value:{delta_jitter_ms_in:ht}},{ssrc:Q,type:Xt,value:{size_in:Ke}},{ssrc:Q,type:Xt,value:{track_in:De[Yt]}},{ssrc:Q,type:Xt,value:{track_id_in:De[vt]}},{ssrc:Q,type:Xt,value:{media_source_id:De[Mr]}}]}break}case"outbound-rtp":{Ze(Fe,`analyze() - got stats ${De[me]} for ${Pr}`,De);const Q=De[ne],he=st(Q,fr,b);he&&(he.timestamp=fr.timestamp);const Re=st(Q,wr,b);if(Re&&(Re.timestamp=wr.timestamp),De[N]===Kt){const Le=De[O]||null,ht=sr(De,Kt,he,Re);return[{ssrc:Q,type:Dt,value:{codec_id_out:Le}},{ssrc:Q,type:Dt,value:{total_packets_out:ht.packetsSent}},{ssrc:Q,type:Dt,value:{delta_packets_out:ht.deltaPacketsSent}},{ssrc:Q,type:Dt,value:{total_KBytes_out:ht.KBytesSent}},{type:Dt,value:{delta_KBytes_out:ht.deltaKBytesSent}},{ssrc:Q,type:Dt,value:{delta_kbs_out:ht.kbsSent}},{ssrc:Q,type:Dt,value:{track_out:De[Yt]}},{ssrc:Q,type:Dt,value:{track_id_out:De[vt]}},{ssrc:Q,type:Dt,value:{media_source_id:De[Mr]}}]}if(De[N]===At){De.encoderImplementation;const Le=De[O]||null,ht=(((et,$e)=>{if(!Object.prototype.hasOwnProperty.call(et,ve)||!Object.prototype.hasOwnProperty.call(et,be))return{delta_ms_encode_frame:$e[At].delta_ms_encode_frame_out,frames_encoded:$e[At].total_frames_encoded_out,total_encode_time:$e[At].total_time_encoded_out};et[ve],et[be],$e[At].total_time_encoded_out,$e[At].total_frames_encoded_out})(De,he),di(De)),xt=(et=>{const $e=Object.prototype.hasOwnProperty.call(et,c)?et[c]:null,St=Object.prototype.hasOwnProperty.call(et,l)?et[l]:null,Ft=Object.prototype.hasOwnProperty.call(et,u)?et[u]:null;return Ft&&Object.keys(Ft).forEach(ke=>{Ft[ke]>1e3&&(Ft[ke]=Number(Ft[ke]/1e3))}),{reason:$e,durations:Ft,resolutionChanges:St}})(De),Ke=(((et,$e,St)=>{if(!Object.prototype.hasOwnProperty.call(et,lt)||!Object.prototype.hasOwnProperty.call(et,Ot))return{pliCount:$e.total_pli_received_out,nackCount:$e.total_nack_received_out,deltaPliCount:0,deltaNackCount:0};et[lt],St&&St[At].total_pli_received_out,et[Ot],St&&St[At].total_nack_received_out,$e[At].total_pli_received_out,$e[At].total_nack_received_out})(De,he,Re),sr(De,At,he,Re));return[{ssrc:Q,type:Xt,value:{codec_id_out:Le}},{ssrc:Q,type:Xt,value:{total_packets_out:Ke.packetsSent}},{ssrc:Q,type:Xt,value:{delta_packets_out:Ke.deltaPacketsSent}},{ssrc:Q,type:Xt,value:{total_KBytes_out:Ke.KBytesSent}},{ssrc:Q,type:Xt,value:{delta_KBytes_out:Ke.deltaKBytesSent}},{ssrc:Q,type:Xt,value:{delta_kbs_out:Ke.kbsSent}},{ssrc:Q,type:Xt,value:{size_out:ht}},{ssrc:Q,type:Xt,value:{limitation_out:xt}},{ssrc:Q,type:Xt,value:{track_out:De[Yt]}},{ssrc:Q,type:Xt,value:{track_id_out:De[vt]}},{ssrc:Q,type:Xt,value:{media_source_id:De[Mr]}}]}break}case"media-source":{Ze(Fe,`analyze() - got stats ${De[me]} for ${Pr}`,De);const Q=[];return Object.keys(fr[Kt]).forEach(he=>{const Re=fr[Kt][he];if(Re.media_source_id===De[m]){var Le=De[vt];Q.push({ssrc:Re.ssrc,type:Dt,value:{track_id_out:Le}})}}),Object.keys(fr[At]).forEach(he=>{const Re=fr[At][he];if(Re.media_source_id===De[m]){var Le=De[vt];Q.push({ssrc:Re.ssrc,type:Xt,value:{track_id_out:Le}})}}),Q}case"track":{Ze(Fe,`analyze() - got stats ${De[me]} for ${Pr}`,De);const Q=[];return Object.keys(fr[Kt]).forEach(he=>{const Re=fr[Kt][he];if(Re.track_in===De[m]||Re.track_out===De[m]){Ze(Fe,`analyze() - got stats ${De[me]} for ${Pr}`,De);var Le=De[vt];De[m]===Re.track_in?Q.push({ssrc:Re.ssrc,type:Dt,value:{track_id_in:Le}}):Q.push({ssrc:Re.ssrc,type:Dt,value:{track_id_out:Le}})}}),Object.keys(fr[At]).forEach(he=>{const Re=fr[At][he];if(Re.track_in===De[m]||Re.track_out===De[m]){Ze(Fe,`analyze() - got stats ${De[me]} for ${Pr}`,De);var Le=De[vt];De[m]===Re.track_in?Q.push({ssrc:Re.ssrc,type:Xt,value:{track_id_in:Le}}):Q.push({ssrc:Re.ssrc,type:Xt,value:{track_id_out:Le}})}}),Q}case"codec":const ie=[];return Object.keys(fr[Kt]).forEach(Q=>{const he=fr[Kt][Q];if(he.codec_id_in===De[m]||he.codec_id_out===De[m]){Ze(Fe,`analyze() - got stats ${De[me]} for ${Pr}`,De);const Re=(Le=>({channels:Le.channels||null,clock_rate:Le[x]||null,mime_type:Le[L]||null,sdp_fmtp_line:Le.sdpFmtpLine||null}))(De);De[m]===he.codec_id_in?ie.push({ssrc:he.ssrc,type:Dt,value:{codec_in:Re}}):ie.push({ssrc:he.ssrc,type:Dt,value:{codec_out:Re}})}}),Object.keys(fr[At]).forEach(Q=>{const he=fr[At][Q];if(he.codec_id_in===De[m]||he.codec_id_out===De[m]){Ze(Fe,`analyze() - got stats ${De[me]} for ${Pr}`,De);const Re=(Le=>({clock_rate:Le[x]||null,mime_type:Le[L]||null}))(De);De[m]===he.codec_id_in?ie.push({ssrc:he.ssrc,type:Xt,value:{codec_in:Re}}):ie.push({ssrc:he.ssrc,type:Xt,value:{codec_out:Re}})}}),ie;case"remote-inbound-rtp":{Ze(Fe,`analyze() - got stats ${De[me]} for ${Pr}`,De);const Q=De[ne],he=st(Q,fr,b),Re=st(Q,wr,b);if(De[N]===Kt){const Le=tr(De,Kt,Re,he),ht=Tt(De,Kt,he),xt=Zr(De,Kt,he,Re);return[{ssrc:Q,type:Dt,value:{delta_rtt_ms_out:Le.rtt}},{ssrc:Q,type:Dt,value:{delta_jitter_ms_out:ht}},{ssrc:Q,type:Dt,value:{timestamp_out:De[ge]}},{ssrc:Q,type:Dt,value:{total_packets_lost_out:xt.packetsLost}},{ssrc:Q,type:Dt,value:{delta_packets_lost_out:xt.deltaPacketsLost}},{ssrc:Q,type:Dt,value:{percent_packets_lost_out:xt.fractionLost}}]}if(De[N]===At){const Le=tr(De,At,Re,he),ht=Tt(De,At,he),xt=Zr(De,At,he,Re);return[{ssrc:Q,type:Xt,value:{delta_rtt_ms_out:Le.rtt}},{ssrc:Q,type:Xt,value:{delta_jitter_ms_out:ht}},{ssrc:Q,type:Xt,value:{timestamp_out:De[ge]}},{ssrc:Q,type:Xt,value:{total_packets_lost_out:xt.packetsLost}},{ssrc:Q,type:Xt,value:{delta_packets_lost_out:xt.deltaPacketsLost}}]}break}case"remote-outbound-rtp":{Ze(Fe,`analyze() - got stats ${De[me]} for ${Pr}`,De);const Q=De[ne],he=st(Q,fr,b),Re=st(Q,wr,b);if(De[N]===Kt){const Le=tr(De,Kt,Re,he);return[{ssrc:Q,type:Dt,value:{delta_rtt_ms_in:Le.rtt}},{ssrc:Q,type:Dt,value:{timestamp_in:De[ge]}}]}break}}return[]})(Rr,ut,ut.name,null).forEach(De=>{if(De.value&&De.type)if(De.ssrc){let wr=ut[De.type][De.ssrc];wr||(fr=De.type,Pr=Rr.type,wr=fr===Kt?Pr===w?{...k}:{...f}:Pr===w?{...g}:{...s},wr.ssrc=De.ssrc,ut[De.type][De.ssrc]=wr),Object.keys(De.value).forEach(qr=>{De.value[qr]!==void 0&&(wr[qr]=De.value[qr])})}else Object.keys(De.value).forEach(wr=>{De.value[wr]!==void 0&&(ut[De.type][wr]=De.value[wr])});var fr,Pr})}),ut.timestamp=ze,ut}async collectStats(){try{const Ne=await this._config.monitoringObject.getStats(),yt=this.analyze(Ne,this._statsReports.slice().pop()||null);return this._statsReports.push(yt),this.fireOnStatsCollected(yt),Ne}catch(Ne){return hr(this._moduleName,`got error ${Ne}`),null}}fireOnStatsCollected(Ne){if(this._callbacks.onStatsCollected){const yt={};yt.meetingId=Ne.meetingId,yt.peerId=Ne.peerId,yt.name=Ne.name,yt.audio=[],yt.video=[],Object.values(Ne.audio).forEach(ut=>{const ze={};if(ze.network=Ar[Ne.network.infrastructure],ze.timestamp=Ne.timestamp,ut.direction==h){ze.codec=ut.codec_in.mime_type,ze.jitter=ut.delta_jitter_ms_in,ze.bitrate=ut.delta_kbs_in,ze.packetsLost=ut.delta_packets_lost_in,ze.rtt=Ne.data.delta_rtt_connectivity_ms||0,ze.totalPackets=ut.delta_packets_in,ze.concealmentEvents=ut.delta_concealment_events,ze.removedSampleForAccelaration=ut.delta_removed_samples_for_accelaration,ze.insertedSamplesForDecelaration=ut.delta_inserted_samples_for_decelaration;const Rr=JSON.stringify(ut.track_id_in).replace(/[{}"]/g,"");ze.trackId=Rr}else ut.direction==b&&(ze.codec=ut.codec_out.mime_type,ze.jitter=ut.delta_jitter_ms_out,ze.bitrate=ut.delta_kbs_out,ze.packetsLost=ut.delta_packets_lost_out,ze.rtt=Ne.data.delta_rtt_connectivity_ms||0,ze.totalPackets=ut.delta_packets_out,ze.trackId=ut.track_id_out);yt.audio.push(ze)}),Object.values(Ne.video).forEach(ut=>{const ze={};if(ze.network=Ar[Ne.network.infrastructure],ze.timestamp=Ne.timestamp,ut.direction==h){ze.codec=ut.codec_in.mime_type,ze.jitter=ut.delta_jitter_ms_in,ze.bitrate=ut.delta_kbs_in,ze.packetsLost=ut.delta_packets_lost_in,ze.rtt=Ne.data.delta_rtt_connectivity_ms||0,ze.totalPackets=ut.delta_packets_in,ze.size=ut.size_in;const Rr=JSON.stringify(ut.track_id_in).replace(/[{}"]/g,"");ze.trackId=Rr}else ut.direction==b&&(ze.codec=ut.codec_out.mime_type,ze.jitter=ut.delta_jitter_ms_out,ze.bitrate=ut.delta_kbs_out,ze.packetsLost=ut.delta_packets_lost_out,ze.rtt=Ne.data.delta_rtt_connectivity_ms||0,ze.totalPackets=ut.delta_packets_out,ze.limitation=ut.limitation_out,ze.size=ut.size_out,ze.trackId=ut.track_id_out);yt.video.push(ze)}),this._callbacks.onStatsCollected.callback(yt)}}}class pi{constructor(Ne){this._id=Ne.name&&Ne.name.substr(0,12).padEnd(12," "),this._moduleName=this._id,this._config=Ne,this._collector=new Ti(this._config,this._id)}get id(){return this._id}start(){this._collectorIntervalId?Ut("Probe already started."):(Ze(this._moduleName,"Probe Started"),this._collectorIntervalId=setInterval(()=>{Ze(this._moduleName,"Collector collecting stats"),this._collector.collectStats()},this._config.refreshEvery))}stop(){this._collectorIntervalId?(clearInterval(this._collectorIntervalId),Ze(this._moduleName,"Probe Stopped")):Ut("Probe not running, Please start first.")}set onStatsCollected(Ne){Ne?this._collector.registerCallback("onStatsCollected",Ne):this._collector.unregisterCallback("onStatsCollected")}}const Zi={refreshEvery:2e3,startAfter:0,stopAfter:-1,verbose:!1,peerId:"peerId",meetingId:"meetingId",name:"name"};class Wn{constructor(Ne){var yt;this._config={defaultConfig:Zi,...Ne},this._probes=[],yt=this._config.verbose||!1,Lr.setLevel(yt?Lr.levels.TRACE:Lr.levels.INFO),Ze("VideoSDKMetrics","VideoSDKMetrics initialized")}get probes(){return this._probes}addNewProbe(Ne,yt){if(!Ne)throw new Error("undefined monitoring object");const ut={monitoringObject:Ne,...yt,...this._config},ze=new pi(ut);return this._probes.push(ze),ze}removeExistingProbe(Ne){if(!Ne)throw new Error("undefined probe");Ne.stop(),this._probes=this._probes.filter(yt=>Ne.id!==yt.id)}getProbe(Ne){for(let yt of this.probes)if(yt.id==Ne)return yt}startAllProbes(){this._probes.forEach((Ne,yt)=>{Ne.start()})}stopAllProbes(){this._probes.forEach(Ne=>Ne.stop())}}})(),_})()},8274:(E,p,o)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Logger=void 0;const C=o(7833),_="awaitqueue";p.Logger=class{constructor(h){h?(this._debug=(0,C.default)(`${_}:${h}`),this._warn=(0,C.default)(`${_}:WARN:${h}`),this._error=(0,C.default)(`${_}:ERROR:${h}`)):(this._debug=(0,C.default)(_),this._warn=(0,C.default)(`${_}:WARN`),this._error=(0,C.default)(`${_}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},8876:(E,p,o)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.AwaitQueue=p.AwaitQueueRemovedTaskError=p.AwaitQueueStoppedError=void 0;const C=new(o(8274)).Logger;class _ extends Error{constructor(k){super(k??"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,_)}}p.AwaitQueueStoppedError=_;class h extends Error{constructor(k){super(k??"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,h)}}p.AwaitQueueRemovedTaskError=h,p.AwaitQueue=class{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(b,k){if(k=k??b.name,C.debug(`push() [name:${k}]`),typeof b!="function")throw new TypeError("given task is not a function");if(k)try{Object.defineProperty(b,"name",{value:k})}catch{}return new Promise((f,g)=>{const s={id:this.nextTaskId++,task:b,name:k,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:w=>{if(s.completed)return;s.completed=!0,this.pendingTasks.delete(s.id),C.debug(`resolving task [name:${s.name}]`),f(w);const[S]=this.pendingTasks.values();S&&!S.executedAt&&this.execute(S)},reject:w=>{if(!s.completed&&(s.completed=!0,this.pendingTasks.delete(s.id),C.debug(`rejecting task [name:${s.name}]: %s`,String(w)),g(w),!this.stopping)){const[S]=this.pendingTasks.values();S&&!S.executedAt&&this.execute(S)}}};this.pendingTasks.set(s.id,s),this.pendingTasks.size===1&&this.execute(s)})}stop(){C.debug("stop()"),this.stopping=!0;for(const b of this.pendingTasks.values())C.debug(`stop() | stopping task [name:${b.name}]`),b.reject(new _);this.stopping=!1}remove(b){C.debug(`remove() [taskIdx:${b}]`);const k=Array.from(this.pendingTasks.values())[b];k?k.reject(new h):C.debug(`stop() | no task with given idx [taskIdx:${b}]`)}dump(){const b=Date.now();let k=0;return Array.from(this.pendingTasks.values()).map(f=>({idx:k++,task:f.task,name:f.name,enqueuedTime:f.executedAt?f.executedAt-f.enqueuedAt:b-f.enqueuedAt,executionTime:f.executedAt?b-f.executedAt:0}))}async execute(b){if(C.debug(`execute() [name:${b.name}]`),b.executedAt)throw new Error("task already being executed");b.executedAt=Date.now();try{const k=await b.task();b.resolve(k)}catch(k){b.reject(k)}}}},9027:(E,p,o)=>{o.d(p,{$:()=>C});var C={networkPriorities:{audio:"high",dominatingVideo:"high",otherVideos:"medium",screenShare:"medium"},aspectRatios:{fourThree:{label:"fourThree",value:1.333},oneSixNine:{label:"oneSixNine",value:1.777}},audioProfiles:{speech_low_quality:{sampleRate:16e3,bitRate:24,sampleSize:16,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:16e3,packetTime:20,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},speech_standard:{sampleRate:32e3,bitRate:24,sampleSize:24,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:32e3,packetTime:30,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},music_standard:{sampleRate:48e3,bitRate:40,sampleSize:32,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},standard_stereo:{sampleRate:48e3,sampleSize:32,bitRate:64,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2},high_quality:{sampleRate:48e3,sampleSize:32,bitRate:128,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},high_quality_stereo:{sampleRate:48e3,sampleSize:32,bitRate:192,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2}},videoProfiles:{h90p_w160p:{width:160,height:90,bitRate:6e4,frameRate:15,aspectRatio:"oneSixNine"},h180p_w320p:{width:320,height:180,bitRate:12e4,frameRate:15,aspectRatio:"oneSixNine"},h216p_w384p:{width:384,height:216,bitRate:18e4,frameRate:15,aspectRatio:"oneSixNine"},h360p_w640p:{width:640,height:360,bitRate:3e5,frameRate:20,aspectRatio:"oneSixNine"},h540p_w960p:{width:960,height:540,bitRate:6e5,frameRate:25,aspectRatio:"oneSixNine"},h720p_w1280p:{width:1280,height:720,bitRate:2e6,frameRate:30,aspectRatio:"oneSixNine"},h1080p_w1920p:{width:1920,height:1080,bitRate:3e6,frameRate:30,aspectRatio:"oneSixNine"},h1440p_w2560p:{width:2560,height:1440,bitRate:5e6,frameRate:30,aspectRatio:"oneSixNine"},h2160p_w3840p:{width:3840,height:2160,bitRate:8e6,frameRate:30,aspectRatio:"oneSixNine"},h120p_w160p:{width:160,height:120,bitRate:8e4,frameRate:15,aspectRatio:"fourThree"},h180p_w240p:{width:240,height:180,bitRate:1e5,frameRate:15,aspectRatio:"fourThree"},h240p_w320p:{width:320,height:240,bitRate:15e4,frameRate:15,aspectRatio:"fourThree"},h360p_w480p:{width:480,height:360,bitRate:225e3,frameRate:20,aspectRatio:"fourThree"},h480p_w640p:{width:640,height:480,bitRate:3e5,frameRate:25,aspectRatio:"fourThree"},h540p_w720p:{width:720,height:540,bitRate:45e4,frameRate:30,aspectRatio:"fourThree"},h720p_w960p:{width:960,height:720,bitRate:15e5,frameRate:30,aspectRatio:"fourThree"},h1080p_w1440p:{width:1440,height:1080,bitRate:25e5,frameRate:30,aspectRatio:"fourThree"},h1440p_w1920p:{width:1920,height:1440,bitRate:35e5,frameRate:30,aspectRatio:"fourThree"}},screenShareProfiles:{h360p_30fps:{width:640,height:360,bitRate:2e5,frameRate:30},h720p_5fps:{width:1280,height:720,bitRate:4e5,frameRate:5},h720p_15fps:{width:1280,height:720,bitRate:1e6,frameRate:15},h1080p_15fps:{width:1920,height:1080,bitRate:15e5,frameRate:15},h1080p_30fps:{width:1920,height:1080,bitRate:1e6,frameRate:30}},simulcastProfiles:{3840:[{scaleResolutionDownBy:12,maxBitRate:15e4},{scaleResolutionDownBy:6,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:1e7}],1920:[{scaleResolutionDownBy:6,maxBitRate:15e4},{scaleResolutionDownBy:3,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:35e5}],1280:[{scaleResolutionDownBy:4,maxBitRate:15e4},{scaleResolutionDownBy:2,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:12e5}],640:[{scaleResolutionDownBy:2,maxBitRate:15e4},{scaleResolutionDownBy:1,maxBitRate:5e5}],320:[{scaleResolutionDownBy:1,maxBitRate:15e4}]},requestTimeout:2e4,requestRetries:3,transportOptions:{tcp:!0},videoKSVCEncodings:[{scalabilityMode:"S3T3_KEY"}],videoSVCEncodings:[{scalabilityMode:"S3T3",dtx:!0}]}},7080:(E,p,o)=>{o.d(p,{q:()=>_,s:()=>C});var C={INVALID_API_KEY:4001,INVALID_TOKEN:4002,INVALID_MEETING_ID:4003,INVALID_PARTICIPANT_ID:4004,DUPLICATE_PARTICIPANT:4005,ACCOUNT_DEACTIVATED:4006,ACCOUNT_DISCONTINUED:4007,INVALID_PERMISSIONS:4008,MAX_PARTCIPANT_REACHED:4009,MAX_SPEAKER_REACHED:4010,START_RECORDING_FAILED:4011,STOP_RECORDING_FAILED:4012,START_LIVESTREAM_FAILED:4013,STOP_LIVESTREAM_FAILED:4014,INVALID_LIVESTREAM_CONFIG:4015,START_HLS_FAILED:4016,STOP_HLS_FAILED:4017,START_TRANSCRIPTION_FAILED:4031,STOP_TRANSCRIPTION_FAILED:4032,RECORDING_FAILED:5001,LIVESTREAM_FAILED:5002,HLS_FAILED:5003,TRANSCRIPTION_FAILED:5007,ERROR_GET_VIDEO_MEDIA:3011,ERROR_GET_AUDIO_MEDIA:3012,ERROR_GET_DISPLAY_MEDIA:3013,ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:3014,ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:3015,ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:3016,ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:3017,ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:3018,ERROR_CAMERA_PERMISSION_DENIED_BY_OS:3019,ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:3020,ERROR_CAMERA_NOT_FOUND:3021,ERROR_MICROPHONE_NOT_FOUND:3022,ERROR_CAMERA_IN_USE:3023,ERROR_MICROPHONE_IN_USE:3024,ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:3025,ERROR_VIDEO_SOURCE_INITIATION_FAILED:3026,ERROR_WEBCAM_TRACK_ENDED:3027,ERROR_MICROPHONE_TRACK_ENDED:3028,ERROR_INVALID_CUSTOM_VIDEO_TRACK:3029,ERROR_INVALID_CUSTOM_AUDIO_TRACK:3030,ERROR_CUSTOM_VIDEO_TRACK_ENDED:3031,ERROR_CUSTOM_AUDIO_TRACK_ENDED:3032,ERROR_CAMERA_ACCESS_UNAVAILABLE:3033,ERROR_MICROPHONE_ACCESS_UNAVAILABLE:3034,ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:3035,ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:3036,ERROR_RN_CAMERA_NOT_FOUND:3037,ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:3038,ERROR_RN_MIC_NOT_FOUND:3039,ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:3040,ERROR_RN_MIC_ACCESS_UNAVAILABLE:3041,ERROR_RN_CAMERA_TRACK_ENDED:3042,ERROR_RN_MIC_TRACK_ENDED:3043},_={ERROR_GET_VIDEO_MEDIA:{code:3011,message:"Your browser/Device does not support Video."},ERROR_GET_AUDIO_MEDIA:{code:3012,message:"Your browser/Device does not support Audio."},ERROR_GET_DISPLAY_MEDIA:{code:3013,message:"Your browser/Device does not support Screen Sharing."},ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:{code:3014,message:"Video capture permission denied."},ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:{code:3015,message:"Audio capture permission denied."},ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:{code:3016,message:"Screen sharing permission denied."},ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3017,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:{code:3018,message:"Oops! It seems like microphone access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_CAMERA_PERMISSION_DENIED_BY_OS:{code:3019,message:"Camera permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:{code:3020,message:"Microphone permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_CAMERA_NOT_FOUND:{code:3021,message:"Please ensure your camera is connected and turned on, and that the camera driver is installed and up-to-date."},ERROR_MICROPHONE_NOT_FOUND:{code:3022,message:"Please ensure your microphone is connected and turned on."},ERROR_CAMERA_IN_USE:{code:3023,message:"The camera is being used by another application. Please close any programs utilizing the camera, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_MICROPHONE_IN_USE:{code:3024,message:"The microphone is being used by another application. Please close any programs utilizing the microphone, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:{code:3025,message:"It seems like there's an issue with camera permission or video autoplay, you can check out this link for details: http://tinyurl.com/autoplay-issue"},ERROR_VIDEO_SOURCE_INITIATION_FAILED:{code:3026,message:"Unable to initiate video source. Please verify browser settings for video permissions."},ERROR_WEBCAM_TRACK_ENDED:{code:3027,message:"Webcam track has ended or the webcam is disconnected. Please ensure your webcam is properly connected and try restarting it."},ERROR_MICROPHONE_TRACK_ENDED:{code:3028,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."},ERROR_INVALID_CUSTOM_VIDEO_TRACK:{code:3029,message:"The provided custom video track is invalid; reverting to the default video track. Please ensure that the video track meets the required specifications."},ERROR_INVALID_CUSTOM_AUDIO_TRACK:{code:3030,message:"The provided custom audio track is invalid; reverting to the default audio track. Please ensure that the audio track meets the required specifications."},ERROR_CUSTOM_VIDEO_TRACK_ENDED:{code:3031,message:"The provided custom video track is in an ended state. Please verify the video track's status, and try again."},ERROR_CUSTOM_AUDIO_TRACK_ENDED:{code:3032,message:"The provided custom audio track is in an ended state. Please verify the audio track's status, and try again."},ERROR_CAMERA_ACCESS_UNAVAILABLE:{code:3033,message:"Camera access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_MICROPHONE_ACCESS_UNAVAILABLE:{code:3034,message:"Microphone access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:{code:3035,message:"Oops! Something went wrong. The room was in a connecting state, and during that time, an action encountered an issue. Please try again after joining a meeting."},ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3036,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_CAMERA_NOT_FOUND:{code:3037,message:"Please ensure your camera is connected and turned on"},ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:{code:3038,message:"Oops! It seems like mic access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_MIC_NOT_FOUND:{code:3039,message:"Please ensure your mic is connected and turned on"},ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:{code:3040,message:"Camera access unavailable: Please ensure your device is compatible."},ERROR_RN_MIC_ACCESS_UNAVAILABLE:{code:3041,message:"Microphone access unavailable: Please ensure your device is compatible."},ERROR_RN_CAMERA_TRACK_ENDED:{code:3042,message:"Camera track has ended. Please make sure your camera is turned on or try restarting it."},ERROR_RN_MIC_TRACK_ENDED:{code:3043,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."}}},5071:(E,p,o)=>{o.d(p,{V:()=>C});var C={HLS_STARTING:"HLS_STARTING",HLS_STARTED:"HLS_STARTED",HLS_PLAYABLE:"HLS_PLAYABLE",HLS_STOPPING:"HLS_STOPPING",HLS_STOPPED:"HLS_STOPPED"}},2107:(E,p,o)=>{o.d(p,{n:()=>C});var C={CONFERENCE:"CONFERENCE",VIEWER:"VIEWER"}},2487:(E,p,o)=>{o.r(p),o.d(p,{default:()=>es});var C=o(296),_=o(2284),h=o(467),b=o(3029),k=o(2901),f=o(4467),g=o(4756),s=o.n(g),w=o(9566),S=o(76),T=o(7833),x=o.n(T),O="mediasoup-demo",P=function(){return(0,k.A)(function Se(Ue){(0,b.A)(this,Se),Ue?(this._debug=x()("".concat(O,":").concat(Ue)),this._warn=x()("".concat(O,":WARN:").concat(Ue)),this._error=x()("".concat(O,":ERROR:").concat(Ue))):(this._debug=x()(O),this._warn=x()("".concat(O,":WARN")),this._error=x()("".concat(O,":ERROR"))),x().disable(),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)},[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}])}(),R=o(1396),I=R.enc.Latin1.parse("6gf9Oz5Y(6fOWPP@3XPv0Mwp51yfJ0HiZW^0*!9NdUuZ*VdKmRC@f))&^!Iriw)q"),d=R.enc.Latin1.parse("BHrabik^$W^y*HL@A*$4YKj(");function v(Se){return c.apply(this,arguments)}function c(){return(c=(0,h.A)(s().mark(function Se(Ue){var We,ft,$t,at,zt,Gt,Rt,_r,Jt,br,Vr,Kr,Sn;return s().wrap(function(Cn){for(;;)switch(Cn.prev=Cn.next){case 0:return We=Ue.roomId,ft=Ue.secret,$t=Ue.signalingBaseUrl,at="call-api.videosdk.live",zt=[],Gt=null,Rt={},_r={},Jt={},br=null,Cn.next=10,fetch("https://".concat($t,"/infra/v1/meetings/init-config"),{method:"POST",headers:{Authorization:ft,"Content-Type":"application/json"},body:JSON.stringify({roomId:We})}).then(function(fi){return fi.json()}).catch(function(fi){return{}});case 10:return Vr=Cn.sent,(Kr=Vr.data)&&(at=Kr.baseUrl,Sn=Kr.observability,zt=u(Kr.iceServers),Gt=Sn.jwt,Rt=Sn.traces,_r=Sn.logs,Jt=Sn.metaData,br=Kr.signalingUrl),Cn.abrupt("return",{baseUrl:at,iceServers:zt,observabilityJwt:Gt,traces:Rt,logs:_r,metaData:Jt,signalingUrl:br});case 14:case"end":return Cn.stop()}},Se)}))).apply(this,arguments)}function u(Se){try{var Ue=R.AES.decrypt(Se,I,{iv:d,mode:R.mode.CBC,padding:R.pad.ZeroPadding}).toString(R.enc.Utf8);return JSON.parse(Ue)}catch{return[]}}var l=o(2215),m=o.n(l),D="mediasoup-demo.user",N="mediasoup-demo.devices";function L(Se){var Ue=Se.displayName;m().set(D,{displayName:Ue})}function j(){return m().getJSON(N)}var V=o(2211),$=o.n(V),Z=function(Se){return{type:"SET_ROOM_STATE",payload:{state:Se}}},ne=function(Se){return{type:"SET_ROOM_ACTIVE_SPEAKER",payload:{peerId:Se}}},pe=function(Se){return{type:"SET_ROOM_STATS_PEER_ID",payload:{peerId:Se}}},ge=function(Se){return{type:"SET_MEDIA_CAPABILITIES",payload:{canSendMic:Se.canSendMic,canSendWebcam:Se.canSendWebcam}}},_e=function(Se){return{type:"SET_DISPLAY_NAME",payload:{displayName:Se}}},Me=function(Se){return{type:"SET_AUDIO_ONLY_STATE",payload:{enabled:Se}}},me=function(Se){return{type:"SET_AUDIO_ONLY_IN_PROGRESS",payload:{flag:Se}}},oe=function(Se){return{type:"SET_AUDIO_MUTED_STATE",payload:{enabled:Se}}},ve=function(Se){return{type:"SET_RESTART_ICE_IN_PROGRESS",payload:{flag:Se}}},we=function(Se){return{type:"ADD_PRODUCER",payload:{producer:Se}}},be=function(Se){return{type:"REMOVE_PRODUCER",payload:{producerId:Se}}},lt=function(Se,Ue){return{type:"SET_PRODUCER_TRACK",payload:{producerId:Se,track:Ue}}},Ot=function(Se,Ue){return{type:"SET_PRODUCER_SCORE",payload:{producerId:Se,score:Ue}}},Yt=function(Se){return{type:"ADD_DATA_PRODUCER",payload:{dataProducer:Se}}},vt=function(Se){return{type:"SET_WEBCAM_IN_PROGRESS",payload:{flag:Se}}},Mr=function(Se){return{type:"SET_SHARE_IN_PROGRESS",payload:{flag:Se}}},Kt=function(Se){return{type:"ADD_PEER",payload:{peer:Se}}},At=function(Se){return{type:"REMOVE_PEER",payload:{peerId:Se}}},Ar=function(Se,Ue){return{type:"SET_PEER_DISPLAY_NAME",payload:{displayName:Se,peerId:Ue}}},Dt=function(Se,Ue){return{type:"ADD_CONSUMER",payload:{consumer:Se,peerId:Ue}}},Xt=function(Se,Ue){return{type:"REMOVE_CONSUMER",payload:{consumerId:Se,peerId:Ue}}},hn=function(Se,Ue){return{type:"SET_CONSUMER_PAUSED",payload:{consumerId:Se,originator:Ue}}},kr=function(Se,Ue){return{type:"SET_CONSUMER_RESUMED",payload:{consumerId:Se,originator:Ue}}},Lr=function(Se,Ue,We){return{type:"SET_CONSUMER_CURRENT_LAYERS",payload:{consumerId:Se,spatialLayer:Ue,temporalLayer:We}}},Jr=function(Se,Ue,We){return{type:"SET_CONSUMER_PREFERRED_LAYERS",payload:{consumerId:Se,spatialLayer:Ue,temporalLayer:We}}},er=function(Se,Ue){return{type:"SET_CONSUMER_PRIORITY",payload:{consumerId:Se,priority:Ue}}},Ze=function(Se,Ue){return{type:"SET_CONSUMER_SCORE",payload:{consumerId:Se,score:Ue}}},Ut=function(Se,Ue){return{type:"ADD_DATA_CONSUMER",payload:{dataConsumer:Se,peerId:Ue}}},hr=function(Se,Ue){return{type:"REMOVE_DATA_CONSUMER",payload:{dataConsumerId:Se,peerId:Ue}}},Fe=function(Se){var Ue=Se.type,We=Ue===void 0?"info":Ue,ft=Se.text,$t=Se.title,at=Se.timeout;if(!at)switch(We){case"info":at=3e3;break;case"error":at=5e3}var zt={id:$()({length:6}).toLowerCase(),type:We,title:$t,text:ft,timeout:at};return function(Gt){Gt(function(Rt){return{type:"ADD_NOTIFICATION",payload:{notification:Rt}}}(zt)),setTimeout(function(){Gt({type:"REMOVE_NOTIFICATION",payload:{notificationId:zt.id}})},at)}},st=o(7007),tr=o(9027);function Tt(Se,Ue){var We=Object.keys(Se);if(Object.getOwnPropertySymbols){var ft=Object.getOwnPropertySymbols(Se);Ue&&(ft=ft.filter(function($t){return Object.getOwnPropertyDescriptor(Se,$t).enumerable})),We.push.apply(We,ft)}return We}var sr={},Zr={},sn={};for(var Mt in tr.$.videoProfiles)tr.$.videoProfiles[Mt].aspectRatio=="oneSixNine"&&(sr[Mt]=tr.$.videoProfiles[Mt],sr[Mt].encoding={maxBitrate:sr[Mt].bitRate,maxFramerate:sr[Mt].frameRate}),tr.$.videoProfiles[Mt].aspectRatio=="fourThree"&&(Zr[Mt]=tr.$.videoProfiles[Mt],Zr[Mt].encoding={maxBitrate:Zr[Mt].bitRate,maxFramerate:Zr[Mt].frameRate});for(var Mt in tr.$.screenShareProfiles)sn[Mt]=tr.$.screenShareProfiles[Mt],sn[Mt].encoding={maxBitrate:sn[Mt].bitRate,maxFramerate:sn[Mt].frameRate};var di=Object.values(sr),Ti=Object.values(Zr),pi=[sr.h180p_w320p,sr.h360p_w640p],Zi=[Zr.h180p_w240p,Zr.h360p_w480p],Wn=["q","h","f"];function Lt(Se,Ue,We,ft,$t){var at=ft&&ft.videoEncoding,zt=ft==null?void 0:ft.simulcast;if(at||(at=function(Kr,Sn,Cn){for(var fi=function(Es,Hi,ks){var Qs=Hi>ks?Hi/ks:ks/Hi;return Math.abs(Qs-1.7777777777777777)<Math.abs(Qs-1.3333333333333333)?di:Ti}(Kr,Sn,Cn),ti=fi[0].encoding,xi=Math.max(Sn,Cn),Oi=0;Oi<fi.length;Oi+=1){var ts=fi[Oi];if(ti=ts.encoding,ts.width>=xi)break}return ti}(Se,Ue,We)),!zt)return[at];var Gt,Rt={width:Ue,height:We,encoding:{maxBitrate:at.maxBitrate,maxFramerate:at.maxFramerate}},_r=[],Jt=(_r=Ne(Se,Rt))[0];if(_r.length>1){var br=_r;Gt=(0,C.A)(br,2)[1]}var Vr=Math.max(Ue,We);return yt(Ue,We,Vr>=960&&Gt?[Jt,Gt,Rt]:Vr>=480?[Jt,Rt]:[Rt],$t)}function Ne(Se,Ue){var We=Ue.width,ft=Ue.height,$t=We>ft?We/ft:ft/We;return Math.abs($t-1.7777777777777777)<Math.abs($t-1.3333333333333333)?pi:Zi}function yt(Se,Ue,We,ft){var $t=[];return We.forEach(function(at,zt){if(!(zt>=Wn.length)){var Gt=ft?null:{maxFramerate:at.encoding.maxFramerate},Rt=Math.min(Se,Ue),_r=function(Jt){for(var br=1;br<arguments.length;br++){var Vr=arguments[br]!=null?arguments[br]:{};br%2?Tt(Object(Vr),!0).forEach(function(Kr){(0,f.A)(Jt,Kr,Vr[Kr])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Jt,Object.getOwnPropertyDescriptors(Vr)):Tt(Object(Vr)).forEach(function(Kr){Object.defineProperty(Jt,Kr,Object.getOwnPropertyDescriptor(Vr,Kr))})}return Jt}({rid:Wn[zt],scaleResolutionDownBy:Rt/Math.min(at.width,at.height),maxBitrate:at.encoding.maxBitrate},Gt);$t.push(_r)}}),$t}function ut(Se,Ue,We){if(!Se)return{};var ft=Se.id,$t=(Se.preferredSpatialLayer,Se.preferredTemporalLayer,Se.appData),at=$t.width,zt=$t.height,Gt=$t.encodings;try{var Rt=function(ti){var xi=[];if(ti&&ti.length!=0){if(ti.length===1){for(var Oi=0;Oi<3;Oi++)xi.push(Math.pow(2,3-Oi-1));return xi}var ts=!1;return ti.forEach(function(Es){Es.scaleResolutionDownBy!==void 0?(ts=!0,xi.push(Math.max(1,Es.scaleResolutionDownBy))):xi.push(1)}),ts||ti.forEach(function(Es,Hi){xi[Hi]=Math.pow(2,ti.length-Hi-1)}),xi}}(Gt);if(!Rt)return{};for(var _r=Math.min(Math.max(tr.$.adaptiveScalingFactor||.75,.5),1),Jt=0,br=0;br<Rt.length;br++){var Vr=_r*at/Rt[br],Kr=_r*zt/Rt[br];if(!(Ue>=Vr&&We>=Kr))break;Jt=br}var Sn=(Se.temporalLayers?Se.temporalLayers:3)-1;if(Jt===0&&Sn>0){var Cn=at/Rt[0],fi=zt/Rt[0];Ue<.5*Cn&&We<.5*fi&&(Sn-=1),Sn>0&&Ue<.25*Cn&&We<.25*fi&&(Sn-=1)}return{consumerId:ft,newPreferredSpatialLayer:Jt,newPreferredTemporalLayer:Sn}}catch{return{}}}var ze=o(7080),Rr=o(5414),De=o(2107),fr=o(5071),Pr=o(5458),wr=Array(32);function qr(){for(var Se=0;Se<16;Se++)wr[Se]=Math.floor(16*Math.random())+48,wr[Se]>=58&&(wr[Se]+=39);return String.fromCharCode.apply(null,wr.slice(0,16))}function ie(){var Se=(1e6*new Date().getTime()).toString().padEnd(19,"0");return Number(Se)}function Q(Se,Ue){var We=Object.keys(Se);if(Object.getOwnPropertySymbols){var ft=Object.getOwnPropertySymbols(Se);Ue&&(ft=ft.filter(function($t){return Object.getOwnPropertyDescriptor(Se,$t).enumerable})),We.push.apply(We,ft)}return We}function he(Se){for(var Ue=1;Ue<arguments.length;Ue++){var We=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?Q(Object(We),!0).forEach(function(ft){(0,f.A)(Se,ft,We[ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Se,Object.getOwnPropertyDescriptors(We)):Q(Object(We)).forEach(function(ft){Object.defineProperty(Se,ft,Object.getOwnPropertyDescriptor(We,ft))})}return Se}var Re=function(){return(0,k.A)(function Se(Ue){var We=this,ft=Ue.roomId,$t=Ue.peerId,at=Ue.sdkName,zt=Ue.observabilityJwt,Gt=Ue.metaData,Rt=Ue.traces;(0,b.A)(this,Se),this._traceId=function(){for(var Jt=0;Jt<32;Jt++)wr[Jt]=Math.floor(16*Math.random())+48,wr[Jt]>=58&&(wr[Jt]+=39);return String.fromCharCode.apply(null,wr.slice(0,32))}(),this._rootSpanId=qr(),this._observabilityJwt=zt,this._tracesEnabled=Rt.enabled,this._tracesEndpoint=Rt.endPoint;var _r=function(Jt){for(var br="0123456789abcdefghijklmnopqrstuvwxyz",Vr="",Kr=Jt;Kr>0;Kr--)Vr+=br[Math.floor(36*Math.random())];return Vr}(8);this._spans=[],this._traceJSON={resourceSpans:[{resource:{attributes:[{key:"service.name",value:{stringValue:"videosdk-otel"}},{key:"telemetry.sdk.language",value:{stringValue:"webjs"}},{key:"telemetry.sdk.name",value:{stringValue:"opentelemetry"}},{key:"telemetry.sdk.version",value:{stringValue:"1.14.0"}},{key:"sdk-version",value:{stringValue:"0.0.1"}}],droppedAttributesCount:0},scopeSpans:[{scope:{name:_r},spans:[]}]}]},this._tracesEnabled&&(this.addRootSpan(ft,$t,at,Gt),setInterval(function(){We.processQueue()},4e3))},[{key:"addRootSpan",value:function(Se,Ue,We,ft){var $t={traceId:this._traceId,spanId:this._rootSpanId,name:"room_".concat(Se,"_peer_").concat(Ue,"_sdk_").concat(We),kind:1,startTimeUnixNano:ie(),endTimeUnixNano:ie(),attributes:[{key:"roomId",value:{stringValue:Se}},{key:"peerId",value:{stringValue:Ue}},{key:"sdkName",value:{stringValue:We}},{key:"userId",value:{stringValue:ft.userId}},{key:"email",value:{stringValue:ft.email}}],droppedAttributesCount:0,events:[],droppedEventsCount:0,status:{code:0},links:[],droppedLinksCount:0};this._spans.push($t)}},{key:"addSpanToTrace",value:function(Se){this._spans.push(Se)}},{key:"trace",value:function(Se){var Ue=Se.spanName,We=Se.attributes,ft=We===void 0?{}:We,$t=Se.span,at=$t===void 0?void 0:$t;if(this._tracesEnabled){var zt=qr(),Gt=ie(),Rt={traceId:this._traceId,spanId:zt,parentSpanId:at||this._rootSpanId,name:Ue,kind:1,startTimeUnixNano:Gt,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0};return Object.keys(ft).length>0&&(Rt.attributes=Object.entries(ft).map(function(_r){var Jt=(0,C.A)(_r,2);return{key:Jt[0],value:{stringValue:Jt[1]}}})),this.addSpanToTrace(Rt),zt}}},{key:"traceAutoComplete",value:function(Se){var Ue=Se.spanName,We=Se.attributes,ft=We===void 0?{}:We,$t=Se.status,at=$t===void 0?1:$t,zt=Se.span,Gt=zt===void 0?void 0:zt,Rt=Se.message,_r=Rt===void 0?"SUCCESS":Rt;if(this._tracesEnabled){var Jt=qr(),br=ie(),Vr=ie(),Kr={traceId:this._traceId,spanId:Jt,parentSpanId:Gt||this._rootSpanId,name:Ue,kind:1,startTimeUnixNano:br,endTimeUnixNano:Vr,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0,status:{code:at,message:_r}};Object.keys(ft).length>0&&(Kr.attributes=Object.entries(ft).map(function(Sn){var Cn=(0,C.A)(Sn,2);return{key:Cn[0],value:{stringValue:Cn[1]}}})),this.addSpanToTrace(Kr)}}},{key:"completeSpan",value:function(Se){var Ue=Se.span,We=Se.status,ft=Se.message,$t=Se.attributes,at=$t===void 0?{}:$t;if(this._tracesEnabled){var zt=ie();this._spans=this._spans.map(function(Gt){if(Gt.spanId!==Ue)return Gt;var Rt=Object.entries(at).map(function(_r){var Jt=(0,C.A)(_r,2);return{key:Jt[0],value:{stringValue:Jt[1]}}});return Gt.attributes=Gt.attributes?[].concat((0,Pr.A)(Gt.attributes),(0,Pr.A)(Rt)):Rt,he(he({},Gt),{},{status:{code:We,message:ft},endTimeUnixNano:zt})})}}},{key:"processQueue",value:function(){var Se=this;if(this._spans.length>0){this._traceJSON.resourceSpans[0].scopeSpans[0].spans=this._spans,this._spans=[];var Ue={method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify(this._traceJSON)};fetch(this._tracesEndpoint,Ue).then(function(){var We=(0,h.A)(s().mark(function ft($t){return s().wrap(function(at){for(;;)switch(at.prev=at.next){case 0:return Se._traceJSON.resourceSpans[0].scopeSpans[0].spans=[],at.next=3,$t.text();case 3:return at.abrupt("return",at.sent);case 4:case"end":return at.stop()}},ft)}));return function(ft){return We.apply(this,arguments)}}()).then(function(We){}).catch(function(We){Se._spans=Se._traceJSON.resourceSpans[0].scopeSpans[0].spans,console.error("There was a problem with the POST request:",We)})}}}])}();function Le(Se,Ue){var We=Object.keys(Se);if(Object.getOwnPropertySymbols){var ft=Object.getOwnPropertySymbols(Se);Ue&&(ft=ft.filter(function($t){return Object.getOwnPropertyDescriptor(Se,$t).enumerable})),We.push.apply(We,ft)}return We}function ht(Se){for(var Ue=1;Ue<arguments.length;Ue++){var We=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?Le(Object(We),!0).forEach(function(ft){(0,f.A)(Se,ft,We[ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Se,Object.getOwnPropertyDescriptors(We)):Le(Object(We)).forEach(function(ft){Object.defineProperty(Se,ft,Object.getOwnPropertyDescriptor(We,ft))})}return Se}var xt=function(){return(0,k.A)(function Ue(We){var ft=We.roomId,$t=We.peerId,at=We.logs,zt=We.observabilityJwt,Gt=We.deviceInfo,Rt=We.sessionId,_r=We.debugMode;(0,b.A)(this,Ue);var Jt=Gt.browserUserAgent,br=Gt.deviceUserAgent,Vr=Gt.platform;this._peerId=$t,this._roomId=ft,this._logs=at,this._observabilityJwt=zt,this._deviceInfo=Gt,this._sessionId=Rt,this._debugMode=_r,this.browserOrDeviceInfo=Jt?{browserName:Jt.browser.name,browserVersion:Jt.browser.version,osName:Jt.os.name,osVersion:Jt.os.version,platform:Vr}:br?ht({platform:Vr},br):null},[{key:"pushLogs",value:(Se=(0,h.A)(s().mark(function Ue(We){var ft,$t,at,zt,Gt,Rt,_r,Jt;return s().wrap(function(br){for(;;)switch(br.prev=br.next){case 0:if(ft=We.logType,$t=We.logText,at=We.attributes,zt=We.dashboardLog,Gt=zt!==void 0&&zt,Rt=this._logs,_r=Rt.enabled,Jt=Rt.endPoint,!_r){br.next=8;break}return br.next=5,fetch(Jt,{method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify({logType:ft,logText:$t,attributes:ht(ht({},at),{},{roomId:this._roomId,peerId:this._peerId,SDK:"".concat(this._deviceInfo.sdkType,"-sdk"),SDK_VERSION:this._deviceInfo.sdkVersion,sessionId:this._sessionId},this.browserOrDeviceInfo),debugMode:this._debugMode,dashboardLog:Gt})}).then(function(Vr){return Vr.json()}).catch(function(Vr){return console.log("error",Vr),{}});case 5:return br.abrupt("return",br.sent);case 8:return br.abrupt("return",null);case 9:case"end":return br.stop()}},Ue,this)})),function(Ue){return Se.apply(this,arguments)})}]);var Se}(),Ke=o(4973);function et(Se,Ue){var We=typeof Symbol<"u"&&Se[Symbol.iterator]||Se["@@iterator"];if(!We){if(Array.isArray(Se)||(We=function(Rt,_r){if(Rt){if(typeof Rt=="string")return $e(Rt,_r);var Jt={}.toString.call(Rt).slice(8,-1);return Jt==="Object"&&Rt.constructor&&(Jt=Rt.constructor.name),Jt==="Map"||Jt==="Set"?Array.from(Rt):Jt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Jt)?$e(Rt,_r):void 0}}(Se))||Ue){We&&(Se=We);var ft=0,$t=function(){};return{s:$t,n:function(){return ft>=Se.length?{done:!0}:{done:!1,value:Se[ft++]}},e:function(Rt){throw Rt},f:$t}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var at,zt=!0,Gt=!1;return{s:function(){We=We.call(Se)},n:function(){var Rt=We.next();return zt=Rt.done,Rt},e:function(Rt){Gt=!0,at=Rt},f:function(){try{zt||We.return==null||We.return()}finally{if(Gt)throw at}}}}function $e(Se,Ue){(Ue==null||Ue>Se.length)&&(Ue=Se.length);for(var We=0,ft=Array(Ue);We<Ue;We++)ft[We]=Se[We];return ft}function St(Se,Ue){var We=Object.keys(Se);if(Object.getOwnPropertySymbols){var ft=Object.getOwnPropertySymbols(Se);Ue&&(ft=ft.filter(function($t){return Object.getOwnPropertyDescriptor(Se,$t).enumerable})),We.push.apply(We,ft)}return We}function Ft(Se){for(var Ue=1;Ue<arguments.length;Ue++){var We=arguments[Ue]!=null?arguments[Ue]:{};Ue%2?St(Object(We),!0).forEach(function(ft){(0,f.A)(Se,ft,We[ft])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Se,Object.getOwnPropertyDescriptors(We)):St(Object(We)).forEach(function(ft){Object.defineProperty(Se,ft,Object.getOwnPropertyDescriptor(We,ft))})}return Se}var ke,Tr={sd:{low:{s:0,t:2},med:{s:0,t:2},high:{s:1,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}},hd:{low:{s:0,t:2},med:{s:1,t:2},high:{s:2,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}}},Er={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},sd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}},hd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}}},an={sd:[{scaleResolutionDownBy:6},{scaleResolutionDownBy:4},{scaleResolutionDownBy:2}],hd:[{scaleResolutionDownBy:4},{scaleResolutionDownBy:2},{scaleResolutionDownBy:1}]},cn=[{scalabilityMode:"S3T3_KEY"}],us=[{dtx:!0,maxFramerate:30}],hi=[{scalabilityMode:"S3T3",dtx:!0}],Pe=new P("RoomClient"),es=function(){return(0,k.A)(function X(F){var U,z,H=F.roomId,re=F.peerId,se=F.secret,Ie=F.displayName,Ee=F.device,wt=F.handlerName,Ge=F.useSimulcast,gt=F.useSharingSimulcast,ae=F.forceTcp,ot=F.mode,Xe=F.forceH264,ct=F.forceVP9,ye=F.svc,Je=F.datachannel,qt=F.externalVideo,rr=F.micEnabled,cr=F.webcamEnabled,nr=F.maxResolution,ir=F.useSpartialLayerAnalytics,mr=F._deviceInfo,Qt=F.customCameraVideoTrack,Ht=F.customMicrophoneAudioTrack,xr=F.autoConsume,Zt=F.preferredProtocol,dr=F.signalingBaseUrl,jr=F.metaData,ln=F.defaultCameraIndex,mn=F.debugMode;(0,b.A)(this,X),(0,f.A)(this,"delay",function(lr){return new Promise(function(un){return setTimeout(un,lr)})}),Pe.debug('constructor() [roomId:"%s", peerId:"%s", displayName:"%s", device:%s]',H,re,Ie,Ee.flag),this.useSpartialLayerAnalytics=ir||!1,this._deviceInfo=mr,this._eventEmitter=new st.EventEmitter,this._closed=!1,this._displayName=Ie,this._device=Ee,this._forceTcp=ae,this._preferredProtocol=Zt,ot==De.n.CONFERENCE?(U=!0,z=!0):(U=!1,z=!1),this._mode=ot,this._produce=U,this._consume=z,this._useDataChannel=Je,this._forceH264=!!Xe,this._forceVP9=!!ct,this._micEnabled=!!rr,this._webcamEnabled=!!cr,this._externalVideo=null,this._externalVideoStream=null,this._nextDataChannelTestNumber=0,qt&&(this._externalVideo=document.createElement("video"),this._externalVideo.controls=!0,this._externalVideo.loop=!0,this._externalVideo.setAttribute("playsinline",""),this._externalVideo.src=qt,this._externalVideo.play().catch(function(lr){return Pe.warn("externalVideo.play() failed:%o",lr)})),this._handlerName=wt,this._useSimulcast=Ge,this._useSharingSimulcast=gt,this._protooUrl="",this._secret=se,this._peerId=re,this._roomId=H,this._baseUrl="",this._protoo=null,this._mediasoupDevice=null,this._sendTransport=null,this._recvTransport=null,this._micProducer=null,this._webcamProducer=null,this._shareProducer=null,this._shareAudioProducer=null,this._chatDataProducer=null,this._botDataProducer=null,this._consumers=new Map,this._dataConsumers=new Map,this._mics=new Map,this._mic={device:null},this._webcams=new Map,this._webcam={device:null,resolution:nr||"hd"},this._pinnedParticipants=new Map,ye&&(cn[0].scalabilityMode="".concat(ye,"_KEY"),hi[0].scalabilityMode=ye),this.customCameraVideoTrack=Qt,this.customMicrophoneAudioTrack=Ht,this._autoConsume=xr,this._iceServers=[],this._metrics=new Rr.VideoSDKMetrics({refreshEvery:1e3,startAfter:1e3,verbose:!1}),this._stats={},this._latestStats={},this._isWebsocketAlive=!1,this._pingWebsocketInterval=null,this._pingInternetInterval=null,this._pingWebsocketFailedCounter=0,this._pongInternetCounter=0,this._transportState="",this._openTelemetry=null,this._videosdkLogs=null,this._signalingBaseUrl=dr||"api.videosdk.live",this._metaData=jr,this._defaultCameraIndex=ln,this._debugMode=!!mn},[{key:"on",value:function(X,F){this._eventEmitter.on(X,F)}},{key:"close",value:function(X){var F,U,z,H,re,se=X.sendLeft,Ie=se===void 0||se;if(Ie&&(this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CLOSING"}),(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Meeting is in CLOSING State",status:1})),!this._closed){this._closed=!0,this._pingWebsocketInterval&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=null,this._pingInternetInterval&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=null,this._protoo.close(),this._metrics.running&&this._metrics.stopAllProbes(),Pe.debug("close()");var Ee=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"Closing Trasnport"});this._sendTransport&&this._sendTransport.close(),this._recvTransport&&this._recvTransport.close(),(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:Ee,status:1,message:"Closed Trasnport"}),ke.dispatch(Z("closed")),Ie&&this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CLOSED"}),(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Meeting is in CLOSED State",status:1}),Ie&&this._eventEmitter.emit("MEETING_LEFT"),(H=this._openTelemetry)===null||H===void 0||H.traceAutoComplete({spanName:"Emitted MEETING_LEFT Event",status:1})}}},{key:"join",value:(Pd=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Ee,wt,Ge,gt,ae=this;return s().wrap(function(ot){for(;;)switch(ot.prev=ot.next){case 0:return ot.next=2,v({roomId:this._roomId,secret:this._secret,signalingBaseUrl:this._signalingBaseUrl});case 2:z=ot.sent,H=z.baseUrl,re=z.iceServers,se=z.logs,Ie=z.observabilityJwt,Ee=z.traces,wt=z.metaData,Ge=z.signalingUrl,this._baseUrl=H,this._protooUrl="".concat(Ge||"wss://".concat(this._baseUrl),"/?roomId=").concat(this._roomId,"&peerId=").concat(this._peerId,"&secret=").concat(this._secret,"&mode=").concat(this._mode),this._iceServers=re,this._tracesEnabled=Ee.enabled,this._openTelemetry=new Re((0,f.A)({roomId:this._roomId,peerId:this._peerId,sdkName:"".concat(this._deviceInfo.sdkType,"-sdk"),traces:Ee,logs:se,observabilityJwt:Ie,metaData:wt},"traces",Ee)),this._joinSpan=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"Join() Calling",attributes:{DeviceInfo:JSON.stringify(this._deviceInfo),mode:this._mode,displayName:this._displayName,multiStream:this._useSimulcast,micEnabled:this._micEnabled,webcamEnabled:this._webcamEnabled,CustomVideoTrack:!!this.customCameraVideoTrack,CustomMicTrack:!!this.customMicrophoneAudioTrack,signalingUrl:Ge||"signalingUrl not specify"}}),gt=new w.TJ(this._protooUrl),this._protoo=new w.xM(gt),this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CONNECTING"}),ke.dispatch(Z("connecting")),(U=this._openTelemetry)===null||U===void 0||U.traceAutoComplete({spanName:"Meeting is in CONNECTING State",span:this._joinSpan,status:1}),this._protoo.on("open",function(){var Xe;ae._isWebsocketAlive=!0,ae._closed=!1,ae.startPingPong(),ae._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CONNECTED"}),(Xe=ae._openTelemetry)===null||Xe===void 0||Xe.traceAutoComplete({spanName:"Meeting is in CONNECTED State",span:ae._joinSpan,status:1}),ae.requestEntry()}),this._protoo.on("failed",function(){var Xe;ae._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"FAILED"}),(Xe=ae._openTelemetry)===null||Xe===void 0||Xe.traceAutoComplete({spanName:"Meeting is in FAILED State",span:ae._joinSpan,status:2}),ke.dispatch(Fe({type:"error",text:"WebSocket connection failed"}))}),this._protoo.on("disconnected",function(){var Xe;ae._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"DISCONNECTED"}),(Xe=ae._openTelemetry)===null||Xe===void 0||Xe.traceAutoComplete({spanName:"Meeting is in DISCONNECTED State",span:ae._joinSpan,status:1}),ke.dispatch(Fe({type:"error",text:"WebSocket disconnected"})),ae._sendTransport&&(ae._sendTransport.close(),ae._sendTransport=null),ae._recvTransport&&(ae._recvTransport.close(),ae._recvTransport=null),ke.dispatch(Z("closed"))}),this._protoo.on("close",function(){ae._closed||ae.close({sendLeft:!0})}),this._protoo.on("request",function(){var Xe=(0,h.A)(s().mark(function ct(ye,Je,qt){var rr,cr,nr,ir,mr,Qt,Ht,xr,Zt,dr,jr,ln,mn,lr,un,Pn,Dn,Br,Or,In,Wt,Mn,It,yr,Wr,en,on,tn,_i,rs,wi,zn,ii,Wi,bi,rn,Ai,Vn,$n,qn,Si,Kn,Vi,Li,Gn,Tn,yn,xn,Rn,Ri,Fr,si,Nr,Sr,dt,Qe,Cr,Qr,Yr,Ni,ha,ea;return s().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:Pe.debug('proto "request" event [method:%s, data:%o]',ye.method,ye.data),kt.t0=ye.method,kt.next=kt.t0==="close"?4:kt.t0==="newConsumer"?7:kt.t0==="newDataConsumer"?45:kt.t0==="enableMic"?72:kt.t0==="disableMic"?74:kt.t0==="enableWebcam"?88:kt.t0==="disableWebcam"?90:kt.t0==="pinStateChanged"?104:kt.t0==="switchRoom"?124:kt.t0==="statsData"?127:130;break;case 4:return Je(),ae.close({sendLeft:!0}),kt.abrupt("break",130);case 7:if(nr=(rr=ae._openTelemetry)===null||rr===void 0?void 0:rr.trace({spanName:"Protoo REQ: newConsumer",attributes:{request:JSON.stringify(ye)}}),ae._consume){kt.next=12;break}return qt(403,"I do not want to consume"),(ir=ae._openTelemetry)===null||ir===void 0||ir.completeSpan({span:nr,status:2,message:"I do not want to consume"}),kt.abrupt("break",130);case 12:return mr=ye.data,Qt=mr.peerId,Ht=mr.producerId,xr=mr.id,Zt=mr.kind,dr=mr.rtpParameters,jr=mr.type,ln=mr.appData,mn=mr.producerPaused,lr=(cr=ae._openTelemetry)===null||cr===void 0?void 0:cr.trace({spanName:"Creating Consumer",span:nr}),kt.prev=14,kt.next=17,ae._recvTransport.consume({id:xr,producerId:Ht,kind:Zt,rtpParameters:dr,appData:Ft(Ft({},ln),{},{peerId:Qt})});case 17:Or=kt.sent,In=S.parseScalabilityMode(Or.rtpParameters.encodings[0].scalabilityMode),Wt=In.spatialLayers,Mn=In.temporalLayers,Or.spatialLayers=Wt,Or.temporalLayers=Mn,Or.currentSpatialLayers=Wt-1,Or.currentTemporalLayers=Mn-1,ae._consumers.set(Or.id,Or),Or.on("transportclose",function(){ae._consumers.delete(Or.id);var Gr=Xt(Or.id,Qt);ke.dispatch(Gr),ae._eventEmitter.emit(Gr.type,Gr.payload)}),(un=ae._openTelemetry)===null||un===void 0||un.completeSpan({span:lr,status:1,message:"Consumer Created"}),lr=(Pn=ae._openTelemetry)===null||Pn===void 0?void 0:Pn.trace({spanName:"Sending Stream Enabled Event",span:nr}),It=Dt({id:Or.id,type:jr,locallyPaused:!1,remotelyPaused:mn,rtpParameters:Or.rtpParameters,spatialLayers:Wt,temporalLayers:Mn,currentSpatialLayer:Wt-1,currentTemporalLayer:Mn-1,preferredSpatialLayer:Wt-1,preferredTemporalLayer:Mn-1,priority:1,codec:Or.rtpParameters.codecs[0].mimeType.split("/")[1],track:Or.track,appData:ln,instance:Or},Qt),ke.dispatch(It),ae._eventEmitter.emit(It.type,It.payload),Je(),Or.kind==="video"&&ke.getState().me.audioOnly&&ae._pauseConsumer(Or),(Dn=ae._openTelemetry)===null||Dn===void 0||Dn.completeSpan({span:lr,status:1,message:"Event Send Successfully"}),(Br=ae._openTelemetry)===null||Br===void 0||Br.completeSpan({span:nr,status:1,message:"New Consumer Created Successfully",attributes:{"consumer.consumerId":Or.id}}),Or.kind=="video"&&Or.appData.share&&((yr=ae._openTelemetry)===null||yr===void 0||yr.traceAutoComplete({spanName:"Presenter Changed",span:nr,attributes:{"peer.id":Qt}})),kt.next=44;break;case 37:throw kt.prev=37,kt.t1=kt.catch(14),(Wr=ae._openTelemetry)===null||Wr===void 0||Wr.completeSpan({span:lr,status:2,message:"Error creating a Consumer: ".concat(kt.t1)}),(en=ae._openTelemetry)===null||en===void 0||en.completeSpan({span:nr,status:2,message:"Error creating a Consumer: ".concat(kt.t1)}),ke.dispatch(Fe({type:"error",text:"Error creating a Consumer: ".concat(kt.t1)})),(on=ae._videosdkLogs)===null||on===void 0||on.pushLogs({logText:"Error creating a Consumer",logType:"ERROR",attributes:{error:kt.t1.message}}),kt.t1;case 44:return kt.abrupt("break",130);case 45:if(ae._consume){kt.next=48;break}return qt(403,"I do not want to data consume"),kt.abrupt("break",130);case 48:if(ae._useDataChannel){kt.next=51;break}return qt(403,"I do not want DataChannels"),kt.abrupt("break",130);case 51:return tn=ye.data,_i=tn.peerId,rs=tn.dataProducerId,wi=tn.id,zn=tn.sctpStreamParameters,ii=tn.label,Wi=tn.protocol,bi=tn.appData,kt.prev=52,kt.next=55,ae._recvTransport.consumeData({id:wi,dataProducerId:rs,sctpStreamParameters:zn,label:ii,protocol:Wi,appData:Ft(Ft({},bi),{},{peerId:_i})});case 55:rn=kt.sent,ae._dataConsumers.set(rn.id,rn),rn.on("transportclose",function(){ae._dataConsumers.delete(rn.id)}),rn.on("open",function(){Pe.debug('DataConsumer "open" event')}),rn.on("close",function(){Pe.warn('DataConsumer "close" event'),ae._dataConsumers.delete(rn.id),ke.dispatch(Fe({type:"error",text:"DataConsumer closed"}))}),rn.on("error",function(Gr){Pe.error('DataConsumer "error" event:%o',Gr),ke.dispatch(Fe({type:"error",text:"DataConsumer error: ".concat(Gr)}))}),rn.on("message",function(Gr){if(Pe.debug('DataConsumer "message" event [streamId:%d]',rn.sctpStreamParameters.streamId),window.DC_MESSAGE=Gr,Gr instanceof ArrayBuffer){var Cs=new DataView(Gr).getUint32();return Cs==Math.pow(2,32)-1?(Pe.warn("dataChannelTest finished!"),void(ae._nextDataChannelTestNumber=0)):(Cs>ae._nextDataChannelTestNumber&&Pe.warn("dataChannelTest: %s packets missing",Cs-ae._nextDataChannelTestNumber),void(ae._nextDataChannelTestNumber=Cs+1))}if(typeof Gr=="string")switch(rn.label){case"chat":var so=ke.getState().peers,ao=Object.keys(so).map(function(fa){return so[fa]}).find(function(fa){return fa.dataConsumers.includes(rn.id)});if(!ao){Pe.warn('DataConsumer "message" from unknown peer');break}ke.dispatch(Fe({title:"".concat(ao.displayName," says:"),text:Gr,timeout:5e3})),ae._eventEmitter.emit("CHAT_MESSAGE",{text:Gr,senderId:ao.id,timestamp:new Date().getTime()});break;case"bot":ke.dispatch(Fe({title:"Message from Bot:",text:Gr,timeout:5e3}))}else Pe.warn('ignoring DataConsumer "message" (not a string)')}),window.DC=rn,ke.dispatch(Ut({id:rn.id,sctpStreamParameters:rn.sctpStreamParameters,label:rn.label,protocol:rn.protocol},_i)),Je(),kt.next=71;break;case 67:kt.prev=67,kt.t2=kt.catch(52),Pe.error('"newDataConsumer" request failed:%o',kt.t2),ke.dispatch(Fe({type:"error",text:"Error creating a DataConsumer: ".concat(kt.t2)}));case 71:return kt.abrupt("break",130);case 72:try{Vn=ye.data.peerId,(Ai=ae._openTelemetry)===null||Ai===void 0||Ai.traceAutoComplete({spanName:"Emitting MIC_REQUESTED & Protoo REQ: enableMic for ".concat(Vn),status:1}),ae._eventEmitter.emit("MIC_REQUESTED",{peerId:Vn}),Je()}catch(Gr){Pe.error('"enableMic" request failed:%o',Gr),($n=ae._videosdkLogs)===null||$n===void 0||$n.pushLogs({logText:"Error enableMic request failed",logType:"ERROR",attributes:{error:Gr.message}}),ae._emitError({code:3027,message:Gr.message})}return kt.abrupt("break",130);case 74:return kt.prev=74,qn=(Si=ae._openTelemetry)===null||Si===void 0?void 0:Si.trace({spanName:"Protoo REQ: disableMic"}),kt.next=78,ae.disableMic(!1,qn);case 78:(Kn=ae._openTelemetry)===null||Kn===void 0||Kn.completeSpan({span:qn,status:1,message:"Request Completed"}),Je(),kt.next=87;break;case 82:kt.prev=82,kt.t3=kt.catch(74),(Vi=ae._openTelemetry)===null||Vi===void 0||Vi.completeSpan({span:qn,status:2,message:"disableMic request failed ".concat(kt.t3)}),(Li=ae._videosdkLogs)===null||Li===void 0||Li.pushLogs({logText:"Error disableMic request failed",logType:"ERROR",attributes:{error:kt.t3.message}}),ae._emitError({code:3028,message:kt.t3.message});case 87:return kt.abrupt("break",130);case 88:try{Tn=ye.data.peerId,(Gn=ae._openTelemetry)===null||Gn===void 0||Gn.traceAutoComplete({spanName:"Emitting WEBCAM_REQUESTED & Protoo REQ: enableWebcam for ".concat(Tn),status:1}),ae._eventEmitter.emit("WEBCAM_REQUESTED",{peerId:Tn}),Je()}catch(Gr){Pe.error('"enableWebcam" request failed:%o',Gr),(yn=ae._videosdkLogs)===null||yn===void 0||yn.pushLogs({logText:"Error enableWebcam request failed",logType:"ERROR",attributes:{error:Gr.message}}),ae._emitError({code:3029,message:Gr.message})}return kt.abrupt("break",130);case 90:return kt.prev=90,xn=(Rn=ae._openTelemetry)===null||Rn===void 0?void 0:Rn.trace({spanName:"Protoo REQ: disableWebcam"}),kt.next=94,ae.disableWebcam(xn);case 94:(Ri=ae._openTelemetry)===null||Ri===void 0||Ri.completeSpan({span:xn,status:1,message:"Request Completed"}),Je(),kt.next=103;break;case 98:kt.prev=98,kt.t4=kt.catch(90),(Fr=ae._openTelemetry)===null||Fr===void 0||Fr.completeSpan({span:xn,status:2,message:"disableWebcam request failed ".concat(kt.t4)}),(si=ae._videosdkLogs)===null||si===void 0||si.pushLogs({logText:"Error disableWebcam request failed",logType:"ERROR",attributes:{error:kt.t4.message}}),ae._emitError({code:3030,message:kt.t4.message});case 103:return kt.abrupt("break",130);case 104:kt.prev=104,Qe=ye.data,Cr=Qe.peerId,Qr=Qe.state,Yr=Qe.pinnedBy,Nr=(Sr=ae._openTelemetry)===null||Sr===void 0?void 0:Sr.trace({spanName:"Protoo REQ: pinStateChanged",attributes:{requestData:JSON.stringify({peerId:Cr,state:Qr,pinnedBy:Yr})}}),ae._pinnedParticipants.has(Cr)||ae._pinnedParticipants.set(Cr,{cam:!1,share:!1}),Ni=ae._pinnedParticipants.get(Cr),Qr.cam!=null&&(Ni.cam=Qr.cam),Qr.share!=null&&(Ni.share=Qr.share),ae._pinnedParticipants.set(Cr,Ni),ae._eventEmitter.emit("PIN_STATE_CHANGED",{peerId:Cr,state:Qr,pinnedBy:Yr}),Ni.share==0&&Ni.cam==0&&ae._pinnedParticipants.delete(Cr),(dt=ae._openTelemetry)===null||dt===void 0||dt.completeSpan({span:Nr,status:1,message:"Request Completed",attributes:{_pinnedParticipants:JSON.stringify(ae._pinnedParticipants)}}),Je(),kt.next=123;break;case 118:throw kt.prev=118,kt.t5=kt.catch(104),(ha=ae._openTelemetry)===null||ha===void 0||ha.completeSpan({span:Nr,status:2,message:"pinStateChanged request failed"}),(ea=ae._videosdkLogs)===null||ea===void 0||ea.pushLogs({logText:"Error pinStateChanged request failed",logType:"ERROR",attributes:{error:kt.t5.message}}),kt.t5;case 123:return kt.abrupt("break",130);case 124:return ae._eventEmitter.emit("SWITCH_ROOM",ye.data),Je(),kt.abrupt("break",130);case 127:return Je({peerId:ae._peerId,statsData:ae._stats}),ae._stats={},kt.abrupt("break",130);case 130:case"end":return kt.stop()}},ct,null,[[14,37],[52,67],[74,82],[90,98],[104,118]])}));return function(ct,ye,Je){return Xe.apply(this,arguments)}}()),this._protoo.on("notification",function(){var Xe=(0,h.A)(s().mark(function ct(ye){var Je,qt,rr,cr,nr,ir,mr,Qt,Ht,xr,Zt,dr,jr,ln,mn,lr,un,Pn,Dn,Br,Or,In,Wt,Mn,It,yr,Wr,en,on,tn,_i,rs,wi,zn,ii,Wi,bi,rn,Ai,Vn,$n,qn,Si,Kn,Vi,Li,Gn,Tn,yn,xn,Rn,Ri,Fr,si,Nr,Sr,dt,Qe,Cr,Qr,Yr,Ni,ha,ea,kt,Gr,Cs,so,ao,fa,Tc,oo,zl,co,xc,Wo,An,Hl,Wl,Vl,$l,ql,Vo,$o,Oc,Td;return s().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:Pe.debug('proto "notification" event [method:%s, data:%o]',ye.method,ye.data),Ye.t0=ye.method,Ye.next=Ye.t0==="error"?4:Ye.t0==="participantMediaStateChanged"?9:Ye.t0==="producerScore"?10:Ye.t0==="entryRequested"?13:Ye.t0==="entryResponded"?17:Ye.t0==="newPeer"?23:Ye.t0==="peerClosed"?30:Ye.t0==="peerDisplayNameChanged"?36:Ye.t0==="downlinkBwe"?40:Ye.t0==="consumerClosed"?42:Ye.t0==="consumerPaused"?54:Ye.t0==="consumerResumed"?61:Ye.t0==="consumerLayersChanged"?68:Ye.t0==="consumerScore"?79:Ye.t0==="dataConsumerClosed"?82:Ye.t0==="activeSpeaker"?91:Ye.t0==="transcriptionStateChanged"?96:Ye.t0==="transcriptionText"?99:Ye.t0==="recordingStateChanged"?101:Ye.t0==="recordingStarted"?104:Ye.t0==="recordingStopped"?106:Ye.t0==="livestreamStateChanged"?108:Ye.t0==="livestreamStarted"?111:Ye.t0==="livestreamStopped"?113:Ye.t0==="hlsStateChanged"?115:Ye.t0==="hlsPlayableStateChanged"?118:Ye.t0==="hlsStarted"?120:Ye.t0==="hlsStopped"?123:Ye.t0==="whiteboardStarted"?125:Ye.t0==="whiteboardStopped"?128:Ye.t0==="addCharacter"?130:Ye.t0==="removeCharacter"?136:Ye.t0==="characterStateChanged"?142:Ye.t0==="characterMessage"?145:Ye.t0==="userMessage"?147:Ye.t0==="characterData"?149:Ye.t0==="videoStatusChanged"?151:Ye.t0==="videoSeeked"?153:Ye.t0==="connectionOpen"?156:Ye.t0==="connectionClose"?158:Ye.t0==="connectionChatMessage"?160:Ye.t0==="connectionParticipantJoined"?162:Ye.t0==="connectionParticipantLeft"?164:Ye.t0==="pubsubMessage"?166:Ye.t0==="peerModeChanged"?168:Ye.t0==="restartIce"?171:175;break;case 4:return rr=ye.data,ae._eventEmitter.emit("ERROR",rr),(Je=ae._videosdkLogs)===null||Je===void 0||Je.pushLogs({logText:"Error in Meeting Session",logType:"ERROR",attributes:{error:rr.message}}),(qt=ae._openTelemetry)===null||qt===void 0||qt.traceAutoComplete({spanName:"Emitted `ERROR` Event",attributes:{error:rr.message},status:2}),Ye.abrupt("break",176);case 9:try{cr=ye.data,nr=cr.peerId,ir=cr.kind,mr=cr.newState,ae._eventEmitter.emit("PARTICIPANT_MEDIA_STATE_CHANGED",{peerId:nr,kind:ir,newState:mr}),ir=="video"&&((Qt=ae._openTelemetry)===null||Qt===void 0||Qt.traceAutoComplete({spanName:"".concat(nr," has ").concat(mr?"enable":"disable"," ").concat(ir),status:1}))}catch(qo){Pe.error('"newProducer" request failed:%o',qo),(Ht=ae._videosdkLogs)===null||Ht===void 0||Ht.pushLogs({logText:"Error newProducer request failed",logType:"ERROR",attributes:{error:qo.message}})}case 10:return xr=ye.data,Zt=xr.producerId,dr=xr.score,ke.dispatch(Ot(Zt,dr)),Ye.abrupt("break",176);case 13:return ln=ye.data,mn=ln.id,lr=ln.name,un=(jr=ae._openTelemetry)===null||jr===void 0?void 0:jr.trace({spanName:"Protoo Noti: entryRequested",span:ae._joinSpan,attributes:{data:JSON.stringify({id:mn,name:lr})}}),mn!==ae._peerId?(ae._eventEmitter.emit("ENTRY_REQUESTED",{id:mn,name:lr}),(Pn=ae._openTelemetry)===null||Pn===void 0||Pn.completeSpan({span:un,status:1,message:"EntryResponded Recieved"})):(Dn=ae._openTelemetry)===null||Dn===void 0||Dn.completeSpan({span:un,status:2,message:"Entry Request Failed"}),Ye.abrupt("break",176);case 17:return Or=ye.data,In=Or.id,Wt=Or.decision,Mn=Or.sessionId,ae._videosdkLogs=new xt({roomId:ae._roomId,peerId:ae._peerId,logs:se,observabilityJwt:Ie,deviceInfo:ae._deviceInfo,sessionId:Mn,debugMode:ae._debugMode}),ae._eventEmitter.emit("ENTRY_RESPONDED",{id:In,decision:Wt}),It=(Br=ae._openTelemetry)===null||Br===void 0?void 0:Br.trace({spanName:"Protoo Noti: entryResponded",attributes:{data:JSON.stringify({id:In,decision:Wt}),sessionId:Mn},span:ae._joinSpan}),In===ae._peerId&&Wt==="allowed"?(ae.joinRoom(),(yr=ae._openTelemetry)===null||yr===void 0||yr.completeSpan({span:It,status:1,message:"EntryResponded Recieved"})):(Wr=ae._openTelemetry)===null||Wr===void 0||Wr.completeSpan({span:ae._joinSpan,status:2,message:"Join Request Denied"}),Ye.abrupt("break",176);case 23:en=ye.data,on=Kt(Ft(Ft({},en),{},{consumers:[],dataConsumers:[]})),ke.dispatch(on),ae._eventEmitter.emit(on.type,on.payload),ke.dispatch(Fe({text:"".concat(en.displayName," has joined the room")}));try{(tn=ae._openTelemetry)===null||tn===void 0||tn.traceAutoComplete({spanName:"Protoo Noti: newPeer ".concat(en.displayName),attributes:{peerData:JSON.stringify(en)}})}catch(qo){(_i=ae._videosdkLogs)===null||_i===void 0||_i.pushLogs({logText:"Error Protoo Noti: newPeer",logType:"ERROR",attributes:{error:qo.message}}),console.error(qo)}return Ye.abrupt("break",176);case 30:return wi=ye.data.peerId,zn=At(wi),ke.dispatch(zn),ae._eventEmitter.emit(zn.type,zn.payload),(rs=ae._openTelemetry)===null||rs===void 0||rs.traceAutoComplete({spanName:"Protoo Noti: peerClosed for ".concat(wi)}),Ye.abrupt("break",176);case 36:return ii=ye.data,Wi=ii.peerId,bi=ii.displayName,rn=ii.oldDisplayName,ke.dispatch(Ar(bi,Wi)),ke.dispatch(Fe({text:"".concat(rn," is now ").concat(bi)})),Ye.abrupt("break",176);case 40:return Pe.debug("'downlinkBwe' event:%o",ye.data),Ye.abrupt("break",176);case 42:if(Vn=ye.data.consumerId,$n=ae._consumers.get(Vn)){Ye.next=46;break}return Ye.abrupt("break",176);case 46:return $n.close(),ae._consumers.delete(Vn),qn=$n.appData.peerId,Si=Xt(Vn,qn),ke.dispatch(Si),ae._eventEmitter.emit(Si.type,Si.payload),(Ai=ae._openTelemetry)===null||Ai===void 0||Ai.traceAutoComplete({spanName:"Protoo Noti: consumerClosed for id ".concat(Vn),attributes:{consumerData:JSON.stringify($n)}}),Ye.abrupt("break",176);case 54:if(Kn=ye.data.consumerId,Vi=ae._consumers.get(Kn)){Ye.next=58;break}return Ye.abrupt("break",176);case 58:return Vi.pause(),ke.dispatch(hn(Kn,"remote")),Ye.abrupt("break",176);case 61:if(Li=ye.data.consumerId,Gn=ae._consumers.get(Li)){Ye.next=65;break}return Ye.abrupt("break",176);case 65:return Gn.resume(),ke.dispatch(kr(Li,"remote")),Ye.abrupt("break",176);case 68:if(yn=ye.data,xn=yn.consumerId,Rn=yn.spatialLayer,Ri=yn.temporalLayer,(Fr=ae._consumers.get(xn)).currentSpatialLayer=Rn,Fr.currentTemporalLayer=Ri,Fr){Ye.next=74;break}return Ye.abrupt("break",176);case 74:return((Tn=Fr.appData)===null||Tn===void 0||(Tn=Tn.encodings)===null||Tn===void 0?void 0:Tn.length)>1?(ae._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:Fr.appData.peerId,prevQuality:Fr.spatialLayers-1-Fr.currentSpatialLayer==0?"HIGH":Fr.spatialLayers-1-Fr.currentSpatialLayer==1?"MEDIUM":"LOW",currentQuality:Fr.spatialLayers-1-Rn==0?"HIGH":Fr.spatialLayers-1-Rn==1?"MEDIUM":"LOW"}),(si=ae._videosdkLogs)===null||si===void 0||si.pushLogs({logText:"Consumer Peer ".concat(Fr.appData.peerId," changed to ").concat(Fr.spatialLayers-1-Rn==0?"HIGH":Fr.spatialLayers-1-Rn==1?"MEDIUM":"LOW",", previous quality was ").concat(Fr.spatialLayers-1-Fr.currentSpatialLayer==0?"HIGH":Fr.spatialLayers-1-Fr.currentSpatialLayer==1?"MEDIUM":"LOW"),logType:"INFO",attributes:{consumerId:xn}})):(ae._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:Fr.appData.peerId,prevQuality:"HIGH",currentQuality:"HIGH"}),(Nr=ae._videosdkLogs)===null||Nr===void 0||Nr.pushLogs({logText:"Consumer Peer ".concat(Fr.appData.peerId," changed to HIGH, previous quality was HIGH"),logType:"INFO",attributes:{consumerId:xn}})),Fr.currentSpatialLayer=Rn,Fr.currentTemporalLayer=Ri,ke.dispatch(Lr(xn,Rn,Ri)),Ye.abrupt("break",176);case 79:return Sr=ye.data,dt=Sr.consumerId,Qe=Sr.score,ke.dispatch(Ze(dt,Qe)),Ye.abrupt("break",176);case 82:if(Cr=ye.data.dataConsumerId,Qr=ae._dataConsumers.get(Cr)){Ye.next=86;break}return Ye.abrupt("break",176);case 86:return Qr.close(),ae._dataConsumers.delete(Cr),Yr=Qr.appData.peerId,ke.dispatch(hr(Cr,Yr)),Ye.abrupt("break",176);case 91:return Ni=ye.data.peerId,ha=ne(Ni),ke.dispatch(ha),ae._eventEmitter.emit(ha.type,ha.payload),Ye.abrupt("break",176);case 96:return ae._eventEmitter.emit("TRANSCRIPTION_STATE_CHANGED",ye.data),(ea=ae._openTelemetry)===null||ea===void 0||ea.traceAutoComplete({spanName:"Emitted TRANSCRIPTION_STATE_CHANGED, status : ".concat(ye.data.status),attributes:{data:JSON.stringify(ye.data)},status:1}),Ye.abrupt("break",176);case 99:return ae._eventEmitter.emit("TRANSCRIPTION_TEXT",ye.data),Ye.abrupt("break",176);case 101:return ae._eventEmitter.emit("RECORDING_STATE_CHANGED",ye.data),(kt=ae._openTelemetry)===null||kt===void 0||kt.traceAutoComplete({spanName:"Emitted RECORDING_STATE_CHANGED, status : ".concat(ye.data.status),attributes:{data:JSON.stringify(ye.data)},status:1}),Ye.abrupt("break",176);case 104:return ae._eventEmitter.emit("RECORDING_STARTED",{}),Ye.abrupt("break",176);case 106:return ae._eventEmitter.emit("RECORDING_STOPPED",{}),Ye.abrupt("break",176);case 108:return ae._eventEmitter.emit("LIVESTREAM_STATE_CHANGED",ye.data),(Gr=ae._openTelemetry)===null||Gr===void 0||Gr.traceAutoComplete({spanName:"Emitted LIVESTREAM_STATE_CHANGED, status : ".concat(ye.data.status),attributes:{data:JSON.stringify(ye.data)},status:1}),Ye.abrupt("break",176);case 111:return ae._eventEmitter.emit("LIVESTREAM_STARTED",{}),Ye.abrupt("break",176);case 113:return ae._eventEmitter.emit("LIVESTREAM_STOPPED",{}),Ye.abrupt("break",176);case 115:return ae._eventEmitter.emit("HLS_STATE_CHANGED",ye.data),(Cs=ae._openTelemetry)===null||Cs===void 0||Cs.traceAutoComplete({spanName:"Emitted HLS_STATE_CHANGED, status : ".concat(ye.data.status),attributes:{data:JSON.stringify(ye.data)},status:1}),Ye.abrupt("break",176);case 118:return ye.data.isPlayable&&(ae._eventEmitter.emit("HLS_STATE_CHANGED",Ft(Ft({},ye.data),{},{status:fr.V.HLS_PLAYABLE})),(so=ae._openTelemetry)===null||so===void 0||so.traceAutoComplete({spanName:"Protoo Noti: hlsPlayableStateChanged",status:1})),Ye.abrupt("break",176);case 120:return ao=ye.data.downstreamUrl,ae._eventEmitter.emit("HLS_STARTED",ao),Ye.abrupt("break",176);case 123:return ae._eventEmitter.emit("HLS_STOPPED",{}),Ye.abrupt("break",176);case 125:return fa=ye.data,Tc=fa.state,oo=fa.url,Tc?ae._eventEmitter.emit("WHITEBOARD_STARTED",{state:Tc}):oo&&ae._eventEmitter.emit("WHITEBOARD_STARTED",{url:oo}),Ye.abrupt("break",176);case 128:return ae._eventEmitter.emit("WHITEBOARD_STOPPED",{}),Ye.abrupt("break",176);case 130:return co=ye.data,xc=Kt(Ft(Ft({},co),{},{consumers:[],dataConsumers:[]})),ke.dispatch(xc),ae._eventEmitter.emit("ADD_CHARACTER",ye.data),(zl=ae._openTelemetry)===null||zl===void 0||zl.traceAutoComplete({spanName:"Emitted ADD_CHARACTER : ".concat(ye.data),attributes:{data:JSON.stringify(ye.data)},status:1}),Ye.abrupt("break",176);case 136:return An=ye.data.id,Hl=At(An),ke.dispatch(Hl),ae._eventEmitter.emit("REMOVE_CHARACTER",ye.data),(Wo=ae._openTelemetry)===null||Wo===void 0||Wo.traceAutoComplete({spanName:"Emitted REMOVE_CHARACTER : ".concat(ye.data),attributes:{data:JSON.stringify(ye.data)},status:1}),Ye.abrupt("break",176);case 142:return ae._eventEmitter.emit("CHARACTER_STATE_CHANGED",ye.data),(Wl=ae._openTelemetry)===null||Wl===void 0||Wl.traceAutoComplete({spanName:"Emitted CHARACTER_STATE_CHANGED, status : ".concat(ye.data.status),attributes:{data:JSON.stringify(ye.data)},status:1}),Ye.abrupt("break",176);case 145:return ae._eventEmitter.emit("CHARACTER_MESSAGE",ye.data),Ye.abrupt("break",176);case 147:return ae._eventEmitter.emit("USER_MESSAGE",ye.data),Ye.abrupt("break",176);case 149:return ae._eventEmitter.emit("CHARACTER_DATA",ye.data),Ye.abrupt("break",176);case 151:return ae._eventEmitter.emit("VIDEO_STATE_CHANGED",ye.data),Ye.abrupt("break",176);case 153:return Vl=ye.data.currentTime,ae._eventEmitter.emit("VIDEO_SEEKED",{currentTime:Vl}),Ye.abrupt("break",176);case 156:return ae._eventEmitter.emit("CONNECTION_OPEN",ye.data),Ye.abrupt("break",176);case 158:return ae._eventEmitter.emit("CONNECTION_CLOSE",ye.data),Ye.abrupt("break",176);case 160:return ae._eventEmitter.emit("CONNECTION_CHAT_MESSAGE",ye.data),Ye.abrupt("break",176);case 162:return ae._eventEmitter.emit("CONNECTION_PARTICIPANT_JOIN",ye.data),Ye.abrupt("break",176);case 164:return ae._eventEmitter.emit("CONNECTION_PARTICIPANT_LEFT",ye.data),Ye.abrupt("break",176);case 166:return ae._eventEmitter.emit("PUBSUB_MESSAGE",ye.data),Ye.abrupt("break",176);case 168:return ae._eventEmitter.emit("PEER_MODE_CHANGED",ye.data),($l=ae._openTelemetry)===null||$l===void 0||$l.traceAutoComplete({spanName:"Emitted PEER_MODE_CHANGED",attributes:{data:JSON.stringify(ye.data)},status:1}),Ye.abrupt("break",176);case 171:return Vo=ye.data,$o=Vo.transportId,Oc=Vo.iceParameters,Td=(ql=ae._openTelemetry)===null||ql===void 0?void 0:ql.trace({spanName:"Protoo Noti: restartIce for transportId :".concat($o),attributes:{iceParameters:JSON.stringify(Oc)}}),ae.handleRemoteRestartIce({transportId:$o,iceParameters:Oc,internalSpan:Td}),Ye.abrupt("break",176);case 175:Pe.error('unknown protoo notification.method "%s"',ye.method);case 176:case"end":return Ye.stop()}},ct)}));return function(ct){return Xe.apply(this,arguments)}}());case 27:case"end":return ot.stop()}},X,this)})),function(){return Pd.apply(this,arguments)})},{key:"requestEntry",value:(Cd=(0,h.A)(s().mark(function X(){var F,U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"Requesting Entry",span:this._joinSpan}),H.next=3,this._protoo.request("requestEntry",{name:this._displayName});case 3:(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:z,status:1,message:"Entry Requested Successfully"});case 4:case"end":return H.stop()}},X,this)})),function(){return Cd.apply(this,arguments)})},{key:"respondEntry",value:(kd=(0,h.A)(s().mark(function X(F,U){var z,H,re;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return re=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"Responding Entry",attributes:{peerId:F,decision:U},span:this._joinSpan}),se.next=3,this._protoo.request("respondEntry",{id:F,decision:U});case 3:(H=this._openTelemetry)===null||H===void 0||H.completeSpan({message:"Entry Responded Successfully",span:re,status:1});case 4:case"end":return se.stop()}},X,this)})),function(X,F){return kd.apply(this,arguments)})},{key:"startTranscription",value:(Ed=(0,h.A)(s().mark(function X(F){var U,z,H,re,se;return s().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Pe.debug("startTranscription()"),H=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"startTranscription() Start",attributes:{config:F?JSON.stringify(F):"config Not Specify"}}),Ie.prev=2,Ie.next=5,this._protoo.request("startTranscription",{config:F});case 5:Ie.next=13;break;case 7:Ie.prev=7,Ie.t0=Ie.catch(2),Pe.error("startTranscription() | failed:%o",Ie.t0),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:H,status:2,message:"startTranscription() failed"}),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error startTranscription() failed",logType:"ERROR",attributes:{error:Ie.t0.message}}),this._emitError({code:4031,message:Ie.t0.message});case 13:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"startTranscription() End"});case 14:case"end":return Ie.stop()}},X,this,[[2,7]])})),function(X){return Ed.apply(this,arguments)})},{key:"stopTranscription",value:(Ul=(0,h.A)(s().mark(function X(){var F,U,z,H,re;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return Pe.debug("stopTranscription()"),z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"stopTranscription() Start"}),se.prev=2,se.next=5,this._protoo.request("stopTranscription",{});case 5:se.next=12;break;case 7:se.prev=7,se.t0=se.catch(2),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:z,status:2,message:"stopTranscription() failed"}),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error stopTranscription() failed",logType:"ERROR",attributes:{error:se.t0.message}}),this._emitError({code:4032,message:se.t0.message});case 12:(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:z,status:1,message:"stopTranscription() End"});case 13:case"end":return se.stop()}},X,this,[[2,7]])})),function(){return Ul.apply(this,arguments)})},{key:"startRecording",value:(Fl=(0,h.A)(s().mark(function X(F,U,z,H){var re,se,Ie,Ee,wt;return s().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return Pe.debug("startRecording()"),Ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"startRecording() Start",attributes:{webhookUrl:F||"webhookUrl Not Specify",awsDirPath:U||"awsDirPath Not Specify",config:z?JSON.stringify(z):"config Not Specify",transcription:H?JSON.stringify(H):"transcription Not Specify"}}),Ge.prev=2,Ge.next=5,this._protoo.request("startRecording",{webhookUrl:F,awsDirPath:U,config:z,transcription:H});case 5:Ge.next=13;break;case 7:Ge.prev=7,Ge.t0=Ge.catch(2),Pe.error("startRecording() | failed:%o",Ge.t0),(Ee=this._openTelemetry)===null||Ee===void 0||Ee.completeSpan({span:Ie,status:2,message:"startRecording() failed"}),(wt=this._videosdkLogs)===null||wt===void 0||wt.pushLogs({logText:"Error startRecording() failed",logType:"ERROR",attributes:{error:Ge.t0.message}}),this._emitError({code:4011,message:Ge.t0.message});case 13:(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:Ie,status:1,message:"startRecording() End"});case 14:case"end":return Ge.stop()}},X,this,[[2,7]])})),function(X,F,U,z){return Fl.apply(this,arguments)})},{key:"stopRecording",value:(Ho=(0,h.A)(s().mark(function X(){var F,U,z,H,re;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(!this._closed){se.next=2;break}return se.abrupt("return");case 2:return Pe.debug("stopRecording()"),z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"stopRecording() Start"}),se.prev=4,se.next=7,this._protoo.request("stopRecording",{});case 7:se.next=14;break;case 9:se.prev=9,se.t0=se.catch(4),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:z,status:2,message:"stopRecording() failed"}),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error stopRecording() failed",logType:"ERROR",attributes:{error:se.t0.message}}),this._emitError({code:4012,message:se.t0.message});case 14:(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:z,status:1,message:"stopRecording() End"});case 15:case"end":return se.stop()}},X,this,[[4,9]])})),function(){return Ho.apply(this,arguments)})},{key:"startLivestream",value:(ni=(0,h.A)(s().mark(function X(F,U){var z,H,re,se,Ie;return s().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Pe.debug("startLivestream()"),re=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"startLivestream() Start",attributes:{outputs:F?JSON.stringify(F):"outputs Not Specify",config:U?JSON.stringify(U):"config Not Specify"}}),Ee.prev=2,Ee.next=5,this._protoo.request("startLivestream",{outputs:F,config:U});case 5:Ee.next=12;break;case 7:Ee.prev=7,Ee.t0=Ee.catch(2),(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:re,status:1,message:"startLivestream() End"}),(Ie=this._videosdkLogs)===null||Ie===void 0||Ie.pushLogs({logText:"Error startLivestream() failed",logType:"ERROR",attributes:{error:Ee.t0.message}}),this._emitError({code:4013,message:Ee.t0.message});case 12:(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:re,status:1,message:"startLivestream() End"});case 13:case"end":return Ee.stop()}},X,this,[[2,7]])})),function(X,F){return ni.apply(this,arguments)})},{key:"stopLivestream",value:(jt=(0,h.A)(s().mark(function X(){var F,U,z,H,re;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return Pe.debug("stopLivestream()"),z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"stopLivestream() Start"}),se.prev=2,se.next=5,this._protoo.request("stopLivestream",{});case 5:se.next=12;break;case 7:se.prev=7,se.t0=se.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error stopLivestream() failed",logType:"ERROR",attributes:{error:se.t0.message}}),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:z,status:2,message:"Error stopLivestream() failed"}),this._emitError({code:4014,message:se.t0.message});case 12:(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:z,status:1,message:"stopLivestream() End"});case 13:case"end":return se.stop()}},X,this,[[2,7]])})),function(){return jt.apply(this,arguments)})},{key:"startHls",value:(Bl=(0,h.A)(s().mark(function X(F,U){var z,H,re,se,Ie;return s().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return F=F||{},U=U||{},Pe.debug("startHls()"),re=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"startHls() Start",attributes:{config:F?JSON.stringify(F):"config Not Specify",transcription:U?JSON.stringify(U):"transcription Not Specify"}}),Ee.prev=4,Ee.next=7,this._protoo.request("startHls",{config:F,transcription:U});case 7:Ee.next=15;break;case 9:Ee.prev=9,Ee.t0=Ee.catch(4),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error startHls() failed",logType:"ERROR",attributes:{error:Ee.t0.message}}),(Ie=this._openTelemetry)===null||Ie===void 0||Ie.completeSpan({span:re,status:2,message:"Error startHls() failed"}),this._emitError({code:4016,message:Ee.t0.message}),Pe.error("startHls() | failed:%o",Ee.t0);case 15:(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:re,status:1,message:"startHlsSpan() End"});case 16:case"end":return Ee.stop()}},X,this,[[4,9]])})),function(X,F){return Bl.apply(this,arguments)})},{key:"stopHls",value:(or=(0,h.A)(s().mark(function X(){var F,U,z,H,re;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return Pe.debug("stopHls()"),z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"stopHls() Start"}),se.prev=2,se.next=5,this._protoo.request("stopHls",{});case 5:se.next=12;break;case 7:se.prev=7,se.t0=se.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error stopHls() failed",logType:"ERROR",attributes:{error:se.t0.message}}),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:z,status:2,message:"Error stopHls() failed"}),this._emitError({code:4017,message:se.t0.message});case 12:(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:z,status:1,message:"stopHls() End"});case 13:case"end":return se.stop()}},X,this,[[2,7]])})),function(){return or.apply(this,arguments)})},{key:"startWhiteboard",value:(jl=(0,h.A)(s().mark(function X(){var F,U,z,H;return s().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return Pe.debug("startWhiteboard()"),z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"startWhiteboard() Start"}),re.prev=2,re.next=5,this._protoo.request("startWhiteboard",{version:"v2"});case 5:re.next=12;break;case 7:re.prev=7,re.t0=re.catch(2),Pe.error("startWhiteboard() | failed:%o",re.t0),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:z,status:2,message:"Error startWhiteboard() failed"}),this._emitError({code:3021,message:re.t0.message});case 12:(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:z,status:1,message:"startWhiteboard() End"});case 13:case"end":return re.stop()}},X,this,[[2,7]])})),function(){return jl.apply(this,arguments)})},{key:"stopWhiteboard",value:(Nt=(0,h.A)(s().mark(function X(){var F,U,z,H;return s().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return Pe.debug("stopWhiteboard()"),z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"stopWhiteboard() Start"}),re.prev=2,re.next=5,this._protoo.request("stopWhiteboard",{});case 5:re.next=12;break;case 7:re.prev=7,re.t0=re.catch(2),Pe.error("stopWhiteboard() | failed:%o",re.t0),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:z,status:2,message:"Error stopWhiteboard() failed"}),this._emitError({code:3022,message:re.t0.message});case 12:(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:z,status:1,message:"stopWhiteboard() End"});case 13:case"end":return re.stop()}},X,this,[[2,7]])})),function(){return Nt.apply(this,arguments)})},{key:"joinCharacter",value:(fe=(0,h.A)(s().mark(function X(F){var U,z,H,re,se;return s().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Pe.debug("joinCharacter()"),H=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"joinCharacter() Start",attributes:{config:F?JSON.stringify(F):"config Not Specify"}}),Ie.prev=2,Ie.next=5,this._protoo.request("joinCharacter",{config:F});case 5:return Ie.abrupt("return",Ie.sent);case 8:Ie.prev=8,Ie.t0=Ie.catch(2),Pe.error("joinCharacter() | failed:%o",Ie.t0),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:H,status:2,message:"joinCharacter() failed"}),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error joinCharacter() failed",logType:"ERROR",attributes:{error:Ie.t0.message}}),this._emitError({code:4033,message:Ie.t0.message});case 14:return(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"joinCharacter() End"}),Ie.abrupt("return",!1);case 16:case"end":return Ie.stop()}},X,this,[[2,8]])})),function(X){return fe.apply(this,arguments)})},{key:"removeCharacter",value:(Nl=(0,h.A)(s().mark(function X(F){var U,z,H,re,se;return s().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Pe.debug("removeCharacter()"),H=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"removeCharacter() Start"}),Ie.prev=2,Ie.next=5,this._protoo.request("leaveCharacter",{config:F});case 5:Ie.next=14;break;case 7:return Ie.prev=7,Ie.t0=Ie.catch(2),Pe.error("removeCharacter() | failed:%o",Ie.t0),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:H,status:2,message:"removeCharacter() failed"}),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error removeCharacter() failed",logType:"ERROR",attributes:{error:Ie.t0.message}}),this._emitError({code:4034,message:Ie.t0.message}),Ie.abrupt("return",!1);case 14:return(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"removeCharacter() End"}),Ie.abrupt("return",!0);case 16:case"end":return Ie.stop()}},X,this,[[2,7]])})),function(X){return Nl.apply(this,arguments)})},{key:"sendCharacterMessage",value:(Pc=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return U=F.interactionId,z=F.text,Pe.debug("sendCharacterMessage()"),H.prev=2,H.next=5,this._protoo.request("sendCharacterMessage",{interactionId:U,text:z});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),Pe.error("sendCharacterMessage() | failed:%o",H.t0),this._emitError({code:4035,message:H.t0.message});case 11:case"end":return H.stop()}},X,this,[[2,7]])})),function(X){return Pc.apply(this,arguments)})},{key:"interruptCharacter",value:(Ll=(0,h.A)(s().mark(function X(F){var U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return U=F.interactionId,Pe.debug("interruptCharacter()"),z.prev=2,z.next=5,this._protoo.request("interruptCharacter",{interactionId:U});case 5:z.next=11;break;case 7:z.prev=7,z.t0=z.catch(2),Pe.error("interruptCharacter() | failed:%o",z.t0),this._emitError({code:4036,message:z.t0.message});case 11:case"end":return z.stop()}},X,this,[[2,7]])})),function(X){return Ll.apply(this,arguments)})},{key:"pinStateChange",value:(Zs=(0,h.A)(s().mark(function X(F){var U,z,H,re;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return z=F.peerId,H=F.state,(U=this._openTelemetry)===null||U===void 0||U.traceAutoComplete({spanName:"Pin state Change for ".concat(z),attributes:{state:H?JSON.stringify(H):null},status:1}),se.prev=2,se.next=5,this._protoo.request("pinStateChanged",{peerId:z,state:H});case 5:se.next=11;break;case 7:se.prev=7,se.t0=se.catch(2),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error pinStateChange() failed",logType:"ERROR",attributes:{error:se.t0.message}}),Pe.error("pinStateChange() | failed");case 11:case"end":return se.stop()}},X,this,[[2,7]])})),function(X){return Zs.apply(this,arguments)})},{key:"startVideo",value:(Mi=(0,h.A)(s().mark(function X(F){var U,z,H;return s().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return z=F.link,Pe.debug("startVideo()"),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"startVideo() Calling",logType:"INFO"}),re.prev=3,re.next=6,this._protoo.request("startVideo",{link:z});case 6:re.next=13;break;case 8:re.prev=8,re.t0=re.catch(3),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error startVideo() failed",logType:"ERROR",attributes:{error:re.t0.message}}),Pe.error("startVideo() | failed:%o",re.t0),this._emitError({code:3023,message:re.t0.message});case 13:case"end":return re.stop()}},X,this,[[3,8]])})),function(X){return Mi.apply(this,arguments)})},{key:"stopVideo",value:(Un=(0,h.A)(s().mark(function X(){var F,U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Pe.debug("stopVideo()"),(F=this._videosdkLogs)===null||F===void 0||F.pushLogs({logText:"stopVideo() Calling",logType:"INFO"}),z.prev=2,z.next=5,this._protoo.request("stopVideo",{});case 5:z.next=12;break;case 7:z.prev=7,z.t0=z.catch(2),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error stopVideo() failed",logType:"ERROR",attributes:{error:z.t0.message}}),Pe.error("stopVideo() | failed:%o",z.t0),this._emitError({code:3024,message:z.t0.message});case 12:case"end":return z.stop()}},X,this,[[2,7]])})),function(){return Un.apply(this,arguments)})},{key:"pauseVideo",value:(Cc=(0,h.A)(s().mark(function X(F){return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return Pe.debug("pauseVideo()"),U.prev=1,U.next=4,this._protoo.request("pauseVideo",{currentTime:F});case 4:U.next=10;break;case 6:U.prev=6,U.t0=U.catch(1),Pe.error("pauseVideo() | failed:%o",U.t0),this._emitError({code:3025,message:U.t0.message});case 10:case"end":return U.stop()}},X,this,[[1,6]])})),function(X){return Cc.apply(this,arguments)})},{key:"resumeVideo",value:(kc=(0,h.A)(s().mark(function X(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return Pe.debug("resumeVideo()"),F.prev=1,F.next=4,this._protoo.request("resumeVideo",{});case 4:F.next=10;break;case 6:F.prev=6,F.t0=F.catch(1),Pe.error("resumeVideo() | failed:%o",F.t0),this._emitError({code:3026,message:F.t0.message});case 10:case"end":return F.stop()}},X,this,[[1,6]])})),function(){return kc.apply(this,arguments)})},{key:"seekVideo",value:(Al=(0,h.A)(s().mark(function X(F){return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return Pe.debug("seekVideo()"),U.prev=1,U.next=4,this._protoo.request("seekVideo",{currentTime:F});case 4:U.next=10;break;case 6:U.prev=6,U.t0=U.catch(1),Pe.error("seekVideo() | failed:%o",U.t0),this._emitError({code:3031,message:U.t0.message});case 10:case"end":return U.stop()}},X,this,[[1,6]])})),function(X){return Al.apply(this,arguments)})},{key:"enablePeerMic",value:(zo=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return(U=this._openTelemetry)===null||U===void 0||U.traceAutoComplete({spanName:"Enabling peer ".concat(F," Mic"),status:1}),Pe.debug("enablePeerMic()"),H.prev=2,H.next=5,this._protoo.request("enablePeerMic",{peerId:F});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error enablePeerMic() failed",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.error("enablePeerMic() | failed:%o",H.t0);case 11:case"end":return H.stop()}},X,this,[[2,7]])})),function(X){return zo.apply(this,arguments)})},{key:"disablePeerMic",value:(Ir=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return(U=this._openTelemetry)===null||U===void 0||U.traceAutoComplete({spanName:"Disabling peer ".concat(F," Mic"),status:1}),Pe.debug("disablePeerMic()"),H.prev=2,H.next=5,this._protoo.request("disablePeerMic",{peerId:F});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error disablePeerMic() failed",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.error("disablePeerMic() | failed:%o",H.t0);case 11:case"end":return H.stop()}},X,this,[[2,7]])})),function(X){return Ir.apply(this,arguments)})},{key:"consumeWebcamStreams",value:(Xs=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!this._closed){H.next=2;break}return H.abrupt("return");case 2:return Pe.debug("consumeWebcamStreams()"),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"consumeWebcamStreams() Calling",logType:"INFO",attributes:{peerId:F}}),H.prev=4,H.next=7,this._protoo.request("consumeVideoStreams",{peerId:F});case 7:H.next=13;break;case 9:H.prev=9,H.t0=H.catch(4),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error consumeWebcamStreams() failed",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.error("consumeWebcamStreams() | failed:%o",H.t0);case 13:case"end":return H.stop()}},X,this,[[4,9]])})),function(X){return Xs.apply(this,arguments)})},{key:"consumeMicStreams",value:(Ec=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return Pe.debug("consumeMicStreams()"),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"consumeMicStreams() Calling",logType:"INFO",attributes:{peerId:F}}),H.prev=2,H.next=5,this._protoo.request("consumeAudioStreams",{peerId:F});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error consumeMicStreams() failed",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.error("consumeMicStreams() | failed:%o",H.t0);case 11:case"end":return H.stop()}},X,this,[[2,7]])})),function(X){return Ec.apply(this,arguments)})},{key:"stopConsumingMicStreams",value:(fn=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!this._closed){H.next=2;break}return H.abrupt("return");case 2:return Pe.debug("stopConsumingAudioStreams()"),H.prev=3,H.next=6,this._protoo.request("stopConsumingAudioStreams",{peerId:F});case 6:(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"stopConsumingAudioStreams() Calling",logType:"INFO",attributes:{peerId:F}}),H.next=13;break;case 9:H.prev=9,H.t0=H.catch(3),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error stopConsumingMicStreams() failed",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.error("stopConsumingMicStreams() | failed:%o",H.t0);case 13:case"end":return H.stop()}},X,this,[[3,9]])})),function(X){return fn.apply(this,arguments)})},{key:"stopConsumingWebcamStreams",value:(Uo=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return Pe.debug("stopConsumingWebcamStreams()"),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"stopConsumingWebcamStreams() Calling",logType:"INFO",attributes:{peerId:F}}),H.prev=2,H.next=5,this._protoo.request("stopConsumingVideoStreams",{peerId:F});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error stopConsumingWebcamStreams() failed",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.error("stopConsumingWebcamStreams() | failed:%o",H.t0);case 11:case"end":return H.stop()}},X,this,[[2,7]])})),function(X){return Uo.apply(this,arguments)})},{key:"changeMode",value:(pr=(0,h.A)(s().mark(function X(F){var U,z,H,re,se,Ie,Ee,wt,Ge,gt,ae,ot,Xe,ct,ye,Je,qt,rr,cr,nr,ir,mr,Qt,Ht,xr,Zt,dr,jr,ln,mn=this;return s().wrap(function(lr){for(;;)switch(lr.prev=lr.next){case 0:if(z=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"changeMode() Calling with mode : ".concat(F)}),H=this._mode,lr.prev=2,H!==F){lr.next=7;break}throw(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:z,status:2,message:"changeMode() Ending"}),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"You are already in ".concat(F," mode"),logType:"INFO"}),new Error("You are already in ".concat(F," mode"));case 7:if(this._mode=F,F!==De.n.CONFERENCE){lr.next=39;break}return this._consume=!0,this._produce=!0,this._mediasoupDevice=new S.Device({handlerName:this._handlerName}),lr.next=14,this._protoo.request("getRouterRtpCapabilities");case 14:return wt=lr.sent,this._deviceInfo.sdkType!="react-native"?navigator.userAgent.indexOf("Firefox")&&(wt.headerExtensions=(Ge=wt.headerExtensions)===null||Ge===void 0?void 0:Ge.filter(function(un){return un.uri!="urn:3gpp:video-orientation"})):wt.headerExtensions=(gt=wt.headerExtensions)===null||gt===void 0?void 0:gt.filter(function(un){return un.uri!="urn:3gpp:video-orientation"}),lr.next=18,this._mediasoupDevice.load({routerRtpCapabilities:wt});case 18:if(!this._produce){lr.next=23;break}return lr.next=21,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 21:ae=lr.sent,this.createProducerTransport(ae,z);case 23:if(!this._consume){lr.next=30;break}return lr.next=26,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 26:ot=lr.sent,Xe=ot.id,ct=ot.iceParameters,ye=ot.iceCandidates,Je=ot.dtlsParameters,qt=ot.sctpParameters,this._recvTransport=this._mediasoupDevice.createRecvTransport({id:Xe,iceParameters:ct,iceCandidates:ye,dtlsParameters:Je,sctpParameters:qt,iceServers:this._iceServers}),this._recvTransport.on("connect",function(un,Pn,Dn){var Br=un.dtlsParameters;mn._protoo.request("connectWebRtcTransport",{transportId:mn._recvTransport.id,dtlsParameters:Br}).then(Pn).catch(Dn)});case 30:return(Ie=this._openTelemetry)===null||Ie===void 0||Ie.traceAutoComplete({spanName:"Sending changeMode request to server",span:z,status:1}),lr.next=33,this._protoo.request("changeMode",{mode:F});case 33:this._produce&&(ke.dispatch(ge({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled&&this.enableMic(this.customMicrophoneAudioTrack),rr=j(),this._webcamEnabled&&(!rr||rr.webcamEnabled||this._externalVideo)&&this.enableWebcam(this.customCameraVideoTrack,z),this.enableChatDataProducer()),window.SHOW_INFO&&(cr=ke.getState(),nr=cr.me,ke.dispatch(pe(nr.id))),(Ee=this._openTelemetry)===null||Ee===void 0||Ee.traceAutoComplete({spanName:"Emitting PEER_MODE_CHANGED for Peer : ".concat(this._peerId," "),span:z,status:1}),this._eventEmitter.emit("PEER_MODE_CHANGED",{peerId:this._peerId,mode:"CONFERENCE"}),lr.next=53;break;case 39:if(F!==De.n.VIEWER){lr.next=53;break}return(ir=this._openTelemetry)===null||ir===void 0||ir.traceAutoComplete({spanName:"Sending changeMode request to server",span:z,status:1}),lr.next=43,this._protoo.request("changeMode",{mode:F});case 43:this._consume=!1,this._produce=!1,this._dataConsumers.clear(),dr=(mr=this._openTelemetry)===null||mr===void 0?void 0:mr.trace({spanName:"Closing Trasnport",span:z}),(Qt=this._sendTransport)===null||Qt===void 0||Qt.close(),this._sendTransport=null,(Ht=this._recvTransport)===null||Ht===void 0||Ht.close(),this._recvTransport=null,(xr=this._openTelemetry)===null||xr===void 0||xr.completeSpan({span:dr,status:1,message:"Closed Trasnport"}),(Zt=this._openTelemetry)===null||Zt===void 0||Zt.completeSpan({span:dr,status:1,message:"changeMode() Ending"});case 53:lr.next=59;break;case 55:lr.prev=55,lr.t0=lr.catch(2),(jr=this._videosdkLogs)===null||jr===void 0||jr.pushLogs({logText:"Error changeMode(".concat(F,") | failed"),logType:"ERROR",attributes:{error:lr.t0.message}}),(ln=this._openTelemetry)===null||ln===void 0||ln.completeSpan({span:z,status:2,message:"changeMode(".concat(F,") | failed")});case 59:case"end":return lr.stop()}},X,this,[[2,55]])})),function(X){return pr.apply(this,arguments)})},{key:"enablePeerWebcam",value:(Ii=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return(U=this._openTelemetry)===null||U===void 0||U.traceAutoComplete({spanName:"Enabling peer ".concat(F," Webcam"),status:1}),Pe.debug("enablePeerWebcam()"),H.prev=2,H.next=5,this._protoo.request("enablePeerWebcam",{peerId:F});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error enablePeerWebcam | failed",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.error("enablePeerWebcam() | failed:%o",H.t0);case 11:case"end":return H.stop()}},X,this,[[2,7]])})),function(X){return Ii.apply(this,arguments)})},{key:"disablePeerWebcam",value:(Rd=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return(U=this._openTelemetry)===null||U===void 0||U.traceAutoComplete({spanName:"Disabling peer ".concat(F," Webcam"),status:1}),Pe.debug("disablePeerWebcam()"),H.prev=2,H.next=5,this._protoo.request("disablePeerWebcam",{peerId:F});case 5:H.next=10;break;case 7:H.prev=7,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error disablePeerWebcam | failed",logType:"ERROR",attributes:{error:H.t0.message}});case 10:case"end":return H.stop()}},X,this,[[2,7]])})),function(X){return Rd.apply(this,arguments)})},{key:"getMicStats",value:function(X){var F=this;if(this._micProducer){var U=0;X.onStatsCollected=function(z){var H;F._stats.producerStats||(F._stats.producerStats={}),F._stats.producerStats.audio||(F._stats.producerStats.audio=[]),F._micProducer&&(F._latestStats[(H=F._micProducer)===null||H===void 0?void 0:H.id]=[]),z.audio.forEach(function(re){var se;F._micProducer&&F._latestStats[(se=F._micProducer)===null||se===void 0?void 0:se.id].push(re)}),U%5==0&&F._micProducer!=null&&F._stats.producerStats.audio.push(Ft({timestamp:new Date},F._latestStats[F._micProducer.id]?F._latestStats[F._micProducer.id][0]:{})),U++}}}},{key:"enableMic",value:(Di=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Ee,wt,Ge,gt,ae,ot,Xe,ct,ye,Je,qt,rr,cr,nr,ir,mr,Qt,Ht,xr,Zt,dr,jr,ln,mn,lr,un,Pn,Dn,Br,Or,In,Wt,Mn,It,yr,Wr,en,on,tn,_i,rs,wi,zn,ii,Wi,bi,rn,Ai,Vn,$n,qn,Si,Kn,Vi,Li,Gn,Tn,yn,xn,Rn,Ri,Fr,si,Nr,Sr=this,dt=arguments;return s().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:if(se=dt.length>0&&dt[0]!==void 0?dt[0]:void 0,Ie=dt.length>1&&dt[1]!==void 0?dt[1]:void 0,Ee=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"enableMic() Calling ".concat(se?"With Custom Audio Track":"Without Custom Audio Track "),attributes:{customAudioConfig:se?JSON.stringify(se):"Not Specify Custom Track"},span:Ie||null}),Pe.debug("enableMic()"),this._micEnabled=!0,!this._micProducer){Qe.next=27;break}if(gt=(wt=this._openTelemetry)===null||wt===void 0?void 0:wt.trace({spanName:"Mic Producer found",span:Ee}),se&&((ae=this._openTelemetry)===null||ae===void 0||ae.traceAutoComplete({spanName:"Stopping customAudioTrack",span:Ee,status:1}),se.getTracks().forEach(function(Cr){Cr.stop()})),(Ge=this._openTelemetry)===null||Ge===void 0||Ge.completeSpan({span:gt,status:1,message:"Resuming Mic Producer"}),this._micProducer.resume(),ot=this._micProducer,!this._sendTransport){Qe.next=18;break}return Qe.next=14,this._sendTransport.produce({track:this._micProducer.track,encodings:this._micProducer._appData.encodings,codecOptions:this._micProducer._appData.codecOptions});case 14:this._micProducer=Qe.sent,this._micProducer?(ct=we({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:ot._appData.encodings,codecOptions:ot._appData.codecOptions,instance:this._micProducer}),this._micProducer.track.getConstraints().deviceId&&(this._mic.device=this._mics.get(this._micProducer.track.getConstraints().deviceId)),ke.dispatch(ct),this._eventEmitter.emit(ct.type,ct.payload),(Xe=this._openTelemetry)===null||Xe===void 0||Xe.completeSpan({span:Ee,status:1,message:"Enable Mic Successful"})):(ye=this._openTelemetry)===null||ye===void 0||ye.completeSpan({span:Ee,status:2,message:"Error in enableMic() :: micProducer null"}),Qe.next=21;break;case 18:return(Je=this._videosdkLogs)===null||Je===void 0||Je.pushLogs({logText:ze.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(ze.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),Qe.abrupt("return");case 21:return qt=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"}),this._micProducer.observer.on("pause",function(){qt==null||qt.stop(),Sr._latestStats[Sr._micProducer.id]=[],Sr._metrics.removeExistingProbe(qt)}),this._micProducer.observer.on("close",function(){qt==null||qt.stop(),Sr._latestStats[Sr._micProducer.id]=[],Sr._metrics.removeExistingProbe(qt)}),this.getMicStats(qt),qt.start(),Qe.abrupt("return");case 27:if(!this._mediasoupDevice){Qe.next=36;break}if(this._mediasoupDevice.canProduce("audio")){Qe.next=34;break}return nr=this._deviceInfo.sdkType=="react-native"?ze.q.ERROR_RN_MIC_ACCESS_UNAVAILABLE.message:ze.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message,(rr=this._videosdkLogs)===null||rr===void 0||rr.pushLogs({logText:nr,attributes:{error:"Error in enableMic() :: Microphone access unavailable"},logType:"ERROR",dashboardLog:!0}),Pe.error("enableMic() | cannot produce audio"),(cr=this._openTelemetry)===null||cr===void 0||cr.completeSpan({span:Ee,status:2,message:"Error in enableMic() :: ".concat(nr)}),Qe.abrupt("return");case 34:Qe.next=39;break;case 36:return(ir=this._videosdkLogs)===null||ir===void 0||ir.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(mr=this._openTelemetry)===null||mr===void 0||mr.completeSpan({span:Ee,status:2,message:"Error in enableMic() :: mediasoupDevice is undefined"}),Qe.abrupt("return");case 39:if(Qe.prev=39,this._externalVideo){Qe.next=106;break}return Pe.debug("enableMic() | calling getUserMedia()"),Qe.next=44,this._updateMics(Ee);case 44:if(this._mic.device){Qe.next=47;break}throw new Error("Whoops! No Microphone Found: We couldn't find your microphone. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. Also, ensure you're on a secure website (https://).");case 47:try{se&&(Qt=se.getAudioTracks()[0]).readyState=="ended"&&(Qt=null,lr=ze.q.ERROR_CUSTOM_AUDIO_TRACK_ENDED,(mn=this._videosdkLogs)===null||mn===void 0||mn.pushLogs({logText:lr.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(lr))}catch(Cr){Pn=ze.q.ERROR_INVALID_CUSTOM_AUDIO_TRACK,(un=this._videosdkLogs)===null||un===void 0||un.pushLogs({logText:Pn.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"}}),this._emitError(Pn),console.log("Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(Cr))}if(Qt){Qe.next=104;break}return Or=(Dn=this._openTelemetry)===null||Dn===void 0?void 0:Dn.trace({spanName:"Creating Track",span:Ee}),Qe.prev=50,Qe.next=53,navigator.mediaDevices.getUserMedia({audio:{deviceId:{ideal:this._mic.device.deviceId},channelCount:1,noiseSuppression:!0,echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0}});case 53:In=Qe.sent,Qe.next=102;break;case 56:if(Qe.prev=56,Qe.t0=Qe.catch(50),(Wt=this._openTelemetry)===null||Wt===void 0||Wt.completeSpan({message:"Error in enableMic() :: ".concat(Qe.t0.message),span:Or,status:2}),Qe.t0.name!=="SecurityError"){Qe.next=67;break}yr=ze.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED,Wr=yr.message,this._emitError(yr),(Mn=this._videosdkLogs)===null||Mn===void 0||Mn.pushLogs({logText:Wr,logType:"ERROR",attributes:{error:"Error in enableMic() :: Microphone Permission Denied or Dismissed"},dashboardLog:!0}),(It=this._openTelemetry)===null||It===void 0||It.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(Wr),span:Ee,status:2}),Qe.next=101;break;case 67:if(Qe.t0.name!=="DOMException"){Qe.next=75;break}tn=ze.q.ERROR_RN_MIC_NOT_FOUND,_i=tn.message,this._emitError(tn),(en=this._videosdkLogs)===null||en===void 0||en.pushLogs({logText:_i,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(on=this._openTelemetry)===null||on===void 0||on.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(_i),span:Ee,status:2}),Qe.next=101;break;case 75:if(!(Qe.t0 instanceof DOMException)){Qe.next=98;break}Qe.t1=Qe.t0.name,Qe.next=Qe.t1==="NotAllowedError"?79:Qe.t1==="NotReadableError"?82:Qe.t1==="NotFoundError"?85:92;break;case 79:return rs=this.handleNotAllowedError(Qe.t0,this._openTelemetry,this._videosdkLogs,Ee,"audio"),this._emitError(rs),Qe.abrupt("break",96);case 82:return wi=this.handleNotReadableError(Qe.t0,this._openTelemetry,this._videosdkLogs,Ee,"audio"),this._emitError(wi),Qe.abrupt("break",96);case 85:return zn=ze.q.ERROR_MICROPHONE_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(zn=ze.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS),ii=zn.message,this._emitError(zn),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:ii,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(z=this._openTelemetry)===null||z===void 0||z.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(ii),span:Ee,status:2}),Qe.abrupt("break",96);case 92:return Wi="An error occurred in creating audio track, ".concat(Qe.t0.message),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:Qe.t0.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Wi)},dashboardLog:!0}),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({message:"Error in enableMic() :: ".concat(Wi),span:Ee,status:2}),Qe.abrupt("break",96);case 96:Qe.next=101;break;case 98:Ai="An error occurred in creating audio track, ".concat(Qe.t0.message),(bi=this._videosdkLogs)===null||bi===void 0||bi.pushLogs({logText:Qe.t0.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Ai)},dashboardLog:!0}),(rn=this._openTelemetry)===null||rn===void 0||rn.completeSpan({message:"Error in enableMic() :: ".concat(Ai),span:Ee,status:2});case 101:return Qe.abrupt("return");case 102:Qt=In.getAudioTracks()[0],(Br=this._openTelemetry)===null||Br===void 0||Br.completeSpan({message:"Audio Track Generated",span:Or,status:1});case 104:Qe.next=110;break;case 106:return Qe.next=108,this._getExternalVideoStream();case 108:Vn=Qe.sent,Qt=Vn.getAudioTracks()[0].clone();case 110:if(Ht=(xr=this._openTelemetry)===null||xr===void 0?void 0:xr.trace({spanName:"Generating Producer Configuration",span:Ee}),$n={opusStereo:1,opusDtx:1},se&&(qn=se.encoderConfig?tr.$.audioProfiles[se.encoderConfig]:tr.$.audioProfiles.speech_standard,$n={opusStereo:qn.stereo?1:0,opusFec:qn.fec?1:0,opusDtx:qn.dtx?1:0,opusMaxPlaybackRate:qn.maxPlaybackRate,opusPtime:qn.packetTime}),Kn={encodings:Si=[{networkPriority:"high"}],codecOptions:$n},(Zt=this._openTelemetry)===null||Zt===void 0||Zt.traceAutoComplete({spanName:"Generated AppData",span:Ht,attributes:{appData:JSON.stringify(Kn)},status:1}),(dr=this._openTelemetry)===null||dr===void 0||dr.completeSpan({span:Ht,status:1,message:"Producer Configuration Generated"}),Ht=(jr=this._openTelemetry)===null||jr===void 0?void 0:jr.trace({spanName:"Creating Mic Producer",span:Ee}),(ln=Qt)===null||ln===void 0||ln.addEventListener("ended",function(){console.log("Track Ended Error");try{var Cr,Qr,Yr=Sr._deviceInfo.sdkType=="react-native"?ze.q.ERROR_RN_MIC_TRACK_ENDED:ze.q.ERROR_MICROPHONE_TRACK_ENDED;(Cr=Sr._videosdkLogs)===null||Cr===void 0||Cr.pushLogs({logText:Yr.message,logType:"ERROR",attributes:{error:"Error Track Ended :: ".concat(Yr.message)},dashboardLog:!0}),(Qr=Sr._openTelemetry)===null||Qr===void 0||Qr.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:Ee,message:Yr.message,status:2}),ke.dispatch(Fe({type:"error",text:"Microphone disconnected!"})),Sr.disableMic(!0,Ee).catch(function(){})}catch(Ni){console.error(Ni)}}),!this._sendTransport){Qe.next=126;break}return Qe.next=123,this._sendTransport.produce({track:Qt,encodings:Si,codecOptions:$n,appData:Kn});case 123:this._micProducer=Qe.sent,Qe.next=129;break;case 126:return(Vi=this._videosdkLogs)===null||Vi===void 0||Vi.pushLogs({logText:ze.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(ze.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),Qe.abrupt("return");case 129:this._micProducer?(Qt.getConstraints().deviceId&&(this._mic.device=this._mics.get(Qt.getConstraints().deviceId)),Tn=we({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:Si,codecOptions:$n,instance:this._micProducer}),ke.dispatch(Tn),this._eventEmitter.emit(Tn.type,Tn.payload),(yn=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"})).start(),this.getMicStats(yn),this._micProducer.on("transportclose",function(){var Cr,Qr=be(Sr._micProducer.id);ke.dispatch(Qr),Sr._eventEmitter.emit(Qr.type,Qr.payload),(Cr=Sr._micProducer)===null||Cr===void 0||Cr.close(),Sr._micProducer=null}),this._micProducer.observer.on("pause",function(){yn==null||yn.stop(),Sr._latestStats[Sr._micProducer.id]=[],Sr._metrics.removeExistingProbe(yn)}),this._micProducer.observer.on("close",function(){yn==null||yn.stop(),Sr._latestStats[Sr._micProducer.id]=[],Sr._metrics.removeExistingProbe(yn)}),this._micProducer.on("trackended",function(){var Cr,Qr,Yr=Sr._deviceInfo.sdkType=="react-native"?ze.q.ERROR_RN_MIC_TRACK_ENDED:ze.q.ERROR_MICROPHONE_TRACK_ENDED;(Cr=Sr._videosdkLogs)===null||Cr===void 0||Cr.pushLogs({logText:Yr.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Yr.message)},dashboardLog:!0}),(Qr=Sr._openTelemetry)===null||Qr===void 0||Qr.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:Ee,message:Yr.message,status:2}),ke.dispatch(Fe({type:"error",text:"Microphone disconnected!"})),Sr.disableMic(!0,Ee).catch(function(){})}),(Li=this._openTelemetry)===null||Li===void 0||Li.completeSpan({span:Ht,status:1,message:"Mic Producer Created"}),(Gn=this._openTelemetry)===null||Gn===void 0||Gn.completeSpan({span:Ee,status:1,message:"Enable Mic Successful"})):((xn=this._videosdkLogs)===null||xn===void 0||xn.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(Rn=this._openTelemetry)===null||Rn===void 0||Rn.completeSpan({span:Ht,status:2,message:"Error in enableMic() :: micProducer null"}),(Ri=this._openTelemetry)===null||Ri===void 0||Ri.completeSpan({span:Ee,status:2,message:"Error in enableMic() :: micProducer null"})),Qe.next=142;break;case 132:return Qe.prev=132,Qe.t2=Qe.catch(39),(Fr=this._openTelemetry)===null||Fr===void 0||Fr.completeSpan({span:Ht,status:2,message:"Error in enableMic() :: occurred in creating mic producer, ".concat(Qe.t2.message)}),(si=this._openTelemetry)===null||si===void 0||si.completeSpan({span:Ee,status:2,message:"Error in enableMic :: ".concat(Qe.t2.message)}),(Nr=this._videosdkLogs)===null||Nr===void 0||Nr.pushLogs({logText:Qe.t2.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Qe.t2.message)},dashboardLog:!0}),Pe.error("enableMic() | failed:%o",Qe.t2),ke.dispatch(Fe({type:"error",text:"Error enabling microphone: ".concat(Qe.t2)})),Qe.next=141,this._protoo.request("produceError",{mediaType:"audio",message:Qe.t2.message});case 141:Qt&&Qt.stop();case 142:case"end":return Qe.stop()}},X,this,[[39,132],[50,56]])})),function(){return Di.apply(this,arguments)})},{key:"disableMic",value:(ds=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Ee,wt,Ge,gt,ae,ot,Xe,ct,ye,Je,qt,rr,cr,nr,ir,mr,Qt,Ht,xr=arguments;return s().wrap(function(Zt){for(;;)switch(Zt.prev=Zt.next){case 0:if(z=xr.length>0&&xr[0]!==void 0&&xr[0],H=xr.length>1&&xr[1]!==void 0?xr[1]:void 0,Pe.debug("disableMic()"),re=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"disableMic() Calling",status:1,span:H||null}),this._micProducer){Zt.next=8;break}return(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:re,status:2,message:"Error in disableMic() :: Mic Producer Not found"}),(Ie=this._videosdkLogs)===null||Ie===void 0||Ie.pushLogs({logText:"Attempted to call disableMic() multiple times",attributes:{error:"Error in disableMic() :: Microphone is already disabled"},logType:"ERROR",dashboardLog:!0}),Zt.abrupt("return");case 8:if(Ee=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"Closing Mic Producer",span:re,status:1}),this._micEnabled=!1,!this._micProducer||z){Zt.next=32;break}return ae=(wt=this._openTelemetry)===null||wt===void 0?void 0:wt.trace({spanName:"Pausing Mic Producer",span:Ee,status:1}),this._micProducer.pause(),ot=be(this._micProducer.id),(Ge=this._openTelemetry)===null||Ge===void 0||Ge.completeSpan({span:ae,status:1,message:"Pause Mic Successfully"}),ke.dispatch(ot),this._eventEmitter.emit(ot.type,ot.payload),Zt.prev=17,Zt.next=20,this._protoo.request("closeProducer",{producerId:this._micProducer.id});case 20:(Xe=this._openTelemetry)===null||Xe===void 0||Xe.completeSpan({span:Ee,status:1,message:"Requested Server to Close Producer"}),Zt.next=30;break;case 23:Zt.prev=23,Zt.t0=Zt.catch(17),ke.dispatch(Fe({type:"error",text:"Error closing server-side mic Producer: ".concat(Zt.t0)})),qt="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(z),(ct=this._openTelemetry)===null||ct===void 0||ct.completeSpan({span:Ee,status:2,message:"Error in disableMic() :: ".concat(Zt.t0.message)}),(ye=this._openTelemetry)===null||ye===void 0||ye.completeSpan({span:re,status:2,message:qt}),(Je=this._videosdkLogs)===null||Je===void 0||Je.pushLogs({logText:qt,logType:"ERROR",attributes:{error:Zt.t0.message},dashboardLog:!0});case 30:return(gt=this._openTelemetry)===null||gt===void 0||gt.completeSpan({span:re,status:1,message:"Mic Disabled Successfully"}),Zt.abrupt("return");case 32:return this._micProducer.close(),rr=be(this._micProducer.id),ke.dispatch(rr),this._eventEmitter.emit(rr.type,rr.payload),Zt.prev=36,Zt.next=39,this._protoo.request("closeProducer",{producerId:this._micProducer.id});case 39:(cr=this._openTelemetry)===null||cr===void 0||cr.completeSpan({span:Ee,status:1,message:"Requested Server to Close Producer"}),(nr=this._openTelemetry)===null||nr===void 0||nr.completeSpan({span:re,status:1,message:"Mic Disabled Successfully"}),Zt.next=50;break;case 43:Zt.prev=43,Zt.t1=Zt.catch(36),ke.dispatch(Fe({type:"error",text:"Error closing server-side mic Producer: ".concat(Zt.t1)})),Ht="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(z),(ir=this._openTelemetry)===null||ir===void 0||ir.completeSpan({span:Ee,status:2,message:"Error in disableMic() :: ".concat(Zt.t1.message)}),(mr=this._openTelemetry)===null||mr===void 0||mr.completeSpan({span:re,status:2,message:Ht}),(Qt=this._videosdkLogs)===null||Qt===void 0||Qt.pushLogs({logText:Ht,logType:"ERROR",attributes:{error:Zt.t1.message},dashboardLog:!0});case 50:this._micProducer=null;case 51:case"end":return Zt.stop()}},X,this,[[17,23],[36,43]])})),function(){return ds.apply(this,arguments)})},{key:"muteMic",value:(Ml=(0,h.A)(s().mark(function X(){var F;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return Pe.debug("muteMic()"),this._micEnabled=!1,this._micProducer.pause(),U.prev=3,U.next=6,this._protoo.request("pauseProducer",{producerId:this._micProducer.id});case 6:ke.dispatch({type:"SET_PRODUCER_PAUSED",payload:{producerId:this._micProducer.id}}),U.next=14;break;case 9:U.prev=9,U.t0=U.catch(3),Pe.error("muteMic() | failed: %o",U.t0),(F=this._videosdkLogs)===null||F===void 0||F.pushLogs({logText:"Error pausing server-side mic Producer",logType:"ERROR",attributes:{error:U.t0.message}}),ke.dispatch(Fe({type:"error",text:"Error pausing server-side mic Producer: ".concat(U.t0)}));case 14:case"end":return U.stop()}},X,this,[[3,9]])})),function(){return Ml.apply(this,arguments)})},{key:"unmuteMic",value:(Ys=(0,h.A)(s().mark(function X(){var F;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return Pe.debug("unmuteMic()"),this._micEnabled=!0,this._micProducer.resume(),U.prev=3,U.next=6,this._protoo.request("resumeProducer",{producerId:this._micProducer.id});case 6:ke.dispatch({type:"SET_PRODUCER_RESUMED",payload:{producerId:this._micProducer.id}}),U.next=14;break;case 9:U.prev=9,U.t0=U.catch(3),Pe.error("unmuteMic() | failed: %o",U.t0),(F=this._videosdkLogs)===null||F===void 0||F.pushLogs({logText:"Error resuming server-side mic Producer",logType:"ERROR",attributes:{error:U.t0.message}}),ke.dispatch(Fe({type:"error",text:"Error resuming server-side mic Producer: ".concat(U.t0)}));case 14:case"end":return U.stop()}},X,this,[[3,9]])})),function(){return Ys.apply(this,arguments)})},{key:"enableWebcam",value:(Sd=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Ee,wt,Ge,gt,ae,ot,Xe,ct,ye,Je,qt,rr,cr,nr,ir,mr,Qt,Ht,xr,Zt,dr,jr,ln,mn,lr,un,Pn,Dn,Br,Or,In,Wt,Mn,It,yr,Wr,en,on,tn,_i,rs,wi,zn,ii,Wi,bi,rn,Ai,Vn,$n,qn,Si,Kn,Vi,Li,Gn,Tn,yn,xn,Rn,Ri,Fr,si,Nr=this,Sr=arguments;return s().wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:if(se=Sr.length>0&&Sr[0]!==void 0?Sr[0]:void 0,Ie=Sr.length>1&&Sr[1]!==void 0?Sr[1]:void 0,Ee=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"enableWebcam() Calling ".concat(se?"With Custom Video Track":"Without Custom Video Track "),attributes:{customVideoConfig:se?JSON.stringify(se):"Not Specify Custom Track"},span:Ie||null}),Pe.debug("enableWebcam()"),this._webcamEnabled=!0,!this._webcamProducer){dt.next=9;break}return(wt=this._openTelemetry)===null||wt===void 0||wt.completeSpan({span:Ee,status:2,message:"Error in enableWebcam() :: Webcam Producer found"}),(Ge=this._videosdkLogs)===null||Ge===void 0||Ge.pushLogs({logText:"Attempted to call enableWebcam() multiple times",attributes:{error:"Error in enableWebcam() :: Webcam is already enabled"},logType:"ERROR",dashboardLog:!0}),dt.abrupt("return");case 9:if(!this._mediasoupDevice){dt.next=18;break}if(this._mediasoupDevice.canProduce("video")){dt.next=16;break}return ot=this._deviceInfo.sdkType=="react-native"?ze.q.ERROR_RN_CAMERA_ACCESS_UNAVAILABLE.message:ze.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message,(gt=this._openTelemetry)===null||gt===void 0||gt.completeSpan({span:Ee,status:2,message:"Error in enableWebcam() :: ".concat(ot)}),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:ot,attributes:{error:"Error in enableWebcam() :: Camera access unavailable"},logType:"ERROR",dashboardLog:!0}),Pe.error("enableWebcam() | cannot produce video"),dt.abrupt("return");case 16:dt.next=21;break;case 18:return(Xe=this._videosdkLogs)===null||Xe===void 0||Xe.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."}}),(ct=this._openTelemetry)===null||ct===void 0||ct.completeSpan({span:Ee,status:2,message:"Error in enableWebcam() :: mediasoupDevice is undefined"}),dt.abrupt("return");case 21:if(ke.dispatch(vt(!0)),qt=this._webcam.resolution,dt.prev=23,this._externalVideo){dt.next=100;break}return dt.next=27,this._updateWebcams(Ee);case 27:if(Je=this._webcam.device){dt.next=31;break}throw new Error("Whoops! No Webcam Found: We couldn't find your camera. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. If you need help, check out troubleshooter at https://test.8x8.vc/. Also, ensure you're on a secure website (https://).");case 31:Pe.debug("enableWebcam() | calling getUserMedia()");try{se&&(ye=se.getVideoTracks()[0]).readyState=="ended"&&(ye=null,Qt=ze.q.ERROR_CUSTOM_VIDEO_TRACK_ENDED,(mr=this._videosdkLogs)===null||mr===void 0||mr.pushLogs({logText:Qt.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(Qt))}catch(Qe){xr=ze.q.ERROR_INVALID_CUSTOM_VIDEO_TRACK,(Ht=this._videosdkLogs)===null||Ht===void 0||Ht.pushLogs({logText:xr.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"}}),this._emitError(xr),console.log("Invalid Custom Video Track Passed. Reverting to default Error: ".concat(Qe))}if(ye){dt.next=98;break}if(dr=(Zt=this._openTelemetry)===null||Zt===void 0?void 0:Zt.trace({spanName:"Creating Track",span:Ee}),jr=null,dt.prev=36,this._webcam.resolution!="hd"){dt.next=44;break}return dt.next=40,this.createCameraVideoTrack({cameraId:Je.deviceId,encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast,facingMode:Je.facing});case 40:se=dt.sent,jr=JSON.stringify({encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast}),dt.next=48;break;case 44:return dt.next=46,this.createCameraVideoTrack({cameraId:Je.deviceId,encoderConfig:"h540p_w960p",multiStream:this._useSimulcast,facingMode:Je.facing});case 46:se=dt.sent,jr=JSON.stringify({encoderConfig:"h540p_w960p",multiStream:this._useSimulcast});case 48:ye=se.getVideoTracks()[0],(ln=this._openTelemetry)===null||ln===void 0||ln.completeSpan({message:"Video Track Generated",span:dr,attributes:{customVideoTrackConfig:jr},status:1}),dt.next=98;break;case 52:if(dt.prev=52,dt.t0=dt.catch(36),(mn=this._openTelemetry)===null||mn===void 0||mn.completeSpan({message:"Error in enableWebcam() :: ".concat(dt.t0.message),span:dr,status:2}),dt.t0.name!=="SecurityError"){dt.next=63;break}Pn=ze.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED,Dn=Pn.message,this._emitError(Pn),(lr=this._videosdkLogs)===null||lr===void 0||lr.pushLogs({logText:Dn,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: Camera Permission Denied or Dismissed"},dashboardLog:!0}),(un=this._openTelemetry)===null||un===void 0||un.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(Dn),span:enableMicSpan,status:2}),dt.next=97;break;case 63:if(dt.t0.name!=="DOMException"){dt.next=71;break}In=ze.q.ERROR_RN_CAMERA_NOT_FOUND,Wt=In.message,this._emitError(In),(Br=this._videosdkLogs)===null||Br===void 0||Br.pushLogs({logText:Wt,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Camra Device Found"},dashboardLog:!0}),(Or=this._openTelemetry)===null||Or===void 0||Or.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(Wt),span:enableMicSpan,status:2}),dt.next=97;break;case 71:if(!(dt.t0 instanceof DOMException)){dt.next=94;break}dt.t1=dt.t0.name,dt.next=dt.t1==="NotAllowedError"?75:dt.t1==="NotReadableError"?78:dt.t1==="NotFoundError"?81:88;break;case 75:return Mn=this.handleNotAllowedError(dt.t0,this._openTelemetry,this._videosdkLogs,Ee,"video"),this._emitError(Mn),dt.abrupt("break",92);case 78:return It=this.handleNotReadableError(dt.t0,this._openTelemetry,this._videosdkLogs,Ee,"video"),this._emitError(It),dt.abrupt("break",92);case 81:return yr=ze.q.ERROR_CAMERA_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(yr=ze.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS),Wr=yr.message,this._emitError(yr),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:Wr,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Webcam Device Found"},dashboardLog:!0}),(z=this._openTelemetry)===null||z===void 0||z.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(Wr),span:Ee,status:2}),dt.abrupt("break",92);case 88:return en="An error occurred in creating video track, ".concat(dt.t0.message),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:dt.t0.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(en)},dashboardLog:!0}),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({message:"Error in enableWebcam() :: ".concat(en),span:Ee,status:2}),dt.abrupt("break",92);case 92:dt.next=97;break;case 94:_i="An error occurred in creating video track, ".concat(dt.t0.message),(on=this._videosdkLogs)===null||on===void 0||on.pushLogs({logText:dt.t0.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(_i)},dashboardLog:!0}),(tn=this._openTelemetry)===null||tn===void 0||tn.completeSpan({message:"Error in enableWebcam() :: ".concat(_i),span:Ee,status:2});case 97:return dt.abrupt("return");case 98:dt.next=105;break;case 100:return Je={label:"external video"},dt.next=103,this._getExternalVideoStream();case 103:rs=dt.sent,ye=rs.getVideoTracks()[0].clone();case 105:if(wi=(rr=this._openTelemetry)===null||rr===void 0?void 0:rr.trace({spanName:"Generating Producer Configuration",span:Ee}),Wi={videoGoogleStartBitrate:1e3},!this._forceH264){dt.next=114;break}if(ii=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Qe){return Qe.mimeType.toLowerCase()==="video/h264"})){dt.next=112;break}throw new Error("The desired H.264 codec and configuration are not supported");case 112:dt.next=119;break;case 114:if(!this._forceVP9){dt.next=119;break}if(ii=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Qe){return Qe.mimeType.toLowerCase()==="video/vp9"})){dt.next=119;break}throw new Error("The desired VP9 codec and configuration are not supported");case 119:ye?(bi=ye.getConstraints(),rn=this._deviceInfo.sdkType=="react-native"&&this._deviceInfo.platform=="ios",zn=Lt(!1,bi.width,bi.height,{simulcast:se.multiStream},rn)):this._useSimulcast&&(Ai=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Qe){return Qe.kind==="video"}),zn=this._forceVP9&&ii||Ai.mimeType.toLowerCase()==="video/vp9"?cn:an[this._webcam.resolution]),Vn={};try{Vn={encodings:zn,width:se?($n=ye)===null||$n===void 0?void 0:$n.getConstraints().width:Er[qt].width.ideal,height:se?(qn=ye)===null||qn===void 0?void 0:qn.getConstraints().height:Er[qt].height.ideal}}catch(Qe){(Si=this._videosdkLogs)===null||Si===void 0||Si.pushLogs({logText:Qe.message,logType:"INFO",attributes:{error:"In enableWebcam() :: ".concat(Qe.message)},dashboardLog:!0}),console.log(Qe)}if((cr=this._openTelemetry)===null||cr===void 0||cr.traceAutoComplete({spanName:"Track Generated with height ".concat(Vn.height," and width ").concat(Vn.width," with multiStream ").concat(this._useSimulcast),attributes:{appData:JSON.stringify(Vn)},span:Ee,status:1}),(nr=this._openTelemetry)===null||nr===void 0||nr.completeSpan({span:wi,status:1,message:"Producer Configuration Generated"}),wi=(ir=this._openTelemetry)===null||ir===void 0?void 0:ir.trace({spanName:"Creating Webcam Producer",span:Ee}),!this._sendTransport){dt.next=131;break}return dt.next=128,this._sendTransport.produce({track:ye,encodings:zn,codecOptions:Wi,codec:ii,appData:Vn});case 128:this._webcamProducer=dt.sent,dt.next=134;break;case 131:return(Kn=this._videosdkLogs)===null||Kn===void 0||Kn.pushLogs({logText:ze.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableWebcam() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(ze.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),dt.abrupt("return");case 134:ye.getConstraints().deviceId&&(this._webcam.device=this._webcams.get(ye.getConstraints().deviceId)),this._webcamProducer?(Gn=we({id:this._webcamProducer.id,deviceLabel:Je.label,type:this._getWebcamType(Je),paused:this._webcamProducer.paused,track:this._webcamProducer.track,rtpParameters:this._webcamProducer.rtpParameters,codec:this._webcamProducer.rtpParameters.codecs[0].mimeType.split("/")[1],instance:this._webcamProducer}),ke.dispatch(Gn),this._eventEmitter.emit(Gn.type,Gn.payload),Tn=0,(yn=this._metrics.addNewProbe(this._webcamProducer,"producer")).onStatsCollected=function(Qe){try{var Cr;Nr._stats.producerStats||(Nr._stats.producerStats={}),Nr._stats.producerStats.video||(Nr._stats.producerStats.video=[]),Nr._webcamProducer&&(Nr._latestStats[(Cr=Nr._webcamProducer)===null||Cr===void 0?void 0:Cr.id]=[]),Qe.video.forEach(function(Yr){var Ni;Nr._latestStats[(Ni=Nr._webcamProducer)===null||Ni===void 0?void 0:Ni.id].push(Yr)}),Tn%5==0&&Nr._webcamProducer!=null&&Nr._stats.producerStats.video.push({timestamp:new Date,stats:Nr._latestStats[Nr._webcamProducer.id]}),Tn++}catch(Yr){var Qr;(Qr=Nr._videosdkLogs)===null||Qr===void 0||Qr.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:Yr.message}}),console.log("PRODUCER ERROR",Yr)}},yn.start(),this._webcamProducer.observer.on("close",function(){yn.stop(),Nr._metrics.removeExistingProbe(yn)}),this._webcamProducer.on("transportclose",function(){var Qe,Cr=be(Nr._webcamProducer.id);ke.dispatch(Cr),Nr._eventEmitter.emit(Cr.type,Cr.payload),(Qe=Nr._webcamProducer)===null||Qe===void 0||Qe.close(),Nr._webcamProducer=null}),this._webcamProducer.on("trackended",function(){var Qe,Cr,Qr=Nr._deviceInfo.sdkType=="react-native"?ze.q.ERROR_RN_CAMERA_TRACK_ENDED:ze.q.ERROR_WEBCAM_TRACK_ENDED;(Qe=Nr._videosdkLogs)===null||Qe===void 0||Qe.pushLogs({logText:Qr.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(Qr.message)},dashboardLog:!0}),(Cr=Nr._openTelemetry)===null||Cr===void 0||Cr.traceAutoComplete({spanName:"this._webcamProducer trackended or Webcam disconnected!",span:Ee,message:Qr.message,status:2}),ke.dispatch(Fe({type:"error",text:"Webcam disconnected!"})),Nr.disableWebcam(Ee).catch(function(){})}),(Vi=this._openTelemetry)===null||Vi===void 0||Vi.completeSpan({span:wi,status:1,message:"Webcam Producer Created"}),(Li=this._openTelemetry)===null||Li===void 0||Li.completeSpan({span:Ee,status:1,message:"Enable Webcam Successful"})):((xn=this._videosdkLogs)===null||xn===void 0||xn.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."},dashboardLog:!0}),(Rn=this._openTelemetry)===null||Rn===void 0||Rn.completeSpan({span:wi,status:2,message:"Error in enableWebcam() :: webcamProducer null"}),(Ri=this._openTelemetry)===null||Ri===void 0||Ri.completeSpan({span:Ee,status:2,message:"Error in enableWebcam() :: webcamProducer null"})),dt.next=146;break;case 138:return dt.prev=138,dt.t2=dt.catch(23),(Fr=this._videosdkLogs)===null||Fr===void 0||Fr.pushLogs({logText:dt.t2.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(dt.t2.message)},dashboardLog:!0}),(si=this._openTelemetry)===null||si===void 0||si.completeSpan({span:Ee,status:2,message:"Error in enableWebcam() :: ".concat(dt.t2.message)}),ke.dispatch(Fe({type:"error",text:"Error enabling webcam: ".concat(dt.t2)})),dt.next=145,this._protoo.request("produceError",{mediaType:"video",message:dt.t2.message});case 145:ye&&ye.stop();case 146:ke.dispatch(vt(!1));case 147:case"end":return dt.stop()}},X,this,[[23,138],[36,52]])})),function(){return Sd.apply(this,arguments)})},{key:"handleNotAllowedError",value:function(X,F,U,z,H){var re={};return re=X.message==="Permission denied"||X.message==="Permission dismissed"?H==="video"?ze.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:ze.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:X.message.includes("The request is not allowed by the user agent")?H==="video"?ze.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:ze.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:X.message==="Permission denied by system"?H==="video"?ze.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:ze.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:H==="video"?ze.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:ze.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED,U.pushLogs({logText:re.message,logType:"ERROR",attributes:{error:"Error in ".concat(H==="video"?"enableWebcam()":"enableMic()"," :: ").concat(X.message)},dashboardLog:!0}),F.completeSpan({message:H==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(re.message):"Error in enableMic() :: occurred in creating audio track, ".concat(re.message),span:z,status:2}),re}},{key:"handleNotReadableError",value:function(X,F,U,z,H){var re={};return re=X.message==="Device in use"?H==="video"?ze.q.ERROR_CAMERA_IN_USE:ze.q.ERROR_MICROPHONE_IN_USE:H==="video"?ze.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:ze.q.ERROR_MICROPHONE_IN_USE,U.pushLogs({logText:re.message,logType:"ERROR",attributes:{error:"Error in ".concat(H==="video"?"enableWebcam()":"enableMic()"," :: ").concat(X.message)},dashboardLog:!0}),F.completeSpan({message:H==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(re.message):"Error in enableMic() :: occurred in creating audio track, ".concat(re.message),span:z,status:2}),re}},{key:"createCameraVideoTrack",value:(bd=(0,h.A)(s().mark(function X(F){var U,z,H,re,se,Ie,Ee,wt,Ge,gt,ae,ot,Xe;return s().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:return U=F.cameraId,z=U===void 0?void 0:U,H=F.encoderConfig,re=H===void 0?void 0:H,se=F.facingMode,Ie=se===void 0?void 0:se,Ee=F.optimizationMode,wt=Ee===void 0?void 0:Ee,Ge=F.multiStream,gt=Ge===void 0||Ge,ae=re?tr.$.videoProfiles[re]:tr.$.videoProfiles.h360p_w640p,ot={video:{deviceId:z||void 0,facingMode:Ie||void 0,width:ae.width,height:ae.height,frameRate:ae.frameRate}},ct.next=5,(0,Ke.lp)(ot);case 5:return Xe=ct.sent,wt&&(Xe.contentHint=wt),Xe.encoderConfig=re||"h360p_w640p",Xe.contentHint=wt||"",Xe.multiStream=gt,Xe.cameraId=z,ct.abrupt("return",Xe);case 12:case"end":return ct.stop()}},X)})),function(X){return bd.apply(this,arguments)})},{key:"disableWebcam",value:(wd=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Ee,wt,Ge,gt,ae,ot,Xe=arguments;return s().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:if(z=Xe.length>0&&Xe[0]!==void 0?Xe[0]:void 0,H=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"disableWebcam() Calling",status:1,span:z||null}),Pe.debug("disableWebcam()"),this._webcamEnabled=!1,this._webcamProducer){ct.next=8;break}return(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:H,status:2,message:"Error in disableWebcam() :: Webcam Producer Not found"}),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Attempted to call disableWebcam() multiple times",attributes:{error:"Error in disableWebcam() :: Webcam is already disabled"},logType:"ERROR",dashboardLog:!0}),ct.abrupt("return");case 8:return Ie=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"Closing Webcam Producer",span:H,status:1}),this._webcamProducer.close(),Ee=be(this._webcamProducer.id),ke.dispatch(Ee),this._eventEmitter.emit(Ee.type,Ee.payload),ct.prev=13,ct.next=16,this._protoo.request("closeProducer",{producerId:this._webcamProducer.id});case 16:(wt=this._openTelemetry)===null||wt===void 0||wt.completeSpan({span:Ie,status:1,message:"Requested Server to Close Producer"}),this._webcamProducer=null,(Ge=this._openTelemetry)===null||Ge===void 0||Ge.completeSpan({span:H,status:1,message:"Webcam Disabled Successfully"}),ct.next=27;break;case 21:ct.prev=21,ct.t0=ct.catch(13),(gt=this._videosdkLogs)===null||gt===void 0||gt.pushLogs({logText:"Error in disableWebcam() :: Failed to close server-side webcam producer",logType:"ERROR",attributes:{error:ct.t0.message},dashboardLog:!0}),(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:Ie,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(ct.t0)}),(ot=this._openTelemetry)===null||ot===void 0||ot.completeSpan({span:H,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(ct.t0)}),ke.dispatch(Fe({type:"error",text:"Error closing server-side webcam Producer: ".concat(ct.t0)}));case 27:case"end":return ct.stop()}},X,this,[[13,21]])})),function(){return wd.apply(this,arguments)})},{key:"getMics",value:(_d=(0,h.A)(s().mark(function X(){var F,U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return F=[],z.prev=1,z.next=4,this._updateMics();case 4:this._mics.forEach(function(H,re){F.push({deviceId:re,label:H.label})}),z.next=11;break;case 7:z.prev=7,z.t0=z.catch(1),Pe.error("getMics() | Error",z.t0),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:z.t0.message,logType:"ERROR",attributes:{error:"Error in getMics() :: Not able to get Mic List"},dashboardLog:!0});case 11:return z.abrupt("return",F);case 12:case"end":return z.stop()}},X,this,[[1,7]])})),function(){return _d.apply(this,arguments)})},{key:"changeMic",value:(yd=(0,h.A)(s().mark(function X(F){var U,z,H,re,se,Ie,Ee,wt,Ge,gt,ae,ot,Xe,ct;return s().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(z=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"changeMic() Calling"}),ye.prev=1,(0,_.A)(F)!="object"){ye.next=9;break}return ye.next=5,this.disableMic(!0,z);case 5:return ye.next=7,this.enableMic(F,z);case 7:ye.next=27;break;case 9:return Ie=F,ye.next=12,this._updateMics();case 12:if(Ee=Array.from(this._mics.keys()),wt=Ee.length,Ge=this._mic.device?this._mic.device.deviceId:void 0,Ie!=null&&Ie!=null?gt=Ee.indexOf(Ie):(gt=Ee.indexOf(Ge))<wt-1?gt++:gt=0,this._mic.device=this._mics.get(Ee[gt]),ae=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:"Getting Selected Mic",span:z,attributes:{selectedWebcam:this._mic.device?JSON.stringify(this._mic.device):"No Mic devices"}}),this._mic.device){ye.next=21;break}throw(ot=this._videosdkLogs)===null||ot===void 0||ot.pushLogs({logText:"Error changeMic : No mic Found",logType:"ERROR"}),new Error("No mic Found");case 21:return ye.next=23,this.disableMic(!0,z);case 23:return ye.next=25,this.enableMic(void 0,z);case 25:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"Done"}),(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:z,status:1,message:"changeMic() Ending"});case 27:ye.next=33;break;case 29:ye.prev=29,ye.t0=ye.catch(1),(Xe=this._openTelemetry)===null||Xe===void 0||Xe.completeSpan({span:z,status:2,message:"changeMic() | Error ".concat(ye.t0)}),(ct=this._videosdkLogs)===null||ct===void 0||ct.pushLogs({logText:"Error changeMic() | Error",logType:"ERROR",attributes:{error:ye.t0.message}});case 33:case"end":return ye.stop()}},X,this,[[1,29]])})),function(X){return yd.apply(this,arguments)})},{key:"getWebcams",value:(Il=(0,h.A)(s().mark(function X(){var F,U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return F=[],z.prev=1,z.next=4,this._updateWebcams();case 4:this._webcams.forEach(function(H,re){F.push({deviceId:re,label:H.label,facingMode:H.facing||"environment"})}),z.next=11;break;case 7:z.prev=7,z.t0=z.catch(1),Pe.error("getWebcams() | failed %o",z.t0),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:z.t0.message,logType:"ERROR",attributes:{error:"Error in getWebcams() :: Not able to get Webcam List"},dashboardLog:!0});case 11:return z.abrupt("return",F);case 12:case"end":return z.stop()}},X,this,[[1,7]])})),function(){return Il.apply(this,arguments)})},{key:"replaceWebcamStream",value:(vd=(0,h.A)(s().mark(function X(F){var U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!this._webcamProducer){z.next=7;break}return U=F.getVideoTracks()[0],z.next=4,this._webcamProducer.replaceTrack({track:U});case 4:this._eventEmitter.emit("UPDATE_PRODUCER",{producer:this._webcamProducer}),z.next=11;break;case 7:return z.next=9,this.disableWebcam();case 9:return z.next=11,this.enableWebcam(F);case 11:case"end":return z.stop()}},X,this)})),function(X){return vd.apply(this,arguments)})},{key:"changeWebcam",value:(Fo=(0,h.A)(s().mark(function X(F){var U,z,H,re,se,Ie,Ee,wt,Ge,gt,ae,ot,Xe,ct;return s().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(z=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"changeWebcam() Calling"}),ke.dispatch(vt(!0)),(0,_.A)(F)!=="object"){ye.next=17;break}return ye.prev=3,ye.next=6,this.disableWebcam(z);case 6:return ye.next=8,this.enableWebcam(F,z);case 8:ye.next=15;break;case 10:ye.prev=10,ye.t0=ye.catch(3),Pe.error("changeWebcam() | failed: %o",ye.t0),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(F),error:ye.t0.message}}),ke.dispatch(Fe({type:"error",text:"Could not change webcam: ".concat(ye.t0)}));case 15:ye.next=46;break;case 17:return ye.prev=17,ye.next=20,this._updateWebcams(z);case 20:if(Ee=Array.from(this._webcams.keys()),wt=Ee.length,Ge=this._webcam.device?this._webcam.device.deviceId:void 0,F!=null&&F!=null?gt=Ee.indexOf(F):(gt=Ee.indexOf(Ge))<wt-1?gt++:gt=0,this._webcam.device=this._webcams.get(Ee[gt]),Pe.debug("changeWebcam() | new selected webcam [device:%o]",this._webcam.device),this._webcam.resolution=this._webcam.resolution||"hd",ae=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"Getting Selected Webcam",span:z,attributes:{selectedWebcam:this._webcam.device?JSON.stringify(this._webcam.device):"No webcam devices"}}),this._webcam.device){ye.next=31;break}throw(ot=this._videosdkLogs)===null||ot===void 0||ot.pushLogs({logText:"Error changeWebcam : No webcam Found",logType:"ERROR"}),new Error("no webcam devices");case 31:return ye.next=33,this.disableWebcam(z);case 33:return ye.next=35,this.enableWebcam(void 0,z);case 35:return(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:ae,status:1,message:"Done"}),(Ie=this._openTelemetry)===null||Ie===void 0||Ie.completeSpan({span:z,status:1,message:"changeWebcam() Ending"}),ye.abrupt("return");case 40:ye.prev=40,ye.t1=ye.catch(17),Pe.error("changeWebcam() | failed: %o",ye.t1),(Xe=this._videosdkLogs)===null||Xe===void 0||Xe.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(F),error:ye.t1.message}}),(ct=this._openTelemetry)===null||ct===void 0||ct.completeSpan({span:z,status:2,message:"Could not change webcam ".concat(ye.t1)}),ke.dispatch(Fe({type:"error",text:"Could not change webcam: ".concat(ye.t1)}));case 46:ke.dispatch(vt(!1));case 47:case"end":return ye.stop()}},X,this,[[3,10],[17,40]])})),function(X){return Fo.apply(this,arguments)})},{key:"changeWebcamResolution",value:(gd=(0,h.A)(s().mark(function X(){var F,U,z,H;return s().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:Pe.debug("changeWebcamResolution()"),ke.dispatch(vt(!0)),re.prev=2,re.t0=this._webcam.resolution,re.next=re.t0==="qvga"?6:re.t0==="vga"?8:re.t0==="hd"?10:12;break;case 6:return this._webcam.resolution="vga",re.abrupt("break",13);case 8:return this._webcam.resolution="hd",re.abrupt("break",13);case 10:return this._webcam.resolution="qvga",re.abrupt("break",13);case 12:this._webcam.resolution="hd";case 13:return Pe.debug("changeWebcamResolution() | calling getUserMedia()"),re.prev=14,re.next=17,navigator.mediaDevices.getUserMedia({video:Ft({deviceId:{exact:this._webcam.device.deviceId}},Er[this._webcam.resolution])});case 17:F=re.sent,re.next=25;break;case 20:return re.prev=20,re.t1=re.catch(14),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error in getUserMedia for changeWebcamResolution",logType:"ERROR",attributes:{error:JSON.stringify(re.t1)}}),re.t1.message==="Permission denied"||re.t1.name==="NotAllowedError"?this._emitError(ze.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED):this._emitError(ze.q.ERROR_GET_VIDEO_MEDIA),re.abrupt("return");case 25:return z=F.getVideoTracks()[0],re.next=28,this._webcamProducer.replaceTrack({track:z});case 28:ke.dispatch(lt(this._webcamProducer.id,z)),re.next=36;break;case 31:re.prev=31,re.t2=re.catch(2),Pe.error("changeWebcamResolution() | failed: %o",re.t2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error Could not change webcam resolution",logType:"ERROR",attributes:{error:re.t2.message}}),ke.dispatch(Fe({type:"error",text:"Could not change webcam resolution: ".concat(re.t2)}));case 36:ke.dispatch(vt(!1));case 37:case"end":return re.stop()}},X,this,[[2,31],[14,20]])})),function(){return gd.apply(this,arguments)})},{key:"enableShare",value:(yi=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Ee,wt,Ge,gt,ae,ot,Xe,ct,ye,Je,qt,rr,cr,nr,ir,mr,Qt,Ht,xr,Zt,dr,jr,ln,mn,lr,un,Pn,Dn,Br,Or,In,Wt=this,Mn=arguments;return s().wrap(function(It){for(;;)switch(It.prev=It.next){case 0:if(U=Mn.length>0&&Mn[0]!==void 0?Mn[0]:void 0,z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"enableShare() Calling ".concat(U?"With Custom Video Track":"Without Custom Video Track "),attributes:{customShareConfig:U?JSON.stringify(U):"Not Specify Custom Track"}}),Pe.debug("enableShare()"),!this._shareProducer){It.next=6;break}return(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:z,status:2,message:"Screen Share Producer found"}),It.abrupt("return");case 6:if(this._mediasoupDevice.canProduce("video")){It.next=10;break}return(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:z,status:2,message:"enableShare() | cannot produce video"}),Pe.error("enableShare() | cannot produce video"),It.abrupt("return");case 10:if(ke.dispatch(Mr(!0)),It.prev=11,Pe.debug("enableShare() | calling getUserMedia()"),Xe=(Ee=this._openTelemetry)===null||Ee===void 0?void 0:Ee.trace({spanName:"Creating Track",span:z}),!U||!U.active){It.next=19;break}se=U.getVideoTracks()[0],Ie=U.getAudioTracks()[0],It.next=38;break;case 19:return It.prev=19,It.next=22,navigator.mediaDevices.getDisplayMedia({audio:!0,video:{width:{max:1920},height:{max:1080},frameRate:{max:10}}});case 22:ye=It.sent,It.next=31;break;case 25:return It.prev=25,It.t0=It.catch(19),(Je=this._videosdkLogs)===null||Je===void 0||Je.pushLogs({logText:"Error in getDisplayMedia for screen share",logType:"ERROR",attributes:{error:JSON.stringify(It.t0)}}),(qt=this._openTelemetry)===null||qt===void 0||qt.completeSpan({span:z,status:2,message:"Error in getDisplayMedia for screen share ".concat(It.t0)}),It.t0.message==="Permission denied"||It.t0.name==="NotAllowedError"?this._emitError(ze.q.ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED):this._emitError(ze.q.ERROR_GET_DISPLAY_MEDIA),It.abrupt("return");case 31:if(ye){It.next=35;break}return ke.dispatch(Mr(!0)),(rr=this._openTelemetry)===null||rr===void 0||rr.completeSpan({span:z,status:2,message:"Stream not found"}),It.abrupt("return");case 35:se=ye.getVideoTracks()[0],Ie=ye.getAudioTracks()[0],(ct=this._openTelemetry)===null||ct===void 0||ct.completeSpan({message:"Track Generated with height ".concat(se.getSettings().height," and width ").concat(se.getSettings().width),span:Xe,status:1});case 38:if(cr=(wt=this._openTelemetry)===null||wt===void 0?void 0:wt.trace({spanName:"Generating Producer Configuration",span:z}),mr={videoGoogleStartBitrate:1e3},!this._forceH264){It.next=47;break}if(ir=this._mediasoupDevice.rtpCapabilities.codecs.find(function(yr){return yr.mimeType.toLowerCase()==="video/h264"})){It.next=45;break}throw(Qt=this._videosdkLogs)===null||Qt===void 0||Qt.pushLogs({logText:"Error EnableShare : desired H264 codec+configuration is not supported",logType:"ERROR"}),new Error("desired H264 codec+configuration is not supported");case 45:It.next=52;break;case 47:if(!this._forceVP9){It.next=52;break}if(ir=this._mediasoupDevice.rtpCapabilities.codecs.find(function(yr){return yr.mimeType.toLowerCase()==="video/vp9"})){It.next=52;break}throw(Ht=this._videosdkLogs)===null||Ht===void 0||Ht.pushLogs({logText:"Error EnableShare :desired VP9 codec+configuration is not supported",logType:"ERROR"}),new Error("desired VP9 codec+configuration is not supported");case 52:return this._useSharingSimulcast&&(xr=this._mediasoupDevice.rtpCapabilities.codecs.find(function(yr){return yr.kind==="video"}),nr=this._forceVP9&&ir||xr.mimeType.toLowerCase()==="video/vp9"?hi:us.map(function(yr){return Ft(Ft({},yr),{},{dtx:!0})})),(Ge=this._openTelemetry)===null||Ge===void 0||Ge.completeSpan({span:cr,status:1,message:"Producer Configuration Generated"}),cr=(gt=this._openTelemetry)===null||gt===void 0?void 0:gt.trace({spanName:"Creating Share Producer",span:z}),It.next=57,this._sendTransport.produce({track:se,encodings:nr,codecOptions:mr,codec:ir,appData:{share:!0}});case 57:if(this._shareProducer=It.sent,Zt=we({id:this._shareProducer.id,type:"share",paused:this._shareProducer.paused,track:this._shareProducer.track,rtpParameters:this._shareProducer.rtpParameters,codec:this._shareProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0},instance:this._shareProducer}),ke.dispatch(Zt),this._eventEmitter.emit(Zt.type,Zt.payload),this._shareProducer.on("transportclose",function(){var yr,Wr=be(Wt._shareProducer.id);ke.dispatch(Wr),Wt._eventEmitter.emit(Wr.type,Wr.payload),(yr=Wt._shareProducer)===null||yr===void 0||yr.close(),Wt._shareProducer=null}),this._shareProducer.on("trackended",function(){var yr;(yr=Wt._openTelemetry)===null||yr===void 0||yr.traceAutoComplete({spanName:"this._shareProducer trackended or Share disconnected!",span:z,status:2}),ke.dispatch(Fe({type:"error",text:"Share disconnected!"})),Wt.disableShare().catch(function(){})}),(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:cr,status:1,message:"Share Producer Created"}),!Ie){It.next=84;break}return It.prev=65,ln={opusStereo:1,opusDtx:1},cr=(dr=this._openTelemetry)===null||dr===void 0?void 0:dr.trace({spanName:"Creating Share Audio Producer",span:z}),It.next=70,this._sendTransport.produce({track:Ie,codecOptions:ln,appData:{share:!0}});case 70:this._shareAudioProducer=It.sent,mn=we({id:this._shareAudioProducer.id,type:"share",paused:this._shareAudioProducer.paused,track:this._shareAudioProducer.track,rtpParameters:this._shareAudioProducer.rtpParameters,codec:this._shareAudioProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0},instance:this._shareAudioProducer}),ke.dispatch(mn),this._eventEmitter.emit(mn.type,mn.payload),this._shareAudioProducer.on("transportclose",function(){var yr,Wr=be(Wt._shareAudioProducer.id);ke.dispatch(Wr),Wt._eventEmitter.emit(Wr.type,Wr.payload),(yr=Wt._shareAudioProducer)===null||yr===void 0||yr.close(),Wt._shareAudioProducer=null}),this._shareAudioProducer.on("trackended",function(){var yr;(yr=Wt._openTelemetry)===null||yr===void 0||yr.traceAutoComplete({spanName:"this._shareAudioProducer trackended",span:z,status:2}),ke.dispatch(Fe({type:"error",text:"Share disconnected!"}))}),(jr=this._openTelemetry)===null||jr===void 0||jr.completeSpan({span:cr,status:1,message:"Share Audio Producer Created"}),It.next=84;break;case 79:return It.prev=79,It.t1=It.catch(65),It.next=83,this._protoo.request("produceError",{mediaType:"shareAudio",message:It.t1.message});case 83:(lr=this._videosdkLogs)===null||lr===void 0||lr.pushLogs({logText:"Error in shareAudio produceError",logType:"ERROR",attributes:{error:It.t1.message}});case 84:(ot=this._openTelemetry)===null||ot===void 0||ot.completeSpan({span:z,status:1,message:"Enable Share Successful"}),It.next=98;break;case 87:return It.prev=87,It.t2=It.catch(11),Pe.error("enableShare() | failed:%o",It.t2),(un=this._openTelemetry)===null||un===void 0||un.completeSpan({span:z,status:2,attributes:{error:It.t2.message},message:"Error in enableShare video produceError"}),console.log("screen share catch",It.t2.message),(Pn=this._videosdkLogs)===null||Pn===void 0||Pn.pushLogs({logText:"Error in enableShare video produceError",logType:"ERROR",attributes:{error:It.t2.message}}),It.t2.name!=="NotAllowedError"&&ke.dispatch(Fe({type:"error",text:"Error sharing: ".concat(It.t2)})),It.next=96,this._protoo.request("produceError",{mediaType:"share",message:It.t2.message});case 96:se&&se.stop(),Ie&&Ie.stop();case 98:ke.dispatch(Mr(!1)),this._shareProducer&&(Dn=0,(Br=this._metrics.addNewProbe(this._shareProducer,"share_producer")).onStatsCollected=function(yr){try{var Wr;Wt._stats.producerStats||(Wt._stats.producerStats={}),Wt._stats.producerStats.share||(Wt._stats.producerStats.share=[]),Wt._shareProducer&&(Wt._latestStats[(Wr=Wt._shareProducer)===null||Wr===void 0?void 0:Wr.id]=[]),yr.video.forEach(function(on){var tn;Wt._shareProducer&&Wt._latestStats[(tn=Wt._shareProducer)===null||tn===void 0?void 0:tn.id].push(on)}),Dn%5==0&&Wt._shareProducer!=null&&Wt._stats.producerStats.share.push({timestamp:new Date,stats:Wt._latestStats[Wt._shareProducer.id]}),Dn++}catch(on){var en;(en=Wt._videosdkLogs)===null||en===void 0||en.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:on.message}}),console.log("PRODUCER ERROR",on)}},Br.start(),this._shareProducer.observer.on("close",function(){Br.stop(),Wt._metrics.removeExistingProbe(Br)})),this._shareAudioProducer&&(Or=0,(In=this._metrics.addNewProbe(this._shareAudioProducer,"share_audio_producer")).onStatsCollected=function(yr){try{var Wr;Wt._stats.producerStats||(Wt._stats.producerStats={}),Wt._stats.producerStats.shareAudio||(Wt._stats.producerStats.shareAudio=[]),Wt._shareAudioProducer&&(Wt._latestStats[(Wr=Wt._shareAudioProducer)===null||Wr===void 0?void 0:Wr.id]=[]),yr.audio.forEach(function(on){var tn;Wt._shareAudioProducer&&Wt._latestStats[(tn=Wt._shareAudioProducer)===null||tn===void 0?void 0:tn.id].push(on)}),Or%5==0&&Wt._shareAudioProducer!=null&&Wt._stats.producerStats.shareAudio.push(Ft({timestamp:new Date},Wt._latestStats[Wt._shareAudioProducer.id]?Wt._latestStats[Wt._shareAudioProducer.id][0]:{})),Or++}catch(on){var en;(en=Wt._videosdkLogs)===null||en===void 0||en.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:on.message}}),console.log("PRODUCER ERROR",on)}},In.start(),this._shareAudioProducer.observer.on("close",function(){In.stop(),Wt._metrics.removeExistingProbe(In)}));case 101:case"end":return It.stop()}},X,this,[[11,87],[19,25],[65,79]])})),function(){return yi.apply(this,arguments)})},{key:"disableShare",value:(Dl=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Ee,wt,Ge,gt,ae,ot;return s().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:if(Pe.debug("disableShare()"),H=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"disableShare() Calling",status:1}),this._shareProducer){Xe.next=5;break}return(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:H,status:2,message:"Share Producer Not found"}),Xe.abrupt("return");case 5:return se=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"Closing Share Producer",span:H,status:1}),this._shareProducer.close(),Ie=be(this._shareProducer.id),ke.dispatch(Ie),this._eventEmitter.emit(Ie.type,Ie.payload),this._shareAudioProducer&&(Ge=(Ee=this._openTelemetry)===null||Ee===void 0?void 0:Ee.trace({spanName:"Closing Share Audio Producer",span:H,status:1}),this._shareAudioProducer.close(),Ie=be(this._shareAudioProducer.id),ke.dispatch(Ie),this._eventEmitter.emit(Ie.type,Ie.payload),(wt=this._openTelemetry)===null||wt===void 0||wt.completeSpan({span:Ge,status:1,message:"Closed Share Audio Producer"})),Xe.prev=11,Xe.next=14,this._protoo.request("closeProducer",{producerId:this._shareProducer.id});case 14:if(!this._shareAudioProducer){Xe.next=17;break}return Xe.next=17,this._protoo.request("closeProducer",{producerId:this._shareAudioProducer.id});case 17:(gt=this._openTelemetry)===null||gt===void 0||gt.completeSpan({span:se,status:1,message:"Requested Server to Close Producer"}),Xe.next=25;break;case 20:Xe.prev=20,Xe.t0=Xe.catch(11),ke.dispatch(Fe({type:"error",text:"Error closing server-side share Producer: ".concat(Xe.t0)})),(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:H,status:2,message:"Error closing server-side share Producer ".concat(Xe.t0)}),(ot=this._videosdkLogs)===null||ot===void 0||ot.pushLogs({logText:"Error closing server-side share Producer",logType:"ERROR",attributes:{error:Xe.t0.message}});case 25:this._shareProducer=null,this._shareAudioProducer=null,(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"Screen Share Disabled Successfully"});case 28:case"end":return Xe.stop()}},X,this,[[11,20]])})),function(){return Dl.apply(this,arguments)})},{key:"enableAudioOnly",value:(Rc=(0,h.A)(s().mark(function X(){var F,U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:Pe.debug("enableAudioOnly()"),ke.dispatch(me(!0)),this.disableWebcam(),F=et(this._consumers.values()),H.prev=4,F.s();case 6:if((U=F.n()).done){H.next=13;break}if((z=U.value).kind==="video"){H.next=10;break}return H.abrupt("continue",11);case 10:this._pauseConsumer(z);case 11:H.next=6;break;case 13:H.next=18;break;case 15:H.prev=15,H.t0=H.catch(4),F.e(H.t0);case 18:return H.prev=18,F.f(),H.finish(18);case 21:ke.dispatch(Me(!0)),ke.dispatch(me(!1));case 23:case"end":return H.stop()}},X,this,[[4,15,18,21]])})),function(){return Rc.apply(this,arguments)})},{key:"disableAudioOnly",value:(Sc=(0,h.A)(s().mark(function X(){var F,U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:Pe.debug("disableAudioOnly()"),ke.dispatch(me(!0)),!this._webcamProducer&&this._produce&&(j()||{}).webcamEnabled&&this.enableWebcam(),F=et(this._consumers.values()),H.prev=4,F.s();case 6:if((U=F.n()).done){H.next=13;break}if((z=U.value).kind==="video"){H.next=10;break}return H.abrupt("continue",11);case 10:this._resumeConsumer(z);case 11:H.next=6;break;case 13:H.next=18;break;case 15:H.prev=15,H.t0=H.catch(4),F.e(H.t0);case 18:return H.prev=18,F.f(),H.finish(18);case 21:ke.dispatch(Me(!1)),ke.dispatch(me(!1));case 23:case"end":return H.stop()}},X,this,[[4,15,18,21]])})),function(){return Sc.apply(this,arguments)})},{key:"muteAudio",value:(io=(0,h.A)(s().mark(function X(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:Pe.debug("muteAudio()"),ke.dispatch(oe(!0));case 2:case"end":return F.stop()}},X)})),function(){return io.apply(this,arguments)})},{key:"unmuteAudio",value:(Ol=(0,h.A)(s().mark(function X(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:Pe.debug("unmuteAudio()"),ke.dispatch(oe(!1));case 2:case"end":return F.stop()}},X)})),function(){return Ol.apply(this,arguments)})},{key:"handleRemoteRestartIce",value:(Bo=(0,h.A)(s().mark(function X(F){var U,z,H,re,se,Ie,Ee,wt;return s().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return H=F.iceParameters,re=F.transportId,se=F.internalSpan,re===((U=this._sendTransport)===null||U===void 0?void 0:U.id)&&this._sendTransport.restartIce({iceParameters:H}),re===((z=this._recvTransport)===null||z===void 0?void 0:z.id)&&this._recvTransport.restartIce({iceParameters:H}),Ge.prev=3,Ge.next=6,this._protoo.request("iceRestarted",{transportId:re});case 6:(Ie=this._openTelemetry)===null||Ie===void 0||Ie.completeSpan({span:se,status:1,message:"iceRestarted"}),Ge.next=14;break;case 9:Ge.prev=9,Ge.t0=Ge.catch(3),(Ee=this._openTelemetry)===null||Ee===void 0||Ee.completeSpan({span:se,status:2,message:"handleRemoteRestartIce() ICE restart failed ".concat(Ge.t0)}),(wt=this._videosdkLogs)===null||wt===void 0||wt.pushLogs({logText:"Error handleRemoteRestartIce() ICE restart failed",logType:"ERROR",attributes:{error:Ge.t0.message}}),ke.dispatch(Fe({type:"error",text:"ICE restart failed: ".concat(Ge.t0)}));case 14:case"end":return Ge.stop()}},X,this,[[3,9]])})),function(X){return Bo.apply(this,arguments)})},{key:"restartIce",value:(Ta=(0,h.A)(s().mark(function X(){var F,U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(Pe.debug("restartIce()"),ke.dispatch(ve(!0)),H.prev=2,!this._sendTransport){H.next=9;break}return H.next=6,this._protoo.request("restartIce",{transportId:this._sendTransport.id});case 6:return F=H.sent,H.next=9,this._sendTransport.restartIce({iceParameters:F});case 9:if(!this._recvTransport){H.next=15;break}return H.next=12,this._protoo.request("restartIce",{transportId:this._recvTransport.id});case 12:return U=H.sent,H.next=15,this._recvTransport.restartIce({iceParameters:U});case 15:ke.dispatch(Fe({text:"ICE restarted"})),H.next=23;break;case 18:H.prev=18,H.t0=H.catch(2),Pe.error("restartIce() | failed:%o",H.t0),ke.dispatch(Fe({type:"error",text:"ICE restart failed: ".concat(H.t0)})),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error restartIce() ICE restart failed",logType:"ERROR",attributes:{error:H.t0.message}});case 23:ke.dispatch(ve(!1));case 24:case"end":return H.stop()}},X,this,[[2,18]])})),function(){return Ta.apply(this,arguments)})},{key:"setMaxSendingSpatialLayer",value:(bc=(0,h.A)(s().mark(function X(F){var U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Pe.debug("setMaxSendingSpatialLayer() [spatialLayer:%s]",F),z.prev=1,!this._webcamProducer){z.next=7;break}return z.next=5,this._webcamProducer.setMaxSpatialLayer(F);case 5:z.next=10;break;case 7:if(!this._shareProducer){z.next=10;break}return z.next=10,this._shareProducer.setMaxSpatialLayer(F);case 10:z.next=17;break;case 12:z.prev=12,z.t0=z.catch(1),Pe.error("setMaxSendingSpatialLayer() | failed:%o",z.t0),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error setting max sending video spatial layer",logType:"ERROR",attributes:{error:z.t0.message}}),ke.dispatch(Fe({type:"error",text:"Error setting max sending video spatial layer: ".concat(z.t0)}));case 17:case"end":return z.stop()}},X,this,[[1,12]])})),function(X){return bc.apply(this,arguments)})},{key:"setWebcamQuality",value:(Pa=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(this._webcamProducer){H.next=2;break}return H.abrupt("return");case 2:if(U=this._webcam.resolution,z=Tr[U][F].s,this._webcamProducer.maxSpatialLayer!=z){H.next=6;break}return H.abrupt("return");case 6:return H.next=8,this._webcamProducer.setMaxSpatialLayer(z);case 8:case"end":return H.stop()}},X,this)})),function(X){return Pa.apply(this,arguments)})},{key:"setConsumerQuality",value:(pa=(0,h.A)(s().mark(function X(F,U){var z,H,re,se,Ie,Ee,wt;return s().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return se=this._webcam.resolution,Ie=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:'Setting "'.concat(U,'" Quality')}),Ee=Tr[se][U].s,wt=Tr[se][U].t,(H=this._openTelemetry)===null||H===void 0||H.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:Ie,attributes:{spatialLayers:JSON.parse(Ee),temporalLayers:JSON.parse(wt)},status:1}),Ge.next=7,this.setConsumerPreferredLayers(F,Ee,wt);case 7:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({message:"Done",span:Ie,status:1});case 8:case"end":return Ge.stop()}},X,this)})),function(X,F){return pa.apply(this,arguments)})},{key:"setViewPort",value:(ar=(0,h.A)(s().mark(function X(F,U,z){var H,re,se,Ie;return s().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(this._consumers.get(F.id)){Ee.next=2;break}return Ee.abrupt("return");case 2:if(H=ut(this._consumers.get(F.id),U,z),re=H.consumerId,se=H.newPreferredSpatialLayer,Ie=H.newPreferredTemporalLayer,!re){Ee.next=6;break}return Ee.next=6,this.setConsumerPreferredLayers(re,se,Ie);case 6:case"end":return Ee.stop()}},X,this)})),function(X,F,U){return ar.apply(this,arguments)})},{key:"setConsumerPreferredLayers",value:(ri=(0,h.A)(s().mark(function X(F,U,z){var H,re;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return Pe.debug("setConsumerPreferredLayers() [consumerId:%s, spatialLayer:%s, temporalLayer:%s]",F,U,z),se.prev=1,(H=this._consumers.get(F)).spatialLayers>1&&(H.preferredSpatialLayer=U,H.preferredTemporalLayer=z),se.next=6,this._protoo.request("setConsumerPreferredLayers",{consumerId:F,spatialLayer:U,temporalLayer:z});case 6:ke.dispatch(Jr(F,U,z)),se.next=14;break;case 9:se.prev=9,se.t0=se.catch(1),Pe.error("setConsumerPreferredLayers() | failed:%o",se.t0),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error setting Consumer preferred layers:",logType:"ERROR",attributes:{error:se.t0.message}}),ke.dispatch(Fe({type:"error",text:"Error setting Consumer preferred layers: ".concat(se.t0)}));case 14:case"end":return se.stop()}},X,this,[[1,9]])})),function(X,F,U){return ri.apply(this,arguments)})},{key:"setConsumerPriority",value:(ur=(0,h.A)(s().mark(function X(F,U){var z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return Pe.debug("setConsumerPriority() [consumerId:%s, priority:%d]",F,U),H.prev=1,H.next=4,this._protoo.request("setConsumerPriority",{consumerId:F,priority:U});case 4:ke.dispatch(er(F,U)),H.next=12;break;case 7:H.prev=7,H.t0=H.catch(1),Pe.error("setConsumerPriority() | failed:%o",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error setting Consumer priority",logType:"ERROR",attributes:{error:H.t0.message}}),ke.dispatch(Fe({type:"error",text:"Error setting Consumer priority: ".concat(H.t0)}));case 12:case"end":return H.stop()}},X,this,[[1,7]])})),function(X,F){return ur.apply(this,arguments)})},{key:"requestConsumerKeyFrame",value:(nt=(0,h.A)(s().mark(function X(F){var U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Pe.debug("requestConsumerKeyFrame() [consumerId:%s]",F),z.prev=1,z.next=4,this._protoo.request("requestConsumerKeyFrame",{consumerId:F});case 4:ke.dispatch(Fe({text:"Keyframe requested for video consumer"})),z.next=12;break;case 7:z.prev=7,z.t0=z.catch(1),Pe.error("requestConsumerKeyFrame() | failed:%o",z.t0),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error requesting key frame for Consumer",logType:"ERROR",attributes:{error:z.t0.message}}),ke.dispatch(Fe({type:"error",text:"Error requesting key frame for Consumer: ".concat(z.t0)}));case 12:case"end":return z.stop()}},X,this,[[1,7]])})),function(X){return nt.apply(this,arguments)})},{key:"enableChatDataProducer",value:(Y=(0,h.A)(s().mark(function X(){var F,U=this;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Pe.debug("enableChatDataProducer()"),this._useDataChannel){z.next=3;break}return z.abrupt("return");case 3:return z.prev=3,z.next=6,this._sendTransport.produceData({ordered:!1,maxRetransmits:1,label:"chat",priority:"medium",appData:{info:"my-chat-DataProducer"}});case 6:this._chatDataProducer=z.sent,ke.dispatch(Yt({id:this._chatDataProducer.id,sctpStreamParameters:this._chatDataProducer.sctpStreamParameters,label:this._chatDataProducer.label,protocol:this._chatDataProducer.protocol})),this._chatDataProducer.on("transportclose",function(){U._chatDataProducer=null}),this._chatDataProducer.on("open",function(){Pe.debug('chat DataProducer "open" event')}),this._chatDataProducer.on("close",function(){Pe.error('chat DataProducer "close" event'),U._chatDataProducer=null,ke.dispatch(Fe({type:"error",text:"Chat DataProducer closed"}))}),this._chatDataProducer.on("error",function(H){Pe.error('chat DataProducer "error" event:%o',H),ke.dispatch(Fe({type:"error",text:"Chat DataProducer error: ".concat(H)}))}),this._chatDataProducer.on("bufferedamountlow",function(){Pe.debug('chat DataProducer "bufferedamountlow" event')}),z.next=21;break;case 15:throw z.prev=15,z.t0=z.catch(3),Pe.error("enableChatDataProducer() | failed:%o",z.t0),(F=this._videosdkLogs)===null||F===void 0||F.pushLogs({logText:"Error enabling chat DataProducer",logType:"ERROR",attributes:{error:z.t0.message}}),ke.dispatch(Fe({type:"error",text:"Error enabling chat DataProducer: ".concat(z.t0)})),z.t0;case 21:case"end":return z.stop()}},X,this,[[3,15]])})),function(){return Y.apply(this,arguments)})},{key:"enableBotDataProducer",value:(Pt=(0,h.A)(s().mark(function X(){var F,U=this;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Pe.debug("enableBotDataProducer()"),this._useDataChannel){z.next=3;break}return z.abrupt("return");case 3:return z.prev=3,z.next=6,this._sendTransport.produceData({ordered:!1,maxPacketLifeTime:2e3,label:"bot",priority:"medium",appData:{info:"my-bot-DataProducer"}});case 6:this._botDataProducer=z.sent,ke.dispatch(Yt({id:this._botDataProducer.id,sctpStreamParameters:this._botDataProducer.sctpStreamParameters,label:this._botDataProducer.label,protocol:this._botDataProducer.protocol})),this._botDataProducer.on("transportclose",function(){U._botDataProducer=null}),this._botDataProducer.on("open",function(){Pe.debug('bot DataProducer "open" event')}),this._botDataProducer.on("close",function(){Pe.error('bot DataProducer "close" event'),U._botDataProducer=null,ke.dispatch(Fe({type:"error",text:"Bot DataProducer closed"}))}),this._botDataProducer.on("error",function(H){Pe.error('bot DataProducer "error" event:%o',H),ke.dispatch(Fe({type:"error",text:"Bot DataProducer error: ".concat(H)}))}),this._botDataProducer.on("bufferedamountlow",function(){Pe.debug('bot DataProducer "bufferedamountlow" event')}),z.next=21;break;case 15:throw z.prev=15,z.t0=z.catch(3),Pe.error("enableBotDataProducer() | failed:%o",z.t0),(F=this._videosdkLogs)===null||F===void 0||F.pushLogs({logText:"Error enabling bot DataProducer",logType:"ERROR",attributes:{error:z.t0.message}}),ke.dispatch(Fe({type:"error",text:"Error enabling bot DataProducer: ".concat(z.t0)})),z.t0;case 21:case"end":return z.stop()}},X,this,[[3,15]])})),function(){return Pt.apply(this,arguments)})},{key:"sendChatMessage",value:(da=(0,h.A)(s().mark(function X(F){return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Pe.debug('sendChatMessage() [text:"%s]',F),this._chatDataProducer){U.next=4;break}return ke.dispatch(Fe({type:"error",text:"No chat DataProducer"})),U.abrupt("return");case 4:try{this._chatDataProducer.send(F)}catch(z){Pe.error("chat DataProducer.send() failed:%o",z),ke.dispatch(Fe({type:"error",text:"chat DataProducer.send() failed: ".concat(z)}))}case 5:case"end":return U.stop()}},X,this)})),function(X){return da.apply(this,arguments)})},{key:"sendBotMessage",value:(Ca=(0,h.A)(s().mark(function X(F){return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Pe.debug('sendBotMessage() [text:"%s]',F),this._botDataProducer){U.next=4;break}return ke.dispatch(Fe({type:"error",text:"No bot DataProducer"})),U.abrupt("return");case 4:try{this._botDataProducer.send(F)}catch(z){Pe.error("bot DataProducer.send() failed:%o",z),ke.dispatch(Fe({type:"error",text:"bot DataProducer.send() failed: ".concat(z)}))}case 5:case"end":return U.stop()}},X,this)})),function(X){return Ca.apply(this,arguments)})},{key:"changeDisplayName",value:(no=(0,h.A)(s().mark(function X(F){return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return Pe.debug('changeDisplayName() [displayName:"%s"]',F),L({displayName:F}),U.prev=2,U.next=5,this._protoo.request("changeDisplayName",{displayName:F});case 5:this._displayName=F,ke.dispatch(_e(F)),ke.dispatch(Fe({text:"Display name changed"})),U.next=15;break;case 10:U.prev=10,U.t0=U.catch(2),Pe.error("changeDisplayName() | failed: %o",U.t0),ke.dispatch(Fe({type:"error",text:"Could not change display name: ".concat(U.t0)})),ke.dispatch(_e());case 15:case"end":return U.stop()}},X,this,[[2,10]])})),function(X){return no.apply(this,arguments)})},{key:"openConnection",value:(ro=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return U=F.roomId,z=F.payload,H.next=3,this._protoo.request("openConnection",{roomId:U,payload:z}).catch(function(re){throw new Error(re)});case 3:case"end":return H.stop()}},X,this)})),function(X){return ro.apply(this,arguments)})},{key:"closeConnection",value:(to=(0,h.A)(s().mark(function X(F){return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,this._protoo.request("closeConnection",{roomId:F});case 2:case"end":return U.stop()}},X,this)})),function(X){return to.apply(this,arguments)})},{key:"switchTo",value:(eo=(0,h.A)(s().mark(function X(F){var U,z,H;return s().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return U=F.roomId,z=F.peerIds,H=F.payload,re.next=3,this._protoo.request("requestSwitchRoom",{roomId:U,peerIds:z,payload:H});case 3:case"end":return re.stop()}},X,this)})),function(X){return eo.apply(this,arguments)})},{key:"switchPeerRoom",value:(Za=(0,h.A)(s().mark(function X(F){var U,z,H,re;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return U=F.peerId,z=F.roomId,H=F.payload,re=F.token,se.next=3,this._protoo.request("switchPeerRoom",{roomId:z,peerId:U,payload:H,token:re});case 3:case"end":return se.stop()}},X,this)})),function(X){return Za.apply(this,arguments)})},{key:"connectionSwitchPeerRoom",value:(Xa=(0,h.A)(s().mark(function X(F){var U,z,H,re,se;return s().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return U=F.roomId,z=F.connectionRoomId,H=F.peerId,re=F.payload,se=F.token,Ie.next=3,this._protoo.request("connectionSwitchPeerRoom",{roomId:U,connectionRoomId:z,peerId:H,payload:re,token:se});case 3:case"end":return Ie.stop()}},X,this)})),function(X){return Xa.apply(this,arguments)})},{key:"connectionSendChatMessage",value:(Ya=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return U=F.roomId,z=F.message,H.next=3,this._protoo.request("connectionSendChatMessage",{roomId:U,message:z});case 3:case"end":return H.stop()}},X,this)})),function(X){return Ya.apply(this,arguments)})},{key:"connectionEndMeeting",value:(Qa=(0,h.A)(s().mark(function X(F){var U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return U=F.roomId,z.next=3,this._protoo.request("connectionCloseRoom",{roomId:U});case 3:case"end":return z.stop()}},X,this)})),function(X){return Qa.apply(this,arguments)})},{key:"pubsubPublish",value:(Ja=(0,h.A)(s().mark(function X(F,U,z,H){var re,se,Ie,Ee,wt,Ge;return s().wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:if(gt.prev=0,z!=null&&z.sendOnly){if(re=z.sendOnly,se=[],re){Ie=et(re);try{for(Ie.s();!(Ee=Ie.n()).done;)(wt=Ee.value)&&se.push(wt.toString())}catch(ae){Ie.e(ae)}finally{Ie.f()}}z.sendOnly=se}return gt.next=4,this._protoo.request("pubsubPublish",{topic:F,message:U,options:z,payload:H});case 4:gt.next=10;break;case 6:gt.prev=6,gt.t0=gt.catch(0),(Ge=this._videosdkLogs)===null||Ge===void 0||Ge.pushLogs({logText:"Error pubsubPublish() | failed",logType:"ERROR",attributes:{error:gt.t0.message}}),Pe.error("pubsubPublish() | failed: %o",gt.t0);case 10:case"end":return gt.stop()}},X,this,[[0,6]])})),function(X,F,U,z){return Ja.apply(this,arguments)})},{key:"pubsubSubscribe",value:(Ga=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!this._closed){H.next=2;break}return H.abrupt("return");case 2:return H.prev=2,H.next=5,this._protoo.request("pubsubSubscribe",{topic:F});case 5:return U=H.sent,H.abrupt("return",U);case 9:H.prev=9,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error pubsubSubscribe() | failed",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.error("pubsubSubscribe() | failed: %o",H.t0);case 13:case"end":return H.stop()}},X,this,[[2,9]])})),function(X){return Ga.apply(this,arguments)})},{key:"pubsubUnsubscribe",value:(Ka=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!this._closed){H.next=2;break}return H.abrupt("return");case 2:return H.prev=2,H.next=5,this._protoo.request("pubsubUnsubscribe",{topic:F});case 5:(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Pubsub Unsubscribing Successfully for topic ".concat(F),logType:"INFO"}),H.next=12;break;case 8:H.prev=8,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error pubsubUnsubscribe() | failed",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.error("pubsubUnsubscribe() | failed: %o",H.t0);case 12:case"end":return H.stop()}},X,this,[[2,8]])})),function(X){return Ka.apply(this,arguments)})},{key:"closeRoom",value:(qa=(0,h.A)(s().mark(function X(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,this._protoo.request("closeRoom",{});case 2:case"end":return F.stop()}},X,this)})),function(){return qa.apply(this,arguments)})},{key:"removePeer",value:($a=(0,h.A)(s().mark(function X(F){var U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if((U=this._openTelemetry)===null||U===void 0||U.traceAutoComplete({spanName:"Removing peer ".concat(F),status:1}),F!=null){z.next=3;break}return z.abrupt("return");case 3:return z.next=5,this._protoo.request("removePeer",{peerId:F});case 5:case"end":return z.stop()}},X,this)})),function(X){return $a.apply(this,arguments)})},{key:"startPingPong",value:(Va=(0,h.A)(s().mark(function X(){var F=this;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:this._pingWebsocketInterval!=null&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=setInterval(function(){F.pingWebSocket()},2e3);case 2:case"end":return U.stop()}},X,this)})),function(){return Va.apply(this,arguments)})},{key:"pingWebSocket",value:(Wa=(0,h.A)(s().mark(function X(){var F,U=this;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!this._closed){z.next=2;break}return z.abrupt("return");case 2:F=!1,this._protoo.request("ping").then(function(H){H&&(F=!0)}).catch(function(H){}),setTimeout(function(){F?(!U._isWebsocketAlive||U._pingWebsocketFailedCounter>1?(U._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CONNECTED"}),U._isWebsocketAlive=!0,U._pingWebsocketFailedCounter=0,U.restartIce()):U._transportState!="failed"&&U._transportState!="disconnected"||(console.log("Calling Restart Ice based on transport state",U._transportState),U.restartIce()),U._pingWebsocketFailedCounter=0):(U._isWebsocketAlive&&U._pingWebsocketFailedCounter>1&&(U._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"DISCONNECTED"}),U._isWebsocketAlive=!1,U.startInternetPingPong()),U._pingWebsocketFailedCounter=U._pingWebsocketFailedCounter+1)},1e3);case 5:case"end":return z.stop()}},X,this)})),function(){return Wa.apply(this,arguments)})},{key:"startInternetPingPong",value:(Ha=(0,h.A)(s().mark(function X(){var F=this;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:this._pingInternetInterval!=null&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=setInterval(function(){F.pingInternet()},2e3);case 2:case"end":return U.stop()}},X,this)})),function(){return Ha.apply(this,arguments)})},{key:"pingInternet",value:(za=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie=this;return s().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(!this._closed){Ee.next=2;break}return Ee.abrupt("return");case 2:return(F=this._videosdkLogs)===null||F===void 0||F.pushLogs({logText:"pinging internet",logType:"INFO"}),U=new AbortController,z=U.signal,H=setTimeout(function(){U.abort()},1e3),Ee.next=8,fetch("https://".concat(this._signalingBaseUrl,"/ping"),{method:"GET",signal:z}).then(function(wt){return clearTimeout(H),wt.text()}).catch(function(wt){var Ge;return(Ge=Ie._videosdkLogs)===null||Ge===void 0||Ge.pushLogs({logText:"Error pingInternet failed",logType:"ERROR",attributes:{error:wt.message}}),"failed"});case 8:if(Ee.sent!="pong"){Ee.next=19;break}if((re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Pong",logType:"INFO"}),!(this._pingWebsocketFailedCounter>5&&this._pongInternetCounter>3)||this._isWebsocketAlive){Ee.next=17;break}return this._pongInternetCounter=0,this.close({sendLeft:!1}),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Re-join the meeting, after diconnect",logType:"INFO"}),Ee.next=17,this.join();case 17:this._pongInternetCounter=this._pongInternetCounter+1,this._isWebsocketAlive&&(this._pongInternetCounter=0,this._pingInternetInterval!=null&&(clearInterval(this._pingInternetInterval),this._pingInternetInterval=null));case 19:case"end":return Ee.stop()}},X,this)})),function(){return za.apply(this,arguments)})},{key:"getSendTransportRemoteStats",value:(Qs=(0,h.A)(s().mark(function X(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(Pe.debug("getSendTransportRemoteStats()"),this._sendTransport){F.next=3;break}return F.abrupt("return");case 3:return F.abrupt("return",this._protoo.request("getTransportStats",{transportId:this._sendTransport.id}));case 4:case"end":return F.stop()}},X,this)})),function(){return Qs.apply(this,arguments)})},{key:"getRecvTransportRemoteStats",value:(ks=(0,h.A)(s().mark(function X(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(Pe.debug("getRecvTransportRemoteStats()"),this._recvTransport){F.next=3;break}return F.abrupt("return");case 3:return F.abrupt("return",this._protoo.request("getTransportStats",{transportId:this._recvTransport.id}));case 4:case"end":return F.stop()}},X,this)})),function(){return ks.apply(this,arguments)})},{key:"getAudioRemoteStats",value:(Hi=(0,h.A)(s().mark(function X(){var F;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Pe.debug("getAudioRemoteStats()"),F=this._micProducer){U.next=4;break}return U.abrupt("return");case 4:return U.abrupt("return",this._latestStats[F.id]);case 5:case"end":return U.stop()}},X,this)})),function(){return Hi.apply(this,arguments)})},{key:"getVideoRemoteStats",value:(Es=(0,h.A)(s().mark(function X(){var F;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Pe.debug("getVideoRemoteStats()"),F=this._webcamProducer){U.next=4;break}return U.abrupt("return");case 4:return U.abrupt("return",this._latestStats[F.id]);case 5:case"end":return U.stop()}},X,this)})),function(){return Es.apply(this,arguments)})},{key:"getShareRemoteStats",value:(ts=(0,h.A)(s().mark(function X(){var F;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Pe.debug("getVideoRemoteStats()"),F=this._shareProducer){U.next=4;break}return U.abrupt("return");case 4:return U.abrupt("return",this._latestStats[F.id]);case 5:case"end":return U.stop()}},X,this)})),function(){return ts.apply(this,arguments)})},{key:"getShareAudioRemoteStats",value:(Oi=(0,h.A)(s().mark(function X(){var F;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(F=this._shareAudioProducer){U.next=3;break}return U.abrupt("return");case 3:return U.abrupt("return",this._latestStats[F.id]);case 4:case"end":return U.stop()}},X,this)})),function(){return Oi.apply(this,arguments)})},{key:"getConsumerRemoteStats",value:(xi=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(Pe.debug("getConsumerRemoteStats()"),U=this._consumers.get(F)){H.next=4;break}return H.abrupt("return");case 4:return this._latestStats[F]&&(this._latestStats[F][0].currentSpatialLayer=U.currentSpatialLayer,this._latestStats[F][0].currentTemporalLayer=U.currentTemporalLayer,this._latestStats[F][0].preferredSpatialLayer=U.preferredSpatialLayer,this._latestStats[F][0].preferredTemporalLayer=U.preferredTemporalLayer),z=U.track.id.replace(/[{}]/g,""),H.abrupt("return",this._latestStats[z]);case 7:case"end":return H.stop()}},X,this)})),function(X){return xi.apply(this,arguments)})},{key:"getChatDataProducerRemoteStats",value:(ti=(0,h.A)(s().mark(function X(){var F;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Pe.debug("getChatDataProducerRemoteStats()"),F=this._chatDataProducer){U.next=4;break}return U.abrupt("return");case 4:return U.abrupt("return",this._protoo.request("getDataProducerStats",{dataProducerId:F.id}));case 5:case"end":return U.stop()}},X,this)})),function(){return ti.apply(this,arguments)})},{key:"getBotDataProducerRemoteStats",value:(fi=(0,h.A)(s().mark(function X(){var F;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Pe.debug("getBotDataProducerRemoteStats()"),F=this._botDataProducer){U.next=4;break}return U.abrupt("return");case 4:return U.abrupt("return",this._protoo.request("getDataProducerStats",{dataProducerId:F.id}));case 5:case"end":return U.stop()}},X,this)})),function(){return fi.apply(this,arguments)})},{key:"getDataConsumerRemoteStats",value:(Cn=(0,h.A)(s().mark(function X(F){return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Pe.debug("getDataConsumerRemoteStats()"),this._dataConsumers.get(F)){U.next=4;break}return U.abrupt("return");case 4:return U.abrupt("return",this._protoo.request("getDataConsumerStats",{dataConsumerId:F}));case 5:case"end":return U.stop()}},X,this)})),function(X){return Cn.apply(this,arguments)})},{key:"getSendTransportLocalStats",value:(Sn=(0,h.A)(s().mark(function X(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(Pe.debug("getSendTransportLocalStats()"),this._sendTransport){F.next=3;break}return F.abrupt("return");case 3:return F.abrupt("return",this._sendTransport.getStats());case 4:case"end":return F.stop()}},X,this)})),function(){return Sn.apply(this,arguments)})},{key:"getRecvTransportLocalStats",value:(Kr=(0,h.A)(s().mark(function X(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(Pe.debug("getRecvTransportLocalStats()"),this._recvTransport){F.next=3;break}return F.abrupt("return");case 3:return F.abrupt("return",this._recvTransport.getStats());case 4:case"end":return F.stop()}},X,this)})),function(){return Kr.apply(this,arguments)})},{key:"getAudioLocalStats",value:(Vr=(0,h.A)(s().mark(function X(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(Pe.debug("getAudioLocalStats()"),this._micProducer){F.next=3;break}return F.abrupt("return");case 3:return F.abrupt("return",this._micProducer.getStats());case 4:case"end":return F.stop()}},X,this)})),function(){return Vr.apply(this,arguments)})},{key:"getVideoLocalStats",value:(br=(0,h.A)(s().mark(function X(){var F;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Pe.debug("getVideoLocalStats()"),F=this._webcamProducer||this._shareProducer){U.next=4;break}return U.abrupt("return");case 4:return U.abrupt("return",F.getStats());case 5:case"end":return U.stop()}},X,this)})),function(){return br.apply(this,arguments)})},{key:"getConsumerLocalStats",value:(Jt=(0,h.A)(s().mark(function X(F){var U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(U=this._consumers.get(F)){z.next=3;break}return z.abrupt("return");case 3:return z.abrupt("return",U.getStats());case 4:case"end":return z.stop()}},X,this)})),function(X){return Jt.apply(this,arguments)})},{key:"applyNetworkThrottle",value:(_r=(0,h.A)(s().mark(function X(F){var U,z,H,re;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return U=F.uplink,z=F.downlink,H=F.rtt,re=F.secret,Pe.debug("applyNetworkThrottle() [uplink:%s, downlink:%s, rtt:%s]",U,z,H),se.prev=2,se.next=5,this._protoo.request("applyNetworkThrottle",{uplink:U,downlink:z,rtt:H,secret:re});case 5:se.next=11;break;case 7:se.prev=7,se.t0=se.catch(2),Pe.error("applyNetworkThrottle() | failed:%o",se.t0),ke.dispatch(Fe({type:"error",text:"Error applying network throttle: ".concat(se.t0)}));case 11:case"end":return se.stop()}},X,this,[[2,7]])})),function(X){return _r.apply(this,arguments)})},{key:"resetNetworkThrottle",value:(Rt=(0,h.A)(s().mark(function X(F){var U,z,H;return s().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return U=F.silent,z=U!==void 0&&U,H=F.secret,Pe.debug("resetNetworkThrottle()"),re.prev=2,re.next=5,this._protoo.request("resetNetworkThrottle",{secret:H});case 5:re.next=10;break;case 7:re.prev=7,re.t0=re.catch(2),z||(Pe.error("resetNetworkThrottle() | failed:%o",re.t0),ke.dispatch(Fe({type:"error",text:"Error resetting network throttle: ".concat(re.t0)})));case 10:case"end":return re.stop()}},X,this,[[2,7]])})),function(X){return Rt.apply(this,arguments)})},{key:"createProducerTransport",value:(Gt=(0,h.A)(s().mark(function X(F,U){var z,H,re,se,Ie,Ee,wt,Ge,gt=this;return s().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:re=F.id,se=F.iceParameters,Ie=F.iceCandidates,Ee=F.dtlsParameters,wt=F.sctpParameters,Ge=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"Creating Send Transport",span:U||null}),this._sendTransport=this._mediasoupDevice.createSendTransport({id:re,iceParameters:se,iceCandidates:Ie,dtlsParameters:Ee,sctpParameters:wt,iceServers:this._iceServers}),this._sendTransport.on("connect",function(ot,Xe,ct){var ye,Je=ot.dtlsParameters;(ye=gt._openTelemetry)===null||ye===void 0||ye.traceAutoComplete({spanName:"this._sendTransport `connect` Event : Transport is about to establish the ICE+DTLS connection",span:Ge,status:1}),gt._protoo.request("connectWebRtcTransport",{transportId:gt._sendTransport.id,dtlsParameters:Je}).then(Xe).catch(ct)}),this._sendTransport.on("produce",function(){var ot=(0,h.A)(s().mark(function Xe(ct,ye,Je){var qt,rr,cr,nr,ir,mr,Qt;return s().wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:return qt=ct.kind,rr=ct.rtpParameters,cr=ct.appData,Ht.prev=1,(nr=gt._openTelemetry)===null||nr===void 0||nr.traceAutoComplete({spanName:"this._sendTransport `produce` Event : Transmit information about a new producer ",span:Ge,status:1}),Ht.next=5,gt._protoo.request("produce",{transportId:gt._sendTransport.id,kind:qt,rtpParameters:rr,appData:cr});case 5:ir=Ht.sent,mr=ir.id,ye({id:mr}),Ht.next=14;break;case 10:Ht.prev=10,Ht.t0=Ht.catch(1),(Qt=gt._videosdkLogs)===null||Qt===void 0||Qt.pushLogs({logText:'Error this._sendTransport "produce" Event catch',logType:"ERROR",attributes:{error:Ht.t0.message}}),Je(Ht.t0);case 14:case"end":return Ht.stop()}},Xe,null,[[1,10]])}));return function(Xe,ct,ye){return ot.apply(this,arguments)}}()),this._sendTransport.on("producedata",function(){var ot=(0,h.A)(s().mark(function Xe(ct,ye,Je){var qt,rr,cr,nr,ir,mr,Qt;return s().wrap(function(Ht){for(;;)switch(Ht.prev=Ht.next){case 0:return qt=ct.sctpStreamParameters,rr=ct.label,cr=ct.protocol,nr=ct.appData,Pe.debug('"producedata" event: [sctpStreamParameters:%o, appData:%o]',qt,nr),Ht.prev=2,Ht.next=5,gt._protoo.request("produceData",{transportId:gt._sendTransport.id,sctpStreamParameters:qt,label:rr,protocol:cr,appData:nr});case 5:ir=Ht.sent,mr=ir.id,ye({id:mr}),Ht.next=14;break;case 10:Ht.prev=10,Ht.t0=Ht.catch(2),(Qt=gt._videosdkLogs)===null||Qt===void 0||Qt.pushLogs({logText:"Error producedata event catch",logType:"ERROR",attributes:{error:Ht.t0.message}}),Je(Ht.t0);case 14:case"end":return Ht.stop()}},Xe,null,[[2,10]])}));return function(Xe,ct,ye){return ot.apply(this,arguments)}}()),this._sendTransport.on("connectionstatechange",function(ot){var Xe;(Xe=gt._openTelemetry)===null||Xe===void 0||Xe.traceAutoComplete({spanName:"_sendTransport Event connectionstatechange ".concat(ot),span:Ge,status:1}),ot==="failed"&&gt.restartIce(),gt._transportState=ot}),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:Ge,status:1,message:"Send Transport Created Successfully"});case 8:case"end":return ae.stop()}},X,this)})),function(X,F){return Gt.apply(this,arguments)})},{key:"createConsumerTransport",value:(zt=(0,h.A)(s().mark(function X(F,U){var z,H,re,se,Ie,Ee,wt,Ge,gt,ae,ot=this;return s().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:re=F.id,se=F.iceParameters,Ie=F.iceCandidates,Ee=F.dtlsParameters,wt=F.sctpParameters,Ge=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"Creating Recieve Transport",span:U||null}),this._recvTransport=this._mediasoupDevice.createRecvTransport({id:re,iceParameters:se,iceCandidates:Ie,dtlsParameters:Ee,sctpParameters:wt,iceServers:this._iceServers}),this._recvTransport.on("connect",function(ct,ye,Je){var qt,rr=ct.dtlsParameters;(qt=ot._openTelemetry)===null||qt===void 0||qt.traceAutoComplete({spanName:"this._recvTransport `connect` Event : Recieve Transport is about to establish the ICE+DTLS connection",span:Ge,status:1}),ot._protoo.request("connectWebRtcTransport",{transportId:ot._recvTransport.id,dtlsParameters:rr}).then(ye).catch(Je)}),this._recvTransport.on("connectionstatechange",function(ct){var ye;(ye=ot._openTelemetry)===null||ye===void 0||ye.traceAutoComplete({spanName:"_recvTransport Event connectionstatechange ".concat(ct),span:Ge,status:1}),ct==="failed"&&ot.restartIce(),ot._transportState=ct}),gt=0,(ae=this._metrics.addNewProbe(this._recvTransport,"transport")).onStatsCollected=function(ct){try{var ye=function(rr,cr,nr){ot._stats.consumerStats||(ot._stats.consumerStats={});var ir=cr.appData.peerId;ot._stats.consumerStats[ir]||(ot._stats.consumerStats[ir]={}),ot._stats.consumerStats[ir][nr]||(ot._stats.consumerStats[ir][nr]=[]),ot._latestStats[cr.track.id.replace(/[{}]/g,"")]=[rr],gt%5==0&&ot._stats.consumerStats[ir][nr].push(rr)},Je=function(rr){ct[rr].forEach(function(cr){var nr,ir=et(ot._consumers);try{for(ir.s();!(nr=ir.n()).done;){var mr=(0,C.A)(nr.value,2),Qt=(mr[0],mr[1]);if(Qt.track.id.replace(/[{}]/g,"")===cr.trackId){var Ht=Qt.appData.share?Qt.kind==="audio"?"shareAudio":"share":Qt.kind;ye(cr,Qt,Ht)}}}catch(xr){ir.e(xr)}finally{ir.f()}})};Je("audio"),Je("video"),gt++}catch(rr){var qt;(qt=ot._videosdkLogs)===null||qt===void 0||qt.pushLogs({logText:"Error CONSUMER Stats ERROR",logType:"ERROR",attributes:{error:rr.message}}),console.log("CONSUMER CATCH",rr)}},ae.start(),this._recvTransport.observer.on("close",function(){ae.stop(),ot._metrics.removeExistingProbe(ae)}),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:Ge,status:1,message:"Recieve Transport Created Successfully"});case 11:case"end":return Xe.stop()}},X,this)})),function(X,F){return zt.apply(this,arguments)})},{key:"joinRoom",value:(at=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Ee,wt,Ge,gt,ae,ot,Xe,ct,ye,Je,qt,rr,cr,nr,ir,mr,Qt,Ht,xr,Zt;return s().wrap(function(dr){for(;;)switch(dr.prev=dr.next){case 0:return Pe.debug("joinRoom()"),dr.prev=1,Ie=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"Loading Router Capabilities",span:this._joinSpan}),this._mediasoupDevice=new S.Device({handlerName:this._handlerName}),dr.next=6,this._protoo.request("getRouterRtpCapabilities");case 6:return Ee=dr.sent,this._deviceInfo.sdkType!="react-native"?navigator.userAgent.indexOf("Firefox")&&(Ee.headerExtensions=(wt=Ee.headerExtensions)===null||wt===void 0?void 0:wt.filter(function(jr){return jr.uri!="urn:3gpp:video-orientation"})):Ee.headerExtensions=(Ge=Ee.headerExtensions)===null||Ge===void 0?void 0:Ge.filter(function(jr){return jr.uri!="urn:3gpp:video-orientation"}),dr.next=10,this._mediasoupDevice.load({routerRtpCapabilities:Ee});case 10:if((U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:Ie,status:1,attributes:{routerRtpCapabilities:JSON.stringify(Ee).toString()},message:"Router Capabilities Loaded"}),!this._produce){dr.next=16;break}return dr.next=14,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 14:gt=dr.sent,this.createProducerTransport(gt,this._joinSpan);case 16:if(!this._consume){dr.next=21;break}return dr.next=19,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 19:ae=dr.sent,this.createConsumerTransport(ae,this._joinSpan);case 21:return dr.next=23,this._protoo.request("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(z=this._mediasoupDevice)===null||z===void 0?void 0:z.rtpCapabilities,sctpCapabilities:(H=this._mediasoupDevice)===null||H===void 0?void 0:H.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData});case 23:ot=dr.sent,Xe=ot.peers,ct=ot.poll,ye=ot.messages,ke.dispatch(Z("connected")),(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Emitted `MEETING_JOINED` Event",span:this._joinSpan,status:1}),this._eventEmitter.emit("MEETING_JOINED",{peers:Xe,poll:ct,messages:ye,baseUrl:this._baseUrl}),ke.dispatch({type:"REMOVE_ALL_NOTIFICATIONS"}),ke.dispatch(Fe({text:"You are in the room!",timeout:3e3})),Je=et(Xe);try{for(Je.s();!(qt=Je.n()).done;)rr=qt.value,cr=Kt(Ft(Ft({},rr),{},{consumers:[],dataConsumers:[]})),ke.dispatch(cr),this._eventEmitter.emit(cr.type,cr.payload)}catch(jr){Je.e(jr)}finally{Je.f()}this._produce&&(ke.dispatch(ge({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled?this.enableMic(this.customMicrophoneAudioTrack,this._joinSpan):this.customMicrophoneAudioTrack&&((nr=this._openTelemetry)===null||nr===void 0||nr.traceAutoComplete({spanName:"Disposing Audio Track",span:this._joinSpan,status:2}),this.customMicrophoneAudioTrack.getTracks().forEach(function(jr){jr.stop()})),ir=j(),this._webcamEnabled&&(!ir||ir.webcamEnabled||this._externalVideo)?this.enableWebcam(this.customCameraVideoTrack,this._joinSpan):this.customCameraVideoTrack&&((mr=this._openTelemetry)===null||mr===void 0||mr.traceAutoComplete({spanName:"Disposing Video Track",span:this._joinSpan,status:2}),this.customCameraVideoTrack.getTracks().forEach(function(jr){jr.stop()})),this.enableChatDataProducer()),window.SHOW_INFO&&(Qt=ke.getState(),Ht=Qt.me,ke.dispatch(pe(Ht.id))),(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:this._joinSpan,status:1,message:"Room Joined"}),dr.next=46;break;case 39:dr.prev=39,dr.t0=dr.catch(1),Pe.error("joinRoom() failed:%o",dr.t0),(xr=this._videosdkLogs)===null||xr===void 0||xr.pushLogs({logText:"Error Could not join the room",logType:"ERROR",attributes:{error:dr.t0.message}}),(Zt=this._openTelemetry)===null||Zt===void 0||Zt.completeSpan({span:this._joinSpan,status:2,message:"Could not join the room ".concat(dr.t0)}),ke.dispatch(Fe({type:"error",text:"Could not join the room: ".concat(dr.t0)})),this.close({sendLeft:!0});case 46:case"end":return dr.stop()}},X,this,[[1,39]])})),function(){return at.apply(this,arguments)})},{key:"_updateMics",value:($t=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Ee,wt,Ge,gt,ae,ot,Xe,ct,ye=arguments;return s().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return U=ye.length>0&&ye[0]!==void 0?ye[0]:void 0,this._mics=new Map,Pe.debug("_updateMics() |"),z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"_updateMics() Calling for Getting System Mic list",span:U||null}),Je.prev=4,Je.next=7,navigator.mediaDevices.enumerateDevices();case 7:se=Je.sent,(H=this._openTelemetry)===null||H===void 0||H.traceAutoComplete({spanName:"Getting System Mic list",span:z,status:1,attributes:{systemDevice:se?JSON.stringify(se):"Device not found"}}),Ie=et(se);try{for(Ie.s();!(Ee=Ie.n()).done;)(wt=Ee.value).kind=="audioinput"&&this._mics.set(wt.deviceId,wt)}catch(qt){Ie.e(qt)}finally{Ie.f()}Ge=Array.from(this._mics.values()),gt=Ge.length,ae=this._mic.device?this._mic.device.deviceId:void 0,gt===0?this._mic.device=null:this._mics.has(ae)||(this._mic.device=Ge[0]),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:z,status:1,message:"Update Mic"}),Je.next=30;break;case 18:if(Je.prev=18,Je.t0=Je.catch(4),!(Je.t0 instanceof TypeError)){Je.next=30;break}if(Je.t0.name!=="TypeError"){Je.next=28;break}throw Xe=ze.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,this._emitError(Xe),(ot=this._openTelemetry)===null||ot===void 0||ot.completeSpan({span:z,status:2,message:"Error in updateMics() :: ".concat(Xe.message)}),new Error(Xe.message);case 28:throw(ct=this._openTelemetry)===null||ct===void 0||ct.completeSpan({span:z,status:2,message:"Error in updateMics() :: ".concat(Je.t0.message)}),new Error(Je.t0.message);case 30:case"end":return Je.stop()}},X,this,[[4,18]])})),function(){return $t.apply(this,arguments)})},{key:"_updateWebcams",value:(ft=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Ee,wt,Ge,gt,ae,ot,Xe,ct,ye=arguments;return s().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:return U=ye.length>0&&ye[0]!==void 0?ye[0]:void 0,Pe.debug("_updateWebcams()"),this._webcams=new Map,Pe.debug("_updateWebcams() | calling enumerateDevices()"),z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"_updateWebcams() Calling for Getting System Webcam list",span:U||null}),Je.prev=5,Je.next=8,navigator.mediaDevices.enumerateDevices();case 8:se=Je.sent,(H=this._openTelemetry)===null||H===void 0||H.traceAutoComplete({spanName:"Getting System Webcam list",span:z,status:1,attributes:{systemDevice:se?JSON.stringify(se):"Device not found"}}),Ie=et(se),Je.prev=11,Ie.s();case 13:if((Ee=Ie.n()).done){Je.next=20;break}if((wt=Ee.value).kind==="videoinput"){Je.next=17;break}return Je.abrupt("continue",18);case 17:this._webcams.set(wt.deviceId,wt);case 18:Je.next=13;break;case 20:Je.next=25;break;case 22:Je.prev=22,Je.t0=Je.catch(11),Ie.e(Je.t0);case 25:return Je.prev=25,Ie.f(),Je.finish(25);case 28:Ge=Array.from(this._webcams.values()),gt=Ge.length,(ae=this._webcam.device?this._webcam.device.deviceId:void 0)&&(this._defaultCameraIndex=ae),Pe.debug("_updateWebcams() [webcams:%o]",Ge),gt===0?this._webcam.device=null:this._webcams.has(ae)||(this._webcam.device=Ge[this._defaultCameraIndex]),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:z,status:1,message:"Update Webcam"}),ke.dispatch({type:"SET_CAN_CHANGE_WEBCAM",payload:this._webcams.size>1}),Je.next=50;break;case 38:if(Je.prev=38,Je.t1=Je.catch(5),!(Je.t1 instanceof TypeError)){Je.next=50;break}if(Je.t1.name!=="TypeError"){Je.next=48;break}throw Xe=ze.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,this._emitError(Xe),(ot=this._openTelemetry)===null||ot===void 0||ot.completeSpan({span:z,status:2,message:"Error in updateWebcams() :: ".concat(Xe.message)}),new Error(Xe.message);case 48:throw(ct=this._openTelemetry)===null||ct===void 0||ct.completeSpan({span:z,status:2,message:"Error in updateWebcams() :: ".concat(Je.t1.message)}),new Error(Je.t1.message);case 50:case"end":return Je.stop()}},X,this,[[5,38],[11,22,25,28]])})),function(){return ft.apply(this,arguments)})},{key:"_getWebcamType",value:function(X){return/(back|rear)/i.test(X.label)?(Pe.debug("_getWebcamType() | it seems to be a back camera"),"back"):(Pe.debug("_getWebcamType() | it seems to be a front camera"),"front")}},{key:"_pauseConsumer",value:(We=(0,h.A)(s().mark(function X(F){var U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!F.paused){z.next=2;break}return z.abrupt("return");case 2:return z.prev=2,z.next=5,this._protoo.request("pauseConsumer",{consumerId:F.id});case 5:F.pause(),ke.dispatch(hn(F.id,"local")),z.next=14;break;case 9:z.prev=9,z.t0=z.catch(2),Pe.error("_pauseConsumer() | failed:%o",z.t0),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error pausing Consumer",logType:"ERROR",attributes:{error:z.t0.message}}),ke.dispatch(Fe({type:"error",text:"Error pausing Consumer: ".concat(z.t0)}));case 14:case"end":return z.stop()}},X,this,[[2,9]])})),function(X){return We.apply(this,arguments)})},{key:"_resumeConsumer",value:(Ue=(0,h.A)(s().mark(function X(F){var U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(F.paused){z.next=2;break}return z.abrupt("return");case 2:return z.prev=2,z.next=5,this._protoo.request("resumeConsumer",{consumerId:F.id});case 5:F.resume(),ke.dispatch(kr(F.id,"local")),z.next=14;break;case 9:z.prev=9,z.t0=z.catch(2),Pe.error("_resumeConsumer() | failed:%o",z.t0),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error resuming Consumer",logType:"ERROR",attributes:{error:z.t0.message}}),ke.dispatch(Fe({type:"error",text:"Error resuming Consumer: ".concat(z.t0)}));case 14:case"end":return z.stop()}},X,this,[[2,9]])})),function(X){return Ue.apply(this,arguments)})},{key:"_getExternalVideoStream",value:(Se=(0,h.A)(s().mark(function X(){var F=this;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(!this._externalVideoStream){U.next=2;break}return U.abrupt("return",this._externalVideoStream);case 2:if(!(this._externalVideo.readyState<3)){U.next=5;break}return U.next=5,new Promise(function(z){return F._externalVideo.addEventListener("canplay",z)});case 5:if(!this._externalVideo.captureStream){U.next=9;break}this._externalVideoStream=this._externalVideo.captureStream(),U.next=14;break;case 9:if(!this._externalVideo.mozCaptureStream){U.next=13;break}this._externalVideoStream=this._externalVideo.mozCaptureStream(),U.next=14;break;case 13:throw new Error("video.captureStream() not supported");case 14:return U.abrupt("return",this._externalVideoStream);case 15:case"end":return U.stop()}},X,this)})),function(){return Se.apply(this,arguments)})},{key:"_emitError",value:function(X){this._eventEmitter.emit("ERROR",X)}}],[{key:"init",value:function(X){ke=X.store}}]);var Se,Ue,We,ft,$t,at,zt,Gt,Rt,_r,Jt,br,Vr,Kr,Sn,Cn,fi,ti,xi,Oi,ts,Es,Hi,ks,Qs,za,Ha,Wa,Va,$a,qa,Ka,Ga,Ja,Qa,Ya,Xa,Za,eo,to,ro,no,Ca,da,Pt,Y,nt,ur,ri,ar,pa,Pa,bc,Ta,Bo,Ol,io,Sc,Rc,Dl,yi,gd,Fo,vd,Il,yd,_d,wd,bd,Sd,Ys,Ml,ds,Di,Rd,Ii,pr,Uo,fn,Ec,Xs,Ir,zo,Al,kc,Cc,Un,Mi,Zs,Ll,Pc,Nl,fe,Nt,jl,or,Bl,jt,ni,Ho,Fl,Ul,Ed,kd,Cd,Pd}()},4973:(E,p,o)=>{o.d(p,{Zu:()=>k,lp:()=>b});var C=o(467),_=o(4756),h=o.n(_),b=(o(9027),function(){var f=(0,C.A)(h().mark(function g(s){return h().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(S){var T=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return T?new Promise(function(x,O){T.call(navigator,S,x,O)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),w.next=4,navigator.mediaDevices.getUserMedia(s);case 4:return w.abrupt("return",w.sent);case 5:case"end":return w.stop()}},g)}));return function(g){return f.apply(this,arguments)}}()),k=function(){var f=(0,C.A)(h().mark(function g(s){return h().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getDisplayMedia===void 0&&(navigator.mediaDevices.getDisplayMedia=function(S){var T=navigator.webkitGetDisplayMedia||navigator.mozGetDisplayMedia;return T?new Promise(function(x,O){T.call(navigator,S,x,O)}):Promise.reject(new Error("getDisplayMedia is not implemented in this browser"))}),w.next=4,navigator.mediaDevices.getDisplayMedia(s);case 4:return w.abrupt("return",w.sent);case 5:case"end":return w.stop()}},g)}));return function(g){return f.apply(this,arguments)}}()},6880:function(E){E.exports=function(p){var o={};function C(_){if(o[_])return o[_].exports;var h=o[_]={i:_,l:!1,exports:{}};return p[_].call(h.exports,h,h.exports,C),h.l=!0,h.exports}return C.m=p,C.c=o,C.d=function(_,h,b){C.o(_,h)||Object.defineProperty(_,h,{enumerable:!0,get:b})},C.r=function(_){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})},C.t=function(_,h){if(1&h&&(_=C(_)),8&h||4&h&&typeof _=="object"&&_&&_.__esModule)return _;var b=Object.create(null);if(C.r(b),Object.defineProperty(b,"default",{enumerable:!0,value:_}),2&h&&typeof _!="string")for(var k in _)C.d(b,k,(function(f){return _[f]}).bind(null,k));return b},C.n=function(_){var h=_&&_.__esModule?function(){return _.default}:function(){return _};return C.d(h,"a",h),h},C.o=function(_,h){return Object.prototype.hasOwnProperty.call(_,h)},C.p="",C(C.s=90)}({17:function(p,o,C){o.__esModule=!0,o.default=void 0;var _=C(18),h=function(){function b(){}return b.getFirstMatch=function(k,f){var g=f.match(k);return g&&g.length>0&&g[1]||""},b.getSecondMatch=function(k,f){var g=f.match(k);return g&&g.length>1&&g[2]||""},b.matchAndReturnConst=function(k,f,g){if(k.test(f))return g},b.getWindowsVersionName=function(k){switch(k){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},b.getMacOSVersionName=function(k){var f=k.split(".").splice(0,2).map(function(g){return parseInt(g,10)||0});if(f.push(0),f[0]===10)switch(f[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},b.getAndroidVersionName=function(k){var f=k.split(".").splice(0,2).map(function(g){return parseInt(g,10)||0});if(f.push(0),!(f[0]===1&&f[1]<5))return f[0]===1&&f[1]<6?"Cupcake":f[0]===1&&f[1]>=6?"Donut":f[0]===2&&f[1]<2?"Eclair":f[0]===2&&f[1]===2?"Froyo":f[0]===2&&f[1]>2?"Gingerbread":f[0]===3?"Honeycomb":f[0]===4&&f[1]<1?"Ice Cream Sandwich":f[0]===4&&f[1]<4?"Jelly Bean":f[0]===4&&f[1]>=4?"KitKat":f[0]===5?"Lollipop":f[0]===6?"Marshmallow":f[0]===7?"Nougat":f[0]===8?"Oreo":f[0]===9?"Pie":void 0},b.getVersionPrecision=function(k){return k.split(".").length},b.compareVersions=function(k,f,g){g===void 0&&(g=!1);var s=b.getVersionPrecision(k),w=b.getVersionPrecision(f),S=Math.max(s,w),T=0,x=b.map([k,f],function(O){var P=S-b.getVersionPrecision(O),R=O+new Array(P+1).join(".0");return b.map(R.split("."),function(I){return new Array(20-I.length).join("0")+I}).reverse()});for(g&&(T=S-Math.min(s,w)),S-=1;S>=T;){if(x[0][S]>x[1][S])return 1;if(x[0][S]===x[1][S]){if(S===T)return 0;S-=1}else if(x[0][S]<x[1][S])return-1}},b.map=function(k,f){var g,s=[];if(Array.prototype.map)return Array.prototype.map.call(k,f);for(g=0;g<k.length;g+=1)s.push(f(k[g]));return s},b.find=function(k,f){var g,s;if(Array.prototype.find)return Array.prototype.find.call(k,f);for(g=0,s=k.length;g<s;g+=1){var w=k[g];if(f(w,g))return w}},b.assign=function(k){for(var f,g,s=k,w=arguments.length,S=new Array(w>1?w-1:0),T=1;T<w;T++)S[T-1]=arguments[T];if(Object.assign)return Object.assign.apply(Object,[k].concat(S));var x=function(){var O=S[f];typeof O=="object"&&O!==null&&Object.keys(O).forEach(function(P){s[P]=O[P]})};for(f=0,g=S.length;f<g;f+=1)x();return k},b.getBrowserAlias=function(k){return _.BROWSER_ALIASES_MAP[k]},b.getBrowserTypeByAlias=function(k){return _.BROWSER_MAP[k]||""},b}();o.default=h,p.exports=o.default},18:function(p,o,C){o.__esModule=!0,o.ENGINE_MAP=o.OS_MAP=o.PLATFORMS_MAP=o.BROWSER_MAP=o.BROWSER_ALIASES_MAP=void 0,o.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},o.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},o.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},o.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},o.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(p,o,C){o.__esModule=!0,o.default=void 0;var _,h=(_=C(91))&&_.__esModule?_:{default:_},b=C(18);function k(g,s){for(var w=0;w<s.length;w++){var S=s[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}var f=function(){function g(){}var s,w,S;return g.getParser=function(T,x){if(x===void 0&&(x=!1),typeof T!="string")throw new Error("UserAgent should be a string");return new h.default(T,x)},g.parse=function(T){return new h.default(T).getResult()},s=g,S=[{key:"BROWSER_MAP",get:function(){return b.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return b.ENGINE_MAP}},{key:"OS_MAP",get:function(){return b.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return b.PLATFORMS_MAP}}],(w=null)&&k(s.prototype,w),S&&k(s,S),g}();o.default=f,p.exports=o.default},91:function(p,o,C){o.__esModule=!0,o.default=void 0;var _=g(C(92)),h=g(C(93)),b=g(C(94)),k=g(C(95)),f=g(C(17));function g(w){return w&&w.__esModule?w:{default:w}}var s=function(){function w(T,x){if(x===void 0&&(x=!1),T==null||T==="")throw new Error("UserAgent parameter can't be empty");this._ua=T,this.parsedResult={},x!==!0&&this.parse()}var S=w.prototype;return S.getUA=function(){return this._ua},S.test=function(T){return T.test(this._ua)},S.parseBrowser=function(){var T=this;this.parsedResult.browser={};var x=f.default.find(_.default,function(O){if(typeof O.test=="function")return O.test(T);if(O.test instanceof Array)return O.test.some(function(P){return T.test(P)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.browser=x.describe(this.getUA())),this.parsedResult.browser},S.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},S.getBrowserName=function(T){return T?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},S.getBrowserVersion=function(){return this.getBrowser().version},S.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},S.parseOS=function(){var T=this;this.parsedResult.os={};var x=f.default.find(h.default,function(O){if(typeof O.test=="function")return O.test(T);if(O.test instanceof Array)return O.test.some(function(P){return T.test(P)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.os=x.describe(this.getUA())),this.parsedResult.os},S.getOSName=function(T){var x=this.getOS().name;return T?String(x).toLowerCase()||"":x||""},S.getOSVersion=function(){return this.getOS().version},S.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},S.getPlatformType=function(T){T===void 0&&(T=!1);var x=this.getPlatform().type;return T?String(x).toLowerCase()||"":x||""},S.parsePlatform=function(){var T=this;this.parsedResult.platform={};var x=f.default.find(b.default,function(O){if(typeof O.test=="function")return O.test(T);if(O.test instanceof Array)return O.test.some(function(P){return T.test(P)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.platform=x.describe(this.getUA())),this.parsedResult.platform},S.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},S.getEngineName=function(T){return T?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},S.parseEngine=function(){var T=this;this.parsedResult.engine={};var x=f.default.find(k.default,function(O){if(typeof O.test=="function")return O.test(T);if(O.test instanceof Array)return O.test.some(function(P){return T.test(P)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.engine=x.describe(this.getUA())),this.parsedResult.engine},S.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},S.getResult=function(){return f.default.assign({},this.parsedResult)},S.satisfies=function(T){var x=this,O={},P=0,R={},I=0;if(Object.keys(T).forEach(function(N){var L=T[N];typeof L=="string"?(R[N]=L,I+=1):typeof L=="object"&&(O[N]=L,P+=1)}),P>0){var d=Object.keys(O),v=f.default.find(d,function(N){return x.isOS(N)});if(v){var c=this.satisfies(O[v]);if(c!==void 0)return c}var u=f.default.find(d,function(N){return x.isPlatform(N)});if(u){var l=this.satisfies(O[u]);if(l!==void 0)return l}}if(I>0){var m=Object.keys(R),D=f.default.find(m,function(N){return x.isBrowser(N,!0)});if(D!==void 0)return this.compareVersion(R[D])}},S.isBrowser=function(T,x){x===void 0&&(x=!1);var O=this.getBrowserName().toLowerCase(),P=T.toLowerCase(),R=f.default.getBrowserTypeByAlias(P);return x&&R&&(P=R.toLowerCase()),P===O},S.compareVersion=function(T){var x=[0],O=T,P=!1,R=this.getBrowserVersion();if(typeof R=="string")return T[0]===">"||T[0]==="<"?(O=T.substr(1),T[1]==="="?(P=!0,O=T.substr(2)):x=[],T[0]===">"?x.push(1):x.push(-1)):T[0]==="="?O=T.substr(1):T[0]==="~"&&(P=!0,O=T.substr(1)),x.indexOf(f.default.compareVersions(R,O,P))>-1},S.isOS=function(T){return this.getOSName(!0)===String(T).toLowerCase()},S.isPlatform=function(T){return this.getPlatformType(!0)===String(T).toLowerCase()},S.isEngine=function(T){return this.getEngineName(!0)===String(T).toLowerCase()},S.is=function(T,x){return x===void 0&&(x=!1),this.isBrowser(T,x)||this.isOS(T)||this.isPlatform(T)},S.some=function(T){var x=this;return T===void 0&&(T=[]),T.some(function(O){return x.is(O)})},w}();o.default=s,p.exports=o.default},92:function(p,o,C){o.__esModule=!0,o.default=void 0;var _,h=(_=C(17))&&_.__esModule?_:{default:_},b=/version\/(\d+(\.?_?\d+)+)/i,k=[{test:[/googlebot/i],describe:function(f){var g={name:"Googlebot"},s=h.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,f)||h.default.getFirstMatch(b,f);return s&&(g.version=s),g}},{test:[/opera/i],describe:function(f){var g={name:"Opera"},s=h.default.getFirstMatch(b,f)||h.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/opr\/|opios/i],describe:function(f){var g={name:"Opera"},s=h.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,f)||h.default.getFirstMatch(b,f);return s&&(g.version=s),g}},{test:[/SamsungBrowser/i],describe:function(f){var g={name:"Samsung Internet for Android"},s=h.default.getFirstMatch(b,f)||h.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/Whale/i],describe:function(f){var g={name:"NAVER Whale Browser"},s=h.default.getFirstMatch(b,f)||h.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/MZBrowser/i],describe:function(f){var g={name:"MZ Browser"},s=h.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,f)||h.default.getFirstMatch(b,f);return s&&(g.version=s),g}},{test:[/focus/i],describe:function(f){var g={name:"Focus"},s=h.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,f)||h.default.getFirstMatch(b,f);return s&&(g.version=s),g}},{test:[/swing/i],describe:function(f){var g={name:"Swing"},s=h.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,f)||h.default.getFirstMatch(b,f);return s&&(g.version=s),g}},{test:[/coast/i],describe:function(f){var g={name:"Opera Coast"},s=h.default.getFirstMatch(b,f)||h.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(f){var g={name:"Opera Touch"},s=h.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,f)||h.default.getFirstMatch(b,f);return s&&(g.version=s),g}},{test:[/yabrowser/i],describe:function(f){var g={name:"Yandex Browser"},s=h.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,f)||h.default.getFirstMatch(b,f);return s&&(g.version=s),g}},{test:[/ucbrowser/i],describe:function(f){var g={name:"UC Browser"},s=h.default.getFirstMatch(b,f)||h.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/Maxthon|mxios/i],describe:function(f){var g={name:"Maxthon"},s=h.default.getFirstMatch(b,f)||h.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/epiphany/i],describe:function(f){var g={name:"Epiphany"},s=h.default.getFirstMatch(b,f)||h.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/puffin/i],describe:function(f){var g={name:"Puffin"},s=h.default.getFirstMatch(b,f)||h.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/sleipnir/i],describe:function(f){var g={name:"Sleipnir"},s=h.default.getFirstMatch(b,f)||h.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/k-meleon/i],describe:function(f){var g={name:"K-Meleon"},s=h.default.getFirstMatch(b,f)||h.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/micromessenger/i],describe:function(f){var g={name:"WeChat"},s=h.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,f)||h.default.getFirstMatch(b,f);return s&&(g.version=s),g}},{test:[/qqbrowser/i],describe:function(f){var g={name:/qqbrowserlite/i.test(f)?"QQ Browser Lite":"QQ Browser"},s=h.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,f)||h.default.getFirstMatch(b,f);return s&&(g.version=s),g}},{test:[/msie|trident/i],describe:function(f){var g={name:"Internet Explorer"},s=h.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/\sedg\//i],describe:function(f){var g={name:"Microsoft Edge"},s=h.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/edg([ea]|ios)/i],describe:function(f){var g={name:"Microsoft Edge"},s=h.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/vivaldi/i],describe:function(f){var g={name:"Vivaldi"},s=h.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/seamonkey/i],describe:function(f){var g={name:"SeaMonkey"},s=h.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/sailfish/i],describe:function(f){var g={name:"Sailfish"},s=h.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,f);return s&&(g.version=s),g}},{test:[/silk/i],describe:function(f){var g={name:"Amazon Silk"},s=h.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/phantom/i],describe:function(f){var g={name:"PhantomJS"},s=h.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/slimerjs/i],describe:function(f){var g={name:"SlimerJS"},s=h.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(f){var g={name:"BlackBerry"},s=h.default.getFirstMatch(b,f)||h.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/(web|hpw)[o0]s/i],describe:function(f){var g={name:"WebOS Browser"},s=h.default.getFirstMatch(b,f)||h.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/bada/i],describe:function(f){var g={name:"Bada"},s=h.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/tizen/i],describe:function(f){var g={name:"Tizen"},s=h.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,f)||h.default.getFirstMatch(b,f);return s&&(g.version=s),g}},{test:[/qupzilla/i],describe:function(f){var g={name:"QupZilla"},s=h.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,f)||h.default.getFirstMatch(b,f);return s&&(g.version=s),g}},{test:[/firefox|iceweasel|fxios/i],describe:function(f){var g={name:"Firefox"},s=h.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/electron/i],describe:function(f){var g={name:"Electron"},s=h.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/MiuiBrowser/i],describe:function(f){var g={name:"Miui"},s=h.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/chromium/i],describe:function(f){var g={name:"Chromium"},s=h.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,f)||h.default.getFirstMatch(b,f);return s&&(g.version=s),g}},{test:[/chrome|crios|crmo/i],describe:function(f){var g={name:"Chrome"},s=h.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/GSA/i],describe:function(f){var g={name:"Google Search"},s=h.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:function(f){var g=!f.test(/like android/i),s=f.test(/android/i);return g&&s},describe:function(f){var g={name:"Android Browser"},s=h.default.getFirstMatch(b,f);return s&&(g.version=s),g}},{test:[/playstation 4/i],describe:function(f){var g={name:"PlayStation 4"},s=h.default.getFirstMatch(b,f);return s&&(g.version=s),g}},{test:[/safari|applewebkit/i],describe:function(f){var g={name:"Safari"},s=h.default.getFirstMatch(b,f);return s&&(g.version=s),g}},{test:[/.*/i],describe:function(f){var g=f.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:h.default.getFirstMatch(g,f),version:h.default.getSecondMatch(g,f)}}}];o.default=k,p.exports=o.default},93:function(p,o,C){o.__esModule=!0,o.default=void 0;var _,h=(_=C(17))&&_.__esModule?_:{default:_},b=C(18),k=[{test:[/Roku\/DVP/],describe:function(f){var g=h.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,f);return{name:b.OS_MAP.Roku,version:g}}},{test:[/windows phone/i],describe:function(f){var g=h.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,f);return{name:b.OS_MAP.WindowsPhone,version:g}}},{test:[/windows /i],describe:function(f){var g=h.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,f),s=h.default.getWindowsVersionName(g);return{name:b.OS_MAP.Windows,version:g,versionName:s}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(f){var g={name:b.OS_MAP.iOS},s=h.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,f);return s&&(g.version=s),g}},{test:[/macintosh/i],describe:function(f){var g=h.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,f).replace(/[_\s]/g,"."),s=h.default.getMacOSVersionName(g),w={name:b.OS_MAP.MacOS,version:g};return s&&(w.versionName=s),w}},{test:[/(ipod|iphone|ipad)/i],describe:function(f){var g=h.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,f).replace(/[_\s]/g,".");return{name:b.OS_MAP.iOS,version:g}}},{test:function(f){var g=!f.test(/like android/i),s=f.test(/android/i);return g&&s},describe:function(f){var g=h.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,f),s=h.default.getAndroidVersionName(g),w={name:b.OS_MAP.Android,version:g};return s&&(w.versionName=s),w}},{test:[/(web|hpw)[o0]s/i],describe:function(f){var g=h.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,f),s={name:b.OS_MAP.WebOS};return g&&g.length&&(s.version=g),s}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(f){var g=h.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,f)||h.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,f)||h.default.getFirstMatch(/\bbb(\d+)/i,f);return{name:b.OS_MAP.BlackBerry,version:g}}},{test:[/bada/i],describe:function(f){var g=h.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,f);return{name:b.OS_MAP.Bada,version:g}}},{test:[/tizen/i],describe:function(f){var g=h.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,f);return{name:b.OS_MAP.Tizen,version:g}}},{test:[/linux/i],describe:function(){return{name:b.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:b.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(f){var g=h.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,f);return{name:b.OS_MAP.PlayStation4,version:g}}}];o.default=k,p.exports=o.default},94:function(p,o,C){o.__esModule=!0,o.default=void 0;var _,h=(_=C(17))&&_.__esModule?_:{default:_},b=C(18),k=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(f){var g=h.default.getFirstMatch(/(can-l01)/i,f)&&"Nova",s={type:b.PLATFORMS_MAP.mobile,vendor:"Huawei"};return g&&(s.model=g),s}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:b.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:b.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:b.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:b.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:b.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:b.PLATFORMS_MAP.tablet}}},{test:function(f){var g=f.test(/ipod|iphone/i),s=f.test(/like (ipod|iphone)/i);return g&&!s},describe:function(f){var g=h.default.getFirstMatch(/(ipod|iphone)/i,f);return{type:b.PLATFORMS_MAP.mobile,vendor:"Apple",model:g}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:b.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:b.PLATFORMS_MAP.mobile}}},{test:function(f){return f.getBrowserName(!0)==="blackberry"},describe:function(){return{type:b.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(f){return f.getBrowserName(!0)==="bada"},describe:function(){return{type:b.PLATFORMS_MAP.mobile}}},{test:function(f){return f.getBrowserName()==="windows phone"},describe:function(){return{type:b.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(f){var g=Number(String(f.getOSVersion()).split(".")[0]);return f.getOSName(!0)==="android"&&g>=3},describe:function(){return{type:b.PLATFORMS_MAP.tablet}}},{test:function(f){return f.getOSName(!0)==="android"},describe:function(){return{type:b.PLATFORMS_MAP.mobile}}},{test:function(f){return f.getOSName(!0)==="macos"},describe:function(){return{type:b.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(f){return f.getOSName(!0)==="windows"},describe:function(){return{type:b.PLATFORMS_MAP.desktop}}},{test:function(f){return f.getOSName(!0)==="linux"},describe:function(){return{type:b.PLATFORMS_MAP.desktop}}},{test:function(f){return f.getOSName(!0)==="playstation 4"},describe:function(){return{type:b.PLATFORMS_MAP.tv}}},{test:function(f){return f.getOSName(!0)==="roku"},describe:function(){return{type:b.PLATFORMS_MAP.tv}}}];o.default=k,p.exports=o.default},95:function(p,o,C){o.__esModule=!0,o.default=void 0;var _,h=(_=C(17))&&_.__esModule?_:{default:_},b=C(18),k=[{test:function(f){return f.getBrowserName(!0)==="microsoft edge"},describe:function(f){if(/\sedg\//i.test(f))return{name:b.ENGINE_MAP.Blink};var g=h.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,f);return{name:b.ENGINE_MAP.EdgeHTML,version:g}}},{test:[/trident/i],describe:function(f){var g={name:b.ENGINE_MAP.Trident},s=h.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:function(f){return f.test(/presto/i)},describe:function(f){var g={name:b.ENGINE_MAP.Presto},s=h.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:function(f){var g=f.test(/gecko/i),s=f.test(/like gecko/i);return g&&!s},describe:function(f){var g={name:b.ENGINE_MAP.Gecko},s=h.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:b.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(f){var g={name:b.ENGINE_MAP.WebKit},s=h.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}}];o.default=k,p.exports=o.default}})},955:function(E,p,o){var C;E.exports=(C=o(9021),o(754),o(4636),o(9506),o(7165),function(){var _=C,h=_.lib.BlockCipher,b=_.algo,k=[],f=[],g=[],s=[],w=[],S=[],T=[],x=[],O=[],P=[];(function(){for(var d=[],v=0;v<256;v++)d[v]=v<128?v<<1:v<<1^283;var c=0,u=0;for(v=0;v<256;v++){var l=u^u<<1^u<<2^u<<3^u<<4;l=l>>>8^255&l^99,k[c]=l,f[l]=c;var m=d[c],D=d[m],N=d[D],L=257*d[l]^16843008*l;g[c]=L<<24|L>>>8,s[c]=L<<16|L>>>16,w[c]=L<<8|L>>>24,S[c]=L,L=16843009*N^65537*D^257*m^16843008*c,T[l]=L<<24|L>>>8,x[l]=L<<16|L>>>16,O[l]=L<<8|L>>>24,P[l]=L,c?(c=m^d[d[d[N^m]]],u^=d[d[u]]):c=u=1}})();var R=[0,1,2,4,8,16,32,64,128,27,54],I=b.AES=h.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var d=this._keyPriorReset=this._key,v=d.words,c=d.sigBytes/4,u=4*((this._nRounds=c+6)+1),l=this._keySchedule=[],m=0;m<u;m++)m<c?l[m]=v[m]:(L=l[m-1],m%c?c>6&&m%c==4&&(L=k[L>>>24]<<24|k[L>>>16&255]<<16|k[L>>>8&255]<<8|k[255&L]):(L=k[(L=L<<8|L>>>24)>>>24]<<24|k[L>>>16&255]<<16|k[L>>>8&255]<<8|k[255&L],L^=R[m/c|0]<<24),l[m]=l[m-c]^L);for(var D=this._invKeySchedule=[],N=0;N<u;N++){if(m=u-N,N%4)var L=l[m];else L=l[m-4];D[N]=N<4||m<=4?L:T[k[L>>>24]]^x[k[L>>>16&255]]^O[k[L>>>8&255]]^P[k[255&L]]}}},encryptBlock:function(d,v){this._doCryptBlock(d,v,this._keySchedule,g,s,w,S,k)},decryptBlock:function(d,v){var c=d[v+1];d[v+1]=d[v+3],d[v+3]=c,this._doCryptBlock(d,v,this._invKeySchedule,T,x,O,P,f),c=d[v+1],d[v+1]=d[v+3],d[v+3]=c},_doCryptBlock:function(d,v,c,u,l,m,D,N){for(var L=this._nRounds,j=d[v]^c[0],V=d[v+1]^c[1],$=d[v+2]^c[2],Z=d[v+3]^c[3],ne=4,pe=1;pe<L;pe++){var ge=u[j>>>24]^l[V>>>16&255]^m[$>>>8&255]^D[255&Z]^c[ne++],_e=u[V>>>24]^l[$>>>16&255]^m[Z>>>8&255]^D[255&j]^c[ne++],Me=u[$>>>24]^l[Z>>>16&255]^m[j>>>8&255]^D[255&V]^c[ne++],me=u[Z>>>24]^l[j>>>16&255]^m[V>>>8&255]^D[255&$]^c[ne++];j=ge,V=_e,$=Me,Z=me}ge=(N[j>>>24]<<24|N[V>>>16&255]<<16|N[$>>>8&255]<<8|N[255&Z])^c[ne++],_e=(N[V>>>24]<<24|N[$>>>16&255]<<16|N[Z>>>8&255]<<8|N[255&j])^c[ne++],Me=(N[$>>>24]<<24|N[Z>>>16&255]<<16|N[j>>>8&255]<<8|N[255&V])^c[ne++],me=(N[Z>>>24]<<24|N[j>>>16&255]<<16|N[V>>>8&255]<<8|N[255&$])^c[ne++],d[v]=ge,d[v+1]=_e,d[v+2]=Me,d[v+3]=me},keySize:8});_.AES=h._createHelper(I)}(),C.AES)},3128:function(E,p,o){var C;E.exports=(C=o(9021),o(754),o(4636),o(9506),o(7165),function(){var _=C,h=_.lib.BlockCipher,b=_.algo;const k=16,f=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],g=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var s={pbox:[],sbox:[]};function w(P,R){let I=R>>24&255,d=R>>16&255,v=R>>8&255,c=255&R,u=P.sbox[0][I]+P.sbox[1][d];return u^=P.sbox[2][v],u+=P.sbox[3][c],u}function S(P,R,I){let d,v=R,c=I;for(let u=0;u<k;++u)v^=P.pbox[u],c=w(P,v)^c,d=v,v=c,c=d;return d=v,v=c,c=d,c^=P.pbox[k],v^=P.pbox[k+1],{left:v,right:c}}function T(P,R,I){let d,v=R,c=I;for(let u=k+1;u>1;--u)v^=P.pbox[u],c=w(P,v)^c,d=v,v=c,c=d;return d=v,v=c,c=d,c^=P.pbox[1],v^=P.pbox[0],{left:v,right:c}}function x(P,R,I){for(let l=0;l<4;l++){P.sbox[l]=[];for(let m=0;m<256;m++)P.sbox[l][m]=g[l][m]}let d=0;for(let l=0;l<k+2;l++)P.pbox[l]=f[l]^R[d],d++,d>=I&&(d=0);let v=0,c=0,u=0;for(let l=0;l<k+2;l+=2)u=S(P,v,c),v=u.left,c=u.right,P.pbox[l]=v,P.pbox[l+1]=c;for(let l=0;l<4;l++)for(let m=0;m<256;m+=2)u=S(P,v,c),v=u.left,c=u.right,P.sbox[l][m]=v,P.sbox[l][m+1]=c;return!0}var O=b.Blowfish=h.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var P=this._keyPriorReset=this._key,R=P.words,I=P.sigBytes/4;x(s,R,I)}},encryptBlock:function(P,R){var I=S(s,P[R],P[R+1]);P[R]=I.left,P[R+1]=I.right},decryptBlock:function(P,R){var I=T(s,P[R],P[R+1]);P[R]=I.left,P[R+1]=I.right},blockSize:2,keySize:4,ivSize:2});_.Blowfish=h._createHelper(O)}(),C.Blowfish)},7165:function(E,p,o){var C;E.exports=(C=o(9021),o(9506),void(C.lib.Cipher||function(_){var h=C,b=h.lib,k=b.Base,f=b.WordArray,g=b.BufferedBlockAlgorithm,s=h.enc,w=(s.Utf8,s.Base64),S=h.algo.EvpKDF,T=b.Cipher=g.extend({cfg:k.extend(),createEncryptor:function(l,m){return this.create(this._ENC_XFORM_MODE,l,m)},createDecryptor:function(l,m){return this.create(this._DEC_XFORM_MODE,l,m)},init:function(l,m,D){this.cfg=this.cfg.extend(D),this._xformMode=l,this._key=m,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(l){return this._append(l),this._process()},finalize:function(l){return l&&this._append(l),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function l(m){return typeof m=="string"?u:v}return function(m){return{encrypt:function(D,N,L){return l(N).encrypt(m,D,N,L)},decrypt:function(D,N,L){return l(N).decrypt(m,D,N,L)}}}}()}),x=(b.StreamCipher=T.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),h.mode={}),O=b.BlockCipherMode=k.extend({createEncryptor:function(l,m){return this.Encryptor.create(l,m)},createDecryptor:function(l,m){return this.Decryptor.create(l,m)},init:function(l,m){this._cipher=l,this._iv=m}}),P=x.CBC=function(){var l=O.extend();function m(D,N,L){var j,V=this._iv;V?(j=V,this._iv=_):j=this._prevBlock;for(var $=0;$<L;$++)D[N+$]^=j[$]}return l.Encryptor=l.extend({processBlock:function(D,N){var L=this._cipher,j=L.blockSize;m.call(this,D,N,j),L.encryptBlock(D,N),this._prevBlock=D.slice(N,N+j)}}),l.Decryptor=l.extend({processBlock:function(D,N){var L=this._cipher,j=L.blockSize,V=D.slice(N,N+j);L.decryptBlock(D,N),m.call(this,D,N,j),this._prevBlock=V}}),l}(),R=(h.pad={}).Pkcs7={pad:function(l,m){for(var D=4*m,N=D-l.sigBytes%D,L=N<<24|N<<16|N<<8|N,j=[],V=0;V<N;V+=4)j.push(L);var $=f.create(j,N);l.concat($)},unpad:function(l){var m=255&l.words[l.sigBytes-1>>>2];l.sigBytes-=m}},I=(b.BlockCipher=T.extend({cfg:T.cfg.extend({mode:P,padding:R}),reset:function(){var l;T.reset.call(this);var m=this.cfg,D=m.iv,N=m.mode;this._xformMode==this._ENC_XFORM_MODE?l=N.createEncryptor:(l=N.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==l?this._mode.init(this,D&&D.words):(this._mode=l.call(N,this,D&&D.words),this._mode.__creator=l)},_doProcessBlock:function(l,m){this._mode.processBlock(l,m)},_doFinalize:function(){var l,m=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(m.pad(this._data,this.blockSize),l=this._process(!0)):(l=this._process(!0),m.unpad(l)),l},blockSize:4}),b.CipherParams=k.extend({init:function(l){this.mixIn(l)},toString:function(l){return(l||this.formatter).stringify(this)}})),d=(h.format={}).OpenSSL={stringify:function(l){var m=l.ciphertext,D=l.salt;return(D?f.create([1398893684,1701076831]).concat(D).concat(m):m).toString(w)},parse:function(l){var m,D=w.parse(l),N=D.words;return N[0]==1398893684&&N[1]==1701076831&&(m=f.create(N.slice(2,4)),N.splice(0,4),D.sigBytes-=16),I.create({ciphertext:D,salt:m})}},v=b.SerializableCipher=k.extend({cfg:k.extend({format:d}),encrypt:function(l,m,D,N){N=this.cfg.extend(N);var L=l.createEncryptor(D,N),j=L.finalize(m),V=L.cfg;return I.create({ciphertext:j,key:D,iv:V.iv,algorithm:l,mode:V.mode,padding:V.padding,blockSize:l.blockSize,formatter:N.format})},decrypt:function(l,m,D,N){return N=this.cfg.extend(N),m=this._parse(m,N.format),l.createDecryptor(D,N).finalize(m.ciphertext)},_parse:function(l,m){return typeof l=="string"?m.parse(l,this):l}}),c=(h.kdf={}).OpenSSL={execute:function(l,m,D,N,L){if(N||(N=f.random(8)),L)j=S.create({keySize:m+D,hasher:L}).compute(l,N);else var j=S.create({keySize:m+D}).compute(l,N);var V=f.create(j.words.slice(m),4*D);return j.sigBytes=4*m,I.create({key:j,iv:V,salt:N})}},u=b.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:c}),encrypt:function(l,m,D,N){var L=(N=this.cfg.extend(N)).kdf.execute(D,l.keySize,l.ivSize,N.salt,N.hasher);N.iv=L.iv;var j=v.encrypt.call(this,l,m,L.key,N);return j.mixIn(L),j},decrypt:function(l,m,D,N){N=this.cfg.extend(N),m=this._parse(m,N.format);var L=N.kdf.execute(D,l.keySize,l.ivSize,m.salt,N.hasher);return N.iv=L.iv,v.decrypt.call(this,l,m,L.key,N)}})}()))},9021:function(E,p,o){var C;E.exports=(C=C||function(_,h){var b;if(typeof window<"u"&&window.crypto&&(b=window.crypto),typeof self<"u"&&self.crypto&&(b=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(b=globalThis.crypto),!b&&typeof window<"u"&&window.msCrypto&&(b=window.msCrypto),!b&&o.g!==void 0&&o.g.crypto&&(b=o.g.crypto),!b)try{b=o(477)}catch{}var k=function(){if(b){if(typeof b.getRandomValues=="function")try{return b.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof b.randomBytes=="function")try{return b.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},f=Object.create||function(){function d(){}return function(v){var c;return d.prototype=v,c=new d,d.prototype=null,c}}(),g={},s=g.lib={},w=s.Base={extend:function(d){var v=f(this);return d&&v.mixIn(d),v.hasOwnProperty("init")&&this.init!==v.init||(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var d=this.extend();return d.init.apply(d,arguments),d},init:function(){},mixIn:function(d){for(var v in d)d.hasOwnProperty(v)&&(this[v]=d[v]);d.hasOwnProperty("toString")&&(this.toString=d.toString)},clone:function(){return this.init.prototype.extend(this)}},S=s.WordArray=w.extend({init:function(d,v){d=this.words=d||[],this.sigBytes=v!=h?v:4*d.length},toString:function(d){return(d||x).stringify(this)},concat:function(d){var v=this.words,c=d.words,u=this.sigBytes,l=d.sigBytes;if(this.clamp(),u%4)for(var m=0;m<l;m++){var D=c[m>>>2]>>>24-m%4*8&255;v[u+m>>>2]|=D<<24-(u+m)%4*8}else for(var N=0;N<l;N+=4)v[u+N>>>2]=c[N>>>2];return this.sigBytes+=l,this},clamp:function(){var d=this.words,v=this.sigBytes;d[v>>>2]&=4294967295<<32-v%4*8,d.length=_.ceil(v/4)},clone:function(){var d=w.clone.call(this);return d.words=this.words.slice(0),d},random:function(d){for(var v=[],c=0;c<d;c+=4)v.push(k());return new S.init(v,d)}}),T=g.enc={},x=T.Hex={stringify:function(d){for(var v=d.words,c=d.sigBytes,u=[],l=0;l<c;l++){var m=v[l>>>2]>>>24-l%4*8&255;u.push((m>>>4).toString(16)),u.push((15&m).toString(16))}return u.join("")},parse:function(d){for(var v=d.length,c=[],u=0;u<v;u+=2)c[u>>>3]|=parseInt(d.substr(u,2),16)<<24-u%8*4;return new S.init(c,v/2)}},O=T.Latin1={stringify:function(d){for(var v=d.words,c=d.sigBytes,u=[],l=0;l<c;l++){var m=v[l>>>2]>>>24-l%4*8&255;u.push(String.fromCharCode(m))}return u.join("")},parse:function(d){for(var v=d.length,c=[],u=0;u<v;u++)c[u>>>2]|=(255&d.charCodeAt(u))<<24-u%4*8;return new S.init(c,v)}},P=T.Utf8={stringify:function(d){try{return decodeURIComponent(escape(O.stringify(d)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(d){return O.parse(unescape(encodeURIComponent(d)))}},R=s.BufferedBlockAlgorithm=w.extend({reset:function(){this._data=new S.init,this._nDataBytes=0},_append:function(d){typeof d=="string"&&(d=P.parse(d)),this._data.concat(d),this._nDataBytes+=d.sigBytes},_process:function(d){var v,c=this._data,u=c.words,l=c.sigBytes,m=this.blockSize,D=l/(4*m),N=(D=d?_.ceil(D):_.max((0|D)-this._minBufferSize,0))*m,L=_.min(4*N,l);if(N){for(var j=0;j<N;j+=m)this._doProcessBlock(u,j);v=u.splice(0,N),c.sigBytes-=L}return new S.init(v,L)},clone:function(){var d=w.clone.call(this);return d._data=this._data.clone(),d},_minBufferSize:0}),I=(s.Hasher=R.extend({cfg:w.extend(),init:function(d){this.cfg=this.cfg.extend(d),this.reset()},reset:function(){R.reset.call(this),this._doReset()},update:function(d){return this._append(d),this._process(),this},finalize:function(d){return d&&this._append(d),this._doFinalize()},blockSize:16,_createHelper:function(d){return function(v,c){return new d.init(c).finalize(v)}},_createHmacHelper:function(d){return function(v,c){return new I.HMAC.init(d,c).finalize(v)}}}),g.algo={});return g}(Math),C)},754:function(E,p,o){var C;E.exports=(C=o(9021),function(){var _=C,h=_.lib.WordArray;function b(k,f,g){for(var s=[],w=0,S=0;S<f;S++)if(S%4){var T=g[k.charCodeAt(S-1)]<<S%4*2|g[k.charCodeAt(S)]>>>6-S%4*2;s[w>>>2]|=T<<24-w%4*8,w++}return h.create(s,w)}_.enc.Base64={stringify:function(k){var f=k.words,g=k.sigBytes,s=this._map;k.clamp();for(var w=[],S=0;S<g;S+=3)for(var T=(f[S>>>2]>>>24-S%4*8&255)<<16|(f[S+1>>>2]>>>24-(S+1)%4*8&255)<<8|f[S+2>>>2]>>>24-(S+2)%4*8&255,x=0;x<4&&S+.75*x<g;x++)w.push(s.charAt(T>>>6*(3-x)&63));var O=s.charAt(64);if(O)for(;w.length%4;)w.push(O);return w.join("")},parse:function(k){var f=k.length,g=this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var w=0;w<g.length;w++)s[g.charCodeAt(w)]=w}var S=g.charAt(64);if(S){var T=k.indexOf(S);T!==-1&&(f=T)}return b(k,f,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),C.enc.Base64)},4725:function(E,p,o){var C;E.exports=(C=o(9021),function(){var _=C,h=_.lib.WordArray;function b(k,f,g){for(var s=[],w=0,S=0;S<f;S++)if(S%4){var T=g[k.charCodeAt(S-1)]<<S%4*2|g[k.charCodeAt(S)]>>>6-S%4*2;s[w>>>2]|=T<<24-w%4*8,w++}return h.create(s,w)}_.enc.Base64url={stringify:function(k,f){f===void 0&&(f=!0);var g=k.words,s=k.sigBytes,w=f?this._safe_map:this._map;k.clamp();for(var S=[],T=0;T<s;T+=3)for(var x=(g[T>>>2]>>>24-T%4*8&255)<<16|(g[T+1>>>2]>>>24-(T+1)%4*8&255)<<8|g[T+2>>>2]>>>24-(T+2)%4*8&255,O=0;O<4&&T+.75*O<s;O++)S.push(w.charAt(x>>>6*(3-O)&63));var P=w.charAt(64);if(P)for(;S.length%4;)S.push(P);return S.join("")},parse:function(k,f){f===void 0&&(f=!0);var g=k.length,s=f?this._safe_map:this._map,w=this._reverseMap;if(!w){w=this._reverseMap=[];for(var S=0;S<s.length;S++)w[s.charCodeAt(S)]=S}var T=s.charAt(64);if(T){var x=k.indexOf(T);x!==-1&&(g=x)}return b(k,g,w)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),C.enc.Base64url)},5503:function(E,p,o){var C;E.exports=(C=o(9021),function(){var _=C,h=_.lib.WordArray,b=_.enc;function k(f){return f<<8&4278255360|f>>>8&16711935}b.Utf16=b.Utf16BE={stringify:function(f){for(var g=f.words,s=f.sigBytes,w=[],S=0;S<s;S+=2){var T=g[S>>>2]>>>16-S%4*8&65535;w.push(String.fromCharCode(T))}return w.join("")},parse:function(f){for(var g=f.length,s=[],w=0;w<g;w++)s[w>>>1]|=f.charCodeAt(w)<<16-w%2*16;return h.create(s,2*g)}},b.Utf16LE={stringify:function(f){for(var g=f.words,s=f.sigBytes,w=[],S=0;S<s;S+=2){var T=k(g[S>>>2]>>>16-S%4*8&65535);w.push(String.fromCharCode(T))}return w.join("")},parse:function(f){for(var g=f.length,s=[],w=0;w<g;w++)s[w>>>1]|=k(f.charCodeAt(w)<<16-w%2*16);return h.create(s,2*g)}}}(),C.enc.Utf16)},9506:function(E,p,o){var C,_,h,b,k,f,g,s;E.exports=(s=o(9021),o(5471),o(1025),_=(C=s).lib,h=_.Base,b=_.WordArray,k=C.algo,f=k.MD5,g=k.EvpKDF=h.extend({cfg:h.extend({keySize:4,hasher:f,iterations:1}),init:function(w){this.cfg=this.cfg.extend(w)},compute:function(w,S){for(var T,x=this.cfg,O=x.hasher.create(),P=b.create(),R=P.words,I=x.keySize,d=x.iterations;R.length<I;){T&&O.update(T),T=O.update(w).finalize(S),O.reset();for(var v=1;v<d;v++)T=O.finalize(T),O.reset();P.concat(T)}return P.sigBytes=4*I,P}}),C.EvpKDF=function(w,S,T){return g.create(T).compute(w,S)},s.EvpKDF)},25:function(E,p,o){var C,_,h,b;E.exports=(b=o(9021),o(7165),_=(C=b).lib.CipherParams,h=C.enc.Hex,C.format.Hex={stringify:function(k){return k.ciphertext.toString(h)},parse:function(k){var f=h.parse(k);return _.create({ciphertext:f})}},b.format.Hex)},1025:function(E,p,o){var C,_,h,b;E.exports=(C=o(9021),h=(_=C).lib.Base,b=_.enc.Utf8,void(_.algo.HMAC=h.extend({init:function(k,f){k=this._hasher=new k.init,typeof f=="string"&&(f=b.parse(f));var g=k.blockSize,s=4*g;f.sigBytes>s&&(f=k.finalize(f)),f.clamp();for(var w=this._oKey=f.clone(),S=this._iKey=f.clone(),T=w.words,x=S.words,O=0;O<g;O++)T[O]^=1549556828,x[O]^=909522486;w.sigBytes=S.sigBytes=s,this.reset()},reset:function(){var k=this._hasher;k.reset(),k.update(this._iKey)},update:function(k){return this._hasher.update(k),this},finalize:function(k){var f=this._hasher,g=f.finalize(k);return f.reset(),f.finalize(this._oKey.clone().concat(g))}})))},1396:function(E,p,o){var C;E.exports=(C=o(9021),o(3240),o(6440),o(5503),o(754),o(4725),o(4636),o(5471),o(3009),o(6308),o(1380),o(9557),o(5953),o(8056),o(1025),o(19),o(9506),o(7165),o(2169),o(6939),o(6372),o(3797),o(8454),o(2073),o(4905),o(482),o(2155),o(8124),o(25),o(955),o(7628),o(7193),o(6298),o(2696),o(3128),C)},6440:function(E,p,o){var C;E.exports=(C=o(9021),function(){if(typeof ArrayBuffer=="function"){var _=C.lib.WordArray,h=_.init,b=_.init=function(k){if(k instanceof ArrayBuffer&&(k=new Uint8Array(k)),(k instanceof Int8Array||typeof Uint8ClampedArray<"u"&&k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array)&&(k=new Uint8Array(k.buffer,k.byteOffset,k.byteLength)),k instanceof Uint8Array){for(var f=k.byteLength,g=[],s=0;s<f;s++)g[s>>>2]|=k[s]<<24-s%4*8;h.call(this,g,f)}else h.apply(this,arguments)};b.prototype=_}}(),C.lib.WordArray)},4636:function(E,p,o){var C;E.exports=(C=o(9021),function(_){var h=C,b=h.lib,k=b.WordArray,f=b.Hasher,g=h.algo,s=[];(function(){for(var P=0;P<64;P++)s[P]=4294967296*_.abs(_.sin(P+1))|0})();var w=g.MD5=f.extend({_doReset:function(){this._hash=new k.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(P,R){for(var I=0;I<16;I++){var d=R+I,v=P[d];P[d]=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8)}var c=this._hash.words,u=P[R+0],l=P[R+1],m=P[R+2],D=P[R+3],N=P[R+4],L=P[R+5],j=P[R+6],V=P[R+7],$=P[R+8],Z=P[R+9],ne=P[R+10],pe=P[R+11],ge=P[R+12],_e=P[R+13],Me=P[R+14],me=P[R+15],oe=c[0],ve=c[1],we=c[2],be=c[3];oe=S(oe,ve,we,be,u,7,s[0]),be=S(be,oe,ve,we,l,12,s[1]),we=S(we,be,oe,ve,m,17,s[2]),ve=S(ve,we,be,oe,D,22,s[3]),oe=S(oe,ve,we,be,N,7,s[4]),be=S(be,oe,ve,we,L,12,s[5]),we=S(we,be,oe,ve,j,17,s[6]),ve=S(ve,we,be,oe,V,22,s[7]),oe=S(oe,ve,we,be,$,7,s[8]),be=S(be,oe,ve,we,Z,12,s[9]),we=S(we,be,oe,ve,ne,17,s[10]),ve=S(ve,we,be,oe,pe,22,s[11]),oe=S(oe,ve,we,be,ge,7,s[12]),be=S(be,oe,ve,we,_e,12,s[13]),we=S(we,be,oe,ve,Me,17,s[14]),oe=T(oe,ve=S(ve,we,be,oe,me,22,s[15]),we,be,l,5,s[16]),be=T(be,oe,ve,we,j,9,s[17]),we=T(we,be,oe,ve,pe,14,s[18]),ve=T(ve,we,be,oe,u,20,s[19]),oe=T(oe,ve,we,be,L,5,s[20]),be=T(be,oe,ve,we,ne,9,s[21]),we=T(we,be,oe,ve,me,14,s[22]),ve=T(ve,we,be,oe,N,20,s[23]),oe=T(oe,ve,we,be,Z,5,s[24]),be=T(be,oe,ve,we,Me,9,s[25]),we=T(we,be,oe,ve,D,14,s[26]),ve=T(ve,we,be,oe,$,20,s[27]),oe=T(oe,ve,we,be,_e,5,s[28]),be=T(be,oe,ve,we,m,9,s[29]),we=T(we,be,oe,ve,V,14,s[30]),oe=x(oe,ve=T(ve,we,be,oe,ge,20,s[31]),we,be,L,4,s[32]),be=x(be,oe,ve,we,$,11,s[33]),we=x(we,be,oe,ve,pe,16,s[34]),ve=x(ve,we,be,oe,Me,23,s[35]),oe=x(oe,ve,we,be,l,4,s[36]),be=x(be,oe,ve,we,N,11,s[37]),we=x(we,be,oe,ve,V,16,s[38]),ve=x(ve,we,be,oe,ne,23,s[39]),oe=x(oe,ve,we,be,_e,4,s[40]),be=x(be,oe,ve,we,u,11,s[41]),we=x(we,be,oe,ve,D,16,s[42]),ve=x(ve,we,be,oe,j,23,s[43]),oe=x(oe,ve,we,be,Z,4,s[44]),be=x(be,oe,ve,we,ge,11,s[45]),we=x(we,be,oe,ve,me,16,s[46]),oe=O(oe,ve=x(ve,we,be,oe,m,23,s[47]),we,be,u,6,s[48]),be=O(be,oe,ve,we,V,10,s[49]),we=O(we,be,oe,ve,Me,15,s[50]),ve=O(ve,we,be,oe,L,21,s[51]),oe=O(oe,ve,we,be,ge,6,s[52]),be=O(be,oe,ve,we,D,10,s[53]),we=O(we,be,oe,ve,ne,15,s[54]),ve=O(ve,we,be,oe,l,21,s[55]),oe=O(oe,ve,we,be,$,6,s[56]),be=O(be,oe,ve,we,me,10,s[57]),we=O(we,be,oe,ve,j,15,s[58]),ve=O(ve,we,be,oe,_e,21,s[59]),oe=O(oe,ve,we,be,N,6,s[60]),be=O(be,oe,ve,we,pe,10,s[61]),we=O(we,be,oe,ve,m,15,s[62]),ve=O(ve,we,be,oe,Z,21,s[63]),c[0]=c[0]+oe|0,c[1]=c[1]+ve|0,c[2]=c[2]+we|0,c[3]=c[3]+be|0},_doFinalize:function(){var P=this._data,R=P.words,I=8*this._nDataBytes,d=8*P.sigBytes;R[d>>>5]|=128<<24-d%32;var v=_.floor(I/4294967296),c=I;R[15+(d+64>>>9<<4)]=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8),R[14+(d+64>>>9<<4)]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),P.sigBytes=4*(R.length+1),this._process();for(var u=this._hash,l=u.words,m=0;m<4;m++){var D=l[m];l[m]=16711935&(D<<8|D>>>24)|4278255360&(D<<24|D>>>8)}return u},clone:function(){var P=f.clone.call(this);return P._hash=this._hash.clone(),P}});function S(P,R,I,d,v,c,u){var l=P+(R&I|~R&d)+v+u;return(l<<c|l>>>32-c)+R}function T(P,R,I,d,v,c,u){var l=P+(R&d|I&~d)+v+u;return(l<<c|l>>>32-c)+R}function x(P,R,I,d,v,c,u){var l=P+(R^I^d)+v+u;return(l<<c|l>>>32-c)+R}function O(P,R,I,d,v,c,u){var l=P+(I^(R|~d))+v+u;return(l<<c|l>>>32-c)+R}h.MD5=f._createHelper(w),h.HmacMD5=f._createHmacHelper(w)}(Math),C.MD5)},2169:function(E,p,o){var C;E.exports=(C=o(9021),o(7165),C.mode.CFB=function(){var _=C.lib.BlockCipherMode.extend();function h(b,k,f,g){var s,w=this._iv;w?(s=w.slice(0),this._iv=void 0):s=this._prevBlock,g.encryptBlock(s,0);for(var S=0;S<f;S++)b[k+S]^=s[S]}return _.Encryptor=_.extend({processBlock:function(b,k){var f=this._cipher,g=f.blockSize;h.call(this,b,k,g,f),this._prevBlock=b.slice(k,k+g)}}),_.Decryptor=_.extend({processBlock:function(b,k){var f=this._cipher,g=f.blockSize,s=b.slice(k,k+g);h.call(this,b,k,g,f),this._prevBlock=s}}),_}(),C.mode.CFB)},6372:function(E,p,o){var C;E.exports=(C=o(9021),o(7165),C.mode.CTRGladman=function(){var _=C.lib.BlockCipherMode.extend();function h(f){if(255&~(f>>24))f+=16777216;else{var g=f>>16&255,s=f>>8&255,w=255&f;g===255?(g=0,s===255?(s=0,w===255?w=0:++w):++s):++g,f=0,f+=g<<16,f+=s<<8,f+=w}return f}function b(f){return(f[0]=h(f[0]))===0&&(f[1]=h(f[1])),f}var k=_.Encryptor=_.extend({processBlock:function(f,g){var s=this._cipher,w=s.blockSize,S=this._iv,T=this._counter;S&&(T=this._counter=S.slice(0),this._iv=void 0),b(T);var x=T.slice(0);s.encryptBlock(x,0);for(var O=0;O<w;O++)f[g+O]^=x[O]}});return _.Decryptor=k,_}(),C.mode.CTRGladman)},6939:function(E,p,o){var C,_,h;E.exports=(h=o(9021),o(7165),h.mode.CTR=(C=h.lib.BlockCipherMode.extend(),_=C.Encryptor=C.extend({processBlock:function(b,k){var f=this._cipher,g=f.blockSize,s=this._iv,w=this._counter;s&&(w=this._counter=s.slice(0),this._iv=void 0);var S=w.slice(0);f.encryptBlock(S,0),w[g-1]=w[g-1]+1|0;for(var T=0;T<g;T++)b[k+T]^=S[T]}}),C.Decryptor=_,C),h.mode.CTR)},8454:function(E,p,o){var C,_;E.exports=(_=o(9021),o(7165),_.mode.ECB=((C=_.lib.BlockCipherMode.extend()).Encryptor=C.extend({processBlock:function(h,b){this._cipher.encryptBlock(h,b)}}),C.Decryptor=C.extend({processBlock:function(h,b){this._cipher.decryptBlock(h,b)}}),C),_.mode.ECB)},3797:function(E,p,o){var C,_,h;E.exports=(h=o(9021),o(7165),h.mode.OFB=(C=h.lib.BlockCipherMode.extend(),_=C.Encryptor=C.extend({processBlock:function(b,k){var f=this._cipher,g=f.blockSize,s=this._iv,w=this._keystream;s&&(w=this._keystream=s.slice(0),this._iv=void 0),f.encryptBlock(w,0);for(var S=0;S<g;S++)b[k+S]^=w[S]}}),C.Decryptor=_,C),h.mode.OFB)},2073:function(E,p,o){var C;E.exports=(C=o(9021),o(7165),C.pad.AnsiX923={pad:function(_,h){var b=_.sigBytes,k=4*h,f=k-b%k,g=b+f-1;_.clamp(),_.words[g>>>2]|=f<<24-g%4*8,_.sigBytes+=f},unpad:function(_){var h=255&_.words[_.sigBytes-1>>>2];_.sigBytes-=h}},C.pad.Ansix923)},4905:function(E,p,o){var C;E.exports=(C=o(9021),o(7165),C.pad.Iso10126={pad:function(_,h){var b=4*h,k=b-_.sigBytes%b;_.concat(C.lib.WordArray.random(k-1)).concat(C.lib.WordArray.create([k<<24],1))},unpad:function(_){var h=255&_.words[_.sigBytes-1>>>2];_.sigBytes-=h}},C.pad.Iso10126)},482:function(E,p,o){var C;E.exports=(C=o(9021),o(7165),C.pad.Iso97971={pad:function(_,h){_.concat(C.lib.WordArray.create([2147483648],1)),C.pad.ZeroPadding.pad(_,h)},unpad:function(_){C.pad.ZeroPadding.unpad(_),_.sigBytes--}},C.pad.Iso97971)},8124:function(E,p,o){var C;E.exports=(C=o(9021),o(7165),C.pad.NoPadding={pad:function(){},unpad:function(){}},C.pad.NoPadding)},2155:function(E,p,o){var C;E.exports=(C=o(9021),o(7165),C.pad.ZeroPadding={pad:function(_,h){var b=4*h;_.clamp(),_.sigBytes+=b-(_.sigBytes%b||b)},unpad:function(_){var h=_.words,b=_.sigBytes-1;for(b=_.sigBytes-1;b>=0;b--)if(h[b>>>2]>>>24-b%4*8&255){_.sigBytes=b+1;break}}},C.pad.ZeroPadding)},19:function(E,p,o){var C,_,h,b,k,f,g,s,w;E.exports=(w=o(9021),o(3009),o(1025),_=(C=w).lib,h=_.Base,b=_.WordArray,k=C.algo,f=k.SHA256,g=k.HMAC,s=k.PBKDF2=h.extend({cfg:h.extend({keySize:4,hasher:f,iterations:25e4}),init:function(S){this.cfg=this.cfg.extend(S)},compute:function(S,T){for(var x=this.cfg,O=g.create(x.hasher,S),P=b.create(),R=b.create([1]),I=P.words,d=R.words,v=x.keySize,c=x.iterations;I.length<v;){var u=O.update(T).finalize(R);O.reset();for(var l=u.words,m=l.length,D=u,N=1;N<c;N++){D=O.finalize(D),O.reset();for(var L=D.words,j=0;j<m;j++)l[j]^=L[j]}P.concat(u),d[0]++}return P.sigBytes=4*v,P}}),C.PBKDF2=function(S,T,x){return s.create(x).compute(S,T)},w.PBKDF2)},2696:function(E,p,o){var C;E.exports=(C=o(9021),o(754),o(4636),o(9506),o(7165),function(){var _=C,h=_.lib.StreamCipher,b=_.algo,k=[],f=[],g=[],s=b.RabbitLegacy=h.extend({_doReset:function(){var S=this._key.words,T=this.cfg.iv,x=this._X=[S[0],S[3]<<16|S[2]>>>16,S[1],S[0]<<16|S[3]>>>16,S[2],S[1]<<16|S[0]>>>16,S[3],S[2]<<16|S[1]>>>16],O=this._C=[S[2]<<16|S[2]>>>16,4294901760&S[0]|65535&S[1],S[3]<<16|S[3]>>>16,4294901760&S[1]|65535&S[2],S[0]<<16|S[0]>>>16,4294901760&S[2]|65535&S[3],S[1]<<16|S[1]>>>16,4294901760&S[3]|65535&S[0]];this._b=0;for(var P=0;P<4;P++)w.call(this);for(P=0;P<8;P++)O[P]^=x[P+4&7];if(T){var R=T.words,I=R[0],d=R[1],v=16711935&(I<<8|I>>>24)|4278255360&(I<<24|I>>>8),c=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),u=v>>>16|4294901760&c,l=c<<16|65535&v;for(O[0]^=v,O[1]^=u,O[2]^=c,O[3]^=l,O[4]^=v,O[5]^=u,O[6]^=c,O[7]^=l,P=0;P<4;P++)w.call(this)}},_doProcessBlock:function(S,T){var x=this._X;w.call(this),k[0]=x[0]^x[5]>>>16^x[3]<<16,k[1]=x[2]^x[7]>>>16^x[5]<<16,k[2]=x[4]^x[1]>>>16^x[7]<<16,k[3]=x[6]^x[3]>>>16^x[1]<<16;for(var O=0;O<4;O++)k[O]=16711935&(k[O]<<8|k[O]>>>24)|4278255360&(k[O]<<24|k[O]>>>8),S[T+O]^=k[O]},blockSize:4,ivSize:2});function w(){for(var S=this._X,T=this._C,x=0;x<8;x++)f[x]=T[x];for(T[0]=T[0]+1295307597+this._b|0,T[1]=T[1]+3545052371+(T[0]>>>0<f[0]>>>0?1:0)|0,T[2]=T[2]+886263092+(T[1]>>>0<f[1]>>>0?1:0)|0,T[3]=T[3]+1295307597+(T[2]>>>0<f[2]>>>0?1:0)|0,T[4]=T[4]+3545052371+(T[3]>>>0<f[3]>>>0?1:0)|0,T[5]=T[5]+886263092+(T[4]>>>0<f[4]>>>0?1:0)|0,T[6]=T[6]+1295307597+(T[5]>>>0<f[5]>>>0?1:0)|0,T[7]=T[7]+3545052371+(T[6]>>>0<f[6]>>>0?1:0)|0,this._b=T[7]>>>0<f[7]>>>0?1:0,x=0;x<8;x++){var O=S[x]+T[x],P=65535&O,R=O>>>16,I=((P*P>>>17)+P*R>>>15)+R*R,d=((4294901760&O)*O|0)+((65535&O)*O|0);g[x]=I^d}S[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0,S[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0,S[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0,S[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0,S[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0,S[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0,S[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0,S[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}_.RabbitLegacy=h._createHelper(s)}(),C.RabbitLegacy)},6298:function(E,p,o){var C;E.exports=(C=o(9021),o(754),o(4636),o(9506),o(7165),function(){var _=C,h=_.lib.StreamCipher,b=_.algo,k=[],f=[],g=[],s=b.Rabbit=h.extend({_doReset:function(){for(var S=this._key.words,T=this.cfg.iv,x=0;x<4;x++)S[x]=16711935&(S[x]<<8|S[x]>>>24)|4278255360&(S[x]<<24|S[x]>>>8);var O=this._X=[S[0],S[3]<<16|S[2]>>>16,S[1],S[0]<<16|S[3]>>>16,S[2],S[1]<<16|S[0]>>>16,S[3],S[2]<<16|S[1]>>>16],P=this._C=[S[2]<<16|S[2]>>>16,4294901760&S[0]|65535&S[1],S[3]<<16|S[3]>>>16,4294901760&S[1]|65535&S[2],S[0]<<16|S[0]>>>16,4294901760&S[2]|65535&S[3],S[1]<<16|S[1]>>>16,4294901760&S[3]|65535&S[0]];for(this._b=0,x=0;x<4;x++)w.call(this);for(x=0;x<8;x++)P[x]^=O[x+4&7];if(T){var R=T.words,I=R[0],d=R[1],v=16711935&(I<<8|I>>>24)|4278255360&(I<<24|I>>>8),c=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),u=v>>>16|4294901760&c,l=c<<16|65535&v;for(P[0]^=v,P[1]^=u,P[2]^=c,P[3]^=l,P[4]^=v,P[5]^=u,P[6]^=c,P[7]^=l,x=0;x<4;x++)w.call(this)}},_doProcessBlock:function(S,T){var x=this._X;w.call(this),k[0]=x[0]^x[5]>>>16^x[3]<<16,k[1]=x[2]^x[7]>>>16^x[5]<<16,k[2]=x[4]^x[1]>>>16^x[7]<<16,k[3]=x[6]^x[3]>>>16^x[1]<<16;for(var O=0;O<4;O++)k[O]=16711935&(k[O]<<8|k[O]>>>24)|4278255360&(k[O]<<24|k[O]>>>8),S[T+O]^=k[O]},blockSize:4,ivSize:2});function w(){for(var S=this._X,T=this._C,x=0;x<8;x++)f[x]=T[x];for(T[0]=T[0]+1295307597+this._b|0,T[1]=T[1]+3545052371+(T[0]>>>0<f[0]>>>0?1:0)|0,T[2]=T[2]+886263092+(T[1]>>>0<f[1]>>>0?1:0)|0,T[3]=T[3]+1295307597+(T[2]>>>0<f[2]>>>0?1:0)|0,T[4]=T[4]+3545052371+(T[3]>>>0<f[3]>>>0?1:0)|0,T[5]=T[5]+886263092+(T[4]>>>0<f[4]>>>0?1:0)|0,T[6]=T[6]+1295307597+(T[5]>>>0<f[5]>>>0?1:0)|0,T[7]=T[7]+3545052371+(T[6]>>>0<f[6]>>>0?1:0)|0,this._b=T[7]>>>0<f[7]>>>0?1:0,x=0;x<8;x++){var O=S[x]+T[x],P=65535&O,R=O>>>16,I=((P*P>>>17)+P*R>>>15)+R*R,d=((4294901760&O)*O|0)+((65535&O)*O|0);g[x]=I^d}S[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0,S[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0,S[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0,S[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0,S[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0,S[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0,S[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0,S[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}_.Rabbit=h._createHelper(s)}(),C.Rabbit)},7193:function(E,p,o){var C;E.exports=(C=o(9021),o(754),o(4636),o(9506),o(7165),function(){var _=C,h=_.lib.StreamCipher,b=_.algo,k=b.RC4=h.extend({_doReset:function(){for(var s=this._key,w=s.words,S=s.sigBytes,T=this._S=[],x=0;x<256;x++)T[x]=x;x=0;for(var O=0;x<256;x++){var P=x%S,R=w[P>>>2]>>>24-P%4*8&255;O=(O+T[x]+R)%256;var I=T[x];T[x]=T[O],T[O]=I}this._i=this._j=0},_doProcessBlock:function(s,w){s[w]^=f.call(this)},keySize:8,ivSize:0});function f(){for(var s=this._S,w=this._i,S=this._j,T=0,x=0;x<4;x++){S=(S+s[w=(w+1)%256])%256;var O=s[w];s[w]=s[S],s[S]=O,T|=s[(s[w]+s[S])%256]<<24-8*x}return this._i=w,this._j=S,T}_.RC4=h._createHelper(k);var g=b.RC4Drop=k.extend({cfg:k.cfg.extend({drop:192}),_doReset:function(){k._doReset.call(this);for(var s=this.cfg.drop;s>0;s--)f.call(this)}});_.RC4Drop=h._createHelper(g)}(),C.RC4)},8056:function(E,p,o){var C;E.exports=(C=o(9021),function(){var _=C,h=_.lib,b=h.WordArray,k=h.Hasher,f=_.algo,g=b.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=b.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),w=b.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),S=b.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),T=b.create([0,1518500249,1859775393,2400959708,2840853838]),x=b.create([1352829926,1548603684,1836072691,2053994217,0]),O=f.RIPEMD160=k.extend({_doReset:function(){this._hash=b.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,l){for(var m=0;m<16;m++){var D=l+m,N=u[D];u[D]=16711935&(N<<8|N>>>24)|4278255360&(N<<24|N>>>8)}var L,j,V,$,Z,ne,pe,ge,_e,Me,me,oe=this._hash.words,ve=T.words,we=x.words,be=g.words,lt=s.words,Ot=w.words,Yt=S.words;for(ne=L=oe[0],pe=j=oe[1],ge=V=oe[2],_e=$=oe[3],Me=Z=oe[4],m=0;m<80;m+=1)me=L+u[l+be[m]]|0,me+=m<16?P(j,V,$)+ve[0]:m<32?R(j,V,$)+ve[1]:m<48?I(j,V,$)+ve[2]:m<64?d(j,V,$)+ve[3]:v(j,V,$)+ve[4],me=(me=c(me|=0,Ot[m]))+Z|0,L=Z,Z=$,$=c(V,10),V=j,j=me,me=ne+u[l+lt[m]]|0,me+=m<16?v(pe,ge,_e)+we[0]:m<32?d(pe,ge,_e)+we[1]:m<48?I(pe,ge,_e)+we[2]:m<64?R(pe,ge,_e)+we[3]:P(pe,ge,_e)+we[4],me=(me=c(me|=0,Yt[m]))+Me|0,ne=Me,Me=_e,_e=c(ge,10),ge=pe,pe=me;me=oe[1]+V+_e|0,oe[1]=oe[2]+$+Me|0,oe[2]=oe[3]+Z+ne|0,oe[3]=oe[4]+L+pe|0,oe[4]=oe[0]+j+ge|0,oe[0]=me},_doFinalize:function(){var u=this._data,l=u.words,m=8*this._nDataBytes,D=8*u.sigBytes;l[D>>>5]|=128<<24-D%32,l[14+(D+64>>>9<<4)]=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8),u.sigBytes=4*(l.length+1),this._process();for(var N=this._hash,L=N.words,j=0;j<5;j++){var V=L[j];L[j]=16711935&(V<<8|V>>>24)|4278255360&(V<<24|V>>>8)}return N},clone:function(){var u=k.clone.call(this);return u._hash=this._hash.clone(),u}});function P(u,l,m){return u^l^m}function R(u,l,m){return u&l|~u&m}function I(u,l,m){return(u|~l)^m}function d(u,l,m){return u&m|l&~m}function v(u,l,m){return u^(l|~m)}function c(u,l){return u<<l|u>>>32-l}_.RIPEMD160=k._createHelper(O),_.HmacRIPEMD160=k._createHmacHelper(O)}(),C.RIPEMD160)},5471:function(E,p,o){var C,_,h,b,k,f,g,s;E.exports=(s=o(9021),_=(C=s).lib,h=_.WordArray,b=_.Hasher,k=C.algo,f=[],g=k.SHA1=b.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(w,S){for(var T=this._hash.words,x=T[0],O=T[1],P=T[2],R=T[3],I=T[4],d=0;d<80;d++){if(d<16)f[d]=0|w[S+d];else{var v=f[d-3]^f[d-8]^f[d-14]^f[d-16];f[d]=v<<1|v>>>31}var c=(x<<5|x>>>27)+I+f[d];c+=d<20?1518500249+(O&P|~O&R):d<40?1859775393+(O^P^R):d<60?(O&P|O&R|P&R)-1894007588:(O^P^R)-899497514,I=R,R=P,P=O<<30|O>>>2,O=x,x=c}T[0]=T[0]+x|0,T[1]=T[1]+O|0,T[2]=T[2]+P|0,T[3]=T[3]+R|0,T[4]=T[4]+I|0},_doFinalize:function(){var w=this._data,S=w.words,T=8*this._nDataBytes,x=8*w.sigBytes;return S[x>>>5]|=128<<24-x%32,S[14+(x+64>>>9<<4)]=Math.floor(T/4294967296),S[15+(x+64>>>9<<4)]=T,w.sigBytes=4*S.length,this._process(),this._hash},clone:function(){var w=b.clone.call(this);return w._hash=this._hash.clone(),w}}),C.SHA1=b._createHelper(g),C.HmacSHA1=b._createHmacHelper(g),s.SHA1)},6308:function(E,p,o){var C,_,h,b,k,f;E.exports=(f=o(9021),o(3009),_=(C=f).lib.WordArray,h=C.algo,b=h.SHA256,k=h.SHA224=b.extend({_doReset:function(){this._hash=new _.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var g=b._doFinalize.call(this);return g.sigBytes-=4,g}}),C.SHA224=b._createHelper(k),C.HmacSHA224=b._createHmacHelper(k),f.SHA224)},3009:function(E,p,o){var C;E.exports=(C=o(9021),function(_){var h=C,b=h.lib,k=b.WordArray,f=b.Hasher,g=h.algo,s=[],w=[];(function(){function x(I){for(var d=_.sqrt(I),v=2;v<=d;v++)if(!(I%v))return!1;return!0}function O(I){return 4294967296*(I-(0|I))|0}for(var P=2,R=0;R<64;)x(P)&&(R<8&&(s[R]=O(_.pow(P,.5))),w[R]=O(_.pow(P,.3333333333333333)),R++),P++})();var S=[],T=g.SHA256=f.extend({_doReset:function(){this._hash=new k.init(s.slice(0))},_doProcessBlock:function(x,O){for(var P=this._hash.words,R=P[0],I=P[1],d=P[2],v=P[3],c=P[4],u=P[5],l=P[6],m=P[7],D=0;D<64;D++){if(D<16)S[D]=0|x[O+D];else{var N=S[D-15],L=(N<<25|N>>>7)^(N<<14|N>>>18)^N>>>3,j=S[D-2],V=(j<<15|j>>>17)^(j<<13|j>>>19)^j>>>10;S[D]=L+S[D-7]+V+S[D-16]}var $=R&I^R&d^I&d,Z=(R<<30|R>>>2)^(R<<19|R>>>13)^(R<<10|R>>>22),ne=m+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&l)+w[D]+S[D];m=l,l=u,u=c,c=v+ne|0,v=d,d=I,I=R,R=ne+(Z+$)|0}P[0]=P[0]+R|0,P[1]=P[1]+I|0,P[2]=P[2]+d|0,P[3]=P[3]+v|0,P[4]=P[4]+c|0,P[5]=P[5]+u|0,P[6]=P[6]+l|0,P[7]=P[7]+m|0},_doFinalize:function(){var x=this._data,O=x.words,P=8*this._nDataBytes,R=8*x.sigBytes;return O[R>>>5]|=128<<24-R%32,O[14+(R+64>>>9<<4)]=_.floor(P/4294967296),O[15+(R+64>>>9<<4)]=P,x.sigBytes=4*O.length,this._process(),this._hash},clone:function(){var x=f.clone.call(this);return x._hash=this._hash.clone(),x}});h.SHA256=f._createHelper(T),h.HmacSHA256=f._createHmacHelper(T)}(Math),C.SHA256)},5953:function(E,p,o){var C;E.exports=(C=o(9021),o(3240),function(_){var h=C,b=h.lib,k=b.WordArray,f=b.Hasher,g=h.x64.Word,s=h.algo,w=[],S=[],T=[];(function(){for(var P=1,R=0,I=0;I<24;I++){w[P+5*R]=(I+1)*(I+2)/2%64;var d=(2*P+3*R)%5;P=R%5,R=d}for(P=0;P<5;P++)for(R=0;R<5;R++)S[P+5*R]=R+(2*P+3*R)%5*5;for(var v=1,c=0;c<24;c++){for(var u=0,l=0,m=0;m<7;m++){if(1&v){var D=(1<<m)-1;D<32?l^=1<<D:u^=1<<D-32}128&v?v=v<<1^113:v<<=1}T[c]=g.create(u,l)}})();var x=[];(function(){for(var P=0;P<25;P++)x[P]=g.create()})();var O=s.SHA3=f.extend({cfg:f.cfg.extend({outputLength:512}),_doReset:function(){for(var P=this._state=[],R=0;R<25;R++)P[R]=new g.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(P,R){for(var I=this._state,d=this.blockSize/2,v=0;v<d;v++){var c=P[R+2*v],u=P[R+2*v+1];c=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),u=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),(we=I[v]).high^=u,we.low^=c}for(var l=0;l<24;l++){for(var m=0;m<5;m++){for(var D=0,N=0,L=0;L<5;L++)D^=(we=I[m+5*L]).high,N^=we.low;var j=x[m];j.high=D,j.low=N}for(m=0;m<5;m++){var V=x[(m+4)%5],$=x[(m+1)%5],Z=$.high,ne=$.low;for(D=V.high^(Z<<1|ne>>>31),N=V.low^(ne<<1|Z>>>31),L=0;L<5;L++)(we=I[m+5*L]).high^=D,we.low^=N}for(var pe=1;pe<25;pe++){var ge=(we=I[pe]).high,_e=we.low,Me=w[pe];Me<32?(D=ge<<Me|_e>>>32-Me,N=_e<<Me|ge>>>32-Me):(D=_e<<Me-32|ge>>>64-Me,N=ge<<Me-32|_e>>>64-Me);var me=x[S[pe]];me.high=D,me.low=N}var oe=x[0],ve=I[0];for(oe.high=ve.high,oe.low=ve.low,m=0;m<5;m++)for(L=0;L<5;L++){var we=I[pe=m+5*L],be=x[pe],lt=x[(m+1)%5+5*L],Ot=x[(m+2)%5+5*L];we.high=be.high^~lt.high&Ot.high,we.low=be.low^~lt.low&Ot.low}we=I[0];var Yt=T[l];we.high^=Yt.high,we.low^=Yt.low}},_doFinalize:function(){var P=this._data,R=P.words,I=(this._nDataBytes,8*P.sigBytes),d=32*this.blockSize;R[I>>>5]|=1<<24-I%32,R[(_.ceil((I+1)/d)*d>>>5)-1]|=128,P.sigBytes=4*R.length,this._process();for(var v=this._state,c=this.cfg.outputLength/8,u=c/8,l=[],m=0;m<u;m++){var D=v[m],N=D.high,L=D.low;N=16711935&(N<<8|N>>>24)|4278255360&(N<<24|N>>>8),L=16711935&(L<<8|L>>>24)|4278255360&(L<<24|L>>>8),l.push(L),l.push(N)}return new k.init(l,c)},clone:function(){for(var P=f.clone.call(this),R=P._state=this._state.slice(0),I=0;I<25;I++)R[I]=R[I].clone();return P}});h.SHA3=f._createHelper(O),h.HmacSHA3=f._createHmacHelper(O)}(Math),C.SHA3)},9557:function(E,p,o){var C,_,h,b,k,f,g,s;E.exports=(s=o(9021),o(3240),o(1380),_=(C=s).x64,h=_.Word,b=_.WordArray,k=C.algo,f=k.SHA512,g=k.SHA384=f.extend({_doReset:function(){this._hash=new b.init([new h.init(3418070365,3238371032),new h.init(1654270250,914150663),new h.init(2438529370,812702999),new h.init(355462360,4144912697),new h.init(1731405415,4290775857),new h.init(2394180231,1750603025),new h.init(3675008525,1694076839),new h.init(1203062813,3204075428)])},_doFinalize:function(){var w=f._doFinalize.call(this);return w.sigBytes-=16,w}}),C.SHA384=f._createHelper(g),C.HmacSHA384=f._createHmacHelper(g),s.SHA384)},1380:function(E,p,o){var C;E.exports=(C=o(9021),o(3240),function(){var _=C,h=_.lib.Hasher,b=_.x64,k=b.Word,f=b.WordArray,g=_.algo;function s(){return k.create.apply(k,arguments)}var w=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],S=[];(function(){for(var x=0;x<80;x++)S[x]=s()})();var T=g.SHA512=h.extend({_doReset:function(){this._hash=new f.init([new k.init(1779033703,4089235720),new k.init(3144134277,2227873595),new k.init(1013904242,4271175723),new k.init(2773480762,1595750129),new k.init(1359893119,2917565137),new k.init(2600822924,725511199),new k.init(528734635,4215389547),new k.init(1541459225,327033209)])},_doProcessBlock:function(x,O){for(var P=this._hash.words,R=P[0],I=P[1],d=P[2],v=P[3],c=P[4],u=P[5],l=P[6],m=P[7],D=R.high,N=R.low,L=I.high,j=I.low,V=d.high,$=d.low,Z=v.high,ne=v.low,pe=c.high,ge=c.low,_e=u.high,Me=u.low,me=l.high,oe=l.low,ve=m.high,we=m.low,be=D,lt=N,Ot=L,Yt=j,vt=V,Mr=$,Kt=Z,At=ne,Ar=pe,Dt=ge,Xt=_e,hn=Me,kr=me,Lr=oe,Jr=ve,er=we,Ze=0;Ze<80;Ze++){var Ut,hr,Fe=S[Ze];if(Ze<16)hr=Fe.high=0|x[O+2*Ze],Ut=Fe.low=0|x[O+2*Ze+1];else{var st=S[Ze-15],tr=st.high,Tt=st.low,sr=(tr>>>1|Tt<<31)^(tr>>>8|Tt<<24)^tr>>>7,Zr=(Tt>>>1|tr<<31)^(Tt>>>8|tr<<24)^(Tt>>>7|tr<<25),sn=S[Ze-2],Mt=sn.high,di=sn.low,Ti=(Mt>>>19|di<<13)^(Mt<<3|di>>>29)^Mt>>>6,pi=(di>>>19|Mt<<13)^(di<<3|Mt>>>29)^(di>>>6|Mt<<26),Zi=S[Ze-7],Wn=Zi.high,Lt=Zi.low,Ne=S[Ze-16],yt=Ne.high,ut=Ne.low;hr=(hr=(hr=sr+Wn+((Ut=Zr+Lt)>>>0<Zr>>>0?1:0))+Ti+((Ut+=pi)>>>0<pi>>>0?1:0))+yt+((Ut+=ut)>>>0<ut>>>0?1:0),Fe.high=hr,Fe.low=Ut}var ze,Rr=Ar&Xt^~Ar&kr,De=Dt&hn^~Dt&Lr,fr=be&Ot^be&vt^Ot&vt,Pr=lt&Yt^lt&Mr^Yt&Mr,wr=(be>>>28|lt<<4)^(be<<30|lt>>>2)^(be<<25|lt>>>7),qr=(lt>>>28|be<<4)^(lt<<30|be>>>2)^(lt<<25|be>>>7),ie=(Ar>>>14|Dt<<18)^(Ar>>>18|Dt<<14)^(Ar<<23|Dt>>>9),Q=(Dt>>>14|Ar<<18)^(Dt>>>18|Ar<<14)^(Dt<<23|Ar>>>9),he=w[Ze],Re=he.high,Le=he.low,ht=Jr+ie+((ze=er+Q)>>>0<er>>>0?1:0),xt=qr+Pr;Jr=kr,er=Lr,kr=Xt,Lr=hn,Xt=Ar,hn=Dt,Ar=Kt+(ht=(ht=(ht=ht+Rr+((ze+=De)>>>0<De>>>0?1:0))+Re+((ze+=Le)>>>0<Le>>>0?1:0))+hr+((ze+=Ut)>>>0<Ut>>>0?1:0))+((Dt=At+ze|0)>>>0<At>>>0?1:0)|0,Kt=vt,At=Mr,vt=Ot,Mr=Yt,Ot=be,Yt=lt,be=ht+(wr+fr+(xt>>>0<qr>>>0?1:0))+((lt=ze+xt|0)>>>0<ze>>>0?1:0)|0}N=R.low=N+lt,R.high=D+be+(N>>>0<lt>>>0?1:0),j=I.low=j+Yt,I.high=L+Ot+(j>>>0<Yt>>>0?1:0),$=d.low=$+Mr,d.high=V+vt+($>>>0<Mr>>>0?1:0),ne=v.low=ne+At,v.high=Z+Kt+(ne>>>0<At>>>0?1:0),ge=c.low=ge+Dt,c.high=pe+Ar+(ge>>>0<Dt>>>0?1:0),Me=u.low=Me+hn,u.high=_e+Xt+(Me>>>0<hn>>>0?1:0),oe=l.low=oe+Lr,l.high=me+kr+(oe>>>0<Lr>>>0?1:0),we=m.low=we+er,m.high=ve+Jr+(we>>>0<er>>>0?1:0)},_doFinalize:function(){var x=this._data,O=x.words,P=8*this._nDataBytes,R=8*x.sigBytes;return O[R>>>5]|=128<<24-R%32,O[30+(R+128>>>10<<5)]=Math.floor(P/4294967296),O[31+(R+128>>>10<<5)]=P,x.sigBytes=4*O.length,this._process(),this._hash.toX32()},clone:function(){var x=h.clone.call(this);return x._hash=this._hash.clone(),x},blockSize:32});_.SHA512=h._createHelper(T),_.HmacSHA512=h._createHmacHelper(T)}(),C.SHA512)},7628:function(E,p,o){var C;E.exports=(C=o(9021),o(754),o(4636),o(9506),o(7165),function(){var _=C,h=_.lib,b=h.WordArray,k=h.BlockCipher,f=_.algo,g=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],w=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],S=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],T=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],x=f.DES=k.extend({_doReset:function(){for(var I=this._key.words,d=[],v=0;v<56;v++){var c=g[v]-1;d[v]=I[c>>>5]>>>31-c%32&1}for(var u=this._subKeys=[],l=0;l<16;l++){var m=u[l]=[],D=w[l];for(v=0;v<24;v++)m[v/6|0]|=d[(s[v]-1+D)%28]<<31-v%6,m[4+(v/6|0)]|=d[28+(s[v+24]-1+D)%28]<<31-v%6;for(m[0]=m[0]<<1|m[0]>>>31,v=1;v<7;v++)m[v]=m[v]>>>4*(v-1)+3;m[7]=m[7]<<5|m[7]>>>27}var N=this._invSubKeys=[];for(v=0;v<16;v++)N[v]=u[15-v]},encryptBlock:function(I,d){this._doCryptBlock(I,d,this._subKeys)},decryptBlock:function(I,d){this._doCryptBlock(I,d,this._invSubKeys)},_doCryptBlock:function(I,d,v){this._lBlock=I[d],this._rBlock=I[d+1],O.call(this,4,252645135),O.call(this,16,65535),P.call(this,2,858993459),P.call(this,8,16711935),O.call(this,1,1431655765);for(var c=0;c<16;c++){for(var u=v[c],l=this._lBlock,m=this._rBlock,D=0,N=0;N<8;N++)D|=S[N][((m^u[N])&T[N])>>>0];this._lBlock=m,this._rBlock=l^D}var L=this._lBlock;this._lBlock=this._rBlock,this._rBlock=L,O.call(this,1,1431655765),P.call(this,8,16711935),P.call(this,2,858993459),O.call(this,16,65535),O.call(this,4,252645135),I[d]=this._lBlock,I[d+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function O(I,d){var v=(this._lBlock>>>I^this._rBlock)&d;this._rBlock^=v,this._lBlock^=v<<I}function P(I,d){var v=(this._rBlock>>>I^this._lBlock)&d;this._lBlock^=v,this._rBlock^=v<<I}_.DES=k._createHelper(x);var R=f.TripleDES=k.extend({_doReset:function(){var I=this._key.words;if(I.length!==2&&I.length!==4&&I.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var d=I.slice(0,2),v=I.length<4?I.slice(0,2):I.slice(2,4),c=I.length<6?I.slice(0,2):I.slice(4,6);this._des1=x.createEncryptor(b.create(d)),this._des2=x.createEncryptor(b.create(v)),this._des3=x.createEncryptor(b.create(c))},encryptBlock:function(I,d){this._des1.encryptBlock(I,d),this._des2.decryptBlock(I,d),this._des3.encryptBlock(I,d)},decryptBlock:function(I,d){this._des3.decryptBlock(I,d),this._des2.encryptBlock(I,d),this._des1.decryptBlock(I,d)},keySize:6,ivSize:2,blockSize:2});_.TripleDES=k._createHelper(R)}(),C.TripleDES)},3240:function(E,p,o){var C;E.exports=(C=o(9021),function(_){var h=C,b=h.lib,k=b.Base,f=b.WordArray,g=h.x64={};g.Word=k.extend({init:function(s,w){this.high=s,this.low=w}}),g.WordArray=k.extend({init:function(s,w){s=this.words=s||[],this.sigBytes=w!=_?w:8*s.length},toX32:function(){for(var s=this.words,w=s.length,S=[],T=0;T<w;T++){var x=s[T];S.push(x.high),S.push(x.low)}return f.create(S,this.sigBytes)},clone:function(){for(var s=k.clone.call(this),w=s.words=this.words.slice(0),S=w.length,T=0;T<S;T++)w[T]=w[T].clone();return s}})}(),C)},7833:(E,p,o)=>{p.formatArgs=function(_){if(_[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+_[0]+(this.useColors?"%c ":" ")+"+"+E.exports.humanize(this.diff),!this.useColors)return;const h="color: "+this.color;_.splice(1,0,h,"color: inherit");let b=0,k=0;_[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(b++,f==="%c"&&(k=b))}),_.splice(k,0,h)},p.save=function(_){try{_?p.storage.setItem("debug",_):p.storage.removeItem("debug")}catch{}},p.load=function(){let _;try{_=p.storage.getItem("debug")}catch{}return!_&&typeof process<"u"&&"env"in process&&(_=r.DEBUG),_},p.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let _;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(_=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(_[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},p.storage=function(){try{return localStorage}catch{}}(),p.destroy=(()=>{let _=!1;return()=>{_||(_=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),p.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],p.log=console.debug||console.log||(()=>{}),E.exports=o(736)(p);const{formatters:C}=E.exports;C.j=function(_){try{return JSON.stringify(_)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}},736:(E,p,o)=>{E.exports=function(C){function _(k){let f,g,s,w=null;function S(...T){if(!S.enabled)return;const x=S,O=Number(new Date),P=O-(f||O);x.diff=P,x.prev=f,x.curr=O,f=O,T[0]=_.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let R=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(I,d)=>{if(I==="%%")return"%";R++;const v=_.formatters[d];if(typeof v=="function"){const c=T[R];I=v.call(x,c),T.splice(R,1),R--}return I}),_.formatArgs.call(x,T),(x.log||_.log).apply(x,T)}return S.namespace=k,S.useColors=_.useColors(),S.color=_.selectColor(k),S.extend=h,S.destroy=_.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>w!==null?w:(g!==_.namespaces&&(g=_.namespaces,s=_.enabled(k)),s),set:T=>{w=T}}),typeof _.init=="function"&&_.init(S),S}function h(k,f){const g=_(this.namespace+(f===void 0?":":f)+k);return g.log=this.log,g}function b(k){return k.toString().substring(2,k.toString().length-2).replace(/\.\*\?$/,"*")}return _.debug=_,_.default=_,_.coerce=function(k){return k instanceof Error?k.stack||k.message:k},_.disable=function(){const k=[..._.names.map(b),..._.skips.map(b).map(f=>"-"+f)].join(",");return _.enable(""),k},_.enable=function(k){let f;_.save(k),_.namespaces=k,_.names=[],_.skips=[];const g=(typeof k=="string"?k:"").split(/[\s,]+/),s=g.length;for(f=0;f<s;f++)g[f]&&((k=g[f].replace(/\*/g,".*?"))[0]==="-"?_.skips.push(new RegExp("^"+k.slice(1)+"$")):_.names.push(new RegExp("^"+k+"$")))},_.enabled=function(k){if(k[k.length-1]==="*")return!0;let f,g;for(f=0,g=_.skips.length;f<g;f++)if(_.skips[f].test(k))return!1;for(f=0,g=_.names.length;f<g;f++)if(_.names[f].test(k))return!0;return!1},_.humanize=o(6585),_.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(C).forEach(k=>{_[k]=C[k]}),_.names=[],_.skips=[],_.formatters={},_.selectColor=function(k){let f=0;for(let g=0;g<k.length;g++)f=(f<<5)-f+k.charCodeAt(g),f|=0;return _.colors[Math.abs(f)%_.colors.length]},_.enable(_.load()),_}},4903:E=>{var p=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};E.exports=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return p()}try{return __global__||p()}finally{delete Object.prototype.__global__}}()},7007:E=>{var p,o=typeof Reflect=="object"?Reflect:null,C=o&&typeof o.apply=="function"?o.apply:function(P,R,I){return Function.prototype.apply.call(P,R,I)};p=o&&typeof o.ownKeys=="function"?o.ownKeys:Object.getOwnPropertySymbols?function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:function(P){return Object.getOwnPropertyNames(P)};var _=Number.isNaN||function(P){return P!=P};function h(){h.init.call(this)}E.exports=h,E.exports.once=function(P,R){return new Promise(function(I,d){function v(u){P.removeListener(R,c),d(u)}function c(){typeof P.removeListener=="function"&&P.removeListener("error",v),I([].slice.call(arguments))}O(P,R,c,{once:!0}),R!=="error"&&function(u,l,m){typeof u.on=="function"&&O(u,"error",l,m)}(P,v,{once:!0})})},h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var b=10;function k(P){if(typeof P!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof P)}function f(P){return P._maxListeners===void 0?h.defaultMaxListeners:P._maxListeners}function g(P,R,I,d){var v,c,u,l;if(k(I),(c=P._events)===void 0?(c=P._events=Object.create(null),P._eventsCount=0):(c.newListener!==void 0&&(P.emit("newListener",R,I.listener?I.listener:I),c=P._events),u=c[R]),u===void 0)u=c[R]=I,++P._eventsCount;else if(typeof u=="function"?u=c[R]=d?[I,u]:[u,I]:d?u.unshift(I):u.push(I),(v=f(P))>0&&u.length>v&&!u.warned){u.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(R)+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=P,m.type=R,m.count=u.length,l=m,console&&console.warn&&console.warn(l)}return P}function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function w(P,R,I){var d={fired:!1,wrapFn:void 0,target:P,type:R,listener:I},v=s.bind(d);return v.listener=I,d.wrapFn=v,v}function S(P,R,I){var d=P._events;if(d===void 0)return[];var v=d[R];return v===void 0?[]:typeof v=="function"?I?[v.listener||v]:[v]:I?function(c){for(var u=new Array(c.length),l=0;l<u.length;++l)u[l]=c[l].listener||c[l];return u}(v):x(v,v.length)}function T(P){var R=this._events;if(R!==void 0){var I=R[P];if(typeof I=="function")return 1;if(I!==void 0)return I.length}return 0}function x(P,R){for(var I=new Array(R),d=0;d<R;++d)I[d]=P[d];return I}function O(P,R,I,d){if(typeof P.on=="function")d.once?P.once(R,I):P.on(R,I);else{if(typeof P.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof P);P.addEventListener(R,function v(c){d.once&&P.removeEventListener(R,v),I(c)})}}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return b},set:function(P){if(typeof P!="number"||P<0||_(P))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+P+".");b=P}}),h.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(P){if(typeof P!="number"||P<0||_(P))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+P+".");return this._maxListeners=P,this},h.prototype.getMaxListeners=function(){return f(this)},h.prototype.emit=function(P){for(var R=[],I=1;I<arguments.length;I++)R.push(arguments[I]);var d=P==="error",v=this._events;if(v!==void 0)d=d&&v.error===void 0;else if(!d)return!1;if(d){var c;if(R.length>0&&(c=R[0]),c instanceof Error)throw c;var u=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw u.context=c,u}var l=v[P];if(l===void 0)return!1;if(typeof l=="function")C(l,this,R);else{var m=l.length,D=x(l,m);for(I=0;I<m;++I)C(D[I],this,R)}return!0},h.prototype.addListener=function(P,R){return g(this,P,R,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(P,R){return g(this,P,R,!0)},h.prototype.once=function(P,R){return k(R),this.on(P,w(this,P,R)),this},h.prototype.prependOnceListener=function(P,R){return k(R),this.prependListener(P,w(this,P,R)),this},h.prototype.removeListener=function(P,R){var I,d,v,c,u;if(k(R),(d=this._events)===void 0)return this;if((I=d[P])===void 0)return this;if(I===R||I.listener===R)--this._eventsCount==0?this._events=Object.create(null):(delete d[P],d.removeListener&&this.emit("removeListener",P,I.listener||R));else if(typeof I!="function"){for(v=-1,c=I.length-1;c>=0;c--)if(I[c]===R||I[c].listener===R){u=I[c].listener,v=c;break}if(v<0)return this;v===0?I.shift():function(l,m){for(;m+1<l.length;m++)l[m]=l[m+1];l.pop()}(I,v),I.length===1&&(d[P]=I[0]),d.removeListener!==void 0&&this.emit("removeListener",P,u||R)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(P){var R,I,d;if((I=this._events)===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[P]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete I[P]),this;if(arguments.length===0){var v,c=Object.keys(I);for(d=0;d<c.length;++d)(v=c[d])!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(R=I[P])=="function")this.removeListener(P,R);else if(R!==void 0)for(d=R.length-1;d>=0;d--)this.removeListener(P,R[d]);return this},h.prototype.listeners=function(P){return S(this,P,!0)},h.prototype.rawListeners=function(P){return S(this,P,!1)},h.listenerCount=function(P,R){return typeof P.listenerCount=="function"?P.listenerCount(R):T.call(P,R)},h.prototype.listenerCount=T,h.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},3582:function(E,p,o){var C=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(p,"__esModule",{value:!0}),p.Logger=void 0;const _=C(o(7833)),h="h264-profile-level-id";p.Logger=class{constructor(b){b?(this._debug=(0,_.default)(`${h}:${b}`),this._warn=(0,_.default)(`${h}:WARN:${b}`),this._error=(0,_.default)(`${h}:ERROR:${b}`)):(this._debug=(0,_.default)(h),this._warn=(0,_.default)(`${h}:WARN`),this._error=(0,_.default)(`${h}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},3200:(E,p,o)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.generateProfileLevelIdStringForAnswer=p.isSameProfile=p.parseSdpProfileLevelId=p.levelToString=p.profileToString=p.profileLevelIdToString=p.parseProfileLevelId=p.ProfileLevelId=p.Level=p.Profile=void 0;const C=new(o(3582)).Logger;var _,h;(function(P){P[P.ConstrainedBaseline=1]="ConstrainedBaseline",P[P.Baseline=2]="Baseline",P[P.Main=3]="Main",P[P.ConstrainedHigh=4]="ConstrainedHigh",P[P.High=5]="High",P[P.PredictiveHigh444=6]="PredictiveHigh444"})(_||(p.Profile=_={})),function(P){P[P.L1_b=0]="L1_b",P[P.L1=10]="L1",P[P.L1_1=11]="L1_1",P[P.L1_2=12]="L1_2",P[P.L1_3=13]="L1_3",P[P.L2=20]="L2",P[P.L2_1=21]="L2_1",P[P.L2_2=22]="L2_2",P[P.L3=30]="L3",P[P.L3_1=31]="L3_1",P[P.L3_2=32]="L3_2",P[P.L4=40]="L4",P[P.L4_1=41]="L4_1",P[P.L4_2=42]="L4_2",P[P.L5=50]="L5",P[P.L5_1=51]="L5_1",P[P.L5_2=52]="L5_2"}(h||(p.Level=h={}));class b{constructor(R,I){this.profile=R,this.level=I}}p.ProfileLevelId=b;const k=new b(_.ConstrainedBaseline,h.L3_1);class f{constructor(R){this.mask=~x("x",R),this.masked_value=x("1",R)}isMatch(R){return this.masked_value===(R&this.mask)}}class g{constructor(R,I,d){this.profile_idc=R,this.profile_iop=I,this.profile=d}}const s=[new g(66,new f("x1xx0000"),_.ConstrainedBaseline),new g(77,new f("1xxx0000"),_.ConstrainedBaseline),new g(88,new f("11xx0000"),_.ConstrainedBaseline),new g(66,new f("x0xx0000"),_.Baseline),new g(88,new f("10xx0000"),_.Baseline),new g(77,new f("0x0x0000"),_.Main),new g(100,new f("00000000"),_.High),new g(100,new f("00001100"),_.ConstrainedHigh),new g(244,new f("00000000"),_.PredictiveHigh444)];function w(P){if(typeof P!="string"||P.length!==6)return;const R=parseInt(P,16);if(R===0)return;const I=255&R,d=R>>8&255,v=R>>16&255;let c;switch(I){case h.L1_1:c=16&d?h.L1_b:h.L1_1;break;case h.L1:case h.L1_2:case h.L1_3:case h.L2:case h.L2_1:case h.L2_2:case h.L3:case h.L3_1:case h.L3_2:case h.L4:case h.L4_1:case h.L4_2:case h.L5:case h.L5_1:case h.L5_2:c=I;break;default:return void C.warn(`parseProfileLevelId() | unrecognized level_idc [str:${P}, level_idc:${I}]`)}for(const u of s)if(v===u.profile_idc&&u.profile_iop.isMatch(d))return new b(u.profile,c);C.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${P}, profile_idc:${v}, profile_iop:${d}]`)}function S(P){if(P.level==h.L1_b)switch(P.profile){case _.ConstrainedBaseline:return"42f00b";case _.Baseline:return"42100b";case _.Main:return"4d100b";default:return void C.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${P.profile}`)}let R;switch(P.profile){case _.ConstrainedBaseline:R="42e0";break;case _.Baseline:R="4200";break;case _.Main:R="4d00";break;case _.ConstrainedHigh:R="640c";break;case _.High:R="6400";break;case _.PredictiveHigh444:R="f400";break;default:return void C.warn(`profileLevelIdToString() | unrecognized profile ${P.profile}`)}let I=P.level.toString(16);return I.length===1&&(I=`0${I}`),`${R}${I}`}function T(P={}){const R=P["profile-level-id"];return R?w(R):k}function x(P,R){return+(R[0]===P)<<7|+(R[1]===P)<<6|+(R[2]===P)<<5|+(R[3]===P)<<4|+(R[4]===P)<<3|+(R[5]===P)<<2|+(R[6]===P)<<1|+(R[7]===P)}function O(P={}){const R=P["level-asymmetry-allowed"];return R===!0||R===1||R==="1"}p.parseProfileLevelId=w,p.profileLevelIdToString=S,p.profileToString=function(P){switch(P){case _.ConstrainedBaseline:return"ConstrainedBaseline";case _.Baseline:return"Baseline";case _.Main:return"Main";case _.ConstrainedHigh:return"ConstrainedHigh";case _.High:return"High";case _.PredictiveHigh444:return"PredictiveHigh444";default:return void C.warn(`profileToString() | unrecognized profile ${P}`)}},p.levelToString=function(P){switch(P){case h.L1_b:return"1b";case h.L1:return"1";case h.L1_1:return"1.1";case h.L1_2:return"1.2";case h.L1_3:return"1.3";case h.L2:return"2";case h.L2_1:return"2.1";case h.L2_2:return"2.2";case h.L3:return"3";case h.L3_1:return"3.1";case h.L3_2:return"3.2";case h.L4:return"4";case h.L4_1:return"4.1";case h.L4_2:return"4.2";case h.L5:return"5";case h.L5_1:return"5.1";case h.L5_2:return"5.2";default:return void C.warn(`levelToString() | unrecognized level ${P}`)}},p.parseSdpProfileLevelId=T,p.isSameProfile=function(P={},R={}){const I=T(P),d=T(R);return!!(I&&d&&I.profile===d.profile)},p.generateProfileLevelIdStringForAnswer=function(P={},R={}){if(!P["profile-level-id"]&&!R["profile-level-id"])return void C.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");const I=T(P),d=T(R);if(!I)throw new TypeError("invalid local_profile_level_id");if(!d)throw new TypeError("invalid remote_profile_level_id");if(I.profile!==d.profile)throw new TypeError("H264 Profile mismatch");const v=O(P)&&O(R),c=I.level,u=d.level,l=function(L,j){return L===h.L1_b?j!==h.L1&&j!==h.L1_b:j===h.L1_b?L!==h.L1:L<j}(m=c,D=u)?m:D;var m,D;const N=v?c:l;return C.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${I.profile}, level:${N}]`),S(new b(I.profile,N))}},328:(E,p,o)=>{o(8624),E.exports=self.fetch.bind(self)},2215:(E,p,o)=>{var C,_;(function(h){(_=typeof(C=h)=="function"?C.call(p,o,p,E):C)===void 0||(E.exports=_),E.exports=h()})(function(){function h(){for(var k=0,f={};k<arguments.length;k++){var g=arguments[k];for(var s in g)f[s]=g[s]}return f}function b(k){return k.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function k(f){function g(){}function s(S,T,x){if(typeof document<"u"){typeof(x=h({path:"/"},g.defaults,x)).expires=="number"&&(x.expires=new Date(1*new Date+864e5*x.expires)),x.expires=x.expires?x.expires.toUTCString():"";try{var O=JSON.stringify(T);/^[\{\[]/.test(O)&&(T=O)}catch{}T=f.write?f.write(T,S):encodeURIComponent(String(T)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),S=encodeURIComponent(String(S)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var P="";for(var R in x)x[R]&&(P+="; "+R,x[R]!==!0&&(P+="="+x[R].split(";")[0]));return document.cookie=S+"="+T+P}}function w(S,T){if(typeof document<"u"){for(var x={},O=document.cookie?document.cookie.split("; "):[],P=0;P<O.length;P++){var R=O[P].split("="),I=R.slice(1).join("=");T||I.charAt(0)!=='"'||(I=I.slice(1,-1));try{var d=b(R[0]);if(I=(f.read||f)(I,d)||b(I),T)try{I=JSON.parse(I)}catch{}if(x[d]=I,S===d)break}catch{}}return S?x[S]:x}}return g.set=s,g.get=function(S){return w(S,!1)},g.getJSON=function(S){return w(S,!0)},g.remove=function(S,T){s(S,"",h(T,{expires:-1}))},g.defaults={},g.withConverter=k,g}(function(){})})},7654:(E,p,o)=>{var C="__lodash_hash_undefined__",_="[object Function]",h="[object GeneratorFunction]",b=/^\[object .+?Constructor\]$/,k=typeof o.g=="object"&&o.g&&o.g.Object===Object&&o.g,f=typeof self=="object"&&self&&self.Object===Object&&self,g=k||f||Function("return this")(),s,w=Array.prototype,S=Function.prototype,T=Object.prototype,x=g["__core-js_shared__"],O=(s=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"",P=S.toString,R=T.hasOwnProperty,I=T.toString,d=RegExp("^"+P.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=w.splice,c=V(g,"Map"),u=V(Object,"create");function l(ne){var pe=-1,ge=ne?ne.length:0;for(this.clear();++pe<ge;){var _e=ne[pe];this.set(_e[0],_e[1])}}function m(ne){var pe=-1,ge=ne?ne.length:0;for(this.clear();++pe<ge;){var _e=ne[pe];this.set(_e[0],_e[1])}}function D(ne){var pe=-1,ge=ne?ne.length:0;for(this.clear();++pe<ge;){var _e=ne[pe];this.set(_e[0],_e[1])}}function N(ne,pe){for(var ge,_e,Me=ne.length;Me--;)if((ge=ne[Me][0])===(_e=pe)||ge!=ge&&_e!=_e)return Me;return-1}function L(ne){if(!Z(ne)||(pe=ne,O&&O in pe))return!1;var pe,ge=function(_e){var Me=Z(_e)?I.call(_e):"";return Me==_||Me==h}(ne)||function(_e){var Me=!1;if(_e!=null&&typeof _e.toString!="function")try{Me=!!(_e+"")}catch{}return Me}(ne)?d:b;return ge.test(function(_e){if(_e!=null){try{return P.call(_e)}catch{}try{return _e+""}catch{}}return""}(ne))}function j(ne,pe){var ge,_e,Me=ne.__data__;return((_e=typeof(ge=pe))=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?ge!=="__proto__":ge===null)?Me[typeof pe=="string"?"string":"hash"]:Me.map}function V(ne,pe){var ge=function(_e,Me){return _e==null?void 0:_e[Me]}(ne,pe);return L(ge)?ge:void 0}function $(ne,pe){if(typeof ne!="function"||pe&&typeof pe!="function")throw new TypeError("Expected a function");var ge=function(){var _e=arguments,Me=pe?pe.apply(this,_e):_e[0],me=ge.cache;if(me.has(Me))return me.get(Me);var oe=ne.apply(this,_e);return ge.cache=me.set(Me,oe),oe};return ge.cache=new($.Cache||D),ge}function Z(ne){var pe=typeof ne;return!!ne&&(pe=="object"||pe=="function")}l.prototype.clear=function(){this.__data__=u?u(null):{}},l.prototype.delete=function(ne){return this.has(ne)&&delete this.__data__[ne]},l.prototype.get=function(ne){var pe=this.__data__;if(u){var ge=pe[ne];return ge===C?void 0:ge}return R.call(pe,ne)?pe[ne]:void 0},l.prototype.has=function(ne){var pe=this.__data__;return u?pe[ne]!==void 0:R.call(pe,ne)},l.prototype.set=function(ne,pe){return this.__data__[ne]=u&&pe===void 0?C:pe,this},m.prototype.clear=function(){this.__data__=[]},m.prototype.delete=function(ne){var pe=this.__data__,ge=N(pe,ne);return!(ge<0)&&(ge==pe.length-1?pe.pop():v.call(pe,ge,1),!0)},m.prototype.get=function(ne){var pe=this.__data__,ge=N(pe,ne);return ge<0?void 0:pe[ge][1]},m.prototype.has=function(ne){return N(this.__data__,ne)>-1},m.prototype.set=function(ne,pe){var ge=this.__data__,_e=N(ge,ne);return _e<0?ge.push([ne,pe]):ge[_e][1]=pe,this},D.prototype.clear=function(){this.__data__={hash:new l,map:new(c||m),string:new l}},D.prototype.delete=function(ne){return j(this,ne).delete(ne)},D.prototype.get=function(ne){return j(this,ne).get(ne)},D.prototype.has=function(ne){return j(this,ne).has(ne)},D.prototype.set=function(ne,pe){return j(this,ne).set(ne,pe),this},$.Cache=D,E.exports=$},3518:(E,p,o)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Consumer=void 0;const C=o(2994),_=o(2010),h=o(4893),b=new C.Logger("Consumer");class k extends _.EnhancedEventEmitter{constructor({id:g,localId:s,producerId:w,rtpReceiver:S,track:T,rtpParameters:x,appData:O}){super(),this._closed=!1,this._observer=new _.EnhancedEventEmitter,b.debug("constructor()"),this._id=g,this._localId=s,this._producerId=w,this._rtpReceiver=S,this._track=T,this._rtpParameters=x,this._paused=!T.enabled,this._appData=O||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(g){this._appData=g}get observer(){return this._observer}close(){this._closed||(b.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(b.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new h.InvalidStateError("closed");return new Promise((g,s)=>{this.safeEmit("@getstats",g,s)})}pause(){b.debug("pause()"),this._closed?b.error("pause() | Consumer closed"):this._paused?b.debug("pause() | Consumer is already paused"):(this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause"))}resume(){b.debug("resume()"),this._closed?b.error("resume() | Consumer closed"):this._paused?(this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")):b.debug("resume() | Consumer is already resumed")}onTrackEnded(){b.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}}p.Consumer=k},9166:(E,p,o)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.DataConsumer=void 0;const C=o(2994),_=o(2010),h=new C.Logger("DataConsumer");class b extends _.EnhancedEventEmitter{constructor({id:f,dataProducerId:g,dataChannel:s,sctpStreamParameters:w,appData:S}){super(),this._closed=!1,this._observer=new _.EnhancedEventEmitter,h.debug("constructor()"),this._id=f,this._dataProducerId=g,this._dataChannel=s,this._sctpStreamParameters=w,this._appData=S||{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(f){this._dataChannel.binaryType=f}get appData(){return this._appData}set appData(f){this._appData=f}get observer(){return this._observer}close(){this._closed||(h.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(h.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(h.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",f=>{if(this._closed)return;let{error:g}=f;g||(g=new Error("unknown DataChannel error")),g.errorDetail==="sctp-failure"?h.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",g.sctpCauseCode,g.message):h.error('DataChannel "error" event: %o',g),this.safeEmit("error",g)}),this._dataChannel.addEventListener("close",()=>{this._closed||(h.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",f=>{this._closed||this.safeEmit("message",f.data)})}}p.DataConsumer=b},7504:(E,p,o)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.DataProducer=void 0;const C=o(2994),_=o(2010),h=o(4893),b=new C.Logger("DataProducer");class k extends _.EnhancedEventEmitter{constructor({id:g,dataChannel:s,sctpStreamParameters:w,appData:S}){super(),this._closed=!1,this._observer=new _.EnhancedEventEmitter,b.debug("constructor()"),this._id=g,this._dataChannel=s,this._sctpStreamParameters=w,this._appData=S||{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(g){this._dataChannel.bufferedAmountLowThreshold=g}get appData(){return this._appData}set appData(g){this._appData=g}get observer(){return this._observer}close(){this._closed||(b.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(b.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(g){if(b.debug("send()"),this._closed)throw new h.InvalidStateError("closed");this._dataChannel.send(g)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(b.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",g=>{if(this._closed)return;let{error:s}=g;s||(s=new Error("unknown DataChannel error")),s.errorDetail==="sctp-failure"?b.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",s.sctpCauseCode,s.message):b.error('DataChannel "error" event: %o',s),this.safeEmit("error",s)}),this._dataChannel.addEventListener("close",()=>{this._closed||(b.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||b.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}p.DataProducer=k},6004:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(L,j,V,$){$===void 0&&($=V);var Z=Object.getOwnPropertyDescriptor(j,V);Z&&!("get"in Z?!j.__esModule:Z.writable||Z.configurable)||(Z={enumerable:!0,get:function(){return j[V]}}),Object.defineProperty(L,$,Z)}:function(L,j,V,$){$===void 0&&($=V),L[$]=j[V]}),_=this&&this.__setModuleDefault||(Object.create?function(L,j){Object.defineProperty(L,"default",{enumerable:!0,value:j})}:function(L,j){L.default=j}),h=this&&this.__importStar||function(L){if(L&&L.__esModule)return L;var j={};if(L!=null)for(var V in L)V!=="default"&&Object.prototype.hasOwnProperty.call(L,V)&&C(j,L,V);return _(j,L),j};Object.defineProperty(p,"__esModule",{value:!0}),p.Device=p.detectDevice=void 0;const b=o(7232),k=o(2994),f=o(2010),g=o(4893),s=h(o(1765)),w=h(o(8046)),S=o(5601),T=o(2183),x=o(11),O=o(5535),P=o(8155),R=o(7402),I=o(2292),d=o(1767),v=o(5765),c=o(9676),u=o(8633),l=o(4039),m=o(9352),D=new k.Logger("Device");function N(){var L,j,V,$;if(typeof navigator=="object"&&navigator.product==="ReactNative")return D.debug("detectDevice() | React-Native detected"),typeof RTCPeerConnection>"u"?void D.warn("detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?"):typeof RTCRtpTransceiver<"u"?(D.debug("detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(D.debug("detectDevice() | ReactNative PlanB handler chosen"),"ReactNative");if(typeof navigator!="object"||typeof navigator.userAgent!="string")D.warn("detectDevice() | unknown device");else{const Z=navigator.userAgent,ne=new b.UAParser(Z);D.debug("detectDevice() | browser detected [ua:%s, parsed:%o]",Z,ne.getResult());const pe=ne.getBrowser(),ge=(L=pe.name)==null?void 0:L.toLowerCase(),_e=parseInt(pe.major??"0"),Me=ne.getEngine(),me=(j=Me.name)==null?void 0:j.toLowerCase(),oe=ne.getOS(),ve=(V=oe.name)==null?void 0:V.toLowerCase(),we=parseFloat(oe.version??"0"),be=ne.getDevice(),lt=($=be.model)==null?void 0:$.toLowerCase(),Ot=ve==="ios"||lt==="ipad",Yt=ge&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(ge),vt=ge&&["firefox","mobile firefox","mobile focus"].includes(ge),Mr=ge&&["safari","mobile safari"].includes(ge),Kt=ge&&["edge"].includes(ge);if((Yt||Kt)&&!Ot&&_e>=111)return"Chrome111";if(Yt&&!Ot&&_e>=74||Kt&&!Ot&&_e>=88)return"Chrome74";if(Yt&&!Ot&&_e>=70)return"Chrome70";if(Yt&&!Ot&&_e>=67)return"Chrome67";if(Yt&&!Ot&&_e>=55)return"Chrome55";if(vt&&!Ot&&_e>=120)return"Firefox120";if(vt&&!Ot&&_e>=60)return"Firefox60";if(vt&&Ot&&we>=14.3||Mr&&_e>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(Mr&&_e>=11)return"Safari11";if(Kt&&!Ot&&_e>=11&&_e<=18)return"Edge11";if(me==="webkit"&&Ot&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(me==="blink"){const At=Z.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(At){const Ar=Number(At[1]);return Ar>=111?"Chrome111":Ar>=74?"Chrome74":Ar>=70?"Chrome70":Ar>=67?"Chrome67":"Chrome55"}return"Chrome111"}D.warn("detectDevice() | browser not supported [name:%s, version:%s]",ge,_e)}}p.detectDevice=N,p.Device=class{constructor({handlerName:L,handlerFactory:j,Handler:V}={}){if(this._loaded=!1,this._observer=new f.EnhancedEventEmitter,D.debug("constructor()"),V){if(D.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),typeof V!="string")throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");L=V}if(L&&j)throw new TypeError("just one of handlerName or handlerInterface can be given");if(j)this._handlerFactory=j;else{if(L)D.debug("constructor() | handler given: %s",L);else{if(!(L=N()))throw new g.UnsupportedError("device not supported");D.debug("constructor() | detected handler: %s",L)}switch(L){case"Chrome111":this._handlerFactory=T.Chrome111.createFactory();break;case"Chrome74":this._handlerFactory=x.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=O.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=P.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=R.Chrome55.createFactory();break;case"Firefox120":this._handlerFactory=I.Firefox120.createFactory();break;case"Firefox60":this._handlerFactory=d.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=v.Safari12.createFactory();break;case"Safari11":this._handlerFactory=c.Safari11.createFactory();break;case"Edge11":this._handlerFactory=u.Edge11.createFactory();break;case"ReactNativeUnifiedPlan":this._handlerFactory=l.ReactNativeUnifiedPlan.createFactory();break;case"ReactNative":this._handlerFactory=m.ReactNative.createFactory();break;default:throw new TypeError(`unknown handlerName "${L}"`)}}const $=this._handlerFactory();this._handlerName=$.name,$.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new g.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new g.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:L}){let j;D.debug("load() [routerRtpCapabilities:%o]",L);try{if(this._loaded)throw new g.InvalidStateError("already loaded");const V=s.clone(L);w.validateRtpCapabilities(V),j=this._handlerFactory();const $=await j.getNativeRtpCapabilities();D.debug("load() | got native RTP capabilities:%o",$);const Z=s.clone($);w.validateRtpCapabilities(Z),this._extendedRtpCapabilities=w.getExtendedRtpCapabilities(Z,V),D.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=w.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=w.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=w.getRecvRtpCapabilities(this._extendedRtpCapabilities),w.validateRtpCapabilities(this._recvRtpCapabilities),D.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await j.getNativeSctpCapabilities(),D.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),w.validateSctpCapabilities(this._sctpCapabilities),D.debug("load() succeeded"),this._loaded=!0,j.close()}catch(V){throw j&&j.close(),V}}canProduce(L){if(!this._loaded)throw new g.InvalidStateError("not loaded");if(L!=="audio"&&L!=="video")throw new TypeError(`invalid kind "${L}"`);return this._canProduceByKind[L]}createSendTransport({id:L,iceParameters:j,iceCandidates:V,dtlsParameters:$,sctpParameters:Z,iceServers:ne,iceTransportPolicy:pe,additionalSettings:ge,proprietaryConstraints:_e,appData:Me}){return D.debug("createSendTransport()"),this.createTransport({direction:"send",id:L,iceParameters:j,iceCandidates:V,dtlsParameters:$,sctpParameters:Z,iceServers:ne,iceTransportPolicy:pe,additionalSettings:ge,proprietaryConstraints:_e,appData:Me})}createRecvTransport({id:L,iceParameters:j,iceCandidates:V,dtlsParameters:$,sctpParameters:Z,iceServers:ne,iceTransportPolicy:pe,additionalSettings:ge,proprietaryConstraints:_e,appData:Me}){return D.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:L,iceParameters:j,iceCandidates:V,dtlsParameters:$,sctpParameters:Z,iceServers:ne,iceTransportPolicy:pe,additionalSettings:ge,proprietaryConstraints:_e,appData:Me})}createTransport({direction:L,id:j,iceParameters:V,iceCandidates:$,dtlsParameters:Z,sctpParameters:ne,iceServers:pe,iceTransportPolicy:ge,additionalSettings:_e,proprietaryConstraints:Me,appData:me}){if(!this._loaded)throw new g.InvalidStateError("not loaded");if(typeof j!="string")throw new TypeError("missing id");if(typeof V!="object")throw new TypeError("missing iceParameters");if(!Array.isArray($))throw new TypeError("missing iceCandidates");if(typeof Z!="object")throw new TypeError("missing dtlsParameters");if(ne&&typeof ne!="object")throw new TypeError("wrong sctpParameters");if(me&&typeof me!="object")throw new TypeError("if given, appData must be an object");const oe=new S.Transport({direction:L,id:j,iceParameters:V,iceCandidates:$,dtlsParameters:Z,sctpParameters:ne,iceServers:pe,iceTransportPolicy:ge,additionalSettings:_e,proprietaryConstraints:Me,appData:me,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",oe),oe}}},2010:(E,p,o)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.EnhancedEventEmitter=void 0;const C=o(7007),_=new(o(2994)).Logger("EnhancedEventEmitter");class h extends C.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(k,...f){return super.emit(k,...f)}safeEmit(k,...f){const g=super.listenerCount(k);try{return super.emit(k,...f)}catch(s){return _.error("safeEmit() | event listener threw an error [eventName:%s]:%o",k,s),!!g}}on(k,f){return super.on(k,f),this}off(k,f){return super.off(k,f),this}addListener(k,f){return super.on(k,f),this}prependListener(k,f){return super.prependListener(k,f),this}once(k,f){return super.once(k,f),this}prependOnceListener(k,f){return super.prependOnceListener(k,f),this}removeListener(k,f){return super.off(k,f),this}removeAllListeners(k){return super.removeAllListeners(k),this}listenerCount(k){return super.listenerCount(k)}listeners(k){return super.listeners(k)}rawListeners(k){return super.rawListeners(k)}}p.EnhancedEventEmitter=h},2994:function(E,p,o){var C=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(p,"__esModule",{value:!0}),p.Logger=void 0;const _=C(o(7833)),h="mediasoup-client";p.Logger=class{constructor(b){b?(this._debug=(0,_.default)(`${h}:${b}`),this._warn=(0,_.default)(`${h}:WARN:${b}`),this._error=(0,_.default)(`${h}:ERROR:${b}`)):(this._debug=(0,_.default)(h),this._warn=(0,_.default)(`${h}:WARN`),this._error=(0,_.default)(`${h}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},9792:(E,p,o)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Producer=void 0;const C=o(2994),_=o(2010),h=o(4893),b=new C.Logger("Producer");class k extends _.EnhancedEventEmitter{constructor({id:g,localId:s,rtpSender:w,track:S,rtpParameters:T,stopTracks:x,disableTrackOnPause:O,zeroRtpOnPause:P,appData:R}){super(),this._closed=!1,this._observer=new _.EnhancedEventEmitter,b.debug("constructor()"),this._id=g,this._localId=s,this._rtpSender=w,this._track=S,this._kind=S.kind,this._rtpParameters=T,this._paused=!!O&&!S.enabled,this._maxSpatialLayer=void 0,this._stopTracks=x,this._disableTrackOnPause=O,this._zeroRtpOnPause=P,this._appData=R||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(g){this._appData=g}get observer(){return this._observer}close(){this._closed||(b.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(b.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new h.InvalidStateError("closed");return new Promise((g,s)=>{this.safeEmit("@getstats",g,s)})}pause(){b.debug("pause()"),this._closed?b.error("pause() | Producer closed"):(this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((g,s)=>{this.safeEmit("@pause",g,s)}).catch(()=>{}),this._observer.safeEmit("pause"))}resume(){b.debug("resume()"),this._closed?b.error("resume() | Producer closed"):(this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((g,s)=>{this.safeEmit("@resume",g,s)}).catch(()=>{}),this._observer.safeEmit("resume"))}async replaceTrack({track:g}){if(b.debug("replaceTrack() [track:%o]",g),this._closed){if(g&&this._stopTracks)try{g.stop()}catch{}throw new h.InvalidStateError("closed")}if(g&&g.readyState==="ended")throw new h.InvalidStateError("track ended");g!==this._track?(await new Promise((s,w)=>{this.safeEmit("@replacetrack",g,s,w)}),this.destroyTrack(),this._track=g,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()):b.debug("replaceTrack() | same track, ignored")}async setMaxSpatialLayer(g){if(this._closed)throw new h.InvalidStateError("closed");if(this._kind!=="video")throw new h.UnsupportedError("not a video Producer");if(typeof g!="number")throw new TypeError("invalid spatialLayer");g!==this._maxSpatialLayer&&(await new Promise((s,w)=>{this.safeEmit("@setmaxspatiallayer",g,s,w)}).catch(()=>{}),this._maxSpatialLayer=g)}async setRtpEncodingParameters(g){if(this._closed)throw new h.InvalidStateError("closed");if(typeof g!="object")throw new TypeError("invalid params");await new Promise((s,w)=>{this.safeEmit("@setrtpencodingparameters",g,s,w)})}onTrackEnded(){b.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}}p.Producer=k},5370:(E,p)=>{Object.defineProperty(p,"__esModule",{value:!0})},4160:(E,p)=>{Object.defineProperty(p,"__esModule",{value:!0})},5601:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(c,u,l,m){m===void 0&&(m=l);var D=Object.getOwnPropertyDescriptor(u,l);D&&!("get"in D?!u.__esModule:D.writable||D.configurable)||(D={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(c,m,D)}:function(c,u,l,m){m===void 0&&(m=l),c[m]=u[l]}),_=this&&this.__setModuleDefault||(Object.create?function(c,u){Object.defineProperty(c,"default",{enumerable:!0,value:u})}:function(c,u){c.default=u}),h=this&&this.__importStar||function(c){if(c&&c.__esModule)return c;var u={};if(c!=null)for(var l in c)l!=="default"&&Object.prototype.hasOwnProperty.call(c,l)&&C(u,c,l);return _(u,c),u},b=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(p,"__esModule",{value:!0}),p.Transport=void 0;const k=o(8876),f=b(o(9596)),g=o(2994),s=o(2010),w=o(4893),S=h(o(1765)),T=h(o(8046)),x=o(9792),O=o(3518),P=o(7504),R=o(9166),I=new g.Logger("Transport");class d{constructor(u){this.consumerOptions=u,this.promise=new Promise((l,m)=>{this.resolve=l,this.reject=m})}}class v extends s.EnhancedEventEmitter{constructor({direction:u,id:l,iceParameters:m,iceCandidates:D,dtlsParameters:N,sctpParameters:L,iceServers:j,iceTransportPolicy:V,additionalSettings:$,proprietaryConstraints:Z,appData:ne,handlerFactory:pe,extendedRtpCapabilities:ge,canProduceByKind:_e}){super(),this._closed=!1,this._iceGatheringState="new",this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new k.AwaitQueue,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new s.EnhancedEventEmitter,I.debug("constructor() [id:%s, direction:%s]",l,u),this._id=l,this._direction=u,this._extendedRtpCapabilities=ge,this._canProduceByKind=_e,this._maxSctpMessageSize=L?L.maxMessageSize:null;const Me=S.clone($)||{};delete Me.iceServers,delete Me.iceTransportPolicy,delete Me.bundlePolicy,delete Me.rtcpMuxPolicy,delete Me.sdpSemantics,this._handler=pe(),this._handler.run({direction:u,iceParameters:m,iceCandidates:D,dtlsParameters:N,sctpParameters:L,iceServers:j,iceTransportPolicy:V,additionalSettings:Me,proprietaryConstraints:Z,extendedRtpCapabilities:ge}),this._appData=ne||{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(u){this._appData=u}get observer(){return this._observer}close(){if(!this._closed){I.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const u of this._producers.values())u.transportClosed();this._producers.clear();for(const u of this._consumers.values())u.transportClosed();this._consumers.clear();for(const u of this._dataProducers.values())u.transportClosed();this._dataProducers.clear();for(const u of this._dataConsumers.values())u.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new w.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:u}){if(I.debug("restartIce()"),this._closed)throw new w.InvalidStateError("closed");if(!u)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(u),"transport.restartIce()")}async updateIceServers({iceServers:u}={}){if(I.debug("updateIceServers()"),this._closed)throw new w.InvalidStateError("closed");if(!Array.isArray(u))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(u),"transport.updateIceServers()")}async produce({track:u,encodings:l,codecOptions:m,codec:D,stopTracks:N=!0,disableTrackOnPause:L=!0,zeroRtpOnPause:j=!1,appData:V={}}={}){if(I.debug("produce() [track:%o]",u),this._closed)throw new w.InvalidStateError("closed");if(!u)throw new TypeError("missing track");if(this._direction!=="send")throw new w.UnsupportedError("not a sending Transport");if(!this._canProduceByKind[u.kind])throw new w.UnsupportedError(`cannot produce ${u.kind}`);if(u.readyState==="ended")throw new w.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(V&&typeof V!="object")throw new TypeError("if given, appData must be an object");return this._awaitQueue.push(async()=>{let $;if(l&&!Array.isArray(l))throw TypeError("encodings must be an array");l&&l.length===0?$=void 0:l&&($=l.map(ge=>{const _e={active:!0};return ge.active===!1&&(_e.active=!1),typeof ge.dtx=="boolean"&&(_e.dtx=ge.dtx),typeof ge.scalabilityMode=="string"&&(_e.scalabilityMode=ge.scalabilityMode),typeof ge.scaleResolutionDownBy=="number"&&(_e.scaleResolutionDownBy=ge.scaleResolutionDownBy),typeof ge.maxBitrate=="number"&&(_e.maxBitrate=ge.maxBitrate),typeof ge.maxFramerate=="number"&&(_e.maxFramerate=ge.maxFramerate),typeof ge.adaptivePtime=="boolean"&&(_e.adaptivePtime=ge.adaptivePtime),typeof ge.priority=="string"&&(_e.priority=ge.priority),typeof ge.networkPriority=="string"&&(_e.networkPriority=ge.networkPriority),_e}));const{localId:Z,rtpParameters:ne,rtpSender:pe}=await this._handler.send({track:u,encodings:$,codecOptions:m,codec:D});try{T.validateRtpParameters(ne);const{id:ge}=await new Promise((Me,me)=>{this.safeEmit("produce",{kind:u.kind,rtpParameters:ne,appData:V},Me,me)}),_e=new x.Producer({id:ge,localId:Z,rtpSender:pe,track:u,rtpParameters:ne,stopTracks:N,disableTrackOnPause:L,zeroRtpOnPause:j,appData:V});return this._producers.set(_e.id,_e),this.handleProducer(_e),this._observer.safeEmit("newproducer",_e),_e}catch(ge){throw this._handler.stopSending(Z).catch(()=>{}),ge}},"transport.produce()").catch($=>{if(N)try{u.stop()}catch{}throw $})}async consume({id:u,producerId:l,kind:m,rtpParameters:D,streamId:N,appData:L={}}){if(I.debug("consume()"),this._closed)throw new w.InvalidStateError("closed");if(this._direction!=="recv")throw new w.UnsupportedError("not a receiving Transport");if(typeof u!="string")throw new TypeError("missing id");if(typeof l!="string")throw new TypeError("missing producerId");if(m!=="audio"&&m!=="video")throw new TypeError(`invalid kind '${m}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(L&&typeof L!="object")throw new TypeError("if given, appData must be an object");const j=S.clone(D);if(!T.canReceive(j,this._extendedRtpCapabilities))throw new w.UnsupportedError("cannot consume this Producer");const V=new d({id:u,producerId:l,kind:m,rtpParameters:j,streamId:N,appData:L});return this._pendingConsumerTasks.push(V),(0,f.default)(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),V.promise}async produceData({ordered:u=!0,maxPacketLifeTime:l,maxRetransmits:m,label:D="",protocol:N="",appData:L={}}={}){if(I.debug("produceData()"),this._closed)throw new w.InvalidStateError("closed");if(this._direction!=="send")throw new w.UnsupportedError("not a sending Transport");if(!this._maxSctpMessageSize)throw new w.UnsupportedError("SCTP not enabled by remote Transport");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(L&&typeof L!="object")throw new TypeError("if given, appData must be an object");return(l||m)&&(u=!1),this._awaitQueue.push(async()=>{const{dataChannel:j,sctpStreamParameters:V}=await this._handler.sendDataChannel({ordered:u,maxPacketLifeTime:l,maxRetransmits:m,label:D,protocol:N});T.validateSctpStreamParameters(V);const{id:$}=await new Promise((ne,pe)=>{this.safeEmit("producedata",{sctpStreamParameters:V,label:D,protocol:N,appData:L},ne,pe)}),Z=new P.DataProducer({id:$,dataChannel:j,sctpStreamParameters:V,appData:L});return this._dataProducers.set(Z.id,Z),this.handleDataProducer(Z),this._observer.safeEmit("newdataproducer",Z),Z},"transport.produceData()")}async consumeData({id:u,dataProducerId:l,sctpStreamParameters:m,label:D="",protocol:N="",appData:L={}}){if(I.debug("consumeData()"),this._closed)throw new w.InvalidStateError("closed");if(this._direction!=="recv")throw new w.UnsupportedError("not a receiving Transport");if(!this._maxSctpMessageSize)throw new w.UnsupportedError("SCTP not enabled by remote Transport");if(typeof u!="string")throw new TypeError("missing id");if(typeof l!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(L&&typeof L!="object")throw new TypeError("if given, appData must be an object");const j=S.clone(m);return T.validateSctpStreamParameters(j),this._awaitQueue.push(async()=>{const{dataChannel:V}=await this._handler.receiveDataChannel({sctpStreamParameters:j,label:D,protocol:N}),$=new R.DataConsumer({id:u,dataProducerId:l,dataChannel:V,sctpStreamParameters:j,appData:L});return this._dataConsumers.set($.id,$),this.handleDataConsumer($),this._observer.safeEmit("newdataconsumer",$),$},"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0)return void I.debug("createPendingConsumers() | there is no Consumer to be created");const u=[...this._pendingConsumerTasks];let l;this._pendingConsumerTasks=[];const m=[];for(const D of u){const{id:N,kind:L,rtpParameters:j,streamId:V}=D.consumerOptions;m.push({trackId:N,kind:L,rtpParameters:j,streamId:V})}try{const D=await this._handler.receive(m);for(let N=0;N<D.length;++N){const L=u[N],j=D[N],{id:V,producerId:$,kind:Z,rtpParameters:ne,appData:pe}=L.consumerOptions,{localId:ge,rtpReceiver:_e,track:Me}=j,me=new O.Consumer({id:V,localId:ge,producerId:$,rtpReceiver:_e,track:Me,rtpParameters:ne,appData:pe});this._consumers.set(me.id,me),this.handleConsumer(me),this._probatorConsumerCreated||l||Z!=="video"||(l=me),this._observer.safeEmit("newconsumer",me),L.resolve(me)}}catch(D){for(const N of u)N.reject(D)}if(l)try{const D=T.generateProbatorRtpParameters(l.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:D}]),I.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(D){I.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",D)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0)return void I.debug("pausePendingConsumers() | there is no Consumer to be paused");const u=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const l=u.map(m=>m.localId);await this._handler.pauseReceiving(l)}catch(l){I.error("pausePendingConsumers() | failed to pause Consumers:",l)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0)return void I.debug("resumePendingConsumers() | there is no Consumer to be resumed");const u=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const l=u.map(m=>m.localId);await this._handler.resumeReceiving(l)}catch(l){I.error("resumePendingConsumers() | failed to resume Consumers:",l)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0)return void I.debug("closePendingConsumers() | there is no Consumer to be closed");const u=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(u.map(l=>l.localId))}catch(l){I.error("closePendingConsumers() | failed to close Consumers:",l)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const u=this._handler;u.on("@connect",({dtlsParameters:l},m,D)=>{this._closed?D(new w.InvalidStateError("closed")):this.safeEmit("connect",{dtlsParameters:l},m,D)}),u.on("@icegatheringstatechange",l=>{l!==this._iceGatheringState&&(I.debug("ICE gathering state changed to %s",l),this._iceGatheringState=l,this._closed||this.safeEmit("icegatheringstatechange",l))}),u.on("@connectionstatechange",l=>{l!==this._connectionState&&(I.debug("connection state changed to %s",l),this._connectionState=l,this._closed||this.safeEmit("connectionstatechange",l))})}handleProducer(u){u.on("@close",()=>{this._producers.delete(u.id),this._closed||this._awaitQueue.push(async()=>await this._handler.stopSending(u.localId),"producer @close event").catch(l=>I.warn("producer.close() failed:%o",l))}),u.on("@pause",(l,m)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(u.localId),"producer @pause event").then(l).catch(m)}),u.on("@resume",(l,m)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(u.localId),"producer @resume event").then(l).catch(m)}),u.on("@replacetrack",(l,m,D)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(u.localId,l),"producer @replacetrack event").then(m).catch(D)}),u.on("@setmaxspatiallayer",(l,m,D)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(u.localId,l),"producer @setmaxspatiallayer event").then(m).catch(D)}),u.on("@setrtpencodingparameters",(l,m,D)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(u.localId,l),"producer @setrtpencodingparameters event").then(m).catch(D)}),u.on("@getstats",(l,m)=>{if(this._closed)return m(new w.InvalidStateError("closed"));this._handler.getSenderStats(u.localId).then(l).catch(m)})}handleConsumer(u){u.on("@close",()=>{this._consumers.delete(u.id),this._pendingPauseConsumers.delete(u.id),this._pendingResumeConsumers.delete(u.id),this._closed||(this._pendingCloseConsumers.set(u.id,u),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),u.on("@pause",()=>{this._pendingResumeConsumers.has(u.id)&&this._pendingResumeConsumers.delete(u.id),this._pendingPauseConsumers.set(u.id,u),(0,f.default)(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),u.on("@resume",()=>{this._pendingPauseConsumers.has(u.id)&&this._pendingPauseConsumers.delete(u.id),this._pendingResumeConsumers.set(u.id,u),(0,f.default)(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),u.on("@getstats",(l,m)=>{if(this._closed)return m(new w.InvalidStateError("closed"));this._handler.getReceiverStats(u.localId).then(l).catch(m)})}handleDataProducer(u){u.on("@close",()=>{this._dataProducers.delete(u.id)})}handleDataConsumer(u){u.on("@close",()=>{this._dataConsumers.delete(u.id)})}}p.Transport=v},4893:(E,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.InvalidStateError=p.UnsupportedError=void 0;class o extends Error{constructor(h){super(h),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,o):this.stack=new Error(h).stack}}p.UnsupportedError=o;class C extends Error{constructor(h){super(h),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,C):this.stack=new Error(h).stack}}p.InvalidStateError=C},2183:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(v,c,u,l){l===void 0&&(l=u);var m=Object.getOwnPropertyDescriptor(c,u);m&&!("get"in m?!c.__esModule:m.writable||m.configurable)||(m={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(v,l,m)}:function(v,c,u,l){l===void 0&&(l=u),v[l]=c[u]}),_=this&&this.__setModuleDefault||(Object.create?function(v,c){Object.defineProperty(v,"default",{enumerable:!0,value:c})}:function(v,c){v.default=c}),h=this&&this.__importStar||function(v){if(v&&v.__esModule)return v;var c={};if(v!=null)for(var u in v)u!=="default"&&Object.prototype.hasOwnProperty.call(v,u)&&C(c,v,u);return _(c,v),c};Object.defineProperty(p,"__esModule",{value:!0}),p.Chrome111=void 0;const b=h(o(7363)),k=o(2994),f=h(o(1765)),g=h(o(8046)),s=h(o(5544)),w=h(o(5938)),S=h(o(4256)),T=o(4893),x=o(521),O=o(1305),P=o(3303),R=new k.Logger("Chrome111"),I={OS:1024,MIS:1024};class d extends x.HandlerInterface{static createFactory(){return()=>new d}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome111"}close(){if(R.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){R.debug("getNativeRtpCapabilities()");const c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{c.addTransceiver("audio"),c.addTransceiver("video");const u=await c.createOffer();try{c.close()}catch{}const l=b.parse(u.sdp),m=s.extractRtpCapabilities({sdpObject:l});return S.addNackSuppportForOpus(m),m}catch(u){try{c.close()}catch{}throw u}}async getNativeSctpCapabilities(){return R.debug("getNativeSctpCapabilities()"),{numStreams:I}}run({direction:c,iceParameters:u,iceCandidates:l,dtlsParameters:m,sctpParameters:D,iceServers:N,iceTransportPolicy:L,additionalSettings:j,proprietaryConstraints:V,extendedRtpCapabilities:$}){this.assertNotClosed(),R.debug("run()"),this._direction=c,this._remoteSdp=new O.RemoteSdp({iceParameters:u,iceCandidates:l,dtlsParameters:m,sctpParameters:D}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",$),video:g.getSendingRtpParameters("video",$)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",$),video:g.getSendingRemoteRtpParameters("video",$)},m.role&&m.role!=="auto"&&(this._forcedLocalDtlsRole=m.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:N||[],iceTransportPolicy:L||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...j},V),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(R.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(c){this.assertNotClosed(),R.debug("updateIceServers()");const u=this._pc.getConfiguration();u.iceServers=c,this._pc.setConfiguration(u)}async restartIce(c){if(this.assertNotClosed(),R.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),this._transportReady)if(this._direction==="send"){const u=await this._pc.createOffer({iceRestart:!0});R.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}else{const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,encodings:u,codecOptions:l,codec:m}){if(this.assertNotClosed(),this.assertSendDirection(),R.debug("send() [kind:%s, track.id:%s]",c.kind,c.id),u&&u.length>1){let ge=1;for(const _e of u){const Me=_e.scalabilityMode?(0,P.parse)(_e.scalabilityMode).temporalLayers:3;Me>ge&&(ge=Me)}u.forEach((_e,Me)=>{_e.rid=`r${Me}`,_e.scalabilityMode=`L1T${ge}`})}const D=f.clone(this._sendingRtpParametersByKind[c.kind]);D.codecs=g.reduceCodecs(D.codecs,m);const N=f.clone(this._sendingRemoteRtpParametersByKind[c.kind]);N.codecs=g.reduceCodecs(N.codecs,m);const L=this._remoteSdp.getNextMediaSectionIdx(),j=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream],sendEncodings:u}),V=await this._pc.createOffer();let $=b.parse(V.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$}),R.debug("send() | calling pc.setLocalDescription() [offer:%o]",V),await this._pc.setLocalDescription(V);const Z=j.mid;D.mid=Z,$=b.parse(this._pc.localDescription.sdp);const ne=$.media[L.idx];if(D.rtcp.cname=s.getCname({offerMediaObject:ne}),u)if(u.length===1){const ge=w.getRtpEncodings({offerMediaObject:ne});Object.assign(ge[0],u[0]),D.encodings=ge}else D.encodings=u;else D.encodings=w.getRtpEncodings({offerMediaObject:ne});this._remoteSdp.send({offerMediaObject:ne,reuseMid:L.reuseMid,offerRtpParameters:D,answerRtpParameters:N,codecOptions:l,extmapAllowMixed:!0});const pe={type:"answer",sdp:this._remoteSdp.getSdp()};return R.debug("send() | calling pc.setRemoteDescription() [answer:%o]",pe),await this._pc.setRemoteDescription(pe),this._mapMidTransceiver.set(Z,j),{localId:Z,rtpParameters:D,rtpSender:j.sender}}async stopSending(c){if(this.assertSendDirection(),R.debug("stopSending() [localId:%s]",c),this._closed)return;const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");if(u.sender.replaceTrack(null),this._pc.removeTrack(u.sender),this._remoteSdp.closeMediaSection(u.mid))try{u.stop()}catch{}const l=await this._pc.createOffer();R.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),R.debug("pauseSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");u.direction="inactive",this._remoteSdp.pauseMediaSection(c);const l=await this._pc.createOffer();R.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),R.debug("resumeSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(this._remoteSdp.resumeSendingMediaSection(c),!u)throw new Error("associated RTCRtpTransceiver not found");u.direction="sendonly";const l=await this._pc.createOffer();R.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async replaceTrack(c,u){this.assertNotClosed(),this.assertSendDirection(),u?R.debug("replaceTrack() [localId:%s, track.id:%s]",c,u.id):R.debug("replaceTrack() [localId:%s, no track]",c);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");await l.sender.replaceTrack(u)}async setMaxSpatialLayer(c,u){this.assertNotClosed(),this.assertSendDirection(),R.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,u);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");const m=l.sender.getParameters();m.encodings.forEach((L,j)=>{L.active=j<=u}),await l.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(c,m.encodings);const D=await this._pc.createOffer();R.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const N={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async setRtpEncodingParameters(c,u){this.assertNotClosed(),this.assertSendDirection(),R.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,u);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");const m=l.sender.getParameters();m.encodings.forEach((L,j)=>{m.encodings[j]={...L,...u}}),await l.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(c,m.encodings);const D=await this._pc.createOffer();R.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const N={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");return u.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:u,maxRetransmits:l,label:m,protocol:D}){this.assertNotClosed(),this.assertSendDirection();const N={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:u,maxRetransmits:l,protocol:D};R.debug("sendDataChannel() [options:%o]",N);const L=this._pc.createDataChannel(m,N);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%I.MIS,!this._hasDataChannelMediaSection){const j=await this._pc.createOffer(),V=b.parse(j.sdp),$=V.media.find(ne=>ne.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:V}),R.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j),this._remoteSdp.sendSctpAssociation({offerMediaObject:$});const Z={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setRemoteDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:L,sctpStreamParameters:{streamId:N.id,ordered:N.ordered,maxPacketLifeTime:N.maxPacketLifeTime,maxRetransmits:N.maxRetransmits}}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const u=[],l=new Map;for(const L of c){const{trackId:j,kind:V,rtpParameters:$,streamId:Z}=L;R.debug("receive() [trackId:%s, kind:%s]",j,V);const ne=$.mid||String(this._mapMidTransceiver.size);l.set(j,ne),this._remoteSdp.receive({mid:ne,kind:V,offerRtpParameters:$,streamId:Z||$.rtcp.cname,trackId:j})}const m={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);let D=await this._pc.createAnswer();const N=b.parse(D.sdp);for(const L of c){const{trackId:j,rtpParameters:V}=L,$=l.get(j),Z=N.media.find(ne=>String(ne.mid)===$);s.applyCodecParameters({offerRtpParameters:V,answerMediaObject:Z})}D={type:"answer",sdp:b.write(N)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),R.debug("receive() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D);for(const L of c){const{trackId:j}=L,V=l.get(j),$=this._pc.getTransceivers().find(Z=>Z.mid===V);if(!$)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(V,$),u.push({localId:V,track:$.receiver.track,rtpReceiver:$.receiver})}return u}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const m of c){R.debug("stopReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(D.mid)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const m of c)this._mapMidTransceiver.delete(m)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const m of c){R.debug("pauseReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");D.direction="inactive",this._remoteSdp.pauseMediaSection(m)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const m of c){R.debug("resumeReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");D.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(m)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");return u.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:u,protocol:l}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:m,ordered:D,maxPacketLifeTime:N,maxRetransmits:L}=c,j={negotiated:!0,id:m,ordered:D,maxPacketLifeTime:N,maxRetransmits:L,protocol:l};R.debug("receiveDataChannel() [options:%o]",j);const V=this._pc.createDataChannel(u,j);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const $={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",$),await this._pc.setRemoteDescription($);const Z=await this._pc.createAnswer();if(!this._transportReady){const ne=b.parse(Z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:ne})}R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setLocalDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:V}}async setupTransport({localDtlsRole:c,localSdpObject:u}){u||(u=b.parse(this._pc.localDescription.sdp));const l=s.extractDtlsParameters({sdpObject:u});l.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((m,D)=>{this.safeEmit("@connect",{dtlsParameters:l},m,D)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new T.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.Chrome111=d},7402:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(I,d,v,c){c===void 0&&(c=v);var u=Object.getOwnPropertyDescriptor(d,v);u&&!("get"in u?!d.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:function(){return d[v]}}),Object.defineProperty(I,c,u)}:function(I,d,v,c){c===void 0&&(c=v),I[c]=d[v]}),_=this&&this.__setModuleDefault||(Object.create?function(I,d){Object.defineProperty(I,"default",{enumerable:!0,value:d})}:function(I,d){I.default=d}),h=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var d={};if(I!=null)for(var v in I)v!=="default"&&Object.prototype.hasOwnProperty.call(I,v)&&C(d,I,v);return _(d,I),d};Object.defineProperty(p,"__esModule",{value:!0}),p.Chrome55=void 0;const b=h(o(7363)),k=o(2994),f=o(4893),g=h(o(1765)),s=h(o(8046)),w=h(o(5544)),S=h(o(4496)),T=o(521),x=o(1305),O=new k.Logger("Chrome55"),P={OS:1024,MIS:1024};class R extends T.HandlerInterface{static createFactory(){return()=>new R}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome55"}close(){if(O.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){O.debug("getNativeRtpCapabilities()");const d=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const v=await d.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{d.close()}catch{}const c=b.parse(v.sdp);return w.extractRtpCapabilities({sdpObject:c})}catch(v){try{d.close()}catch{}throw v}}async getNativeSctpCapabilities(){return O.debug("getNativeSctpCapabilities()"),{numStreams:P}}run({direction:d,iceParameters:v,iceCandidates:c,dtlsParameters:u,sctpParameters:l,iceServers:m,iceTransportPolicy:D,additionalSettings:N,proprietaryConstraints:L,extendedRtpCapabilities:j}){O.debug("run()"),this._direction=d,this._remoteSdp=new x.RemoteSdp({iceParameters:v,iceCandidates:c,dtlsParameters:u,sctpParameters:l,planB:!0}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",j),video:s.getSendingRtpParameters("video",j)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",j),video:s.getSendingRemoteRtpParameters("video",j)},u.role&&u.role!=="auto"&&(this._forcedLocalDtlsRole=u.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:m||[],iceTransportPolicy:D||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...N},L),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(O.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(d){O.debug("updateIceServers()");const v=this._pc.getConfiguration();v.iceServers=d,this._pc.setConfiguration(v)}async restartIce(d){if(O.debug("restartIce()"),this._remoteSdp.updateIceParameters(d),this._transportReady)if(this._direction==="send"){const v=await this._pc.createOffer({iceRestart:!0});O.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const c={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}else{const v={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const c=await this._pc.createAnswer();O.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}}async getTransportStats(){return this._pc.getStats()}async send({track:d,encodings:v,codecOptions:c,codec:u}){this.assertSendDirection(),O.debug("send() [kind:%s, track.id:%s]",d.kind,d.id),u&&O.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(d),this._pc.addStream(this._sendStream);let l,m=await this._pc.createOffer(),D=b.parse(m.sdp);const N=g.clone(this._sendingRtpParametersByKind[d.kind]);N.codecs=s.reduceCodecs(N.codecs);const L=g.clone(this._sendingRemoteRtpParametersByKind[d.kind]);if(L.codecs=s.reduceCodecs(L.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:D}),d.kind==="video"&&v&&v.length>1&&(O.debug("send() | enabling simulcast"),D=b.parse(m.sdp),l=D.media.find($=>$.type==="video"),S.addLegacySimulcast({offerMediaObject:l,track:d,numStreams:v.length}),m={type:"offer",sdp:b.write(D)}),O.debug("send() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m),D=b.parse(this._pc.localDescription.sdp),l=D.media.find($=>$.type===d.kind),N.rtcp.cname=w.getCname({offerMediaObject:l}),N.encodings=S.getRtpEncodings({offerMediaObject:l,track:d}),v)for(let $=0;$<N.encodings.length;++$)v[$]&&Object.assign(N.encodings[$],v[$]);if(N.encodings.length>1&&N.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const $ of N.encodings)$.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:l,offerRtpParameters:N,answerRtpParameters:L,codecOptions:c});const j={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("send() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j);const V=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(V,d),{localId:V,rtpParameters:N}}async stopSending(d){this.assertSendDirection(),O.debug("stopSending() [localId:%s]",d);const v=this._mapSendLocalIdTrack.get(d);if(!v)throw new Error("track not found");this._mapSendLocalIdTrack.delete(d),this._sendStream.removeTrack(v),this._pc.addStream(this._sendStream);const c=await this._pc.createOffer();O.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",c);try{await this._pc.setLocalDescription(c)}catch(l){if(this._sendStream.getTracks().length===0)return void O.warn("stopSending() | ignoring expected error due no sending tracks: %s",l.toString());throw l}if(this._pc.signalingState==="stable")return;const u={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}async pauseSending(d){}async resumeSending(d){}async replaceTrack(d,v){throw new f.UnsupportedError("not implemented")}async setMaxSpatialLayer(d,v){throw new f.UnsupportedError(" not implemented")}async setRtpEncodingParameters(d,v){throw new f.UnsupportedError("not supported")}async getSenderStats(d){throw new f.UnsupportedError("not implemented")}async sendDataChannel({ordered:d,maxPacketLifeTime:v,maxRetransmits:c,label:u,protocol:l}){this.assertSendDirection();const m={negotiated:!0,id:this._nextSendSctpStreamId,ordered:d,maxPacketLifeTime:v,maxRetransmitTime:v,maxRetransmits:c,protocol:l};O.debug("sendDataChannel() [options:%o]",m);const D=this._pc.createDataChannel(u,m);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%P.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),L=b.parse(N.sdp),j=L.media.find($=>$.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:L}),O.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:j});const V={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setRemoteDescription(V),this._hasDataChannelMediaSection=!0}return{dataChannel:D,sctpStreamParameters:{streamId:m.id,ordered:m.ordered,maxPacketLifeTime:m.maxPacketLifeTime,maxRetransmits:m.maxRetransmits}}}async receive(d){this.assertRecvDirection();const v=[];for(const m of d){const{trackId:D,kind:N,rtpParameters:L,streamId:j}=m;O.debug("receive() [trackId:%s, kind:%s]",D,N);const V=N;this._remoteSdp.receive({mid:V,kind:N,offerRtpParameters:L,streamId:j||L.rtcp.cname,trackId:D})}const c={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);let u=await this._pc.createAnswer();const l=b.parse(u.sdp);for(const m of d){const{kind:D,rtpParameters:N}=m,L=D,j=l.media.find(V=>String(V.mid)===L);w.applyCodecParameters({offerRtpParameters:N,answerMediaObject:j})}u={type:"answer",sdp:b.write(l)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:l}),O.debug("receive() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const m of d){const{kind:D,trackId:N,rtpParameters:L}=m,j=D,V=N,$=m.streamId||L.rtcp.cname,Z=this._pc.getRemoteStreams().find(ne=>ne.id===$).getTrackById(V);if(!Z)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(V,{mid:j,rtpParameters:L}),v.push({localId:V,track:Z})}return v}async stopReceiving(d){this.assertRecvDirection();for(const u of d){O.debug("stopReceiving() [localId:%s]",u);const{mid:l,rtpParameters:m}=this._mapRecvLocalIdInfo.get(u)||{};this._mapRecvLocalIdInfo.delete(u),this._remoteSdp.planBStopReceiving({mid:l,offerRtpParameters:m})}const v={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const c=await this._pc.createAnswer();O.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}async pauseReceiving(d){}async resumeReceiving(d){}async getReceiverStats(d){throw new f.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:d,label:v,protocol:c}){this.assertRecvDirection();const{streamId:u,ordered:l,maxPacketLifeTime:m,maxRetransmits:D}=d,N={negotiated:!0,id:u,ordered:l,maxPacketLifeTime:m,maxRetransmitTime:m,maxRetransmits:D,protocol:c};O.debug("receiveDataChannel() [options:%o]",N);const L=this._pc.createDataChannel(v,N);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const j={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",j),await this._pc.setRemoteDescription(j);const V=await this._pc.createAnswer();if(!this._transportReady){const $=b.parse(V.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$})}O.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setLocalDescription(V),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:d,localSdpObject:v}){v||(v=b.parse(this._pc.localDescription.sdp));const c=w.extractDtlsParameters({sdpObject:v});c.role=d,this._remoteSdp.updateDtlsRole(d==="client"?"server":"client"),await new Promise((u,l)=>{this.safeEmit("@connect",{dtlsParameters:c},u,l)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.Chrome55=R},8155:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(R,I,d,v){v===void 0&&(v=d);var c=Object.getOwnPropertyDescriptor(I,d);c&&!("get"in c?!I.__esModule:c.writable||c.configurable)||(c={enumerable:!0,get:function(){return I[d]}}),Object.defineProperty(R,v,c)}:function(R,I,d,v){v===void 0&&(v=d),R[v]=I[d]}),_=this&&this.__setModuleDefault||(Object.create?function(R,I){Object.defineProperty(R,"default",{enumerable:!0,value:I})}:function(R,I){R.default=I}),h=this&&this.__importStar||function(R){if(R&&R.__esModule)return R;var I={};if(R!=null)for(var d in R)d!=="default"&&Object.prototype.hasOwnProperty.call(R,d)&&C(I,R,d);return _(I,R),I};Object.defineProperty(p,"__esModule",{value:!0}),p.Chrome67=void 0;const b=h(o(7363)),k=o(2994),f=h(o(1765)),g=h(o(8046)),s=h(o(5544)),w=h(o(4496)),S=o(521),T=o(1305),x=new k.Logger("Chrome67"),O={OS:1024,MIS:1024};class P extends S.HandlerInterface{static createFactory(){return()=>new P}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome67"}close(){if(x.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){x.debug("getNativeRtpCapabilities()");const I=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const d=await I.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{I.close()}catch{}const v=b.parse(d.sdp);return s.extractRtpCapabilities({sdpObject:v})}catch(d){try{I.close()}catch{}throw d}}async getNativeSctpCapabilities(){return x.debug("getNativeSctpCapabilities()"),{numStreams:O}}run({direction:I,iceParameters:d,iceCandidates:v,dtlsParameters:c,sctpParameters:u,iceServers:l,iceTransportPolicy:m,additionalSettings:D,proprietaryConstraints:N,extendedRtpCapabilities:L}){x.debug("run()"),this._direction=I,this._remoteSdp=new T.RemoteSdp({iceParameters:d,iceCandidates:v,dtlsParameters:c,sctpParameters:u,planB:!0}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",L),video:g.getSendingRtpParameters("video",L)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",L),video:g.getSendingRemoteRtpParameters("video",L)},c.role&&c.role!=="auto"&&(this._forcedLocalDtlsRole=c.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:l||[],iceTransportPolicy:m||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...D},N),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(x.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(I){x.debug("updateIceServers()");const d=this._pc.getConfiguration();d.iceServers=I,this._pc.setConfiguration(d)}async restartIce(I){if(x.debug("restartIce()"),this._remoteSdp.updateIceParameters(I),this._transportReady)if(this._direction==="send"){const d=await this._pc.createOffer({iceRestart:!0});x.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const v={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",v),await this._pc.setRemoteDescription(v)}else{const d={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const v=await this._pc.createAnswer();x.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",v),await this._pc.setLocalDescription(v)}}async getTransportStats(){return this._pc.getStats()}async send({track:I,encodings:d,codecOptions:v,codec:c}){this.assertSendDirection(),x.debug("send() [kind:%s, track.id:%s]",I.kind,I.id),c&&x.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(I),this._pc.addTrack(I,this._sendStream);let u,l=await this._pc.createOffer(),m=b.parse(l.sdp);const D=f.clone(this._sendingRtpParametersByKind[I.kind]);D.codecs=g.reduceCodecs(D.codecs);const N=f.clone(this._sendingRemoteRtpParametersByKind[I.kind]);if(N.codecs=g.reduceCodecs(N.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:m}),I.kind==="video"&&d&&d.length>1&&(x.debug("send() | enabling simulcast"),m=b.parse(l.sdp),u=m.media.find($=>$.type==="video"),w.addLegacySimulcast({offerMediaObject:u,track:I,numStreams:d.length}),l={type:"offer",sdp:b.write(m)}),x.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),m=b.parse(this._pc.localDescription.sdp),u=m.media.find($=>$.type===I.kind),D.rtcp.cname=s.getCname({offerMediaObject:u}),D.encodings=w.getRtpEncodings({offerMediaObject:u,track:I}),d)for(let $=0;$<D.encodings.length;++$)d[$]&&Object.assign(D.encodings[$],d[$]);if(D.encodings.length>1&&D.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const $ of D.encodings)$.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:u,offerRtpParameters:D,answerRtpParameters:N,codecOptions:v});const L={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("send() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L);const j=String(this._nextSendLocalId);this._nextSendLocalId++;const V=this._pc.getSenders().find($=>$.track===I);return this._mapSendLocalIdRtpSender.set(j,V),{localId:j,rtpParameters:D,rtpSender:V}}async stopSending(I){this.assertSendDirection(),x.debug("stopSending() [localId:%s]",I);const d=this._mapSendLocalIdRtpSender.get(I);if(!d)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(d),d.track&&this._sendStream.removeTrack(d.track),this._mapSendLocalIdRtpSender.delete(I);const v=await this._pc.createOffer();x.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",v);try{await this._pc.setLocalDescription(v)}catch(u){if(this._sendStream.getTracks().length===0)return void x.warn("stopSending() | ignoring expected error due no sending tracks: %s",u.toString());throw u}if(this._pc.signalingState==="stable")return;const c={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async pauseSending(I){}async resumeSending(I){}async replaceTrack(I,d){this.assertSendDirection(),d?x.debug("replaceTrack() [localId:%s, track.id:%s]",I,d.id):x.debug("replaceTrack() [localId:%s, no track]",I);const v=this._mapSendLocalIdRtpSender.get(I);if(!v)throw new Error("associated RTCRtpSender not found");const c=v.track;await v.replaceTrack(d),c&&this._sendStream.removeTrack(c),d&&this._sendStream.addTrack(d)}async setMaxSpatialLayer(I,d){this.assertSendDirection(),x.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",I,d);const v=this._mapSendLocalIdRtpSender.get(I);if(!v)throw new Error("associated RTCRtpSender not found");const c=v.getParameters();c.encodings.forEach((u,l)=>{u.active=l<=d}),await v.setParameters(c)}async setRtpEncodingParameters(I,d){this.assertSendDirection(),x.debug("setRtpEncodingParameters() [localId:%s, params:%o]",I,d);const v=this._mapSendLocalIdRtpSender.get(I);if(!v)throw new Error("associated RTCRtpSender not found");const c=v.getParameters();c.encodings.forEach((u,l)=>{c.encodings[l]={...u,...d}}),await v.setParameters(c)}async getSenderStats(I){this.assertSendDirection();const d=this._mapSendLocalIdRtpSender.get(I);if(!d)throw new Error("associated RTCRtpSender not found");return d.getStats()}async sendDataChannel({ordered:I,maxPacketLifeTime:d,maxRetransmits:v,label:c,protocol:u}){this.assertSendDirection();const l={negotiated:!0,id:this._nextSendSctpStreamId,ordered:I,maxPacketLifeTime:d,maxRetransmitTime:d,maxRetransmits:v,protocol:u};x.debug("sendDataChannel() [options:%o]",l);const m=this._pc.createDataChannel(c,l);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%O.MIS,!this._hasDataChannelMediaSection){const D=await this._pc.createOffer(),N=b.parse(D.sdp),L=N.media.find(V=>V.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),x.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D),this._remoteSdp.sendSctpAssociation({offerMediaObject:L});const j={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j),this._hasDataChannelMediaSection=!0}return{dataChannel:m,sctpStreamParameters:{streamId:l.id,ordered:l.ordered,maxPacketLifeTime:l.maxPacketLifeTime,maxRetransmits:l.maxRetransmits}}}async receive(I){this.assertRecvDirection();const d=[];for(const l of I){const{trackId:m,kind:D,rtpParameters:N,streamId:L}=l;x.debug("receive() [trackId:%s, kind:%s]",m,D);const j=D;this._remoteSdp.receive({mid:j,kind:D,offerRtpParameters:N,streamId:L||N.rtcp.cname,trackId:m})}const v={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);let c=await this._pc.createAnswer();const u=b.parse(c.sdp);for(const l of I){const{kind:m,rtpParameters:D}=l,N=m,L=u.media.find(j=>String(j.mid)===N);s.applyCodecParameters({offerRtpParameters:D,answerMediaObject:L})}c={type:"answer",sdp:b.write(u)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),x.debug("receive() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c);for(const l of I){const{kind:m,trackId:D,rtpParameters:N}=l,L=D,j=m,V=this._pc.getReceivers().find($=>$.track&&$.track.id===L);if(!V)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(L,{mid:j,rtpParameters:N,rtpReceiver:V}),d.push({localId:L,track:V.track,rtpReceiver:V})}return d}async stopReceiving(I){this.assertRecvDirection();for(const c of I){x.debug("stopReceiving() [localId:%s]",c);const{mid:u,rtpParameters:l}=this._mapRecvLocalIdInfo.get(c)||{};this._mapRecvLocalIdInfo.delete(c),this._remoteSdp.planBStopReceiving({mid:u,offerRtpParameters:l})}const d={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const v=await this._pc.createAnswer();x.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",v),await this._pc.setLocalDescription(v)}async pauseReceiving(I){}async resumeReceiving(I){}async getReceiverStats(I){this.assertRecvDirection();const{rtpReceiver:d}=this._mapRecvLocalIdInfo.get(I)||{};if(!d)throw new Error("associated RTCRtpReceiver not found");return d.getStats()}async receiveDataChannel({sctpStreamParameters:I,label:d,protocol:v}){this.assertRecvDirection();const{streamId:c,ordered:u,maxPacketLifeTime:l,maxRetransmits:m}=I,D={negotiated:!0,id:c,ordered:u,maxPacketLifeTime:l,maxRetransmitTime:l,maxRetransmits:m,protocol:v};x.debug("receiveDataChannel() [options:%o]",D);const N=this._pc.createDataChannel(d,D);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const L={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",L),await this._pc.setRemoteDescription(L);const j=await this._pc.createAnswer();if(!this._transportReady){const V=b.parse(j.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:V})}x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setLocalDescription(j),this._hasDataChannelMediaSection=!0}return{dataChannel:N}}async setupTransport({localDtlsRole:I,localSdpObject:d}){d||(d=b.parse(this._pc.localDescription.sdp));const v=s.extractDtlsParameters({sdpObject:d});v.role=I,this._remoteSdp.updateDtlsRole(I==="client"?"server":"client"),await new Promise((c,u)=>{this.safeEmit("@connect",{dtlsParameters:v},c,u)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.Chrome67=P},5535:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(I,d,v,c){c===void 0&&(c=v);var u=Object.getOwnPropertyDescriptor(d,v);u&&!("get"in u?!d.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:function(){return d[v]}}),Object.defineProperty(I,c,u)}:function(I,d,v,c){c===void 0&&(c=v),I[c]=d[v]}),_=this&&this.__setModuleDefault||(Object.create?function(I,d){Object.defineProperty(I,"default",{enumerable:!0,value:d})}:function(I,d){I.default=d}),h=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var d={};if(I!=null)for(var v in I)v!=="default"&&Object.prototype.hasOwnProperty.call(I,v)&&C(d,I,v);return _(d,I),d};Object.defineProperty(p,"__esModule",{value:!0}),p.Chrome70=void 0;const b=h(o(7363)),k=o(2994),f=h(o(1765)),g=h(o(8046)),s=h(o(5544)),w=h(o(5938)),S=o(521),T=o(1305),x=o(3303),O=new k.Logger("Chrome70"),P={OS:1024,MIS:1024};class R extends S.HandlerInterface{static createFactory(){return()=>new R}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome70"}close(){if(O.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){O.debug("getNativeRtpCapabilities()");const d=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{d.addTransceiver("audio"),d.addTransceiver("video");const v=await d.createOffer();try{d.close()}catch{}const c=b.parse(v.sdp);return s.extractRtpCapabilities({sdpObject:c})}catch(v){try{d.close()}catch{}throw v}}async getNativeSctpCapabilities(){return O.debug("getNativeSctpCapabilities()"),{numStreams:P}}run({direction:d,iceParameters:v,iceCandidates:c,dtlsParameters:u,sctpParameters:l,iceServers:m,iceTransportPolicy:D,additionalSettings:N,proprietaryConstraints:L,extendedRtpCapabilities:j}){O.debug("run()"),this._direction=d,this._remoteSdp=new T.RemoteSdp({iceParameters:v,iceCandidates:c,dtlsParameters:u,sctpParameters:l}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",j),video:g.getSendingRtpParameters("video",j)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",j),video:g.getSendingRemoteRtpParameters("video",j)},u.role&&u.role!=="auto"&&(this._forcedLocalDtlsRole=u.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:m||[],iceTransportPolicy:D||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...N},L),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(O.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(d){O.debug("updateIceServers()");const v=this._pc.getConfiguration();v.iceServers=d,this._pc.setConfiguration(v)}async restartIce(d){if(O.debug("restartIce()"),this._remoteSdp.updateIceParameters(d),this._transportReady)if(this._direction==="send"){const v=await this._pc.createOffer({iceRestart:!0});O.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const c={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}else{const v={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const c=await this._pc.createAnswer();O.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}}async getTransportStats(){return this._pc.getStats()}async send({track:d,encodings:v,codecOptions:c,codec:u}){this.assertSendDirection(),O.debug("send() [kind:%s, track.id:%s]",d.kind,d.id);const l=f.clone(this._sendingRtpParametersByKind[d.kind]);l.codecs=g.reduceCodecs(l.codecs,u);const m=f.clone(this._sendingRemoteRtpParametersByKind[d.kind]);m.codecs=g.reduceCodecs(m.codecs,u);const D=this._remoteSdp.getNextMediaSectionIdx(),N=this._pc.addTransceiver(d,{direction:"sendonly",streams:[this._sendStream]});let L,j=await this._pc.createOffer(),V=b.parse(j.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:V}),v&&v.length>1&&(O.debug("send() | enabling legacy simulcast"),V=b.parse(j.sdp),L=V.media[D.idx],w.addLegacySimulcast({offerMediaObject:L,numStreams:v.length}),j={type:"offer",sdp:b.write(V)});let $=!1;const Z=(0,x.parse)((v||[{}])[0].scalabilityMode);if(v&&v.length===1&&Z.spatialLayers>1&&l.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(O.debug("send() | enabling legacy simulcast for VP9 SVC"),$=!0,V=b.parse(j.sdp),L=V.media[D.idx],w.addLegacySimulcast({offerMediaObject:L,numStreams:Z.spatialLayers}),j={type:"offer",sdp:b.write(V)}),O.debug("send() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j),v){O.debug("send() | applying given encodings");const ge=N.sender.getParameters();for(let _e=0;_e<(ge.encodings||[]).length;++_e){const Me=ge.encodings[_e],me=v[_e];if(!me)break;ge.encodings[_e]=Object.assign(Me,me)}await N.sender.setParameters(ge)}const ne=N.mid;if(l.mid=ne,V=b.parse(this._pc.localDescription.sdp),L=V.media[D.idx],l.rtcp.cname=s.getCname({offerMediaObject:L}),l.encodings=w.getRtpEncodings({offerMediaObject:L}),v)for(let ge=0;ge<l.encodings.length;++ge)v[ge]&&Object.assign(l.encodings[ge],v[ge]);if($&&(l.encodings=[l.encodings[0]]),l.encodings.length>1&&(l.codecs[0].mimeType.toLowerCase()==="video/vp8"||l.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const ge of l.encodings)ge.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:L,reuseMid:D.reuseMid,offerRtpParameters:l,answerRtpParameters:m,codecOptions:c});const pe={type:"answer",sdp:this._remoteSdp.getSdp()};return O.debug("send() | calling pc.setRemoteDescription() [answer:%o]",pe),await this._pc.setRemoteDescription(pe),this._mapMidTransceiver.set(ne,N),{localId:ne,rtpParameters:l,rtpSender:N.sender}}async stopSending(d){this.assertSendDirection(),O.debug("stopSending() [localId:%s]",d);const v=this._mapMidTransceiver.get(d);if(!v)throw new Error("associated RTCRtpTransceiver not found");if(v.sender.replaceTrack(null),this._pc.removeTrack(v.sender),this._remoteSdp.closeMediaSection(v.mid))try{v.stop()}catch{}const c=await this._pc.createOffer();O.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const u={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u),this._mapMidTransceiver.delete(d)}async pauseSending(d){}async resumeSending(d){}async replaceTrack(d,v){this.assertSendDirection(),v?O.debug("replaceTrack() [localId:%s, track.id:%s]",d,v.id):O.debug("replaceTrack() [localId:%s, no track]",d);const c=this._mapMidTransceiver.get(d);if(!c)throw new Error("associated RTCRtpTransceiver not found");await c.sender.replaceTrack(v)}async setMaxSpatialLayer(d,v){this.assertSendDirection(),O.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",d,v);const c=this._mapMidTransceiver.get(d);if(!c)throw new Error("associated RTCRtpTransceiver not found");const u=c.sender.getParameters();u.encodings.forEach((D,N)=>{D.active=N<=v}),await c.sender.setParameters(u),this._remoteSdp.muxMediaSectionSimulcast(d,u.encodings);const l=await this._pc.createOffer();O.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async setRtpEncodingParameters(d,v){this.assertSendDirection(),O.debug("setRtpEncodingParameters() [localId:%s, params:%o]",d,v);const c=this._mapMidTransceiver.get(d);if(!c)throw new Error("associated RTCRtpTransceiver not found");const u=c.sender.getParameters();u.encodings.forEach((D,N)=>{u.encodings[N]={...D,...v}}),await c.sender.setParameters(u),this._remoteSdp.muxMediaSectionSimulcast(d,u.encodings);const l=await this._pc.createOffer();O.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async getSenderStats(d){this.assertSendDirection();const v=this._mapMidTransceiver.get(d);if(!v)throw new Error("associated RTCRtpTransceiver not found");return v.sender.getStats()}async sendDataChannel({ordered:d,maxPacketLifeTime:v,maxRetransmits:c,label:u,protocol:l}){this.assertSendDirection();const m={negotiated:!0,id:this._nextSendSctpStreamId,ordered:d,maxPacketLifeTime:v,maxRetransmitTime:v,maxRetransmits:c,protocol:l};O.debug("sendDataChannel() [options:%o]",m);const D=this._pc.createDataChannel(u,m);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%P.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),L=b.parse(N.sdp),j=L.media.find($=>$.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:L}),O.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:j});const V={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setRemoteDescription(V),this._hasDataChannelMediaSection=!0}return{dataChannel:D,sctpStreamParameters:{streamId:m.id,ordered:m.ordered,maxPacketLifeTime:m.maxPacketLifeTime,maxRetransmits:m.maxRetransmits}}}async receive(d){this.assertRecvDirection();const v=[],c=new Map;for(const D of d){const{trackId:N,kind:L,rtpParameters:j,streamId:V}=D;O.debug("receive() [trackId:%s, kind:%s]",N,L);const $=j.mid||String(this._mapMidTransceiver.size);c.set(N,$),this._remoteSdp.receive({mid:$,kind:L,offerRtpParameters:j,streamId:V||j.rtcp.cname,trackId:N})}const u={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let l=await this._pc.createAnswer();const m=b.parse(l.sdp);for(const D of d){const{trackId:N,rtpParameters:L}=D,j=c.get(N),V=m.media.find($=>String($.mid)===j);s.applyCodecParameters({offerRtpParameters:L,answerMediaObject:V})}l={type:"answer",sdp:b.write(m)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:m}),O.debug("receive() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const D of d){const{trackId:N}=D,L=c.get(N),j=this._pc.getTransceivers().find(V=>V.mid===L);if(!j)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(L,j),v.push({localId:L,track:j.receiver.track,rtpReceiver:j.receiver})}return v}async stopReceiving(d){this.assertRecvDirection();for(const u of d){O.debug("stopReceiving() [localId:%s]",u);const l=this._mapMidTransceiver.get(u);if(!l)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(l.mid)}const v={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const c=await this._pc.createAnswer();O.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c);for(const u of d)this._mapMidTransceiver.delete(u)}async pauseReceiving(d){}async resumeReceiving(d){}async getReceiverStats(d){this.assertRecvDirection();const v=this._mapMidTransceiver.get(d);if(!v)throw new Error("associated RTCRtpTransceiver not found");return v.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:d,label:v,protocol:c}){this.assertRecvDirection();const{streamId:u,ordered:l,maxPacketLifeTime:m,maxRetransmits:D}=d,N={negotiated:!0,id:u,ordered:l,maxPacketLifeTime:m,maxRetransmitTime:m,maxRetransmits:D,protocol:c};O.debug("receiveDataChannel() [options:%o]",N);const L=this._pc.createDataChannel(v,N);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const j={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",j),await this._pc.setRemoteDescription(j);const V=await this._pc.createAnswer();if(!this._transportReady){const $=b.parse(V.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$})}O.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setLocalDescription(V),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:d,localSdpObject:v}){v||(v=b.parse(this._pc.localDescription.sdp));const c=s.extractDtlsParameters({sdpObject:v});c.role=d,this._remoteSdp.updateDtlsRole(d==="client"?"server":"client"),await new Promise((u,l)=>{this.safeEmit("@connect",{dtlsParameters:c},u,l)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.Chrome70=R},11:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(v,c,u,l){l===void 0&&(l=u);var m=Object.getOwnPropertyDescriptor(c,u);m&&!("get"in m?!c.__esModule:m.writable||m.configurable)||(m={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(v,l,m)}:function(v,c,u,l){l===void 0&&(l=u),v[l]=c[u]}),_=this&&this.__setModuleDefault||(Object.create?function(v,c){Object.defineProperty(v,"default",{enumerable:!0,value:c})}:function(v,c){v.default=c}),h=this&&this.__importStar||function(v){if(v&&v.__esModule)return v;var c={};if(v!=null)for(var u in v)u!=="default"&&Object.prototype.hasOwnProperty.call(v,u)&&C(c,v,u);return _(c,v),c};Object.defineProperty(p,"__esModule",{value:!0}),p.Chrome74=void 0;const b=h(o(7363)),k=o(2994),f=h(o(1765)),g=h(o(8046)),s=h(o(5544)),w=h(o(5938)),S=h(o(4256)),T=o(4893),x=o(521),O=o(1305),P=o(3303),R=new k.Logger("Chrome74"),I={OS:1024,MIS:1024};class d extends x.HandlerInterface{static createFactory(){return()=>new d}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome74"}close(){if(R.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){R.debug("getNativeRtpCapabilities()");const c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{c.addTransceiver("audio"),c.addTransceiver("video");const u=await c.createOffer();try{c.close()}catch{}const l=b.parse(u.sdp),m=s.extractRtpCapabilities({sdpObject:l});return S.addNackSuppportForOpus(m),m}catch(u){try{c.close()}catch{}throw u}}async getNativeSctpCapabilities(){return R.debug("getNativeSctpCapabilities()"),{numStreams:I}}run({direction:c,iceParameters:u,iceCandidates:l,dtlsParameters:m,sctpParameters:D,iceServers:N,iceTransportPolicy:L,additionalSettings:j,proprietaryConstraints:V,extendedRtpCapabilities:$}){R.debug("run()"),this._direction=c,this._remoteSdp=new O.RemoteSdp({iceParameters:u,iceCandidates:l,dtlsParameters:m,sctpParameters:D}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",$),video:g.getSendingRtpParameters("video",$)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",$),video:g.getSendingRemoteRtpParameters("video",$)},m.role&&m.role!=="auto"&&(this._forcedLocalDtlsRole=m.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:N||[],iceTransportPolicy:L||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...j},V),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(R.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(c){this.assertNotClosed(),R.debug("updateIceServers()");const u=this._pc.getConfiguration();u.iceServers=c,this._pc.setConfiguration(u)}async restartIce(c){if(this.assertNotClosed(),R.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),this._transportReady)if(this._direction==="send"){const u=await this._pc.createOffer({iceRestart:!0});R.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}else{const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,encodings:u,codecOptions:l,codec:m}){this.assertNotClosed(),this.assertSendDirection(),R.debug("send() [kind:%s, track.id:%s]",c.kind,c.id),u&&u.length>1&&u.forEach((Me,me)=>{Me.rid=`r${me}`});const D=f.clone(this._sendingRtpParametersByKind[c.kind]);D.codecs=g.reduceCodecs(D.codecs,m);const N=f.clone(this._sendingRemoteRtpParametersByKind[c.kind]);N.codecs=g.reduceCodecs(N.codecs,m);const L=this._remoteSdp.getNextMediaSectionIdx(),j=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream],sendEncodings:u});let V,$=await this._pc.createOffer(),Z=b.parse($.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Z});let ne=!1;const pe=(0,P.parse)((u||[{}])[0].scalabilityMode);u&&u.length===1&&pe.spatialLayers>1&&D.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(R.debug("send() | enabling legacy simulcast for VP9 SVC"),ne=!0,Z=b.parse($.sdp),V=Z.media[L.idx],w.addLegacySimulcast({offerMediaObject:V,numStreams:pe.spatialLayers}),$={type:"offer",sdp:b.write(Z)}),R.debug("send() | calling pc.setLocalDescription() [offer:%o]",$),await this._pc.setLocalDescription($);const ge=j.mid;if(D.mid=ge,Z=b.parse(this._pc.localDescription.sdp),V=Z.media[L.idx],D.rtcp.cname=s.getCname({offerMediaObject:V}),u)if(u.length===1){let Me=w.getRtpEncodings({offerMediaObject:V});Object.assign(Me[0],u[0]),ne&&(Me=[Me[0]]),D.encodings=Me}else D.encodings=u;else D.encodings=w.getRtpEncodings({offerMediaObject:V});if(D.encodings.length>1&&(D.codecs[0].mimeType.toLowerCase()==="video/vp8"||D.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Me of D.encodings)Me.scalabilityMode?Me.scalabilityMode=`L1T${pe.temporalLayers}`:Me.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:V,reuseMid:L.reuseMid,offerRtpParameters:D,answerRtpParameters:N,codecOptions:l,extmapAllowMixed:!0});const _e={type:"answer",sdp:this._remoteSdp.getSdp()};return R.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_e),await this._pc.setRemoteDescription(_e),this._mapMidTransceiver.set(ge,j),{localId:ge,rtpParameters:D,rtpSender:j.sender}}async stopSending(c){if(this.assertSendDirection(),R.debug("stopSending() [localId:%s]",c),this._closed)return;const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");if(u.sender.replaceTrack(null),this._pc.removeTrack(u.sender),this._remoteSdp.closeMediaSection(u.mid))try{u.stop()}catch{}const l=await this._pc.createOffer();R.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),R.debug("pauseSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");u.direction="inactive",this._remoteSdp.pauseMediaSection(c);const l=await this._pc.createOffer();R.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),R.debug("resumeSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(this._remoteSdp.resumeSendingMediaSection(c),!u)throw new Error("associated RTCRtpTransceiver not found");u.direction="sendonly";const l=await this._pc.createOffer();R.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async replaceTrack(c,u){this.assertNotClosed(),this.assertSendDirection(),u?R.debug("replaceTrack() [localId:%s, track.id:%s]",c,u.id):R.debug("replaceTrack() [localId:%s, no track]",c);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");await l.sender.replaceTrack(u)}async setMaxSpatialLayer(c,u){this.assertNotClosed(),this.assertSendDirection(),R.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,u);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");const m=l.sender.getParameters();m.encodings.forEach((L,j)=>{L.active=j<=u}),await l.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(c,m.encodings);const D=await this._pc.createOffer();R.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const N={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async setRtpEncodingParameters(c,u){this.assertNotClosed(),this.assertSendDirection(),R.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,u);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");const m=l.sender.getParameters();m.encodings.forEach((L,j)=>{m.encodings[j]={...L,...u}}),await l.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(c,m.encodings);const D=await this._pc.createOffer();R.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const N={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");return u.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:u,maxRetransmits:l,label:m,protocol:D}){this.assertNotClosed(),this.assertSendDirection();const N={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:u,maxRetransmits:l,protocol:D};R.debug("sendDataChannel() [options:%o]",N);const L=this._pc.createDataChannel(m,N);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%I.MIS,!this._hasDataChannelMediaSection){const j=await this._pc.createOffer(),V=b.parse(j.sdp),$=V.media.find(ne=>ne.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:V}),R.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j),this._remoteSdp.sendSctpAssociation({offerMediaObject:$});const Z={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setRemoteDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:L,sctpStreamParameters:{streamId:N.id,ordered:N.ordered,maxPacketLifeTime:N.maxPacketLifeTime,maxRetransmits:N.maxRetransmits}}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const u=[],l=new Map;for(const L of c){const{trackId:j,kind:V,rtpParameters:$,streamId:Z}=L;R.debug("receive() [trackId:%s, kind:%s]",j,V);const ne=$.mid||String(this._mapMidTransceiver.size);l.set(j,ne),this._remoteSdp.receive({mid:ne,kind:V,offerRtpParameters:$,streamId:Z||$.rtcp.cname,trackId:j})}const m={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);let D=await this._pc.createAnswer();const N=b.parse(D.sdp);for(const L of c){const{trackId:j,rtpParameters:V}=L,$=l.get(j),Z=N.media.find(ne=>String(ne.mid)===$);s.applyCodecParameters({offerRtpParameters:V,answerMediaObject:Z})}D={type:"answer",sdp:b.write(N)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),R.debug("receive() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D);for(const L of c){const{trackId:j}=L,V=l.get(j),$=this._pc.getTransceivers().find(Z=>Z.mid===V);if(!$)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(V,$),u.push({localId:V,track:$.receiver.track,rtpReceiver:$.receiver})}return u}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const m of c){R.debug("stopReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(D.mid)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const m of c)this._mapMidTransceiver.delete(m)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const m of c){R.debug("pauseReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");D.direction="inactive",this._remoteSdp.pauseMediaSection(m)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const m of c){R.debug("resumeReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");D.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(m)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");return u.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:u,protocol:l}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:m,ordered:D,maxPacketLifeTime:N,maxRetransmits:L}=c,j={negotiated:!0,id:m,ordered:D,maxPacketLifeTime:N,maxRetransmits:L,protocol:l};R.debug("receiveDataChannel() [options:%o]",j);const V=this._pc.createDataChannel(u,j);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const $={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",$),await this._pc.setRemoteDescription($);const Z=await this._pc.createAnswer();if(!this._transportReady){const ne=b.parse(Z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:ne})}R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setLocalDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:V}}async setupTransport({localDtlsRole:c,localSdpObject:u}){u||(u=b.parse(this._pc.localDescription.sdp));const l=s.extractDtlsParameters({sdpObject:u});l.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((m,D)=>{this.safeEmit("@connect",{dtlsParameters:l},m,D)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new T.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.Chrome74=d},8633:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(x,O,P,R){R===void 0&&(R=P);var I=Object.getOwnPropertyDescriptor(O,P);I&&!("get"in I?!O.__esModule:I.writable||I.configurable)||(I={enumerable:!0,get:function(){return O[P]}}),Object.defineProperty(x,R,I)}:function(x,O,P,R){R===void 0&&(R=P),x[R]=O[P]}),_=this&&this.__setModuleDefault||(Object.create?function(x,O){Object.defineProperty(x,"default",{enumerable:!0,value:O})}:function(x,O){x.default=O}),h=this&&this.__importStar||function(x){if(x&&x.__esModule)return x;var O={};if(x!=null)for(var P in x)P!=="default"&&Object.prototype.hasOwnProperty.call(x,P)&&C(O,x,P);return _(O,x),O};Object.defineProperty(p,"__esModule",{value:!0}),p.Edge11=void 0;const b=o(2994),k=o(4893),f=h(o(1765)),g=h(o(8046)),s=h(o(8751)),w=o(521),S=new b.Logger("Edge11");class T extends w.HandlerInterface{static createFactory(){return()=>new T}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return"Edge11"}close(){S.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const O of this._rtpSenders.values())try{O.stop()}catch{}for(const O of this._rtpReceivers.values())try{O.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return S.debug("getNativeRtpCapabilities()"),s.getCapabilities()}async getNativeSctpCapabilities(){return S.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:O,iceParameters:P,iceCandidates:R,dtlsParameters:I,sctpParameters:d,iceServers:v,iceTransportPolicy:c,additionalSettings:u,proprietaryConstraints:l,extendedRtpCapabilities:m}){S.debug("run()"),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",m),video:g.getSendingRtpParameters("video",m)},this._remoteIceParameters=P,this._remoteIceCandidates=R,this._remoteDtlsParameters=I,this._cname=`CNAME-${f.generateRandomNumber()}`,this.setIceGatherer({iceServers:v,iceTransportPolicy:c}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(O){throw new k.UnsupportedError("not supported")}async restartIce(O){if(S.debug("restartIce()"),this._remoteIceParameters=O,this._transportReady){S.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,O,"controlling");for(const P of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(P);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:O,encodings:P,codecOptions:R,codec:I}){S.debug("send() [kind:%s, track.id:%s]",O.kind,O.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),S.debug("send() | calling new RTCRtpSender()");const d=new RTCRtpSender(O,this._dtlsTransport),v=f.clone(this._sendingRtpParametersByKind[O.kind]);v.codecs=g.reduceCodecs(v.codecs,I);const c=v.codecs.some(m=>/.+\/rtx$/i.test(m.mimeType));P||(P=[{}]);for(const m of P)m.ssrc=f.generateRandomNumber(),c&&(m.rtx={ssrc:f.generateRandomNumber()});v.encodings=P,v.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const u=s.mangleRtpParameters(v);S.debug("send() | calling rtpSender.send() [params:%o]",u),await d.send(u);const l=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(l,d),{localId:l,rtpParameters:v,rtpSender:d}}async stopSending(O){S.debug("stopSending() [localId:%s]",O);const P=this._rtpSenders.get(O);if(!P)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(O);try{S.debug("stopSending() | calling rtpSender.stop()"),P.stop()}catch(R){throw S.warn("stopSending() | rtpSender.stop() failed:%o",R),R}}async pauseSending(O){}async resumeSending(O){}async replaceTrack(O,P){P?S.debug("replaceTrack() [localId:%s, track.id:%s]",O,P.id):S.debug("replaceTrack() [localId:%s, no track]",O);const R=this._rtpSenders.get(O);if(!R)throw new Error("RTCRtpSender not found");R.setTrack(P)}async setMaxSpatialLayer(O,P){S.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",O,P);const R=this._rtpSenders.get(O);if(!R)throw new Error("RTCRtpSender not found");const I=R.getParameters();I.encodings.forEach((d,v)=>{d.active=v<=P}),await R.setParameters(I)}async setRtpEncodingParameters(O,P){S.debug("setRtpEncodingParameters() [localId:%s, params:%o]",O,P);const R=this._rtpSenders.get(O);if(!R)throw new Error("RTCRtpSender not found");const I=R.getParameters();I.encodings.forEach((d,v)=>{I.encodings[v]={...d,...P}}),await R.setParameters(I)}async getSenderStats(O){const P=this._rtpSenders.get(O);if(!P)throw new Error("RTCRtpSender not found");return P.getStats()}async sendDataChannel(O){throw new k.UnsupportedError("not implemented")}async receive(O){const P=[];for(const R of O){const{trackId:I,kind:d}=R;S.debug("receive() [trackId:%s, kind:%s]",I,d)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const R of O){const{trackId:I,kind:d,rtpParameters:v}=R;S.debug("receive() | calling new RTCRtpReceiver()");const c=new RTCRtpReceiver(this._dtlsTransport,d);c.addEventListener("error",m=>{S.error('rtpReceiver "error" event [event:%o]',m)});const u=s.mangleRtpParameters(v);S.debug("receive() | calling rtpReceiver.receive() [params:%o]",u),await c.receive(u);const l=I;this._rtpReceivers.set(l,c),P.push({localId:l,track:c.track,rtpReceiver:c})}return P}async stopReceiving(O){for(const P of O){S.debug("stopReceiving() [localId:%s]",P);const R=this._rtpReceivers.get(P);if(!R)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(P);try{S.debug("stopReceiving() | calling rtpReceiver.stop()"),R.stop()}catch(I){S.warn("stopReceiving() | rtpReceiver.stop() failed:%o",I)}}}async pauseReceiving(O){}async resumeReceiving(O){}async getReceiverStats(O){const P=this._rtpReceivers.get(O);if(!P)throw new Error("RTCRtpReceiver not found");return P.getStats()}async receiveDataChannel(O){throw new k.UnsupportedError("not implemented")}setIceGatherer({iceServers:O,iceTransportPolicy:P}){const R=new RTCIceGatherer({iceServers:O||[],gatherPolicy:P||"all"});R.addEventListener("error",I=>{S.error('iceGatherer "error" event [event:%o]',I)});try{R.gather()}catch(I){S.debug("setIceGatherer() | iceGatherer.gather() failed: %s",I.toString())}this._iceGatherer=R}setIceTransport(){const O=new RTCIceTransport(this._iceGatherer);O.addEventListener("statechange",()=>{switch(O.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),O.addEventListener("icestatechange",()=>{switch(O.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),O.addEventListener("candidatepairchange",P=>{S.debug('iceTransport "candidatepairchange" event [pair:%o]',P.pair)}),this._iceTransport=O}setDtlsTransport(){const O=new RTCDtlsTransport(this._iceTransport);O.addEventListener("statechange",()=>{S.debug('dtlsTransport "statechange" event [state:%s]',O.state)}),O.addEventListener("dtlsstatechange",()=>{S.debug('dtlsTransport "dtlsstatechange" event [state:%s]',O.state),O.state==="closed"&&this.emit("@connectionstatechange","closed")}),O.addEventListener("error",P=>{S.error('dtlsTransport "error" event [event:%o]',P)}),this._dtlsTransport=O}async setupTransport({localDtlsRole:O}){S.debug("setupTransport()");const P=this._dtlsTransport.getLocalParameters();P.role=O,await new Promise((R,I)=>{this.safeEmit("@connect",{dtlsParameters:P},R,I)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const R of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(R);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(R=>R.algorithm==="sha-256"||R.algorithm==="sha-384"||R.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}p.Edge11=T},2292:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(d,v,c,u){u===void 0&&(u=c);var l=Object.getOwnPropertyDescriptor(v,c);l&&!("get"in l?!v.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return v[c]}}),Object.defineProperty(d,u,l)}:function(d,v,c,u){u===void 0&&(u=c),d[u]=v[c]}),_=this&&this.__setModuleDefault||(Object.create?function(d,v){Object.defineProperty(d,"default",{enumerable:!0,value:v})}:function(d,v){d.default=v}),h=this&&this.__importStar||function(d){if(d&&d.__esModule)return d;var v={};if(d!=null)for(var c in d)c!=="default"&&Object.prototype.hasOwnProperty.call(d,c)&&C(v,d,c);return _(v,d),v};Object.defineProperty(p,"__esModule",{value:!0}),p.Firefox120=void 0;const b=h(o(7363)),k=o(2994),f=o(4893),g=h(o(1765)),s=h(o(8046)),w=h(o(5544)),S=h(o(5938)),T=o(521),x=o(1305),O=o(3303),P=new k.Logger("Firefox120"),R={OS:16,MIS:2048};class I extends T.HandlerInterface{static createFactory(){return()=>new I}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox120"}close(){if(P.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){P.debug("getNativeRtpCapabilities()");const v=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),c=document.createElement("canvas");c.getContext("2d");const u=c.captureStream().getVideoTracks()[0];try{v.addTransceiver("audio",{direction:"sendrecv"}),v.addTransceiver(u,{direction:"sendrecv",sendEncodings:[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}]});const l=await v.createOffer();try{c.remove()}catch{}try{u.stop()}catch{}try{v.close()}catch{}const m=b.parse(l.sdp);return w.extractRtpCapabilities({sdpObject:m})}catch(l){try{c.remove()}catch{}try{u.stop()}catch{}try{v.close()}catch{}throw l}}async getNativeSctpCapabilities(){return P.debug("getNativeSctpCapabilities()"),{numStreams:R}}run({direction:v,iceParameters:c,iceCandidates:u,dtlsParameters:l,sctpParameters:m,iceServers:D,iceTransportPolicy:N,additionalSettings:L,proprietaryConstraints:j,extendedRtpCapabilities:V}){this.assertNotClosed(),P.debug("run()"),this._direction=v,this._remoteSdp=new x.RemoteSdp({iceParameters:c,iceCandidates:u,dtlsParameters:l,sctpParameters:m}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",V),video:s.getSendingRtpParameters("video",V)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",V),video:s.getSendingRemoteRtpParameters("video",V)},this._pc=new RTCPeerConnection({iceServers:D||[],iceTransportPolicy:N||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...L},j),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(P.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(v){throw this.assertNotClosed(),new f.UnsupportedError("not supported")}async restartIce(v){if(this.assertNotClosed(),P.debug("restartIce()"),this._remoteSdp.updateIceParameters(v),this._transportReady)if(this._direction==="send"){const c=await this._pc.createOffer({iceRestart:!0});P.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const u={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}else{const c={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const u=await this._pc.createAnswer();P.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:v,encodings:c,codecOptions:u,codec:l}){this.assertNotClosed(),this.assertSendDirection(),P.debug("send() [kind:%s, track.id:%s]",v.kind,v.id),c&&c.length>1&&c.forEach((pe,ge)=>{pe.rid=`r${ge}`});const m=g.clone(this._sendingRtpParametersByKind[v.kind]);m.codecs=s.reduceCodecs(m.codecs,l);const D=g.clone(this._sendingRemoteRtpParametersByKind[v.kind]);D.codecs=s.reduceCodecs(D.codecs,l);const N=this._pc.addTransceiver(v,{direction:"sendonly",streams:[this._sendStream],sendEncodings:c}),L=await this._pc.createOffer();let j=b.parse(L.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:j});const V=(0,O.parse)((c||[{}])[0].scalabilityMode);P.debug("send() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L);const $=N.mid;m.mid=$,j=b.parse(this._pc.localDescription.sdp);const Z=j.media[j.media.length-1];if(m.rtcp.cname=w.getCname({offerMediaObject:Z}),c)if(c.length===1){const pe=S.getRtpEncodings({offerMediaObject:Z});Object.assign(pe[0],c[0]),m.encodings=pe}else m.encodings=c;else m.encodings=S.getRtpEncodings({offerMediaObject:Z});if(m.encodings.length>1&&(m.codecs[0].mimeType.toLowerCase()==="video/vp8"||m.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const pe of m.encodings)pe.scalabilityMode?pe.scalabilityMode=`L1T${V.temporalLayers}`:pe.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Z,offerRtpParameters:m,answerRtpParameters:D,codecOptions:u,extmapAllowMixed:!0});const ne={type:"answer",sdp:this._remoteSdp.getSdp()};return P.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ne),await this._pc.setRemoteDescription(ne),this._mapMidTransceiver.set($,N),{localId:$,rtpParameters:m,rtpSender:N.sender}}async stopSending(v){if(this.assertSendDirection(),P.debug("stopSending() [localId:%s]",v),this._closed)return;const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated transceiver not found");c.sender.replaceTrack(null),this._pc.removeTrack(c.sender),this._remoteSdp.disableMediaSection(c.mid);const u=await this._pc.createOffer();P.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l),this._mapMidTransceiver.delete(v)}async pauseSending(v){this.assertNotClosed(),this.assertSendDirection(),P.debug("pauseSending() [localId:%s]",v);const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated RTCRtpTransceiver not found");c.direction="inactive",this._remoteSdp.pauseMediaSection(v);const u=await this._pc.createOffer();P.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}async resumeSending(v){this.assertNotClosed(),this.assertSendDirection(),P.debug("resumeSending() [localId:%s]",v);const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated RTCRtpTransceiver not found");c.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(v);const u=await this._pc.createOffer();P.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}async replaceTrack(v,c){this.assertNotClosed(),this.assertSendDirection(),c?P.debug("replaceTrack() [localId:%s, track.id:%s]",v,c.id):P.debug("replaceTrack() [localId:%s, no track]",v);const u=this._mapMidTransceiver.get(v);if(!u)throw new Error("associated RTCRtpTransceiver not found");await u.sender.replaceTrack(c)}async setMaxSpatialLayer(v,c){this.assertNotClosed(),this.assertSendDirection(),P.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",v,c);const u=this._mapMidTransceiver.get(v);if(!u)throw new Error("associated transceiver not found");const l=u.sender.getParameters();l.encodings.forEach((N,L)=>{N.active=L<=c}),await u.sender.setParameters(l),this._remoteSdp.muxMediaSectionSimulcast(v,l.encodings);const m=await this._pc.createOffer();P.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const D={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async setRtpEncodingParameters(v,c){this.assertNotClosed(),this.assertSendDirection(),P.debug("setRtpEncodingParameters() [localId:%s, params:%o]",v,c);const u=this._mapMidTransceiver.get(v);if(!u)throw new Error("associated RTCRtpTransceiver not found");const l=u.sender.getParameters();l.encodings.forEach((N,L)=>{l.encodings[L]={...N,...c}}),await u.sender.setParameters(l),this._remoteSdp.muxMediaSectionSimulcast(v,l.encodings);const m=await this._pc.createOffer();P.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const D={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async getSenderStats(v){this.assertNotClosed(),this.assertSendDirection();const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated RTCRtpTransceiver not found");return c.sender.getStats()}async sendDataChannel({ordered:v,maxPacketLifeTime:c,maxRetransmits:u,label:l,protocol:m}){this.assertNotClosed(),this.assertSendDirection();const D={negotiated:!0,id:this._nextSendSctpStreamId,ordered:v,maxPacketLifeTime:c,maxRetransmits:u,protocol:m};P.debug("sendDataChannel() [options:%o]",D);const N=this._pc.createDataChannel(l,D);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%R.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),j=b.parse(L.sdp),V=j.media.find(Z=>Z.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:j}),P.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:V});const $={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setRemoteDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:N,sctpStreamParameters:{streamId:D.id,ordered:D.ordered,maxPacketLifeTime:D.maxPacketLifeTime,maxRetransmits:D.maxRetransmits}}}async receive(v){this.assertNotClosed(),this.assertRecvDirection();const c=[],u=new Map;for(const N of v){const{trackId:L,kind:j,rtpParameters:V,streamId:$}=N;P.debug("receive() [trackId:%s, kind:%s]",L,j);const Z=V.mid||String(this._mapMidTransceiver.size);u.set(L,Z),this._remoteSdp.receive({mid:Z,kind:j,offerRtpParameters:V,streamId:$||V.rtcp.cname,trackId:L})}const l={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);let m=await this._pc.createAnswer();const D=b.parse(m.sdp);for(const N of v){const{trackId:L,rtpParameters:j}=N,V=u.get(L),$=D.media.find(Z=>String(Z.mid)===V);w.applyCodecParameters({offerRtpParameters:j,answerMediaObject:$}),m={type:"answer",sdp:b.write(D)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:D}),P.debug("receive() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m);for(const N of v){const{trackId:L}=N,j=u.get(L),V=this._pc.getTransceivers().find($=>$.mid===j);if(!V)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(j,V),c.push({localId:j,track:V.receiver.track,rtpReceiver:V.receiver})}return c}async stopReceiving(v){if(this.assertRecvDirection(),this._closed)return;for(const l of v){P.debug("stopReceiving() [localId:%s]",l);const m=this._mapMidTransceiver.get(l);if(!m)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(m.mid)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const u=await this._pc.createAnswer();P.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const l of v)this._mapMidTransceiver.delete(l)}async pauseReceiving(v){this.assertNotClosed(),this.assertRecvDirection();for(const l of v){P.debug("pauseReceiving() [localId:%s]",l);const m=this._mapMidTransceiver.get(l);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="inactive",this._remoteSdp.pauseMediaSection(l)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const u=await this._pc.createAnswer();P.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async resumeReceiving(v){this.assertNotClosed(),this.assertRecvDirection();for(const l of v){P.debug("resumeReceiving() [localId:%s]",l);const m=this._mapMidTransceiver.get(l);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(l)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const u=await this._pc.createAnswer();P.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async getReceiverStats(v){this.assertRecvDirection();const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated RTCRtpTransceiver not found");return c.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:v,label:c,protocol:u}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:l,ordered:m,maxPacketLifeTime:D,maxRetransmits:N}=v,L={negotiated:!0,id:l,ordered:m,maxPacketLifeTime:D,maxRetransmits:N,protocol:u};P.debug("receiveDataChannel() [options:%o]",L);const j=this._pc.createDataChannel(c,L);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const V={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",V),await this._pc.setRemoteDescription(V);const $=await this._pc.createAnswer();if(!this._transportReady){const Z=b.parse($.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:Z})}P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setLocalDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:j}}async setupTransport({localDtlsRole:v,localSdpObject:c}){c||(c=b.parse(this._pc.localDescription.sdp));const u=w.extractDtlsParameters({sdpObject:c});u.role=v,this._remoteSdp.updateDtlsRole(v==="client"?"server":"client"),await new Promise((l,m)=>{this.safeEmit("@connect",{dtlsParameters:u},l,m)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new f.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.Firefox120=I},1767:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(d,v,c,u){u===void 0&&(u=c);var l=Object.getOwnPropertyDescriptor(v,c);l&&!("get"in l?!v.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return v[c]}}),Object.defineProperty(d,u,l)}:function(d,v,c,u){u===void 0&&(u=c),d[u]=v[c]}),_=this&&this.__setModuleDefault||(Object.create?function(d,v){Object.defineProperty(d,"default",{enumerable:!0,value:v})}:function(d,v){d.default=v}),h=this&&this.__importStar||function(d){if(d&&d.__esModule)return d;var v={};if(d!=null)for(var c in d)c!=="default"&&Object.prototype.hasOwnProperty.call(d,c)&&C(v,d,c);return _(v,d),v};Object.defineProperty(p,"__esModule",{value:!0}),p.Firefox60=void 0;const b=h(o(7363)),k=o(2994),f=o(4893),g=h(o(1765)),s=h(o(8046)),w=h(o(5544)),S=h(o(5938)),T=o(521),x=o(1305),O=o(3303),P=new k.Logger("Firefox60"),R={OS:16,MIS:2048};class I extends T.HandlerInterface{static createFactory(){return()=>new I}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox60"}close(){if(P.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){P.debug("getNativeRtpCapabilities()");const v=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),c=document.createElement("canvas");c.getContext("2d");const u=c.captureStream().getVideoTracks()[0];try{v.addTransceiver("audio",{direction:"sendrecv"});const l=v.addTransceiver(u,{direction:"sendrecv"}),m=l.sender.getParameters(),D=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];m.encodings=D,await l.sender.setParameters(m);const N=await v.createOffer();try{c.remove()}catch{}try{u.stop()}catch{}try{v.close()}catch{}const L=b.parse(N.sdp);return w.extractRtpCapabilities({sdpObject:L})}catch(l){try{c.remove()}catch{}try{u.stop()}catch{}try{v.close()}catch{}throw l}}async getNativeSctpCapabilities(){return P.debug("getNativeSctpCapabilities()"),{numStreams:R}}run({direction:v,iceParameters:c,iceCandidates:u,dtlsParameters:l,sctpParameters:m,iceServers:D,iceTransportPolicy:N,additionalSettings:L,proprietaryConstraints:j,extendedRtpCapabilities:V}){this.assertNotClosed(),P.debug("run()"),this._direction=v,this._remoteSdp=new x.RemoteSdp({iceParameters:c,iceCandidates:u,dtlsParameters:l,sctpParameters:m}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",V),video:s.getSendingRtpParameters("video",V)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",V),video:s.getSendingRemoteRtpParameters("video",V)},this._pc=new RTCPeerConnection({iceServers:D||[],iceTransportPolicy:N||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...L},j),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(P.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(v){throw this.assertNotClosed(),new f.UnsupportedError("not supported")}async restartIce(v){if(this.assertNotClosed(),P.debug("restartIce()"),this._remoteSdp.updateIceParameters(v),this._transportReady)if(this._direction==="send"){const c=await this._pc.createOffer({iceRestart:!0});P.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const u={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}else{const c={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const u=await this._pc.createAnswer();P.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:v,encodings:c,codecOptions:u,codec:l}){this.assertNotClosed(),this.assertSendDirection(),P.debug("send() [kind:%s, track.id:%s]",v.kind,v.id),c&&(c=g.clone(c)).length>1&&(c.forEach((pe,ge)=>{pe.rid=`r${ge}`}),c.reverse());const m=g.clone(this._sendingRtpParametersByKind[v.kind]);m.codecs=s.reduceCodecs(m.codecs,l);const D=g.clone(this._sendingRemoteRtpParametersByKind[v.kind]);D.codecs=s.reduceCodecs(D.codecs,l);const N=this._pc.addTransceiver(v,{direction:"sendonly",streams:[this._sendStream]});if(c){const pe=N.sender.getParameters();pe.encodings=c,await N.sender.setParameters(pe)}const L=await this._pc.createOffer();let j=b.parse(L.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:j});const V=(0,O.parse)((c||[{}])[0].scalabilityMode);P.debug("send() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L);const $=N.mid;m.mid=$,j=b.parse(this._pc.localDescription.sdp);const Z=j.media[j.media.length-1];if(m.rtcp.cname=w.getCname({offerMediaObject:Z}),c)if(c.length===1){const pe=S.getRtpEncodings({offerMediaObject:Z});Object.assign(pe[0],c[0]),m.encodings=pe}else m.encodings=c.reverse();else m.encodings=S.getRtpEncodings({offerMediaObject:Z});if(m.encodings.length>1&&(m.codecs[0].mimeType.toLowerCase()==="video/vp8"||m.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const pe of m.encodings)pe.scalabilityMode?pe.scalabilityMode=`L1T${V.temporalLayers}`:pe.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Z,offerRtpParameters:m,answerRtpParameters:D,codecOptions:u,extmapAllowMixed:!0});const ne={type:"answer",sdp:this._remoteSdp.getSdp()};return P.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ne),await this._pc.setRemoteDescription(ne),this._mapMidTransceiver.set($,N),{localId:$,rtpParameters:m,rtpSender:N.sender}}async stopSending(v){if(this.assertSendDirection(),P.debug("stopSending() [localId:%s]",v),this._closed)return;const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated transceiver not found");c.sender.replaceTrack(null),this._pc.removeTrack(c.sender),this._remoteSdp.disableMediaSection(c.mid);const u=await this._pc.createOffer();P.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l),this._mapMidTransceiver.delete(v)}async pauseSending(v){this.assertNotClosed(),this.assertSendDirection(),P.debug("pauseSending() [localId:%s]",v);const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated RTCRtpTransceiver not found");c.direction="inactive",this._remoteSdp.pauseMediaSection(v);const u=await this._pc.createOffer();P.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}async resumeSending(v){this.assertNotClosed(),this.assertSendDirection(),P.debug("resumeSending() [localId:%s]",v);const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated RTCRtpTransceiver not found");c.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(v);const u=await this._pc.createOffer();P.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}async replaceTrack(v,c){this.assertNotClosed(),this.assertSendDirection(),c?P.debug("replaceTrack() [localId:%s, track.id:%s]",v,c.id):P.debug("replaceTrack() [localId:%s, no track]",v);const u=this._mapMidTransceiver.get(v);if(!u)throw new Error("associated RTCRtpTransceiver not found");await u.sender.replaceTrack(c)}async setMaxSpatialLayer(v,c){this.assertNotClosed(),this.assertSendDirection(),P.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",v,c);const u=this._mapMidTransceiver.get(v);if(!u)throw new Error("associated transceiver not found");const l=u.sender.getParameters();c=l.encodings.length-1-c,l.encodings.forEach((N,L)=>{N.active=L>=c}),await u.sender.setParameters(l),this._remoteSdp.muxMediaSectionSimulcast(v,l.encodings);const m=await this._pc.createOffer();P.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const D={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async setRtpEncodingParameters(v,c){this.assertNotClosed(),this.assertSendDirection(),P.debug("setRtpEncodingParameters() [localId:%s, params:%o]",v,c);const u=this._mapMidTransceiver.get(v);if(!u)throw new Error("associated RTCRtpTransceiver not found");const l=u.sender.getParameters();l.encodings.forEach((N,L)=>{l.encodings[L]={...N,...c}}),await u.sender.setParameters(l),this._remoteSdp.muxMediaSectionSimulcast(v,l.encodings);const m=await this._pc.createOffer();P.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const D={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async getSenderStats(v){this.assertNotClosed(),this.assertSendDirection();const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated RTCRtpTransceiver not found");return c.sender.getStats()}async sendDataChannel({ordered:v,maxPacketLifeTime:c,maxRetransmits:u,label:l,protocol:m}){this.assertNotClosed(),this.assertSendDirection();const D={negotiated:!0,id:this._nextSendSctpStreamId,ordered:v,maxPacketLifeTime:c,maxRetransmits:u,protocol:m};P.debug("sendDataChannel() [options:%o]",D);const N=this._pc.createDataChannel(l,D);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%R.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),j=b.parse(L.sdp),V=j.media.find(Z=>Z.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:j}),P.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:V});const $={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setRemoteDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:N,sctpStreamParameters:{streamId:D.id,ordered:D.ordered,maxPacketLifeTime:D.maxPacketLifeTime,maxRetransmits:D.maxRetransmits}}}async receive(v){this.assertNotClosed(),this.assertRecvDirection();const c=[],u=new Map;for(const N of v){const{trackId:L,kind:j,rtpParameters:V,streamId:$}=N;P.debug("receive() [trackId:%s, kind:%s]",L,j);const Z=V.mid||String(this._mapMidTransceiver.size);u.set(L,Z),this._remoteSdp.receive({mid:Z,kind:j,offerRtpParameters:V,streamId:$||V.rtcp.cname,trackId:L})}const l={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);let m=await this._pc.createAnswer();const D=b.parse(m.sdp);for(const N of v){const{trackId:L,rtpParameters:j}=N,V=u.get(L),$=D.media.find(Z=>String(Z.mid)===V);w.applyCodecParameters({offerRtpParameters:j,answerMediaObject:$}),m={type:"answer",sdp:b.write(D)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:D}),P.debug("receive() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m);for(const N of v){const{trackId:L}=N,j=u.get(L),V=this._pc.getTransceivers().find($=>$.mid===j);if(!V)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(j,V),c.push({localId:j,track:V.receiver.track,rtpReceiver:V.receiver})}return c}async stopReceiving(v){if(this.assertRecvDirection(),this._closed)return;for(const l of v){P.debug("stopReceiving() [localId:%s]",l);const m=this._mapMidTransceiver.get(l);if(!m)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(m.mid)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const u=await this._pc.createAnswer();P.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const l of v)this._mapMidTransceiver.delete(l)}async pauseReceiving(v){this.assertNotClosed(),this.assertRecvDirection();for(const l of v){P.debug("pauseReceiving() [localId:%s]",l);const m=this._mapMidTransceiver.get(l);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="inactive",this._remoteSdp.pauseMediaSection(l)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const u=await this._pc.createAnswer();P.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async resumeReceiving(v){this.assertNotClosed(),this.assertRecvDirection();for(const l of v){P.debug("resumeReceiving() [localId:%s]",l);const m=this._mapMidTransceiver.get(l);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(l)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const u=await this._pc.createAnswer();P.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async getReceiverStats(v){this.assertRecvDirection();const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated RTCRtpTransceiver not found");return c.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:v,label:c,protocol:u}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:l,ordered:m,maxPacketLifeTime:D,maxRetransmits:N}=v,L={negotiated:!0,id:l,ordered:m,maxPacketLifeTime:D,maxRetransmits:N,protocol:u};P.debug("receiveDataChannel() [options:%o]",L);const j=this._pc.createDataChannel(c,L);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const V={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",V),await this._pc.setRemoteDescription(V);const $=await this._pc.createAnswer();if(!this._transportReady){const Z=b.parse($.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:Z})}P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setLocalDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:j}}async setupTransport({localDtlsRole:v,localSdpObject:c}){c||(c=b.parse(this._pc.localDescription.sdp));const u=w.extractDtlsParameters({sdpObject:c});u.role=v,this._remoteSdp.updateDtlsRole(v==="client"?"server":"client"),await new Promise((l,m)=>{this.safeEmit("@connect",{dtlsParameters:u},l,m)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new f.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.Firefox60=I},521:(E,p,o)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.HandlerInterface=void 0;const C=o(2010);class _ extends C.EnhancedEventEmitter{constructor(){super()}}p.HandlerInterface=_},9352:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(I,d,v,c){c===void 0&&(c=v);var u=Object.getOwnPropertyDescriptor(d,v);u&&!("get"in u?!d.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:function(){return d[v]}}),Object.defineProperty(I,c,u)}:function(I,d,v,c){c===void 0&&(c=v),I[c]=d[v]}),_=this&&this.__setModuleDefault||(Object.create?function(I,d){Object.defineProperty(I,"default",{enumerable:!0,value:d})}:function(I,d){I.default=d}),h=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var d={};if(I!=null)for(var v in I)v!=="default"&&Object.prototype.hasOwnProperty.call(I,v)&&C(d,I,v);return _(d,I),d};Object.defineProperty(p,"__esModule",{value:!0}),p.ReactNative=void 0;const b=h(o(7363)),k=o(2994),f=o(4893),g=h(o(1765)),s=h(o(8046)),w=h(o(5544)),S=h(o(4496)),T=o(521),x=o(1305),O=new k.Logger("ReactNative"),P={OS:1024,MIS:1024};class R extends T.HandlerInterface{static createFactory(){return()=>new R}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNative"}close(){if(O.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){O.debug("getNativeRtpCapabilities()");const d=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const v=await d.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{d.close()}catch{}const c=b.parse(v.sdp);return w.extractRtpCapabilities({sdpObject:c})}catch(v){try{d.close()}catch{}throw v}}async getNativeSctpCapabilities(){return O.debug("getNativeSctpCapabilities()"),{numStreams:P}}run({direction:d,iceParameters:v,iceCandidates:c,dtlsParameters:u,sctpParameters:l,iceServers:m,iceTransportPolicy:D,additionalSettings:N,proprietaryConstraints:L,extendedRtpCapabilities:j}){O.debug("run()"),this._direction=d,this._remoteSdp=new x.RemoteSdp({iceParameters:v,iceCandidates:c,dtlsParameters:u,sctpParameters:l,planB:!0}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",j),video:s.getSendingRtpParameters("video",j)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",j),video:s.getSendingRemoteRtpParameters("video",j)},u.role&&u.role!=="auto"&&(this._forcedLocalDtlsRole=u.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:m||[],iceTransportPolicy:D||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...N},L),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(O.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(d){O.debug("updateIceServers()");const v=this._pc.getConfiguration();v.iceServers=d,this._pc.setConfiguration(v)}async restartIce(d){if(O.debug("restartIce()"),this._remoteSdp.updateIceParameters(d),this._transportReady)if(this._direction==="send"){const v=await this._pc.createOffer({iceRestart:!0});O.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const c={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}else{const v={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const c=await this._pc.createAnswer();O.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}}async getTransportStats(){return this._pc.getStats()}async send({track:d,encodings:v,codecOptions:c,codec:u}){this.assertSendDirection(),O.debug("send() [kind:%s, track.id:%s]",d.kind,d.id),u&&O.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(d),this._pc.addStream(this._sendStream);let l,m=await this._pc.createOffer(),D=b.parse(m.sdp);const N=g.clone(this._sendingRtpParametersByKind[d.kind]);N.codecs=s.reduceCodecs(N.codecs);const L=g.clone(this._sendingRemoteRtpParametersByKind[d.kind]);if(L.codecs=s.reduceCodecs(L.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:D}),d.kind==="video"&&v&&v.length>1&&(O.debug("send() | enabling simulcast"),D=b.parse(m.sdp),l=D.media.find($=>$.type==="video"),S.addLegacySimulcast({offerMediaObject:l,track:d,numStreams:v.length}),m={type:"offer",sdp:b.write(D)}),O.debug("send() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m),D=b.parse(this._pc.localDescription.sdp),l=D.media.find($=>$.type===d.kind),N.rtcp.cname=w.getCname({offerMediaObject:l}),N.encodings=S.getRtpEncodings({offerMediaObject:l,track:d}),v)for(let $=0;$<N.encodings.length;++$)v[$]&&Object.assign(N.encodings[$],v[$]);if(N.encodings.length>1&&(N.codecs[0].mimeType.toLowerCase()==="video/vp8"||N.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const $ of N.encodings)$.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:l,offerRtpParameters:N,answerRtpParameters:L,codecOptions:c});const j={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("send() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j);const V=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(V,d),{localId:V,rtpParameters:N}}async stopSending(d){this.assertSendDirection(),O.debug("stopSending() [localId:%s]",d);const v=this._mapSendLocalIdTrack.get(d);if(!v)throw new Error("track not found");this._mapSendLocalIdTrack.delete(d),this._sendStream.removeTrack(v),this._pc.addStream(this._sendStream);const c=await this._pc.createOffer();O.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",c);try{await this._pc.setLocalDescription(c)}catch(l){if(this._sendStream.getTracks().length===0)return void O.warn("stopSending() | ignoring expected error due no sending tracks: %s",l.toString());throw l}if(this._pc.signalingState==="stable")return;const u={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}async pauseSending(d){}async resumeSending(d){}async replaceTrack(d,v){throw new f.UnsupportedError("not implemented")}async setMaxSpatialLayer(d,v){throw new f.UnsupportedError("not implemented")}async setRtpEncodingParameters(d,v){throw new f.UnsupportedError("not implemented")}async getSenderStats(d){throw new f.UnsupportedError("not implemented")}async sendDataChannel({ordered:d,maxPacketLifeTime:v,maxRetransmits:c,label:u,protocol:l}){this.assertSendDirection();const m={negotiated:!0,id:this._nextSendSctpStreamId,ordered:d,maxPacketLifeTime:v,maxRetransmitTime:v,maxRetransmits:c,protocol:l};O.debug("sendDataChannel() [options:%o]",m);const D=this._pc.createDataChannel(u,m);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%P.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),L=b.parse(N.sdp),j=L.media.find($=>$.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:L}),O.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:j});const V={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setRemoteDescription(V),this._hasDataChannelMediaSection=!0}return{dataChannel:D,sctpStreamParameters:{streamId:m.id,ordered:m.ordered,maxPacketLifeTime:m.maxPacketLifeTime,maxRetransmits:m.maxRetransmits}}}async receive(d){this.assertRecvDirection();const v=[],c=new Map;for(const D of d){const{trackId:N,kind:L,rtpParameters:j}=D;O.debug("receive() [trackId:%s, kind:%s]",N,L);const V=L;let $=D.streamId||j.rtcp.cname;O.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),$+=`-hack-${g.generateRandomNumber()}`,c.set(N,$),this._remoteSdp.receive({mid:V,kind:L,offerRtpParameters:j,streamId:$,trackId:N})}const u={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let l=await this._pc.createAnswer();const m=b.parse(l.sdp);for(const D of d){const{kind:N,rtpParameters:L}=D,j=N,V=m.media.find($=>String($.mid)===j);w.applyCodecParameters({offerRtpParameters:L,answerMediaObject:V})}l={type:"answer",sdp:b.write(m)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:m}),O.debug("receive() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const D of d){const{kind:N,trackId:L,rtpParameters:j}=D,V=L,$=N,Z=c.get(L),ne=this._pc.getRemoteStreams().find(pe=>pe.id===Z).getTrackById(V);if(!ne)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(V,{mid:$,rtpParameters:j}),v.push({localId:V,track:ne})}return v}async stopReceiving(d){this.assertRecvDirection();for(const u of d){O.debug("stopReceiving() [localId:%s]",u);const{mid:l,rtpParameters:m}=this._mapRecvLocalIdInfo.get(u)||{};this._mapRecvLocalIdInfo.delete(u),this._remoteSdp.planBStopReceiving({mid:l,offerRtpParameters:m})}const v={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const c=await this._pc.createAnswer();O.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}async pauseReceiving(d){}async resumeReceiving(d){}async getReceiverStats(d){throw new f.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:d,label:v,protocol:c}){this.assertRecvDirection();const{streamId:u,ordered:l,maxPacketLifeTime:m,maxRetransmits:D}=d,N={negotiated:!0,id:u,ordered:l,maxPacketLifeTime:m,maxRetransmitTime:m,maxRetransmits:D,protocol:c};O.debug("receiveDataChannel() [options:%o]",N);const L=this._pc.createDataChannel(v,N);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const j={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",j),await this._pc.setRemoteDescription(j);const V=await this._pc.createAnswer();if(!this._transportReady){const $=b.parse(V.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$})}O.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",V),await this._pc.setLocalDescription(V),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:d,localSdpObject:v}){v||(v=b.parse(this._pc.localDescription.sdp));const c=w.extractDtlsParameters({sdpObject:v});c.role=d,this._remoteSdp.updateDtlsRole(d==="client"?"server":"client"),await new Promise((u,l)=>{this.safeEmit("@connect",{dtlsParameters:c},u,l)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.ReactNative=R},4039:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(v,c,u,l){l===void 0&&(l=u);var m=Object.getOwnPropertyDescriptor(c,u);m&&!("get"in m?!c.__esModule:m.writable||m.configurable)||(m={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(v,l,m)}:function(v,c,u,l){l===void 0&&(l=u),v[l]=c[u]}),_=this&&this.__setModuleDefault||(Object.create?function(v,c){Object.defineProperty(v,"default",{enumerable:!0,value:c})}:function(v,c){v.default=c}),h=this&&this.__importStar||function(v){if(v&&v.__esModule)return v;var c={};if(v!=null)for(var u in v)u!=="default"&&Object.prototype.hasOwnProperty.call(v,u)&&C(c,v,u);return _(c,v),c};Object.defineProperty(p,"__esModule",{value:!0}),p.ReactNativeUnifiedPlan=void 0;const b=h(o(7363)),k=o(2994),f=h(o(1765)),g=h(o(8046)),s=h(o(5544)),w=h(o(5938)),S=h(o(4256)),T=o(4893),x=o(521),O=o(1305),P=o(3303),R=new k.Logger("ReactNativeUnifiedPlan"),I={OS:1024,MIS:1024};class d extends x.HandlerInterface{static createFactory(){return()=>new d}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNativeUnifiedPlan"}close(){if(R.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){R.debug("getNativeRtpCapabilities()");const c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{c.addTransceiver("audio"),c.addTransceiver("video");const u=await c.createOffer();try{c.close()}catch{}const l=b.parse(u.sdp),m=s.extractRtpCapabilities({sdpObject:l});return S.addNackSuppportForOpus(m),m}catch(u){try{c.close()}catch{}throw u}}async getNativeSctpCapabilities(){return R.debug("getNativeSctpCapabilities()"),{numStreams:I}}run({direction:c,iceParameters:u,iceCandidates:l,dtlsParameters:m,sctpParameters:D,iceServers:N,iceTransportPolicy:L,additionalSettings:j,proprietaryConstraints:V,extendedRtpCapabilities:$}){this.assertNotClosed(),R.debug("run()"),this._direction=c,this._remoteSdp=new O.RemoteSdp({iceParameters:u,iceCandidates:l,dtlsParameters:m,sctpParameters:D}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",$),video:g.getSendingRtpParameters("video",$)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",$),video:g.getSendingRemoteRtpParameters("video",$)},m.role&&m.role!=="auto"&&(this._forcedLocalDtlsRole=m.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:N||[],iceTransportPolicy:L||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...j},V),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(R.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(c){this.assertNotClosed(),R.debug("updateIceServers()");const u=this._pc.getConfiguration();u.iceServers=c,this._pc.setConfiguration(u)}async restartIce(c){if(this.assertNotClosed(),R.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),this._transportReady)if(this._direction==="send"){const u=await this._pc.createOffer({iceRestart:!0});R.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}else{const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,encodings:u,codecOptions:l,codec:m}){this.assertNotClosed(),this.assertSendDirection(),R.debug("send() [kind:%s, track.id:%s]",c.kind,c.id),u&&u.length>1&&u.forEach((Me,me)=>{Me.rid=`r${me}`});const D=f.clone(this._sendingRtpParametersByKind[c.kind]);D.codecs=g.reduceCodecs(D.codecs,m);const N=f.clone(this._sendingRemoteRtpParametersByKind[c.kind]);N.codecs=g.reduceCodecs(N.codecs,m);const L=this._remoteSdp.getNextMediaSectionIdx(),j=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream],sendEncodings:u});let V,$=await this._pc.createOffer(),Z=b.parse($.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Z});let ne=!1;const pe=(0,P.parse)((u||[{}])[0].scalabilityMode);u&&u.length===1&&pe.spatialLayers>1&&D.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(R.debug("send() | enabling legacy simulcast for VP9 SVC"),ne=!0,Z=b.parse($.sdp),V=Z.media[L.idx],w.addLegacySimulcast({offerMediaObject:V,numStreams:pe.spatialLayers}),$={type:"offer",sdp:b.write(Z)}),R.debug("send() | calling pc.setLocalDescription() [offer:%o]",$),await this._pc.setLocalDescription($);let ge=j.mid??void 0;if(ge||R.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),D.mid=ge,Z=b.parse(this._pc.localDescription.sdp),V=Z.media[L.idx],D.rtcp.cname=s.getCname({offerMediaObject:V}),u)if(u.length===1){let Me=w.getRtpEncodings({offerMediaObject:V});Object.assign(Me[0],u[0]),ne&&(Me=[Me[0]]),D.encodings=Me}else D.encodings=u;else D.encodings=w.getRtpEncodings({offerMediaObject:V});if(D.encodings.length>1&&(D.codecs[0].mimeType.toLowerCase()==="video/vp8"||D.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Me of D.encodings)Me.scalabilityMode?Me.scalabilityMode=`L1T${pe.temporalLayers}`:Me.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:V,reuseMid:L.reuseMid,offerRtpParameters:D,answerRtpParameters:N,codecOptions:l,extmapAllowMixed:!0});const _e={type:"answer",sdp:this._remoteSdp.getSdp()};return R.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_e),await this._pc.setRemoteDescription(_e),ge||(ge=j.mid,D.mid=ge),this._mapMidTransceiver.set(ge,j),{localId:ge,rtpParameters:D,rtpSender:j.sender}}async stopSending(c){if(this.assertSendDirection(),this._closed)return;R.debug("stopSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");if(u.sender.replaceTrack(null),this._pc.removeTrack(u.sender),this._remoteSdp.closeMediaSection(u.mid))try{u.stop()}catch{}const l=await this._pc.createOffer();R.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),R.debug("pauseSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");u.direction="inactive",this._remoteSdp.pauseMediaSection(c);const l=await this._pc.createOffer();R.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),R.debug("resumeSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(this._remoteSdp.resumeSendingMediaSection(c),!u)throw new Error("associated RTCRtpTransceiver not found");u.direction="sendonly";const l=await this._pc.createOffer();R.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async replaceTrack(c,u){this.assertNotClosed(),this.assertSendDirection(),u?R.debug("replaceTrack() [localId:%s, track.id:%s]",c,u.id):R.debug("replaceTrack() [localId:%s, no track]",c);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");await l.sender.replaceTrack(u)}async setMaxSpatialLayer(c,u){this.assertNotClosed(),this.assertSendDirection(),R.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,u);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");const m=l.sender.getParameters();m.encodings.forEach((L,j)=>{L.active=j<=u}),await l.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(c,m.encodings);const D=await this._pc.createOffer();R.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const N={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async setRtpEncodingParameters(c,u){this.assertNotClosed(),this.assertSendDirection(),R.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,u);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");const m=l.sender.getParameters();m.encodings.forEach((L,j)=>{m.encodings[j]={...L,...u}}),await l.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(c,m.encodings);const D=await this._pc.createOffer();R.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const N={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");return u.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:u,maxRetransmits:l,label:m,protocol:D}){this.assertNotClosed(),this.assertSendDirection();const N={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:u,maxRetransmits:l,protocol:D};R.debug("sendDataChannel() [options:%o]",N);const L=this._pc.createDataChannel(m,N);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%I.MIS,!this._hasDataChannelMediaSection){const j=await this._pc.createOffer(),V=b.parse(j.sdp),$=V.media.find(ne=>ne.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:V}),R.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j),this._remoteSdp.sendSctpAssociation({offerMediaObject:$});const Z={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setRemoteDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:L,sctpStreamParameters:{streamId:N.id,ordered:N.ordered,maxPacketLifeTime:N.maxPacketLifeTime,maxRetransmits:N.maxRetransmits}}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const u=[],l=new Map;for(const L of c){const{trackId:j,kind:V,rtpParameters:$,streamId:Z}=L;R.debug("receive() [trackId:%s, kind:%s]",j,V);const ne=$.mid||String(this._mapMidTransceiver.size);l.set(j,ne),this._remoteSdp.receive({mid:ne,kind:V,offerRtpParameters:$,streamId:Z||$.rtcp.cname,trackId:j})}const m={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);let D=await this._pc.createAnswer();const N=b.parse(D.sdp);for(const L of c){const{trackId:j,rtpParameters:V}=L,$=l.get(j),Z=N.media.find(ne=>String(ne.mid)===$);s.applyCodecParameters({offerRtpParameters:V,answerMediaObject:Z})}D={type:"answer",sdp:b.write(N)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),R.debug("receive() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D);for(const L of c){const{trackId:j}=L,V=l.get(j),$=this._pc.getTransceivers().find(Z=>Z.mid===V);if(!$)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(V,$),u.push({localId:V,track:$.receiver.track,rtpReceiver:$.receiver})}return u}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const m of c){R.debug("stopReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(D.mid)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const m of c)this._mapMidTransceiver.delete(m)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const m of c){R.debug("pauseReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");D.direction="inactive",this._remoteSdp.pauseMediaSection(m)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const m of c){R.debug("resumeReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");D.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(m)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");return u.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:u,protocol:l}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:m,ordered:D,maxPacketLifeTime:N,maxRetransmits:L}=c,j={negotiated:!0,id:m,ordered:D,maxPacketLifeTime:N,maxRetransmits:L,protocol:l};R.debug("receiveDataChannel() [options:%o]",j);const V=this._pc.createDataChannel(u,j);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const $={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",$),await this._pc.setRemoteDescription($);const Z=await this._pc.createAnswer();if(!this._transportReady){const ne=b.parse(Z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:ne})}R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setLocalDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:V}}async setupTransport({localDtlsRole:c,localSdpObject:u}){u||(u=b.parse(this._pc.localDescription.sdp));const l=s.extractDtlsParameters({sdpObject:u});l.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((m,D)=>{this.safeEmit("@connect",{dtlsParameters:l},m,D)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new T.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.ReactNativeUnifiedPlan=d},9676:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(R,I,d,v){v===void 0&&(v=d);var c=Object.getOwnPropertyDescriptor(I,d);c&&!("get"in c?!I.__esModule:c.writable||c.configurable)||(c={enumerable:!0,get:function(){return I[d]}}),Object.defineProperty(R,v,c)}:function(R,I,d,v){v===void 0&&(v=d),R[v]=I[d]}),_=this&&this.__setModuleDefault||(Object.create?function(R,I){Object.defineProperty(R,"default",{enumerable:!0,value:I})}:function(R,I){R.default=I}),h=this&&this.__importStar||function(R){if(R&&R.__esModule)return R;var I={};if(R!=null)for(var d in R)d!=="default"&&Object.prototype.hasOwnProperty.call(R,d)&&C(I,R,d);return _(I,R),I};Object.defineProperty(p,"__esModule",{value:!0}),p.Safari11=void 0;const b=h(o(7363)),k=o(2994),f=h(o(1765)),g=h(o(8046)),s=h(o(5544)),w=h(o(4496)),S=o(521),T=o(1305),x=new k.Logger("Safari11"),O={OS:1024,MIS:1024};class P extends S.HandlerInterface{static createFactory(){return()=>new P}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari11"}close(){if(x.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){x.debug("getNativeRtpCapabilities()");const I=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const d=await I.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{I.close()}catch{}const v=b.parse(d.sdp);return s.extractRtpCapabilities({sdpObject:v})}catch(d){try{I.close()}catch{}throw d}}async getNativeSctpCapabilities(){return x.debug("getNativeSctpCapabilities()"),{numStreams:O}}run({direction:I,iceParameters:d,iceCandidates:v,dtlsParameters:c,sctpParameters:u,iceServers:l,iceTransportPolicy:m,additionalSettings:D,proprietaryConstraints:N,extendedRtpCapabilities:L}){x.debug("run()"),this._direction=I,this._remoteSdp=new T.RemoteSdp({iceParameters:d,iceCandidates:v,dtlsParameters:c,sctpParameters:u,planB:!0}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",L),video:g.getSendingRtpParameters("video",L)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",L),video:g.getSendingRemoteRtpParameters("video",L)},c.role&&c.role!=="auto"&&(this._forcedLocalDtlsRole=c.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:l||[],iceTransportPolicy:m||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...D},N),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(x.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(I){x.debug("updateIceServers()");const d=this._pc.getConfiguration();d.iceServers=I,this._pc.setConfiguration(d)}async restartIce(I){if(x.debug("restartIce()"),this._remoteSdp.updateIceParameters(I),this._transportReady)if(this._direction==="send"){const d=await this._pc.createOffer({iceRestart:!0});x.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const v={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",v),await this._pc.setRemoteDescription(v)}else{const d={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const v=await this._pc.createAnswer();x.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",v),await this._pc.setLocalDescription(v)}}async getTransportStats(){return this._pc.getStats()}async send({track:I,encodings:d,codecOptions:v,codec:c}){this.assertSendDirection(),x.debug("send() [kind:%s, track.id:%s]",I.kind,I.id),c&&x.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(I),this._pc.addTrack(I,this._sendStream);let u,l=await this._pc.createOffer(),m=b.parse(l.sdp);const D=f.clone(this._sendingRtpParametersByKind[I.kind]);D.codecs=g.reduceCodecs(D.codecs);const N=f.clone(this._sendingRemoteRtpParametersByKind[I.kind]);if(N.codecs=g.reduceCodecs(N.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:m}),I.kind==="video"&&d&&d.length>1&&(x.debug("send() | enabling simulcast"),m=b.parse(l.sdp),u=m.media.find($=>$.type==="video"),w.addLegacySimulcast({offerMediaObject:u,track:I,numStreams:d.length}),l={type:"offer",sdp:b.write(m)}),x.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),m=b.parse(this._pc.localDescription.sdp),u=m.media.find($=>$.type===I.kind),D.rtcp.cname=s.getCname({offerMediaObject:u}),D.encodings=w.getRtpEncodings({offerMediaObject:u,track:I}),d)for(let $=0;$<D.encodings.length;++$)d[$]&&Object.assign(D.encodings[$],d[$]);if(D.encodings.length>1&&D.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const $ of D.encodings)$.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:u,offerRtpParameters:D,answerRtpParameters:N,codecOptions:v});const L={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("send() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L);const j=String(this._nextSendLocalId);this._nextSendLocalId++;const V=this._pc.getSenders().find($=>$.track===I);return this._mapSendLocalIdRtpSender.set(j,V),{localId:j,rtpParameters:D,rtpSender:V}}async stopSending(I){this.assertSendDirection();const d=this._mapSendLocalIdRtpSender.get(I);if(!d)throw new Error("associated RTCRtpSender not found");d.track&&this._sendStream.removeTrack(d.track),this._mapSendLocalIdRtpSender.delete(I);const v=await this._pc.createOffer();x.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",v);try{await this._pc.setLocalDescription(v)}catch(u){if(this._sendStream.getTracks().length===0)return void x.warn("stopSending() | ignoring expected error due no sending tracks: %s",u.toString());throw u}if(this._pc.signalingState==="stable")return;const c={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async pauseSending(I){}async resumeSending(I){}async replaceTrack(I,d){this.assertSendDirection(),d?x.debug("replaceTrack() [localId:%s, track.id:%s]",I,d.id):x.debug("replaceTrack() [localId:%s, no track]",I);const v=this._mapSendLocalIdRtpSender.get(I);if(!v)throw new Error("associated RTCRtpSender not found");const c=v.track;await v.replaceTrack(d),c&&this._sendStream.removeTrack(c),d&&this._sendStream.addTrack(d)}async setMaxSpatialLayer(I,d){this.assertSendDirection(),x.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",I,d);const v=this._mapSendLocalIdRtpSender.get(I);if(!v)throw new Error("associated RTCRtpSender not found");const c=v.getParameters();c.encodings.forEach((u,l)=>{u.active=l<=d}),await v.setParameters(c)}async setRtpEncodingParameters(I,d){this.assertSendDirection(),x.debug("setRtpEncodingParameters() [localId:%s, params:%o]",I,d);const v=this._mapSendLocalIdRtpSender.get(I);if(!v)throw new Error("associated RTCRtpSender not found");const c=v.getParameters();c.encodings.forEach((u,l)=>{c.encodings[l]={...u,...d}}),await v.setParameters(c)}async getSenderStats(I){this.assertSendDirection();const d=this._mapSendLocalIdRtpSender.get(I);if(!d)throw new Error("associated RTCRtpSender not found");return d.getStats()}async sendDataChannel({ordered:I,maxPacketLifeTime:d,maxRetransmits:v,label:c,protocol:u}){this.assertSendDirection();const l={negotiated:!0,id:this._nextSendSctpStreamId,ordered:I,maxPacketLifeTime:d,maxRetransmits:v,protocol:u};x.debug("sendDataChannel() [options:%o]",l);const m=this._pc.createDataChannel(c,l);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%O.MIS,!this._hasDataChannelMediaSection){const D=await this._pc.createOffer(),N=b.parse(D.sdp),L=N.media.find(V=>V.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),x.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D),this._remoteSdp.sendSctpAssociation({offerMediaObject:L});const j={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j),this._hasDataChannelMediaSection=!0}return{dataChannel:m,sctpStreamParameters:{streamId:l.id,ordered:l.ordered,maxPacketLifeTime:l.maxPacketLifeTime,maxRetransmits:l.maxRetransmits}}}async receive(I){this.assertRecvDirection();const d=[];for(const l of I){const{trackId:m,kind:D,rtpParameters:N,streamId:L}=l;x.debug("receive() [trackId:%s, kind:%s]",m,D);const j=D;this._remoteSdp.receive({mid:j,kind:D,offerRtpParameters:N,streamId:L||N.rtcp.cname,trackId:m})}const v={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);let c=await this._pc.createAnswer();const u=b.parse(c.sdp);for(const l of I){const{kind:m,rtpParameters:D}=l,N=m,L=u.media.find(j=>String(j.mid)===N);s.applyCodecParameters({offerRtpParameters:D,answerMediaObject:L})}c={type:"answer",sdp:b.write(u)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),x.debug("receive() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c);for(const l of I){const{kind:m,trackId:D,rtpParameters:N}=l,L=m,j=D,V=this._pc.getReceivers().find($=>$.track&&$.track.id===j);if(!V)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(j,{mid:L,rtpParameters:N,rtpReceiver:V}),d.push({localId:j,track:V.track,rtpReceiver:V})}return d}async stopReceiving(I){this.assertRecvDirection();for(const c of I){x.debug("stopReceiving() [localId:%s]",c);const{mid:u,rtpParameters:l}=this._mapRecvLocalIdInfo.get(c)||{};this._mapRecvLocalIdInfo.delete(c),this._remoteSdp.planBStopReceiving({mid:u,offerRtpParameters:l})}const d={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const v=await this._pc.createAnswer();x.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",v),await this._pc.setLocalDescription(v)}async getReceiverStats(I){this.assertRecvDirection();const{rtpReceiver:d}=this._mapRecvLocalIdInfo.get(I)||{};if(!d)throw new Error("associated RTCRtpReceiver not found");return d.getStats()}async pauseReceiving(I){}async resumeReceiving(I){}async receiveDataChannel({sctpStreamParameters:I,label:d,protocol:v}){this.assertRecvDirection();const{streamId:c,ordered:u,maxPacketLifeTime:l,maxRetransmits:m}=I,D={negotiated:!0,id:c,ordered:u,maxPacketLifeTime:l,maxRetransmits:m,protocol:v};x.debug("receiveDataChannel() [options:%o]",D);const N=this._pc.createDataChannel(d,D);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const L={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",L),await this._pc.setRemoteDescription(L);const j=await this._pc.createAnswer();if(!this._transportReady){const V=b.parse(j.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:V})}x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setLocalDescription(j),this._hasDataChannelMediaSection=!0}return{dataChannel:N}}async setupTransport({localDtlsRole:I,localSdpObject:d}){d||(d=b.parse(this._pc.localDescription.sdp));const v=s.extractDtlsParameters({sdpObject:d});v.role=I,this._remoteSdp.updateDtlsRole(I==="client"?"server":"client"),await new Promise((c,u)=>{this.safeEmit("@connect",{dtlsParameters:v},c,u)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.Safari11=P},5765:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(v,c,u,l){l===void 0&&(l=u);var m=Object.getOwnPropertyDescriptor(c,u);m&&!("get"in m?!c.__esModule:m.writable||m.configurable)||(m={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(v,l,m)}:function(v,c,u,l){l===void 0&&(l=u),v[l]=c[u]}),_=this&&this.__setModuleDefault||(Object.create?function(v,c){Object.defineProperty(v,"default",{enumerable:!0,value:c})}:function(v,c){v.default=c}),h=this&&this.__importStar||function(v){if(v&&v.__esModule)return v;var c={};if(v!=null)for(var u in v)u!=="default"&&Object.prototype.hasOwnProperty.call(v,u)&&C(c,v,u);return _(c,v),c};Object.defineProperty(p,"__esModule",{value:!0}),p.Safari12=void 0;const b=h(o(7363)),k=o(2994),f=h(o(1765)),g=h(o(8046)),s=h(o(5544)),w=h(o(5938)),S=h(o(4256)),T=o(4893),x=o(521),O=o(1305),P=o(3303),R=new k.Logger("Safari12"),I={OS:1024,MIS:1024};class d extends x.HandlerInterface{static createFactory(){return()=>new d}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari12"}close(){if(R.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){R.debug("getNativeRtpCapabilities()");const c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{c.addTransceiver("audio"),c.addTransceiver("video");const u=await c.createOffer();try{c.close()}catch{}const l=b.parse(u.sdp),m=s.extractRtpCapabilities({sdpObject:l});return S.addNackSuppportForOpus(m),m}catch(u){try{c.close()}catch{}throw u}}async getNativeSctpCapabilities(){return R.debug("getNativeSctpCapabilities()"),{numStreams:I}}run({direction:c,iceParameters:u,iceCandidates:l,dtlsParameters:m,sctpParameters:D,iceServers:N,iceTransportPolicy:L,additionalSettings:j,proprietaryConstraints:V,extendedRtpCapabilities:$}){this.assertNotClosed(),R.debug("run()"),this._direction=c,this._remoteSdp=new O.RemoteSdp({iceParameters:u,iceCandidates:l,dtlsParameters:m,sctpParameters:D}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",$),video:g.getSendingRtpParameters("video",$)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",$),video:g.getSendingRemoteRtpParameters("video",$)},m.role&&m.role!=="auto"&&(this._forcedLocalDtlsRole=m.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:N||[],iceTransportPolicy:L||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...j},V),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(R.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(c){this.assertNotClosed(),R.debug("updateIceServers()");const u=this._pc.getConfiguration();u.iceServers=c,this._pc.setConfiguration(u)}async restartIce(c){if(this.assertNotClosed(),R.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),this._transportReady)if(this._direction==="send"){const u=await this._pc.createOffer({iceRestart:!0});R.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}else{const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,encodings:u,codecOptions:l,codec:m}){this.assertNotClosed(),this.assertSendDirection(),R.debug("send() [kind:%s, track.id:%s]",c.kind,c.id);const D=f.clone(this._sendingRtpParametersByKind[c.kind]);D.codecs=g.reduceCodecs(D.codecs,m);const N=f.clone(this._sendingRemoteRtpParametersByKind[c.kind]);N.codecs=g.reduceCodecs(N.codecs,m);const L=this._remoteSdp.getNextMediaSectionIdx(),j=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream]});let V,$=await this._pc.createOffer(),Z=b.parse($.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Z});const ne=(0,P.parse)((u||[{}])[0].scalabilityMode);u&&u.length>1&&(R.debug("send() | enabling legacy simulcast"),Z=b.parse($.sdp),V=Z.media[L.idx],w.addLegacySimulcast({offerMediaObject:V,numStreams:u.length}),$={type:"offer",sdp:b.write(Z)}),R.debug("send() | calling pc.setLocalDescription() [offer:%o]",$),await this._pc.setLocalDescription($);const pe=j.mid;if(D.mid=pe,Z=b.parse(this._pc.localDescription.sdp),V=Z.media[L.idx],D.rtcp.cname=s.getCname({offerMediaObject:V}),D.encodings=w.getRtpEncodings({offerMediaObject:V}),u)for(let _e=0;_e<D.encodings.length;++_e)u[_e]&&Object.assign(D.encodings[_e],u[_e]);if(D.encodings.length>1&&(D.codecs[0].mimeType.toLowerCase()==="video/vp8"||D.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const _e of D.encodings)_e.scalabilityMode?_e.scalabilityMode=`L1T${ne.temporalLayers}`:_e.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:V,reuseMid:L.reuseMid,offerRtpParameters:D,answerRtpParameters:N,codecOptions:l});const ge={type:"answer",sdp:this._remoteSdp.getSdp()};return R.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ge),await this._pc.setRemoteDescription(ge),this._mapMidTransceiver.set(pe,j),{localId:pe,rtpParameters:D,rtpSender:j.sender}}async stopSending(c){if(this.assertSendDirection(),this._closed)return;R.debug("stopSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");if(u.sender.replaceTrack(null),this._pc.removeTrack(u.sender),this._remoteSdp.closeMediaSection(u.mid))try{u.stop()}catch{}const l=await this._pc.createOffer();R.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),R.debug("pauseSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");u.direction="inactive",this._remoteSdp.pauseMediaSection(c);const l=await this._pc.createOffer();R.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),R.debug("resumeSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");u.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(c);const l=await this._pc.createOffer();R.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async replaceTrack(c,u){this.assertNotClosed(),this.assertSendDirection(),u?R.debug("replaceTrack() [localId:%s, track.id:%s]",c,u.id):R.debug("replaceTrack() [localId:%s, no track]",c);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");await l.sender.replaceTrack(u)}async setMaxSpatialLayer(c,u){this.assertNotClosed(),this.assertSendDirection(),R.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,u);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");const m=l.sender.getParameters();m.encodings.forEach((L,j)=>{L.active=j<=u}),await l.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(c,m.encodings);const D=await this._pc.createOffer();R.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const N={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async setRtpEncodingParameters(c,u){this.assertNotClosed(),this.assertSendDirection(),R.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,u);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");const m=l.sender.getParameters();m.encodings.forEach((L,j)=>{m.encodings[j]={...L,...u}}),await l.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(c,m.encodings);const D=await this._pc.createOffer();R.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const N={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");return u.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:u,maxRetransmits:l,label:m,protocol:D}){this.assertNotClosed(),this.assertSendDirection();const N={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:u,maxRetransmits:l,protocol:D};R.debug("sendDataChannel() [options:%o]",N);const L=this._pc.createDataChannel(m,N);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%I.MIS,!this._hasDataChannelMediaSection){const j=await this._pc.createOffer(),V=b.parse(j.sdp),$=V.media.find(ne=>ne.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:V}),R.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j),this._remoteSdp.sendSctpAssociation({offerMediaObject:$});const Z={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setRemoteDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:L,sctpStreamParameters:{streamId:N.id,ordered:N.ordered,maxPacketLifeTime:N.maxPacketLifeTime,maxRetransmits:N.maxRetransmits}}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const u=[],l=new Map;for(const L of c){const{trackId:j,kind:V,rtpParameters:$,streamId:Z}=L;R.debug("receive() [trackId:%s, kind:%s]",j,V);const ne=$.mid||String(this._mapMidTransceiver.size);l.set(j,ne),this._remoteSdp.receive({mid:ne,kind:V,offerRtpParameters:$,streamId:Z||$.rtcp.cname,trackId:j})}const m={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);let D=await this._pc.createAnswer();const N=b.parse(D.sdp);for(const L of c){const{trackId:j,rtpParameters:V}=L,$=l.get(j),Z=N.media.find(ne=>String(ne.mid)===$);s.applyCodecParameters({offerRtpParameters:V,answerMediaObject:Z})}D={type:"answer",sdp:b.write(N)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),R.debug("receive() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D);for(const L of c){const{trackId:j}=L,V=l.get(j),$=this._pc.getTransceivers().find(Z=>Z.mid===V);if(!$)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(V,$),u.push({localId:V,track:$.receiver.track,rtpReceiver:$.receiver})}return u}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const m of c){R.debug("stopReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(D.mid)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const m of c)this._mapMidTransceiver.delete(m)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const m of c){R.debug("pauseReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");D.direction="inactive",this._remoteSdp.pauseMediaSection(m)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const m of c){R.debug("resumeReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");D.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(m)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");return u.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:u,protocol:l}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:m,ordered:D,maxPacketLifeTime:N,maxRetransmits:L}=c,j={negotiated:!0,id:m,ordered:D,maxPacketLifeTime:N,maxRetransmits:L,protocol:l};R.debug("receiveDataChannel() [options:%o]",j);const V=this._pc.createDataChannel(u,j);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const $={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",$),await this._pc.setRemoteDescription($);const Z=await this._pc.createAnswer();if(!this._transportReady){const ne=b.parse(Z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:ne})}R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setLocalDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:V}}async setupTransport({localDtlsRole:c,localSdpObject:u}){u||(u=b.parse(this._pc.localDescription.sdp));const l=s.extractDtlsParameters({sdpObject:u});l.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((m,D)=>{this.safeEmit("@connect",{dtlsParameters:l},m,D)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new T.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.Safari12=d},8751:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(k,f,g,s){s===void 0&&(s=g);var w=Object.getOwnPropertyDescriptor(f,g);w&&!("get"in w?!f.__esModule:w.writable||w.configurable)||(w={enumerable:!0,get:function(){return f[g]}}),Object.defineProperty(k,s,w)}:function(k,f,g,s){s===void 0&&(s=g),k[s]=f[g]}),_=this&&this.__setModuleDefault||(Object.create?function(k,f){Object.defineProperty(k,"default",{enumerable:!0,value:f})}:function(k,f){k.default=f}),h=this&&this.__importStar||function(k){if(k&&k.__esModule)return k;var f={};if(k!=null)for(var g in k)g!=="default"&&Object.prototype.hasOwnProperty.call(k,g)&&C(f,k,g);return _(f,k),f};Object.defineProperty(p,"__esModule",{value:!0}),p.mangleRtpParameters=p.getCapabilities=void 0;const b=h(o(1765));p.getCapabilities=function(){const k=RTCRtpReceiver.getCapabilities(),f=b.clone(k);for(const g of f.codecs??[]){if(g.channels=g.numChannels,delete g.numChannels,g.mimeType=g.mimeType||`${g.kind}/${g.name}`,g.parameters){const s=g.parameters;s.apt&&(s.apt=Number(s.apt)),s["packetization-mode"]&&(s["packetization-mode"]=Number(s["packetization-mode"]))}for(const s of g.rtcpFeedback||[])s.parameter||(s.parameter="")}return f},p.mangleRtpParameters=function(k){const f=b.clone(k);f.mid&&(f.muxId=f.mid,delete f.mid);for(const g of f.codecs)g.channels&&(g.numChannels=g.channels,delete g.channels),g.mimeType&&!g.name&&(g.name=g.mimeType.split("/")[1]),delete g.mimeType;return f}},4256:(E,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.addNackSuppportForOpus=void 0,p.addNackSuppportForOpus=function(o){var C;for(const _ of o.codecs||[])_.mimeType.toLowerCase()!=="audio/opus"&&_.mimeType.toLowerCase()!=="audio/multiopus"||(C=_.rtcpFeedback)!=null&&C.some(h=>h.type==="nack"&&!h.parameter)||(_.rtcpFeedback||(_.rtcpFeedback=[]),_.rtcpFeedback.push({type:"nack"}))}},3471:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(s,w,S,T){T===void 0&&(T=S);var x=Object.getOwnPropertyDescriptor(w,S);x&&!("get"in x?!w.__esModule:x.writable||x.configurable)||(x={enumerable:!0,get:function(){return w[S]}}),Object.defineProperty(s,T,x)}:function(s,w,S,T){T===void 0&&(T=S),s[T]=w[S]}),_=this&&this.__setModuleDefault||(Object.create?function(s,w){Object.defineProperty(s,"default",{enumerable:!0,value:w})}:function(s,w){s.default=w}),h=this&&this.__importStar||function(s){if(s&&s.__esModule)return s;var w={};if(s!=null)for(var S in s)S!=="default"&&Object.prototype.hasOwnProperty.call(s,S)&&C(w,s,S);return _(w,s),w};Object.defineProperty(p,"__esModule",{value:!0}),p.OfferMediaSection=p.AnswerMediaSection=p.MediaSection=void 0;const b=h(o(7363)),k=h(o(1765));class f{constructor({iceParameters:w,iceCandidates:S,dtlsParameters:T,planB:x=!1}){if(this._mediaObject={},this._planB=x,w&&this.setIceParameters(w),S){this._mediaObject.candidates=[];for(const O of S){const P={component:1};P.foundation=O.foundation,P.ip=O.address??O.ip,P.port=O.port,P.priority=O.priority,P.transport=O.protocol,P.type=O.type,O.tcpType&&(P.tcptype=O.tcpType),this._mediaObject.candidates.push(P)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}T&&this.setDtlsRole(T.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(w){this._mediaObject.iceUfrag=w.usernameFragment,this._mediaObject.icePwd=w.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}p.MediaSection=f,p.AnswerMediaSection=class extends f{constructor({iceParameters:s,iceCandidates:w,dtlsParameters:S,sctpParameters:T,plainRtpParameters:x,planB:O=!1,offerMediaObject:P,offerRtpParameters:R,answerRtpParameters:I,codecOptions:d,extmapAllowMixed:v=!1}){switch(super({iceParameters:s,iceCandidates:w,dtlsParameters:S,planB:O}),this._mediaObject.mid=String(P.mid),this._mediaObject.type=P.type,this._mediaObject.protocol=P.protocol,x?(this._mediaObject.connection={ip:x.ip,version:x.ipVersion},this._mediaObject.port=x.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),P.type){case"audio":case"video":this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const c of I.codecs){const u={payload:c.payloadType,codec:g(c),rate:c.clockRate};c.channels>1&&(u.encoding=c.channels),this._mediaObject.rtp.push(u);const l=k.clone(c.parameters)??{};let m=k.clone(c.rtcpFeedback)??[];if(d){const{opusStereo:N,opusFec:L,opusDtx:j,opusMaxPlaybackRate:V,opusMaxAverageBitrate:$,opusPtime:Z,opusNack:ne,videoGoogleStartBitrate:pe,videoGoogleMaxBitrate:ge,videoGoogleMinBitrate:_e}=d,Me=R.codecs.find(me=>me.payloadType===c.payloadType);switch(c.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":N!==void 0&&(Me.parameters["sprop-stereo"]=N?1:0,l.stereo=N?1:0),L!==void 0&&(Me.parameters.useinbandfec=L?1:0,l.useinbandfec=L?1:0),j!==void 0&&(Me.parameters.usedtx=j?1:0,l.usedtx=j?1:0),V!==void 0&&(l.maxplaybackrate=V),$!==void 0&&(l.maxaveragebitrate=$),Z!==void 0&&(Me.parameters.ptime=Z,l.ptime=Z),ne||(Me.rtcpFeedback=Me.rtcpFeedback.filter(me=>me.type!=="nack"||me.parameter),m=m.filter(me=>me.type!=="nack"||me.parameter));break;case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":pe!==void 0&&(l["x-google-start-bitrate"]=pe),ge!==void 0&&(l["x-google-max-bitrate"]=ge),_e!==void 0&&(l["x-google-min-bitrate"]=_e)}}const D={payload:c.payloadType,config:""};for(const N of Object.keys(l))D.config&&(D.config+=";"),D.config+=`${N}=${l[N]}`;D.config&&this._mediaObject.fmtp.push(D);for(const N of m)this._mediaObject.rtcpFb.push({payload:c.payloadType,type:N.type,subtype:N.parameter})}this._mediaObject.payloads=I.codecs.map(c=>c.payloadType).join(" "),this._mediaObject.ext=[];for(const c of I.headerExtensions)(P.ext||[]).some(u=>u.uri===c.uri)&&this._mediaObject.ext.push({uri:c.uri,value:c.id});if(v&&P.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),P.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:P.simulcast.list1},this._mediaObject.rids=[];for(const c of P.rids||[])c.direction==="send"&&this._mediaObject.rids.push({id:c.id,direction:"recv"})}else if(P.simulcast_03){this._mediaObject.simulcast_03={value:P.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const c of P.rids||[])c.direction==="send"&&this._mediaObject.rids.push({id:c.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break;case"application":typeof P.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=T.port,this._mediaObject.maxMessageSize=T.maxMessageSize):P.sctpmap&&(this._mediaObject.payloads=T.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:T.port,maxMessageSize:T.maxMessageSize})}}setDtlsRole(s){switch(s){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass"}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(s){var x;if(!this._mediaObject.simulcast||!this._mediaObject.simulcast.list1)return;const w={};for(const O of s)O.rid&&(w[O.rid]=O);const S=this._mediaObject.simulcast.list1,T=b.parseSimulcastStreamList(S);for(const O of T)for(const P of O)P.paused=!((x=w[P.scid])!=null&&x.active);this._mediaObject.simulcast.list1=T.map(O=>O.map(P=>`${P.paused?"~":""}${P.scid}`).join(",")).join(";")}};function g(s){const w=new RegExp("^(audio|video)/(.+)","i").exec(s.mimeType);if(!w)throw new TypeError("invalid codec.mimeType");return w[2]}p.OfferMediaSection=class extends f{constructor({iceParameters:s,iceCandidates:w,dtlsParameters:S,sctpParameters:T,plainRtpParameters:x,planB:O=!1,mid:P,kind:R,offerRtpParameters:I,streamId:d,trackId:v,oldDataChannelSpec:c=!1}){switch(super({iceParameters:s,iceCandidates:w,dtlsParameters:S,planB:O}),this._mediaObject.mid=String(P),this._mediaObject.type=R,x?(this._mediaObject.connection={ip:x.ip,version:x.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=x.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.protocol=T?"UDP/DTLS/SCTP":"UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),R){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${d||"-"} ${v}`);for(const D of I.codecs){const N={payload:D.payloadType,codec:g(D),rate:D.clockRate};D.channels>1&&(N.encoding=D.channels),this._mediaObject.rtp.push(N);const L={payload:D.payloadType,config:""};for(const j of Object.keys(D.parameters))L.config&&(L.config+=";"),L.config+=`${j}=${D.parameters[j]}`;L.config&&this._mediaObject.fmtp.push(L);for(const j of D.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:D.payloadType,type:j.type,subtype:j.parameter})}this._mediaObject.payloads=I.codecs.map(D=>D.payloadType).join(" "),this._mediaObject.ext=[];for(const D of I.headerExtensions)this._mediaObject.ext.push({uri:D.uri,value:D.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const u=I.encodings[0],l=u.ssrc,m=u.rtx&&u.rtx.ssrc?u.rtx.ssrc:void 0;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],I.rtcp.cname&&this._mediaObject.ssrcs.push({id:l,attribute:"cname",value:I.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:l,attribute:"msid",value:`${d||"-"} ${v}`}),m&&(I.rtcp.cname&&this._mediaObject.ssrcs.push({id:m,attribute:"cname",value:I.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:m,attribute:"msid",value:`${d||"-"} ${v}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${l} ${m}`}));break}case"application":c?(this._mediaObject.payloads=T.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:T.port,maxMessageSize:T.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=T.port,this._mediaObject.maxMessageSize=T.maxMessageSize)}}setDtlsRole(s){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:s,streamId:w,trackId:S}){const T=s.encodings[0],x=T.ssrc,O=T.rtx&&T.rtx.ssrc?T.rtx.ssrc:void 0,P=this._mediaObject.payloads.split(" ");for(const R of s.codecs){if(P.includes(String(R.payloadType)))continue;const I={payload:R.payloadType,codec:g(R),rate:R.clockRate};R.channels>1&&(I.encoding=R.channels),this._mediaObject.rtp.push(I);const d={payload:R.payloadType,config:""};for(const v of Object.keys(R.parameters))d.config&&(d.config+=";"),d.config+=`${v}=${R.parameters[v]}`;d.config&&this._mediaObject.fmtp.push(d);for(const v of R.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:R.payloadType,type:v.type,subtype:v.parameter})}this._mediaObject.payloads+=` ${s.codecs.filter(R=>!this._mediaObject.payloads.includes(R.payloadType)).map(R=>R.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),s.rtcp.cname&&this._mediaObject.ssrcs.push({id:x,attribute:"cname",value:s.rtcp.cname}),this._mediaObject.ssrcs.push({id:x,attribute:"msid",value:`${w||"-"} ${S}`}),O&&(s.rtcp.cname&&this._mediaObject.ssrcs.push({id:O,attribute:"cname",value:s.rtcp.cname}),this._mediaObject.ssrcs.push({id:O,attribute:"msid",value:`${w||"-"} ${S}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${x} ${O}`}))}planBStopReceiving({offerRtpParameters:s}){const w=s.encodings[0],S=w.ssrc,T=w.rtx&&w.rtx.ssrc?w.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(x=>x.id!==S&&x.id!==T),T&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(x=>x.ssrcs!==`${S} ${T}`))}}},1305:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(s,w,S,T){T===void 0&&(T=S);var x=Object.getOwnPropertyDescriptor(w,S);x&&!("get"in x?!w.__esModule:x.writable||x.configurable)||(x={enumerable:!0,get:function(){return w[S]}}),Object.defineProperty(s,T,x)}:function(s,w,S,T){T===void 0&&(T=S),s[T]=w[S]}),_=this&&this.__setModuleDefault||(Object.create?function(s,w){Object.defineProperty(s,"default",{enumerable:!0,value:w})}:function(s,w){s.default=w}),h=this&&this.__importStar||function(s){if(s&&s.__esModule)return s;var w={};if(s!=null)for(var S in s)S!=="default"&&Object.prototype.hasOwnProperty.call(s,S)&&C(w,s,S);return _(w,s),w};Object.defineProperty(p,"__esModule",{value:!0}),p.RemoteSdp=void 0;const b=h(o(7363)),k=o(2994),f=o(3471),g=new k.Logger("RemoteSdp");p.RemoteSdp=class{constructor({iceParameters:s,iceCandidates:w,dtlsParameters:S,sctpParameters:T,plainRtpParameters:x,planB:O=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=s,this._iceCandidates=w,this._dtlsParameters=S,this._sctpParameters=T,this._plainRtpParameters=x,this._planB=O,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},s&&s.iceLite&&(this._sdpObject.icelite="ice-lite"),S){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const P=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:S.fingerprints[P-1].algorithm,hash:S.fingerprints[P-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}x&&(this._sdpObject.origin.address=x.ip,this._sdpObject.origin.ipVer=x.ipVersion)}updateIceParameters(s){g.debug("updateIceParameters() [iceParameters:%o]",s),this._iceParameters=s,this._sdpObject.icelite=s.iceLite?"ice-lite":void 0;for(const w of this._mediaSections)w.setIceParameters(s)}updateDtlsRole(s){g.debug("updateDtlsRole() [role:%s]",s),this._dtlsParameters.role=s;for(const w of this._mediaSections)w.setDtlsRole(s)}getNextMediaSectionIdx(){for(let s=0;s<this._mediaSections.length;++s){const w=this._mediaSections[s];if(w.closed)return{idx:s,reuseMid:w.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:s,reuseMid:w,offerRtpParameters:S,answerRtpParameters:T,codecOptions:x,extmapAllowMixed:O=!1}){const P=new f.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:s,offerRtpParameters:S,answerRtpParameters:T,codecOptions:x,extmapAllowMixed:O});w?this._replaceMediaSection(P,w):this._midToIndex.has(P.mid)?this._replaceMediaSection(P):this._addMediaSection(P)}receive({mid:s,kind:w,offerRtpParameters:S,streamId:T,trackId:x}){const O=this._midToIndex.get(s);let P;if(O!==void 0&&(P=this._mediaSections[O]),P)P.planBReceive({offerRtpParameters:S,streamId:T,trackId:x}),this._replaceMediaSection(P);else{P=new f.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:s,kind:w,offerRtpParameters:S,streamId:T,trackId:x});const R=this._mediaSections.find(I=>I.closed);R?this._replaceMediaSection(P,R.mid):this._addMediaSection(P)}}pauseMediaSection(s){this._findMediaSection(s).pause()}resumeSendingMediaSection(s){this._findMediaSection(s).resume()}resumeReceivingMediaSection(s){this._findMediaSection(s).resume()}disableMediaSection(s){this._findMediaSection(s).disable()}closeMediaSection(s){const w=this._findMediaSection(s);return s===this._firstMid?(g.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",s),this.disableMediaSection(s),!1):(w.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(s,w){const S=this._findMediaSection(s);S.muxSimulcastStreams(w),this._replaceMediaSection(S)}planBStopReceiving({mid:s,offerRtpParameters:w}){const S=this._findMediaSection(s);S.planBStopReceiving({offerRtpParameters:w}),this._replaceMediaSection(S)}sendSctpAssociation({offerMediaObject:s}){const w=new f.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:s});this._addMediaSection(w)}receiveSctpAssociation({oldDataChannelSpec:s=!1}={}){const w=new f.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:s});this._addMediaSection(w)}getSdp(){return this._sdpObject.origin.sessionVersion++,b.write(this._sdpObject)}_addMediaSection(s){this._firstMid||(this._firstMid=s.mid),this._mediaSections.push(s),this._midToIndex.set(s.mid,this._mediaSections.length-1),this._sdpObject.media.push(s.getObject()),this._regenerateBundleMids()}_replaceMediaSection(s,w){if(typeof w=="string"){const S=this._midToIndex.get(w);if(S===void 0)throw new Error(`no media section found for reuseMid '${w}'`);const T=this._mediaSections[S];this._mediaSections[S]=s,this._midToIndex.delete(T.mid),this._midToIndex.set(s.mid,S),this._sdpObject.media[S]=s.getObject(),this._regenerateBundleMids()}else{const S=this._midToIndex.get(s.mid);if(S===void 0)throw new Error(`no media section found with mid '${s.mid}'`);this._mediaSections[S]=s,this._sdpObject.media[S]=s.getObject()}}_findMediaSection(s){const w=this._midToIndex.get(s);if(w===void 0)throw new Error(`no media section found with mid '${s}'`);return this._mediaSections[w]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(s=>!s.closed).map(s=>s.mid).join(" "))}}},5544:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(k,f,g,s){s===void 0&&(s=g);var w=Object.getOwnPropertyDescriptor(f,g);w&&!("get"in w?!f.__esModule:w.writable||w.configurable)||(w={enumerable:!0,get:function(){return f[g]}}),Object.defineProperty(k,s,w)}:function(k,f,g,s){s===void 0&&(s=g),k[s]=f[g]}),_=this&&this.__setModuleDefault||(Object.create?function(k,f){Object.defineProperty(k,"default",{enumerable:!0,value:f})}:function(k,f){k.default=f}),h=this&&this.__importStar||function(k){if(k&&k.__esModule)return k;var f={};if(k!=null)for(var g in k)g!=="default"&&Object.prototype.hasOwnProperty.call(k,g)&&C(f,k,g);return _(f,k),f};Object.defineProperty(p,"__esModule",{value:!0}),p.applyCodecParameters=p.getCname=p.extractDtlsParameters=p.extractRtpCapabilities=void 0;const b=h(o(7363));p.extractRtpCapabilities=function({sdpObject:k}){const f=new Map,g=[];let s=!1,w=!1;for(const S of k.media){const T=S.type;switch(T){case"audio":if(s)continue;s=!0;break;case"video":if(w)continue;w=!0;break;default:continue}for(const x of S.rtp){const O={kind:T,mimeType:`${T}/${x.codec}`,preferredPayloadType:x.payload,clockRate:x.rate,channels:x.encoding,parameters:{},rtcpFeedback:[]};f.set(O.preferredPayloadType,O)}for(const x of S.fmtp||[]){const O=b.parseParams(x.config),P=f.get(x.payload);P&&(O&&O.hasOwnProperty("profile-level-id")&&(O["profile-level-id"]=String(O["profile-level-id"])),P.parameters=O)}for(const x of S.rtcpFb||[]){const O={type:x.type,parameter:x.subtype};if(O.parameter||delete O.parameter,x.payload!=="*"){const P=f.get(x.payload);if(!P)continue;P.rtcpFeedback.push(O)}else for(const P of f.values())P.kind!==T||/.+\/rtx$/i.test(P.mimeType)||P.rtcpFeedback.push(O)}for(const x of S.ext||[]){if(x["encrypt-uri"])continue;const O={kind:T,uri:x.uri,preferredId:x.value};g.push(O)}}return{codecs:Array.from(f.values()),headerExtensions:g}},p.extractDtlsParameters=function({sdpObject:k}){let f,g=k.setup,s=k.fingerprint;if(!g||!s){const w=(k.media||[]).find(S=>S.port!==0);w&&(g??(g=w.setup),s??(s=w.fingerprint))}if(!g)throw new Error("no a=setup found at SDP session or media level");if(!s)throw new Error("no a=fingerprint found at SDP session or media level");switch(g){case"active":f="client";break;case"passive":f="server";break;case"actpass":f="auto"}return{role:f,fingerprints:[{algorithm:s.type,value:s.hash}]}},p.getCname=function({offerMediaObject:k}){const f=(k.ssrcs||[]).find(g=>g.attribute==="cname");return f?f.value:""},p.applyCodecParameters=function({offerRtpParameters:k,answerMediaObject:f}){for(const g of k.codecs){const s=g.mimeType.toLowerCase();if(s!=="audio/opus"||!(f.rtp||[]).find(T=>T.payload===g.payloadType))continue;f.fmtp=f.fmtp||[];let w=f.fmtp.find(T=>T.payload===g.payloadType);w||(w={payload:g.payloadType,config:""},f.fmtp.push(w));const S=b.parseParams(w.config);switch(s){case"audio/opus":{const T=g.parameters["sprop-stereo"];T!==void 0&&(S.stereo=T?1:0);break}}w.config="";for(const T of Object.keys(S))w.config&&(w.config+=";"),w.config+=`${T}=${S[T]}`}}},4496:(E,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.addLegacySimulcast=p.getRtpEncodings=void 0,p.getRtpEncodings=function({offerMediaObject:o,track:C}){const _=new Set;for(const k of o.ssrcs||[])if(k.attribute==="msid"&&k.value.split(" ")[1]===C.id){const f=k.id;_.add(f)}if(_.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${C.id}]`);const h=new Map;for(const k of o.ssrcGroups||[]){if(k.semantics!=="FID")continue;let[f,g]=k.ssrcs.split(/\s+/);f=Number(f),g=Number(g),_.has(f)&&(_.delete(f),_.delete(g),h.set(f,g))}for(const k of _)h.set(k,null);const b=[];for(const[k,f]of h){const g={ssrc:k};f&&(g.rtx={ssrc:f}),b.push(g)}return b},p.addLegacySimulcast=function({offerMediaObject:o,track:C,numStreams:_}){if(_<=1)throw new TypeError("numStreams must be greater than 1");let h,b,k;if(!(o.ssrcs||[]).find(S=>S.attribute!=="msid"?!1:S.value.split(" ")[1]===C.id&&(h=S.id,k=S.value.split(" ")[0],!0)))throw new Error(`a=ssrc line with msid information not found [track.id:${C.id}]`);(o.ssrcGroups||[]).some(S=>{if(S.semantics!=="FID")return!1;const T=S.ssrcs.split(/\s+/);return Number(T[0])===h&&(b=Number(T[1]),!0)});const f=o.ssrcs.find(S=>S.attribute==="cname"&&S.id===h);if(!f)throw new Error(`a=ssrc line with cname information not found [track.id:${C.id}]`);const g=f.value,s=[],w=[];for(let S=0;S<_;++S)s.push(h+S),b&&w.push(b+S);o.ssrcGroups=o.ssrcGroups||[],o.ssrcs=o.ssrcs||[],o.ssrcGroups.push({semantics:"SIM",ssrcs:s.join(" ")});for(let S=0;S<s.length;++S){const T=s[S];o.ssrcs.push({id:T,attribute:"cname",value:g}),o.ssrcs.push({id:T,attribute:"msid",value:`${k} ${C.id}`})}for(let S=0;S<w.length;++S){const T=s[S],x=w[S];o.ssrcs.push({id:x,attribute:"cname",value:g}),o.ssrcs.push({id:x,attribute:"msid",value:`${k} ${C.id}`}),o.ssrcGroups.push({semantics:"FID",ssrcs:`${T} ${x}`})}}},5938:(E,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.addLegacySimulcast=p.getRtpEncodings=void 0,p.getRtpEncodings=function({offerMediaObject:o}){const C=new Set;for(const b of o.ssrcs||[]){const k=b.id;C.add(k)}if(C.size===0)throw new Error("no a=ssrc lines found");const _=new Map;for(const b of o.ssrcGroups||[]){if(b.semantics!=="FID")continue;let[k,f]=b.ssrcs.split(/\s+/);k=Number(k),f=Number(f),C.has(k)&&(C.delete(k),C.delete(f),_.set(k,f))}for(const b of C)_.set(b,null);const h=[];for(const[b,k]of _){const f={ssrc:b};k&&(f.rtx={ssrc:k}),h.push(f)}return h},p.addLegacySimulcast=function({offerMediaObject:o,numStreams:C}){if(C<=1)throw new TypeError("numStreams must be greater than 1");const _=(o.ssrcs||[]).find(T=>T.attribute==="msid");if(!_)throw new Error("a=ssrc line with msid information not found");const[h,b]=_.value.split(" "),k=_.id;let f;(o.ssrcGroups||[]).some(T=>{if(T.semantics!=="FID")return!1;const x=T.ssrcs.split(/\s+/);return Number(x[0])===k&&(f=Number(x[1]),!0)});const g=o.ssrcs.find(T=>T.attribute==="cname");if(!g)throw new Error("a=ssrc line with cname information not found");const s=g.value,w=[],S=[];for(let T=0;T<C;++T)w.push(k+T),f&&S.push(f+T);o.ssrcGroups=[],o.ssrcs=[],o.ssrcGroups.push({semantics:"SIM",ssrcs:w.join(" ")});for(let T=0;T<w.length;++T){const x=w[T];o.ssrcs.push({id:x,attribute:"cname",value:s}),o.ssrcs.push({id:x,attribute:"msid",value:`${h} ${b}`})}for(let T=0;T<S.length;++T){const x=w[T],O=S[T];o.ssrcs.push({id:O,attribute:"cname",value:s}),o.ssrcs.push({id:O,attribute:"msid",value:`${h} ${b}`}),o.ssrcGroups.push({semantics:"FID",ssrcs:`${x} ${O}`})}}},76:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(w,S,T,x){x===void 0&&(x=T);var O=Object.getOwnPropertyDescriptor(S,T);O&&!("get"in O?!S.__esModule:O.writable||O.configurable)||(O={enumerable:!0,get:function(){return S[T]}}),Object.defineProperty(w,x,O)}:function(w,S,T,x){x===void 0&&(x=T),w[x]=S[T]}),_=this&&this.__setModuleDefault||(Object.create?function(w,S){Object.defineProperty(w,"default",{enumerable:!0,value:S})}:function(w,S){w.default=S}),h=this&&this.__importStar||function(w){if(w&&w.__esModule)return w;var S={};if(w!=null)for(var T in w)T!=="default"&&Object.prototype.hasOwnProperty.call(w,T)&&C(S,w,T);return _(S,w),S},b=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(p,"__esModule",{value:!0}),p.debug=p.parseScalabilityMode=p.detectDevice=p.Device=p.version=p.types=void 0;const k=b(o(7833));p.debug=k.default;const f=o(6004);Object.defineProperty(p,"Device",{enumerable:!0,get:function(){return f.Device}}),Object.defineProperty(p,"detectDevice",{enumerable:!0,get:function(){return f.detectDevice}});const g=h(o(8057));p.types=g,p.version="3.7.7";var s=o(3303);Object.defineProperty(p,"parseScalabilityMode",{enumerable:!0,get:function(){return s.parse}})},8046:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(d,v,c,u){u===void 0&&(u=c);var l=Object.getOwnPropertyDescriptor(v,c);l&&!("get"in l?!v.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return v[c]}}),Object.defineProperty(d,u,l)}:function(d,v,c,u){u===void 0&&(u=c),d[u]=v[c]}),_=this&&this.__setModuleDefault||(Object.create?function(d,v){Object.defineProperty(d,"default",{enumerable:!0,value:v})}:function(d,v){d.default=v}),h=this&&this.__importStar||function(d){if(d&&d.__esModule)return d;var v={};if(d!=null)for(var c in d)c!=="default"&&Object.prototype.hasOwnProperty.call(d,c)&&C(v,d,c);return _(v,d),v};Object.defineProperty(p,"__esModule",{value:!0}),p.canReceive=p.canSend=p.generateProbatorRtpParameters=p.reduceCodecs=p.getSendingRemoteRtpParameters=p.getSendingRtpParameters=p.getRecvRtpCapabilities=p.getExtendedRtpCapabilities=p.validateSctpCapabilities=p.validateSctpStreamParameters=p.validateRtpParameters=p.validateRtpCapabilities=void 0;const b=h(o(3200)),k=h(o(1765));function f(d){if(typeof d!="object")throw new TypeError("params is not an object");if(d.mid&&typeof d.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(d.codecs))throw new TypeError("missing params.codecs");for(const v of d.codecs)S(v);if(d.headerExtensions&&!Array.isArray(d.headerExtensions))throw new TypeError("params.headerExtensions is not an array");d.headerExtensions||(d.headerExtensions=[]);for(const v of d.headerExtensions)T(v);if(d.encodings&&!Array.isArray(d.encodings))throw new TypeError("params.encodings is not an array");d.encodings||(d.encodings=[]);for(const v of d.encodings)x(v);if(d.rtcp&&typeof d.rtcp!="object")throw new TypeError("params.rtcp is not an object");d.rtcp||(d.rtcp={}),function(v){if(typeof v!="object")throw new TypeError("rtcp is not an object");if(v.cname&&typeof v.cname!="string")throw new TypeError("invalid rtcp.cname");v.reducedSize&&typeof v.reducedSize=="boolean"||(v.reducedSize=!0)}(d.rtcp)}function g(d){const v=new RegExp("^(audio|video)/(.+)","i");if(typeof d!="object")throw new TypeError("codec is not an object");if(!d.mimeType||typeof d.mimeType!="string")throw new TypeError("missing codec.mimeType");const c=v.exec(d.mimeType);if(!c)throw new TypeError("invalid codec.mimeType");if(d.kind=c[1].toLowerCase(),d.preferredPayloadType&&typeof d.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof d.clockRate!="number")throw new TypeError("missing codec.clockRate");d.kind==="audio"?typeof d.channels!="number"&&(d.channels=1):delete d.channels,d.parameters&&typeof d.parameters=="object"||(d.parameters={});for(const u of Object.keys(d.parameters)){let l=d.parameters[u];if(l===void 0&&(d.parameters[u]="",l=""),typeof l!="string"&&typeof l!="number")throw new TypeError(`invalid codec parameter [key:${u}s, value:${l}]`);if(u==="apt"&&typeof l!="number")throw new TypeError("invalid codec apt parameter")}d.rtcpFeedback&&Array.isArray(d.rtcpFeedback)||(d.rtcpFeedback=[]);for(const u of d.rtcpFeedback)s(u)}function s(d){if(typeof d!="object")throw new TypeError("fb is not an object");if(!d.type||typeof d.type!="string")throw new TypeError("missing fb.type");d.parameter&&typeof d.parameter=="string"||(d.parameter="")}function w(d){if(typeof d!="object")throw new TypeError("ext is not an object");if(d.kind!=="audio"&&d.kind!=="video")throw new TypeError("invalid ext.kind");if(!d.uri||typeof d.uri!="string")throw new TypeError("missing ext.uri");if(typeof d.preferredId!="number")throw new TypeError("missing ext.preferredId");if(d.preferredEncrypt&&typeof d.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(d.preferredEncrypt||(d.preferredEncrypt=!1),d.direction&&typeof d.direction!="string")throw new TypeError("invalid ext.direction");d.direction||(d.direction="sendrecv")}function S(d){const v=new RegExp("^(audio|video)/(.+)","i");if(typeof d!="object")throw new TypeError("codec is not an object");if(!d.mimeType||typeof d.mimeType!="string")throw new TypeError("missing codec.mimeType");const c=v.exec(d.mimeType);if(!c)throw new TypeError("invalid codec.mimeType");if(typeof d.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof d.clockRate!="number")throw new TypeError("missing codec.clockRate");c[1].toLowerCase()==="audio"?typeof d.channels!="number"&&(d.channels=1):delete d.channels,d.parameters&&typeof d.parameters=="object"||(d.parameters={});for(const u of Object.keys(d.parameters)){let l=d.parameters[u];if(l===void 0&&(d.parameters[u]="",l=""),typeof l!="string"&&typeof l!="number")throw new TypeError(`invalid codec parameter [key:${u}s, value:${l}]`);if(u==="apt"&&typeof l!="number")throw new TypeError("invalid codec apt parameter")}d.rtcpFeedback&&Array.isArray(d.rtcpFeedback)||(d.rtcpFeedback=[]);for(const u of d.rtcpFeedback)s(u)}function T(d){if(typeof d!="object")throw new TypeError("ext is not an object");if(!d.uri||typeof d.uri!="string")throw new TypeError("missing ext.uri");if(typeof d.id!="number")throw new TypeError("missing ext.id");if(d.encrypt&&typeof d.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");d.encrypt||(d.encrypt=!1),d.parameters&&typeof d.parameters=="object"||(d.parameters={});for(const v of Object.keys(d.parameters)){let c=d.parameters[v];if(c===void 0&&(d.parameters[v]="",c=""),typeof c!="string"&&typeof c!="number")throw new TypeError("invalid header extension parameter")}}function x(d){if(typeof d!="object")throw new TypeError("encoding is not an object");if(d.ssrc&&typeof d.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(d.rid&&typeof d.rid!="string")throw new TypeError("invalid encoding.rid");if(d.rtx&&typeof d.rtx!="object")throw new TypeError("invalid encoding.rtx");if(d.rtx&&typeof d.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if(d.dtx&&typeof d.dtx=="boolean"||(d.dtx=!1),d.scalabilityMode&&typeof d.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function O(d){return!!d&&/.+\/rtx$/i.test(d.mimeType)}function P(d,v,{strict:c=!1,modify:u=!1}={}){const l=d.mimeType.toLowerCase();if(l!==v.mimeType.toLowerCase()||d.clockRate!==v.clockRate||d.channels!==v.channels)return!1;switch(l){case"video/h264":if(c){if((d.parameters["packetization-mode"]||0)!==(v.parameters["packetization-mode"]||0)||!b.isSameProfile(d.parameters,v.parameters))return!1;let m;try{m=b.generateProfileLevelIdStringForAnswer(d.parameters,v.parameters)}catch{return!1}u&&(m?(d.parameters["profile-level-id"]=m,v.parameters["profile-level-id"]=m):(delete d.parameters["profile-level-id"],delete v.parameters["profile-level-id"]))}break;case"video/vp9":if(c&&(d.parameters["profile-id"]||0)!==(v.parameters["profile-id"]||0))return!1}return!0}function R(d,v){return(!d.kind||!v.kind||d.kind===v.kind)&&d.uri===v.uri}function I(d,v){const c=[];for(const u of d.rtcpFeedback||[]){const l=(v.rtcpFeedback||[]).find(m=>m.type===u.type&&(m.parameter===u.parameter||!m.parameter&&!u.parameter));l&&c.push(l)}return c}p.validateRtpCapabilities=function(d){if(typeof d!="object")throw new TypeError("caps is not an object");if(d.codecs&&!Array.isArray(d.codecs))throw new TypeError("caps.codecs is not an array");d.codecs||(d.codecs=[]);for(const v of d.codecs)g(v);if(d.headerExtensions&&!Array.isArray(d.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");d.headerExtensions||(d.headerExtensions=[]);for(const v of d.headerExtensions)w(v)},p.validateRtpParameters=f,p.validateSctpStreamParameters=function(d){if(typeof d!="object")throw new TypeError("params is not an object");if(typeof d.streamId!="number")throw new TypeError("missing params.streamId");let v=!1;if(typeof d.ordered=="boolean"?v=!0:d.ordered=!0,d.maxPacketLifeTime&&typeof d.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(d.maxRetransmits&&typeof d.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(d.maxPacketLifeTime&&d.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(v&&d.ordered&&(d.maxPacketLifeTime||d.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(v||!d.maxPacketLifeTime&&!d.maxRetransmits||(d.ordered=!1),d.label&&typeof d.label!="string")throw new TypeError("invalid params.label");if(d.protocol&&typeof d.protocol!="string")throw new TypeError("invalid params.protocol")},p.validateSctpCapabilities=function(d){if(typeof d!="object")throw new TypeError("caps is not an object");if(!d.numStreams||typeof d.numStreams!="object")throw new TypeError("missing caps.numStreams");(function(v){if(typeof v!="object")throw new TypeError("numStreams is not an object");if(typeof v.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof v.MIS!="number")throw new TypeError("missing numStreams.MIS")})(d.numStreams)},p.getExtendedRtpCapabilities=function(d,v){const c={codecs:[],headerExtensions:[]};for(const u of v.codecs||[]){if(O(u))continue;const l=(d.codecs||[]).find(D=>P(D,u,{strict:!0,modify:!0}));if(!l)continue;const m={mimeType:l.mimeType,kind:l.kind,clockRate:l.clockRate,channels:l.channels,localPayloadType:l.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:u.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:l.parameters,remoteParameters:u.parameters,rtcpFeedback:I(l,u)};c.codecs.push(m)}for(const u of c.codecs){const l=d.codecs.find(D=>O(D)&&D.parameters.apt===u.localPayloadType),m=v.codecs.find(D=>O(D)&&D.parameters.apt===u.remotePayloadType);l&&m&&(u.localRtxPayloadType=l.preferredPayloadType,u.remoteRtxPayloadType=m.preferredPayloadType)}for(const u of v.headerExtensions){const l=d.headerExtensions.find(D=>R(D,u));if(!l)continue;const m={kind:u.kind,uri:u.uri,sendId:l.preferredId,recvId:u.preferredId,encrypt:l.preferredEncrypt,direction:"sendrecv"};switch(u.direction){case"sendrecv":m.direction="sendrecv";break;case"recvonly":m.direction="sendonly";break;case"sendonly":m.direction="recvonly";break;case"inactive":m.direction="inactive"}c.headerExtensions.push(m)}return c},p.getRecvRtpCapabilities=function(d){const v={codecs:[],headerExtensions:[]};for(const c of d.codecs){const u={mimeType:c.mimeType,kind:c.kind,preferredPayloadType:c.remotePayloadType,clockRate:c.clockRate,channels:c.channels,parameters:c.localParameters,rtcpFeedback:c.rtcpFeedback};if(v.codecs.push(u),!c.remoteRtxPayloadType)continue;const l={mimeType:`${c.kind}/rtx`,kind:c.kind,preferredPayloadType:c.remoteRtxPayloadType,clockRate:c.clockRate,parameters:{apt:c.remotePayloadType},rtcpFeedback:[]};v.codecs.push(l)}for(const c of d.headerExtensions){if(c.direction!=="sendrecv"&&c.direction!=="recvonly")continue;const u={kind:c.kind,uri:c.uri,preferredId:c.recvId,preferredEncrypt:c.encrypt,direction:c.direction};v.headerExtensions.push(u)}return v},p.getSendingRtpParameters=function(d,v){const c={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const u of v.codecs){if(u.kind!==d)continue;const l={mimeType:u.mimeType,payloadType:u.localPayloadType,clockRate:u.clockRate,channels:u.channels,parameters:u.localParameters,rtcpFeedback:u.rtcpFeedback};if(c.codecs.push(l),u.localRtxPayloadType){const m={mimeType:`${u.kind}/rtx`,payloadType:u.localRtxPayloadType,clockRate:u.clockRate,parameters:{apt:u.localPayloadType},rtcpFeedback:[]};c.codecs.push(m)}}for(const u of v.headerExtensions){if(u.kind&&u.kind!==d||u.direction!=="sendrecv"&&u.direction!=="sendonly")continue;const l={uri:u.uri,id:u.sendId,encrypt:u.encrypt,parameters:{}};c.headerExtensions.push(l)}return c},p.getSendingRemoteRtpParameters=function(d,v){const c={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const u of v.codecs){if(u.kind!==d)continue;const l={mimeType:u.mimeType,payloadType:u.localPayloadType,clockRate:u.clockRate,channels:u.channels,parameters:u.remoteParameters,rtcpFeedback:u.rtcpFeedback};if(c.codecs.push(l),u.localRtxPayloadType){const m={mimeType:`${u.kind}/rtx`,payloadType:u.localRtxPayloadType,clockRate:u.clockRate,parameters:{apt:u.localPayloadType},rtcpFeedback:[]};c.codecs.push(m)}}for(const u of v.headerExtensions){if(u.kind&&u.kind!==d||u.direction!=="sendrecv"&&u.direction!=="sendonly")continue;const l={uri:u.uri,id:u.sendId,encrypt:u.encrypt,parameters:{}};c.headerExtensions.push(l)}if(c.headerExtensions.some(u=>u.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const u of c.codecs)u.rtcpFeedback=(u.rtcpFeedback||[]).filter(l=>l.type!=="goog-remb");else if(c.headerExtensions.some(u=>u.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const u of c.codecs)u.rtcpFeedback=(u.rtcpFeedback||[]).filter(l=>l.type!=="transport-cc");else for(const u of c.codecs)u.rtcpFeedback=(u.rtcpFeedback||[]).filter(l=>l.type!=="transport-cc"&&l.type!=="goog-remb");return c},p.reduceCodecs=function(d,v){const c=[];if(v){for(let u=0;u<d.length;++u)if(P(d[u],v,{strict:!0})){c.push(d[u]),O(d[u+1])&&c.push(d[u+1]);break}if(c.length===0)throw new TypeError("no matching codec found")}else c.push(d[0]),O(d[1])&&c.push(d[1]);return c},p.generateProbatorRtpParameters=function(d){f(d=k.clone(d));const v={mid:"probator",codecs:[],headerExtensions:[],encodings:[{ssrc:1234}],rtcp:{cname:"probator"}};return v.codecs.push(d.codecs[0]),v.codecs[0].payloadType=127,v.headerExtensions=d.headerExtensions,v},p.canSend=function(d,v){return v.codecs.some(c=>c.kind===d)},p.canReceive=function(d,v){if(f(d),d.codecs.length===0)return!1;const c=d.codecs[0];return v.codecs.some(u=>u.remotePayloadType===c.payloadType)}},3303:(E,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.parse=void 0;const o=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");p.parse=function(C){const _=o.exec(C||"");return _?{spatialLayers:Number(_[1]),temporalLayers:Number(_[2])}:{spatialLayers:1,temporalLayers:1}}},8057:function(E,p,o){var C=this&&this.__createBinding||(Object.create?function(h,b,k,f){f===void 0&&(f=k);var g=Object.getOwnPropertyDescriptor(b,k);g&&!("get"in g?!b.__esModule:g.writable||g.configurable)||(g={enumerable:!0,get:function(){return b[k]}}),Object.defineProperty(h,f,g)}:function(h,b,k,f){f===void 0&&(f=k),h[f]=b[k]}),_=this&&this.__exportStar||function(h,b){for(var k in h)k==="default"||Object.prototype.hasOwnProperty.call(b,k)||C(b,h,k)};Object.defineProperty(p,"__esModule",{value:!0}),_(o(6004),p),_(o(5601),p),_(o(9792),p),_(o(3518),p),_(o(7504),p),_(o(9166),p),_(o(5370),p),_(o(4160),p),_(o(521),p),_(o(4893),p)},1765:(E,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.deepFreeze=p.generateRandomNumber=p.clone=void 0,p.clone=function(o){return o===void 0?void 0:Number.isNaN(o)?NaN:typeof structuredClone=="function"?structuredClone(o):JSON.parse(JSON.stringify(o))},p.generateRandomNumber=function(){return Math.round(1e7*Math.random())},p.deepFreeze=function o(C){const _=Reflect.ownKeys(C);for(const h of _){const b=C[h];(b&&typeof b=="object"||typeof b=="function")&&o(b)}return Object.freeze(C)}},6585:E=>{var p=1e3,o=60*p,C=60*o,_=24*C,h=7*_,b=365.25*_;function k(f,g,s,w){var S=g>=1.5*s;return Math.round(f/s)+" "+w+(S?"s":"")}E.exports=function(f,g){g=g||{};var s=typeof f;if(s==="string"&&f.length>0)return function(w){if(!((w=String(w)).length>100)){var S=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(w);if(S){var T=parseFloat(S[1]);switch((S[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return T*b;case"weeks":case"week":case"w":return T*h;case"days":case"day":case"d":return T*_;case"hours":case"hour":case"hrs":case"hr":case"h":return T*C;case"minutes":case"minute":case"mins":case"min":case"m":return T*o;case"seconds":case"second":case"secs":case"sec":case"s":return T*p;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return T;default:return}}}}(f);if(s==="number"&&isFinite(f))return g.long?function(w){var S=Math.abs(w);return S>=_?k(w,S,_,"day"):S>=C?k(w,S,C,"hour"):S>=o?k(w,S,o,"minute"):S>=p?k(w,S,p,"second"):w+" ms"}(f):function(w){var S=Math.abs(w);return S>=_?Math.round(w/_)+"d":S>=C?Math.round(w/C)+"h":S>=o?Math.round(w/o)+"m":S>=p?Math.round(w/p)+"s":w+"ms"}(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))}},4252:(E,p,o)=>{const{EventEmitter:C}=o(7007),_=o(3612);E.exports=class extends C{constructor(h){super(),this.setMaxListeners(1/0),this._logger=h||new _("EnhancedEventEmitter")}safeEmit(h,...b){try{this.emit(h,...b)}catch(k){this._logger.error("safeEmit() | event listener threw an error [event:%s]:%o",h,k)}}async safeEmitAsPromise(h,...b){return new Promise((k,f)=>{this.safeEmit(h,...b,k,f)})}}},3612:(E,p,o)=>{const C=o(7833),_="protoo-client";E.exports=class{constructor(h){h?(this._debug=C(`${_}:${h}`),this._warn=C(`${_}:WARN:${h}`),this._error=C(`${_}:ERROR:${h}`)):(this._debug=C(_),this._warn=C(`${_}:WARN`),this._error=C(`${_}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},3241:(E,p,o)=>{const C=o(3612),{generateRandomNumber:_}=o(9007),h=new C("Message");E.exports=class{static parse(b){let k;const f={};try{k=JSON.parse(b)}catch(g){return void h.error("parse() | invalid JSON: %s",g)}if(typeof k=="object"&&!Array.isArray(k)){if(k.request){if(f.request=!0,typeof k.method!="string")return void h.error("parse() | missing/invalid method field");if(typeof k.id!="number")return void h.error("parse() | missing/invalid id field");f.id=k.id,f.method=k.method,f.data=k.data||{}}else if(k.response){if(f.response=!0,typeof k.id!="number")return void h.error("parse() | missing/invalid id field");f.id=k.id,k.ok?(f.ok=!0,f.data=k.data||{}):(f.ok=!1,f.errorCode=k.errorCode,f.errorReason=k.errorReason)}else{if(!k.notification)return void h.error("parse() | missing request/response field");if(f.notification=!0,typeof k.method!="string")return void h.error("parse() | missing/invalid method field");f.method=k.method,f.data=k.data||{}}return f}h.error("parse() | not an object")}static createRequest(b,k){return{request:!0,id:_(),method:b,data:k||{}}}static createSuccessResponse(b,k){return{response:!0,id:b.id,ok:!0,data:k||{}}}static createErrorResponse(b,k,f){return{response:!0,id:b.id,ok:!1,errorCode:k,errorReason:f}}static createNotification(b,k){return{notification:!0,method:b,data:k||{}}}}},7204:(E,p,o)=>{const C=o(3612),_=o(4252),h=o(3241),b=new C("Peer");E.exports=class extends _{constructor(k){super(b),b.debug("constructor()"),this._closed=!1,this._transport=k,this._connected=!1,this._data={},this._sents=new Map,this._handleTransport()}get closed(){return this._closed}get connected(){return this._connected}get data(){return this._data}set data(k){throw new Error("cannot override data object")}close(){if(!this._closed){b.debug("close()"),this._closed=!0,this._connected=!1,this._transport.close();for(const k of this._sents.values())k.close();this.safeEmit("close")}}async request(k,f=void 0){const g=h.createRequest(k,f);return this._logger.debug("request() [method:%s, id:%s]",k,g.id),await this._transport.send(g),new Promise((s,w)=>{const S=1500*(15+.1*this._sents.size),T={id:g.id,method:g.method,resolve:x=>{this._sents.delete(g.id)&&(clearTimeout(T.timer),s(x))},reject:x=>{this._sents.delete(g.id)&&(clearTimeout(T.timer),w(x))},timer:setTimeout(()=>{this._sents.delete(g.id)&&w(new Error("request timeout"))},S),close:()=>{clearTimeout(T.timer),w(new Error("peer closed"))}};this._sents.set(g.id,T)})}async notify(k,f=void 0){const g=h.createNotification(k,f);this._logger.debug("notify() [method:%s]",k),await this._transport.send(g)}_handleTransport(){if(this._transport.closed)return this._closed=!0,void setTimeout(()=>{this._closed||(this._connected=!1,this.safeEmit("close"))});this._transport.on("open",()=>{this._closed||(b.debug('emit "open"'),this._connected=!0,this.safeEmit("open"))}),this._transport.on("disconnected",()=>{this._closed||(b.debug('emit "disconnected"'),this._connected=!1,this.safeEmit("disconnected"))}),this._transport.on("failed",k=>{this._closed||(b.debug('emit "failed" [currentAttempt:%s]',k),this._connected=!1,this.safeEmit("failed",k))}),this._transport.on("close",()=>{this._closed||(this._closed=!0,b.debug('emit "close"'),this._connected=!1,this.safeEmit("close"))}),this._transport.on("message",k=>{k.request?this._handleRequest(k):k.response?this._handleResponse(k):k.notification&&this._handleNotification(k)})}_handleRequest(k){try{this.emit("request",k,f=>{const g=h.createSuccessResponse(k,f);this._transport.send(g).catch(()=>{})},(f,g)=>{f instanceof Error?(g=f.message,f=500):typeof f=="number"&&g instanceof Error&&(g=g.message);const s=h.createErrorResponse(k,f,g);this._transport.send(s).catch(()=>{})})}catch(f){const g=h.createErrorResponse(k,500,String(f));this._transport.send(g).catch(()=>{})}}_handleResponse(k){const f=this._sents.get(k.id);if(f)if(k.ok)f.resolve(k.data);else{const g=new Error(k.errorReason);g.code=k.errorCode,f.reject(g)}else b.error("received response does not match any sent request [id:%s]",k.id)}_handleNotification(k){this.safeEmit("notification",k)}}},9566:(E,p,o)=>{o(7949);const C=o(7204),_=o(3545);p.xM=C,p.TJ=_},3545:(E,p,o)=>{const C=o(952).w3cwebsocket,_=o(5617),h=o(3612),b=o(4252),k=o(3241),f={retries:10,factor:2,minTimeout:1e3,maxTimeout:8e3},g=new h("WebSocketTransport");E.exports=class extends b{constructor(s,w){super(g),g.debug("constructor() [url:%s, options:%o]",s,w),this._closed=!1,this._url=s,this._options=w||{},this._ws=null,this._runWebSocket()}get closed(){return this._closed}close(){if(!this._closed){g.debug("close()"),this._closed=!0,this.safeEmit("close");try{this._ws.onopen=null,this._ws.onclose=null,this._ws.onerror=null,this._ws.onmessage=null,this._ws.close()}catch(s){g.error("close() | error closing the WebSocket: %o",s)}}}async send(s){if(this._closed)throw new Error("transport closed");try{this._ws.send(JSON.stringify(s))}catch(w){throw g.warn("send() failed:%o",w),w}}_runWebSocket(){const s=_.operation(this._options.retry||f);let w=!1;s.attempt(S=>{this._closed?s.stop():(g.debug("_runWebSocket() [currentAttempt:%s]",S),this._ws=new C(this._url,"protoo",this._options.origin,this._options.headers,this._options.requestOptions,this._options.clientConfig),this._ws.onopen=()=>{this._closed||(w=!0,this.safeEmit("open"))},this._ws.onclose=T=>{if(!this._closed){if(g.warn('WebSocket "close" event [wasClean:%s, code:%s, reason:"%s"]',T.wasClean,T.code,T.reason),T.code!==4e3){if(w)return s.stop(),this.safeEmit("disconnected"),this._closed?void 0:void this._runWebSocket();if(this.safeEmit("failed",S),this._closed||s.retry(!0))return}this._closed=!0,this.safeEmit("close")}},this._ws.onerror=()=>{this._closed||g.error('WebSocket "error" event')},this._ws.onmessage=T=>{if(this._closed)return;const x=k.parse(T.data);x&&(this.listenerCount("message")!==0?this.safeEmit("message",x):g.error('no listeners for WebSocket "message" event, ignoring received message'))})})}}},9007:(E,p)=>{p.generateRandomNumber=function(){return Math.round(1e7*Math.random())}},9596:(E,p,o)=>{let C;E.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:o.g):_=>(C||(C=Promise.resolve())).then(_).catch(h=>setTimeout(()=>{throw h},0))},2211:E=>{E.exports=function(p){var o,C,_="",h=(p=function(k){return k||(k={}),{length:k.length||8,numeric:typeof k.numeric!="boolean"||k.numeric,letters:typeof k.letters!="boolean"||k.letters,special:typeof k.special=="boolean"&&k.special,exclude:Array.isArray(k.exclude)?k.exclude:[]}}(p)).length,b=(p.exclude,function(k){var f="";k.numeric&&(f+="0123456789"),k.letters&&(f+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"),k.special&&(f+="!$%^&*()_+|~-=`{}[]:;<>?,./");for(var g=0;g<=k.exclude.length;g++)f=f.replace(k.exclude[g],"");return f}(p));for(o=1;o<=h;o++)_+=b.substring(C=Math.floor(Math.random()*b.length),C+1);return _}},5617:(E,p,o)=>{E.exports=o(8303)},8303:(E,p,o)=>{var C=o(3961);p.operation=function(_){var h=p.timeouts(_);return new C(h,{forever:_&&_.forever,unref:_&&_.unref,maxRetryTime:_&&_.maxRetryTime})},p.timeouts=function(_){if(_ instanceof Array)return[].concat(_);var h={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var b in _)h[b]=_[b];if(h.minTimeout>h.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var k=[],f=0;f<h.retries;f++)k.push(this.createTimeout(f,h));return _&&_.forever&&!k.length&&k.push(this.createTimeout(f,h)),k.sort(function(g,s){return g-s}),k},p.createTimeout=function(_,h){var b=h.randomize?Math.random()+1:1,k=Math.round(b*h.minTimeout*Math.pow(h.factor,_));return k=Math.min(k,h.maxTimeout)},p.wrap=function(_,h,b){if(h instanceof Array&&(b=h,h=null),!b)for(var k in b=[],_)typeof _[k]=="function"&&b.push(k);for(var f=0;f<b.length;f++){var g=b[f],s=_[g];_[g]=(function(w){var S=p.operation(h),T=Array.prototype.slice.call(arguments,1),x=T.pop();T.push(function(O){S.retry(O)||(O&&(arguments[0]=S.mainError()),x.apply(this,arguments))}),S.attempt(function(){w.apply(_,T)})}).bind(_,s),_[g].options=h}}},3961:E=>{function p(o,C){typeof C=="boolean"&&(C={forever:C}),this._originalTimeouts=JSON.parse(JSON.stringify(o)),this._timeouts=o,this._options=C||{},this._maxRetryTime=C&&C.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}E.exports=p,p.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},p.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},p.prototype.retry=function(o){if(this._timeout&&clearTimeout(this._timeout),!o)return!1;var C=new Date().getTime();if(o&&C-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(o);var _=this._timeouts.shift();if(_===void 0){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),_=this._timeouts.shift()}var h=this,b=setTimeout(function(){h._attempts++,h._operationTimeoutCb&&(h._timeout=setTimeout(function(){h._operationTimeoutCb(h._attempts)},h._operationTimeout),h._options.unref&&h._timeout.unref()),h._fn(h._attempts)},_);return this._options.unref&&b.unref(),!0},p.prototype.attempt=function(o,C){this._fn=o,C&&(C.timeout&&(this._operationTimeout=C.timeout),C.cb&&(this._operationTimeoutCb=C.cb));var _=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){_._operationTimeoutCb()},_._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},p.prototype.try=function(o){console.log("Using RetryOperation.try() is deprecated"),this.attempt(o)},p.prototype.start=function(o){console.log("Using RetryOperation.start() is deprecated"),this.attempt(o)},p.prototype.start=p.prototype.try,p.prototype.errors=function(){return this._errors},p.prototype.attempts=function(){return this._attempts},p.prototype.mainError=function(){if(this._errors.length===0)return null;for(var o={},C=null,_=0,h=0;h<this._errors.length;h++){var b=this._errors[h],k=b.message,f=(o[k]||0)+1;o[k]=f,f>=_&&(C=b,_=f)}return C}},5602:E=>{var p=E.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(o){return o.encoding?"rtpmap:%d %s/%s/%s":o.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(o){return o.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(o){return o.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(o){return"extmap:%d"+(o.direction?"/%s":"%v")+(o["encrypt-uri"]?" %s":"%v")+" %s"+(o.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(o){return o.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(o){var C="candidate:%s %d %s %d %s %d typ %s";return C+=o.raddr!=null?" raddr %s rport %d":"%v%v",C+=o.tcptype!=null?" tcptype %s":"%v",o.generation!=null&&(C+=" generation %d"),C+=o["network-id"]!=null?" network-id %d":"%v",C+=o["network-cost"]!=null?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(o){var C="ssrc:%d";return o.attribute!=null&&(C+=" %s",o.value!=null&&(C+=":%s")),C}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(o){return o.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(o){return o.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(o){return"imageattr:%s %s %s"+(o.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(o){return"simulcast:%s %s"+(o.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(o){return"ts-refclk:%s"+(o.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(o){var C="mediaclk:";return C+=o.id!=null?"id=%s %s":"%v%s",C+=o.mediaClockValue!=null?"=%s":"",C+=o.rateNumerator!=null?" rate=%s":"",C+=o.rateDenominator!=null?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(p).forEach(function(o){p[o].forEach(function(C){C.reg||(C.reg=/(.*)/),C.format||(C.format="%s")})})},7363:(E,p,o)=>{var C=o(5020),_=o(3804);p.write=_,p.parse=C.parse,p.parseParams=C.parseParams,p.parseFmtpConfig=C.parseFmtpConfig,p.parsePayloads=C.parsePayloads,p.parseRemoteCandidates=C.parseRemoteCandidates,p.parseImageAttributes=C.parseImageAttributes,p.parseSimulcastStreamList=C.parseSimulcastStreamList},5020:(E,p,o)=>{var C=function(f){return String(Number(f))===f?Number(f):f},_=function(f,g,s){var w=f.name&&f.names;f.push&&!g[f.push]?g[f.push]=[]:w&&!g[f.name]&&(g[f.name]={});var S=f.push?{}:w?g[f.name]:g;(function(T,x,O,P){if(P&&!O)x[P]=C(T[1]);else for(var R=0;R<O.length;R+=1)T[R+1]!=null&&(x[O[R]]=C(T[R+1]))})(s.match(f.reg),S,f.names,f.name),f.push&&g[f.push].push(S)},h=o(5602),b=RegExp.prototype.test.bind(/^([a-z])=(.*)/);p.parse=function(f){var g={},s=[],w=g;return f.split(/(\r\n|\r|\n)/).filter(b).forEach(function(S){var T=S[0],x=S.slice(2);T==="m"&&(s.push({rtp:[],fmtp:[]}),w=s[s.length-1]);for(var O=0;O<(h[T]||[]).length;O+=1){var P=h[T][O];if(P.reg.test(x))return _(P,w,x)}}),g.media=s,g};var k=function(f,g){var s=g.split(/=(.+)/,2);return s.length===2?f[s[0]]=C(s[1]):s.length===1&&g.length>1&&(f[s[0]]=void 0),f};p.parseParams=function(f){return f.split(/;\s?/).reduce(k,{})},p.parseFmtpConfig=p.parseParams,p.parsePayloads=function(f){return f.toString().split(" ").map(Number)},p.parseRemoteCandidates=function(f){for(var g=[],s=f.split(" ").map(C),w=0;w<s.length;w+=3)g.push({component:s[w],ip:s[w+1],port:s[w+2]});return g},p.parseImageAttributes=function(f){return f.split(" ").map(function(g){return g.substring(1,g.length-1).split(",").reduce(k,{})})},p.parseSimulcastStreamList=function(f){return f.split(";").map(function(g){return g.split(",").map(function(s){var w,S=!1;return s[0]!=="~"?w=C(s):(w=C(s.substring(1,s.length)),S=!0),{scid:w,paused:S}})})}},3804:(E,p,o)=>{var C=o(5602),_=/%[sdv%]/g,h=function(g){var s=1,w=arguments,S=w.length;return g.replace(_,function(T){if(s>=S)return T;var x=w[s];switch(s+=1,T){case"%%":return"%";case"%s":return String(x);case"%d":return Number(x);case"%v":return""}})},b=function(g,s,w){var S=[g+"="+(s.format instanceof Function?s.format(s.push?w:w[s.name]):s.format)];if(s.names)for(var T=0;T<s.names.length;T+=1){var x=s.names[T];s.name?S.push(w[s.name][x]):S.push(w[s.names[T]])}else S.push(w[s.name]);return h.apply(null,S)},k=["v","o","s","i","u","e","p","c","b","t","r","z","a"],f=["i","c","b","a"];E.exports=function(g,s){s=s||{},g.version==null&&(g.version=0),g.name==null&&(g.name=" "),g.media.forEach(function(x){x.payloads==null&&(x.payloads="")});var w=s.outerOrder||k,S=s.innerOrder||f,T=[];return w.forEach(function(x){C[x].forEach(function(O){O.name in g&&g[O.name]!=null?T.push(b(x,O,g)):O.push in g&&g[O.push]!=null&&g[O.push].forEach(function(P){T.push(b(x,O,P))})})}),g.media.forEach(function(x){T.push(b("m",C.m[0],x)),S.forEach(function(O){C[O].forEach(function(P){P.name in x&&x[P.name]!=null?T.push(b(O,P,x)):P.push in x&&x[P.push]!=null&&x[P.push].forEach(function(R){T.push(b(O,P,R))})})})}),T.join(`\r
`)+`\r
`}},7232:function(E,p,o){var C;(function(_,h){var b="function",k="undefined",f="object",g="string",s="major",w="model",S="name",T="type",x="vendor",O="version",P="architecture",R="console",I="mobile",d="tablet",v="smarttv",c="wearable",u="embedded",l="Amazon",m="Apple",D="ASUS",N="BlackBerry",L="Browser",j="Chrome",V="Firefox",$="Google",Z="Huawei",ne="LG",pe="Microsoft",ge="Motorola",_e="Opera",Me="Samsung",me="Sharp",oe="Sony",ve="Xiaomi",we="Zebra",be="Facebook",lt="Chromium OS",Ot="Mac OS",Yt=" Browser",vt=function(er){for(var Ze={},Ut=0;Ut<er.length;Ut++)Ze[er[Ut].toUpperCase()]=er[Ut];return Ze},Mr=function(er,Ze){return typeof er===g&&Kt(Ze).indexOf(Kt(er))!==-1},Kt=function(er){return er.toLowerCase()},At=function(er,Ze){if(typeof er===g)return er=er.replace(/^\s\s*/,""),typeof Ze===k?er:er.substring(0,500)},Ar=function(er,Ze){for(var Ut,hr,Fe,st,tr,Tt,sr=0;sr<Ze.length&&!tr;){var Zr=Ze[sr],sn=Ze[sr+1];for(Ut=hr=0;Ut<Zr.length&&!tr&&Zr[Ut];)if(tr=Zr[Ut++].exec(er))for(Fe=0;Fe<sn.length;Fe++)Tt=tr[++hr],typeof(st=sn[Fe])===f&&st.length>0?st.length===2?typeof st[1]==b?this[st[0]]=st[1].call(this,Tt):this[st[0]]=st[1]:st.length===3?typeof st[1]!==b||st[1].exec&&st[1].test?this[st[0]]=Tt?Tt.replace(st[1],st[2]):h:this[st[0]]=Tt?st[1].call(this,Tt,st[2]):h:st.length===4&&(this[st[0]]=Tt?st[3].call(this,Tt.replace(st[1],st[2])):h):this[st]=Tt||h;sr+=2}},Dt=function(er,Ze){for(var Ut in Ze)if(typeof Ze[Ut]===f&&Ze[Ut].length>0){for(var hr=0;hr<Ze[Ut].length;hr++)if(Mr(Ze[Ut][hr],er))return Ut==="?"?h:Ut}else if(Mr(Ze[Ut],er))return Ut==="?"?h:Ut;return Ze.hasOwnProperty("*")?Ze["*"]:er},Xt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},hn={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[O,[S,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[O,[S,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[S,O],[/opios[\/ ]+([\w\.]+)/i],[O,[S,_e+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[O,[S,_e+" GX"]],[/\bopr\/([\w\.]+)/i],[O,[S,_e]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[O,[S,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[S,O],[/quark(?:pc)?\/([-\w\.]+)/i],[O,[S,"Quark"]],[/\bddg\/([\w\.]+)/i],[O,[S,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[O,[S,"UC"+L]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[O,[S,"WeChat"]],[/konqueror\/([\w\.]+)/i],[O,[S,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[O,[S,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[O,[S,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[O,[S,"Smart Lenovo "+L]],[/(avast|avg)\/([\w\.]+)/i],[[S,/(.+)/,"$1 Secure "+L],O],[/\bfocus\/([\w\.]+)/i],[O,[S,V+" Focus"]],[/\bopt\/([\w\.]+)/i],[O,[S,_e+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[O,[S,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[O,[S,"Dolphin"]],[/coast\/([\w\.]+)/i],[O,[S,_e+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[O,[S,"MIUI "+L]],[/fxios\/([-\w\.]+)/i],[O,[S,V]],[/\bqihu|(qi?ho?o?|360)browser/i],[[S,"360"+Yt]],[/\b(qq)\/([\w\.]+)/i],[[S,/(.+)/,"$1Browser"],O],[/(oculus|sailfish|huawei|vivo|pico)browser\/([\w\.]+)/i],[[S,/(.+)/,"$1"+Yt],O],[/samsungbrowser\/([\w\.]+)/i],[O,[S,Me+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[S,/_/g," "],O],[/metasr[\/ ]?([\d\.]+)/i],[O,[S,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[S,"Sogou Mobile"],O],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[S,O],[/(lbbrowser|rekonq)/i,/\[(linkedin)app\]/i],[S],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[S,be],O],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[S,O],[/\bgsa\/([\w\.]+) .*safari\//i],[O,[S,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[O,[S,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[O,[S,j+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[S,j+" WebView"],O],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[O,[S,"Android "+L]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[S,O],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[O,[S,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[O,S],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[S,[O,Dt,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[S,O],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[S,"Netscape"],O],[/(wolvic)\/([\w\.]+)/i],[S,O],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[O,[S,V+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i],[S,[O,/_/g,"."]],[/(cobalt)\/([\w\.]+)/i],[S,[O,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[P,"amd64"]],[/(ia32(?=;))/i],[[P,Kt]],[/((?:i[346]|x)86)[;\)]/i],[[P,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[P,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[P,"armhf"]],[/windows (ce|mobile); ppc;/i],[[P,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[P,/ower/,"",Kt]],[/(sun4\w)[;\)]/i],[[P,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[P,Kt]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[w,[x,Me],[T,d]],[/\b((?:s[cgp]h|gt|sm)-(?![lr])\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]((?!sm-[lr])[-\w]+)/i,/sec-(sgh\w+)/i],[w,[x,Me],[T,I]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[w,[x,m],[T,I]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[w,[x,m],[T,d]],[/(macintosh);/i],[w,[x,m]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[w,[x,me],[T,I]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[w,[x,Z],[T,d]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[w,[x,Z],[T,I]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\))/i],[[w,/_/g," "],[x,ve],[T,I]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[w,/_/g," "],[x,ve],[T,d]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[w,[x,"OPPO"],[T,I]],[/\b(opd2\d{3}a?) bui/i],[w,[x,"OPPO"],[T,d]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[w,[x,"Vivo"],[T,I]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[w,[x,"Realme"],[T,I]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[w,[x,ge],[T,I]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[w,[x,ge],[T,d]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[w,[x,ne],[T,d]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[w,[x,ne],[T,I]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[w,[x,"Lenovo"],[T,d]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[w,/_/g," "],[x,"Nokia"],[T,I]],[/(pixel c)\b/i],[w,[x,$],[T,d]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[w,[x,$],[T,I]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[w,[x,oe],[T,I]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[w,"Xperia Tablet"],[x,oe],[T,d]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[w,[x,"OnePlus"],[T,I]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo(?!bc)\w\w)( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[w,[x,l],[T,d]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[w,/(.+)/g,"Fire Phone $1"],[x,l],[T,I]],[/(playbook);[-\w\),; ]+(rim)/i],[w,x,[T,d]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[w,[x,N],[T,I]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[w,[x,D],[T,d]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[w,[x,D],[T,I]],[/(nexus 9)/i],[w,[x,"HTC"],[T,d]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[x,[w,/_/g," "],[T,I]],[/droid [\w\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])\w*(\)| bui)/i],[w,[x,"TCL"],[T,d]],[/(itel) ((\w+))/i],[[x,Kt],w,[T,Dt,{tablet:["p10001l","w7001"],"*":"mobile"}]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[w,[x,"Acer"],[T,d]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[w,[x,"Meizu"],[T,I]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[w,[x,"Ulefone"],[T,I]],[/droid.+; (a(?:015|06[35]|142p?))/i],[w,[x,"Nothing"],[T,I]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[x,w,[T,I]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[x,w,[T,d]],[/(surface duo)/i],[w,[x,pe],[T,d]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[w,[x,"Fairphone"],[T,I]],[/(u304aa)/i],[w,[x,"AT&T"],[T,I]],[/\bsie-(\w*)/i],[w,[x,"Siemens"],[T,I]],[/\b(rct\w+) b/i],[w,[x,"RCA"],[T,d]],[/\b(venue[\d ]{2,7}) b/i],[w,[x,"Dell"],[T,d]],[/\b(q(?:mv|ta)\w+) b/i],[w,[x,"Verizon"],[T,d]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[w,[x,"Barnes & Noble"],[T,d]],[/\b(tm\d{3}\w+) b/i],[w,[x,"NuVision"],[T,d]],[/\b(k88) b/i],[w,[x,"ZTE"],[T,d]],[/\b(nx\d{3}j) b/i],[w,[x,"ZTE"],[T,I]],[/\b(gen\d{3}) b.+49h/i],[w,[x,"Swiss"],[T,I]],[/\b(zur\d{3}) b/i],[w,[x,"Swiss"],[T,d]],[/\b((zeki)?tb.*\b) b/i],[w,[x,"Zeki"],[T,d]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[x,"Dragon Touch"],w,[T,d]],[/\b(ns-?\w{0,9}) b/i],[w,[x,"Insignia"],[T,d]],[/\b((nxa|next)-?\w{0,9}) b/i],[w,[x,"NextBook"],[T,d]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[x,"Voice"],w,[T,I]],[/\b(lvtel\-)?(v1[12]) b/i],[[x,"LvTel"],w,[T,I]],[/\b(ph-1) /i],[w,[x,"Essential"],[T,I]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[w,[x,"Envizen"],[T,d]],[/\b(trio[-\w\. ]+) b/i],[w,[x,"MachSpeed"],[T,d]],[/\btu_(1491) b/i],[w,[x,"Rotor"],[T,d]],[/(shield[\w ]+) b/i],[w,[x,"Nvidia"],[T,d]],[/(sprint) (\w+)/i],[x,w,[T,I]],[/(kin\.[onetw]{3})/i],[[w,/\./g," "],[x,pe],[T,I]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[w,[x,we],[T,d]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[w,[x,we],[T,I]],[/smart-tv.+(samsung)/i],[x,[T,v]],[/hbbtv.+maple;(\d+)/i],[[w,/^/,"SmartTV"],[x,Me],[T,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[x,ne],[T,v]],[/(apple) ?tv/i],[x,[w,m+" TV"],[T,v]],[/crkey/i],[[w,j+"cast"],[x,$],[T,v]],[/droid.+aft(\w+)( bui|\))/i],[w,[x,l],[T,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[w,[x,me],[T,v]],[/(bravia[\w ]+)( bui|\))/i],[w,[x,oe],[T,v]],[/(mitv-\w{5}) bui/i],[w,[x,ve],[T,v]],[/Hbbtv.*(technisat) (.*);/i],[x,w,[T,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[x,At],[w,At],[T,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[T,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[x,w,[T,R]],[/droid.+; (shield) bui/i],[w,[x,"Nvidia"],[T,R]],[/(playstation [345portablevi]+)/i],[w,[x,oe],[T,R]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[w,[x,pe],[T,R]],[/\b(sm-[lr]\d\d[05][fnuw]?s?)\b/i],[w,[x,Me],[T,c]],[/((pebble))app/i],[x,w,[T,c]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[w,[x,m],[T,c]],[/droid.+; (glass) \d/i],[w,[x,$],[T,c]],[/droid.+; (wt63?0{2,3})\)/i],[w,[x,we],[T,c]],[/(quest( \d| pro)?)/i],[w,[x,be],[T,c]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[x,[T,u]],[/(aeobc)\b/i],[w,[x,l],[T,u]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[w,[T,I]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[w,[T,d]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[T,d]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[T,I]],[/(android[-\w\. ]{0,9});.+buil/i],[w,[x,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[O,[S,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[O,[S,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[S,O],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[O,S]],os:[[/microsoft (windows) (vista|xp)/i],[S,O],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[S,[O,Dt,Xt]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[O,Dt,Xt],[S,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[O,/_/g,"."],[S,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[S,Ot],[O,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[O,S],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[S,O],[/\(bb(10);/i],[O,[S,N]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[O,[S,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[O,[S,V+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[O,[S,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[O,[S,"watchOS"]],[/crkey\/([\d\.]+)/i],[O,[S,j+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[S,lt],O],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[S,O],[/(sunos) ?([\w\.\d]*)/i],[[S,"Solaris"],O],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[S,O]]},kr=function(er,Ze){if(typeof er===f&&(Ze=er,er=h),!(this instanceof kr))return new kr(er,Ze).getResult();var Ut=typeof _!==k&&_.navigator?_.navigator:h,hr=er||(Ut&&Ut.userAgent?Ut.userAgent:""),Fe=Ut&&Ut.userAgentData?Ut.userAgentData:h,st=Ze?function(Tt,sr){var Zr={};for(var sn in Tt)sr[sn]&&sr[sn].length%2==0?Zr[sn]=sr[sn].concat(Tt[sn]):Zr[sn]=Tt[sn];return Zr}(hn,Ze):hn,tr=Ut&&Ut.userAgent==hr;return this.getBrowser=function(){var Tt,sr={};return sr[S]=h,sr[O]=h,Ar.call(sr,hr,st.browser),sr[s]=typeof(Tt=sr[O])===g?Tt.replace(/[^\d\.]/g,"").split(".")[0]:h,tr&&Ut&&Ut.brave&&typeof Ut.brave.isBrave==b&&(sr[S]="Brave"),sr},this.getCPU=function(){var Tt={};return Tt[P]=h,Ar.call(Tt,hr,st.cpu),Tt},this.getDevice=function(){var Tt={};return Tt[x]=h,Tt[w]=h,Tt[T]=h,Ar.call(Tt,hr,st.device),tr&&!Tt[T]&&Fe&&Fe.mobile&&(Tt[T]=I),tr&&Tt[w]=="Macintosh"&&Ut&&typeof Ut.standalone!==k&&Ut.maxTouchPoints&&Ut.maxTouchPoints>2&&(Tt[w]="iPad",Tt[T]=d),Tt},this.getEngine=function(){var Tt={};return Tt[S]=h,Tt[O]=h,Ar.call(Tt,hr,st.engine),Tt},this.getOS=function(){var Tt={};return Tt[S]=h,Tt[O]=h,Ar.call(Tt,hr,st.os),tr&&!Tt[S]&&Fe&&Fe.platform&&Fe.platform!="Unknown"&&(Tt[S]=Fe.platform.replace(/chrome os/i,lt).replace(/macos/i,Ot)),Tt},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return hr},this.setUA=function(Tt){return hr=typeof Tt===g&&Tt.length>500?At(Tt,500):Tt,this},this.setUA(hr),this};kr.VERSION="1.0.39",kr.BROWSER=vt([S,O,s]),kr.CPU=vt([P]),kr.DEVICE=vt([w,x,T,R,I,v,d,c,u]),kr.ENGINE=kr.OS=vt([S,O]),typeof p!==k?(E.exports&&(p=E.exports=kr),p.UAParser=kr):o.amdO?(C=(function(){return kr}).call(p,o,p,E))===h||(E.exports=C):typeof _!==k&&(_.UAParser=kr);var Lr=typeof _!==k&&(_.jQuery||_.Zepto);if(Lr&&!Lr.ua){var Jr=new kr;Lr.ua=Jr.getResult(),Lr.ua.get=function(){return Jr.getUA()},Lr.ua.set=function(er){Jr.setUA(er);var Ze=Jr.getResult();for(var Ut in Ze)Lr.ua[Ut]=Ze[Ut]}}})(typeof window=="object"?window:this)},952:(E,p,o)=>{var C;if(typeof globalThis=="object")C=globalThis;else try{C=o(4903)}catch{}finally{if(C||typeof window>"u"||(C=window),!C)throw new Error("Could not determine global this")}var _=C.WebSocket||C.MozWebSocket,h=o(9840);function b(k,f){return f?new _(k,f):new _(k)}_&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(k){Object.defineProperty(b,k,{get:function(){return _[k]}})}),E.exports={w3cwebsocket:_?b:null,version:h}},9840:(E,p,o)=>{E.exports=o(9003).version},8624:(E,p,o)=>{o.r(p),o.d(p,{DOMException:()=>c,Headers:()=>s,Request:()=>R,Response:()=>d,fetch:()=>u});var C=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||o.g!==void 0&&o.g||{},_={searchParams:"URLSearchParams"in C,iterable:"Symbol"in C&&"iterator"in Symbol,blob:"FileReader"in C&&"Blob"in C&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in C,arrayBuffer:"ArrayBuffer"in C};if(_.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],b=ArrayBuffer.isView||function(l){return l&&h.indexOf(Object.prototype.toString.call(l))>-1};function k(l){if(typeof l!="string"&&(l=String(l)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(l)||l==="")throw new TypeError('Invalid character in header field name: "'+l+'"');return l.toLowerCase()}function f(l){return typeof l!="string"&&(l=String(l)),l}function g(l){var m={next:function(){var D=l.shift();return{done:D===void 0,value:D}}};return _.iterable&&(m[Symbol.iterator]=function(){return m}),m}function s(l){this.map={},l instanceof s?l.forEach(function(m,D){this.append(D,m)},this):Array.isArray(l)?l.forEach(function(m){if(m.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+m.length);this.append(m[0],m[1])},this):l&&Object.getOwnPropertyNames(l).forEach(function(m){this.append(m,l[m])},this)}function w(l){if(!l._noBody)return l.bodyUsed?Promise.reject(new TypeError("Already read")):void(l.bodyUsed=!0)}function S(l){return new Promise(function(m,D){l.onload=function(){m(l.result)},l.onerror=function(){D(l.error)}})}function T(l){var m=new FileReader,D=S(m);return m.readAsArrayBuffer(l),D}function x(l){if(l.slice)return l.slice(0);var m=new Uint8Array(l.byteLength);return m.set(new Uint8Array(l)),m.buffer}function O(){return this.bodyUsed=!1,this._initBody=function(l){var m;this.bodyUsed=this.bodyUsed,this._bodyInit=l,l?typeof l=="string"?this._bodyText=l:_.blob&&Blob.prototype.isPrototypeOf(l)?this._bodyBlob=l:_.formData&&FormData.prototype.isPrototypeOf(l)?this._bodyFormData=l:_.searchParams&&URLSearchParams.prototype.isPrototypeOf(l)?this._bodyText=l.toString():_.arrayBuffer&&_.blob&&(m=l)&&DataView.prototype.isPrototypeOf(m)?(this._bodyArrayBuffer=x(l.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):_.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(l)||b(l))?this._bodyArrayBuffer=x(l):this._bodyText=l=Object.prototype.toString.call(l):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof l=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(l)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob&&(this.blob=function(){var l=w(this);if(l)return l;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var l=w(this);return l||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(_.blob)return this.blob().then(T);throw new Error("could not read as ArrayBuffer")},this.text=function(){var l,m,D,N,L,j=w(this);if(j)return j;if(this._bodyBlob)return l=this._bodyBlob,m=new FileReader,D=S(m),N=/charset=([A-Za-z0-9_-]+)/.exec(l.type),L=N?N[1]:"utf-8",m.readAsText(l,L),D;if(this._bodyArrayBuffer)return Promise.resolve(function(V){for(var $=new Uint8Array(V),Z=new Array($.length),ne=0;ne<$.length;ne++)Z[ne]=String.fromCharCode($[ne]);return Z.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(I)}),this.json=function(){return this.text().then(JSON.parse)},this}s.prototype.append=function(l,m){l=k(l),m=f(m);var D=this.map[l];this.map[l]=D?D+", "+m:m},s.prototype.delete=function(l){delete this.map[k(l)]},s.prototype.get=function(l){return l=k(l),this.has(l)?this.map[l]:null},s.prototype.has=function(l){return this.map.hasOwnProperty(k(l))},s.prototype.set=function(l,m){this.map[k(l)]=f(m)},s.prototype.forEach=function(l,m){for(var D in this.map)this.map.hasOwnProperty(D)&&l.call(m,this.map[D],D,this)},s.prototype.keys=function(){var l=[];return this.forEach(function(m,D){l.push(D)}),g(l)},s.prototype.values=function(){var l=[];return this.forEach(function(m){l.push(m)}),g(l)},s.prototype.entries=function(){var l=[];return this.forEach(function(m,D){l.push([D,m])}),g(l)},_.iterable&&(s.prototype[Symbol.iterator]=s.prototype.entries);var P=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function R(l,m){if(!(this instanceof R))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var D,N,L=(m=m||{}).body;if(l instanceof R){if(l.bodyUsed)throw new TypeError("Already read");this.url=l.url,this.credentials=l.credentials,m.headers||(this.headers=new s(l.headers)),this.method=l.method,this.mode=l.mode,this.signal=l.signal,L||l._bodyInit==null||(L=l._bodyInit,l.bodyUsed=!0)}else this.url=String(l);if(this.credentials=m.credentials||this.credentials||"same-origin",!m.headers&&this.headers||(this.headers=new s(m.headers)),this.method=(D=m.method||this.method||"GET",N=D.toUpperCase(),P.indexOf(N)>-1?N:D),this.mode=m.mode||this.mode||null,this.signal=m.signal||this.signal||function(){if("AbortController"in C)return new AbortController().signal}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(L),!(this.method!=="GET"&&this.method!=="HEAD"||m.cache!=="no-store"&&m.cache!=="no-cache")){var j=/([?&])_=[^&]*/;j.test(this.url)?this.url=this.url.replace(j,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function I(l){var m=new FormData;return l.trim().split("&").forEach(function(D){if(D){var N=D.split("="),L=N.shift().replace(/\+/g," "),j=N.join("=").replace(/\+/g," ");m.append(decodeURIComponent(L),decodeURIComponent(j))}}),m}function d(l,m){if(!(this instanceof d))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(m||(m={}),this.type="default",this.status=m.status===void 0?200:m.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=m.statusText===void 0?"":""+m.statusText,this.headers=new s(m.headers),this.url=m.url||"",this._initBody(l)}R.prototype.clone=function(){return new R(this,{body:this._bodyInit})},O.call(R.prototype),O.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},d.error=function(){var l=new d(null,{status:200,statusText:""});return l.ok=!1,l.status=0,l.type="error",l};var v=[301,302,303,307,308];d.redirect=function(l,m){if(v.indexOf(m)===-1)throw new RangeError("Invalid status code");return new d(null,{status:m,headers:{location:l}})};var c=C.DOMException;try{new c}catch{(c=function(m,D){this.message=m,this.name=D;var N=Error(m);this.stack=N.stack}).prototype=Object.create(Error.prototype),c.prototype.constructor=c}function u(l,m){return new Promise(function(D,N){var L=new R(l,m);if(L.signal&&L.signal.aborted)return N(new c("Aborted","AbortError"));var j=new XMLHttpRequest;function V(){j.abort()}if(j.onload=function(){var Z,ne,pe={statusText:j.statusText,headers:(Z=j.getAllResponseHeaders()||"",ne=new s,Z.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(_e){return _e.indexOf(`
`)===0?_e.substr(1,_e.length):_e}).forEach(function(_e){var Me=_e.split(":"),me=Me.shift().trim();if(me){var oe=Me.join(":").trim();try{ne.append(me,oe)}catch(ve){console.warn("Response "+ve.message)}}}),ne)};L.url.indexOf("file://")===0&&(j.status<200||j.status>599)?pe.status=200:pe.status=j.status,pe.url="responseURL"in j?j.responseURL:pe.headers.get("X-Request-URL");var ge="response"in j?j.response:j.responseText;setTimeout(function(){D(new d(ge,pe))},0)},j.onerror=function(){setTimeout(function(){N(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){N(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){N(new c("Aborted","AbortError"))},0)},j.open(L.method,function(Z){try{return Z===""&&C.location.href?C.location.href:Z}catch{return Z}}(L.url),!0),L.credentials==="include"?j.withCredentials=!0:L.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(_.blob?j.responseType="blob":_.arrayBuffer&&(j.responseType="arraybuffer")),m&&typeof m.headers=="object"&&!(m.headers instanceof s||C.Headers&&m.headers instanceof C.Headers)){var $=[];Object.getOwnPropertyNames(m.headers).forEach(function(Z){$.push(k(Z)),j.setRequestHeader(Z,f(m.headers[Z]))}),L.headers.forEach(function(Z,ne){$.indexOf(ne)===-1&&j.setRequestHeader(ne,Z)})}else L.headers.forEach(function(Z,ne){j.setRequestHeader(ne,Z)});L.signal&&(L.signal.addEventListener("abort",V),j.onreadystatechange=function(){j.readyState===4&&L.signal.removeEventListener("abort",V)}),j.send(L._bodyInit===void 0?null:L._bodyInit)})}u.polyfill=!0,C.fetch||(C.fetch=u,C.Headers=s,C.Request=R,C.Response=d)},477:()=>{},4633:(E,p,o)=>{var C=o(3738).default;function _(){E.exports=_=function(){return b},E.exports.__esModule=!0,E.exports.default=E.exports;var h,b={},k=Object.prototype,f=k.hasOwnProperty,g=Object.defineProperty||function(me,oe,ve){me[oe]=ve.value},s=typeof Symbol=="function"?Symbol:{},w=s.iterator||"@@iterator",S=s.asyncIterator||"@@asyncIterator",T=s.toStringTag||"@@toStringTag";function x(me,oe,ve){return Object.defineProperty(me,oe,{value:ve,enumerable:!0,configurable:!0,writable:!0}),me[oe]}try{x({},"")}catch{x=function(oe,ve,we){return oe[ve]=we}}function O(me,oe,ve,we){var be=oe&&oe.prototype instanceof u?oe:u,lt=Object.create(be.prototype),Ot=new _e(we||[]);return g(lt,"_invoke",{value:Z(me,ve,Ot)}),lt}function P(me,oe,ve){try{return{type:"normal",arg:me.call(oe,ve)}}catch(we){return{type:"throw",arg:we}}}b.wrap=O;var R="suspendedStart",I="suspendedYield",d="executing",v="completed",c={};function u(){}function l(){}function m(){}var D={};x(D,w,function(){return this});var N=Object.getPrototypeOf,L=N&&N(N(Me([])));L&&L!==k&&f.call(L,w)&&(D=L);var j=m.prototype=u.prototype=Object.create(D);function V(me){["next","throw","return"].forEach(function(oe){x(me,oe,function(ve){return this._invoke(oe,ve)})})}function $(me,oe){function ve(be,lt,Ot,Yt){var vt=P(me[be],me,lt);if(vt.type!=="throw"){var Mr=vt.arg,Kt=Mr.value;return Kt&&C(Kt)=="object"&&f.call(Kt,"__await")?oe.resolve(Kt.__await).then(function(At){ve("next",At,Ot,Yt)},function(At){ve("throw",At,Ot,Yt)}):oe.resolve(Kt).then(function(At){Mr.value=At,Ot(Mr)},function(At){return ve("throw",At,Ot,Yt)})}Yt(vt.arg)}var we;g(this,"_invoke",{value:function(be,lt){function Ot(){return new oe(function(Yt,vt){ve(be,lt,Yt,vt)})}return we=we?we.then(Ot,Ot):Ot()}})}function Z(me,oe,ve){var we=R;return function(be,lt){if(we===d)throw Error("Generator is already running");if(we===v){if(be==="throw")throw lt;return{value:h,done:!0}}for(ve.method=be,ve.arg=lt;;){var Ot=ve.delegate;if(Ot){var Yt=ne(Ot,ve);if(Yt){if(Yt===c)continue;return Yt}}if(ve.method==="next")ve.sent=ve._sent=ve.arg;else if(ve.method==="throw"){if(we===R)throw we=v,ve.arg;ve.dispatchException(ve.arg)}else ve.method==="return"&&ve.abrupt("return",ve.arg);we=d;var vt=P(me,oe,ve);if(vt.type==="normal"){if(we=ve.done?v:I,vt.arg===c)continue;return{value:vt.arg,done:ve.done}}vt.type==="throw"&&(we=v,ve.method="throw",ve.arg=vt.arg)}}}function ne(me,oe){var ve=oe.method,we=me.iterator[ve];if(we===h)return oe.delegate=null,ve==="throw"&&me.iterator.return&&(oe.method="return",oe.arg=h,ne(me,oe),oe.method==="throw")||ve!=="return"&&(oe.method="throw",oe.arg=new TypeError("The iterator does not provide a '"+ve+"' method")),c;var be=P(we,me.iterator,oe.arg);if(be.type==="throw")return oe.method="throw",oe.arg=be.arg,oe.delegate=null,c;var lt=be.arg;return lt?lt.done?(oe[me.resultName]=lt.value,oe.next=me.nextLoc,oe.method!=="return"&&(oe.method="next",oe.arg=h),oe.delegate=null,c):lt:(oe.method="throw",oe.arg=new TypeError("iterator result is not an object"),oe.delegate=null,c)}function pe(me){var oe={tryLoc:me[0]};1 in me&&(oe.catchLoc=me[1]),2 in me&&(oe.finallyLoc=me[2],oe.afterLoc=me[3]),this.tryEntries.push(oe)}function ge(me){var oe=me.completion||{};oe.type="normal",delete oe.arg,me.completion=oe}function _e(me){this.tryEntries=[{tryLoc:"root"}],me.forEach(pe,this),this.reset(!0)}function Me(me){if(me||me===""){var oe=me[w];if(oe)return oe.call(me);if(typeof me.next=="function")return me;if(!isNaN(me.length)){var ve=-1,we=function be(){for(;++ve<me.length;)if(f.call(me,ve))return be.value=me[ve],be.done=!1,be;return be.value=h,be.done=!0,be};return we.next=we}}throw new TypeError(C(me)+" is not iterable")}return l.prototype=m,g(j,"constructor",{value:m,configurable:!0}),g(m,"constructor",{value:l,configurable:!0}),l.displayName=x(m,T,"GeneratorFunction"),b.isGeneratorFunction=function(me){var oe=typeof me=="function"&&me.constructor;return!!oe&&(oe===l||(oe.displayName||oe.name)==="GeneratorFunction")},b.mark=function(me){return Object.setPrototypeOf?Object.setPrototypeOf(me,m):(me.__proto__=m,x(me,T,"GeneratorFunction")),me.prototype=Object.create(j),me},b.awrap=function(me){return{__await:me}},V($.prototype),x($.prototype,S,function(){return this}),b.AsyncIterator=$,b.async=function(me,oe,ve,we,be){be===void 0&&(be=Promise);var lt=new $(O(me,oe,ve,we),be);return b.isGeneratorFunction(oe)?lt:lt.next().then(function(Ot){return Ot.done?Ot.value:lt.next()})},V(j),x(j,T,"Generator"),x(j,w,function(){return this}),x(j,"toString",function(){return"[object Generator]"}),b.keys=function(me){var oe=Object(me),ve=[];for(var we in oe)ve.push(we);return ve.reverse(),function be(){for(;ve.length;){var lt=ve.pop();if(lt in oe)return be.value=lt,be.done=!1,be}return be.done=!0,be}},b.values=Me,_e.prototype={constructor:_e,reset:function(me){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(ge),!me)for(var oe in this)oe.charAt(0)==="t"&&f.call(this,oe)&&!isNaN(+oe.slice(1))&&(this[oe]=h)},stop:function(){this.done=!0;var me=this.tryEntries[0].completion;if(me.type==="throw")throw me.arg;return this.rval},dispatchException:function(me){if(this.done)throw me;var oe=this;function ve(vt,Mr){return lt.type="throw",lt.arg=me,oe.next=vt,Mr&&(oe.method="next",oe.arg=h),!!Mr}for(var we=this.tryEntries.length-1;we>=0;--we){var be=this.tryEntries[we],lt=be.completion;if(be.tryLoc==="root")return ve("end");if(be.tryLoc<=this.prev){var Ot=f.call(be,"catchLoc"),Yt=f.call(be,"finallyLoc");if(Ot&&Yt){if(this.prev<be.catchLoc)return ve(be.catchLoc,!0);if(this.prev<be.finallyLoc)return ve(be.finallyLoc)}else if(Ot){if(this.prev<be.catchLoc)return ve(be.catchLoc,!0)}else{if(!Yt)throw Error("try statement without catch or finally");if(this.prev<be.finallyLoc)return ve(be.finallyLoc)}}}},abrupt:function(me,oe){for(var ve=this.tryEntries.length-1;ve>=0;--ve){var we=this.tryEntries[ve];if(we.tryLoc<=this.prev&&f.call(we,"finallyLoc")&&this.prev<we.finallyLoc){var be=we;break}}be&&(me==="break"||me==="continue")&&be.tryLoc<=oe&&oe<=be.finallyLoc&&(be=null);var lt=be?be.completion:{};return lt.type=me,lt.arg=oe,be?(this.method="next",this.next=be.finallyLoc,c):this.complete(lt)},complete:function(me,oe){if(me.type==="throw")throw me.arg;return me.type==="break"||me.type==="continue"?this.next=me.arg:me.type==="return"?(this.rval=this.arg=me.arg,this.method="return",this.next="end"):me.type==="normal"&&oe&&(this.next=oe),c},finish:function(me){for(var oe=this.tryEntries.length-1;oe>=0;--oe){var ve=this.tryEntries[oe];if(ve.finallyLoc===me)return this.complete(ve.completion,ve.afterLoc),ge(ve),c}},catch:function(me){for(var oe=this.tryEntries.length-1;oe>=0;--oe){var ve=this.tryEntries[oe];if(ve.tryLoc===me){var we=ve.completion;if(we.type==="throw"){var be=we.arg;ge(ve)}return be}}throw Error("illegal catch attempt")},delegateYield:function(me,oe,ve){return this.delegate={iterator:Me(me),resultName:oe,nextLoc:ve},this.method==="next"&&(this.arg=h),c}},b}E.exports=_,E.exports.__esModule=!0,E.exports.default=E.exports},3738:E=>{function p(o){return E.exports=p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},E.exports.__esModule=!0,E.exports.default=E.exports,p(o)}E.exports=p,E.exports.__esModule=!0,E.exports.default=E.exports},4756:(E,p,o)=>{var C=o(4633)();E.exports=C;try{regeneratorRuntime=C}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=C:Function("r","regeneratorRuntime = r")(C)}},3145:(E,p,o)=>{function C(_,h){(h==null||h>_.length)&&(h=_.length);for(var b=0,k=Array(h);b<h;b++)k[b]=_[b];return k}o.d(p,{A:()=>C})},467:(E,p,o)=>{function C(h,b,k,f,g,s,w){try{var S=h[s](w),T=S.value}catch(x){return void k(x)}S.done?b(T):Promise.resolve(T).then(f,g)}function _(h){return function(){var b=this,k=arguments;return new Promise(function(f,g){var s=h.apply(b,k);function w(T){C(s,f,g,w,S,"next",T)}function S(T){C(s,f,g,w,S,"throw",T)}w(void 0)})}}o.d(p,{A:()=>_})},3029:(E,p,o)=>{function C(_,h){if(!(_ instanceof h))throw new TypeError("Cannot call a class as a function")}o.d(p,{A:()=>C})},2901:(E,p,o)=>{o.d(p,{A:()=>h});var C=o(816);function _(b,k){for(var f=0;f<k.length;f++){var g=k[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(b,(0,C.A)(g.key),g)}}function h(b,k,f){return k&&_(b.prototype,k),f&&_(b,f),Object.defineProperty(b,"prototype",{writable:!1}),b}},4467:(E,p,o)=>{o.d(p,{A:()=>_});var C=o(816);function _(h,b,k){return(b=(0,C.A)(b))in h?Object.defineProperty(h,b,{value:k,enumerable:!0,configurable:!0,writable:!0}):h[b]=k,h}},296:(E,p,o)=>{o.d(p,{A:()=>_});var C=o(7800);function _(h,b){return function(k){if(Array.isArray(k))return k}(h)||function(k,f){var g=k==null?null:typeof Symbol<"u"&&k[Symbol.iterator]||k["@@iterator"];if(g!=null){var s,w,S,T,x=[],O=!0,P=!1;try{if(S=(g=g.call(k)).next,f===0){if(Object(g)!==g)return;O=!1}else for(;!(O=(s=S.call(g)).done)&&(x.push(s.value),x.length!==f);O=!0);}catch(R){P=!0,w=R}finally{try{if(!O&&g.return!=null&&(T=g.return(),Object(T)!==T))return}finally{if(P)throw w}}return x}}(h,b)||(0,C.A)(h,b)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},5458:(E,p,o)=>{o.d(p,{A:()=>h});var C=o(3145),_=o(7800);function h(b){return function(k){if(Array.isArray(k))return(0,C.A)(k)}(b)||function(k){if(typeof Symbol<"u"&&k[Symbol.iterator]!=null||k["@@iterator"]!=null)return Array.from(k)}(b)||(0,_.A)(b)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},816:(E,p,o)=>{o.d(p,{A:()=>_});var C=o(2284);function _(h){var b=function(k,f){if((0,C.A)(k)!="object"||!k)return k;var g=k[Symbol.toPrimitive];if(g!==void 0){var s=g.call(k,f||"default");if((0,C.A)(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(k)}(h,"string");return(0,C.A)(b)=="symbol"?b:b+""}},2284:(E,p,o)=>{function C(_){return C=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},C(_)}o.d(p,{A:()=>C})},7800:(E,p,o)=>{o.d(p,{A:()=>_});var C=o(3145);function _(h,b){if(h){if(typeof h=="string")return(0,C.A)(h,b);var k={}.toString.call(h).slice(8,-1);return k==="Object"&&h.constructor&&(k=h.constructor.name),k==="Map"||k==="Set"?Array.from(h):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?(0,C.A)(h,b):void 0}}},7949:E=>{E.exports=JSON.parse('{"name":"protoo-client","version":"4.0.6","description":"protoo JavaScript client module","author":"Iñaki Baz Castillo <ibc@aliax.net>","homepage":"https://protoo.versatica.com","license":"MIT","repository":{"type":"git","url":"https://github.com/ibc/protoo.git"},"main":"lib/index.js","keywords":["nodejs","browser","websocket"],"engines":{"node":">=8.0.0"},"scripts":{"lint":"eslint -c .eslintrc.js lib"},"dependencies":{"debug":"^4.3.1","events":"^3.2.0","retry":"^0.12.0"},"devDependencies":{"eslint":"^5.16.0"},"optionalDependencies":{"websocket":"^1.0.33"}}')},9003:E=>{E.exports={version:"1.0.35"}}},i={};function a(E){var p=i[E];if(p!==void 0)return p.exports;var o=i[E]={exports:{}};return n[E].call(o.exports,o,o.exports,a),o.exports}a.amdO={},a.n=E=>{var p=E&&E.__esModule?()=>E.default:()=>E;return a.d(p,{a:p}),p},a.d=(E,p)=>{for(var o in p)a.o(p,o)&&!a.o(E,o)&&Object.defineProperty(E,o,{enumerable:!0,get:p[o]})},a.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),a.o=(E,p)=>Object.prototype.hasOwnProperty.call(E,p),a.r=E=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(E,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(E,"__esModule",{value:!0})};var y={};return(()=>{a.r(y),a.d(y,{CameraDeviceInfo:()=>Sc,DeviceInfo:()=>io,MicrophoneDeviceInfo:()=>Rc,VideoSDK:()=>Ql,ZujoSDK:()=>aS});var E=a(2284),p=a(467),o=a(3029),C=a(2901),_=a(4467),h=a(4756),b=a.n(h),k=a(6880),f=a.n(k);function g(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function s(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?g(Object(B),!0).forEach(function(q){(0,_.A)(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):g(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}function w(M){return"Minified Redux error #"+M+"; visit https://redux.js.org/Errors?code="+M+" for the full message or use the non-minified dev environment for full errors. "}var S=typeof Symbol=="function"&&Symbol.observable||"@@observable",T=function(){return Math.random().toString(36).substring(7).split("").join(".")},x={INIT:"@@redux/INIT"+T(),REPLACE:"@@redux/REPLACE"+T(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+T()}};function O(M){if(typeof M!="object"||M===null)return!1;for(var A=M;Object.getPrototypeOf(A)!==null;)A=Object.getPrototypeOf(A);return Object.getPrototypeOf(M)===A}function P(M,A,B){var q;if(typeof A=="function"&&typeof B=="function"||typeof B=="function"&&typeof arguments[3]=="function")throw new Error(w(0));if(typeof A=="function"&&B===void 0&&(B=A,A=void 0),B!==void 0){if(typeof B!="function")throw new Error(w(1));return B(P)(M,A)}if(typeof M!="function")throw new Error(w(2));var ee=M,te=A,ce=[],ue=ce,W=!1;function K(){ue===ce&&(ue=ce.slice())}function G(){if(W)throw new Error(w(3));return te}function J(Ae){if(typeof Ae!="function")throw new Error(w(4));if(W)throw new Error(w(5));var it=!0;return K(),ue.push(Ae),function(){if(it){if(W)throw new Error(w(6));it=!1,K();var Ce=ue.indexOf(Ae);ue.splice(Ce,1),ce=null}}}function Te(Ae){if(!O(Ae))throw new Error(w(7));if(Ae.type===void 0)throw new Error(w(8));if(W)throw new Error(w(9));try{W=!0,te=ee(te,Ae)}finally{W=!1}for(var it=ce=ue,Ce=0;Ce<it.length;Ce++)(0,it[Ce])();return Ae}return Te({type:x.INIT}),(q={dispatch:Te,subscribe:J,getState:G,replaceReducer:function(Ae){if(typeof Ae!="function")throw new Error(w(10));ee=Ae,Te({type:x.REPLACE})}})[S]=function(){var Ae,it=J;return(Ae={subscribe:function(Ce){if(typeof Ce!="object"||Ce===null)throw new Error(w(11));function qe(){Ce.next&&Ce.next(G())}return qe(),{unsubscribe:it(qe)}}})[S]=function(){return this},Ae},q}function R(){for(var M=arguments.length,A=new Array(M),B=0;B<M;B++)A[B]=arguments[B];return A.length===0?function(q){return q}:A.length===1?A[0]:A.reduce(function(q,ee){return function(){return q(ee.apply(void 0,arguments))}})}function I(){for(var M=arguments.length,A=new Array(M),B=0;B<M;B++)A[B]=arguments[B];return function(q){return function(){var ee=q.apply(void 0,arguments),te=function(){throw new Error(w(15))},ce={getState:ee.getState,dispatch:function(){return te.apply(void 0,arguments)}},ue=A.map(function(W){return W(ce)});return te=R.apply(void 0,ue)(ee.dispatch),s(s({},ee),{},{dispatch:te})}}}function d(M){return function(A){var B=A.dispatch,q=A.getState;return function(ee){return function(te){return typeof te=="function"?te(B,q,M):ee(te)}}}}var v=d();v.withExtraArgument=d;const c=v;var u=a(2211),l=a.n(u);function m(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function D(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?m(Object(B),!0).forEach(function(q){(0,_.A)(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):m(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}var N={url:null,state:"new",activeSpeakerId:null,statsPeerId:null,faceDetection:!1};const L=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"SET_ROOM_URL":var B=A.payload.url;return D(D({},M),{},{url:B});case"SET_ROOM_STATE":var q=A.payload.state;return D(D({},M),{},q==="connected"?{state:q}:{state:q,activeSpeakerId:null,statsPeerId:null});case"SET_ROOM_ACTIVE_SPEAKER":var ee=A.payload.peerId;return D(D({},M),{},{activeSpeakerId:ee});case"SET_ROOM_STATS_PEER_ID":var te=A.payload.peerId;return M.statsPeerId===te?D(D({},M),{},{statsPeerId:null}):D(D({},M),{},{statsPeerId:te});case"SET_FACE_DETECTION":var ce=A.payload;return D(D({},M),{},{faceDetection:ce});case"REMOVE_PEER":var ue=A.payload.peerId,W=D({},M);return ue&&ue===M.activeSpeakerId&&(W.activeSpeakerId=null),ue&&ue===M.statsPeerId&&(W.statsPeerId=null),W;default:return M}};function j(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function V(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?j(Object(B),!0).forEach(function(q){(0,_.A)(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):j(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}var $={id:null,displayName:null,displayNameSet:!1,device:null,canSendMic:!1,canSendWebcam:!1,canChangeWebcam:!1,webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1};const Z=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"SET_ROOM_STATE":return A.payload.state==="closed"?V(V({},M),{},{webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1}):M;case"SET_ME":var B=A.payload,q=B.peerId,ee=B.displayName,te=B.displayNameSet,ce=B.device;return V(V({},M),{},{id:q,displayName:ee,displayNameSet:te,device:ce});case"SET_MEDIA_CAPABILITIES":var ue=A.payload,W=ue.canSendMic,K=ue.canSendWebcam;return V(V({},M),{},{canSendMic:W,canSendWebcam:K});case"SET_CAN_CHANGE_WEBCAM":var G=A.payload;return V(V({},M),{},{canChangeWebcam:G});case"SET_WEBCAM_IN_PROGRESS":var J=A.payload.flag;return V(V({},M),{},{webcamInProgress:J});case"SET_SHARE_IN_PROGRESS":var Te=A.payload.flag;return V(V({},M),{},{shareInProgress:Te});case"SET_DISPLAY_NAME":var Ae=A.payload.displayName;return Ae||(Ae=M.displayName),V(V({},M),{},{displayName:Ae,displayNameSet:!0});case"SET_AUDIO_ONLY_STATE":var it=A.payload.enabled;return V(V({},M),{},{audioOnly:it});case"SET_AUDIO_ONLY_IN_PROGRESS":var Ce=A.payload.flag;return V(V({},M),{},{audioOnlyInProgress:Ce});case"SET_AUDIO_MUTED_STATE":var qe=A.payload.enabled;return V(V({},M),{},{audioMuted:qe});case"SET_RESTART_ICE_IN_PROGRESS":var xe=A.payload.flag;return V(V({},M),{},{restartIceInProgress:xe});default:return M}};function ne(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function pe(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?ne(Object(B),!0).forEach(function(q){(0,_.A)(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):ne(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}var ge={};const _e=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ge,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"SET_ROOM_STATE":return A.payload.state==="closed"?{}:M;case"ADD_PRODUCER":var B=A.payload.producer;return pe(pe({},M),{},(0,_.A)({},B.id,B));case"REMOVE_PRODUCER":var q=A.payload.producerId,ee=pe({},M);return delete ee[q],ee;case"SET_PRODUCER_PAUSED":var te=A.payload.producerId,ce=pe(pe({},M[te]),{},{paused:!0});return pe(pe({},M),{},(0,_.A)({},te,ce));case"SET_PRODUCER_RESUMED":var ue=A.payload.producerId,W=pe(pe({},M[ue]),{},{paused:!1});return pe(pe({},M),{},(0,_.A)({},ue,W));case"SET_PRODUCER_TRACK":var K=A.payload,G=K.producerId,J=K.track,Te=pe(pe({},M[G]),{},{track:J});return pe(pe({},M),{},(0,_.A)({},G,Te));case"SET_PRODUCER_SCORE":var Ae=A.payload,it=Ae.producerId,Ce=Ae.score,qe=M[it];if(!qe)return M;var xe=pe(pe({},qe),{},{score:Ce});return pe(pe({},M),{},(0,_.A)({},it,xe));default:return M}};function Me(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function me(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?Me(Object(B),!0).forEach(function(q){(0,_.A)(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):Me(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}var oe={};const ve=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oe,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"SET_ROOM_STATE":return A.payload.state==="closed"?{}:M;case"ADD_DATA_PRODUCER":var B=A.payload.dataProducer;return me(me({},M),{},(0,_.A)({},B.id,B));case"REMOVE_DATA_PRODUCER":var q=A.payload.dataProducerId,ee=me({},M);return delete ee[q],ee;default:return M}};var we=a(5458);function be(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function lt(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?be(Object(B),!0).forEach(function(q){(0,_.A)(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):be(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}var Ot={};function Yt(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function vt(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?Yt(Object(B),!0).forEach(function(q){(0,_.A)(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):Yt(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}var Mr={};function Kt(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function At(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?Kt(Object(B),!0).forEach(function(q){(0,_.A)(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):Kt(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}var Ar={},Dt=[];const Xt=function(M){for(var A=Object.keys(M),B={},q=0;q<A.length;q++){var ee=A[q];typeof M[ee]=="function"&&(B[ee]=M[ee])}var te,ce=Object.keys(B);try{(function(ue){Object.keys(ue).forEach(function(W){var K=ue[W];if(K(void 0,{type:x.INIT})===void 0)throw new Error(w(12));if(K(void 0,{type:x.PROBE_UNKNOWN_ACTION()})===void 0)throw new Error(w(13))})})(B)}catch(ue){te=ue}return function(ue,W){if(ue===void 0&&(ue={}),te)throw te;for(var K=!1,G={},J=0;J<ce.length;J++){var Te=ce[J],Ae=B[Te],it=ue[Te],Ce=Ae(it,W);if(Ce===void 0)throw W&&W.type,new Error(w(14));G[Te]=Ce,K=K||Ce!==it}return(K=K||ce.length!==Object.keys(ue).length)?G:ue}}({room:L,me:Z,producers:_e,dataProducers:ve,peers:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ot,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"SET_ROOM_STATE":return A.payload.state==="closed"?{}:M;case"ADD_PEER":var B=A.payload.peer;return lt(lt({},M),{},(0,_.A)({},B.id,B));case"REMOVE_PEER":var q=A.payload.peerId,ee=lt({},M);return delete ee[q],ee;case"SET_PEER_DISPLAY_NAME":var te=A.payload,ce=te.displayName,ue=M[te.peerId];if(!ue)throw new Error("no Peer found");var W=lt(lt({},ue),{},{displayName:ce});return lt(lt({},M),{},(0,_.A)({},W.id,W));case"ADD_CONSUMER":var K=A.payload,G=K.consumer,J=M[K.peerId];if(!J)throw new Error("no Peer found for new Consumer");var Te=[].concat((0,we.A)(J.consumers),[G.id]),Ae=lt(lt({},J),{},{consumers:Te});return lt(lt({},M),{},(0,_.A)({},Ae.id,Ae));case"REMOVE_CONSUMER":var it=A.payload,Ce=it.consumerId,qe=M[it.peerId];if(!qe)return M;var xe=qe.consumers.indexOf(Ce);if(xe===-1)throw new Error("Consumer not found");var de=qe.consumers.slice();de.splice(xe,1);var Ct=lt(lt({},qe),{},{consumers:de});return lt(lt({},M),{},(0,_.A)({},Ct.id,Ct));case"ADD_DATA_CONSUMER":var Ve=A.payload,_t=Ve.dataConsumer,mt=Ve.peerId;if(!mt)return M;var bt=M[mt];if(!bt)throw new Error("no Peer found for new DataConsumer");var Et=[].concat((0,we.A)(bt.dataConsumers),[_t.id]),He=lt(lt({},bt),{},{dataConsumers:Et});return lt(lt({},M),{},(0,_.A)({},He.id,He));case"REMOVE_DATA_CONSUMER":var vr=A.payload,_n=vr.dataConsumerId,Bt=vr.peerId;if(!Bt)return M;var Ln=M[Bt];if(!Ln)return M;var ai=Ln.dataConsumers.indexOf(_n);if(ai===-1)throw new Error("DataConsumer not found");var $i=Ln.dataConsumers.slice();$i.splice(ai,1);var Ts=lt(lt({},Ln),{},{dataConsumers:$i});return lt(lt({},M),{},(0,_.A)({},Ts.id,Ts));default:return M}},consumers:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Mr,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"SET_ROOM_STATE":return A.payload.state==="closed"?{}:M;case"ADD_CONSUMER":var B=A.payload.consumer;return vt(vt({},M),{},(0,_.A)({},B.id,B));case"REMOVE_CONSUMER":var q=A.payload.consumerId,ee=vt({},M);return delete ee[q],ee;case"SET_CONSUMER_PAUSED":var te,ce=A.payload,ue=ce.consumerId,W=ce.originator,K=M[ue];return te=vt(vt({},K),{},W==="local"?{locallyPaused:!0}:{remotelyPaused:!0}),vt(vt({},M),{},(0,_.A)({},ue,te));case"SET_CONSUMER_RESUMED":var G,J=A.payload,Te=J.consumerId,Ae=J.originator,it=M[Te];return G=vt(vt({},it),{},Ae==="local"?{locallyPaused:!1}:{remotelyPaused:!1}),vt(vt({},M),{},(0,_.A)({},Te,G));case"SET_CONSUMER_CURRENT_LAYERS":var Ce=A.payload,qe=Ce.consumerId,xe=Ce.spatialLayer,de=Ce.temporalLayer,Ct=vt(vt({},M[qe]),{},{currentSpatialLayer:xe,currentTemporalLayer:de});return vt(vt({},M),{},(0,_.A)({},qe,Ct));case"SET_CONSUMER_PREFERRED_LAYERS":var Ve=A.payload,_t=Ve.consumerId,mt=Ve.spatialLayer,bt=Ve.temporalLayer,Et=vt(vt({},M[_t]),{},{preferredSpatialLayer:mt,preferredTemporalLayer:bt});return vt(vt({},M),{},(0,_.A)({},_t,Et));case"SET_CONSUMER_PRIORITY":var He=A.payload,vr=He.consumerId,_n=He.priority,Bt=vt(vt({},M[vr]),{},{priority:_n});return vt(vt({},M),{},(0,_.A)({},vr,Bt));case"SET_CONSUMER_TRACK":var Ln=A.payload,ai=Ln.consumerId,$i=Ln.track,Ts=vt(vt({},M[ai]),{},{track:$i});return vt(vt({},M),{},(0,_.A)({},ai,Ts));case"SET_CONSUMER_SCORE":var ga=A.payload,Hs=ga.consumerId,Ei=ga.score,Xl=M[Hs];if(!Xl)return M;var Nd=vt(vt({},Xl),{},{score:Ei});return vt(vt({},M),{},(0,_.A)({},Hs,Nd));default:return M}},dataConsumers:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ar,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"SET_ROOM_STATE":return A.payload.state==="closed"?{}:M;case"ADD_DATA_CONSUMER":var B=A.payload.dataConsumer;return At(At({},M),{},(0,_.A)({},B.id,B));case"REMOVE_DATA_CONSUMER":var q=A.payload.dataConsumerId,ee=At({},M);return delete ee[q],ee;default:return M}},notifications:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Dt,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"ADD_NOTIFICATION":var B=A.payload.notification;return[].concat((0,we.A)(M),[B]);case"REMOVE_NOTIFICATION":var q=A.payload.notificationId;return M.filter(function(ee){return ee.id!==q});case"REMOVE_ALL_NOTIFICATIONS":return[];default:return M}}});var hn=a(2487),kr=a(7007),Lr=a(296),Jr=(a(2487).default,(0,C.A)(function M(){(0,o.A)(this,M),this.roomClient=null})),er=new(function(){function M(){(0,o.A)(this,M),M.instance||(M.instance=new Jr)}return(0,C.A)(M,[{key:"getInstance",value:function(){return M.instance}}])}());Object.freeze(er);var Ze=er.getInstance(),Ut=function(){return(0,C.A)(function M(A){(0,o.A)(this,M),this.id=A.id,this.kind=A.track.kind,this.codec=A.codec,this.track=A.track,this.producerOrConsumer=A.instance,A.appData&&A.appData.share===!0&&A.track.kind==="video"&&(this.kind="share"),A.appData&&A.appData.share===!0&&A.track.kind==="audio"&&(this.kind="shareAudio")},[{key:"pause",value:function(){Ze.roomClient._pauseConsumer(this.producerOrConsumer)}},{key:"resume",value:function(){Ze.roomClient._resumeConsumer(this.producerOrConsumer)}},{key:"paused",get:function(){return this.producerOrConsumer.paused}}])}();function hr(M,A){var B=typeof Symbol<"u"&&M[Symbol.iterator]||M["@@iterator"];if(!B){if(Array.isArray(M)||(B=function(W,K){if(W){if(typeof W=="string")return Fe(W,K);var G={}.toString.call(W).slice(8,-1);return G==="Object"&&W.constructor&&(G=W.constructor.name),G==="Map"||G==="Set"?Array.from(W):G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G)?Fe(W,K):void 0}}(M))||A){B&&(M=B);var q=0,ee=function(){};return{s:ee,n:function(){return q>=M.length?{done:!0}:{done:!1,value:M[q++]}},e:function(W){throw W},f:ee}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var te,ce=!0,ue=!1;return{s:function(){B=B.call(M)},n:function(){var W=B.next();return ce=W.done,W},e:function(W){ue=!0,te=W},f:function(){try{ce||B.return==null||B.return()}finally{if(ue)throw te}}}}function Fe(M,A){(A==null||A>M.length)&&(A=M.length);for(var B=0,q=Array(A);B<A;B++)q[B]=M[B];return q}var st="stream-enabled",tr="stream-disabled",Tt="media-status-changed",sr="video-quality-changed",Zr=function(){return(0,C.A)(function te(ce){var ue=this;(0,o.A)(this,te),(0,_.A)(this,"captureImage",(0,p.A)(b().mark(function W(){var K,G,J,Te,Ae,it,Ce,qe,xe=arguments;return b().wrap(function(de){for(;;)switch(de.prev=de.next){case 0:G=(K=xe.length>0&&xe[0]!==void 0?xe[0]:{}).height,J=K.width,de.prev=1,Te=(0,we.A)(ue.streams.values()),Ae=hr(Te),de.prev=4,Ce=b().mark(function Ct(){var Ve,_t,mt,bt,Et;return b().wrap(function(He){for(;;)switch(He.prev=He.next){case 0:if((Ve=it.value).kind!="video"){He.next=19;break}return He.prev=2,(_t=new MediaStream).addTrack(Ve.track),(mt=document.createElement("video")).srcObject=_t,mt.playsInline=!0,(bt=document.createElement("canvas")).id="canvasId",He.next=12,new Promise(function(vr,_n){mt.addEventListener("loadeddata",(0,p.A)(b().mark(function Bt(){var Ln,ai,$i,Ts,ga,Hs;return b().wrap(function(Ei){for(;;)switch(Ei.prev=Ei.next){case 0:return Ln=mt.videoWidth,ai=mt.videoHeight,$i=16/9,G==null&&J==null&&(G=ai,J=Ln),G==null&&G==null||(G<=0||G>ai)&&(G=ai),J==null&&J==null||(J<=0||J>Ln)&&(J=Ln),G==null&&(G=J/$i),J==null&&(J=G*$i),bt.width=J,bt.height=G,Ei.prev=9,Ei.next=12,mt.play();case 12:document.body.appendChild(mt),Ts=(bt.width-Ln*$i)/2,ga=(bt.height-ai*$i)/2,bt.getContext("2d").clearRect(0,0,Ts/2,ga/2),bt.getContext("2d").drawImage(mt,0,0),Hs=bt.toDataURL("image/jpeg").split(";base64,")[1],document.body.appendChild(bt),document.body.removeChild(bt),document.body.removeChild(mt),vr(Hs),Ei.next=28;break;case 24:Ei.prev=24,Ei.t0=Ei.catch(9),_n(Ei.t0),console.log("error in video",Ei.t0);case 28:case"end":return Ei.stop()}},Bt,null,[[9,24]])})))});case 12:return Et=He.sent,He.abrupt("return",{v:Et});case 16:He.prev=16,He.t0=He.catch(2),console.error("err on image capture",He.t0);case 19:case"end":return He.stop()}},Ct,null,[[2,16]])}),Ae.s();case 7:if((it=Ae.n()).done){de.next=14;break}return de.delegateYield(Ce(),"t0",9);case 9:if(!(qe=de.t0)){de.next=12;break}return de.abrupt("return",qe.v);case 12:de.next=7;break;case 14:de.next=19;break;case 16:de.prev=16,de.t1=de.catch(4),Ae.e(de.t1);case 19:return de.prev=19,Ae.f(),de.finish(19);case 22:throw new Error("Camera must be on to capture an image");case 25:de.prev=25,de.t2=de.catch(1),console.error("Error in captureImage::",de.t2),Ze.roomClient._videosdkLogs&&Ze.roomClient._videosdkLogs.pushLogs({logText:"Error on image capture",logType:"ERROR",attributes:{error:de.t2.message}});case 29:case"end":return de.stop()}},W,null,[[1,25],[4,16,19,22]])}))),this.id=ce.id,this.displayName=ce.displayName,this.streams=new Map,this.quality="low",this.local=ce.local||!1,this.pinState={cam:!1,share:!1},this.webcamOn=!1,this.micOn=!1,this.mode=ce.mode,this.metaData=ce.metaData,this.eventEmitter=new kr.EventEmitter},[{key:"_setPinState",value:function(te){te.cam!=null&&(this.pinState.cam=te.cam),te.share!=null&&(this.pinState.share=te.share)}},{key:"remove",value:function(){Ze.roomClient.removePeer(this.id)}},{key:"enableMic",value:function(){Ze.roomClient.enablePeerMic(this.id)}},{key:"disableMic",value:function(){Ze.roomClient.disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){Ze.roomClient.enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){Ze.roomClient.disablePeerWebcam(this.id)}},{key:"addStream",value:function(te){this.streams.set(te.id,te),te.kind!=="video"||this.local||Ze.roomClient.setConsumerQuality(te.id,this.quality),this.eventEmitter.emit(st,te)}},{key:"updateStream",value:function(te){this.streams.set(te.id,te),this.eventEmitter.emit(st,te)}},{key:"deleteStream",value:function(te){var ce=this.streams.get(te);if(ce!=null)return this.streams.delete(te),this.eventEmitter.emit(tr,ce),ce}},{key:"updateParticipantMediaState",value:function(te,ce){te=="audio"?this.micOn=ce:te=="video"&&(this.webcamOn=ce),this.eventEmitter.emit(Tt,{peerId:this.id,kind:te,newStatus:ce})}},{key:"videoQualityChanged",value:function(te,ce){this.eventEmitter.emit(sr,{peerId:this.id,prevQuality:te,currentQuality:ce})}},{key:"setQuality",value:function(te){this.quality===te||this.local||(this.quality=te,(0,we.A)(this.streams.entries()).forEach(function(ce){var ue=ce[1];ue.kind==="video"&&Ze.roomClient.setConsumerQuality(ue.id,te)}))}},{key:"setViewPort",value:function(te,ce){(0,we.A)(this.streams.entries()).forEach(function(ue){var W=ue[1];W.kind==="video"&&Ze.roomClient.setViewPort(W.producerOrConsumer,te,ce)})}},{key:"pin",value:function(te){switch(te){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!0,share:!0});break;case"CAM":this._setPinState({cam:!0});break;case"SHARE":this._setPinState({share:!0});break;default:throw new Error("Unknown pin type")}Ze.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"unpin",value:function(te){switch(te){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!1,share:!1});break;case"CAM":this._setPinState({cam:!1});break;case"SHARE":this._setPinState({share:!1});break;default:throw new Error("Unknown unpin type")}Ze.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"switchTo",value:(ee=(0,p.A)(b().mark(function te(ce){var ue,W,K;return b().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return ue=ce.meetingId,W=ce.payload,K=ce.token,G.next=3,Ze.roomClient.switchPeerRoom({peerId:this.id,roomId:ue,payload:W,token:K});case 3:case"end":return G.stop()}},te,this)})),function(te){return ee.apply(this,arguments)})},{key:"getVideoStats",value:(q=(0,p.A)(b().mark(function te(){var ce,ue,W,K,G;return b().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(!this.local){J.next=6;break}return J.next=3,Ze.roomClient.getVideoRemoteStats();case 3:return J.abrupt("return",J.sent);case 6:ce=(0,we.A)(this.streams.entries()),ue=hr(ce),J.prev=8,ue.s();case 10:if((W=ue.n()).done){J.next=18;break}if(K=(0,Lr.A)(W.value,2),G=K[0],K[1].kind!="video"){J.next=16;break}return J.next=15,Ze.roomClient.getConsumerRemoteStats(G);case 15:return J.abrupt("return",J.sent);case 16:J.next=10;break;case 18:J.next=23;break;case 20:J.prev=20,J.t0=J.catch(8),ue.e(J.t0);case 23:return J.prev=23,ue.f(),J.finish(23);case 26:case"end":return J.stop()}},te,this,[[8,20,23,26]])})),function(){return q.apply(this,arguments)})},{key:"getShareStats",value:(B=(0,p.A)(b().mark(function te(){var ce,ue,W,K,G;return b().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(!this.local){J.next=6;break}return J.next=3,Ze.roomClient.getShareRemoteStats();case 3:return J.abrupt("return",J.sent);case 6:ce=(0,we.A)(this.streams.entries()),ue=hr(ce),J.prev=8,ue.s();case 10:if((W=ue.n()).done){J.next=18;break}if(K=(0,Lr.A)(W.value,2),G=K[0],K[1].kind!="share"){J.next=16;break}return J.next=15,Ze.roomClient.getConsumerRemoteStats(G);case 15:return J.abrupt("return",J.sent);case 16:J.next=10;break;case 18:J.next=23;break;case 20:J.prev=20,J.t0=J.catch(8),ue.e(J.t0);case 23:return J.prev=23,ue.f(),J.finish(23);case 26:case"end":return J.stop()}},te,this,[[8,20,23,26]])})),function(){return B.apply(this,arguments)})},{key:"getShareAudioStats",value:(A=(0,p.A)(b().mark(function te(){var ce,ue,W,K,G;return b().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(!this.local){J.next=6;break}return J.next=3,Ze.roomClient.getShareAudioRemoteStats();case 3:return J.abrupt("return",J.sent);case 6:ce=(0,we.A)(this.streams.entries()),ue=hr(ce),J.prev=8,ue.s();case 10:if((W=ue.n()).done){J.next=18;break}if(K=(0,Lr.A)(W.value,2),G=K[0],K[1].kind!="shareAudio"){J.next=16;break}return J.next=15,Ze.roomClient.getConsumerRemoteStats(G);case 15:return J.abrupt("return",J.sent);case 16:J.next=10;break;case 18:J.next=23;break;case 20:J.prev=20,J.t0=J.catch(8),ue.e(J.t0);case 23:return J.prev=23,ue.f(),J.finish(23);case 26:case"end":return J.stop()}},te,this,[[8,20,23,26]])})),function(){return A.apply(this,arguments)})},{key:"getAudioStats",value:(M=(0,p.A)(b().mark(function te(){var ce,ue,W,K,G;return b().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:if(this.micOn){J.next=2;break}return J.abrupt("return",[]);case 2:if(!this.local){J.next=8;break}return J.next=5,Ze.roomClient.getAudioRemoteStats();case 5:return J.abrupt("return",J.sent);case 8:ce=(0,we.A)(this.streams.entries()),ue=hr(ce),J.prev=10,ue.s();case 12:if((W=ue.n()).done){J.next=20;break}if(K=(0,Lr.A)(W.value,2),G=K[0],K[1].kind!="audio"){J.next=18;break}return J.next=17,Ze.roomClient.getConsumerRemoteStats(G);case 17:return J.abrupt("return",J.sent);case 18:J.next=12;break;case 20:J.next=25;break;case 22:J.prev=22,J.t0=J.catch(10),ue.e(J.t0);case 25:return J.prev=25,ue.f(),J.finish(25);case 28:case"end":return J.stop()}},te,this,[[10,22,25,28]])})),function(){return M.apply(this,arguments)})},{key:"consumeMicStreams",value:function(){Ze.roomClient.consumeMicStreams(this.id)}},{key:"consumeWebcamStreams",value:function(){Ze.roomClient.consumeWebcamStreams(this.id)}},{key:"stopConsumingWebcamStreams",value:function(){Ze.roomClient.stopConsumingWebcamStreams(this.id)}},{key:"stopConsumingMicStreams",value:function(){Ze.roomClient.stopConsumingMicStreams(this.id)}},{key:"on",value:function(te,ce){switch(te){case st:case tr:case Tt:case sr:this.eventEmitter.on(te,ce);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(te,ce){switch(te){case st:case tr:case Tt:case sr:this.eventEmitter.off(te,ce);break;default:throw new Error("Invalid event type")}}}]);var M,A,B,q,ee}();function sn(M,A){if(A&&((0,E.A)(A)=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(M)}function Mt(M){return Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(A){return A.__proto__||Object.getPrototypeOf(A)},Mt(M)}function di(M,A){return di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,q){return B.__proto__=q,B},di(M,A)}function Ti(M,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(A&&A.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),A&&di(M,A)}var pi={CHARACTER_SPEAKING:"CHARACTER_SPEAKING",CHARACTER_THINKING:"CHARACTER_THINKING",CHARACTER_LISTENING:"CHARACTER_LISTENING"};function Zi(){try{var M=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Zi=function(){return!!M})()}function Wn(M,A,B){Lt(M,A),A.set(M,B)}function Lt(M,A){if(A.has(M))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ne(M,A){return M.get(ut(M,A))}function yt(M,A,B){return M.set(ut(M,A),B),B}function ut(M,A,B){if(typeof M=="function"?M===A:M.has(A))return arguments.length<3?A:B;throw new TypeError("Private element is not present on this object")}var ze="stream-enabled",Rr="stream-disabled",De="character-joined",fr="character-left",Pr="media-status-changed",wr="video-quality-changed",qr="character-state-changed",ie="character-message",Q="user-message",he="data",Re=new WeakMap,Le=new WeakMap,ht=new WeakMap,xt=new WeakMap,Ke=new WeakMap,et=new WeakMap,$e=new WeakMap,St=new WeakSet,Ft=function(M){function A(W){var K,G,J,Te;return(0,o.A)(this,A),G=this,J=A,Te=[{id:W.id,displayName:W.displayName,mode:"CONFERENCE"}],J=Mt(J),function(Ae,it){Lt(Ae,it),it.add(Ae)}(K=sn(G,Zi()?Reflect.construct(J,Te||[],Mt(G).constructor):J.apply(G,Te)),St),Wn(K,Re,void 0),Wn(K,Le,void 0),Wn(K,ht,void 0),Wn(K,xt,void 0),Wn(K,Ke,void 0),Wn(K,et,void 0),Wn(K,$e,void 0),(0,_.A)(K,"captureImage",(0,p.A)(b().mark(function Ae(){var it,Ce=arguments;return b().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:throw(it=Ce.length>0&&Ce[0]!==void 0?Ce[0]:{}).height,it.width,new Error("captureImage method is not supported on character");case 2:case"end":return qe.stop()}},Ae)}))),yt(Ke,K,W.interactionId||null),K.id=W.id||null,yt(Re,K,W.characterRole),yt(Le,K,W.characterMode),yt(ht,K,W.knowledgeBases||[]),K.displayName=W.displayName,yt(xt,K,W.language),yt(et,K,W.state||pi.CHARACTER_LISTENING),yt($e,K,W.roomClient),K}return Ti(A,M),(0,C.A)(A,[{key:"join",value:(ue=(0,p.A)(b().mark(function W(){var K;return b().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,Ne($e,this).joinCharacter({interactionId:Ne(Ke,this),characterId:this.id,characterRole:Ne(Re,this),displayName:this.displayName,characterMode:Ne(Le,this),knowledgeBases:Ne(ht,this),language:Ne(xt,this)});case 2:(K=G.sent)&&(this.id=K.characterId,this.displayName=K.displayName,yt(Le,this,K.characterMode),yt(Re,this,K.characterRole),yt(Ke,this,K.interactionId),yt(ht,this,K.knowledgeBases),yt(xt,this,K.language),Ne($e,this)._eventEmitter.emit("INIT_CHARACTER",this));case 4:case"end":return G.stop()}},W,this)})),function(){return ue.apply(this,arguments)})},{key:"leave",value:(ce=(0,p.A)(b().mark(function W(){return b().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,Ne($e,this).removeCharacter();case 2:case"end":return K.stop()}},W,this)})),function(){return ce.apply(this,arguments)})},{key:"remove",value:(te=(0,p.A)(b().mark(function W(){return b().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:throw new Error("remove method is not supported on character");case 1:case"end":return K.stop()}},W)})),function(){return te.apply(this,arguments)})},{key:"sendMessage",value:(ee=(0,p.A)(b().mark(function W(K){return b().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,Ne($e,this).sendCharacterMessage({interactionId:Ne(Ke,this),text:K});case 2:case"end":return G.stop()}},W,this)})),function(W){return ee.apply(this,arguments)})},{key:"handleCharacterStateChanged",value:function(W){Object.keys(pi).includes(W.status)&&(ut(St,this,ke).call(this,W.status),this.eventEmitter.emit(qr,W))}},{key:"handleCharacterMessage",value:function(W){this.eventEmitter.emit(ie,W)}},{key:"interrupt",value:(q=(0,p.A)(b().mark(function W(){return b().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,Ne($e,this).interruptCharacter({interactionId:Ne(Ke,this)});case 2:case"end":return K.stop()}},W,this)})),function(){return q.apply(this,arguments)})},{key:"handleUserMessage",value:function(W){this.eventEmitter.emit(Q,W)}},{key:"handleCharacterData",value:function(W){var K=W.topic,G=W.data;this.eventEmitter.emit(he,K,G)}},{key:"enableMic",value:function(){Ne($e,this).enablePeerMic(this.id)}},{key:"disableMic",value:function(){Ne($e,this).disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){Ne($e,this).enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){Ne($e,this).disablePeerWebcam(this.id)}},{key:"updateStream",value:function(W){throw new Error("updateStream method is not supported on character")}},{key:"switchTo",value:(B=(0,p.A)(b().mark(function W(K){return b().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:throw K.meetingId,K.payload,K.token,new Error("switchTo method is not supported on character");case 2:case"end":return G.stop()}},W)})),function(W){return B.apply(this,arguments)})},{key:"pin",value:function(W){throw new Error("pin method is not supported on character")}},{key:"on",value:function(W,K){switch(W){case ze:case Rr:case De:case fr:case Pr:case wr:case qr:case ie:case Q:case he:this.eventEmitter.on(W,K);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(W,K){switch(W){case ze:case Rr:case De:case fr:case Pr:case wr:case qr:case ie:case Q:case he:this.eventEmitter.off(W,K);break;default:throw new Error("Invalid event type")}}},{key:"state",get:function(){return Ne(et,this)}},{key:"knowledgeBases",get:function(){return Ne(ht,this)}},{key:"characterMode",get:function(){return Ne(Le,this)}},{key:"characterRole",get:function(){return Ne(Re,this)}},{key:"interactionId",get:function(){return Ne(Ke,this)}},{key:"language",get:function(){return Ne(xt,this)}}]);var B,q,ee,te,ce,ue}(Zr);function ke(M){yt(et,this,M)}function Tr(M,A,B){(function(q,ee){if(ee.has(q))throw new TypeError("Cannot initialize the same private elements twice on an object")})(M,A),A.set(M,B)}function Er(M,A,B){if(typeof M=="function"?M===A:M.has(A))return arguments.length<3?A:B;throw new TypeError("Private element is not present on this object")}var an=new WeakMap,cn=function(){return(0,C.A)(function A(B,q){var ee,te,ce,ue=B.id,W=B.displayName;(0,o.A)(this,A),Tr(this,an,void 0),this.id=ue,this.displayName=W,te=this,ce=q,(ee=an).set(Er(ee,te),ce)},[{key:"switchTo",value:(M=(0,p.A)(b().mark(function A(B){var q,ee,te;return b().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return q=B.meetingId,ee=B.payload,te=B.token,ce.next=3,Ze.roomClient.connectionSwitchPeerRoom({roomId:q,connectionRoomId:(ue=an,W=this,ue.get(Er(ue,W))),payload:ee,peerId:this.id,token:te});case 3:case"end":return ce.stop()}var ue,W},A,this)})),function(A){return M.apply(this,arguments)})}]);var M}(),us="participant-joined",hi="participant-left",Pe="chat-message",es=function(){return(0,C.A)(function A(B,q){var ee=this;(0,o.A)(this,A),this.eventEmitter=new kr.EventEmitter,this.id=B,this.participants=new Map,q.forEach(function(te){ee.participants.set(te.id,new cn(te,ee.id))})},[{key:"participantJoin",value:function(A){var B=new cn(A,this.id);this.participants.set(A.id,B),this.eventEmitter.emit(us,B)}},{key:"participantLeft",value:function(A){this.participants.delete(A),this.eventEmitter.emit(hi,A)}},{key:"sendChatMessage",value:function(A){Ze.roomClient.connectionSendChatMessage({roomId:this.id,message:A})}},{key:"sendChatMessageEvent",value:function(A){var B=A.participantId,q=A.message;this.eventEmitter.emit(Pe,{participantId:B,message:q})}},{key:"end",value:(M=(0,p.A)(b().mark(function A(){return b().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,Ze.roomClient.connectionEndMeeting({roomId:this.id});case 2:case"end":return B.stop()}},A,this)})),function(){return M.apply(this,arguments)})},{key:"on",value:function(A,B){switch(A){case us:case hi:case Pe:this.eventEmitter.on(A,B);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(A,B){switch(A){case us:case hi:case Pe:this.eventEmitter.off(A,B);break;default:throw new Error("Invalid event type")}}}]);var M}(),Se=function(){return(0,C.A)(function M(A){var B=A.roomId,q=A.peers,ee=A.payload;(0,o.A)(this,M),this.id=B,this.payload=ee,this.meeting=new es(B,q)},[{key:"close",value:function(){Ze.roomClient.closeConnection(this.id)}}])}();function Ue(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function We(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?Ue(Object(B),!0).forEach(function(q){(0,_.A)(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):Ue(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}function ft(M,A){if(A.has(M))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $t(M,A){return M.get(at(M,A))}function at(M,A,B){if(typeof M=="function"?M===A:M.has(A))return arguments.length<3?A:B;throw new TypeError("Private element is not present on this object")}var zt="error",Gt="meeting-joined",Rt="meeting-left",_r="participant-mode-changed",Jt="participant-joined",br="participant-left",Vr="speaker-changed",Kr="presenter-changed",Sn="main-participant-changed",Cn="chat-message",fi="entry-requested",ti="entry-responded",xi="recording-state-changed",Oi="recording-started",ts="recording-stopped",Es="livestream-state-changed",Hi="livestream-started",ks="livestream-stopped",Qs="hls-state-changed",za="hls-started",Ha="hls-stopped",Wa="whiteboard-started",Va="whiteboard-stopped",$a="video-state-changed",qa="video-seeked",Ka="mic-requested",Ga="webcam-requested",Ja="stream-enabled",Qa="stream-disabled",Ya="pin-state-changed",Xa="connection-open",Za="connection-close",eo="switch-meeting",to="meeting-state-changed",ro="transcription-state-changed",no="transcription-text",Ca="character-joined",da="character-left",Pt=new WeakMap,Y=new WeakSet,nt=function(){return(0,C.A)(function W(K,G,J){var Te,Ae,it,Ce,qe,xe=this;(0,o.A)(this,W),ft(Te=this,Ae=Y),Ae.add(Te),function(de,Ct,Ve){ft(de,Ct),Ct.set(de,Ve)}(this,Pt,void 0),(0,_.A)(this,"pubSub",{publish:(qe=(0,p.A)(b().mark(function de(Ct,Ve,_t,mt){return b().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:if(mt==null){bt.next=3;break}if((0,E.A)(mt)=="object"){bt.next=3;break}throw new Error('"payload" can only be object.');case 3:return bt.next=5,xe.roomClient.pubsubPublish(Ct,Ve,_t,mt);case 5:case"end":return bt.stop()}},de)})),function(de,Ct,Ve,_t){return qe.apply(this,arguments)}),subscribe:(Ce=(0,p.A)(b().mark(function de(Ct,Ve){var _t;return b().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:if(!$t(Pt,xe).listeners(Ct).includes(Ve)){mt.next=2;break}return mt.abrupt("return");case 2:return mt.next=4,xe.roomClient.pubsubSubscribe(Ct);case 4:return _t=mt.sent,$t(Pt,xe).on(Ct,Ve),mt.abrupt("return",_t);case 7:case"end":return mt.stop()}},de)})),function(de,Ct){return Ce.apply(this,arguments)}),unsubscribe:(it=(0,p.A)(b().mark(function de(Ct,Ve){return b().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:if($t(Pt,xe).off(Ct,Ve),$t(Pt,xe).listeners(Ct).length!=0){_t.next=4;break}return _t.next=4,xe.roomClient.pubsubUnsubscribe(Ct);case 4:case"end":return _t.stop()}},de)})),function(de,Ct){return it.apply(this,arguments)})}),(0,_.A)(this,"uploadBase64File",function(){var de=(0,p.A)(b().mark(function Ct(Ve){var _t,mt,bt,Et,He,vr,_n;return b().wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:if(_t=Ve.base64Data,mt=Ve.token,bt=Ve.fileName,Bt.prev=1,_t&&mt&&bt){Bt.next=4;break}throw new Error("please provide base64Data, token and fileName");case 4:return Et="https://".concat(xe.baseUrl,"/base64-upload?roomId=").concat(xe.id),He={fileName:bt,base64Data:_t},Bt.next=8,fetch(Et,{method:"POST",body:JSON.stringify(He),headers:{"Content-Type":"application/json",Authorization:mt}});case 8:return vr=Bt.sent,Bt.next=11,vr.json();case 11:return _n=Bt.sent,Bt.abrupt("return",_n.url);case 15:Bt.prev=15,Bt.t0=Bt.catch(1),console.error("Error while Uploading Base64 File::",Bt.t0),xe.roomClient._videosdkLogs&&xe.roomClient._videosdkLogs.pushLogs({logText:"Error while Uploading Base64 File",logType:"ERROR",attributes:{error:Bt.t0.message}});case 19:case"end":return Bt.stop()}},Ct,null,[[1,15]])}));return function(Ct){return de.apply(this,arguments)}}()),(0,_.A)(this,"fetchBase64File",function(){var de=(0,p.A)(b().mark(function Ct(Ve){var _t,mt,bt,Et,He;return b().wrap(function(vr){for(;;)switch(vr.prev=vr.next){case 0:if(_t=Ve.url,mt=Ve.token,vr.prev=1,_t&&mt){vr.next=4;break}throw new Error("please provide url and token");case 4:return vr.next=6,fetch(_t,{headers:{Authorization:mt}});case 6:return bt=vr.sent,vr.next=9,bt.arrayBuffer();case 9:return Et=vr.sent,He=window.btoa(new Uint8Array(Et).reduce(function(_n,Bt){return _n+String.fromCharCode(Bt)},"")),vr.abrupt("return",He);case 14:vr.prev=14,vr.t0=vr.catch(1),console.error("Error while fetching Base64 File::",vr.t0),xe.roomClient._videosdkLogs&&xe.roomClient._videosdkLogs.pushLogs({logText:"Error while fetching Base64 File",logType:"ERROR",attributes:{error:vr.t0.message}});case 18:case"end":return vr.stop()}},Ct,null,[[1,14]])}));return function(Ct){return de.apply(this,arguments)}}()),this.id=K,this.roomClient=J,this.activeSpeakerId=null,this.activePresenterId=null,this.mainParticipantId=null,this.connections=new Map,this.localParticipant=G,this.participants=new Map,this.characters=new Map,this.baseUrl=null,this.livestreamState="LIVESTREAM_STOPPED",this.recordingState="RECORDING_STOPPED",this.hlsState="HLS_STOPPED",this.transcriptionState="TRANSCRIPTION_STOPPED",this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null},this.messages=[],this.eventEmitter=new kr.EventEmitter,function(de,Ct,Ve){de.set(at(de,Ct),Ve)}(Pt,this,new kr.EventEmitter),this.eventEmitter.setMaxListeners(9999),$t(Pt,this).setMaxListeners(9999),this.roomClient.on("ERROR",function(de){return xe.handleError(de)}),this.roomClient.on("ADD_PEER",function(de){return xe.handlePeerAdd(de)}),this.roomClient.on("REMOVE_PEER",function(de){return xe.handlePeerRemove(de)}),this.roomClient.on("ADD_PRODUCER",function(de){return xe.handleProducerAdd(de)}),this.roomClient.on("UPDATE_PRODUCER",function(de){return xe.handleUpdateProducer(de)}),this.roomClient.on("REMOVE_PRODUCER",function(de){return xe.handleProducerRemove(de)}),this.roomClient.on("ADD_CONSUMER",function(de){return xe.handleConsumerAdd(de)}),this.roomClient.on("REMOVE_CONSUMER",function(de){return xe.handleConsumerRemove(de)}),this.roomClient.on("PARTICIPANT_MEDIA_STATE_CHANGED",function(de){return xe.handleParticipantMediaStateChanged(de)}),this.roomClient.on("CHAT_MESSAGE",function(de){return xe.handleNewChatMessage(de)}),this.roomClient.on("SET_ROOM_ACTIVE_SPEAKER",function(de){return xe.handleSpeakerChange(de)}),this.roomClient.on("ENTRY_REQUESTED",function(de){return xe.handleEntryRequested(de)}),this.roomClient.on("ENTRY_RESPONDED",function(de){return xe.handleEntryResponded(de)}),this.roomClient.on("MEETING_JOINED",function(de){return xe.handleMeetingJoined(de)}),this.roomClient.on("MEETING_LEFT",function(de){return xe.handleMeetingLeft(de)}),this.roomClient.on("RECORDING_STATE_CHANGED",function(de){xe.handleRecordingStateChanged(de)}),this.roomClient.on("RECORDING_STARTED",function(de){return xe.handleRecordingStarted(de)}),this.roomClient.on("RECORDING_STOPPED",function(de){return xe.handleRecordingStopped(de)}),this.roomClient.on("LIVESTREAM_STATE_CHANGED",function(de){xe.handleLivestreamStateChanged(de)}),this.roomClient.on("LIVESTREAM_STARTED",function(de){return xe.handleLivestreamStarted(de)}),this.roomClient.on("LIVESTREAM_STOPPED",function(de){return xe.handleLivestreamStopped(de)}),this.roomClient.on("HLS_STATE_CHANGED",function(de){xe.handleHlsStateChanged(de)}),this.roomClient.on("HLS_STARTED",function(de){xe.handleHlsStarted(de)}),this.roomClient.on("HLS_STOPPED",function(de){xe.handleHlsStopped(de)}),this.roomClient.on("TRANSCRIPTION_STATE_CHANGED",function(de){xe.handleTranscriptionStateChanged(de)}),this.roomClient.on("TRANSCRIPTION_TEXT",function(de){xe.handleTranscriptionText(de)}),this.roomClient.on("WHITEBOARD_STARTED",function(de){return xe.handleWhiteboardStarted(de)}),this.roomClient.on("WHITEBOARD_STOPPED",function(de){return xe.handleWhiteboardStopped(de)}),this.roomClient.on("VIDEO_STATE_CHANGED",function(de){return xe.handleVideoStateChanged(de)}),this.roomClient.on("VIDEO_SEEKED",function(de){return xe.handleVideoSeeked(de)}),this.roomClient.on("PIN_STATE_CHANGED",function(de){xe.handlePinStateChanged(de)}),this.roomClient.on("MIC_REQUESTED",function(de){return xe.handleMicRequested(de)}),this.roomClient.on("WEBCAM_REQUESTED",function(de){return xe.handleWebcamRequested(de)}),this.roomClient.on("CONNECTION_OPEN",function(de){return xe.handleConnectionOpen(de)}),this.roomClient.on("CONNECTION_CLOSE",function(de){return xe.handleConnectionClose(de)}),this.roomClient.on("CONNECTION_PARTICIPANT_JOIN",function(de){return xe.handleConnectionParticipantJoin(de)}),this.roomClient.on("SWITCH_ROOM",function(de){return xe.handleSwitchMeeting(de)}),this.roomClient.on("CONNECTION_CHAT_MESSAGE",function(de){return xe.handleConnectionChatMessage(de)}),this.roomClient.on("CONNECTION_PARTICIPANT_LEFT",function(de){xe.handleConnectionParticipantLeft(de)}),this.roomClient.on("PUBSUB_MESSAGE",function(de){return at(Y,xe,ur).call(xe,de)}),this.roomClient.on("PEER_MODE_CHANGED",function(de){return at(Y,xe,ri).call(xe,de)}),this.updateMainParticipant(this.localParticipant.id),this.roomClient.on("MEETING_STATE_CHANGED",function(de){return xe.handleMeetingStateChanged(de)}),this.roomClient.on("VIDEO_QUALITY_CHANGED",function(de){return xe.handleVideoQualityChanged(de)}),this.roomClient.on("ADD_CHARACTER",function(de){return xe.handleAddCharacter(de)}),this.roomClient.on("INIT_CHARACTER",function(de){return xe.handleInitCharacter(de)}),this.roomClient.on("REMOVE_CHARACTER",function(de){return xe.handleRemoveCharacter(de)}),this.roomClient.on("CHARACTER_STATE_CHANGED",function(de){return xe.handleCharacterStateChanged(de)}),this.roomClient.on("CHARACTER_MESSAGE",function(de){return xe.handleCharacterMessage(de)}),this.roomClient.on("USER_MESSAGE",function(de){return xe.handleUserMessage(de)}),this.roomClient.on("CHARACTER_DATA",function(de){return xe.handleOnCharacterData(de)})},[{key:"handleError",value:function(W){this.eventEmitter.listenerCount(zt)>0&&this.eventEmitter.emit(zt,W)}},{key:"join",value:function(){this.roomClient.join()}},{key:"changeMode",value:function(W){this.roomClient.changeMode(W)}},{key:"leave",value:function(){this.roomClient.close({sendLeft:!0})}},{key:"end",value:function(){this.roomClient.closeRoom()}},{key:"respondEntry",value:function(W,K){this.roomClient.respondEntry(W,K)}},{key:"pinnedParticipants",get:function(){return this.roomClient._pinnedParticipants}},{key:"muteMic",value:function(){this.roomClient.disableMic()}},{key:"unmuteMic",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableMic(W)}},{key:"publishAudio",value:(ue=(0,p.A)(b().mark(function W(){var K,G=arguments;return b().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return K=G.length>0&&G[0]!==void 0?G[0]:void 0,J.next=3,this.roomClient.enableMic(K);case 3:return J.abrupt("return");case 4:case"end":return J.stop()}},W,this)})),function(){return ue.apply(this,arguments)})},{key:"unpublishAudio",value:(ce=(0,p.A)(b().mark(function W(){return b().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,this.roomClient.disableMic();case 2:return K.abrupt("return");case 3:case"end":return K.stop()}},W,this)})),function(){return ce.apply(this,arguments)})},{key:"disableWebcam",value:function(){this.roomClient.disableWebcam()}},{key:"enableWebcam",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableWebcam(W)}},{key:"publishVideo",value:(te=(0,p.A)(b().mark(function W(){var K,G=arguments;return b().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return K=G.length>0&&G[0]!==void 0?G[0]:void 0,this.roomClient.enableWebcam(K),J.abrupt("return");case 3:case"end":return J.stop()}},W,this)})),function(){return te.apply(this,arguments)})},{key:"unpublishVideo",value:(ee=(0,p.A)(b().mark(function W(){return b().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return this.roomClient.disableWebcam(),K.abrupt("return");case 2:case"end":return K.stop()}},W,this)})),function(){return ee.apply(this,arguments)})},{key:"disableScreenShare",value:function(){this.roomClient.disableShare()}},{key:"enableScreenShare",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(W)}},{key:"pubblishScreenShare",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(W)}},{key:"unpublishScreenShare",value:function(){this.roomClient.disableShare()}},{key:"sendChatMessage",value:function(W){this.roomClient.sendChatMessage(W);var K={text:W,timestamp:new Date().getTime(),senderId:this.localParticipant.id,senderName:this.localParticipant.displayName};this.handleNewChatMessage(K)}},{key:"startRecording",value:function(W,K,G,J){this.roomClient.startRecording(W,K,G,J)}},{key:"stopRecording",value:function(){this.roomClient.stopRecording()}},{key:"startTranscription",value:function(W){this.roomClient.startTranscription(W)}},{key:"stopTranscription",value:function(){this.roomClient.stopTranscription()}},{key:"startLivestream",value:function(W,K){this.roomClient.startLivestream(W,K)}},{key:"stopLivestream",value:function(){this.roomClient.stopLivestream()}},{key:"startHls",value:(q=(0,p.A)(b().mark(function W(K,G){return b().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,this.roomClient.startHls(K,G);case 2:case"end":return J.stop()}},W,this)})),function(W,K){return q.apply(this,arguments)})},{key:"stopHls",value:function(){this.roomClient.stopHls()}},{key:"createCharacter",value:function(W){if(!W.interactionId&&!W.id)throw new Error("InteractionId or id is required");return new Ft(We(We({},W),{},{roomClient:this.roomClient}))}},{key:"getMics",value:(B=(0,p.A)(b().mark(function W(){return b().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,this.roomClient.getMics();case 2:return K.abrupt("return",K.sent);case 3:case"end":return K.stop()}},W,this)})),function(){return B.apply(this,arguments)})},{key:"getWebcams",value:(A=(0,p.A)(b().mark(function W(){return b().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,this.roomClient.getWebcams();case 2:return K.abrupt("return",K.sent);case 3:case"end":return K.stop()}},W,this)})),function(){return A.apply(this,arguments)})},{key:"changeMic",value:function(W){this.roomClient.changeMic(W)}},{key:"changeWebcam",value:function(W){this.roomClient.changeWebcam(W)}},{key:"replaceWebcamStream",value:function(W){this.roomClient.replaceWebcamStream(W)}},{key:"setWebcamQuality",value:function(W){this.roomClient.setWebcamQuality(W)}},{key:"startWhiteboard",value:function(){this.roomClient.startWhiteboard()}},{key:"stopWhiteboard",value:function(){this.roomClient.stopWhiteboard()}},{key:"startVideo",value:function(W){var K=W.link;this.roomClient.startVideo({link:K})}},{key:"stopVideo",value:function(){this.roomClient.stopVideo()}},{key:"resumeVideo",value:function(){this.roomClient.resumeVideo()}},{key:"refreshConnection",value:function(){this.roomClient.restartIce()}},{key:"pauseVideo",value:function(W){var K=W.currentTime;this.roomClient.pauseVideo(K)}},{key:"seekVideo",value:function(W){var K=W.currentTime;this.roomClient.seekVideo(K)}},{key:"handlePeerAdd",value:function(W){var K=W.peer,G=new Zr(K);this.participants.set(G.id,G),this.eventEmitter.emit(Jt,G),this.participants.size===1&&this.updateMainParticipant(G.id)}},{key:"handlePeerRemove",value:function(W){var K=W.peerId,G=this.participants.get(K);G!=null&&(this.participants.delete(K),this.eventEmitter.emit(br,G),this.activePresenterId===G.id&&(this.activePresenterId=null,this.eventEmitter.emit(Kr,this.activePresenterId)),this.mainParticipantId===G.id&&(this.participants.size>0?this.updateMainParticipant(this.participants.entries().next().value[1].id):this.updateMainParticipant(this.localParticipant.id)))}},{key:"handleProducerAdd",value:function(W){var K=W.producer,G=new Ut(K);this.localParticipant.addStream(G),G.kind==="share"&&(this.activePresenterId=this.localParticipant.id,this.eventEmitter.emit(Kr,this.activePresenterId),this.updateMainParticipant(this.localParticipant.id))}},{key:"handleUpdateProducer",value:function(W){var K=W.producer,G=new Ut(K);this.localParticipant.updateStream(G)}},{key:"handleProducerRemove",value:function(W){var K=W.producerId,G=this.localParticipant.deleteStream(K);if(G&&G.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(Kr,this.activePresenterId);var J=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||J||this.localParticipant.id)}}},{key:"handleConsumerAdd",value:function(W){var K=W.consumer,G=W.peerId,J=this.participants.get(G)||this.characters.get(G);if(J){var Te=new Ut(K);J.addStream(Te),this.eventEmitter.emit(Ja,Te),Te.kind==="share"&&(this.activePresenterId=J.id,this.eventEmitter.emit(Kr,this.activePresenterId),this.updateMainParticipant(J.id))}}},{key:"handleConsumerRemove",value:function(W){var K=W.consumerId,G=W.peerId,J=this.participants.get(G)||this.characters.get(G);if(J!=null&&J){var Te=J.deleteStream(K);if(this.eventEmitter.emit(Qa,Te),Te&&Te.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(Kr,this.activePresenterId);var Ae=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||Ae||this.localParticipant.id)}}}},{key:"handleParticipantMediaStateChanged",value:function(W){var K=W.peerId,G=W.kind,J=W.newState,Te=this.participants.get(K)||this.characters.get(K);this.localParticipant.id==K&&(Te=this.localParticipant),Te&&Te&&(G=="audio"?Te.micOn=J:G=="video"&&(Te.webcamOn=J),Te.updateParticipantMediaState(G,J))}},{key:"handleSpeakerChange",value:function(W){var K=W.peerId;this.activeSpeakerId!==K&&(this.activeSpeakerId=K,this.eventEmitter.emit(Vr,K),K&&K!==this.localParticipant.id&&this.activePresenterId!==this.mainParticipantId&&K!==this.mainParticipantId&&this.updateMainParticipant(K))}},{key:"handleNewChatMessage",value:function(W){var K=W.senderId,G={senderId:K,text:W.text,timestamp:W.timestamp};if(this.localParticipant.id===K)G.senderName=this.localParticipant.displayName;else{var J=this.participants.get(K);J&&(G.senderName=J.displayName)}this.messages.push(G),this.eventEmitter.emit(Cn,G)}},{key:"updateMainParticipant",value:function(W){this.mainParticipantId=W;var K=null;K=W===this.localParticipant.id?this.localParticipant:this.participants.get(this.mainParticipantId),this.eventEmitter.emit(Sn,K)}},{key:"handleEntryRequested",value:function(W){var K=this,G=W.id,J=W.name;this.eventEmitter.emit(fi,{participantId:G,name:J,allow:function(){K.roomClient.respondEntry(G,"allowed")},deny:function(){K.roomClient.respondEntry(G,"denied")}})}},{key:"handleEntryResponded",value:function(W){var K=W.id,G=W.decision;this.eventEmitter.emit(ti,K,G)}},{key:"handleMeetingJoined",value:function(W){var K=W.peers,G=W.poll,J=W.messages,Te=W.baseUrl;this.baseUrl=Te,J.length>0&&(this.messages=J),this.eventEmitter.emit(Gt,{peers:K,poll:G,messages:J})}},{key:"handleMeetingLeft",value:function(W){this.eventEmitter.emit(Rt,W)}},{key:"handleRecordingStateChanged",value:function(W){this.recordingState=W.status,this.eventEmitter.emit(xi,W)}},{key:"handleLivestreamStateChanged",value:function(W){this.livestreamState=W.status,this.eventEmitter.emit(Es,W)}},{key:"handleHlsStateChanged",value:function(W){this.hlsState=W.status,W.status=="HLS_PLAYABLE"?this.hlsUrls={downstreamUrl:W.downstreamUrl,playbackHlsUrl:W.playbackHlsUrl,livestreamUrl:W.livestreamUrl}:W.status=="HLS_STOPPED"&&(this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),this.eventEmitter.emit(Qs,W)}},{key:"handleTranscriptionStateChanged",value:function(W){this.transcriptionState=W.status,this.eventEmitter.emit(ro,W)}},{key:"handleTranscriptionText",value:function(W){this.eventEmitter.emit(no,W)}},{key:"handleRecordingStarted",value:function(){this.eventEmitter.emit(Oi)}},{key:"handleRecordingStopped",value:function(){this.eventEmitter.emit(ts)}},{key:"handleLivestreamStarted",value:function(){this.eventEmitter.emit(Hi)}},{key:"handleLivestreamStopped",value:function(){this.eventEmitter.emit(ks)}},{key:"handleHlsStarted",value:function(W){this.eventEmitter.emit(za,W)}},{key:"handleHlsStopped",value:function(){this.eventEmitter.emit(Ha)}},{key:"handleWhiteboardStarted",value:function(W){this.eventEmitter.emit(Wa,W)}},{key:"handleWhiteboardStopped",value:function(W){(function(K){if(K==null)throw new TypeError("Cannot destructure "+K)})(W),this.eventEmitter.emit(Va)}},{key:"handleAddCharacter",value:function(W){var K,G=W.id,J=(K=this.characters.get(G))!==null&&K!==void 0?K:new Ft(We(We({},W),{},{state:pi.CHARACTER_LISTENING,roomClient:this.roomClient}));this.characters.set(G,J),this.eventEmitter.emit(Ca,J),J.eventEmitter.emit(Ca)}},{key:"handleInitCharacter",value:function(W){this.characters.set(W.id,W)}},{key:"handleRemoveCharacter",value:function(W){var K=W.id;if(this.characters.has(K)){var G=this.characters.get(K);this.eventEmitter.emit(da,G),G.eventEmitter.emit(da),this.characters.delete(K)}}},{key:"handleCharacterStateChanged",value:function(W){var K=W.id;this.characters.has(K)&&this.characters.get(K).handleCharacterStateChanged(W)}},{key:"handleCharacterMessage",value:function(W){var K=W.id;this.characters.has(K)&&this.characters.get(K).handleCharacterMessage(W)}},{key:"handleUserMessage",value:function(W){var K=W.id;this.characters.has(K)&&this.characters.get(K).handleUserMessage(W)}},{key:"handleOnCharacterData",value:function(W){var K=W.id;this.characters.has(K)&&this.characters.get(K).handleCharacterData(W)}},{key:"handleVideoStateChanged",value:function(W){this.eventEmitter.emit($a,W)}},{key:"handleVideoSeeked",value:function(W){var K=W.currentTime;this.eventEmitter.emit(qa,{currentTime:K})}},{key:"handlePinStateChanged",value:function(W){var K=W.peerId,G=W.state,J=W.pinnedBy;this.eventEmitter.emit(Ya,{participantId:K,state:G,pinnedBy:J})}},{key:"handleMeetingStateChanged",value:function(W){var K=W.state;this.eventEmitter.emit(to,{state:K})}},{key:"handleVideoQualityChanged",value:function(W){var K=W.peerId,G=W.prevQuality,J=W.currentQuality,Te=this.participants.get(K)||this.characters.get(K);Te&&Te&&Te.videoQualityChanged(G,J)}},{key:"handleMicRequested",value:function(W){var K=this,G=W.peerId;this.eventEmitter.emit(Ka,{participantId:G,accept:function(){return K.unmuteMic()},reject:function(){}})}},{key:"handleWebcamRequested",value:function(W){var K=this,G=W.peerId;this.eventEmitter.emit(Ga,{participantId:G,accept:function(){return K.enableWebcam()},reject:function(){}})}},{key:"handleConnectionParticipantJoin",value:function(W){var K=W.roomId,G=W.peer,J=this.connections.get(K);J!=null&&J.meeting.participantJoin(G)}},{key:"handleConnectionParticipantLeft",value:function(W){var K=W.roomId,G=W.peerId,J=this.connections.get(K);J!=null&&J.meeting.participantLeft(G)}},{key:"handleConnectionOpen",value:function(W){var K=W.peers,G=W.roomId,J=W.payload,Te=new Se({roomId:G,peers:K,payload:J});this.connections.set(Te.id,Te),this.eventEmitter.emit(Xa,Te)}},{key:"handleConnectionClose",value:function(W){var K=W.roomId;this.connections.get(K)!=null&&(this.connections.delete(K),this.eventEmitter.emit(Za,K))}},{key:"handleSwitchMeeting",value:function(W){var K=W.roomId,G=W.token,J=W.payload,Te=W.peerId,Ae=W.connectionPeerId,it=W.connectionRoomId,Ce=Te?{meetingId:K,payload:J,token:G,participantId:Te}:{meetingId:K,payload:J,token:G,connectionParticipantId:Ae,connectionMeetingId:it};this.eventEmitter.emit(eo,Ce)}},{key:"handleConnectionChatMessage",value:function(W){var K=W.roomId,G=W.peerId,J=W.message,Te=this.connections.get(K);Te!=null&&Te.meeting.sendChatMessageEvent({participantId:G,message:J})}},{key:"connectTo",value:(M=(0,p.A)(b().mark(function W(K){var G,J;return b().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return G=K.meetingId,J=K.payload,Te.next=3,this.roomClient.openConnection({roomId:G,payload:J});case 3:case"end":return Te.stop()}},W,this)})),function(W){return M.apply(this,arguments)})},{key:"selectedCameraDevice",get:function(){var W;return(W=this.roomClient._webcam)===null||W===void 0?void 0:W.device}},{key:"selectedMicrophoneDevice",get:function(){var W;return(W=this.roomClient._mic)===null||W===void 0?void 0:W.device}},{key:"on",value:function(W,K){switch(W){case Jt:case br:case Vr:case Kr:case Sn:case Cn:case fi:case ti:case xi:case Oi:case ts:case Es:case Hi:case ks:case za:case Ha:case Qs:case ro:case no:case Ja:case Qa:case Wa:case Va:case Ca:case da:case Gt:case Rt:case $a:case qa:case Ka:case Ga:case Ya:case Xa:case Za:case eo:case to:case _r:case zt:this.eventEmitter.on(W,K);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(W,K){switch(W){case Jt:case br:case Vr:case Kr:case Sn:case Cn:case fi:case ti:case xi:case Oi:case ts:case Es:case Hi:case ks:case Qs:case za:case Ha:case ro:case no:case Ja:case Qa:case Wa:case Va:case Ca:case da:case Gt:case Rt:case $a:case qa:case Ka:case Ga:case Ya:case Xa:case Za:case eo:case to:case zt:case _r:this.eventEmitter.off(W,K);break;default:throw new Error("Invalid event type")}}}]);var M,A,B,q,ee,te,ce,ue}();function ur(M){var A=M.topic,B=M.message,q=M.senderId,ee=M.timestamp,te=M.senderName,ce=M.id,ue=M.payload;A&&B&&$t(Pt,this).emit(A,{message:B,senderId:q,timestamp:ee,topic:A,senderName:te,id:ce,payload:ue})}function ri(M){var A=M.peerId,B=M.mode;A===this.localParticipant.id?this.localParticipant.mode=B:this.participants.get(A).mode=B,this.eventEmitter.emit(_r,{participantId:A,mode:B})}var ar=a(7080),pa=a(5071),Pa=a(2107),bc=a(4973),Ta=a(9027);function Bo(M,A,B){return A=Mt(A),sn(M,Ol()?Reflect.construct(A,B||[],Mt(M).constructor):A.apply(M,B))}function Ol(){try{var M=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ol=function(){return!!M})()}var io=function(M){function A(B,q,ee,te){return(0,o.A)(this,A),Bo(this,A,[B,q,ee,te])}return Ti(A,M),(0,C.A)(A)}((0,C.A)(function M(A,B,q,ee){(0,o.A)(this,M),this.deviceId=A,this.groupId=B,this.kind=q,this.label=ee})),Sc=function(M){function A(B,q,ee,te){return(0,o.A)(this,A),Bo(this,A,[B,q,ee,te])}return Ti(A,M),(0,C.A)(A)}(io),Rc=function(M){function A(B,q,ee,te){return(0,o.A)(this,A),Bo(this,A,[B,q,ee,te])}return Ti(A,M),(0,C.A)(A)}(io),Dl=function(M){function A(B,q,ee,te){return(0,o.A)(this,A),Bo(this,A,[B,q,ee,te])}return Ti(A,M),(0,C.A)(A)}(io),yi={AUDIO:"audio",VIDEO:"video",AUDIO_AND_VIDEO:"audio_video"},gd=(a(328),a(7654));function Fo(M,A){return M==null||A==null?NaN:M<A?-1:M>A?1:M>=A?0:NaN}function vd(M,A){return M==null||A==null?NaN:A<M?-1:A>M?1:A>=M?0:NaN}function Il(M){let A,B,q;function ee(te,ce,ue=0,W=te.length){if(ue<W){if(A(ce,ce)!==0)return W;do{const K=ue+W>>>1;B(te[K],ce)<0?ue=K+1:W=K}while(ue<W)}return ue}return M.length!==2?(A=Fo,B=(te,ce)=>Fo(M(te),ce),q=(te,ce)=>M(te)-ce):(A=M===Fo||M===vd?M:yd,B=M,q=M),{left:ee,center:function(te,ce,ue=0,W=te.length){const K=ee(te,ce,ue,W-1);return K>ue&&q(te[K-1],ce)>-q(te[K],ce)?K-1:K},right:function(te,ce,ue=0,W=te.length){if(ue<W){if(A(ce,ce)!==0)return W;do{const K=ue+W>>>1;B(te[K],ce)<=0?ue=K+1:W=K}while(ue<W)}return ue}}}function yd(){return 0}const _d=Il(Fo),wd=_d.right,bd=(Il(function(M){return M===null?NaN:+M}).center,wd);function Sd(M,A){switch(arguments.length){case 0:break;case 1:this.range(M);break;default:this.range(A).domain(M)}return this}function Ys(){var M,A=[.5],B=[0,1],q=1;function ee(te){return te!=null&&te<=te?B[bd(A,te,0,q)]:M}return ee.domain=function(te){return arguments.length?(A=Array.from(te),q=Math.min(A.length,B.length-1),ee):A.slice()},ee.range=function(te){return arguments.length?(B=Array.from(te),q=Math.min(A.length,B.length-1),ee):B.slice()},ee.invertExtent=function(te){var ce=B.indexOf(te);return[A[ce-1],A[ce]]},ee.unknown=function(te){return arguments.length?(M=te,ee):M},ee.copy=function(){return Ys().domain(A).range(B).unknown(M)},Sd.apply(ee,arguments)}function Ml(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function ds(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?Ml(Object(B),!0).forEach(function(q){pr(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):Ml(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}function Di(M,A){if(!(M instanceof A))throw new TypeError("Cannot call a class as a function")}function Rd(M,A){for(var B=0;B<A.length;B++){var q=A[B];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(M,Nl(q.key),q)}}function Ii(M,A,B){return A&&Rd(M.prototype,A),Object.defineProperty(M,"prototype",{writable:!1}),M}function pr(M,A,B){return(A=Nl(A))in M?Object.defineProperty(M,A,{value:B,enumerable:!0,configurable:!0,writable:!0}):M[A]=B,M}function Uo(M,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(A&&A.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),A&&Ec(M,A)}function fn(M){return fn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(A){return A.__proto__||Object.getPrototypeOf(A)},fn(M)}function Ec(M,A){return Ec=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,q){return B.__proto__=q,B},Ec(M,A)}function Xs(M,A){if(M==null)return{};var B,q,ee=function(ce,ue){if(ce==null)return{};var W,K,G={},J=Object.keys(ce);for(K=0;K<J.length;K++)W=J[K],ue.indexOf(W)>=0||(G[W]=ce[W]);return G}(M,A);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(M);for(q=0;q<te.length;q++)B=te[q],A.indexOf(B)>=0||Object.prototype.propertyIsEnumerable.call(M,B)&&(ee[B]=M[B])}return ee}function Ir(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function zo(M){var A=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var B,q=fn(M);if(A){var ee=fn(this).constructor;B=Reflect.construct(q,arguments,ee)}else B=q.apply(this,arguments);return function(te,ce){if(ce&&(typeof ce=="object"||typeof ce=="function"))return ce;if(ce!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ir(te)}(this,B)}}function Al(M,A){for(;!Object.prototype.hasOwnProperty.call(M,A)&&(M=fn(M))!==null;);return M}function kc(){return kc=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(M,A,B){var q=Al(M,A);if(q){var ee=Object.getOwnPropertyDescriptor(q,A);return ee.get?ee.get.call(arguments.length<3?M:B):ee.value}},kc.apply(this,arguments)}function Cc(M,A,B,q){return Cc=typeof Reflect<"u"&&Reflect.set?Reflect.set:function(ee,te,ce,ue){var W,K=Al(ee,te);if(K){if((W=Object.getOwnPropertyDescriptor(K,te)).set)return W.set.call(ue,ce),!0;if(!W.writable)return!1}if(W=Object.getOwnPropertyDescriptor(ue,te)){if(!W.writable)return!1;W.value=ce,Object.defineProperty(ue,te,W)}else pr(ue,te,ce);return!0},Cc(M,A,B,q)}function Un(M,A,B,q,ee){if(!Cc(M,A,B,q||M)&&ee)throw new TypeError("failed to set property");return B}function Mi(M,A){return function(B){if(Array.isArray(B))return B}(M)||function(B,q){var ee=B==null?null:typeof Symbol<"u"&&B[Symbol.iterator]||B["@@iterator"];if(ee!=null){var te,ce,ue,W,K=[],G=!0,J=!1;try{if(ue=(ee=ee.call(B)).next,q===0){if(Object(ee)!==ee)return;G=!1}else for(;!(G=(te=ue.call(ee)).done)&&(K.push(te.value),K.length!==q);G=!0);}catch(Te){J=!0,ce=Te}finally{try{if(!G&&ee.return!=null&&(W=ee.return(),Object(W)!==W))return}finally{if(J)throw ce}}return K}}(M,A)||Ll(M,A)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Zs(M){return function(A){if(Array.isArray(A))return Pc(A)}(M)||function(A){if(typeof Symbol<"u"&&A[Symbol.iterator]!=null||A["@@iterator"]!=null)return Array.from(A)}(M)||Ll(M)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ll(M,A){if(M){if(typeof M=="string")return Pc(M,A);var B=Object.prototype.toString.call(M).slice(8,-1);return B==="Object"&&M.constructor&&(B=M.constructor.name),B==="Map"||B==="Set"?Array.from(M):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?Pc(M,A):void 0}}function Pc(M,A){(A==null||A>M.length)&&(A=M.length);for(var B=0,q=new Array(A);B<A;B++)q[B]=M[B];return q}function Nl(M){var A=function(B,q){if(typeof B!="object"||B===null)return B;var ee=B[Symbol.toPrimitive];if(ee!==void 0){var te=ee.call(B,q||"default");if(typeof te!="object")return te;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(B)}(M,"string");return typeof A=="symbol"?A:String(A)}function fe(M,A){return function(B,q){return q.get?q.get.call(B):q.value}(M,jl(M,A,"get"))}function Nt(M,A,B){return function(q,ee,te){if(ee.set)ee.set.call(q,te);else{if(!ee.writable)throw new TypeError("attempted to set read only private field");ee.value=te}}(M,jl(M,A,"set"),B),B}function jl(M,A,B){if(!A.has(M))throw new TypeError("attempted to "+B+" private field on non-instance");return A.get(M)}function or(M,A,B){if(!A.has(M))throw new TypeError("attempted to get private field on non-instance");return B}function Bl(M,A){if(A.has(M))throw new TypeError("Cannot initialize the same private elements twice on an object")}function jt(M,A,B){Bl(M,A),A.set(M,B)}function ni(M,A){Bl(M,A),A.add(M)}var Ho="https://speed.cloudflare.com",Fl={autoStart:!0,downloadApiUrl:"".concat(Ho,"/__down"),uploadApiUrl:"".concat(Ho,"/__up"),logMeasurementApiUrl:null,logAimApiUrl:"https://aim.cloudflare.com/__log",turnServerUri:"turn.speed.cloudflare.com:50000",turnServerCredsApiUrl:"".concat(Ho,"/turn-creds"),turnServerUser:null,turnServerPass:null,rpkiInvalidHost:"invalid.rpki.cloudflare.com",cfTraceUrl:"".concat(Ho,"/cdn-cgi/trace"),includeCredentials:!1,measurements:[{type:"latency",numPackets:1},{type:"download",bytes:1e5,count:1,bypassMinDuration:!0},{type:"latency",numPackets:20},{type:"download",bytes:1e5,count:9},{type:"download",bytes:1e6,count:8},{type:"upload",bytes:1e5,count:8},{type:"packetLoss",numPackets:1e3,batchSize:10,batchWaitTime:10,responsesWaitTime:3e3},{type:"upload",bytes:1e6,count:6},{type:"download",bytes:1e7,count:6},{type:"upload",bytes:1e7,count:4},{type:"download",bytes:25e6,count:4},{type:"upload",bytes:25e6,count:4},{type:"download",bytes:1e8,count:3},{type:"upload",bytes:5e7,count:3},{type:"download",bytes:25e7,count:2}],measureDownloadLoadedLatency:!0,measureUploadLoadedLatency:!0,loadedLatencyThrottle:400,bandwidthFinishRequestDuration:1e3,estimatedServerTime:10,latencyPercentile:.5,bandwidthPercentile:.9,bandwidthMinRequestDuration:10,loadedRequestMinDuration:250,loadedLatencyMaxPoints:20},Ul={aimMeasurementScoring:{packetLoss:Ys([.01,.05,.25,.5],[10,5,0,-10,-20]),latency:Ys([10,20,50,100,500],[20,10,5,0,-10,-20]),loadedLatencyIncrease:Ys([10,20,50,100,500],[20,10,5,0,-10,-20]),jitter:Ys([10,20,100,500],[10,5,0,-10,-20]),download:Ys([1e6,1e7,5e7,1e8],[0,5,10,20,30]),upload:Ys([1e6,1e7,5e7,1e8],[0,5,10,20,30])},aimExperiencesDefs:{streaming:{input:["latency","packetLoss","download","loadedLatencyIncrease"],pointThresholds:[15,20,40,60]},gaming:{input:["latency","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,30]},rtc:{input:["latency","jitter","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,40]}}},Ed=function(M){var A=M.headers.get("server-timing");if(A){var B=A.match(/dur=([0-9.]+)/);if(B)return+B[1]}},kd=function(M){return M.responseStart-M.requestStart},Cd=function(M){return M.responseEnd-M.responseStart},Pd=function(M){return M.ping+M.payloadDownloadTime},X=function(M){return M.ttfb},F=function(M,A){var B=M.duration,q=M.transferSize,ee=B/1e3;return ee?8*(q||1.005*+A)/ee:void 0},U=function(M,A){var B=M.duration/1e3;return B?8*A*1.005/B:void 0},z=gd(function(M){return"0".repeat(M)}),H=new WeakMap,re=new WeakMap,se=new WeakMap,Ie=new WeakMap,Ee=new WeakMap,wt=new WeakMap,Ge=new WeakMap,gt=new WeakMap,ae=new WeakMap,ot=new WeakMap,Xe=new WeakMap,ct=new WeakMap,ye=new WeakMap,Je=new WeakMap,qt=new WeakMap,rr=new WeakMap,cr=new WeakMap,nr=new WeakMap,ir=new WeakMap,mr=new WeakMap,Qt=new WeakMap,Ht=new WeakMap,xr=new WeakSet,Zt=new WeakSet,dr=new WeakSet,jr=new WeakSet;function ln(M){var A=this;M!==fe(this,ct)&&(Nt(this,ct,M),setTimeout(function(){return fe(A,Ie).call(A,fe(A,ct))}))}function mn(M,A){var B=this,q=fe(this,ae)[M],ee=q.bytes,te=q.dir,ce=fe(this,Je),ue=ce[te].hasOwnProperty(ee)?ce[te][ee]:{timings:[],numMeasurements:fe(this,ae).filter(function(W){var K=W.bytes,G=W.dir;return ee===K&&te===G}).map(function(W){return W.count}).reduce(function(W,K){return W+K},0)};A&&ue.timings.push(A),ue.timings=ue.timings.slice(-ue.numMeasurements),ce[te][ee]=ue,A?setTimeout(function(){fe(B,wt).call(B,ds({type:te,bytes:ee},A),ce)}):fe(this,Ee).call(this,fe(this,ae)[M],ce)}function lr(){var M=this,A=fe(this,ae),B=A[fe(this,qt)];if(fe(this,rr)>=B.count){var q=fe(this,ye);if(fe(this,nr)>this.finishRequestDuration&&!B.bypassMinDuration){var ee=B.dir;fe(this,ye)[ee]=!0,Object.values(fe(this,ye)).every(function(Ce){return Ce})&&fe(this,Ge).call(this,fe(this,Je))}Nt(this,rr,0),Nt(this,nr,-1/0),performance.clearResourceTimings();do Nt(this,qt,fe(this,qt)+1);while(fe(this,qt)<A.length&&q[A[fe(this,qt)].dir]);if(fe(this,qt)>=A.length)return Nt(this,ye,{down:!0,up:!0}),or(this,xr,ln).call(this,!1),void fe(this,Ge).call(this,fe(this,Je));B=A[fe(this,qt)]}var te=fe(this,qt);fe(this,rr)===0&&or(this,Zt,mn).call(this,te);var ce=B,ue=ce.bytes,W=ce.dir==="down",K=fe(this,W?ot:Xe),G=Object.assign({},fe(this,H));W&&(G.bytes="".concat(ue));var J,Te="".concat(K.startsWith("http")||K.startsWith("//")?"":window.location.origin).concat(K,"?").concat(Object.entries(G).map(function(Ce){var qe=Mi(Ce,2),xe=qe[0],de=qe[1];return"".concat(xe,"=").concat(de)}).join("&")),Ae=Object.assign({},W?{}:{method:"POST",body:z(ue)},fe(this,re)),it=Nt(this,Qt,fetch(Te,Ae).then(function(Ce){if(Ce.ok)return Ce;throw Error(Ce.statusText)}).then(function(Ce){return M.getServerTime&&(J=M.getServerTime(Ce)),Ce}).then(function(Ce){return Ce.text().then(function(qe){return fe(M,se)&&fe(M,se).call(M,{url:Te,headers:Ce.headers,body:qe}),qe})}).then(function(Ce,qe){if(it._cancel)qe("cancelled");else{var xe=performance.getEntriesByName(Te).slice(-1)[0],de={transferSize:xe.transferSize,ttfb:kd(xe),payloadDownloadTime:Cd(xe),serverTime:J||-1,measTime:new Date};if(de.ping=Math.max(.01,de.ttfb-(J||fe(M,mr))),de.duration=(W?Pd:X)(de),de.bps=(W?F:U)(de,ue),W&&ue){var Ct=+ue;de.transferSize&&(de.transferSize<Ct||de.transferSize/Ct>1.05)&&console.warn("Requested ".concat(Ct,"B but received ").concat(de.transferSize,"B (").concat(Math.round(de.transferSize/Ct*1e4)/100,"%)."))}or(M,Zt,mn).call(M,te,de);var Ve=de.duration;Nt(M,nr,fe(M,nr)<0?Ve:Math.min(fe(M,nr),Ve)),Nt(M,rr,fe(M,rr)+1),Nt(M,cr,0),fe(M,ir)?Nt(M,Ht,setTimeout(function(){return or(M,dr,lr).call(M)},fe(M,ir))):or(M,dr,lr).call(M)}}).catch(function(Ce){var qe,xe;it._cancel||(console.warn("Error fetching ".concat(Te,": ").concat(Ce)),Nt(M,cr,(qe=fe(M,cr),xe=qe++,qe)),xe<20?or(M,dr,lr).call(M):(Nt(M,cr,0),or(M,xr,ln).call(M,!1),fe(M,gt).call(M,"Connection failed to ".concat(Te,". Gave up after ").concat(20," retries."))))}))}function un(){var M=fe(this,Qt);M&&(M._cancel=!0)}var Pn=function(){function M(A){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=B.downloadApiUrl,ee=B.uploadApiUrl,te=B.throttleMs,ce=te===void 0?0:te,ue=B.estimatedServerTime,W=ue===void 0?0:ue;if(Di(this,M),ni(this,jr),ni(this,dr),ni(this,Zt),ni(this,xr),jt(this,H,{writable:!0,value:{}}),jt(this,re,{writable:!0,value:{}}),pr(this,"finishRequestDuration",1e3),pr(this,"getServerTime",Ed),jt(this,se,{writable:!0,value:function(K){return K}}),jt(this,Ie,{writable:!0,value:function(){}}),jt(this,Ee,{writable:!0,value:function(){}}),jt(this,wt,{writable:!0,value:function(){}}),jt(this,Ge,{writable:!0,value:function(){}}),jt(this,gt,{writable:!0,value:function(){}}),jt(this,ae,{writable:!0,value:void 0}),jt(this,ot,{writable:!0,value:void 0}),jt(this,Xe,{writable:!0,value:void 0}),jt(this,ct,{writable:!0,value:!1}),jt(this,ye,{writable:!0,value:{down:!1,up:!1}}),jt(this,Je,{writable:!0,value:{down:{},up:{}}}),jt(this,qt,{writable:!0,value:0}),jt(this,rr,{writable:!0,value:0}),jt(this,cr,{writable:!0,value:0}),jt(this,nr,{writable:!0,value:-1/0}),jt(this,ir,{writable:!0,value:0}),jt(this,mr,{writable:!0,value:0}),jt(this,Qt,{writable:!0,value:void 0}),jt(this,Ht,{writable:!0,value:void 0}),!A)throw new Error("Missing measurements argument");if(!q)throw new Error("Missing downloadApiUrl argument");if(!ee)throw new Error("Missing uploadApiUrl argument");Nt(this,ae,A),Nt(this,ot,q),Nt(this,Xe,ee),Nt(this,ir,ce),Nt(this,mr,Math.max(0,W))}return Ii(M,[{key:"results",get:function(){return fe(this,Je)}},{key:"qsParams",get:function(){return fe(this,H)},set:function(A){Nt(this,H,A)}},{key:"fetchOptions",get:function(){return fe(this,re)},set:function(A){Nt(this,re,A)}},{key:"responseHook",set:function(A){Nt(this,se,A)}},{key:"onRunningChange",set:function(A){Nt(this,Ie,A)}},{key:"onNewMeasurementStarted",set:function(A){Nt(this,Ee,A)}},{key:"onMeasurementResult",set:function(A){Nt(this,wt,A)}},{key:"onFinished",set:function(A){Nt(this,Ge,A)}},{key:"onConnectionError",set:function(A){Nt(this,gt,A)}},{key:"pause",value:function(){clearTimeout(fe(this,Ht)),or(this,jr,un).call(this),or(this,xr,ln).call(this,!1)}},{key:"play",value:function(){fe(this,ct)||(or(this,xr,ln).call(this,!0),or(this,dr,lr).call(this))}}]),M}(),Dn=["measureParallelLatency","parallelLatencyThrottleMs","downloadApiUrl","uploadApiUrl","estimatedServerTime"],Br=new WeakMap,Or=new WeakSet;function In(M){var A=this;fe(this,Br)&&(M?setTimeout(function(){return fe(A,Br).play()},20):fe(this,Br).pause())}var Wt=function(M){Uo(B,M);var A=zo(B);function B(q){var ee,te,ce,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},W=ue.measureParallelLatency,K=W!==void 0&&W,G=ue.parallelLatencyThrottleMs,J=G===void 0?100:G,Te=ue.downloadApiUrl,Ae=ue.uploadApiUrl,it=ue.estimatedServerTime,Ce=it===void 0?0:it,qe=Xs(ue,Dn);return Di(this,B),ni(Ir(ce=A.call(this,q,ds({downloadApiUrl:Te,uploadApiUrl:Ae,estimatedServerTime:Ce},qe))),Or),jt(Ir(ce),Br,{writable:!0,value:void 0}),K&&(Nt(Ir(ce),Br,new Pn([{dir:"down",bytes:0,count:1/0,bypassMinDuration:!0}],{downloadApiUrl:Te,uploadApiUrl:Ae,estimatedServerTime:Ce,throttleMs:J})),fe(Ir(ce),Br).qsParams={during:"".concat(q[0].dir,"load")},Un((ee=Ir(ce),fn(B.prototype)),"onRunningChange",or(Ir(ce),Or,In),ee,!0),Un((te=Ir(ce),fn(B.prototype)),"onConnectionError",function(){return fe(Ir(ce),Br).pause()},te,!0)),ce}return Ii(B,[{key:"latencyResults",get:function(){return fe(this,Br)&&fe(this,Br).results.down[0].timings}},{key:"onParallelLatencyResult",set:function(q){fe(this,Br)&&(fe(this,Br).onMeasurementResult=function(ee){return q(ee)})}},{key:"fetchOptions",get:function(){return kc(fn(B.prototype),"fetchOptions",this)},set:function(q){Un(fn(B.prototype),"fetchOptions",q,this,!0),fe(this,Br)&&(fe(this,Br).fetchOptions=q)}},{key:"onRunningChange",set:function(q){var ee=this;Un(fn(B.prototype),"onRunningChange",function(te){or(ee,Or,In).call(ee,te),q(te)},this,!0)}},{key:"onConnectionError",set:function(q){var ee=this;Un(fn(B.prototype),"onConnectionError",function(){fe(ee,Br)&&fe(ee,Br).pause(),q.apply(void 0,arguments)},this,!0)}}]),B}(Pn),Mn=["measurementId","logApiUrl"],It=new WeakMap,yr=new WeakMap,Wr=new WeakMap,en=new WeakMap,on=new WeakSet,tn=new WeakSet;function _i(M){fe(this,en)&&(Nt(this,Wr,+M.headers.get("cf-meta-request-time")),Nt(this,yr,M.body.slice(-300).split("___").pop()))}function rs(M){if(fe(this,en)){var A={type:M.type,bytes:M.bytes,ping:Math.round(M.ping),ttfb:Math.round(M.ttfb),payloadDownloadTime:Math.round(M.payloadDownloadTime),duration:Math.round(M.duration),transferSize:Math.round(M.transferSize),serverTime:Math.round(M.serverTime),token:fe(this,yr),requestTime:fe(this,Wr),measId:fe(this,It)};Nt(this,yr,null),Nt(this,Wr,null),fetch(fe(this,en),ds({method:"POST",body:JSON.stringify(A)},this.fetchOptions))}}var wi=function(M){Uo(B,M);var A=zo(B);function B(q){var ee,te,ce,ue,W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=W.measurementId,G=W.logApiUrl,J=Xs(W,Mn);return Di(this,B),ni(Ir(ue=A.call(this,q,J)),tn),ni(Ir(ue),on),jt(Ir(ue),It,{writable:!0,value:void 0}),jt(Ir(ue),yr,{writable:!0,value:void 0}),jt(Ir(ue),Wr,{writable:!0,value:void 0}),jt(Ir(ue),en,{writable:!0,value:void 0}),Nt(Ir(ue),It,K),Nt(Ir(ue),en,G),Un((ee=Ir(ue),fn(B.prototype)),"qsParams",G?{measId:fe(Ir(ue),It)}:{},ee,!0),Un((te=Ir(ue),fn(B.prototype)),"responseHook",function(Te){return or(Ir(ue),on,_i).call(Ir(ue),Te)},te,!0),Un((ce=Ir(ue),fn(B.prototype)),"onMeasurementResult",function(Te){return or(Ir(ue),tn,rs).call(Ir(ue),Te)},ce,!0),ue}return Ii(B,[{key:"qsParams",set:function(q){Un(fn(B.prototype),"qsParams",fe(this,en)?ds({measId:fe(this,It)},q):q,this,!0)}},{key:"responseHook",set:function(q){var ee=this;Un(fn(B.prototype),"responseHook",function(te){q(te),or(ee,on,_i).call(ee,te)},this,!0)}},{key:"onMeasurementResult",set:function(q){var ee=this;Un(fn(B.prototype),"onMeasurementResult",function(te){for(var ce=arguments.length,ue=new Array(ce>1?ce-1:0),W=1;W<ce;W++)ue[W-1]=arguments[W];q.apply(void 0,[te].concat(ue)),or(ee,tn,rs).call(ee,te)},this,!0)}}]),B}(Wt),zn=new WeakMap,ii=new WeakMap,Wi=new WeakMap,bi=new WeakSet,rn=new WeakSet,Ai=new WeakSet,Vn=function(){function M(A){if(Di(this,M),ni(this,Ai),ni(this,rn),ni(this,bi),jt(this,zn,{writable:!0,value:!1}),jt(this,ii,{writable:!0,value:void 0}),jt(this,Wi,{writable:!0,value:void 0}),!A)throw new Error("Missing operation to perform");Nt(this,Wi,A),this.play()}return Ii(M,[{key:"pause",value:function(){or(this,Ai,Si).call(this),or(this,bi,$n).call(this,!1)}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){fe(this,zn)||(or(this,bi,$n).call(this,!0),or(this,rn,qn).call(this))}}]),M}();function $n(M){M!==fe(this,zn)&&Nt(this,zn,M)}function qn(){var M=this,A=Nt(this,ii,fe(this,Wi).call(this).then(function(){!A._cancel&&or(M,rn,qn).call(M)}))}function Si(){var M=fe(this,ii);M&&(M._cancel=!0)}var Kn=new WeakMap,Vi=function(){function M(){var A=this,B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=B.download,ee=B.upload;if(Di(this,M),pr(this,"qsParams",{}),pr(this,"fetchOptions",{}),jt(this,Kn,{writable:!0,value:[]}),!q&&!ee)throw new Error("Missing at least one of download/upload config");[[q,"download"],[ee,"upload"]].filter(function(ce){return Mi(ce,1)[0]}).forEach(function(ce){var ue=Mi(ce,2),W=ue[0],K=ue[1],G=W.apiUrl,J=W.chunkSize;if(!G)throw new Error("Missing ".concat(K," apiUrl argument"));if(!J)throw new Error("Missing ".concat(K," chunkSize argument"))});var te=function(ce){var ue=ce.apiUrl,W=ce.qsParams,K=W===void 0?{}:W,G=ce.fetchOptions,J=G===void 0?{}:G;return new Vn(function(){var Te=Object.assign({},K,A.qsParams),Ae="".concat(ue.startsWith("http")||ue.startsWith("//")?"":window.location.origin).concat(ue,"?").concat(Object.entries(Te).map(function(Ce){var qe=Mi(Ce,2),xe=qe[0],de=qe[1];return"".concat(xe,"=").concat(de)}).join("&")),it=Object.assign({},J,A.fetchOptions);return fetch(Ae,it).then(function(Ce){if(Ce.ok)return Ce;throw Error(Ce.statusText)}).then(function(Ce){return Ce.text()})})};q&&fe(this,Kn).push(te({apiUrl:q.apiUrl,qsParams:{bytes:"".concat(q.chunkSize)}})),ee&&fe(this,Kn).push(te({apiUrl:ee.apiUrl,fetchOptions:{method:"POST",body:"0".repeat(ee.chunkSize)}}))}return Ii(M,[{key:"pause",value:function(){fe(this,Kn).forEach(function(A){return A.pause()})}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){fe(this,Kn).forEach(function(A){return A.play()})}}]),M}(),Li=["iceServers","acceptIceCandidate","dataChannelCfg"],Gn=new WeakMap,Tn=new WeakMap,yn=new WeakMap,xn=new WeakMap,Rn=new WeakMap,Ri=function(){function M(){var A=this,B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=B.iceServers,ee=q===void 0?[]:q,te=B.acceptIceCandidate,ce=te===void 0?function(Ae){var it=Ae.protocol||"";if(!it&&Ae.candidate){var Ce=Ae.candidate.split(" ");Ce.length>=3&&(it=Ce[2])}return it.toLowerCase()==="udp"}:te,ue=B.dataChannelCfg,W=ue===void 0?{ordered:!1,maxRetransmits:0}:ue,K=Xs(B,Li);Di(this,M),pr(this,"onOpen",function(){}),pr(this,"onClose",function(){}),pr(this,"onMessageReceived",function(){}),jt(this,Gn,{writable:!0,value:!1}),jt(this,Tn,{writable:!0,value:void 0}),jt(this,yn,{writable:!0,value:void 0}),jt(this,xn,{writable:!0,value:void 0}),jt(this,Rn,{writable:!0,value:void 0});var G=new RTCPeerConnection(ds({iceServers:ee},K)),J=new RTCPeerConnection(ds({iceServers:ee},K)),Te=G.createDataChannel("channel",W);Te.onopen=function(){Nt(A,Gn,!0),A.onOpen()},Te.onclose=function(){return A.close()},J.ondatachannel=function(Ae){var it=Ae.channel;it.onclose=function(){return A.close()},it.onmessage=function(Ce){return A.onMessageReceived(Ce.data)},Nt(A,Rn,it)},G.onicecandidate=function(Ae){Ae.candidate&&ce(Ae.candidate)&&J.addIceCandidate(Ae.candidate)},J.onicecandidate=function(Ae){Ae.candidate&&ce(Ae.candidate)&&G.addIceCandidate(Ae.candidate)},G.createOffer().then(function(Ae){return G.setLocalDescription(Ae)}).then(function(){return J.setRemoteDescription(G.localDescription)}).then(function(){return J.createAnswer()}).then(function(Ae){return J.setLocalDescription(Ae)}).then(function(){return G.setRemoteDescription(J.localDescription)}),Nt(this,Tn,G),Nt(this,yn,J),Nt(this,xn,Te),Nt(this,Gn,!1)}return Ii(M,[{key:"send",value:function(A){return fe(this,xn).send(A)}},{key:"close",value:function(){return fe(this,Tn)&&fe(this,Tn).close(),fe(this,yn)&&fe(this,yn).close(),fe(this,xn)&&fe(this,xn).close(),fe(this,Rn)&&fe(this,Rn).close(),fe(this,Gn)&&this.onClose(),Nt(this,Gn,!1),this}}]),M}(),Fr=new WeakMap,si=new WeakMap,Nr=new WeakMap,Sr=new WeakMap,dt=new WeakMap,Qe=new WeakMap,Cr=function(){function M(){var A=this,B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=B.turnServerUri,ee=B.turnServerCredsApi,te=B.turnServerCredsApiParser,ce=te===void 0?function(_t){return{turnServerUser:_t.username,turnServerPass:_t.credential}}:te,ue=B.turnServerCredsApiIncludeCredentials,W=ue!==void 0&&ue,K=B.turnServerUser,G=B.turnServerPass,J=B.numMsgs,Te=J===void 0?100:J,Ae=B.batchSize,it=Ae===void 0?10:Ae,Ce=B.batchWaitTime,qe=Ce===void 0?10:Ce,xe=B.responsesWaitTime,de=xe===void 0?5e3:xe,Ct=B.connectionTimeout,Ve=Ct===void 0?5e3:Ct;if(Di(this,M),jt(this,Fr,{writable:!0,value:function(){}}),jt(this,si,{writable:!0,value:function(){}}),jt(this,Nr,{writable:!0,value:function(){}}),pr(this,"onMsgSent",function(){}),pr(this,"onAllMsgsSent",function(){}),pr(this,"onMsgReceived",function(){}),jt(this,Sr,{writable:!0,value:{}}),jt(this,dt,{writable:!0,value:void 0}),jt(this,Qe,{writable:!0,value:void 0}),!q)throw new Error("Missing turnServerUri argument");if(!(K&&G||ee))throw new Error("Missing either turnServerCredsApi or turnServerUser+turnServerPass arguments");Nt(this,Qe,Te),(K&&G?Promise.resolve({turnServerUser:K,turnServerPass:G}):fetch(ee,{credentials:W?"include":void 0}).then(function(_t){return _t.json()}).then(function(_t){if(_t.error)throw _t.error;return _t}).then(ce)).catch(function(_t){return fe(A,Fr).call(A,_t)}).then(function(_t){var mt=_t.turnServerUser,bt=_t.turnServerPass,Et=Nt(A,dt,new Ri({iceServers:[{urls:"turn:".concat(q,"?transport=udp"),username:mt,credential:bt}],iceTransportPolicy:"relay"})),He=!1;setTimeout(function(){He||(Et.close(),fe(A,si).call(A,"ICE connection timeout!"))},Ve);var vr=fe(A,Sr);Et.onOpen=function(){He=!0;var _n=A;(function Bt(Ln){if(Ln<=Te){for(var ai=Ln;ai<=Math.min(Te,Ln+it-1);)vr[ai]=!1,Et.send(ai),_n.onMsgSent(ai),ai++;setTimeout(function(){return Bt(ai)},qe)}else{_n.onAllMsgsSent(Object.keys(vr).length);var $i=function(){Et.close(),fe(_n,Nr).call(_n,_n.results)},Ts=setTimeout($i,de),ga=Object.values(fe(_n,Sr)).filter(function(Hs){return!Hs}).length;Et.onMessageReceived=function(Hs){clearTimeout(Ts),vr[Hs]=!0,_n.onMsgReceived(Hs),--ga<=0&&Object.values(fe(_n,Sr)).every(function(Ei){return Ei})?$i():Ts=setTimeout($i,de)}}})(1)},Et.onMessageReceived=function(_n){vr[_n]=!0,A.onMsgReceived(_n)}}).catch(function(_t){return fe(A,si).call(A,_t.toString())})}return Ii(M,[{key:"onCredentialsFailure",set:function(A){Nt(this,Fr,A)}},{key:"onConnectionError",set:function(A){Nt(this,si,A)}},{key:"onFinished",set:function(A){Nt(this,Nr,A)}},{key:"results",get:function(){var A=fe(this,Qe),B=Object.keys(fe(this,Sr)).length,q=Object.entries(fe(this,Sr)).filter(function(ee){return!Mi(ee,2)[1]}).map(function(ee){return+Mi(ee,1)[0]});return{totalMessages:A,numMessagesSent:B,packetLoss:q.length/B,lostMessages:q}}}]),M}(),Qr=["downloadChunkSize","uploadChunkSize","downloadApiUrl","uploadApiUrl"],Yr=new WeakMap,Ni=function(M){Uo(B,M);var A=zo(B);function B(){var q,ee,te,ce,ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=ue.downloadChunkSize,K=ue.uploadChunkSize,G=ue.downloadApiUrl,J=ue.uploadApiUrl,Te=Xs(ue,Qr);return Di(this,B),jt(Ir(ce=A.call(this,Te)),Yr,{writable:!0,value:void 0}),(W||K)&&(Nt(Ir(ce),Yr,new Vi({download:W?{apiUrl:G,chunkSize:W}:null,upload:K?{apiUrl:J,chunkSize:K}:null})),Un((q=Ir(ce),fn(B.prototype)),"onCredentialsFailure",Un((te=Ir(ce),fn(B.prototype)),"onConnectionError",Un((ee=Ir(ce),fn(B.prototype)),"onFinished",function(){return fe(Ir(ce),Yr).stop()},ee,!0),te,!0),q,!0)),ce}return Ii(B,[{key:"qsParams",set:function(q){fe(this,Yr)&&(fe(this,Yr).qsParams=q)}},{key:"fetchOptions",set:function(q){fe(this,Yr)&&(fe(this,Yr).fetchOptions=q)}},{key:"onCredentialsFailure",set:function(q){var ee=this;Un(fn(B.prototype),"onCredentialsFailure",function(){q.apply(void 0,arguments),fe(ee,Yr)&&fe(ee,Yr).stop()},this,!0)}},{key:"onConnectionError",set:function(q){var ee=this;Un(fn(B.prototype),"onConnectionError",function(){q.apply(void 0,arguments),fe(ee,Yr)&&fe(ee,Yr).stop()},this,!0)}},{key:"onFinished",set:function(q){var ee=this;Un(fn(B.prototype),"onFinished",function(){q.apply(void 0,arguments),fe(ee,Yr)&&fe(ee,Yr).stop()},this,!0)}}]),B}(Cr),ha=["reachable"],ea=Ii(function M(A){var B=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee=q.timeout,te=ee===void 0?-1:ee,ce=q.fetchOptions,ue=ce===void 0?{}:ce;Di(this,M),pr(this,"onFinished",function(){});var W=!1,K=function(G){var J=G.reachable,Te=Xs(G,ha);W||(W=!0,B.onFinished(ds({targetUrl:A,reachable:J},Te)))};fetch(A,ue).then(function(G){K({reachable:!0,response:G})}).catch(function(G){K({reachable:!1,error:G})}),te>0&&setTimeout(function(){return K({reachable:!1,error:"Request timeout"})},te)}),kt=function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;if(!M.length)return 0;var B=M.slice().sort(function(ce,ue){return ce-ue}),q=(M.length-1)*A,ee=q%1;if(ee===0)return B[Math.round(q)];var te=[Math.floor,Math.ceil].map(function(ce){return B[ce(q)]});return te[0]+(te[1]-te[0])*ee},Gr=new WeakMap,Cs=new WeakMap,so=function(){function M(A){var B=this;Di(this,M),pr(this,"getLatencyPoints",function(q){return q.timings.map(function(ee){return ee.ping})}),pr(this,"getLatency",function(q){return kt(B.getLatencyPoints(q),fe(B,Gr).latencyPercentile)}),pr(this,"getBandwidthPoints",function(q){return Object.entries(q).map(function(ee){var te=Mi(ee,2),ce=te[0];return te[1].timings.map(function(ue){var W=ue.bps,K=ue.duration,G=ue.ping,J=ue.measTime,Te=ue.serverTime,Ae=ue.transferSize;return{bytes:+ce,bps:W,duration:K,ping:G,measTime:J,serverTime:Te,transferSize:Ae}})}).flat()}),pr(this,"getBandwidth",function(q){return kt(B.getBandwidthPoints(q).filter(function(ee){return ee.duration>=fe(B,Gr).bandwidthMinRequestDuration}).map(function(ee){return ee.bps}).filter(function(ee){return ee}),fe(B,Gr).bandwidthPercentile)}),pr(this,"getLoadedLatency",function(q){return B.getLatency({timings:fe(B,Cs).call(B,q)})}),pr(this,"getLoadedJitter",function(q){return B.getJitter({timings:fe(B,Cs).call(B,q)})}),pr(this,"getLoadedLatencyPoints",function(q){return B.getLatencyPoints({timings:fe(B,Cs).call(B,q)})}),pr(this,"getPacketLoss",function(q){return q.packetLoss}),pr(this,"getPacketLossDetails",function(q){return q}),pr(this,"getReachability",function(q){return!!q.reachable}),pr(this,"getReachabilityDetails",function(q){return{host:q.host,reachable:q.reachable}}),jt(this,Gr,{writable:!0,value:void 0}),jt(this,Cs,{writable:!0,value:function(q){return Object.values(q).filter(function(ee){return ee.timings.length&&Math.min.apply(Math,Zs(ee.timings.map(function(te){return te.duration})))>=fe(B,Gr).loadedRequestMinDuration}).map(function(ee){return ee.sideLatency||[]}).flat().slice(-fe(B,Gr).loadedLatencyMaxPoints)}}),Nt(this,Gr,A)}return Ii(M,[{key:"getJitter",value:function(A){var B=this.getLatencyPoints(A);return B.length<2?null:B.reduce(function(q,ee){var te=q.sumDeltas,ce=te===void 0?0:te,ue=q.prevLatency;return{sumDeltas:ce+(ue!==void 0?Math.abs(ue-ee):0),prevLatency:ee}},{}).sumDeltas/(B.length-1)}}]),M}(),ao=["bad","poor","average","good","great"],fa={loadedLatencyIncrease:function(M){return M.latency&&(M.downLoadedLatency||M.upLoadedLatency)?Math.max(M.downLoadedLatency,M.upLoadedLatency)-M.latency:void 0}},Tc={packetLoss:0},oo=new WeakMap,zl=function(){function M(A){Di(this,M),jt(this,oo,{writable:!0,value:void 0}),Nt(this,oo,A)}return Ii(M,[{key:"getScores",value:function(A){var B=Object.assign.apply(Object,Zs(Object.entries(fe(this,oo).aimMeasurementScoring).map(function(q){var ee=Mi(q,2),te=ee[0],ce=ee[1],ue=fa.hasOwnProperty(te)?fa[te](A):A[te];return ue===void 0?Tc.hasOwnProperty(te)?pr({},te,Tc[te]):{}:pr({},te,ue===void 0?0:+ce(ue))})));return Object.assign.apply(Object,[{}].concat(Zs(Object.entries(fe(this,oo).aimExperiencesDefs).filter(function(q){return Mi(q,2)[1].input.every(function(ee){return B.hasOwnProperty(ee)})}).map(function(q){var ee,te=Mi(q,2),ce=te[0],ue=te[1],W=ue.input,K=ue.pointThresholds,G=Math.max(0,(ee=W.map(function(Te){return B[Te]}),ee.reduce(function(Te,Ae){return Te+Ae},0))),J=Ys(K,[0,1,2,3,4])(G);return pr({},ce,{points:G,classificationIdx:J,classificationName:ao[J]})}))))}}]),M}(),co=new WeakMap,xc=new WeakMap,Wo=new WeakMap,An=new WeakMap,Hl=new WeakMap,Wl=new WeakMap,Vl=new WeakMap,$l=new WeakMap,ql=function(){function M(A){var B=this;Di(this,M),pr(this,"raw",void 0),pr(this,"getUnloadedLatency",function(){return fe(B,An).call(B,"getLatency","latency")}),pr(this,"getUnloadedJitter",function(){return fe(B,An).call(B,"getJitter","latency")}),pr(this,"getUnloadedLatencyPoints",function(){return fe(B,An).call(B,"getLatencyPoints","latency",[])}),pr(this,"getDownLoadedLatency",function(){return fe(B,An).call(B,"getLoadedLatency","download")}),pr(this,"getDownLoadedJitter",function(){return fe(B,An).call(B,"getLoadedJitter","download")}),pr(this,"getDownLoadedLatencyPoints",function(){return fe(B,An).call(B,"getLoadedLatencyPoints","download",[])}),pr(this,"getUpLoadedLatency",function(){return fe(B,An).call(B,"getLoadedLatency","upload")}),pr(this,"getUpLoadedJitter",function(){return fe(B,An).call(B,"getLoadedJitter","upload")}),pr(this,"getUpLoadedLatencyPoints",function(){return fe(B,An).call(B,"getLoadedLatencyPoints","upload",[])}),pr(this,"getDownloadBandwidth",function(){return fe(B,An).call(B,"getBandwidth","download")}),pr(this,"getDownloadBandwidthPoints",function(){return fe(B,An).call(B,"getBandwidthPoints","download",[])}),pr(this,"getUploadBandwidth",function(){return fe(B,An).call(B,"getBandwidth","upload")}),pr(this,"getUploadBandwidthPoints",function(){return fe(B,An).call(B,"getBandwidthPoints","upload",[])}),pr(this,"getPacketLoss",function(){return fe(B,An).call(B,"getPacketLoss","packetLoss")}),pr(this,"getPacketLossDetails",function(){return fe(B,An).call(B,"getPacketLossDetails","packetLoss",void 0,!0)}),pr(this,"getScores",function(){return fe(B,Wo).getScores(B.getSummary())}),jt(this,co,{writable:!0,value:void 0}),jt(this,xc,{writable:!0,value:void 0}),jt(this,Wo,{writable:!0,value:void 0}),jt(this,An,{writable:!0,value:function(q,ee){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,ce=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return B.raw.hasOwnProperty(ee)&&B.raw[ee].started?ce&&B.raw[ee].error?{error:B.raw[ee].error}:fe(B,xc)[q](B.raw[ee].results):te}}),jt(this,Hl,{writable:!0,value:function(){return fe(B,An).call(B,"getReachability","v4Reachability")}}),jt(this,Wl,{writable:!0,value:function(){return fe(B,An).call(B,"getReachabilityDetails","v4Reachability")}}),jt(this,Vl,{writable:!0,value:function(){return fe(B,An).call(B,"getReachability","v6Reachability")}}),jt(this,$l,{writable:!0,value:function(){return fe(B,An).call(B,"getReachabilityDetails","v6Reachability")}}),Nt(this,co,A),this.clear(),Nt(this,xc,new so(fe(this,co))),Nt(this,Wo,new zl(fe(this,co)))}return Ii(M,[{key:"isFinished",get:function(){return Object.values(this.raw).every(function(A){return A.finished})}},{key:"clear",value:function(){this.raw=Object.assign.apply(Object,[{}].concat(Zs(Zs(new Set(fe(this,co).measurements.map(function(A){return A.type}))).map(function(A){return pr({},A,{started:!1,finished:!1,results:{}})}))))}},{key:"getSummary",value:function(){var A={download:this.getDownloadBandwidth,upload:this.getUploadBandwidth,latency:this.getUnloadedLatency,jitter:this.getUnloadedJitter,downLoadedLatency:this.getDownLoadedLatency,downLoadedJitter:this.getDownLoadedJitter,upLoadedLatency:this.getUpLoadedLatency,upLoadedJitter:this.getUpLoadedJitter,packetLoss:this.getPacketLoss,v4Reachability:fe(this,Hl),v6Reachability:fe(this,Vl)};return Object.assign.apply(Object,Zs(Object.entries(A).map(function(B){var q=Mi(B,2),ee=q[0],te=(0,q[1])();return te===void 0?{}:pr({},ee,te)})))}}]),M}(),Vo=function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return M&&Math.round(M*Math.pow(10,A))/Math.pow(10,A)},$o=function(M){return M.map(function(A){return Vo(A,2)})},Oc=function(M){return M.map(function(A){return{bytes:+A.bytes,bps:Vo(A.bps)}})},Td={latencyMs:["getUnloadedLatencyPoints",$o],download:["getDownloadBandwidthPoints",Oc],upload:["getUploadBandwidthPoints",Oc],downLoadedLatencyMs:["getDownLoadedLatencyPoints",$o],upLoadedLatencyMs:["getUpLoadedLatencyPoints",$o],packetLoss:["getPacketLossDetails",function(M){return M.error?void 0:{numMessages:M.numMessagesSent,lossRatio:Vo(M.packetLoss,4)}}]},Ye=function(M,A){var B=A.apiUrl,q={};Object.entries(Td).forEach(function(te){var ce=Mi(te,2),ue=ce[0],W=Mi(ce[1],2),K=W[0],G=W[1],J=G===void 0?function(Ae){return Ae}:G,Te=M[K]();Te&&(q[ue]=J(Te))});var ee=M.getScores();ee&&(q.scores=Object.assign.apply(Object,[{}].concat(Zs(Object.entries(ee).map(function(te){var ce,ue=Mi(te,2),W=ue[0],K=ue[1];return pr({},W,{points:(ce=K).points,classification:ce.classificationName})}))))),fetch(B,{method:"POST",body:JSON.stringify(q)})},qo=["type"],Z2=["numPackets"],eS=["bytes"],Vh=["latency","latencyUnderLoad","download","upload"],Ov=function(){return"".concat(Math.round(1e16*Math.random()))},$h=new WeakMap,Dc=new WeakMap,Jn=new WeakMap,Kl=new WeakMap,xd=new WeakMap,ma=new WeakMap,Ic=new WeakMap,Od=new WeakMap,Dd=new WeakMap,lo=new WeakMap,Id=new WeakMap,Gl=new WeakSet,qh=new WeakSet,Jl=new WeakSet,Ko=new WeakSet,Dv=new WeakSet,Iv=new WeakSet,Ps=new WeakSet,tS=function(){function M(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Di(this,M),ni(this,Ps),ni(this,Iv),ni(this,Dv),ni(this,Ko),ni(this,Jl),ni(this,qh),ni(this,Gl),pr(this,"onRunningChange",function(){}),pr(this,"onResultsChange",function(){}),jt(this,$h,{writable:!0,value:function(){}}),jt(this,Dc,{writable:!0,value:function(){}}),jt(this,Jn,{writable:!0,value:void 0}),jt(this,Kl,{writable:!0,value:void 0}),jt(this,xd,{writable:!0,value:Ov()}),jt(this,ma,{writable:!0,value:-1}),jt(this,Ic,{writable:!0,value:void 0}),jt(this,Od,{writable:!0,value:1e6}),jt(this,Dd,{writable:!0,value:1e6}),jt(this,lo,{writable:!0,value:!1}),jt(this,Id,{writable:!0,value:!1}),Nt(this,Jn,Object.assign({},Fl,A,Ul)),Nt(this,Kl,new ql(fe(this,Jn))),fe(this,Jn).autoStart&&this.play()}return Ii(M,[{key:"results",get:function(){return fe(this,Kl)}},{key:"isRunning",get:function(){return fe(this,lo)}},{key:"isFinished",get:function(){return fe(this,Id)}},{key:"onFinish",set:function(A){Nt(this,$h,A)}},{key:"onError",set:function(A){Nt(this,Dc,A)}},{key:"pause",value:function(){Vh.includes(or(this,Jl,Ad).call(this))&&fe(this,Ic).pause(),or(this,Gl,Md).call(this,!1)}},{key:"play",value:function(){fe(this,lo)||(or(this,Gl,Md).call(this,!0),or(this,Ps,zs).call(this))}},{key:"restart",value:function(){or(this,Dv,rS).call(this),this.play()}}]),M}();function Md(M){M!==fe(this,lo)&&(Nt(this,lo,M),this.onRunningChange(fe(this,lo)))}function Mv(M){var A=this;M!==fe(this,Id)&&(Nt(this,Id,M),M&&setTimeout(function(){return fe(A,$h).call(A,A.results)}))}function Ad(){return fe(this,ma)<0||fe(this,ma)>=fe(this,Jn).measurements.length?null:fe(this,Jn).measurements[fe(this,ma)].type}function Mc(){return fe(this,Kl).raw[or(this,Jl,Ad).call(this)]||void 0}function rS(){or(this,Iv,nS).call(this),Nt(this,xd,Ov()),Nt(this,ma,-1),Nt(this,Ic,void 0),or(this,Gl,Md).call(this,!1),or(this,qh,Mv).call(this,!1),fe(this,Kl).clear()}function nS(){var M=fe(this,Ic);M&&(M.onFinished=M.onConnectionError=M.onFail=M.onMsgReceived=M.onCredentialsFailure=M.onMeasurementResult=function(){},Vh.includes(or(this,Jl,Ad).call(this))&&M.pause())}function zs(){var M,A=this;if(!(Vh.includes(or(this,Jl,Ad).call(this))&&or(this,Ko,Mc).call(this)&&or(this,Ko,Mc).call(this).started)||or(this,Ko,Mc).call(this).finished||or(this,Ko,Mc).call(this).finishedCurrentRound||or(this,Ko,Mc).call(this).error){if(Nt(this,ma,(M=fe(this,ma),++M)),fe(this,ma)>=fe(this,Jn).measurements.length)return or(this,Gl,Md).call(this,!1),void or(this,qh,Mv).call(this,!0);var B,q=fe(this,Jn).measurements[fe(this,ma)],ee=q.type,te=Xs(q,qo),ce=or(this,Ko,Mc).call(this),ue=fe(this,Jn),W=ue.downloadApiUrl,K=ue.uploadApiUrl,G=ue.estimatedServerTime;switch(ee){case"v4Reachability":case"v6Reachability":(B=new ea("https://".concat(te.host),{fetchOptions:{method:"GET",mode:"no-cors"}})).onFinished=function(Ve){ce.finished=!0,ce.results=ds({host:te.host},Ve),A.onResultsChange({type:ee}),or(A,Ps,zs).call(A)};break;case"rpki":(B=new ea("https://".concat(fe(this,Jn).rpkiInvalidHost),{timeout:5e3})).onFinished=function(Ve){(Ve.response?Ve.response.json():Promise.resolve()).then(function(_t){ce.finished=!0,ce.results=ds({host:fe(A,Jn).rpkiInvalidHost,filteringInvalids:!Ve.reachable},_t?{asn:_t.asn,name:_t.name}:{}),A.onResultsChange({type:ee}),or(A,Ps,zs).call(A)})};break;case"nxdomain":(B=new ea("https://".concat(te.nxhost),{fetchOptions:{mode:"no-cors"}})).onFinished=function(Ve){ce.finished=!0,ce.results={host:te.nxhost,reachable:Ve.reachable},A.onResultsChange({type:ee}),or(A,Ps,zs).call(A)};break;case"packetLoss":case"packetLossUnderLoad":ce.finished=!1;var J=te.numPackets,Te=Xs(te,Z2),Ae=fe(this,Jn),it=Ae.turnServerUri,Ce=Ae.turnServerCredsApiUrl,qe=Ae.turnServerUser,xe=Ae.turnServerPass,de=Ae.includeCredentials;(B=new Ni(ds({turnServerUri:it,turnServerCredsApi:Ce,turnServerCredsApiIncludeCredentials:de,turnServerUser:qe,turnServerPass:xe,numMsgs:J,downloadChunkSize:te.loadDown?fe(this,Od):void 0,uploadChunkSize:te.loadUp?fe(this,Dd):void 0,downloadApiUrl:W,uploadApiUrl:K},Te))).onMsgReceived=function(){ce.results=Object.assign({},B.results),A.onResultsChange({type:ee})},B.onFinished=function(){ce.finished=!0,A.onResultsChange({type:ee}),or(A,Ps,zs).call(A)},B.onConnectionError=function(Ve){ce.error=Ve,A.onResultsChange({type:ee}),fe(A,Dc).call(A,"Connection error while measuring packet loss: ".concat(Ve)),or(A,Ps,zs).call(A)},B.onCredentialsFailure=function(){ce.error="unable to get turn server credentials",A.onResultsChange({type:ee}),fe(A,Dc).call(A,"Error while measuring packet loss: unable to get turn server credentials."),or(A,Ps,zs).call(A)};break;case"latency":case"latencyUnderLoad":ce.finished=!1,(B=new wi([{dir:"down",bytes:0,count:te.numPackets,bypassMinDuration:!0}],{downloadApiUrl:W,uploadApiUrl:K,estimatedServerTime:G,logApiUrl:fe(this,Jn).logMeasurementApiUrl,measurementId:fe(this,xd),downloadChunkSize:te.loadDown?fe(this,Od):void 0,uploadChunkSize:te.loadUp?fe(this,Dd):void 0})).fetchOptions={credentials:fe(this,Jn).includeCredentials?"include":void 0},B.onMeasurementResult=B.onNewMeasurementStarted=function(Ve,_t){ce.results=Object.assign({},_t.down[0]),A.onResultsChange({type:ee})},B.onFinished=function(){ce.finished=!0,A.onResultsChange({type:ee}),fe(A,lo)&&or(A,Ps,zs).call(A)},B.onConnectionError=function(Ve){ce.error=Ve,A.onResultsChange({type:ee}),fe(A,Dc).call(A,"Connection error while measuring latency: ".concat(Ve)),or(A,Ps,zs).call(A)},B.play();break;case"download":case"upload":if(ce.finished||ce.error)or(this,Ps,zs).call(this);else{delete ce.finishedCurrentRound;var Ct=fe(this,Jn)["measure".concat(ee==="download"?"Down":"Up","loadLoadedLatency")];(B=new wi([ds({dir:ee==="download"?"down":"up"},te)],{downloadApiUrl:W,uploadApiUrl:K,estimatedServerTime:G,logApiUrl:fe(this,Jn).logMeasurementApiUrl,measurementId:fe(this,xd),measureParallelLatency:Ct,parallelLatencyThrottleMs:fe(this,Jn).loadedLatencyThrottle})).fetchOptions={credentials:fe(this,Jn).includeCredentials?"include":void 0},B.finishRequestDuration=fe(this,Jn).bandwidthFinishRequestDuration,B.onNewMeasurementStarted=function(Ve){var _t=Ve.count,mt=Ve.bytes,bt=ce.results=Object.assign({},ce.results);!bt.hasOwnProperty(mt)&&(bt[mt]={timings:[],numMeasurements:0,sideLatency:Ct?[]:void 0}),bt[mt].numMeasurements-bt[mt].timings.length!==_t&&(bt[mt].numMeasurements+=_t,A.onResultsChange({type:ee}))},B.onMeasurementResult=function(Ve){var _t=Ve.bytes,mt=Xs(Ve,eS);ce.results[_t].timings.push(mt),ce.results=Object.assign({},ce.results),A.onResultsChange({type:ee})},B.onParallelLatencyResult=function(Ve){ce.results[te.bytes].sideLatency.push(Ve),ce.results=Object.assign({},ce.results),A.onResultsChange({type:ee})},B.onFinished=function(Ve){var _t=!fe(A,Jn).measurements.slice(fe(A,ma)+1).map(function(Et){return Et.type}).includes(ee),mt=Math.min.apply(Math,Zs(Object.values(ee==="download"?Ve.down:Ve.up).slice(-1)[0].timings.map(function(Et){return Et.duration})));if(_t||!te.bypassMinDuration&&mt>fe(A,Jn).bandwidthFinishRequestDuration){ce.finished=!0,A.onResultsChange({type:ee});var bt=.5*Object.keys(ce.results).map(function(Et){return+Et}).sort(function(Et,He){return He-Et})[0];ee==="download"&&Nt(A,Od,bt),ee==="upload"&&Nt(A,Dd,bt)}else ce.finishedCurrentRound=!0;fe(A,lo)&&or(A,Ps,zs).call(A)},B.onConnectionError=function(Ve){ce.error=Ve,A.onResultsChange({type:ee}),fe(A,Dc).call(A,"Connection error while measuring ".concat(ee,": ").concat(Ve)),or(A,Ps,zs).call(A)},B.play()}}Nt(this,Ic,B),ce.started=!0,this.onResultsChange({type:ee})}else fe(this,Ic).play()}var Ld=new WeakMap,Kh=new WeakMap,iS=function(M){Uo(B,M);var A=zo(B);function B(q){var ee,te;Di(this,B);for(var ce=arguments.length,ue=new Array(ce>1?ce-1:0),W=1;W<ce;W++)ue[W-1]=arguments[W];return jt(Ir(te=A.call.apply(A,[this,q].concat(ue))),Ld,{writable:!0,value:void 0}),jt(Ir(te),Kh,{writable:!0,value:function(K){fe(Ir(te),Ld)&&Ye(K,{apiUrl:fe(Ir(te),Ld)})}}),Un((ee=Ir(te),fn(B.prototype)),"onFinish",fe(Ir(te),Kh),ee,!0),Nt(Ir(te),Ld,Object.assign({},Fl,q,Ul).logAimApiUrl),te}return Ii(B,[{key:"onFinish",set:function(q){var ee=this;Un(fn(B.prototype),"onFinish",function(te){q(te),fe(ee,Kh).call(ee,te)},this,!0)}}]),B}(tS);function Av(M,A){var B=typeof Symbol<"u"&&M[Symbol.iterator]||M["@@iterator"];if(!B){if(Array.isArray(M)||(B=function(W,K){if(W){if(typeof W=="string")return Lv(W,K);var G={}.toString.call(W).slice(8,-1);return G==="Object"&&W.constructor&&(G=W.constructor.name),G==="Map"||G==="Set"?Array.from(W):G==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(G)?Lv(W,K):void 0}}(M))||A){B&&(M=B);var q=0,ee=function(){};return{s:ee,n:function(){return q>=M.length?{done:!0}:{done:!1,value:M[q++]}},e:function(W){throw W},f:ee}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var te,ce=!0,ue=!1;return{s:function(){B=B.call(M)},n:function(){var W=B.next();return ce=W.done,W},e:function(W){ue=!0,te=W},f:function(){try{ce||B.return==null||B.return()}finally{if(ue)throw te}}}}function Lv(M,A){(A==null||A>M.length)&&(A=M.length);for(var B=0,q=Array(A);B<A;B++)q[B]=M[B];return q}var sS=[c],Nv=!1,Ql=function(){return(0,C.A)(function G(){(0,o.A)(this,G)},null,[{key:"config",value:function(G){if(!G)throw new Error("'token' is empty, please provide it in config");this.apiKey=G;var J=P(Xt,void 0,I.apply(void 0,sS));window.STORE=J,hn.default.init({store:J})}},{key:"getCameras",value:(K=(0,p.A)(b().mark(function G(){var J,Te,Ae,it;return b().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(Ce.prev=0,J=navigator.userAgent.includes("Firefox"),Te=[],!J){Ce.next=8;break}return Ce.next=6,new Promise(function(qe,xe){navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(){var de=(0,p.A)(b().mark(function Ct(Ve){var _t;return b().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return mt.next=2,navigator.mediaDevices.enumerateDevices();case 2:_t=mt.sent,Te=_t.filter(function(bt){return bt.kind==="videoinput"}).map(function(bt){return new Sc(bt.deviceId,bt.groupId,bt.kind,bt.label)}),qe(Te),Ve.getTracks().forEach(function(bt){return bt.stop()});case 6:case"end":return mt.stop()}},Ct)}));return function(Ct){return de.apply(this,arguments)}}()).catch(function(de){console.error("Error in getCameras()",de),xe(de)})});case 6:Ce.next=12;break;case 8:return Ce.next=10,navigator.mediaDevices.enumerateDevices();case 10:Ae=Ce.sent,Te=Ae.filter(function(qe){return qe.kind==="videoinput"}).map(function(qe){return new Sc(qe.deviceId,qe.groupId,qe.kind,qe.label)});case 12:return Ce.abrupt("return",Te);case 15:Ce.prev=15,Ce.t0=Ce.catch(0),it=Ce.t0.message,Ce.t0 instanceof TypeError&&Ce.t0.name==="TypeError"&&(it=ar.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getCameras(), ".concat(it));case 20:case"end":return Ce.stop()}},G,null,[[0,15]])})),function(){return K.apply(this,arguments)})},{key:"getMicrophones",value:(W=(0,p.A)(b().mark(function G(){var J,Te,Ae,it;return b().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(Ce.prev=0,J=navigator.userAgent.includes("Firefox"),Te=[],!J){Ce.next=8;break}return Ce.next=6,new Promise(function(qe,xe){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var de=(0,p.A)(b().mark(function Ct(Ve){var _t;return b().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return mt.next=2,navigator.mediaDevices.enumerateDevices();case 2:_t=mt.sent,Te=_t.filter(function(bt){return bt.kind==="audioinput"}).map(function(bt){return new Rc(bt.deviceId,bt.groupId,bt.kind,bt.label)}),qe(Te),Ve.getTracks().forEach(function(bt){return bt.stop()});case 6:case"end":return mt.stop()}},Ct)}));return function(Ct){return de.apply(this,arguments)}}()).catch(function(de){console.error("Error in getMicrophones()",de),xe(de)})});case 6:Ce.next=12;break;case 8:return Ce.next=10,navigator.mediaDevices.enumerateDevices();case 10:Ae=Ce.sent,Te=Ae.filter(function(qe){return qe.kind==="audioinput"}).map(function(qe){return new Rc(qe.deviceId,qe.groupId,qe.kind,qe.label)});case 12:return Ce.abrupt("return",Te);case 15:Ce.prev=15,Ce.t0=Ce.catch(0),it=Ce.t0.message,Ce.t0 instanceof TypeError&&Ce.t0.name==="TypeError"&&(it=ar.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getMicrophones(), ".concat(it));case 20:case"end":return Ce.stop()}},G,null,[[0,15]])})),function(){return W.apply(this,arguments)})},{key:"getPlaybackDevices",value:(ue=(0,p.A)(b().mark(function G(){var J,Te,Ae,it;return b().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(Ce.prev=0,J=navigator.userAgent.includes("Firefox"),Te=[],!J){Ce.next=8;break}return Ce.next=6,new Promise(function(qe,xe){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var de=(0,p.A)(b().mark(function Ct(Ve){var _t;return b().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return mt.next=2,navigator.mediaDevices.enumerateDevices();case 2:_t=mt.sent,Te=_t.filter(function(bt){return bt.kind==="audiooutput"}).map(function(bt){return new Dl(bt.deviceId,bt.groupId,bt.kind,bt.label)}),qe(Te),Ve.getTracks().forEach(function(bt){return bt.stop()});case 6:case"end":return mt.stop()}},Ct)}));return function(Ct){return de.apply(this,arguments)}}()).catch(function(de){console.error("Error in getPlaybackDevices()",de),xe(de)})});case 6:Ce.next=12;break;case 8:return Ce.next=10,navigator.mediaDevices.enumerateDevices();case 10:Ae=Ce.sent,Te=Ae.filter(function(qe){return qe.kind==="audiooutput"}).map(function(qe){return new Dl(qe.deviceId,qe.groupId,qe.kind,qe.label)});case 12:return Ce.abrupt("return",Te);case 15:Ce.prev=15,Ce.t0=Ce.catch(0),it=Ce.t0.message,Ce.t0 instanceof TypeError&&Ce.t0.name==="TypeError"&&(it="Playback device access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)"),console.error("An error occurred in getPlaybackDevices(), ".concat(it));case 20:case"end":return Ce.stop()}},G,null,[[0,15]])})),function(){return ue.apply(this,arguments)})},{key:"getDevices",value:(ce=(0,p.A)(b().mark(function G(){var J,Te,Ae,it,Ce,qe;return b().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:return xe.prev=0,xe.next=3,navigator.mediaDevices.enumerateDevices();case 3:J=xe.sent,Te=[],Ae=Av(J);try{for(Ae.s();!(it=Ae.n()).done;)Ce=it.value,Te.push(new io(Ce.deviceId,Ce.groupId,Ce.kind,Ce.label))}catch(de){Ae.e(de)}finally{Ae.f()}return xe.abrupt("return",Te);case 10:xe.prev=10,xe.t0=xe.catch(0),qe=xe.t0.message,xe.t0 instanceof TypeError&&(qe=xe.t0.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":xe.t0.message),console.error("An error occurred in getDevices(), ".concat(qe));case 15:case"end":return xe.stop()}},G,null,[[0,10]])})),function(){return ce.apply(this,arguments)})},{key:"on",value:function(G,J){if(G!=="device-changed")throw new Error("Unsupported event type");this.addDeviceChangeEvent(),this.eventEmitter.on(G,J)}},{key:"addDeviceChangeEvent",value:function(){var G=this;if(!Nv){this.getDevices().then(function(Te){G.devices=Te});try{navigator.mediaDevices.addEventListener("devicechange",function(){var Te=(0,p.A)(b().mark(function Ae(it){var Ce,qe,xe,de,Ct;return b().wrap(function(Ve){for(;;)switch(Ve.prev=Ve.next){case 0:return Ce=G.devices,Ve.next=3,G.getDevices();case 3:G.devices=Ve.sent,qe=new Array,xe=Av(G.devices),Ve.prev=6,Ct=b().mark(function _t(){var mt;return b().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:mt=de.value,Ce.filter(function(Et){return Et.deviceId==mt.deviceId&&Et.kind==mt.kind}).length==0?qe.push(mt):Ce=Ce.filter(function(Et){return!(Et.deviceId==mt.deviceId&&Et.kind==mt.kind)});case 3:case"end":return bt.stop()}},_t)}),xe.s();case 9:if((de=xe.n()).done){Ve.next=13;break}return Ve.delegateYield(Ct(),"t0",11);case 11:Ve.next=9;break;case 13:Ve.next=18;break;case 15:Ve.prev=15,Ve.t1=Ve.catch(6),xe.e(Ve.t1);case 18:return Ve.prev=18,xe.f(),Ve.finish(18);case 21:qe.length!=0&&G.eventEmitter.emit("device-changed",{devices:G.devices}),Ce.length!=0&&G.eventEmitter.emit("device-changed",{devices:G.devices});case 23:case"end":return Ve.stop()}},Ae,null,[[6,15,18,21]])}));return function(Ae){return Te.apply(this,arguments)}}()),Nv=!0}catch(Te){var J=Te.message;Te instanceof TypeError&&(J=Te.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":Te.message),console.error("An error occurred in device-change event, ".concat(J))}}}},{key:"off",value:function(G,J){if(G!=="device-changed")throw new Error("Unsupported event type");this.eventEmitter.off(G,J)}},{key:"checkPermissions",value:(te=(0,p.A)(b().mark(function G(J){var Te,Ae,it,Ce,qe;return b().wrap(function(xe){for(;;)switch(xe.prev=xe.next){case 0:if(J||(J=yi.AUDIO_AND_VIDEO),Te=new Map,!J.includes(yi.AUDIO)&&!J.includes(yi.AUDIO_AND_VIDEO)){xe.next=15;break}return Ae=!0,xe.prev=4,xe.next=7,navigator.permissions.query({name:"microphone"});case 7:(it=xe.sent).state!="prompt"&&it.state!="denied"||(Ae=!1),xe.next=14;break;case 11:throw xe.prev=11,xe.t0=xe.catch(4),Error("Browser does not support microphone permission check");case 14:Te.set(yi.AUDIO,Ae);case 15:if(!J.includes(yi.VIDEO)&&!J.includes(yi.AUDIO_AND_VIDEO)){xe.next=28;break}return Ce=!0,xe.prev=17,xe.next=20,navigator.permissions.query({name:"camera"});case 20:(qe=xe.sent).state!="prompt"&&qe.state!="denied"||(Ce=!1),xe.next=27;break;case 24:throw xe.prev=24,xe.t1=xe.catch(17),Error("Browser does not support camera permission check");case 27:Te.set(yi.VIDEO,Ce);case 28:return xe.abrupt("return",Te);case 29:case"end":return xe.stop()}},G,null,[[4,11],[17,24]])})),function(G){return te.apply(this,arguments)})},{key:"requestPermission",value:(ee=(0,p.A)(b().mark(function G(J){var Te,Ae,it,Ce,qe,xe,de,Ct,Ve,_t,mt,bt,Et;return b().wrap(function(He){for(;;)switch(He.prev=He.next){case 0:if(J||(J=yi.AUDIO_AND_VIDEO),Te=new Map,!J.includes(yi.AUDIO_AND_VIDEO)){He.next=32;break}return it={audio:!0,video:!0},Ce=!0,He.prev=5,He.next=8,navigator.mediaDevices.getUserMedia(it);case 8:Ae=He.sent,He.next=30;break;case 11:if(He.prev=11,He.t0=He.catch(5),!(He.t0 instanceof DOMException)){He.next=27;break}He.t1=He.t0.name,He.next=He.t1==="NotAllowedError"?17:He.t1==="NotReadableError"?19:He.t1==="NotFoundError"?21:24;break;case 17:return He.t0.message==="Permission denied by system"&&(qe=ar.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),He.abrupt("break",25);case 19:return qe=Yl(He.t0,"video"),He.abrupt("break",25);case 21:return qe=ar.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(qe=ar.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),He.abrupt("break",25);case 24:qe=He.t0.message;case 25:He.next=28;break;case 27:qe=He.t0 instanceof TypeError&&He.t0.name==="TypeError"?ar.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:He.t0.message;case 28:Ce=!1,qe&&console.error("An error occurred in request permission, ".concat(qe));case 30:Ae&&setTimeout(function(){Ae.getTracks().forEach(function(vr){vr.stop()})},100),Te.set(yi.AUDIO_AND_VIDEO,Ce);case 32:if(!J.includes(yi.VIDEO)){He.next=62;break}return de={audio:!1,video:!0},Ct=!0,He.prev=35,He.next=38,navigator.mediaDevices.getUserMedia(de);case 38:xe=He.sent,He.next=60;break;case 41:if(He.prev=41,He.t2=He.catch(35),!(He.t2 instanceof DOMException)){He.next=57;break}He.t3=He.t2.name,He.next=He.t3==="NotAllowedError"?47:He.t3==="NotReadableError"?49:He.t3==="NotFoundError"?51:54;break;case 47:return He.t2.message==="Permission denied by system"&&(Ve=ar.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),He.abrupt("break",55);case 49:return Ve=Yl(He.t2,"video"),He.abrupt("break",55);case 51:return Ve=ar.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Ve=ar.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),He.abrupt("break",55);case 54:Ve=He.t2.message;case 55:He.next=58;break;case 57:Ve=He.t2 instanceof TypeError&&He.t2.name==="TypeError"?ar.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:He.t2.message;case 58:Ct=!1,Ve&&console.error("An error occurred in request permission, ".concat(Ve));case 60:xe&&xe.getTracks().forEach(function(vr){vr.stop()}),Te.set(yi.VIDEO,Ct);case 62:if(!J.includes(yi.AUDIO)){He.next=92;break}return mt={audio:!0,video:!1},bt=!0,He.prev=65,He.next=68,navigator.mediaDevices.getUserMedia(mt);case 68:_t=He.sent,He.next=90;break;case 71:if(He.prev=71,He.t4=He.catch(65),!(He.t4 instanceof DOMException)){He.next=87;break}He.t5=He.t4.name,He.next=He.t5==="NotAllowedError"?77:He.t5==="NotReadableError"?79:He.t5==="NotFoundError"?81:84;break;case 77:return He.t4.message==="Permission denied by system"&&(Et=ar.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),He.abrupt("break",85);case 79:return Et=Yl(He.t4,"audio"),He.abrupt("break",85);case 81:return Et=ar.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Et=ar.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),He.abrupt("break",85);case 84:Et=He.t4.message;case 85:He.next=88;break;case 87:Et=He.t4 instanceof TypeError&&He.t4.name==="TypeError"?ar.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message:He.t4.message;case 88:bt=!1,Et&&console.error("An error occurred in request permission, ".concat(Et));case 90:_t&&_t.getTracks().forEach(function(vr){vr.stop()}),Te.set(yi.AUDIO,bt);case 92:return He.abrupt("return",Te);case 93:case"end":return He.stop()}},G,null,[[5,11],[35,41],[65,71]])})),function(G){return ee.apply(this,arguments)})},{key:"isInt",value:function(G){return typeof G=="number"&&G%1==0}},{key:"getNetworkStats",value:(q=(0,p.A)(b().mark(function G(){var J,Te,Ae,it=arguments;return b().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return(J=(it.length>0&&it[0]!==void 0?it[0]:{}).timeoutDuration)&&this.isInt(J)||(J=6e4),Te=new Promise(function(qe,xe){setTimeout(function(){xe("Not able to get NetworkStats due to timeout")},J)}),Ae=new Promise(function(qe,xe){if(navigator.onLine){var de=new iS({measureDownloadLoadedLatency:!1,measureUploadLoadedLatency:!1,measurements:[{type:"upload",bytes:3e6,count:1,bypassMinDuration:!0},{type:"download",bytes:3e6,count:1,bypassMinDuration:!0}]});de.isRunning?(de.onFinish=function(Ct){qe({downloadSpeed:parseFloat(Number(Ct.getDownloadBandwidth()/1048576).toFixed(2)),uploadSpeed:parseFloat(Number(Ct.getUploadBandwidth()/1048576).toFixed(2))})},de.onError=function(Ct){xe("Not able to get NetworkStats")}):xe("Not able to get NetworkStats")}else xe("Not able to get NetworkStats due to no Network")}),Ce.abrupt("return",Promise.race([Ae,Te]));case 5:case"end":return Ce.stop()}},G,this)})),function(){return q.apply(this,arguments)})},{key:"analytics",value:function(G){var J,Te,Ae;!G&&navigator&&navigator.userAgent&&(Te=navigator.userAgent,delete(Ae=f().parse(Te)).engine);try{var it;(it=G)!==null&&it!==void 0&&it.browserUserAgent||(Te=navigator.userAgent,delete(Ae=f().parse(Te)).engine)}catch{}G&&G.rawUserAgent&&(Te=G.rawUserAgent,delete(Ae=f().parse(Te)).engine),G||(G={});var Ce={};Ce.sdkType=G.sdkType||"javascript",Ce.sdkVersion=G.sdkVersion||"0.0.95",Ce.platform=G.platform||((J=Ae)===null||J===void 0||(J=J.platform)===null||J===void 0?void 0:J.type)||"",G.browserUserAgent=="null"?Ce.browserUserAgent=void 0:Ce.browserUserAgent=Ae,G.deviceUserAgent&&(Ce.deviceUserAgent=G.deviceUserAgent),this._deviceInfo=Ce}},{key:"initMeeting",value:function(G){var J,Te=G.meetingId,Ae=G.customCameraVideoTrack,it=Ae===void 0?void 0:Ae,Ce=G.customMicrophoneAudioTrack,qe=Ce===void 0?void 0:Ce,xe=G.autoConsume,de=xe===void 0||xe,Ct=G.preferredProtocol,Ve=G.mode,_t=G.multiStream,mt=_t===void 0||_t,bt=G.participantId,Et=G.name,He=G.micEnabled,vr=G.webcamEnabled,_n=G.maxResolution,Bt=G.metaData,Ln=G.chatEnabled,ai=G.useSpartialLayerAnalytics,$i=G.signalingBaseUrl,Ts=G.defaultCamera,ga=G.debugMode,Hs=ga===void 0||ga;if(!Te)throw new Error("'meetingId' is empty, please verify it or generate new meetingId using the API.");var Ei=bt?bt.toString():l()({length:8}).toLowerCase(),Xl=Et||l()({length:6}).toLowerCase();switch(this._deviceInfo||this.analytics(),typeof Ct!="string"&&(Ct="UDP_OVER_TCP"),(J=Ct)===null||J===void 0?void 0:J.toUpperCase()){case"UDP_ONLY":case"UDP_OVER_TCP":case"TCP_ONLY":Ct=Ct.toUpperCase();break;default:Ct="UDP_OVER_TCP"}if(Ve||(Ve=Pa.n.CONFERENCE),Ve!==Pa.n.CONFERENCE&&Ve!==Pa.n.VIEWER)throw new Error('"mode" can only be either '.concat(Pa.n.CONFERENCE," or ").concat(Pa.n.VIEWER));if(Bt!=null&&(0,E.A)(Bt)!="object")throw new Error('"metaData" can only be object.');var Nd=this._deviceInfo.sdkType==="react-native",oS=Nd?Ts?Ts==="front"?1:0:it?it.getVideoTracks()[0].getConstraints().facingMode==="user"?1:0:Nd?1:0:0,Bv=new hn.default({roomId:Te,peerId:Ei,secret:this.apiKey,device:"unknown",displayName:Xl,mode:Ve,useSimulcast:mt,produce:!0,consume:!0,useSharingSimulcast:!0,datachannel:Ln!==!1,micEnabled:He!==!1,webcamEnabled:vr!==!1,maxResolution:_n||"hd",useSpartialLayerAnalytics:ai,_deviceInfo:this._deviceInfo,customCameraVideoTrack:it,customMicrophoneAudioTrack:qe,autoConsume:de,preferredProtocol:Ct,signalingBaseUrl:$i,metaData:Bt,defaultCameraIndex:oS,debugMode:Hs});Ze.roomClient=Bv;var cS=new Zr({id:Ei,displayName:Xl,local:!0,mode:Ve,metaData:Bt});return new nt(Te,cS,Bv)}},{key:"createCameraVideoTrack",value:(B=(0,p.A)(b().mark(function G(J){var Te,Ae,it,Ce,qe,xe,de,Ct,Ve,_t,mt,bt,Et,He,vr,_n;return b().wrap(function(Bt){for(;;)switch(Bt.prev=Bt.next){case 0:if(Te=J.cameraId,Ae=Te===void 0?void 0:Te,it=J.encoderConfig,Ce=it===void 0?void 0:it,qe=J.facingMode,xe=qe===void 0?void 0:qe,de=J.optimizationMode,Ct=de===void 0?void 0:de,Ve=J.multiStream,_t=Ve===void 0||Ve,!Ae){Bt.next=6;break}return Bt.next=4,this.getCameras();case 4:(mt=Bt.sent)&&mt.some(function(Ln){return Ln.deviceId})&&(mt.some(function(Ln){return Ln.deviceId===Ae})||console.error("No camera device found for the given cameraId, please check the passed cameraId. The default camera will be used instead."));case 6:return Bt.prev=6,bt=Ce?Ta.$.videoProfiles[Ce]:Ta.$.videoProfiles.h360p_w640p,Et={video:{deviceId:Ae||void 0,facingMode:xe||void 0,width:bt.width,height:bt.height,frameRate:bt.frameRate}},Bt.next=11,(0,bc.lp)(Et);case 11:return He=Bt.sent,Ct&&(He.contentHint=Ct),He.encoderConfig=Ce||"h360p_w640p",He.contentHint=Ct||"",He.multiStream=_t,He.cameraId=Ae,Bt.abrupt("return",He);case 20:if(Bt.prev=20,Bt.t0=Bt.catch(6),Bt.t0.name!=="SecurityError"){Bt.next=26;break}vr=ar.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED.message,Bt.next=46;break;case 26:if(Bt.t0.name!=="DOMException"){Bt.next=30;break}vr=ar.q.ERROR_RN_CAMERA_NOT_FOUND.message,Bt.next=46;break;case 30:if(!(Bt.t0 instanceof DOMException)){Bt.next=45;break}Bt.t1=Bt.t0.name,Bt.next=Bt.t1==="NotAllowedError"?34:Bt.t1==="NotReadableError"?36:Bt.t1==="NotFoundError"?38:41;break;case 34:return vr=jv(Bt.t0,"video"),Bt.abrupt("break",43);case 36:return vr=Yl(Bt.t0,"video"),Bt.abrupt("break",43);case 38:return vr=ar.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(vr=ar.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),Bt.abrupt("break",43);case 41:return vr=Bt.t0.message,Bt.abrupt("break",43);case 43:Bt.next=46;break;case 45:Bt.t0.message=="getUserMedia is not implemented in this browser"?(_n=ar.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,vr=_n.message):vr=Bt.t0.message;case 46:console.error("An error occurred in creating video track, ".concat(vr));case 47:case"end":return Bt.stop()}},G,this,[[6,20]])})),function(G){return B.apply(this,arguments)})},{key:"createScreenShareVideoTrack",value:(A=(0,p.A)(b().mark(function G(J){var Te,Ae,it,Ce,qe,xe,de,Ct,Ve;return b().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return Te=J.encoderConfig,Ae=Te===void 0?void 0:Te,it=J.optimizationMode,Ce=it===void 0?void 0:it,qe=J.withAudio,xe=qe===void 0?"enable":qe,de=Ae?Ta.$.screenShareProfiles[Ae]:Ta.$.screenShareProfiles.h720p_15fps,Ct={audio:xe==="enable",video:{width:de.width,height:de.height,frameRate:de.frameRate}},_t.next=5,(0,bc.Zu)(Ct);case 5:return Ve=_t.sent,Ce&&(Ve.contentHint=Ce),_t.abrupt("return",Ve);case 8:case"end":return _t.stop()}},G)})),function(G){return A.apply(this,arguments)})},{key:"createMicrophoneAudioTrack",value:(M=(0,p.A)(b().mark(function G(J){var Te,Ae,it,Ce,qe,xe,de,Ct,Ve,_t,mt,bt;return b().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:if(Te=J.noiseConfig,Ae=Te===void 0?void 0:Te,it=J.encoderConfig,Ce=it===void 0?void 0:it,qe=J.microphoneId,!(xe=qe===void 0?void 0:qe)){Et.next=6;break}return Et.next=4,this.getMicrophones();case 4:(de=Et.sent)&&de.some(function(He){return He.deviceId})&&(de.some(function(He){return He.deviceId===xe})||console.error("No microphone device found for the given microphoneId, please check the passed microphoneId. The default microphone will be used instead."));case 6:return Et.prev=6,Ct=Ce?Ta.$.audioProfiles[Ce]:Ta.$.audioProfiles.speech_standard,Ve={audio:{deviceId:xe,sampleRate:Ct.sampleRate,echoCancellation:Ae?Ae&&Ae.acousticEchoCancellation:Ct.echoCancellation,autoGainControl:Ae?Ae&&Ae.autoGainControl:Ct.autoGainControl,noiseSuppression:Ae?Ae&&Ae.noiseSuppression:Ct.noiseSuppression,channelCount:Ct.channelCount}},Et.next=11,(0,bc.lp)(Ve);case 11:return(_t=Et.sent).encoderConfig=Ce||"speech_standard",_t.microphoneId=xe,Et.abrupt("return",_t);case 17:if(Et.prev=17,Et.t0=Et.catch(6),Et.t0.name!=="SecurityError"){Et.next=23;break}mt=ar.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED.message,Et.next=43;break;case 23:if(Et.t0.name!=="DOMException"){Et.next=27;break}mt=ar.q.ERROR_RN_MIC_NOT_FOUND.message,Et.next=43;break;case 27:if(!(Et.t0 instanceof DOMException)){Et.next=42;break}Et.t1=Et.t0.name,Et.next=Et.t1==="NotAllowedError"?31:Et.t1==="NotReadableError"?33:Et.t1==="NotFoundError"?35:38;break;case 31:return mt=jv(Et.t0,"audio"),Et.abrupt("break",40);case 33:return mt=Yl(Et.t0,"audio"),Et.abrupt("break",40);case 35:return mt=ar.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(mt=ar.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),Et.abrupt("break",40);case 38:return mt=Et.t0.message,Et.abrupt("break",40);case 40:Et.next=43;break;case 42:Et.t0.message=="getUserMedia is not implemented in this browser"?(bt=ar.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,mt=bt.message):mt=Et.t0.message;case 43:console.error("An error occurred in creating audio track, ".concat(mt));case 44:case"end":return Et.stop()}},G,this,[[6,17]])})),function(G){return M.apply(this,arguments)})}]);var M,A,B,q,ee,te,ce,ue,W,K}();function jv(M,A){return(M.message==="Permission denied"||M.message==="Permission dismissed"?A==="video"?ar.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:ar.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:M.message.includes("The request is not allowed by the user agent")?A==="video"?ar.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:ar.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:M.message==="Permission denied by system"?A==="video"?ar.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:ar.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:A==="video"?ar.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:ar.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED).message}function Yl(M,A){return(M.message==="Device in use"?A==="video"?ar.q.ERROR_CAMERA_IN_USE:ar.q.ERROR_MICROPHONE_IN_USE:A==="video"?ar.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:ar.q.ERROR_MICROPHONE_IN_USE).message}(0,_.A)(Ql,"devices",[]),(0,_.A)(Ql,"eventEmitter",new kr),(0,_.A)(Ql,"Constants",{errors:ar.s,recordingEvents:{RECORDING_STARTING:"RECORDING_STARTING",RECORDING_STARTED:"RECORDING_STARTED",RECORDING_STOPPING:"RECORDING_STOPPING",RECORDING_STOPPED:"RECORDING_STOPPED"},livestreamEvents:{LIVESTREAM_STARTING:"LIVESTREAM_STARTING",LIVESTREAM_STARTED:"LIVESTREAM_STARTED",LIVESTREAM_STOPPING:"LIVESTREAM_STOPPING",LIVESTREAM_STOPPED:"LIVESTREAM_STOPPED"},characterState:pi,characterMode:{TEXT:"text",CO_PILOT:"co_pilot",AUTO_PILOT:"auto_pilot",VISION_PILOT:"vision_pilot"},hlsEvents:pa.V,transcriptionEvents:{TRANSCRIPTION_STARTING:"TRANSCRIPTION_STARTING",TRANSCRIPTION_STARTED:"TRANSCRIPTION_STARTED",TRANSCRIPTION_STOPPING:"TRANSCRIPTION_STOPPING",TRANSCRIPTION_STOPPED:"TRANSCRIPTION_STOPPED"},modes:Pa.n,permission:yi});var aS=Ql})(),y})())})(Pb);var Bc=Pb.exports,Ur="videosdk-live-react-sdk",rt={"participant-joined":Ur+"-participant-joined","participant-left":Ur+"-participant-left","speaker-changed":Ur+"-speaker-changed","presenter-changed":Ur+"-presenter-changed","main-participant-changed":Ur+"-main-participant-changed","entry-requested":Ur+"-entry-requested","entry-responded":Ur+"-entry-responded","recording-started":Ur+"-recording-started","recording-stopped":Ur+"-recording-stopped","chat-message":Ur+"-chat-message","meeting-joined":Ur+"-meeting-joined","meeting-left":Ur+"-meeting-left","live-stream-started":Ur+"-live-stream-started","live-stream-stopped":Ur+"-live-stream-stopped","video-state-changed":Ur+"-video-state-changed","video-seeked":Ur+"-video-seeked","webcam-requested":Ur+"-webcam-requested","mic-requested":Ur+"-mic-requested","pin-state-changed":Ur+"-pin-state-changed","connection-open":Ur+"-connection-open","connection-close":Ur+"-connection-close","switch-meeting":Ur+"-switch-meeting",error:Ur+"-error","hls-started":Ur+"-hls-started","hls-stopped":Ur+"-hls-stopped","hls-state-changed":Ur+"-hls-state-changed","hls-playable-state-changed":Ur+"-hls-playable-state-changed","recording-state-changed":Ur+"-recording-state-changed","livestream-state-changed":Ur+"-livestream-state-changed","meeting-state-changed":Ur+"-meeting-state-changed","participant-mode-changed":Ur+"-participant-mode-changed","transcription-state-changed":Ur+"-transcription-state-changed","transcription-text":Ur+"-transcription-text","character-joined":Ur+"-character-joined","character-left":Ur+"-character-left","whiteboard-started":Ur+"-whiteboard-started","whiteboard-stopped":Ur+"-whiteboard-stopped"},tt=new yx;tt.setMaxListeners(9999);var Tb=Oe.createContext(),hv=function(t){var r=t===void 0?{}:t,n=r.onParticipantJoined,i=n===void 0?function(){}:n,a=r.onParticipantLeft,y=a===void 0?function(){}:a,E=r.onSpeakerChanged,p=E===void 0?function(){}:E,o=r.onPresenterChanged,C=o===void 0?function(){}:o,_=r.onMainParticipantChanged,h=_===void 0?function(){}:_,b=r.onEntryRequested,k=b===void 0?function(){}:b,f=r.onEntryResponded,g=f===void 0?function(){}:f,s=r.onRecordingStarted,w=s===void 0?function(){}:s,S=r.onRecordingStopped,T=S===void 0?function(){}:S,x=r.onChatMessage,O=x===void 0?function(){}:x,P=r.onMeetingJoined,R=P===void 0?function(){}:P,I=r.onMeetingLeft,d=I===void 0?function(){}:I,v=r.onLiveStreamStarted,c=v===void 0?function(){}:v,u=r.onLiveStreamStopped,l=u===void 0?function(){}:u,m=r.onVideoStateChanged,D=m===void 0?function(){}:m,N=r.onVideoSeeked,L=N===void 0?function(){}:N,j=r.onWebcamRequested,V=j===void 0?function(){}:j,$=r.onMicRequested,Z=$===void 0?function(){}:$,ne=r.onPinStateChanged,pe=ne===void 0?function(){}:ne,ge=r.onConnectionOpen,_e=ge===void 0?function(){}:ge,Me=r.onConnetionClose,me=Me===void 0?function(){}:Me,oe=r.onSwitchMeeting,ve=oe===void 0?function(){}:oe,we=r.onError,be=we===void 0?function(){}:we,lt=r.onHlsStarted,Ot=lt===void 0?function(){}:lt,Yt=r.onHlsStopped,vt=Yt===void 0?function(){}:Yt,Mr=r.onHlsStateChanged,Kt=Mr===void 0?function(){}:Mr,At=r.onRecordingStateChanged,Ar=At===void 0?function(){}:At,Dt=r.onLivestreamStateChanged,Xt=Dt===void 0?function(){}:Dt,hn=r.onMeetingStateChanged,kr=hn===void 0?function(){}:hn,Lr=r.onParticipantModeChanged,Jr=Lr===void 0?function(){}:Lr,er=r.onCharacterJoined,Ze=er===void 0?function(){}:er,Ut=r.onCharacterLeft,hr=Ut===void 0?function(){}:Ut;return Oe.useEffect(function(){return tt.on(rt["participant-joined"],i),tt.on(rt["participant-left"],y),tt.on(rt["speaker-changed"],p),tt.on(rt["presenter-changed"],C),tt.on(rt["main-participant-changed"],h),tt.on(rt["entry-requested"],k),tt.on(rt["entry-responded"],g),tt.on(rt["recording-started"],w),tt.on(rt["recording-stopped"],T),tt.on(rt["chat-message"],O),tt.on(rt["meeting-joined"],R),tt.on(rt["meeting-left"],d),tt.on(rt["live-stream-started"],c),tt.on(rt["live-stream-stopped"],l),tt.on(rt["video-state-changed"],D),tt.on(rt["video-seeked"],L),tt.on(rt["webcam-requested"],V),tt.on(rt["mic-requested"],Z),tt.on(rt["pin-state-changed"],pe),tt.on(rt["connection-open"],_e),tt.on(rt["connection-close"],me),tt.on(rt["switch-meeting"],ve),tt.on(rt.error,be),tt.on(rt["hls-started"],Ot),tt.on(rt["hls-stopped"],vt),tt.on(rt["hls-state-changed"],Kt),tt.on(rt["recording-state-changed"],Ar),tt.on(rt["livestream-state-changed"],Xt),tt.on(rt["meeting-state-changed"],kr),tt.on(rt["participant-mode-changed"],Jr),tt.on(rt["character-joined"],Ze),tt.on(rt["character-left"],hr),function(){tt.off(rt["meeting-state-changed"],kr),tt.off(rt["participant-joined"],i),tt.off(rt["participant-left"],y),tt.off(rt["speaker-changed"],p),tt.off(rt["presenter-changed"],C),tt.off(rt["main-participant-changed"],h),tt.off(rt["entry-requested"],k),tt.off(rt["entry-responded"],g),tt.off(rt["recording-started"],w),tt.off(rt["recording-stopped"],T),tt.off(rt["chat-message"],O),tt.off(rt["meeting-joined"],R),tt.off(rt["meeting-left"],d),tt.off(rt["live-stream-started"],c),tt.off(rt["live-stream-stopped"],l),tt.off(rt["video-state-changed"],D),tt.off(rt["video-seeked"],L),tt.off(rt["webcam-requested"],V),tt.off(rt["mic-requested"],Z),tt.off(rt["pin-state-changed"],pe),tt.off(rt["connection-open"],_e),tt.off(rt["connection-close"],me),tt.off(rt["switch-meeting"],ve),tt.off(rt.error,be),tt.off(rt["hls-started"],Ot),tt.off(rt["hls-stopped"],vt),tt.off(rt["hls-state-changed"],Kt),tt.off(rt["recording-state-changed"],Ar),tt.off(rt["livestream-state-changed"],Xt),tt.off(rt["participant-mode-changed"],Jr),tt.off(rt["character-joined"],Ze),tt.off(rt["character-left"],hr)}},[]),Oe.useContext(Tb)},_x="0.1.102",wx=function(t){var r=t.children,n=t.config,i=t.token,a=t.joinWithoutUserInteraction,y=t.reinitialiseMeetingOnConfigChange,E=t.deviceInfo,p=Oe.useState(null),o=p[0],C=p[1],_=Oe.useState(null),h=_[0],b=_[1],k=Oe.useState(null),f=k[0],g=k[1],s=Oe.useState(null),w=s[0],S=s[1],T=Oe.useState(null),x=T[0],O=T[1],P=Oe.useState(!1),R=P[0],I=P[1],d=Oe.useState(!1),v=d[0],c=d[1],u=Oe.useState(!1),l=u[0],m=u[1],D=Oe.useState(!1),N=D[0],L=D[1],j=Oe.useState([]),V=j[0],$=j[1],Z=Oe.useState(new Map),ne=Z[0],pe=Z[1],ge=Oe.useState(new Map),_e=ge[0],Me=ge[1],me=Oe.useState(new Map),oe=me[0],ve=me[1],we=Oe.useState(!1),be=we[0],lt=we[1],Ot=Oe.useState(new Map),Yt=Ot[0],vt=Ot[1],Mr=Oe.useState(!1),Kt=Mr[0],At=Mr[1],Ar=Oe.useState(!1),Dt=Ar[0],Xt=Ar[1],hn=Oe.useState("RECORDING_STOPPED"),kr=hn[0],Lr=hn[1],Jr=Oe.useState("LIVESTREAM_STOPPED"),er=Jr[0],Ze=Jr[1],Ut=Oe.useState("HLS_STOPPED"),hr=Ut[0],Fe=Ut[1],st=Oe.useState({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),tr=st[0],Tt=st[1],sr=Oe.useState("TRANSCRIPTION_STOPPED"),Zr=sr[0],sn=sr[1],Mt=Oe.useRef(),di=Oe.useRef(),Ti=Oe.useRef(),pi=Oe.useRef(),Zi=Oe.useRef(),Wn=Oe.useRef(n),Lt=Oe.useRef(i),Ne=Oe.useRef(!1),yt=Oe.useRef(),ut=Oe.useMemo(function(){return y},[]);Oe.useEffect(function(){Mt.current=o},[o]),Oe.useEffect(function(){di.current=R},[R]),Oe.useEffect(function(){Ti.current=v},[v]),Oe.useEffect(function(){pi.current=l},[l]),Oe.useEffect(function(){Zi.current=N},[N]),Oe.useEffect(function(){Wn.current=n},[n]),Oe.useEffect(function(){Lt.current=i},[i]),Oe.useEffect(function(){yt.current=Dt},[Dt]);var ze=function(){C(null),b(null),g(null),S(null),O(null),I(!1),c(!1),m(!1),L(!1),$([]),lt(!1),pe(new Map),Me(new Map),ve(new Map),vt(new Map),At(!1),Xt(!1),Lr("RECORDING_STOPPED"),Ze("LIVESTREAM_STOPPED"),Fe("HLS_STOPPED"),sn("TRANSCRIPTION_STOPPED"),Tt({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null})},Rr=function(Y){pe(function(nt){nt.set(Y.id,Y);var ur=new Map(nt);return ur}),tt.emit(rt["participant-joined"],Y)},De=function(Y){pe(function(nt){nt.delete(Y.id);var ur=new Map(nt);return ur}),tt.emit(rt["participant-left"],Y)},fr=function(Y){var nt,ur;O(Y),m(Y===(Mt==null||(nt=Mt.current)===null||nt===void 0||(ur=nt.localParticipant)===null||ur===void 0?void 0:ur.id)),tt.emit(rt["presenter-changed"],Y)},Pr=function(Y){g(Y),tt.emit(rt["main-participant-changed"],Y)},wr=function(Y){S(Y),tt.emit(rt["speaker-changed"],Y)},qr=function(Y){$(function(nt){return[].concat(nt,[Y])}),tt.emit(rt["chat-message"],Y)},ie=function(Y){tt.emit(rt["entry-requested"],Y)},Q=function(Y,nt){tt.emit(rt["entry-responded"],Y,nt)},he=function(){L(!0),tt.emit(rt["recording-started"])},Re=function(){L(!1),tt.emit(rt["recording-stopped"])},Le=function(Y){Y.track.readyState==="live"&&(Y.kind==="video"?c(!0):Y.kind==="audio"&&I(!0))},ht=function(Y){Y.kind==="video"?c(!1):Y.kind==="audio"&&I(!1)},xt=function(Y){lt(!0),tt.emit(rt["live-stream-started"],Y)},Ke=function(){lt(!1),tt.emit(rt["live-stream-stopped"])},et=function(Y){Xt(!0),tt.emit(rt["hls-started"],Y)},$e=function(){Xt(!1),tt.emit(rt["hls-stopped"])},St=function(Y){tt.emit(rt["video-state-changed"],Y)},Ft=function(Y){tt.emit(rt["video-seeked"],Y)},ke=function(Y){tt.emit(rt["webcam-requested"],Y)},Tr=function(Y){tt.emit(rt["mic-requested"],Y)},Er=function(Y){Ne.current=!0,$(function(nt){return[].concat(nt,Y.messages)}),tt.emit(rt["meeting-joined"],Y),At(!0)},an=function(){tt.emit(rt["meeting-left"]);var Y=Mt.current;if(Y){var nt;typeof(Y==null?void 0:Y.off)=="function"&&(Y.off("meeting-state-changed",ft),Y.off("participant-joined",Rr),Y.off("participant-left",De),Y.off("presenter-changed",fr),Y.off("main-participant-changed",Pr),Y.off("speaker-changed",wr),Y.off("entry-requested",ie),Y.off("entry-responded",Q),Y.off("chat-message",qr),Y.off("recording-started",he),Y.off("recording-stopped",Re),Y.off("meeting-joined",Er),Y.off("meeting-left",an),Y.off("livestream-started",xt),Y.off("livestream-stopped",Ke),Y.off("video-state-changed",St),Y.off("video-seeked",Ft),Y.off("webcam-requested",ke),Y.off("mic-requested",Tr),Y.off("pin-state-changed",cn),Y.off("connection-open",us),Y.off("connection-close",hi),Y.off("switch-meeting",Pe),Y.off("error",es),Y.off("hls-started",et),Y.off("hls-stopped",$e),Y.off("recording-state-changed",Se),Y.off("livestream-state-changed",Ue),Y.off("hls-state-changed",We),Y.off("participant-mode-changed",Jt),Y.off("whiteboard-stopped",Gt),Y.off("whiteboard-started",zt),Y.off("transcription-state-changed",$t),Y.off("character-joined",Rt),Y.off("character-left",_r)),typeof(Y==null||(nt=Y.localParticipant)===null||nt===void 0?void 0:nt.off)=="function"&&(Y.localParticipant.off("stream-enabled",Le),Y.localParticipant.off("stream-disabled",ht)),ze()}},cn=function(Y){var nt=Y.participantId,ur=Y.state,ri=Y.pinnedBy;ve(function(ar){!ur.cam&&!ur.share?ar.delete(nt):ar.set(nt,ur);var pa=new Map(ar);return pa}),tt.emit(rt["pin-state-changed"],{participantId:nt,state:ur,pinnedBy:ri})},us=function(Y){vt(function(nt){nt.set(Y.id,Y);var ur=new Map(nt);return ur}),tt.emit(rt["connection-open"],Y)},hi=function(Y){vt(function(nt){nt.delete(Y);var ur=new Map(nt);return ur}),tt.emit(rt["connection-close"],Y)},Pe=function(Y){tt.emit(rt["switch-meeting"],Y)},es=function(Y){tt.emit(rt.error,Y)},Se=function(Y){Lr(Y==null?void 0:Y.status),tt.emit(rt["recording-state-changed"],Y)},Ue=function(Y){Ze(Y==null?void 0:Y.status),tt.emit(rt["livestream-state-changed"],Y)},We=function(Y){Fe(Y==null?void 0:Y.status),(Y==null?void 0:Y.status)=="HLS_PLAYABLE"?Tt({downstreamUrl:Y==null?void 0:Y.downstreamUrl,playbackHlsUrl:Y==null?void 0:Y.playbackHlsUrl,livestreamUrl:Y==null?void 0:Y.livestreamUrl}):(Y==null?void 0:Y.status)=="HLS_STOPPED"&&Tt({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),tt.emit(rt["hls-state-changed"],Y)},ft=function(Y){tt.emit(rt["meeting-state-changed"],Y)},$t=function(Y){sn(Y==null?void 0:Y.status),tt.emit(rt["transcription-state-changed"],Y)},at=function(Y){tt.emit(rt["transcription-text"],Y)},zt=function(Y){tt.emit(rt["whiteboard-started"],Y)},Gt=function(Y){tt.emit(rt["whiteboard-stopped"],Y)},Rt=function(Y){Me(function(nt){nt.set(Y.id,Y);var ur=new Map(nt);return ur}),tt.emit(rt["character-joined"],Y)},_r=function(Y){Me(function(nt){nt.delete(Y.id);var ur=new Map(nt);return ur}),tt.emit(rt["character-left"],Y)},Jt=function(Y){var nt,ur;pe(function(ri){var ar=ri.get(Y.participantId);ar.mode=Y.mode,ri.set(ar.id,ar);var pa=new Map(ri);return pa}),Y.participantId===(Mt==null||(nt=Mt.current)===null||nt===void 0||(ur=nt.localParticipant)===null||ur===void 0?void 0:ur.id)&&b(function(ri){return ri.mode=Y.mode,ri}),tt.emit(rt["participant-mode-changed"],Y)},br=function(){var Y=Bc.VideoSDK&&Bc.VideoSDK.initMeeting(Wn.current);C(Y);var nt=Y.localParticipant,ur=Y.participants,ri=Y.characters;ur.set(nt.id,nt),pe(ur),Me(ri),b(nt),Y.on("meeting-state-changed",ft),Y.on("participant-joined",Rr),Y.on("participant-left",De),Y.on("presenter-changed",fr),Y.on("main-participant-changed",Pr),Y.on("speaker-changed",wr),Y.on("entry-requested",ie),Y.on("entry-responded",Q),Y.on("chat-message",qr),Y.on("recording-started",he),Y.on("recording-stopped",Re),Y.on("meeting-joined",Er),Y.on("meeting-left",an),Y.on("livestream-started",xt),Y.on("livestream-stopped",Ke),Y.on("video-state-changed",St),Y.on("video-seeked",Ft),Y.on("webcam-requested",ke),Y.on("mic-requested",Tr),Y.on("pin-state-changed",cn),Y.on("connection-open",us),Y.on("connection-close",hi),Y.on("switch-meeting",Pe),Y.on("error",es),Y.on("hls-started",et),Y.on("hls-stopped",$e),Y.on("recording-state-changed",Se),Y.on("livestream-state-changed",Ue),Y.on("hls-state-changed",We),Y.on("participant-mode-changed",Jt),Y.on("transcription-state-changed",$t),Y.on("transcription-text",at),Y.on("whiteboard-started",zt),Y.on("whiteboard-stopped",Gt),Y.on("character-joined",Rt),Y.on("character-left",_r),Y.localParticipant.on("stream-enabled",Le),Y.localParticipant.on("stream-disabled",ht),Y.join()},Vr=function(){var Y=Mt.current;Y&&Y.leave()},Kr=function(){var Y=Mt.current;Y&&Y.end()},Sn=function(Y,nt,ur,ri){var ar=Mt.current;ar&&ar.startRecording(Y,nt,ur,ri)},Cn=function(){var Y=Mt.current;if(Y){var nt=Zi.current;nt&&Y.stopRecording()}},fi=function(Y){Y===void 0&&(Y=void 0);var nt=Mt.current;nt&&nt.unmuteMic(Y)},ti=function(){var Y=Mt.current;Y&&Y.muteMic()},xi=function(Y){Y===void 0&&(Y=void 0);var nt=di.current;nt?ti():fi(Y)},Oi=function(){var Y=Mt.current;Y&&Y.disableWebcam()},ts=function(Y){Y===void 0&&(Y=void 0);var nt=Mt.current;nt&&nt.enableWebcam(Y)},Es=function(Y){Y===void 0&&(Y=void 0);var nt=Ti.current;nt?Oi():ts(Y)},Hi=function(){var Y=Mt.current;Y&&Y.disableScreenShare()},ks=function(Y){Y===void 0&&(Y=void 0);var nt=Mt.current;nt&&nt.enableScreenShare(Y)},Qs=function(Y){Y===void 0&&(Y=void 0);var nt=pi.current;nt?Hi():ks(Y)},za=function(Y){var nt=Mt.current;nt&&nt.changeMode(Y)},Ha=function(Y){var nt=Mt.current;nt&&nt.sendChatMessage(Y)},Wa=function(Y,nt){var ur=Mt.current;ur&&ur.respondEntry(Y,nt)},Va=function(){try{var Y=Mt.current;return Promise.resolve(function(){if(Y)return Promise.resolve(Y.getMics())}())}catch(nt){return Promise.reject(nt)}},$a=function(){try{var Y=Mt.current;return Promise.resolve(function(){if(Y)return Promise.resolve(Y.getWebcams())}())}catch(nt){return Promise.reject(nt)}},qa=function(Y){var nt=Mt.current;nt&&nt.changeWebcam(Y)},Ka=function(Y){var nt=Mt.current;nt&&nt.replaceWebcamStream(Y)},Ga=function(Y){var nt=Mt.current;nt&&nt.changeMic(Y)},Ja=function(Y){var nt=Y.link,ur=Mt.current;ur&&ur.startVideo({link:nt})},Qa=function(){var Y=Mt.current;Y&&Y.stopVideo()},Ya=function(){var Y=Mt.current;Y&&Y.resumeVideo()},Xa=function(Y){var nt=Y.currentTime,ur=Mt.current;ur&&ur.pauseVideo({currentTime:nt})},Za=function(Y){var nt=Y.currentTime,ur=Mt.current;ur&&ur.seekVideo({currentTime:nt})},eo=function(Y,nt){var ur=Mt.current;ur&&ur.startLivestream(Y,nt)},to=function(){var Y=Mt.current;Y&&Y.stopLivestream()},ro=function(Y){var nt=Y.meetingId,ur=Y.payload;try{var ri=Mt.current,ar=function(){if(ri)return Promise.resolve(ri.connectTo({meetingId:nt,payload:ur})).then(function(){})}();return Promise.resolve(ar&&ar.then?ar.then(function(){}):void 0)}catch(pa){return Promise.reject(pa)}},no=function(Y,nt){var ur=Mt.current;ur&&ur.startHls(Y,nt)},Ca=function(){var Y=Mt.current;Y&&Y.stopHls()},da=function(){Bc.VideoSDK.config(Lt.current),E?Bc.VideoSDK.analytics(E):Bc.VideoSDK.analytics({sdkType:"react-web",sdkVersion:_x}),a&&br()};return Oe.useEffect(function(){da()},[]),Oe.useEffect(function(){ut&&Ne.current&&(Vr(),da(),!a&&br())},[n.meetingId,i,ut]),p_.createElement(Tb.Provider,{value:{meetingId:o==null?void 0:o.id,meeting:o,baseUrl:o==null?void 0:o.baseUrl,localParticipant:h,mainParticipant:f,activeSpeakerId:w,participants:ne,characters:_e,presenterId:x,localMicOn:R,localWebcamOn:v,localScreenShareOn:l,messages:V,isRecording:N,isLiveStreaming:be,pinnedParticipants:oe,connections:Yt,isHls:Dt,recordingState:kr,livestreamState:er,hlsState:hr,hlsUrls:tr,transcriptionState:Zr,isMeetingJoined:Kt,selectedCameraDevice:o==null?void 0:o.selectedCameraDevice,selectedMicrophoneDevice:o==null?void 0:o.selectedMicrophoneDevice,join:br,leave:Vr,end:Kr,startRecording:Sn,stopRecording:Cn,sendChatMessage:Ha,respondEntry:Wa,muteMic:ti,unmuteMic:fi,toggleMic:xi,disableWebcam:Oi,enableWebcam:ts,toggleWebcam:Es,disableScreenShare:Hi,enableScreenShare:ks,toggleScreenShare:Qs,getMics:Va,getWebcams:$a,changeWebcam:qa,replaceWebcamStream:Ka,changeMic:Ga,changeMode:za,startVideo:Ja,stopVideo:Qa,resumeVideo:Ya,pauseVideo:Xa,seekVideo:Za,startLivestream:eo,stopLivestream:to,connectTo:ro,startHls:no,stopHls:Ca}},r)},bx=function(t,r){var n={},i=n.onStreamEnabled,a=i===void 0?function(){}:i,y=n.onStreamDisabled,E=y===void 0?function(){}:y,p=n.onMediaStatusChanged,o=p===void 0?function(){}:p,C=n.onVideoQualityChanged,_=C===void 0?function(){}:C,h=Oe.useState(null),b=h[0],k=h[1],f=Oe.useState(null),g=f[0],s=f[1],w=Oe.useState(null),S=w[0],T=w[1],x=Oe.useState(null),O=x[0],P=x[1],R=hv(),I=Oe.useMemo(function(){var Fe,st=R==null?void 0:R.participants,tr=R==null?void 0:R.localParticipant,Tt=R==null?void 0:R.activeSpeakerId,sr=R==null?void 0:R.mainParticipant,Zr=(R==null||(Fe=R.pinnedParticipants)===null||Fe===void 0?void 0:Fe.get(t))||{cam:!1,share:!1};return{participants:st,localParticipant:tr,activeSpeakerId:Tt,mainParticipant:sr,pinState:Zr}},[R]),d=I.participants,v=I.localParticipant,c=I.activeSpeakerId,u=I.mainParticipant,l=I.pinState,m=d==null?void 0:d.get(t),D=Oe.useState(m==null?void 0:m.webcamOn),N=D[0],L=D[1],j=Oe.useState(m==null?void 0:m.micOn),V=j[0],$=j[1],Z=Oe.useState(m==null?void 0:m.mode),ne=Z[0],pe=Z[1],ge=function(st){if(st.track.readyState==="live")switch(st.kind){case"video":b!=null&&k(null),k(st);break;case"audio":g!=null&&s(null),s(st);break;case"share":S!=null&&T(null),T(st);break;case"shareAudio":O!=null&&P(null),P(st);break}},_e=function(st){switch(st.kind){case"video":k(null);break;case"audio":s(null);break;case"share":T(null);break;case"shareAudio":P(null);break}},Me=function(st){ge(st),a(st)},me=function(st){t===st.participantId&&pe(st.mode)},oe=function(st){_e(st),E(st)},ve=function(st){var tr=st.peerId,Tt=st.prevQuality,sr=st.currentQuality;_({peerId:tr,prevQuality:Tt,currentQuality:sr})},we=function(st){var tr=st.kind,Tt=st.peerId,sr=st.newStatus;tr=="audio"?$(sr):tr=="video"&&L(sr),o({kind:tr,peerId:Tt,newStatus:sr})},be=function(st){m==null||m.setQuality(st)},lt=function(st,tr){m==null||m.setViewPort(st,tr)},Ot=function(){m==null||m.enableMic()},Yt=function(){m==null||m.disableMic()},vt=function(){m==null||m.enableWebcam()},Mr=function(){m==null||m.disableWebcam()},Kt=function(st){m==null||m.pin(st)},At=function(st){m==null||m.unpin(st)},Ar=function(){m==null||m.remove()},Dt=function(st){var tr=st===void 0?{}:st,Tt=tr.height,sr=tr.width;return Promise.resolve(m==null?void 0:m.captureImage({height:Tt,width:sr}))},Xt=function(){return Promise.resolve(m==null?void 0:m.getAudioStats())},hn=function(){return Promise.resolve(m==null?void 0:m.getVideoStats())},kr=function(){return Promise.resolve(m==null?void 0:m.getShareStats())},Lr=function(){return Promise.resolve(m==null?void 0:m.getShareAudioStats())},Jr=function(){m==null||m.consumeWebcamStreams()},er=function(){m==null||m.consumeMicStreams()},Ze=function(){m==null||m.stopConsumingWebcamStreams()},Ut=function(){m==null||m.stopConsumingMicStreams()},hr=function(st){return Promise.resolve(m==null?void 0:m.switchTo(st)).then(function(){})};return Oe.useEffect(function(){var Fe=m==null?void 0:m.streams;return Fe&&Fe.forEach(function(st){ge(st)}),m!=null&&m.micOn&&$(V),m!=null&&m.webcamOn&&L(N),m==null||m.on("stream-enabled",Me),m==null||m.on("stream-disabled",oe),m==null||m.on("media-status-changed",we),m==null||m.on("video-quality-changed",ve),tt.on(rt["participant-mode-changed"],me),function(){m==null||m.off("stream-enabled",Me),m==null||m.off("stream-disabled",oe),m==null||m.off("media-status-changed",we),m==null||m.off("video-quality-changed",ve),tt.off(rt["participant-mode-changed"],me)}},[m]),{displayName:m==null?void 0:m.displayName,participant:m,webcamStream:b,micStream:g,screenShareStream:S,screenShareAudioStream:O,webcamOn:N||!!b,micOn:V||!!g,mode:ne,metaData:m==null?void 0:m.metaData,screenShareOn:!!S,isLocal:(v==null?void 0:v.id)===t,isActiveSpeaker:c===t,isMainParticipant:(u==null?void 0:u.id)===t,pinState:l,consumeMicStreams:er,consumeWebcamStreams:Jr,stopConsumingMicStreams:Ut,stopConsumingWebcamStreams:Ze,setQuality:be,setViewPort:lt,enableMic:Ot,disableMic:Yt,enableWebcam:vt,disableWebcam:Mr,captureImage:Dt,pin:Kt,unpin:At,remove:Ar,switchTo:hr,getAudioStats:Xt,getVideoStats:hn,getShareStats:kr,getShareAudioStats:Lr}};typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));Bc.VideoSDK.Constants;const xb=localStorage.getItem("authToken"),Sx=async()=>{const e=await fetch("/get-token",{method:"POST",headers:{Authorization:xb}}),{token:t}=await e.json();return t},Rx=async({token:e})=>{const t=await fetch("/create-meeting",{method:"POST",headers:{"Content-Type":"application/json",Authorization:xb},body:JSON.stringify({token:e})}),{roomId:r}=await t.json();return r},Ex="modulepreload",kx=function(e){return"/"+e},Ty={},hs=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const y=document.querySelector("meta[property=csp-nonce]"),E=(y==null?void 0:y.nonce)||(y==null?void 0:y.getAttribute("nonce"));i=Promise.allSettled(r.map(p=>{if(p=kx(p),p in Ty)return;Ty[p]=!0;const o=p.endsWith(".css"),C=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${C}`))return;const _=document.createElement("link");if(_.rel=o?"stylesheet":Ex,o||(_.as="script"),_.crossOrigin="",_.href=p,E&&_.setAttribute("nonce",E),document.head.appendChild(_),o)return new Promise((h,b)=>{_.addEventListener("load",h),_.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(y){const E=new Event("vite:preloadError",{cancelable:!0});if(E.payload=y,window.dispatchEvent(E),!E.defaultPrevented)throw y}return i.then(y=>{for(const E of y||[])E.status==="rejected"&&a(E.reason);return t().catch(a)})};var Cx=function(t,r,n){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");typeof r=="function"&&(n=r,r={}),r=r||{},n=n||function(){},a.type=r.type||"text/javascript",a.charset=r.charset||"utf8",a.async="async"in r?!!r.async:!0,a.src=t,r.attrs&&Px(a,r.attrs),r.text&&(a.text=""+r.text);var y="onload"in a?xy:Tx;y(a,n),a.onload||xy(a,n),i.appendChild(a)};function Px(e,t){for(var r in t)e.setAttribute(r,t[r])}function xy(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function Tx(e,t){e.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,t(null,e))}}var xx=function(t){return Ox(t)&&!Dx(t)};function Ox(e){return!!e&&typeof e=="object"}function Dx(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||Ax(e)}var Ix=typeof Symbol=="function"&&Symbol.for,Mx=Ix?Symbol.for("react.element"):60103;function Ax(e){return e.$$typeof===Mx}function Lx(e){return Array.isArray(e)?[]:{}}function Qu(e,t){return t.clone!==!1&&t.isMergeableObject(e)?_l(Lx(e),e,t):e}function Nx(e,t,r){return e.concat(t).map(function(n){return Qu(n,r)})}function jx(e,t){if(!t.customMerge)return _l;var r=t.customMerge(e);return typeof r=="function"?r:_l}function Bx(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function Oy(e){return Object.keys(e).concat(Bx(e))}function Ob(e,t){try{return t in e}catch{return!1}}function Fx(e,t){return Ob(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function Ux(e,t,r){var n={};return r.isMergeableObject(e)&&Oy(e).forEach(function(i){n[i]=Qu(e[i],r)}),Oy(t).forEach(function(i){Fx(e,i)||(Ob(e,i)&&r.isMergeableObject(t[i])?n[i]=jx(i,r)(e[i],t[i],r):n[i]=Qu(t[i],r))}),n}function _l(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||Nx,r.isMergeableObject=r.isMergeableObject||xx,r.cloneUnlessOtherwiseSpecified=Qu;var n=Array.isArray(t),i=Array.isArray(e),a=n===i;return a?n?r.arrayMerge(e,t,r):Ux(e,t,r):Qu(t,r)}_l.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,i){return _l(n,i,r)},{})};var zx=_l,Db=zx,Hx=Object.create,Ih=Object.defineProperty,Wx=Object.getOwnPropertyDescriptor,Vx=Object.getOwnPropertyNames,$x=Object.getPrototypeOf,qx=Object.prototype.hasOwnProperty,Kx=(e,t)=>{for(var r in t)Ih(e,r,{get:t[r],enumerable:!0})},Ib=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Vx(t))!qx.call(e,i)&&i!==r&&Ih(e,i,{get:()=>t[i],enumerable:!(n=Wx(t,i))||n.enumerable});return e},fv=(e,t,r)=>(r=e!=null?Hx($x(e)):{},Ib(!e||!e.__esModule?Ih(r,"default",{value:e,enumerable:!0}):r,e)),Gx=e=>Ib(Ih({},"__esModule",{value:!0}),e),Mb={};Kx(Mb,{callPlayer:()=>u4,getConfig:()=>c4,getSDK:()=>o4,isBlobUrl:()=>p4,isMediaStream:()=>d4,lazy:()=>Xx,omit:()=>l4,parseEndTime:()=>i4,parseStartTime:()=>n4,queryString:()=>a4,randomString:()=>s4,supportsWebKitPresentationMode:()=>h4});var Mh=Gx(Mb),Jx=fv(Oe),Qx=fv(Cx),Yx=fv(Db);const Xx=e=>Jx.default.lazy(async()=>{const t=await e();return typeof t.default=="function"?t:t.default}),Zx=/[?&#](?:start|t)=([0-9hms]+)/,e4=/[?&#]end=([0-9hms]+)/,Mm=/(\d+)(h|m|s)/g,t4=/^\d+$/;function Ab(e,t){if(e instanceof Array)return;const r=e.match(t);if(r){const n=r[1];if(n.match(Mm))return r4(n);if(t4.test(n))return parseInt(n)}}function r4(e){let t=0,r=Mm.exec(e);for(;r!==null;){const[,n,i]=r;i==="h"&&(t+=parseInt(n,10)*60*60),i==="m"&&(t+=parseInt(n,10)*60),i==="s"&&(t+=parseInt(n,10)),r=Mm.exec(e)}return t}function n4(e){return Ab(e,Zx)}function i4(e){return Ab(e,e4)}function s4(){return Math.random().toString(36).substr(2,5)}function a4(e){return Object.keys(e).map(t=>`${t}=${e[t]}`).join("&")}function Pf(e){return window[e]?window[e]:window.exports&&window.exports[e]?window.exports[e]:window.module&&window.module.exports&&window.module.exports[e]?window.module.exports[e]:null}const Nc={},o4=function(t,r,n=null,i=()=>!0,a=Qx.default){const y=Pf(r);return y&&i(y)?Promise.resolve(y):new Promise((E,p)=>{if(Nc[t]){Nc[t].push({resolve:E,reject:p});return}Nc[t]=[{resolve:E,reject:p}];const o=C=>{Nc[t].forEach(_=>_.resolve(C))};if(n){const C=window[n];window[n]=function(){C&&C(),o(Pf(r))}}a(t,C=>{C?(Nc[t].forEach(_=>_.reject(C)),Nc[t]=null):n||o(Pf(r))})})};function c4(e,t){return(0,Yx.default)(t.config,e.config)}function l4(e,...t){const r=[].concat(...t),n={},i=Object.keys(e);for(const a of i)r.indexOf(a)===-1&&(n[a]=e[a]);return n}function u4(e,...t){if(!this.player||!this.player[e]){let r=`ReactPlayer: ${this.constructor.displayName} player could not call %c${e}%c – `;return this.player?this.player[e]||(r+="The method was not available"):r+="The player was not available",console.warn(r,"font-weight: bold",""),null}return this.player[e](...t)}function d4(e){return typeof window<"u"&&typeof window.MediaStream<"u"&&e instanceof window.MediaStream}function p4(e){return/^blob:/.test(e)}function h4(e=document.createElement("video")){const t=/iPhone|iPod/.test(navigator.userAgent)===!1;return e.webkitSupportsPresentationMode&&typeof e.webkitSetPresentationMode=="function"&&t}var mv=Object.defineProperty,f4=Object.getOwnPropertyDescriptor,m4=Object.getOwnPropertyNames,g4=Object.prototype.hasOwnProperty,v4=(e,t)=>{for(var r in t)mv(e,r,{get:t[r],enumerable:!0})},y4=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of m4(t))!g4.call(e,i)&&i!==r&&mv(e,i,{get:()=>t[i],enumerable:!(n=f4(t,i))||n.enumerable});return e},_4=e=>y4(mv({},"__esModule",{value:!0}),e),Lb={};v4(Lb,{AUDIO_EXTENSIONS:()=>gv,DASH_EXTENSIONS:()=>Jb,FLV_EXTENSIONS:()=>Qb,HLS_EXTENSIONS:()=>yv,MATCH_URL_DAILYMOTION:()=>$b,MATCH_URL_FACEBOOK:()=>Fb,MATCH_URL_FACEBOOK_WATCH:()=>Ub,MATCH_URL_KALTURA:()=>Gb,MATCH_URL_MIXCLOUD:()=>qb,MATCH_URL_MUX:()=>Bb,MATCH_URL_SOUNDCLOUD:()=>Nb,MATCH_URL_STREAMABLE:()=>zb,MATCH_URL_TWITCH_CHANNEL:()=>Vb,MATCH_URL_TWITCH_VIDEO:()=>Wb,MATCH_URL_VIDYARD:()=>Kb,MATCH_URL_VIMEO:()=>jb,MATCH_URL_WISTIA:()=>Hb,MATCH_URL_YOUTUBE:()=>Am,VIDEO_EXTENSIONS:()=>vv,canPlay:()=>b4});var w4=_4(Lb),Dy=Mh;const Am=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,Nb=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,jb=/vimeo\.com\/(?!progressive_redirect).+/,Bb=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,Fb=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,Ub=/^https?:\/\/fb\.watch\/.+$/,zb=/streamable\.com\/([a-z0-9]+)$/,Hb=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,Wb=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,Vb=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,$b=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,qb=/mixcloud\.com\/([^/]+\/[^/]+)/,Kb=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,Gb=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,gv=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,vv=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,yv=/\.(m3u8)($|\?)/i,Jb=/\.(mpd)($|\?)/i,Qb=/\.(flv)($|\?)/i,Lm=e=>{if(e instanceof Array){for(const t of e)if(typeof t=="string"&&Lm(t)||Lm(t.src))return!0;return!1}return(0,Dy.isMediaStream)(e)||(0,Dy.isBlobUrl)(e)?!0:gv.test(e)||vv.test(e)||yv.test(e)||Jb.test(e)||Qb.test(e)},b4={youtube:e=>e instanceof Array?e.every(t=>Am.test(t)):Am.test(e),soundcloud:e=>Nb.test(e)&&!gv.test(e),vimeo:e=>jb.test(e)&&!vv.test(e)&&!yv.test(e),mux:e=>Bb.test(e),facebook:e=>Fb.test(e)||Ub.test(e),streamable:e=>zb.test(e),wistia:e=>Hb.test(e),twitch:e=>Wb.test(e)||Vb.test(e),dailymotion:e=>$b.test(e),mixcloud:e=>qb.test(e),vidyard:e=>Kb.test(e),kaltura:e=>Gb.test(e),file:Lm};var _v=Object.defineProperty,S4=Object.getOwnPropertyDescriptor,R4=Object.getOwnPropertyNames,E4=Object.prototype.hasOwnProperty,k4=(e,t)=>{for(var r in t)_v(e,r,{get:t[r],enumerable:!0})},C4=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of R4(t))!E4.call(e,i)&&i!==r&&_v(e,i,{get:()=>t[i],enumerable:!(n=S4(t,i))||n.enumerable});return e},P4=e=>C4(_v({},"__esModule",{value:!0}),e),Yb={};k4(Yb,{default:()=>x4});var T4=P4(Yb),ps=Mh,ns=w4,x4=[{key:"youtube",name:"YouTube",canPlay:ns.canPlay.youtube,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./YouTube-C4mLbkx-.js").then(e=>e.Y),[]))},{key:"soundcloud",name:"SoundCloud",canPlay:ns.canPlay.soundcloud,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./SoundCloud-KGmzZskv.js").then(e=>e.S),[]))},{key:"vimeo",name:"Vimeo",canPlay:ns.canPlay.vimeo,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./Vimeo-CAwsm3-R.js").then(e=>e.V),[]))},{key:"mux",name:"Mux",canPlay:ns.canPlay.mux,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./Mux-T7i5yxZo.js").then(e=>e.M),[]))},{key:"facebook",name:"Facebook",canPlay:ns.canPlay.facebook,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./Facebook-BoUlHuGu.js").then(e=>e.F),[]))},{key:"streamable",name:"Streamable",canPlay:ns.canPlay.streamable,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./Streamable-DSHkVBga.js").then(e=>e.S),[]))},{key:"wistia",name:"Wistia",canPlay:ns.canPlay.wistia,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./Wistia-BjmfaKr9.js").then(e=>e.W),[]))},{key:"twitch",name:"Twitch",canPlay:ns.canPlay.twitch,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./Twitch-C90lD7Zn.js").then(e=>e.T),[]))},{key:"dailymotion",name:"DailyMotion",canPlay:ns.canPlay.dailymotion,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./DailyMotion-CwFjFr0r.js").then(e=>e.D),[]))},{key:"mixcloud",name:"Mixcloud",canPlay:ns.canPlay.mixcloud,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./Mixcloud-B8_o5NXf.js").then(e=>e.M),[]))},{key:"vidyard",name:"Vidyard",canPlay:ns.canPlay.vidyard,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./Vidyard-0FrCMZxB.js").then(e=>e.V),[]))},{key:"kaltura",name:"Kaltura",canPlay:ns.canPlay.kaltura,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./Kaltura-XuWzv9lR.js").then(e=>e.K),[]))},{key:"file",name:"FilePlayer",canPlay:ns.canPlay.file,canEnablePIP:e=>ns.canPlay.file(e)&&(document.pictureInPictureEnabled||(0,ps.supportsWebKitPresentationMode)())&&!ns.AUDIO_EXTENSIONS.test(e),lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./FilePlayer-D5D9rRoK.js").then(e=>e.F),[]))}],Iy=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function O4(e,t){return!!(e===t||Iy(e)&&Iy(t))}function D4(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!O4(e[r],t[r]))return!1;return!0}function I4(e,t){t===void 0&&(t=D4);var r,n=[],i,a=!1;function y(){for(var E=[],p=0;p<arguments.length;p++)E[p]=arguments[p];return a&&r===this&&t(E,n)||(i=e.apply(this,E),a=!0,r=this,n=E),i}return y}const M4=Object.freeze(Object.defineProperty({__proto__:null,default:I4},Symbol.toStringTag,{value:"Module"})),A4=lS(M4);var L4=typeof Element<"u",N4=typeof Map=="function",j4=typeof Set=="function",B4=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function yp(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!yp(e[n],t[n]))return!1;return!0}var a;if(N4&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a=e.entries();!(n=a.next()).done;)if(!t.has(n.value[0]))return!1;for(a=e.entries();!(n=a.next()).done;)if(!yp(n.value[1],t.get(n.value[0])))return!1;return!0}if(j4&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a=e.entries();!(n=a.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(B4&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[n]))return!1;if(L4&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&e.$$typeof)&&!yp(e[i[n]],t[i[n]]))return!1;return!0}return e!==e&&t!==t}var Xb=function(t,r){try{return yp(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}},Zb={exports:{}},F4="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",U4=F4,z4=U4;function e2(){}function t2(){}t2.resetWarningCache=e2;var H4=function(){function e(n,i,a,y,E,p){if(p!==z4){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:t2,resetWarningCache:e2};return r.PropTypes=r,r};Zb.exports=H4();var W4=Zb.exports,V4=Object.create,Ah=Object.defineProperty,$4=Object.getOwnPropertyDescriptor,q4=Object.getOwnPropertyNames,K4=Object.getPrototypeOf,G4=Object.prototype.hasOwnProperty,J4=(e,t)=>{for(var r in t)Ah(e,r,{get:t[r],enumerable:!0})},r2=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of q4(t))!G4.call(e,i)&&i!==r&&Ah(e,i,{get:()=>t[i],enumerable:!(n=$4(t,i))||n.enumerable});return e},Q4=(e,t,r)=>(r=e!=null?V4(K4(e)):{},r2(!e||!e.__esModule?Ah(r,"default",{value:e,enumerable:!0}):r,e)),Y4=e=>r2(Ah({},"__esModule",{value:!0}),e),n2={};J4(n2,{defaultProps:()=>e6,propTypes:()=>Z4});var i2=Y4(n2),X4=Q4(W4);const{string:ji,bool:is,number:jc,array:Tf,oneOfType:uu,shape:xs,object:Gi,func:mi,node:My}=X4.default,Z4={url:uu([ji,Tf,Gi]),playing:is,loop:is,controls:is,volume:jc,muted:is,playbackRate:jc,width:uu([ji,jc]),height:uu([ji,jc]),style:Gi,progressInterval:jc,playsinline:is,pip:is,stopOnUnmount:is,light:uu([is,ji,Gi]),playIcon:My,previewTabIndex:jc,previewAriaLabel:ji,fallback:My,oEmbedUrl:ji,wrapper:uu([ji,mi,xs({render:mi.isRequired})]),config:xs({soundcloud:xs({options:Gi}),youtube:xs({playerVars:Gi,embedOptions:Gi,onUnstarted:mi}),facebook:xs({appId:ji,version:ji,playerId:ji,attributes:Gi}),dailymotion:xs({params:Gi}),vimeo:xs({playerOptions:Gi,title:ji}),mux:xs({attributes:Gi,version:ji}),file:xs({attributes:Gi,tracks:Tf,forceVideo:is,forceAudio:is,forceHLS:is,forceSafariHLS:is,forceDisableHls:is,forceDASH:is,forceFLV:is,hlsOptions:Gi,hlsVersion:ji,dashVersion:ji,flvVersion:ji}),wistia:xs({options:Gi,playerId:ji,customControls:Tf}),mixcloud:xs({options:Gi}),twitch:xs({options:Gi,playerId:ji}),vidyard:xs({options:Gi})}),onReady:mi,onStart:mi,onPlay:mi,onPause:mi,onBuffer:mi,onBufferEnd:mi,onEnded:mi,onError:mi,onDuration:mi,onSeek:mi,onPlaybackRateChange:mi,onPlaybackQualityChange:mi,onProgress:mi,onClickPreview:mi,onEnablePIP:mi,onDisablePIP:mi},Bi=()=>{},e6={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:Bi},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:Bi,onStart:Bi,onPlay:Bi,onPause:Bi,onBuffer:Bi,onBufferEnd:Bi,onEnded:Bi,onError:Bi,onDuration:Bi,onSeek:Bi,onPlaybackRateChange:Bi,onPlaybackQualityChange:Bi,onProgress:Bi,onClickPreview:Bi,onEnablePIP:Bi,onDisablePIP:Bi};var t6=Object.create,dd=Object.defineProperty,r6=Object.getOwnPropertyDescriptor,n6=Object.getOwnPropertyNames,i6=Object.getPrototypeOf,s6=Object.prototype.hasOwnProperty,a6=(e,t,r)=>t in e?dd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,o6=(e,t)=>{for(var r in t)dd(e,r,{get:t[r],enumerable:!0})},s2=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of n6(t))!s6.call(e,i)&&i!==r&&dd(e,i,{get:()=>t[i],enumerable:!(n=r6(t,i))||n.enumerable});return e},a2=(e,t,r)=>(r=e!=null?t6(i6(e)):{},s2(!e||!e.__esModule?dd(r,"default",{value:e,enumerable:!0}):r,e)),c6=e=>s2(dd({},"__esModule",{value:!0}),e),Yn=(e,t,r)=>(a6(e,typeof t!="symbol"?t+"":t,r),r),o2={};o6(o2,{default:()=>Lh});var l6=c6(o2),Ay=a2(Oe),u6=a2(Xb),c2=i2,d6=Mh;const p6=5e3;class Lh extends Ay.Component{constructor(){super(...arguments),Yn(this,"mounted",!1),Yn(this,"isReady",!1),Yn(this,"isPlaying",!1),Yn(this,"isLoading",!0),Yn(this,"loadOnReady",null),Yn(this,"startOnPlay",!0),Yn(this,"seekOnPlay",null),Yn(this,"onDurationCalled",!1),Yn(this,"handlePlayerMount",t=>{if(this.player){this.progress();return}this.player=t,this.player.load(this.props.url),this.progress()}),Yn(this,"getInternalPlayer",t=>this.player?this.player[t]:null),Yn(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const t=this.getCurrentTime()||0,r=this.getSecondsLoaded(),n=this.getDuration();if(n){const i={playedSeconds:t,played:t/n};r!==null&&(i.loadedSeconds=r,i.loaded=r/n),(i.playedSeconds!==this.prevPlayed||i.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(i),this.prevPlayed=i.playedSeconds,this.prevLoaded=i.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),Yn(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:t,playing:r,volume:n,muted:i}=this.props;t(),!i&&n!==null&&this.player.setVolume(n),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):r&&this.player.play(),this.handleDurationCheck()}),Yn(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:t,onPlay:r,playbackRate:n}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&n!==1&&this.player.setPlaybackRate(n),t(),this.startOnPlay=!1),r(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),Yn(this,"handlePause",t=>{this.isPlaying=!1,this.isLoading||this.props.onPause(t)}),Yn(this,"handleEnded",()=>{const{activePlayer:t,loop:r,onEnded:n}=this.props;t.loopOnEnded&&r&&this.seekTo(0),r||(this.isPlaying=!1,n())}),Yn(this,"handleError",(...t)=>{this.isLoading=!1,this.props.onError(...t)}),Yn(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const t=this.getDuration();t?this.onDurationCalled||(this.props.onDuration(t),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),Yn(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(t){if(!this.player)return;const{url:r,playing:n,volume:i,muted:a,playbackRate:y,pip:E,loop:p,activePlayer:o,disableDeferredLoading:C}=this.props;if(!(0,u6.default)(t.url,r)){if(this.isLoading&&!o.forceLoad&&!C&&!(0,d6.isMediaStream)(r)){console.warn(`ReactPlayer: the attempt to load ${r} is being deferred until the player has loaded`),this.loadOnReady=r;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(r,this.isReady)}!t.playing&&n&&!this.isPlaying&&this.player.play(),t.playing&&!n&&this.isPlaying&&this.player.pause(),!t.pip&&E&&this.player.enablePIP&&this.player.enablePIP(),t.pip&&!E&&this.player.disablePIP&&this.player.disablePIP(),t.volume!==i&&i!==null&&this.player.setVolume(i),t.muted!==a&&(a?this.player.mute():(this.player.unmute(),i!==null&&setTimeout(()=>this.player.setVolume(i)))),t.playbackRate!==y&&this.player.setPlaybackRate&&this.player.setPlaybackRate(y),t.loop!==p&&this.player.setLoop&&this.player.setLoop(p)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(t,r,n){if(!this.isReady){t!==0&&(this.seekOnPlay=t,setTimeout(()=>{this.seekOnPlay=null},p6));return}if(r?r==="fraction":t>0&&t<1){const a=this.player.getDuration();if(!a){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(a*t,n);return}this.player.seekTo(t,n)}render(){const t=this.props.activePlayer;return t?Ay.default.createElement(t,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}Yn(Lh,"displayName","Player");Yn(Lh,"propTypes",c2.propTypes);Yn(Lh,"defaultProps",c2.defaultProps);var h6=Object.create,pd=Object.defineProperty,f6=Object.getOwnPropertyDescriptor,m6=Object.getOwnPropertyNames,g6=Object.getPrototypeOf,v6=Object.prototype.hasOwnProperty,y6=(e,t,r)=>t in e?pd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_6=(e,t)=>{for(var r in t)pd(e,r,{get:t[r],enumerable:!0})},l2=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of m6(t))!v6.call(e,i)&&i!==r&&pd(e,i,{get:()=>t[i],enumerable:!(n=f6(t,i))||n.enumerable});return e},hd=(e,t,r)=>(r=e!=null?h6(g6(e)):{},l2(!e||!e.__esModule?pd(r,"default",{value:e,enumerable:!0}):r,e)),w6=e=>l2(pd({},"__esModule",{value:!0}),e),Qn=(e,t,r)=>(y6(e,typeof t!="symbol"?t+"":t,r),r),u2={};_6(u2,{createReactPlayer:()=>x6});var b6=w6(u2),Fc=hd(Oe),S6=hd(Db),xf=hd(A4),Ly=hd(Xb),_u=i2,d2=Mh,R6=hd(l6);const E6=(0,d2.lazy)(()=>hs(()=>import("./Preview-PXGZRh_G.js").then(e=>e.P),[])),k6=typeof window<"u"&&window.document&&typeof document<"u",C6=typeof Gh<"u"&&Gh.window&&Gh.window.document,P6=Object.keys(_u.propTypes),T6=k6||C6?Fc.Suspense:()=>null,du=[],x6=(e,t)=>{var r;return r=class extends Fc.Component{constructor(){super(...arguments),Qn(this,"state",{showPreview:!!this.props.light}),Qn(this,"references",{wrapper:n=>{this.wrapper=n},player:n=>{this.player=n}}),Qn(this,"handleClickPreview",n=>{this.setState({showPreview:!1}),this.props.onClickPreview(n)}),Qn(this,"showPreview",()=>{this.setState({showPreview:!0})}),Qn(this,"getDuration",()=>this.player?this.player.getDuration():null),Qn(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),Qn(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),Qn(this,"getInternalPlayer",(n="player")=>this.player?this.player.getInternalPlayer(n):null),Qn(this,"seekTo",(n,i,a)=>{if(!this.player)return null;this.player.seekTo(n,i,a)}),Qn(this,"handleReady",()=>{this.props.onReady(this)}),Qn(this,"getActivePlayer",(0,xf.default)(n=>{for(const i of[...du,...e])if(i.canPlay(n))return i;return t||null})),Qn(this,"getConfig",(0,xf.default)((n,i)=>{const{config:a}=this.props;return S6.default.all([_u.defaultProps.config,_u.defaultProps.config[i]||{},a,a[i]||{}])})),Qn(this,"getAttributes",(0,xf.default)(n=>(0,d2.omit)(this.props,P6))),Qn(this,"renderActivePlayer",n=>{if(!n)return null;const i=this.getActivePlayer(n);if(!i)return null;const a=this.getConfig(n,i.key);return Fc.default.createElement(R6.default,{...this.props,key:i.key,ref:this.references.player,config:a,activePlayer:i.lazyPlayer||i,onReady:this.handleReady})})}shouldComponentUpdate(n,i){return!(0,Ly.default)(this.props,n)||!(0,Ly.default)(this.state,i)}componentDidUpdate(n){const{light:i}=this.props;!n.light&&i&&this.setState({showPreview:!0}),n.light&&!i&&this.setState({showPreview:!1})}renderPreview(n){if(!n)return null;const{light:i,playIcon:a,previewTabIndex:y,oEmbedUrl:E,previewAriaLabel:p}=this.props;return Fc.default.createElement(E6,{url:n,light:i,playIcon:a,previewTabIndex:y,previewAriaLabel:p,oEmbedUrl:E,onClick:this.handleClickPreview})}render(){const{url:n,style:i,width:a,height:y,fallback:E,wrapper:p}=this.props,{showPreview:o}=this.state,C=this.getAttributes(n),_=typeof p=="string"?this.references.wrapper:void 0;return Fc.default.createElement(p,{ref:_,style:{...i,width:a,height:y},...C},Fc.default.createElement(T6,{fallback:E},o?this.renderPreview(n):this.renderActivePlayer(n)))}},Qn(r,"displayName","ReactPlayer"),Qn(r,"propTypes",_u.propTypes),Qn(r,"defaultProps",_u.defaultProps),Qn(r,"addCustomPlayer",n=>{du.push(n)}),Qn(r,"removeCustomPlayers",()=>{du.length=0}),Qn(r,"canPlay",n=>{for(const i of[...du,...e])if(i.canPlay(n))return!0;return!1}),Qn(r,"canEnablePIP",n=>{for(const i of[...du,...e])if(i.canEnablePIP&&i.canEnablePIP(n))return!0;return!1}),r};var O6=Object.create,Nh=Object.defineProperty,D6=Object.getOwnPropertyDescriptor,I6=Object.getOwnPropertyNames,M6=Object.getPrototypeOf,A6=Object.prototype.hasOwnProperty,L6=(e,t)=>{for(var r in t)Nh(e,r,{get:t[r],enumerable:!0})},p2=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of I6(t))!A6.call(e,i)&&i!==r&&Nh(e,i,{get:()=>t[i],enumerable:!(n=D6(t,i))||n.enumerable});return e},N6=(e,t,r)=>(r=e!=null?O6(M6(e)):{},p2(!e||!e.__esModule?Nh(r,"default",{value:e,enumerable:!0}):r,e)),j6=e=>p2(Nh({},"__esModule",{value:!0}),e),h2={};L6(h2,{default:()=>z6});var B6=j6(h2),Nm=N6(T4),F6=b6;const U6=Nm.default[Nm.default.length-1];var z6=(0,F6.createReactPlayer)(Nm.default,U6);const H6=ah(B6);function W6({style:e}){return le.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",style:e,children:le.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[le.jsx("path",{d:"M14.186 2.753v3.596c0 .487.194.955.54 1.3a1.85 1.85 0 0 0 1.306.539h4.125"}),le.jsx("path",{d:"M20.25 8.568v8.568a4.25 4.25 0 0 1-1.362 2.97a4.28 4.28 0 0 1-3.072 1.14h-7.59a4.3 4.3 0 0 1-3.1-1.124a4.26 4.26 0 0 1-1.376-2.986V6.862a4.25 4.25 0 0 1 1.362-2.97a4.28 4.28 0 0 1 3.072-1.14h5.714a3.5 3.5 0 0 1 2.361.905l2.96 2.722a2.97 2.97 0 0 1 1.031 2.189M7.647 7.647h3.265M7.647 12h8.706m-8.706 4.353h8.706"})]})})}function V6({style:e}){return le.jsx("div",{children:le.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",style:e,children:le.jsx("path",{fill:"currentColor",d:"M12 8q2.95 0 5.813 1.188T22.9 12.75q.3.3.3.7t-.3.7l-2.3 2.25q-.275.275-.638.3t-.662-.2l-2.9-2.2q-.2-.15-.3-.35t-.1-.45v-2.85q-.95-.3-1.95-.475T12 10t-2.05.175T8 10.65v2.85q0 .25-.1.45t-.3.35l-2.9 2.2q-.3.225-.663.2t-.637-.3l-2.3-2.25q-.3-.3-.3-.7t.3-.7q2.2-2.375 5.075-3.562T12 8"})})})}function f2({style:e}){return le.jsx("div",{children:le.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20",style:e,children:le.jsx("path",{fill:"currentColor",d:"M9 18v-1.06A8 8 0 0 1 2 9h2a6 6 0 1 0 12 0h2a8 8 0 0 1-7 7.94V18h3v2H6v-2zM6 4a4 4 0 1 1 8 0v5a4 4 0 1 1-8 0z"})})})}function m2({style:e}){return le.jsx("div",{children:le.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20",style:e,children:le.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M1 8a2 2 0 0 1 2-2h.93a2 2 0 0 0 1.664-.89l.812-1.22A2 2 0 0 1 8.07 3h3.86a2 2 0 0 1 1.664.89l.812 1.22A2 2 0 0 0 16.07 6H17a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2zm13.5 3a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0M10 14a3 3 0 1 0 0-6a3 3 0 0 0 0 6",clipRule:"evenodd"})})})}function $6({style:e}){return le.jsx("div",{children:le.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",style:e,children:le.jsx("path",{fill:"currentColor",d:"M17.75 14.95L16.3 13.5q.35-.575.525-1.2T17 11h2q0 1.1-.325 2.088t-.925 1.862m-2.95-3L9 6.15V5q0-1.25.875-2.125T12 2t2.125.875T15 5v6q0 .275-.062.5t-.138.45M11 21v-3.1q-2.6-.35-4.3-2.312T5 11h2q0 2.075 1.463 3.538T12 16q.85 0 1.613-.262T15 15l1.425 1.425q-.725.575-1.588.963T13 17.9V21zm8.8 1.6L1.4 4.2l1.4-1.4l18.4 18.4z"})})})}function q6({style:e}){return le.jsx("div",{children:le.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",style:e,children:le.jsx("path",{fill:"currentColor",d:"M1.2 4.47L2.5 3.2L20 20.72L18.73 22l-2-2H4a2 2 0 0 1-2-2V6c0-.22.04-.43.1-.63zM7 4l2-2h6l2 2h3a2 2 0 0 1 2 2v12c0 .6-.26 1.13-.68 1.5l-4.99-5c.43-.73.67-1.59.67-2.5a5 5 0 0 0-5-5c-.91 0-1.77.24-2.5.67L5.82 4zm0 8a5 5 0 0 0 5 5c.5 0 1.03-.08 1.5-.23L11.72 15A3.064 3.064 0 0 1 9 12.28L7.23 10.5c-.15.47-.23 1-.23 1.5m5-3a3 3 0 0 1 3 3a3 3 0 0 1-.17 1L11 9.17A3 3 0 0 1 12 9"})})})}function K6({style:e}){return le.jsx("svg",{style:e,xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 32 32",children:le.jsx("path",{fill:"currentColor",d:"m27.45 15.11l-22-11a1 1 0 0 0-1.08.12a1 1 0 0 0-.33 1L6.69 15H18v2H6.69L4 26.74A1 1 0 0 0 5 28a1 1 0 0 0 .45-.11l22-11a1 1 0 0 0 0-1.78"})})}function G6({style:e}){return le.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 512 512",style:e,children:le.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:32,d:"M336 192h40a40 40 0 0 1 40 40v192a40 40 0 0 1-40 40H136a40 40 0 0 1-40-40V232a40 40 0 0 1 40-40h40m160-64l-80-80l-80 80m80 193V48"})})}function J6({style:e}){return le.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",style:e,children:[le.jsx("circle",{cx:12,cy:6,r:4,fill:"currentColor"}),le.jsx("path",{fill:"currentColor",d:"M20 17.5c0 2.485 0 4.5-8 4.5s-8-2.015-8-4.5S7.582 13 12 13s8 2.015 8 4.5"})]})}function Q6({getMeetingAndToken:e}){const[t,r]=Oe.useState(null),n=async()=>{localStorage.setItem("meetingId",t),await e(t)};return le.jsx("div",{className:"w-[500px] h-[400px]  text-neutral flex flex-col items-center justify-center shadow-3xl rounded-2xl z-10",children:le.jsxs("div",{className:"w-8/12 s m-auto p-5  flex gap-3 flex-col",children:[le.jsx("h3",{className:"text-xl font-bold",children:" Join or Create Meeting Now"}),le.jsx("form",{action:"#",onSubmit:i=>i.preventDefault(),children:le.jsx("input",{type:"text",className:"input input-md input-bordered w-full text-black",placeholder:"Enter Meeting Id",onChange:i=>{r(i.target.value)}})}),le.jsx("button",{className:"btn btn-primary btn-md",onClick:n,children:"Join"}),le.jsx("span",{className:"text-center text-neutral",children:" or "}),le.jsx("button",{className:"btn btn-neutral btn-md",onClick:n,children:"Create Meeting"})]})})}function Y6(e){const t=Oe.useRef(null),{webcamStream:r,micStream:n,webcamOn:i,micOn:a,isLocal:y,displayName:E}=bx(e.participantId),p=Oe.useMemo(()=>{if(i&&r){const o=new MediaStream;return o.addTrack(r.track),o}},[r,i]);return Oe.useEffect(()=>{if(t.current)if(a&&n){const o=new MediaStream;o.addTrack(n.track),t.current.srcObject=o,t.current.play().catch(C=>console.error("videoElem.current.play() failed",C))}else t.current.srcObject=null},[n,a]),le.jsxs("div",{className:"w-full",children:[le.jsxs("div",{className:"join w-full",children:[le.jsx("div",{className:"join-item  text-lg p-3 font-bold",children:E}),le.jsx("div",{className:"join-item text-white text-xs py-3 px-2",children:i?le.jsx(m2,{style:{fontSize:15}}):le.jsx(q6,{style:{fontSize:20}})}),le.jsx("div",{className:"join-item text-white  text-xs py-3 px-2",children:a?le.jsx(f2,{style:{fontSize:15}}):le.jsx($6,{style:{fontSize:20}})})]}),le.jsx("audio",{ref:t,autoPlay:!0,playsInline:!0,muted:y}),le.jsx("div",{className:"w-full h-auto  p-0 m-0",children:i&&le.jsx(H6,{playsinline:!0,pip:!1,light:!1,controls:!1,muted:!0,playing:!0,url:p,height:"100%",width:"100%",onError:o=>{console.log(o,"participant video error")}})})]})}function X6(e){const[t,r]=Oe.useState(null),{join:n,participants:i}=hv({onMeetingJoined:()=>{r("JOINED")},onMeetingLeft:()=>{e.onMeetingLeave()}}),a=()=>{r("JOINING"),n()};return le.jsxs("div",{className:"w-full z-10",children:[le.jsx("div",{className:"w-wide btn btn-block",children:le.jsxs("h3",{children:[" Meeting Id: ",e.meetingId]})}),le.jsx("div",{className:"",children:t&&t=="JOINED"?le.jsxs("div",{children:[le.jsx("div",{className:"w-full py-4  flex flex-row items-center justify-center",children:le.jsx(Z6,{})}),le.jsx("div",{className:"w-full sm:grid sm:grid-cols-2 gap-3",children:[...i.keys()].map(y=>le.jsx("div",{className:"w-full bg-base-300 mb-2 rounded-lg shadow-xl",children:le.jsx("div",{className:"w-full",children:le.jsx(Y6,{participantId:y},y)})}))})]}):t&&t=="JOINING"?le.jsx("div",{className:"flex  justify-center items-center h-[80vh] w-full z-10",children:le.jsx("p",{className:"btn btn-primary btn-wide",children:"Joining the meeting..."})}):le.jsx("div",{className:"flex  justify-center items-center h-[80vh] w-full z-10",children:le.jsx("button",{className:"btn btn-primary btn-wide",onClick:a,children:"Joing Now"})})})]})}function Z6(){const{leave:e,toggleMic:t,toggleWebcam:r}=hv();return le.jsxs("div",{className:" join",children:[le.jsx("button",{className:"join-item py-4 px-2 w-10 bg-base-300 ",onClick:()=>e(),children:le.jsx(V6,{style:{color:"red",fontSize:20}})}),le.jsx("button",{className:"join-item py-4 px-2 w-10 bg-base-300",onClick:()=>t(),children:le.jsx(f2,{style:{color:"white",fontSize:20}})}),le.jsx("button",{className:"join-item py-4 px-2 w-10 bg-base-300 ",onClick:()=>r(),children:le.jsx(m2,{style:{color:"white",fontSize:20}})})]})}function e3({user:e}){const[t,r]=Oe.useState(null),[n,i]=Oe.useState(null),a=async E=>{const p=await Sx();console.log(p),i(p);const o=E??await Rx({token:p});r(o),console.log(`meeting id: ${o}`),localStorage.setItem("meetingId",o)},y=()=>{r(null)};return Oe.useEffect(()=>{},[]),n&&t?le.jsx(wx,{config:{meetingId:t,micEnabled:!0,webcamEnabled:!0,name:e.fullname},token:n,children:le.jsx(X6,{meetingId:t,onMeetingLeave:y})}):le.jsx("div",{className:"flex",children:le.jsx(Q6,{getMeetingAndToken:a})})}const ka=Object.create(null);ka.open="0";ka.close="1";ka.ping="2";ka.pong="3";ka.message="4";ka.upgrade="5";ka.noop="6";const _p=Object.create(null);Object.keys(ka).forEach(e=>{_p[ka[e]]=e});const jm={type:"error",data:"parser error"},g2=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",v2=typeof ArrayBuffer=="function",y2=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,wv=({type:e,data:t},r,n)=>g2&&t instanceof Blob?r?n(t):Ny(t,n):v2&&(t instanceof ArrayBuffer||y2(t))?r?n(t):Ny(new Blob([t]),n):n(ka[e]+(t||"")),Ny=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function jy(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Of;function t3(e,t){if(g2&&e.data instanceof Blob)return e.data.arrayBuffer().then(jy).then(t);if(v2&&(e.data instanceof ArrayBuffer||y2(e.data)))return t(jy(e.data));wv(e,!1,r=>{Of||(Of=new TextEncoder),t(Of.encode(r))})}const By="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<By.length;e++)wu[By.charCodeAt(e)]=e;const r3=e=>{let t=e.length*.75,r=e.length,n,i=0,a,y,E,p;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const o=new ArrayBuffer(t),C=new Uint8Array(o);for(n=0;n<r;n+=4)a=wu[e.charCodeAt(n)],y=wu[e.charCodeAt(n+1)],E=wu[e.charCodeAt(n+2)],p=wu[e.charCodeAt(n+3)],C[i++]=a<<2|y>>4,C[i++]=(y&15)<<4|E>>2,C[i++]=(E&3)<<6|p&63;return o},n3=typeof ArrayBuffer=="function",bv=(e,t)=>{if(typeof e!="string")return{type:"message",data:_2(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:i3(e.substring(1),t)}:_p[r]?e.length>1?{type:_p[r],data:e.substring(1)}:{type:_p[r]}:jm},i3=(e,t)=>{if(n3){const r=r3(e);return _2(r,t)}else return{base64:!0,data:e}},_2=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},w2="",s3=(e,t)=>{const r=e.length,n=new Array(r);let i=0;e.forEach((a,y)=>{wv(a,!1,E=>{n[y]=E,++i===r&&t(n.join(w2))})})},a3=(e,t)=>{const r=e.split(w2),n=[];for(let i=0;i<r.length;i++){const a=bv(r[i],t);if(n.push(a),a.type==="error")break}return n};function o3(){return new TransformStream({transform(e,t){t3(e,r=>{const n=r.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const a=new DataView(i.buffer);a.setUint8(0,126),a.setUint16(1,n)}else{i=new Uint8Array(9);const a=new DataView(i.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(r)})}})}let Df;function rp(e){return e.reduce((t,r)=>t+r.length,0)}function np(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let i=0;i<t;i++)r[i]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function c3(e,t){Df||(Df=new TextDecoder);const r=[];let n=0,i=-1,a=!1;return new TransformStream({transform(y,E){for(r.push(y);;){if(n===0){if(rp(r)<1)break;const p=np(r,1);a=(p[0]&128)===128,i=p[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(rp(r)<2)break;const p=np(r,2);i=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),n=3}else if(n===2){if(rp(r)<8)break;const p=np(r,8),o=new DataView(p.buffer,p.byteOffset,p.length),C=o.getUint32(0);if(C>Math.pow(2,21)-1){E.enqueue(jm);break}i=C*Math.pow(2,32)+o.getUint32(4),n=3}else{if(rp(r)<i)break;const p=np(r,i);E.enqueue(bv(a?p:Df.decode(p),t)),n=0}if(i===0||i>e){E.enqueue(jm);break}}}})}const b2=4;function li(e){if(e)return l3(e)}function l3(e){for(var t in li.prototype)e[t]=li.prototype[t];return e}li.prototype.on=li.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};li.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};li.prototype.off=li.prototype.removeListener=li.prototype.removeAllListeners=li.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===t||n.fn===t){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+e],this};li.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,t)}return this};li.prototype.emitReserved=li.prototype.emit;li.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};li.prototype.hasListeners=function(e){return!!this.listeners(e).length};const jh=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),$s=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),u3="arraybuffer";function S2(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const d3=$s.setTimeout,p3=$s.clearTimeout;function Bh(e,t){t.useNativeTimers?(e.setTimeoutFn=d3.bind($s),e.clearTimeoutFn=p3.bind($s)):(e.setTimeoutFn=$s.setTimeout.bind($s),e.clearTimeoutFn=$s.clearTimeout.bind($s))}const h3=1.33;function f3(e){return typeof e=="string"?m3(e):Math.ceil((e.byteLength||e.size)*h3)}function m3(e){let t=0,r=0;for(let n=0,i=e.length;n<i;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function R2(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function g3(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function v3(e){let t={},r=e.split("&");for(let n=0,i=r.length;n<i;n++){let a=r[n].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}class y3 extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class Sv extends li{constructor(t){super(),this.writable=!1,Bh(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new y3(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=bv(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=g3(t);return r.length?"?"+r:""}}class _3 extends Sv{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};a3(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,s3(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=R2()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let E2=!1;try{E2=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const w3=E2;function b3(){}class S3 extends _3{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(i,a)=>{this.onError("xhr post error",i,a)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}let cl=class wp extends li{constructor(t,r,n){super(),this.createRequest=t,Bh(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=S2(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=wp.requestsCount++,wp.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=b3,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete wp.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};cl.requestsCount=0;cl.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Fy);else if(typeof addEventListener=="function"){const e="onpagehide"in $s?"pagehide":"unload";addEventListener(e,Fy,!1)}}function Fy(){for(let e in cl.requests)cl.requests.hasOwnProperty(e)&&cl.requests[e].abort()}const R3=function(){const e=k2({xdomain:!1});return e&&e.responseType!==null}();class E3 extends S3{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=R3&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new cl(k2,this.uri(),t)}}function k2(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||w3))return new XMLHttpRequest}catch{}if(!t)try{return new $s[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const C2=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class k3 extends Sv{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=C2?{}:S2(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],i=r===t.length-1;wv(n,this.supportsBinary,a=>{try{this.doWrite(n,a)}catch{}i&&jh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=R2()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const If=$s.WebSocket||$s.MozWebSocket;class C3 extends k3{createSocket(t,r,n){return C2?new If(t,r,n):r?new If(t,r):new If(t)}doWrite(t,r){this.ws.send(r)}}class P3 extends Sv{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=c3(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),i=o3();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const a=()=>{n.read().then(({done:E,value:p})=>{E||(this.onPacket(p),a())}).catch(E=>{})};a();const y={type:"open"};this.query.sid&&(y.data=`{"sid":"${this.query.sid}"}`),this._writer.write(y).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],i=r===t.length-1;this._writer.write(n).then(()=>{i&&jh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const T3={websocket:C3,webtransport:P3,polling:E3},x3=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,O3=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Bm(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let i=x3.exec(e||""),a={},y=14;for(;y--;)a[O3[y]]=i[y]||"";return r!=-1&&n!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=D3(a,a.path),a.queryKey=I3(a,a.query),a}function D3(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function I3(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,a){i&&(r[i]=a)}),r}const Fm=typeof addEventListener=="function"&&typeof removeEventListener=="function",bp=[];Fm&&addEventListener("offline",()=>{bp.forEach(e=>e())},!1);class Do extends li{constructor(t,r){if(super(),this.binaryType=u3,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=Bm(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=Bm(r.host).host);Bh(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=v3(this.opts.query)),Fm&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},bp.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=b2,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Do.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",Do.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(r+=f3(i)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,jh(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,i){if(typeof r=="function"&&(i=r,r=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const a={type:t,data:r,options:n};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(Do.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Fm&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=bp.indexOf(this._offlineEventListener);n!==-1&&bp.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}Do.protocol=b2;class M3 extends Do{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;Do.priorWebsocketSuccess=!1;const i=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",_=>{if(!n)if(_.type==="pong"&&_.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;Do.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(C(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=r.name,this.emitReserved("upgradeError",h)}}))};function a(){n||(n=!0,C(),r.close(),r=null)}const y=_=>{const h=new Error("probe error: "+_);h.transport=r.name,a(),this.emitReserved("upgradeError",h)};function E(){y("transport closed")}function p(){y("socket closed")}function o(_){r&&_.name!==r.name&&a()}const C=()=>{r.removeListener("open",i),r.removeListener("error",y),r.removeListener("close",E),this.off("close",p),this.off("upgrading",o)};r.once("open",i),r.once("error",y),r.once("close",E),this.once("close",p),this.once("upgrading",o),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let A3=class extends M3{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>T3[i]).filter(i=>!!i)),super(t,n)}};function L3(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=Bm(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const a=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port+t,n.href=n.protocol+"://"+a+(r&&r.port===n.port?"":":"+n.port),n}const N3=typeof ArrayBuffer=="function",j3=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,P2=Object.prototype.toString,B3=typeof Blob=="function"||typeof Blob<"u"&&P2.call(Blob)==="[object BlobConstructor]",F3=typeof File=="function"||typeof File<"u"&&P2.call(File)==="[object FileConstructor]";function Rv(e){return N3&&(e instanceof ArrayBuffer||j3(e))||B3&&e instanceof Blob||F3&&e instanceof File}function Sp(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(Sp(e[r]))return!0;return!1}if(Rv(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Sp(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Sp(e[r]))return!0;return!1}function U3(e){const t=[],r=e.data,n=e;return n.data=Um(r,t),n.attachments=t.length,{packet:n,buffers:t}}function Um(e,t){if(!e)return e;if(Rv(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=Um(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=Um(e[n],t));return r}return e}function z3(e,t){return e.data=zm(e.data,t),delete e.attachments,e}function zm(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=zm(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=zm(e[r],t));return e}const H3=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],W3=5;var $r;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})($r||($r={}));class V3{constructor(t){this.replacer=t}encode(t){return(t.type===$r.EVENT||t.type===$r.ACK)&&Sp(t)?this.encodeAsBinary({type:t.type===$r.EVENT?$r.BINARY_EVENT:$r.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===$r.BINARY_EVENT||t.type===$r.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=U3(t),n=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(n),i}}function Uy(e){return Object.prototype.toString.call(e)==="[object Object]"}class Ev extends li{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===$r.BINARY_EVENT;n||r.type===$r.BINARY_ACK?(r.type=n?$r.EVENT:$r.ACK,this.reconstructor=new $3(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(Rv(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if($r[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===$r.BINARY_EVENT||n.type===$r.BINARY_ACK){const a=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const y=t.substring(a,r);if(y!=Number(y)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(y)}if(t.charAt(r+1)==="/"){const a=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(a,r)}else n.nsp="/";const i=t.charAt(r+1);if(i!==""&&Number(i)==i){const a=r+1;for(;++r;){const y=t.charAt(r);if(y==null||Number(y)!=y){--r;break}if(r===t.length)break}n.id=Number(t.substring(a,r+1))}if(t.charAt(++r)){const a=this.tryParse(t.substr(r));if(Ev.isPayloadValid(n.type,a))n.data=a;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case $r.CONNECT:return Uy(r);case $r.DISCONNECT:return r===void 0;case $r.CONNECT_ERROR:return typeof r=="string"||Uy(r);case $r.EVENT:case $r.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&H3.indexOf(r[0])===-1);case $r.ACK:case $r.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class $3{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=z3(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const q3=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Ev,Encoder:V3,get PacketType(){return $r},protocol:W3},Symbol.toStringTag,{value:"Module"}));function sa(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const K3=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class T2 extends li{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[sa(t,"open",this.onopen.bind(this)),sa(t,"packet",this.onpacket.bind(this)),sa(t,"error",this.onerror.bind(this)),sa(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,i,a;if(K3.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const y={type:$r.EVENT,data:r};if(y.options={},y.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const C=this.ids++,_=r.pop();this._registerAckCallback(C,_),y.id=C}const E=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,p=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!E||(p?(this.notifyOutgoingListeners(y),this.packet(y)):this.sendBuffer.push(y)),this.flags={},this}_registerAckCallback(t,r){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[t]=r;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let E=0;E<this.sendBuffer.length;E++)this.sendBuffer[E].id===t&&this.sendBuffer.splice(E,1);r.call(this,new Error("operation has timed out"))},i),y=(...E)=>{this.io.clearTimeoutFn(a),r.apply(this,E)};y.withError=!0,this.acks[t]=y}emitWithAck(t,...r){return new Promise((n,i)=>{const a=(y,E)=>y?i(y):n(E);a.withError=!0,r.push(a),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...a)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(i)):(this._queue.shift(),r&&r(null,...a)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:$r.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case $r.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case $r.EVENT:case $r.BINARY_EVENT:this.onevent(t);break;case $r.ACK:case $r.BINARY_ACK:this.onack(t);break;case $r.DISCONNECT:this.ondisconnect();break;case $r.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...i){n||(n=!0,r.packet({type:$r.ACK,id:t,data:i}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:$r.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function Pl(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Pl.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};Pl.prototype.reset=function(){this.attempts=0};Pl.prototype.setMin=function(e){this.ms=e};Pl.prototype.setMax=function(e){this.max=e};Pl.prototype.setJitter=function(e){this.jitter=e};class Hm extends li{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Bh(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Pl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const i=r.parser||q3;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new A3(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=sa(r,"open",function(){n.onopen(),t&&t()}),a=E=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",E),t?t(E):this.maybeReconnectOnOpen()},y=sa(r,"error",a);if(this._timeout!==!1){const E=this._timeout,p=this.setTimeoutFn(()=>{i(),a(new Error("timeout")),r.close()},E);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(i),this.subs.push(y),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(sa(t,"ping",this.onping.bind(this)),sa(t,"data",this.ondata.bind(this)),sa(t,"error",this.onerror.bind(this)),sa(t,"close",this.onclose.bind(this)),sa(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){jh(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new T2(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const pu={};function Rp(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=L3(e,t.path||"/socket.io"),n=r.source,i=r.id,a=r.path,y=pu[i]&&a in pu[i].nsps,E=t.forceNew||t["force new connection"]||t.multiplex===!1||y;let p;return E?p=new Hm(n,t):(pu[i]||(pu[i]=new Hm(n,t)),p=pu[i]),r.query&&!t.query&&(t.query=r.queryKey),p.socket(r.path,t)}Object.assign(Rp,{Manager:Hm,Socket:T2,io:Rp,connect:Rp});function x2(e,t){return function(){return e.apply(t,arguments)}}const{toString:G3}=Object.prototype,{getPrototypeOf:kv}=Object,Fh=(e=>t=>{const r=G3.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ua=e=>(e=e.toLowerCase(),t=>Fh(t)===e),Uh=e=>t=>typeof t===e,{isArray:Tl}=Array,Yu=Uh("undefined");function J3(e){return e!==null&&!Yu(e)&&e.constructor!==null&&!Yu(e.constructor)&&As(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const O2=ua("ArrayBuffer");function Q3(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&O2(e.buffer),t}const Y3=Uh("string"),As=Uh("function"),D2=Uh("number"),zh=e=>e!==null&&typeof e=="object",X3=e=>e===!0||e===!1,Ep=e=>{if(Fh(e)!=="object")return!1;const t=kv(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Z3=ua("Date"),eO=ua("File"),tO=ua("Blob"),rO=ua("FileList"),nO=e=>zh(e)&&As(e.pipe),iO=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||As(e.append)&&((t=Fh(e))==="formdata"||t==="object"&&As(e.toString)&&e.toString()==="[object FormData]"))},sO=ua("URLSearchParams"),[aO,oO,cO,lO]=["ReadableStream","Request","Response","Headers"].map(ua),uO=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function fd(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),Tl(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const a=r?Object.getOwnPropertyNames(e):Object.keys(e),y=a.length;let E;for(n=0;n<y;n++)E=a[n],t.call(null,e[E],E,e)}}function I2(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const rc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,M2=e=>!Yu(e)&&e!==rc;function Wm(){const{caseless:e}=M2(this)&&this||{},t={},r=(n,i)=>{const a=e&&I2(t,i)||i;Ep(t[a])&&Ep(n)?t[a]=Wm(t[a],n):Ep(n)?t[a]=Wm({},n):Tl(n)?t[a]=n.slice():t[a]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&fd(arguments[n],r);return t}const dO=(e,t,r,{allOwnKeys:n}={})=>(fd(t,(i,a)=>{r&&As(i)?e[a]=x2(i,r):e[a]=i},{allOwnKeys:n}),e),pO=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),hO=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},fO=(e,t,r,n)=>{let i,a,y;const E={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)y=i[a],(!n||n(y,e,t))&&!E[y]&&(t[y]=e[y],E[y]=!0);e=r!==!1&&kv(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},mO=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},gO=e=>{if(!e)return null;if(Tl(e))return e;let t=e.length;if(!D2(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},vO=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&kv(Uint8Array)),yO=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const a=i.value;t.call(e,a[0],a[1])}},_O=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},wO=ua("HTMLFormElement"),bO=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),zy=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),SO=ua("RegExp"),A2=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};fd(r,(i,a)=>{let y;(y=t(i,a,e))!==!1&&(n[a]=y||i)}),Object.defineProperties(e,n)},RO=e=>{A2(e,(t,r)=>{if(As(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(As(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},EO=(e,t)=>{const r={},n=i=>{i.forEach(a=>{r[a]=!0})};return Tl(e)?n(e):n(String(e).split(t)),r},kO=()=>{},CO=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,Mf="abcdefghijklmnopqrstuvwxyz",Hy="0123456789",L2={DIGIT:Hy,ALPHA:Mf,ALPHA_DIGIT:Mf+Mf.toUpperCase()+Hy},PO=(e=16,t=L2.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function TO(e){return!!(e&&As(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const xO=e=>{const t=new Array(10),r=(n,i)=>{if(zh(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const a=Tl(n)?[]:{};return fd(n,(y,E)=>{const p=r(y,i+1);!Yu(p)&&(a[E]=p)}),t[i]=void 0,a}}return n};return r(e,0)},OO=ua("AsyncFunction"),DO=e=>e&&(zh(e)||As(e))&&As(e.then)&&As(e.catch),N2=((e,t)=>e?setImmediate:t?((r,n)=>(rc.addEventListener("message",({source:i,data:a})=>{i===rc&&a===r&&n.length&&n.shift()()},!1),i=>{n.push(i),rc.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",As(rc.postMessage)),IO=typeof queueMicrotask<"u"?queueMicrotask.bind(rc):typeof process<"u"&&process.nextTick||N2,Be={isArray:Tl,isArrayBuffer:O2,isBuffer:J3,isFormData:iO,isArrayBufferView:Q3,isString:Y3,isNumber:D2,isBoolean:X3,isObject:zh,isPlainObject:Ep,isReadableStream:aO,isRequest:oO,isResponse:cO,isHeaders:lO,isUndefined:Yu,isDate:Z3,isFile:eO,isBlob:tO,isRegExp:SO,isFunction:As,isStream:nO,isURLSearchParams:sO,isTypedArray:vO,isFileList:rO,forEach:fd,merge:Wm,extend:dO,trim:uO,stripBOM:pO,inherits:hO,toFlatObject:fO,kindOf:Fh,kindOfTest:ua,endsWith:mO,toArray:gO,forEachEntry:yO,matchAll:_O,isHTMLForm:wO,hasOwnProperty:zy,hasOwnProp:zy,reduceDescriptors:A2,freezeMethods:RO,toObjectSet:EO,toCamelCase:bO,noop:kO,toFiniteNumber:CO,findKey:I2,global:rc,isContextDefined:M2,ALPHABET:L2,generateString:PO,isSpecCompliantForm:TO,toJSONObject:xO,isAsyncFn:OO,isThenable:DO,setImmediate:N2,asap:IO};function Dr(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}Be.inherits(Dr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Be.toJSONObject(this.config),code:this.code,status:this.status}}});const j2=Dr.prototype,B2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{B2[e]={value:e}});Object.defineProperties(Dr,B2);Object.defineProperty(j2,"isAxiosError",{value:!0});Dr.from=(e,t,r,n,i,a)=>{const y=Object.create(j2);return Be.toFlatObject(e,y,function(p){return p!==Error.prototype},E=>E!=="isAxiosError"),Dr.call(y,e.message,t,r,n,i),y.cause=e,y.name=e.name,a&&Object.assign(y,a),y};const MO=null;function Vm(e){return Be.isPlainObject(e)||Be.isArray(e)}function F2(e){return Be.endsWith(e,"[]")?e.slice(0,-2):e}function Wy(e,t,r){return e?e.concat(t).map(function(i,a){return i=F2(i),!r&&a?"["+i+"]":i}).join(r?".":""):t}function AO(e){return Be.isArray(e)&&!e.some(Vm)}const LO=Be.toFlatObject(Be,{},null,function(t){return/^is[A-Z]/.test(t)});function Hh(e,t,r){if(!Be.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Be.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,g){return!Be.isUndefined(g[f])});const n=r.metaTokens,i=r.visitor||C,a=r.dots,y=r.indexes,p=(r.Blob||typeof Blob<"u"&&Blob)&&Be.isSpecCompliantForm(t);if(!Be.isFunction(i))throw new TypeError("visitor must be a function");function o(k){if(k===null)return"";if(Be.isDate(k))return k.toISOString();if(!p&&Be.isBlob(k))throw new Dr("Blob is not supported. Use a Buffer instead.");return Be.isArrayBuffer(k)||Be.isTypedArray(k)?p&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function C(k,f,g){let s=k;if(k&&!g&&typeof k=="object"){if(Be.endsWith(f,"{}"))f=n?f:f.slice(0,-2),k=JSON.stringify(k);else if(Be.isArray(k)&&AO(k)||(Be.isFileList(k)||Be.endsWith(f,"[]"))&&(s=Be.toArray(k)))return f=F2(f),s.forEach(function(S,T){!(Be.isUndefined(S)||S===null)&&t.append(y===!0?Wy([f],T,a):y===null?f:f+"[]",o(S))}),!1}return Vm(k)?!0:(t.append(Wy(g,f,a),o(k)),!1)}const _=[],h=Object.assign(LO,{defaultVisitor:C,convertValue:o,isVisitable:Vm});function b(k,f){if(!Be.isUndefined(k)){if(_.indexOf(k)!==-1)throw Error("Circular reference detected in "+f.join("."));_.push(k),Be.forEach(k,function(s,w){(!(Be.isUndefined(s)||s===null)&&i.call(t,s,Be.isString(w)?w.trim():w,f,h))===!0&&b(s,f?f.concat(w):[w])}),_.pop()}}if(!Be.isObject(e))throw new TypeError("data must be an object");return b(e),t}function Vy(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Cv(e,t){this._pairs=[],e&&Hh(e,this,t)}const U2=Cv.prototype;U2.append=function(t,r){this._pairs.push([t,r])};U2.toString=function(t){const r=t?function(n){return t.call(this,n,Vy)}:Vy;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function NO(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function z2(e,t,r){if(!t)return e;const n=r&&r.encode||NO,i=r&&r.serialize;let a;if(i?a=i(t,r):a=Be.isURLSearchParams(t)?t.toString():new Cv(t,r).toString(n),a){const y=e.indexOf("#");y!==-1&&(e=e.slice(0,y)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class $y{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Be.forEach(this.handlers,function(n){n!==null&&t(n)})}}const H2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},jO=typeof URLSearchParams<"u"?URLSearchParams:Cv,BO=typeof FormData<"u"?FormData:null,FO=typeof Blob<"u"?Blob:null,UO={isBrowser:!0,classes:{URLSearchParams:jO,FormData:BO,Blob:FO},protocols:["http","https","file","blob","url","data"]},Pv=typeof window<"u"&&typeof document<"u",$m=typeof navigator=="object"&&navigator||void 0,zO=Pv&&(!$m||["ReactNative","NativeScript","NS"].indexOf($m.product)<0),HO=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",WO=Pv&&window.location.href||"http://localhost",VO=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Pv,hasStandardBrowserEnv:zO,hasStandardBrowserWebWorkerEnv:HO,navigator:$m,origin:WO},Symbol.toStringTag,{value:"Module"})),ws={...VO,...UO};function $O(e,t){return Hh(e,new ws.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,a){return ws.isNode&&Be.isBuffer(r)?(this.append(n,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function qO(e){return Be.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function KO(e){const t={},r=Object.keys(e);let n;const i=r.length;let a;for(n=0;n<i;n++)a=r[n],t[a]=e[a];return t}function W2(e){function t(r,n,i,a){let y=r[a++];if(y==="__proto__")return!0;const E=Number.isFinite(+y),p=a>=r.length;return y=!y&&Be.isArray(i)?i.length:y,p?(Be.hasOwnProp(i,y)?i[y]=[i[y],n]:i[y]=n,!E):((!i[y]||!Be.isObject(i[y]))&&(i[y]=[]),t(r,n,i[y],a)&&Be.isArray(i[y])&&(i[y]=KO(i[y])),!E)}if(Be.isFormData(e)&&Be.isFunction(e.entries)){const r={};return Be.forEachEntry(e,(n,i)=>{t(qO(n),i,r,0)}),r}return null}function GO(e,t,r){if(Be.isString(e))try{return(t||JSON.parse)(e),Be.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(0,JSON.stringify)(e)}const md={transitional:H2,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,a=Be.isObject(t);if(a&&Be.isHTMLForm(t)&&(t=new FormData(t)),Be.isFormData(t))return i?JSON.stringify(W2(t)):t;if(Be.isArrayBuffer(t)||Be.isBuffer(t)||Be.isStream(t)||Be.isFile(t)||Be.isBlob(t)||Be.isReadableStream(t))return t;if(Be.isArrayBufferView(t))return t.buffer;if(Be.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let E;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return $O(t,this.formSerializer).toString();if((E=Be.isFileList(t))||n.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Hh(E?{"files[]":t}:t,p&&new p,this.formSerializer)}}return a||i?(r.setContentType("application/json",!1),GO(t)):t}],transformResponse:[function(t){const r=this.transitional||md.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(Be.isResponse(t)||Be.isReadableStream(t))return t;if(t&&Be.isString(t)&&(n&&!this.responseType||i)){const y=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(E){if(y)throw E.name==="SyntaxError"?Dr.from(E,Dr.ERR_BAD_RESPONSE,this,null,this.response):E}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ws.classes.FormData,Blob:ws.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Be.forEach(["delete","get","head","post","put","patch"],e=>{md.headers[e]={}});const JO=Be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),QO=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(y){i=y.indexOf(":"),r=y.substring(0,i).trim().toLowerCase(),n=y.substring(i+1).trim(),!(!r||t[r]&&JO[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},qy=Symbol("internals");function hu(e){return e&&String(e).trim().toLowerCase()}function kp(e){return e===!1||e==null?e:Be.isArray(e)?e.map(kp):String(e)}function YO(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const XO=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Af(e,t,r,n,i){if(Be.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!Be.isString(t)){if(Be.isString(n))return t.indexOf(n)!==-1;if(Be.isRegExp(n))return n.test(t)}}function ZO(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function e7(e,t){const r=Be.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,a,y){return this[n].call(this,t,i,a,y)},configurable:!0})})}class bs{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function a(E,p,o){const C=hu(p);if(!C)throw new Error("header name must be a non-empty string");const _=Be.findKey(i,C);(!_||i[_]===void 0||o===!0||o===void 0&&i[_]!==!1)&&(i[_||p]=kp(E))}const y=(E,p)=>Be.forEach(E,(o,C)=>a(o,C,p));if(Be.isPlainObject(t)||t instanceof this.constructor)y(t,r);else if(Be.isString(t)&&(t=t.trim())&&!XO(t))y(QO(t),r);else if(Be.isHeaders(t))for(const[E,p]of t.entries())a(p,E,n);else t!=null&&a(r,t,n);return this}get(t,r){if(t=hu(t),t){const n=Be.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return YO(i);if(Be.isFunction(r))return r.call(this,i,n);if(Be.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=hu(t),t){const n=Be.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Af(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function a(y){if(y=hu(y),y){const E=Be.findKey(n,y);E&&(!r||Af(n,n[E],E,r))&&(delete n[E],i=!0)}}return Be.isArray(t)?t.forEach(a):a(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const a=r[n];(!t||Af(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const r=this,n={};return Be.forEach(this,(i,a)=>{const y=Be.findKey(n,a);if(y){r[y]=kp(i),delete r[a];return}const E=t?ZO(a):String(a).trim();E!==a&&delete r[a],r[E]=kp(i),n[E]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Be.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&Be.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[qy]=this[qy]={accessors:{}}).accessors,i=this.prototype;function a(y){const E=hu(y);n[E]||(e7(i,y),n[E]=!0)}return Be.isArray(t)?t.forEach(a):a(t),this}}bs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Be.reduceDescriptors(bs.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});Be.freezeMethods(bs);function Lf(e,t){const r=this||md,n=t||r,i=bs.from(n.headers);let a=n.data;return Be.forEach(e,function(E){a=E.call(r,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function V2(e){return!!(e&&e.__CANCEL__)}function xl(e,t,r){Dr.call(this,e??"canceled",Dr.ERR_CANCELED,t,r),this.name="CanceledError"}Be.inherits(xl,Dr,{__CANCEL__:!0});function $2(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Dr("Request failed with status code "+r.status,[Dr.ERR_BAD_REQUEST,Dr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function t7(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function r7(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,a=0,y;return t=t!==void 0?t:1e3,function(p){const o=Date.now(),C=n[a];y||(y=o),r[i]=p,n[i]=o;let _=a,h=0;for(;_!==i;)h+=r[_++],_=_%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),o-y<t)return;const b=C&&o-C;return b?Math.round(h*1e3/b):void 0}}function n7(e,t){let r=0,n=1e3/t,i,a;const y=(o,C=Date.now())=>{r=C,i=null,a&&(clearTimeout(a),a=null),e.apply(null,o)};return[(...o)=>{const C=Date.now(),_=C-r;_>=n?y(o,C):(i=o,a||(a=setTimeout(()=>{a=null,y(i)},n-_)))},()=>i&&y(i)]}const ih=(e,t,r=3)=>{let n=0;const i=r7(50,250);return n7(a=>{const y=a.loaded,E=a.lengthComputable?a.total:void 0,p=y-n,o=i(p),C=y<=E;n=y;const _={loaded:y,total:E,progress:E?y/E:void 0,bytes:p,rate:o||void 0,estimated:o&&E&&C?(E-y)/o:void 0,event:a,lengthComputable:E!=null,[t?"download":"upload"]:!0};e(_)},r)},Ky=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Gy=e=>(...t)=>Be.asap(()=>e(...t)),i7=ws.hasStandardBrowserEnv?function(){const t=ws.navigator&&/(msie|trident)/i.test(ws.navigator.userAgent),r=document.createElement("a");let n;function i(a){let y=a;return t&&(r.setAttribute("href",y),y=r.href),r.setAttribute("href",y),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(y){const E=Be.isString(y)?i(y):y;return E.protocol===n.protocol&&E.host===n.host}}():function(){return function(){return!0}}(),s7=ws.hasStandardBrowserEnv?{write(e,t,r,n,i,a){const y=[e+"="+encodeURIComponent(t)];Be.isNumber(r)&&y.push("expires="+new Date(r).toGMTString()),Be.isString(n)&&y.push("path="+n),Be.isString(i)&&y.push("domain="+i),a===!0&&y.push("secure"),document.cookie=y.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function a7(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function o7(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function q2(e,t){return e&&!a7(t)?o7(e,t):t}const Jy=e=>e instanceof bs?{...e}:e;function fc(e,t){t=t||{};const r={};function n(o,C,_){return Be.isPlainObject(o)&&Be.isPlainObject(C)?Be.merge.call({caseless:_},o,C):Be.isPlainObject(C)?Be.merge({},C):Be.isArray(C)?C.slice():C}function i(o,C,_){if(Be.isUndefined(C)){if(!Be.isUndefined(o))return n(void 0,o,_)}else return n(o,C,_)}function a(o,C){if(!Be.isUndefined(C))return n(void 0,C)}function y(o,C){if(Be.isUndefined(C)){if(!Be.isUndefined(o))return n(void 0,o)}else return n(void 0,C)}function E(o,C,_){if(_ in t)return n(o,C);if(_ in e)return n(void 0,o)}const p={url:a,method:a,data:a,baseURL:y,transformRequest:y,transformResponse:y,paramsSerializer:y,timeout:y,timeoutMessage:y,withCredentials:y,withXSRFToken:y,adapter:y,responseType:y,xsrfCookieName:y,xsrfHeaderName:y,onUploadProgress:y,onDownloadProgress:y,decompress:y,maxContentLength:y,maxBodyLength:y,beforeRedirect:y,transport:y,httpAgent:y,httpsAgent:y,cancelToken:y,socketPath:y,responseEncoding:y,validateStatus:E,headers:(o,C)=>i(Jy(o),Jy(C),!0)};return Be.forEach(Object.keys(Object.assign({},e,t)),function(C){const _=p[C]||i,h=_(e[C],t[C],C);Be.isUndefined(h)&&_!==E||(r[C]=h)}),r}const K2=e=>{const t=fc({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:a,headers:y,auth:E}=t;t.headers=y=bs.from(y),t.url=z2(q2(t.baseURL,t.url),e.params,e.paramsSerializer),E&&y.set("Authorization","Basic "+btoa((E.username||"")+":"+(E.password?unescape(encodeURIComponent(E.password)):"")));let p;if(Be.isFormData(r)){if(ws.hasStandardBrowserEnv||ws.hasStandardBrowserWebWorkerEnv)y.setContentType(void 0);else if((p=y.getContentType())!==!1){const[o,...C]=p?p.split(";").map(_=>_.trim()).filter(Boolean):[];y.setContentType([o||"multipart/form-data",...C].join("; "))}}if(ws.hasStandardBrowserEnv&&(n&&Be.isFunction(n)&&(n=n(t)),n||n!==!1&&i7(t.url))){const o=i&&a&&s7.read(a);o&&y.set(i,o)}return t},c7=typeof XMLHttpRequest<"u",l7=c7&&function(e){return new Promise(function(r,n){const i=K2(e);let a=i.data;const y=bs.from(i.headers).normalize();let{responseType:E,onUploadProgress:p,onDownloadProgress:o}=i,C,_,h,b,k;function f(){b&&b(),k&&k(),i.cancelToken&&i.cancelToken.unsubscribe(C),i.signal&&i.signal.removeEventListener("abort",C)}let g=new XMLHttpRequest;g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout;function s(){if(!g)return;const S=bs.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),x={data:!E||E==="text"||E==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:S,config:e,request:g};$2(function(P){r(P),f()},function(P){n(P),f()},x),g=null}"onloadend"in g?g.onloadend=s:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(s)},g.onabort=function(){g&&(n(new Dr("Request aborted",Dr.ECONNABORTED,e,g)),g=null)},g.onerror=function(){n(new Dr("Network Error",Dr.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let T=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const x=i.transitional||H2;i.timeoutErrorMessage&&(T=i.timeoutErrorMessage),n(new Dr(T,x.clarifyTimeoutError?Dr.ETIMEDOUT:Dr.ECONNABORTED,e,g)),g=null},a===void 0&&y.setContentType(null),"setRequestHeader"in g&&Be.forEach(y.toJSON(),function(T,x){g.setRequestHeader(x,T)}),Be.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),E&&E!=="json"&&(g.responseType=i.responseType),o&&([h,k]=ih(o,!0),g.addEventListener("progress",h)),p&&g.upload&&([_,b]=ih(p),g.upload.addEventListener("progress",_),g.upload.addEventListener("loadend",b)),(i.cancelToken||i.signal)&&(C=S=>{g&&(n(!S||S.type?new xl(null,e,g):S),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(C),i.signal&&(i.signal.aborted?C():i.signal.addEventListener("abort",C)));const w=t7(i.url);if(w&&ws.protocols.indexOf(w)===-1){n(new Dr("Unsupported protocol "+w+":",Dr.ERR_BAD_REQUEST,e));return}g.send(a||null)})},u7=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,i;const a=function(o){if(!i){i=!0,E();const C=o instanceof Error?o:this.reason;n.abort(C instanceof Dr?C:new xl(C instanceof Error?C.message:C))}};let y=t&&setTimeout(()=>{y=null,a(new Dr(`timeout ${t} of ms exceeded`,Dr.ETIMEDOUT))},t);const E=()=>{e&&(y&&clearTimeout(y),y=null,e.forEach(o=>{o.unsubscribe?o.unsubscribe(a):o.removeEventListener("abort",a)}),e=null)};e.forEach(o=>o.addEventListener("abort",a));const{signal:p}=n;return p.unsubscribe=()=>Be.asap(E),p}},d7=function*(e,t){let r=e.byteLength;if(r<t){yield e;return}let n=0,i;for(;n<r;)i=n+t,yield e.slice(n,i),n=i},p7=async function*(e,t){for await(const r of h7(e))yield*d7(r,t)},h7=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Qy=(e,t,r,n)=>{const i=p7(e,t);let a=0,y,E=p=>{y||(y=!0,n&&n(p))};return new ReadableStream({async pull(p){try{const{done:o,value:C}=await i.next();if(o){E(),p.close();return}let _=C.byteLength;if(r){let h=a+=_;r(h)}p.enqueue(new Uint8Array(C))}catch(o){throw E(o),o}},cancel(p){return E(p),i.return()}},{highWaterMark:2})},Wh=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",G2=Wh&&typeof ReadableStream=="function",f7=Wh&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),J2=(e,...t)=>{try{return!!e(...t)}catch{return!1}},m7=G2&&J2(()=>{let e=!1;const t=new Request(ws.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Yy=64*1024,qm=G2&&J2(()=>Be.isReadableStream(new Response("").body)),sh={stream:qm&&(e=>e.body)};Wh&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!sh[t]&&(sh[t]=Be.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new Dr(`Response type '${t}' is not supported`,Dr.ERR_NOT_SUPPORT,n)})})})(new Response);const g7=async e=>{if(e==null)return 0;if(Be.isBlob(e))return e.size;if(Be.isSpecCompliantForm(e))return(await new Request(ws.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Be.isArrayBufferView(e)||Be.isArrayBuffer(e))return e.byteLength;if(Be.isURLSearchParams(e)&&(e=e+""),Be.isString(e))return(await f7(e)).byteLength},v7=async(e,t)=>{const r=Be.toFiniteNumber(e.getContentLength());return r??g7(t)},y7=Wh&&(async e=>{let{url:t,method:r,data:n,signal:i,cancelToken:a,timeout:y,onDownloadProgress:E,onUploadProgress:p,responseType:o,headers:C,withCredentials:_="same-origin",fetchOptions:h}=K2(e);o=o?(o+"").toLowerCase():"text";let b=u7([i,a&&a.toAbortSignal()],y),k;const f=b&&b.unsubscribe&&(()=>{b.unsubscribe()});let g;try{if(p&&m7&&r!=="get"&&r!=="head"&&(g=await v7(C,n))!==0){let x=new Request(t,{method:"POST",body:n,duplex:"half"}),O;if(Be.isFormData(n)&&(O=x.headers.get("content-type"))&&C.setContentType(O),x.body){const[P,R]=Ky(g,ih(Gy(p)));n=Qy(x.body,Yy,P,R)}}Be.isString(_)||(_=_?"include":"omit");const s="credentials"in Request.prototype;k=new Request(t,{...h,signal:b,method:r.toUpperCase(),headers:C.normalize().toJSON(),body:n,duplex:"half",credentials:s?_:void 0});let w=await fetch(k);const S=qm&&(o==="stream"||o==="response");if(qm&&(E||S&&f)){const x={};["status","statusText","headers"].forEach(I=>{x[I]=w[I]});const O=Be.toFiniteNumber(w.headers.get("content-length")),[P,R]=E&&Ky(O,ih(Gy(E),!0))||[];w=new Response(Qy(w.body,Yy,P,()=>{R&&R(),f&&f()}),x)}o=o||"text";let T=await sh[Be.findKey(sh,o)||"text"](w,e);return!S&&f&&f(),await new Promise((x,O)=>{$2(x,O,{data:T,headers:bs.from(w.headers),status:w.status,statusText:w.statusText,config:e,request:k})})}catch(s){throw f&&f(),s&&s.name==="TypeError"&&/fetch/i.test(s.message)?Object.assign(new Dr("Network Error",Dr.ERR_NETWORK,e,k),{cause:s.cause||s}):Dr.from(s,s&&s.code,e,k)}}),Km={http:MO,xhr:l7,fetch:y7};Be.forEach(Km,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Xy=e=>`- ${e}`,_7=e=>Be.isFunction(e)||e===null||e===!1,Q2={getAdapter:e=>{e=Be.isArray(e)?e:[e];const{length:t}=e;let r,n;const i={};for(let a=0;a<t;a++){r=e[a];let y;if(n=r,!_7(r)&&(n=Km[(y=String(r)).toLowerCase()],n===void 0))throw new Dr(`Unknown adapter '${y}'`);if(n)break;i[y||"#"+a]=n}if(!n){const a=Object.entries(i).map(([E,p])=>`adapter ${E} `+(p===!1?"is not supported by the environment":"is not available in the build"));let y=t?a.length>1?`since :
`+a.map(Xy).join(`
`):" "+Xy(a[0]):"as no adapter specified";throw new Dr("There is no suitable adapter to dispatch the request "+y,"ERR_NOT_SUPPORT")}return n},adapters:Km};function Nf(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new xl(null,e)}function Zy(e){return Nf(e),e.headers=bs.from(e.headers),e.data=Lf.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),Q2.getAdapter(e.adapter||md.adapter)(e).then(function(n){return Nf(e),n.data=Lf.call(e,e.transformResponse,n),n.headers=bs.from(n.headers),n},function(n){return V2(n)||(Nf(e),n&&n.response&&(n.response.data=Lf.call(e,e.transformResponse,n.response),n.response.headers=bs.from(n.response.headers))),Promise.reject(n)})}const Y2="1.7.7",Tv={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Tv[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const e_={};Tv.transitional=function(t,r,n){function i(a,y){return"[Axios v"+Y2+"] Transitional option '"+a+"'"+y+(n?". "+n:"")}return(a,y,E)=>{if(t===!1)throw new Dr(i(y," has been removed"+(r?" in "+r:"")),Dr.ERR_DEPRECATED);return r&&!e_[y]&&(e_[y]=!0,console.warn(i(y," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,y,E):!0}};function w7(e,t,r){if(typeof e!="object")throw new Dr("options must be an object",Dr.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const a=n[i],y=t[a];if(y){const E=e[a],p=E===void 0||y(E,a,e);if(p!==!0)throw new Dr("option "+a+" must be "+p,Dr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Dr("Unknown option "+a,Dr.ERR_BAD_OPTION)}}const Gm={assertOptions:w7,validators:Tv},po=Gm.validators;class ac{constructor(t){this.defaults=t,this.interceptors={request:new $y,response:new $y}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=fc(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:a}=r;n!==void 0&&Gm.assertOptions(n,{silentJSONParsing:po.transitional(po.boolean),forcedJSONParsing:po.transitional(po.boolean),clarifyTimeoutError:po.transitional(po.boolean)},!1),i!=null&&(Be.isFunction(i)?r.paramsSerializer={serialize:i}:Gm.assertOptions(i,{encode:po.function,serialize:po.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let y=a&&Be.merge(a.common,a[r.method]);a&&Be.forEach(["delete","get","head","post","put","patch","common"],k=>{delete a[k]}),r.headers=bs.concat(y,a);const E=[];let p=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(r)===!1||(p=p&&f.synchronous,E.unshift(f.fulfilled,f.rejected))});const o=[];this.interceptors.response.forEach(function(f){o.push(f.fulfilled,f.rejected)});let C,_=0,h;if(!p){const k=[Zy.bind(this),void 0];for(k.unshift.apply(k,E),k.push.apply(k,o),h=k.length,C=Promise.resolve(r);_<h;)C=C.then(k[_++],k[_++]);return C}h=E.length;let b=r;for(_=0;_<h;){const k=E[_++],f=E[_++];try{b=k(b)}catch(g){f.call(this,g);break}}try{C=Zy.call(this,b)}catch(k){return Promise.reject(k)}for(_=0,h=o.length;_<h;)C=C.then(o[_++],o[_++]);return C}getUri(t){t=fc(this.defaults,t);const r=q2(t.baseURL,t.url);return z2(r,t.params,t.paramsSerializer)}}Be.forEach(["delete","get","head","options"],function(t){ac.prototype[t]=function(r,n){return this.request(fc(n||{},{method:t,url:r,data:(n||{}).data}))}});Be.forEach(["post","put","patch"],function(t){function r(n){return function(a,y,E){return this.request(fc(E||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:y}))}}ac.prototype[t]=r(),ac.prototype[t+"Form"]=r(!0)});class xv{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a;const y=new Promise(E=>{n.subscribe(E),a=E}).then(i);return y.cancel=function(){n.unsubscribe(a)},y},t(function(a,y,E){n.reason||(n.reason=new xl(a,y,E),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new xv(function(i){t=i}),cancel:t}}}function b7(e){return function(r){return e.apply(null,r)}}function S7(e){return Be.isObject(e)&&e.isAxiosError===!0}const Jm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Jm).forEach(([e,t])=>{Jm[t]=e});function X2(e){const t=new ac(e),r=x2(ac.prototype.request,t);return Be.extend(r,ac.prototype,t,{allOwnKeys:!0}),Be.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return X2(fc(e,i))},r}const ui=X2(md);ui.Axios=ac;ui.CanceledError=xl;ui.CancelToken=xv;ui.isCancel=V2;ui.VERSION=Y2;ui.toFormData=Hh;ui.AxiosError=Dr;ui.Cancel=ui.CanceledError;ui.all=function(t){return Promise.all(t)};ui.spread=b7;ui.isAxiosError=S7;ui.mergeConfig=fc;ui.AxiosHeaders=bs;ui.formToJSON=e=>W2(Be.isHTMLForm(e)?new FormData(e):e);ui.getAdapter=Q2.getAdapter;ui.HttpStatusCode=Jm;ui.default=ui;const R7=()=>{const[e,t]=Oe.useState(null),[r,n]=Oe.useState(!1),i=p=>{p.preventDefault(),n(!0)},a=()=>{n(!1)},y=p=>{p.preventDefault(),n(!1);const o=p.dataTransfer.files[0];o&&t(o)},E=async()=>{if(!e){alert("Please select a file to upload.");return}const p=new FormData;p.append("file",e);try{if(!localStorage.getItem("meetingId"))throw{message:"Invalid meeting Section"};const o=localStorage.getItem("authToken"),C=localStorage.getItem("meetingId");p.append("meetingId",C);const _=await ui.post("/upload",p,{headers:{"Content-Type":"multipart/form-data",Authorization:o}});console.log(_.data),_.data.error?Qi.fire({text:_.data.reason,icon:"error",toast:!0,position:"top"}):Qi.fire({text:_.data.reason,icon:"success",toast:!0,position:"top"})}catch(o){Qi.fire({text:o.message,icon:"error",toast:!0,position:"center"}),console.error("Error uploading file:",o)}};return le.jsxs("div",{children:[le.jsxs("div",{className:`dropzone ${r?"dragging":""}`,onDragOver:i,onDragLeave:a,onDrop:y,onClick:()=>document.getElementById("file-input").click(),role:"button",tabIndex:0,children:[le.jsx("input",{type:"file",id:"file-input",style:{display:"none"},onChange:p=>t(p.target.files[0])}),le.jsx("p",{className:"text-xs",children:e?e.name:"Drag and drop a file here, or click to select"})]}),le.jsx("div",{className:"w-full py-1",children:le.jsxs("button",{className:"btn text-xs btn-sm btn-square btn-primary w-full mx-auto",onClick:E,children:["Share File ",le.jsx(G6,{style:{fontSize:20}})]})})]})};function E7(){const[e,t]=Oe.useState({email:"",fullname:""});return Oe.useEffect(()=>{localStorage.getItem("authToken")||(window.location.href="/"),setTimeout(()=>{(async function(){const r=localStorage.getItem("authToken");let n=await fetch("/getUser",{method:"POST",headers:{Authorization:r}}),{fullname:i,email:a}=await n.json();t({email:a,fullname:i})})()},1e3)},[]),le.jsxs("div",{className:"flex flex-row sm:flex-row w-full min-h-screen ",children:[le.jsx("div",{className:"w-auto sm:h-screen",children:le.jsx(C7,{})}),le.jsx("div",{className:"w-full sm:w-[95%] h-screen",children:le.jsx(k7,{user:e})})]})}const k7=({user:e})=>le.jsxs("div",{className:"h-screen flex flex-row",children:[le.jsxs("div",{className:"w-9/12  h-screen",children:[le.jsx("div",{className:"absolute inset-0 my-auto h-[500px]",style:{background:"linear-gradient(152.92deg, rgba(192, 132, 252, 0.2) 4.54%, rgba(232, 121, 249, 0.26) 34.2%, rgba(192, 132, 252, 0.1) 77.55%)",filter:"blur(118px)"}}),le.jsx(x7,{user:e})]}),le.jsxs("div",{className:"w-3/12 flex flex-col lg:h-screen  text-black p-2 z-10",style:{background:"linear-gradient(152.92deg, rgba(192, 132, 252, 0.2) 4.54%, rgba(232, 121, 249, 0.26) 34.2%, rgba(192, 132, 252, 0.1) 77.55%)"},children:[le.jsxs("div",{className:"w-full flex flex-col h-auto",children:[le.jsxs("div",{className:"w-full p-3",children:[le.jsx("h1",{className:"text-xs py-1",children:"Drag and Drop File Upload"}),le.jsx(R7,{})]}),le.jsx("div",{className:"w-full overflow-y-scroll h-[250px] ",children:le.jsx(T7,{})})]}),le.jsx("div",{className:"w-full",children:le.jsx(P7,{user:e})})]})]}),C7=()=>le.jsxs("aside",{class:"flex flex-col items-center w-16 h-screen py-8 overflow-y-auto bg-white border-r rtl:border-l rtl:border-r-0 dark:bg-gray-900 dark:border-gray-700",children:[le.jsxs("nav",{class:"flex flex-col flex-1 space-y-6",children:[le.jsx("a",{href:"#",class:"p-1.5 text-gray-700 focus:outline-nones transition-colors duration-200 rounded-lg dark:text-gray-200 dark:hover:bg-gray-800 hover:bg-gray-100",children:le.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6",children:le.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})})}),le.jsx("a",{href:"#",class:"p-1.5 text-gray-700 focus:outline-nones transition-colors duration-200 rounded-lg dark:text-gray-200 dark:hover:bg-gray-800 hover:bg-gray-100",children:le.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6",children:le.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"})})}),le.jsx("a",{href:"#",class:"p-1.5 text-gray-700 focus:outline-nones transition-colors duration-200 rounded-lg dark:text-gray-200 dark:hover:bg-gray-800 hover:bg-gray-100",children:le.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6",children:le.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.35 3.836c-.065.21-.1.433-.1.664 0 .414.336.75.75.75h4.5a.75.75 0 00.75-.75 2.25 2.25 0 00-.1-.664m-5.8 0A2.251 2.251 0 0113.5 2.25H15c1.012 0 1.867.668 2.15 1.586m-5.8 0c-.376.023-.75.05-1.124.08C9.095 4.01 8.25 4.973 8.25 6.108V8.25m8.9-4.414c.376.023.75.05 1.124.08 1.131.094 1.976 1.057 1.976 2.192V16.5A2.25 2.25 0 0118 18.75h-2.25m-7.5-10.5H4.875c-.621 0-1.125.504-1.125 1.125v11.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V18.75m-7.5-10.5h6.375c.621 0 1.125.504 1.125 1.125v9.375m-8.25-3l1.5 1.5 3-3.75"})})}),le.jsx("a",{href:"#",class:"p-1.5 text-gray-700 focus:outline-nones transition-colors duration-200 rounded-lg dark:text-gray-200 dark:hover:bg-gray-800 hover:bg-gray-100",children:le.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6",children:le.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 3v1.5M3 21v-6m0 0l2.77-.693a9 9 0 016.208.682l.108.054a9 9 0 006.086.71l3.114-.732a48.524 48.524 0 01-.005-10.499l-3.11.732a9 9 0 01-6.085-.711l-.108-.054a9 9 0 00-6.208-.682L3 4.5M3 15V4.5"})})}),le.jsx("a",{href:"#",class:"p-1.5 text-gray-700 focus:outline-nones transition-colors duration-200 rounded-lg dark:text-gray-200 dark:hover:bg-gray-800 hover:bg-gray-100",children:le.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6",children:le.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z"})})})]}),le.jsxs("div",{class:"flex flex-col space-y-6",children:[le.jsx("a",{href:"#",class:"p-1.5 text-gray-700 focus:outline-nones transition-colors duration-200 rounded-lg dark:text-gray-200 dark:hover:bg-gray-800 hover:bg-gray-100",children:le.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6",children:le.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.712 4.33a9.027 9.027 0 011.652 1.306c.51.51.944 1.064 1.306 1.652M16.712 4.33l-3.448 4.138m3.448-4.138a9.014 9.014 0 00-9.424 0M19.67 7.288l-4.138 3.448m4.138-3.448a9.014 9.014 0 010 9.424m-4.138-5.976a3.736 3.736 0 00-.88-1.388 3.737 3.737 0 00-1.388-.88m2.268 2.268a3.765 3.765 0 010 2.528m-2.268-4.796a3.765 3.765 0 00-2.528 0m4.796 4.796c-.181.506-.475.982-.88 1.388a3.736 3.736 0 01-1.388.88m2.268-2.268l4.138 3.448m0 0a9.027 9.027 0 01-1.306 1.652c-.51.51-1.064.944-1.652 1.306m0 0l-3.448-4.138m3.448 4.138a9.014 9.014 0 01-9.424 0m5.976-4.138a3.765 3.765 0 01-2.528 0m0 0a3.736 3.736 0 01-1.388-.88 3.737 3.737 0 01-.88-1.388m2.268 2.268L7.288 19.67m0 0a9.024 9.024 0 01-1.652-1.306 9.027 9.027 0 01-1.306-1.652m0 0l4.138-3.448M4.33 16.712a9.014 9.014 0 010-9.424m4.138 5.976a3.765 3.765 0 010-2.528m0 0c.181-.506.475-.982.88-1.388a3.736 3.736 0 011.388-.88m-2.268 2.268L4.33 7.288m6.406 1.18L7.288 4.33m0 0a9.024 9.024 0 00-1.652 1.306A9.025 9.025 0 004.33 7.288"})})}),le.jsx("a",{href:"#",class:"p-1.5 text-gray-700 focus:outline-nones transition-colors duration-200 rounded-lg dark:text-gray-200 dark:bg-gray-800 bg-gray-100",children:le.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6",children:[le.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.343 3.94c.09-.542.56-.94 1.11-.94h1.093c.55 0 1.02.398 1.11.94l.149.894c.07.424.384.764.78.93.398.164.855.142 1.205-.108l.737-.527a1.125 1.125 0 011.45.12l.773.774c.39.389.44 1.002.12 1.45l-.527.737c-.25.35-.272.806-.107 1.204.165.397.505.71.93.78l.893.15c.543.09.94.56.94 1.109v1.094c0 .55-.397 1.02-.94 1.11l-.893.149c-.425.07-.765.383-.93.78-.165.398-.143.854.107 1.204l.527.738c.32.447.269 1.06-.12 1.45l-.774.773a1.125 1.125 0 01-1.449.12l-.738-.527c-.35-.25-.806-.272-1.203-.107-.397.165-.71.505-.781.929l-.149.894c-.09.542-.56.94-1.11.94h-1.094c-.55 0-1.019-.398-1.11-.94l-.148-.894c-.071-.424-.384-.764-.781-.93-.398-.164-.854-.142-1.204.108l-.738.527c-.447.32-1.06.269-1.45-.12l-.773-.774a1.125 1.125 0 01-.12-1.45l.527-.737c.25-.35.273-.806.108-1.204-.165-.397-.505-.71-.93-.78l-.894-.15c-.542-.09-.94-.56-.94-1.109v-1.094c0-.55.398-1.02.94-1.11l.894-.149c.424-.07.765-.383.93-.78.165-.398.143-.854-.107-1.204l-.527-.738a1.125 1.125 0 01.12-1.45l.773-.773a1.125 1.125 0 011.45-.12l.737.527c.35.25.807.272 1.204.107.397-.165.71-.505.78-.929l.15-.894z"}),le.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),le.jsx(J6,{})]})]}),P7=({user:e})=>{const t=Rp("https://cloud-colab-backend.onrender.com"),[r,n]=Oe.useState(""),[i,a]=Oe.useState([]),y=E=>{E.preventDefault(),t.emit("sendMessage",{message:r,sender:e.fullname}),n("")};return Oe.useEffect(()=>(t.on("connect",()=>{console.log("connected to socket")}),t.on("receiveMessage",E=>{a(p=>[...p,E])}),()=>{t.off("receiveMessage")}),[]),Oe.useEffect(()=>{},[i]),le.jsxs("div",{className:"flex flex-col h-[250px] sm:w-full w-full  p-2",children:[le.jsx("div",{className:"h-auto sm:h-[45vh] overflow-y-auto",id:"chat-div",children:i.map((E,p)=>le.jsxs("div",{className:"chat chat-start",children:[le.jsx("div",{className:"chat-header",children:E.sender}),le.jsxs("div",{className:"chat-bubble",children:[" ",E.message," "]}),le.jsx("div",{className:"chat-footer opacity-50",children:"Sent"})]},p))}),le.jsx("div",{className:"w-full bottom-0  flex justify-center items-center",children:le.jsx("div",{className:"join mx-auto flex ",children:le.jsxs("form",{onSubmit:y,className:"flex flex-row",children:[le.jsx("input",{className:"input input-sm input-bordered join-item text-black",placeholder:"Leave your message",value:r,onChange:E=>n(E.target.value)}),le.jsxs("button",{className:"btn btn-sm btn-primary join-item rounded-r-full",children:[" ",le.jsx(K6,{style:{fontSize:20}})," "]})]})})})]})},T7=()=>{const[e,t]=Oe.useState([]);return Oe.useEffect(()=>{setTimeout(async function(r){const n=localStorage.getItem("authToken"),i=localStorage.getItem("meetingId");let y=await(await fetch("/getFiles",{method:"POST",headers:{"Content-Type":"application/json",Authorization:n},body:JSON.stringify({session:i})})).json();t(y.files)},5e3)}),le.jsxs("div",{className:"w-full sm:h-auto p-2",children:[le.jsx("h2",{className:"font-sm font-bold",children:"List of shared files"}),le.jsx("ul",{className:"flex flex-col gap-2 px-5",children:e.length>0?e.map(r=>le.jsx("li",{children:le.jsxs("div",{className:"w-full text-neutral px-2 py-1 bg-accent flex flex-row justify-between  rounded-lg",children:[le.jsx("div",{className:"flex flex-col",children:le.jsx("div",{children:le.jsxs("div",{children:[le.jsxs("span",{className:"font-bold text-xs",children:[r.filename," "]}),le.jsx(Yg,{to:"/"+r.filepath,children:" open "})]})})}),le.jsx("span",{children:le.jsx(W6,{})})]})})):le.jsxs("div",{className:"flex justify-center items-center h-full",children:[" ","No File Found"," "]})})]})},x7=({user:e})=>le.jsx("div",{className:"w-full flex items-center justify-center h-screen overflow-hidden  rounded-lg shadow-md dark:bg-gray-800",children:le.jsx(e3,{user:e})}),O7=sC([{path:"/",element:le.jsx(ux,{})},{path:"/signup",element:le.jsx(cx,{})},{path:"/dashboard",element:le.jsx(E7,{})}]);m1(document.getElementById("root")).render(le.jsx(Oe.StrictMode,{children:le.jsx(fC,{router:O7})}));export{hs as _,ah as g,w4 as p,Oe as r,Mh as u};
