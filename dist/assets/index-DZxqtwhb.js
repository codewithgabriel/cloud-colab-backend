function n_(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const y of a.addedNodes)y.tagName==="LINK"&&y.rel==="modulepreload"&&n(y)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var Jh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function dS(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var i_={exports:{}},ch={},s_={exports:{}},Wr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ju=Symbol.for("react.element"),pS=Symbol.for("react.portal"),hS=Symbol.for("react.fragment"),fS=Symbol.for("react.strict_mode"),mS=Symbol.for("react.profiler"),gS=Symbol.for("react.provider"),vS=Symbol.for("react.context"),yS=Symbol.for("react.forward_ref"),_S=Symbol.for("react.suspense"),wS=Symbol.for("react.memo"),bS=Symbol.for("react.lazy"),zv=Symbol.iterator;function SS(e){return e===null||typeof e!="object"?null:(e=zv&&e[zv]||e["@@iterator"],typeof e=="function"?e:null)}var a_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o_=Object.assign,c_={};function yl(e,t,r){this.props=e,this.context=t,this.refs=c_,this.updater=r||a_}yl.prototype.isReactComponent={};yl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};yl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function l_(){}l_.prototype=yl.prototype;function Xm(e,t,r){this.props=e,this.context=t,this.refs=c_,this.updater=r||a_}var Zm=Xm.prototype=new l_;Zm.constructor=Xm;o_(Zm,yl.prototype);Zm.isPureReactComponent=!0;var Hv=Array.isArray,u_=Object.prototype.hasOwnProperty,eg={current:null},d_={key:!0,ref:!0,__self:!0,__source:!0};function p_(e,t,r){var n,i={},a=null,y=null;if(t!=null)for(n in t.ref!==void 0&&(y=t.ref),t.key!==void 0&&(a=""+t.key),t)u_.call(t,n)&&!d_.hasOwnProperty(n)&&(i[n]=t[n]);var C=arguments.length-2;if(C===1)i.children=r;else if(1<C){for(var p=Array(C),o=0;o<C;o++)p[o]=arguments[o+2];i.children=p}if(e&&e.defaultProps)for(n in C=e.defaultProps,C)i[n]===void 0&&(i[n]=C[n]);return{$$typeof:Ju,type:e,key:a,ref:y,props:i,_owner:eg.current}}function RS(e,t){return{$$typeof:Ju,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function tg(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ju}function ES(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Wv=/\/+/g;function Qh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ES(""+e.key):t.toString(36)}function sp(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var y=!1;if(e===null)y=!0;else switch(a){case"string":case"number":y=!0;break;case"object":switch(e.$$typeof){case Ju:case pS:y=!0}}if(y)return y=e,i=i(y),e=n===""?"."+Qh(y,0):n,Hv(i)?(r="",e!=null&&(r=e.replace(Wv,"$&/")+"/"),sp(i,t,r,"",function(o){return o})):i!=null&&(tg(i)&&(i=RS(i,r+(!i.key||y&&y.key===i.key?"":(""+i.key).replace(Wv,"$&/")+"/")+e)),t.push(i)),1;if(y=0,n=n===""?".":n+":",Hv(e))for(var C=0;C<e.length;C++){a=e[C];var p=n+Qh(a,C);y+=sp(a,t,r,p,i)}else if(p=SS(e),typeof p=="function")for(e=p.call(e),C=0;!(a=e.next()).done;)a=a.value,p=n+Qh(a,C++),y+=sp(a,t,r,p,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return y}function Bd(e,t,r){if(e==null)return e;var n=[],i=0;return sp(e,n,"","",function(a){return t.call(r,a,i++)}),n}function kS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var os={current:null},ap={transition:null},CS={ReactCurrentDispatcher:os,ReactCurrentBatchConfig:ap,ReactCurrentOwner:eg};function h_(){throw Error("act(...) is not supported in production builds of React.")}Wr.Children={map:Bd,forEach:function(e,t,r){Bd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Bd(e,function(){t++}),t},toArray:function(e){return Bd(e,function(t){return t})||[]},only:function(e){if(!tg(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Wr.Component=yl;Wr.Fragment=hS;Wr.Profiler=mS;Wr.PureComponent=Xm;Wr.StrictMode=fS;Wr.Suspense=_S;Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CS;Wr.act=h_;Wr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=o_({},e.props),i=e.key,a=e.ref,y=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,y=eg.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var C=e.type.defaultProps;for(p in t)u_.call(t,p)&&!d_.hasOwnProperty(p)&&(n[p]=t[p]===void 0&&C!==void 0?C[p]:t[p])}var p=arguments.length-2;if(p===1)n.children=r;else if(1<p){C=Array(p);for(var o=0;o<p;o++)C[o]=arguments[o+2];n.children=C}return{$$typeof:Ju,type:e.type,key:i,ref:a,props:n,_owner:y}};Wr.createContext=function(e){return e={$$typeof:vS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gS,_context:e},e.Consumer=e};Wr.createElement=p_;Wr.createFactory=function(e){var t=p_.bind(null,e);return t.type=e,t};Wr.createRef=function(){return{current:null}};Wr.forwardRef=function(e){return{$$typeof:yS,render:e}};Wr.isValidElement=tg;Wr.lazy=function(e){return{$$typeof:bS,_payload:{_status:-1,_result:e},_init:kS}};Wr.memo=function(e,t){return{$$typeof:wS,type:e,compare:t===void 0?null:t}};Wr.startTransition=function(e){var t=ap.transition;ap.transition={};try{e()}finally{ap.transition=t}};Wr.unstable_act=h_;Wr.useCallback=function(e,t){return os.current.useCallback(e,t)};Wr.useContext=function(e){return os.current.useContext(e)};Wr.useDebugValue=function(){};Wr.useDeferredValue=function(e){return os.current.useDeferredValue(e)};Wr.useEffect=function(e,t){return os.current.useEffect(e,t)};Wr.useId=function(){return os.current.useId()};Wr.useImperativeHandle=function(e,t,r){return os.current.useImperativeHandle(e,t,r)};Wr.useInsertionEffect=function(e,t){return os.current.useInsertionEffect(e,t)};Wr.useLayoutEffect=function(e,t){return os.current.useLayoutEffect(e,t)};Wr.useMemo=function(e,t){return os.current.useMemo(e,t)};Wr.useReducer=function(e,t,r){return os.current.useReducer(e,t,r)};Wr.useRef=function(e){return os.current.useRef(e)};Wr.useState=function(e){return os.current.useState(e)};Wr.useSyncExternalStore=function(e,t,r){return os.current.useSyncExternalStore(e,t,r)};Wr.useTransition=function(){return os.current.useTransition()};Wr.version="18.3.1";s_.exports=Wr;var xe=s_.exports;const f_=oh(xe),PS=n_({__proto__:null,default:f_},[xe]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TS=xe,xS=Symbol.for("react.element"),OS=Symbol.for("react.fragment"),DS=Object.prototype.hasOwnProperty,IS=TS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,MS={key:!0,ref:!0,__self:!0,__source:!0};function m_(e,t,r){var n,i={},a=null,y=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(y=t.ref);for(n in t)DS.call(t,n)&&!MS.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:xS,type:e,key:a,ref:y,props:i,_owner:IS.current}}ch.Fragment=OS;ch.jsx=m_;ch.jsxs=m_;i_.exports=ch;var me=i_.exports,g_={exports:{}},js={},v_={exports:{}},y_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(L,j){var W=L.length;L.push(j);e:for(;0<W;){var $=W-1>>>1,Z=L[$];if(0<i(Z,j))L[$]=j,L[W]=Z,W=$;else break e}}function r(L){return L.length===0?null:L[0]}function n(L){if(L.length===0)return null;var j=L[0],W=L.pop();if(W!==j){L[0]=W;e:for(var $=0,Z=L.length,ne=Z>>>1;$<ne;){var de=2*($+1)-1,ge=L[de],_e=de+1,Me=L[_e];if(0>i(ge,W))_e<Z&&0>i(Me,ge)?(L[$]=Me,L[_e]=W,$=_e):(L[$]=ge,L[de]=W,$=de);else if(_e<Z&&0>i(Me,W))L[$]=Me,L[_e]=W,$=_e;else break e}}return j}function i(L,j){var W=L.sortIndex-j.sortIndex;return W!==0?W:L.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var y=Date,C=y.now();e.unstable_now=function(){return y.now()-C}}var p=[],o=[],E=1,_=null,h=3,w=!1,k=!1,f=!1,g=typeof setTimeout=="function"?setTimeout:null,s=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(L){for(var j=r(o);j!==null;){if(j.callback===null)n(o);else if(j.startTime<=L)n(o),j.sortIndex=j.expirationTime,t(p,j);else break;j=r(o)}}function T(L){if(f=!1,S(L),!k)if(r(p)!==null)k=!0,D(x);else{var j=r(o);j!==null&&N(T,j.startTime-L)}}function x(L,j){k=!1,f&&(f=!1,s(R),R=-1),w=!0;var W=h;try{for(S(j),_=r(p);_!==null&&(!(_.expirationTime>j)||L&&!v());){var $=_.callback;if(typeof $=="function"){_.callback=null,h=_.priorityLevel;var Z=$(_.expirationTime<=j);j=e.unstable_now(),typeof Z=="function"?_.callback=Z:_===r(p)&&n(p),S(j)}else n(p);_=r(p)}if(_!==null)var ne=!0;else{var de=r(o);de!==null&&N(T,de.startTime-j),ne=!1}return ne}finally{_=null,h=W,w=!1}}var O=!1,P=null,R=-1,I=5,d=-1;function v(){return!(e.unstable_now()-d<I)}function c(){if(P!==null){var L=e.unstable_now();d=L;var j=!0;try{j=P(!0,L)}finally{j?u():(O=!1,P=null)}}else O=!1}var u;if(typeof b=="function")u=function(){b(c)};else if(typeof MessageChannel<"u"){var l=new MessageChannel,m=l.port2;l.port1.onmessage=c,u=function(){m.postMessage(null)}}else u=function(){g(c,0)};function D(L){P=L,O||(O=!0,u())}function N(L,j){R=g(function(){L(e.unstable_now())},j)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_continueExecution=function(){k||w||(k=!0,D(x))},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(p)},e.unstable_next=function(L){switch(h){case 1:case 2:case 3:var j=3;break;default:j=h}var W=h;h=j;try{return L()}finally{h=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(L,j){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var W=h;h=L;try{return j()}finally{h=W}},e.unstable_scheduleCallback=function(L,j,W){var $=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?$+W:$):W=$,L){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=W+Z,L={id:E++,callback:j,priorityLevel:L,startTime:W,expirationTime:Z,sortIndex:-1},W>$?(L.sortIndex=W,t(o,L),r(p)===null&&L===r(o)&&(f?(s(R),R=-1):f=!0,N(T,W-$))):(L.sortIndex=Z,t(p,L),k||w||(k=!0,D(x))),L},e.unstable_shouldYield=v,e.unstable_wrapCallback=function(L){var j=h;return function(){var W=h;h=j;try{return L.apply(this,arguments)}finally{h=W}}}})(y_);v_.exports=y_;var AS=v_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LS=xe,Ls=AS;function ft(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var __=new Set,Pu={};function fc(e,t){ol(e,t),ol(e+"Capture",t)}function ol(e,t){for(Pu[e]=t,e=0;e<t.length;e++)__.add(t[e])}var Ua=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ff=Object.prototype.hasOwnProperty,NS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vv={},$v={};function jS(e){return Ff.call($v,e)?!0:Ff.call(Vv,e)?!1:NS.test(e)?$v[e]=!0:(Vv[e]=!0,!1)}function BS(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function FS(e,t,r,n){if(t===null||typeof t>"u"||BS(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function cs(e,t,r,n,i,a,y){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=y}var Hi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Hi[e]=new cs(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Hi[t]=new cs(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Hi[e]=new cs(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Hi[e]=new cs(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Hi[e]=new cs(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Hi[e]=new cs(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Hi[e]=new cs(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Hi[e]=new cs(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Hi[e]=new cs(e,5,!1,e.toLowerCase(),null,!1,!1)});var rg=/[\-:]([a-z])/g;function ng(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(rg,ng);Hi[t]=new cs(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(rg,ng);Hi[t]=new cs(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(rg,ng);Hi[t]=new cs(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Hi[e]=new cs(e,1,!1,e.toLowerCase(),null,!1,!1)});Hi.xlinkHref=new cs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Hi[e]=new cs(e,1,!1,e.toLowerCase(),null,!0,!0)});function ig(e,t,r,n){var i=Hi.hasOwnProperty(t)?Hi[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(FS(t,r,i,n)&&(r=null),n||i===null?jS(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Va=LS.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fd=Symbol.for("react.element"),Bc=Symbol.for("react.portal"),Fc=Symbol.for("react.fragment"),sg=Symbol.for("react.strict_mode"),Uf=Symbol.for("react.profiler"),w_=Symbol.for("react.provider"),b_=Symbol.for("react.context"),ag=Symbol.for("react.forward_ref"),zf=Symbol.for("react.suspense"),Hf=Symbol.for("react.suspense_list"),og=Symbol.for("react.memo"),po=Symbol.for("react.lazy"),S_=Symbol.for("react.offscreen"),qv=Symbol.iterator;function Ql(e){return e===null||typeof e!="object"?null:(e=qv&&e[qv]||e["@@iterator"],typeof e=="function"?e:null)}var Ln=Object.assign,Yh;function du(e){if(Yh===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Yh=t&&t[1]||""}return`
`+Yh+e}var Xh=!1;function Zh(e,t){if(!e||Xh)return"";Xh=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(o){var n=o}Reflect.construct(e,[],t)}else{try{t.call()}catch(o){n=o}e.call(t.prototype)}else{try{throw Error()}catch(o){n=o}e()}}catch(o){if(o&&n&&typeof o.stack=="string"){for(var i=o.stack.split(`
`),a=n.stack.split(`
`),y=i.length-1,C=a.length-1;1<=y&&0<=C&&i[y]!==a[C];)C--;for(;1<=y&&0<=C;y--,C--)if(i[y]!==a[C]){if(y!==1||C!==1)do if(y--,C--,0>C||i[y]!==a[C]){var p=`
`+i[y].replace(" at new "," at ");return e.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",e.displayName)),p}while(1<=y&&0<=C);break}}}finally{Xh=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?du(e):""}function US(e){switch(e.tag){case 5:return du(e.type);case 16:return du("Lazy");case 13:return du("Suspense");case 19:return du("SuspenseList");case 0:case 2:case 15:return e=Zh(e.type,!1),e;case 11:return e=Zh(e.type.render,!1),e;case 1:return e=Zh(e.type,!0),e;default:return""}}function Wf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Fc:return"Fragment";case Bc:return"Portal";case Uf:return"Profiler";case sg:return"StrictMode";case zf:return"Suspense";case Hf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case b_:return(e.displayName||"Context")+".Consumer";case w_:return(e._context.displayName||"Context")+".Provider";case ag:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case og:return t=e.displayName||null,t!==null?t:Wf(e.type)||"Memo";case po:t=e._payload,e=e._init;try{return Wf(e(t))}catch{}}return null}function zS(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Wf(t);case 8:return t===sg?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Oo(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function R_(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function HS(e){var t=R_(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(y){n=""+y,a.call(this,y)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(y){n=""+y},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ud(e){e._valueTracker||(e._valueTracker=HS(e))}function E_(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=R_(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Pp(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Vf(e,t){var r=t.checked;return Ln({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Kv(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=Oo(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function k_(e,t){t=t.checked,t!=null&&ig(e,"checked",t,!1)}function $f(e,t){k_(e,t);var r=Oo(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?qf(e,t.type,r):t.hasOwnProperty("defaultValue")&&qf(e,t.type,Oo(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Gv(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function qf(e,t,r){(t!=="number"||Pp(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var pu=Array.isArray;function Yc(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+Oo(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Kf(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ft(91));return Ln({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Jv(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(ft(92));if(pu(r)){if(1<r.length)throw Error(ft(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Oo(r)}}function C_(e,t){var r=Oo(t.value),n=Oo(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Qv(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function P_(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gf(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?P_(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var zd,T_=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(zd=zd||document.createElement("div"),zd.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=zd.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Tu(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var yu={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},WS=["Webkit","ms","Moz","O"];Object.keys(yu).forEach(function(e){WS.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),yu[t]=yu[e]})});function x_(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||yu.hasOwnProperty(e)&&yu[e]?(""+t).trim():t+"px"}function O_(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=x_(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var VS=Ln({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Jf(e,t){if(t){if(VS[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ft(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ft(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ft(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ft(62))}}function Qf(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yf=null;function cg(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xf=null,Xc=null,Zc=null;function Yv(e){if(e=Xu(e)){if(typeof Xf!="function")throw Error(ft(280));var t=e.stateNode;t&&(t=hh(t),Xf(e.stateNode,e.type,t))}}function D_(e){Xc?Zc?Zc.push(e):Zc=[e]:Xc=e}function I_(){if(Xc){var e=Xc,t=Zc;if(Zc=Xc=null,Yv(e),t)for(e=0;e<t.length;e++)Yv(t[e])}}function M_(e,t){return e(t)}function A_(){}var ef=!1;function L_(e,t,r){if(ef)return e(t,r);ef=!0;try{return M_(e,t,r)}finally{ef=!1,(Xc!==null||Zc!==null)&&(A_(),I_())}}function xu(e,t){var r=e.stateNode;if(r===null)return null;var n=hh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(ft(231,t,typeof r));return r}var Zf=!1;if(Ua)try{var Yl={};Object.defineProperty(Yl,"passive",{get:function(){Zf=!0}}),window.addEventListener("test",Yl,Yl),window.removeEventListener("test",Yl,Yl)}catch{Zf=!1}function $S(e,t,r,n,i,a,y,C,p){var o=Array.prototype.slice.call(arguments,3);try{t.apply(r,o)}catch(E){this.onError(E)}}var _u=!1,Tp=null,xp=!1,em=null,qS={onError:function(e){_u=!0,Tp=e}};function KS(e,t,r,n,i,a,y,C,p){_u=!1,Tp=null,$S.apply(qS,arguments)}function GS(e,t,r,n,i,a,y,C,p){if(KS.apply(this,arguments),_u){if(_u){var o=Tp;_u=!1,Tp=null}else throw Error(ft(198));xp||(xp=!0,em=o)}}function mc(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function N_(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Xv(e){if(mc(e)!==e)throw Error(ft(188))}function JS(e){var t=e.alternate;if(!t){if(t=mc(e),t===null)throw Error(ft(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return Xv(i),e;if(a===n)return Xv(i),t;a=a.sibling}throw Error(ft(188))}if(r.return!==n.return)r=i,n=a;else{for(var y=!1,C=i.child;C;){if(C===r){y=!0,r=i,n=a;break}if(C===n){y=!0,n=i,r=a;break}C=C.sibling}if(!y){for(C=a.child;C;){if(C===r){y=!0,r=a,n=i;break}if(C===n){y=!0,n=a,r=i;break}C=C.sibling}if(!y)throw Error(ft(189))}}if(r.alternate!==n)throw Error(ft(190))}if(r.tag!==3)throw Error(ft(188));return r.stateNode.current===r?e:t}function j_(e){return e=JS(e),e!==null?B_(e):null}function B_(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=B_(e);if(t!==null)return t;e=e.sibling}return null}var F_=Ls.unstable_scheduleCallback,Zv=Ls.unstable_cancelCallback,QS=Ls.unstable_shouldYield,YS=Ls.unstable_requestPaint,Jn=Ls.unstable_now,XS=Ls.unstable_getCurrentPriorityLevel,lg=Ls.unstable_ImmediatePriority,U_=Ls.unstable_UserBlockingPriority,Op=Ls.unstable_NormalPriority,ZS=Ls.unstable_LowPriority,z_=Ls.unstable_IdlePriority,lh=null,wa=null;function eR(e){if(wa&&typeof wa.onCommitFiberRoot=="function")try{wa.onCommitFiberRoot(lh,e,void 0,(e.current.flags&128)===128)}catch{}}var la=Math.clz32?Math.clz32:nR,tR=Math.log,rR=Math.LN2;function nR(e){return e>>>=0,e===0?32:31-(tR(e)/rR|0)|0}var Hd=64,Wd=4194304;function hu(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Dp(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,y=r&268435455;if(y!==0){var C=y&~i;C!==0?n=hu(C):(a&=y,a!==0&&(n=hu(a)))}else y=r&~i,y!==0?n=hu(y):a!==0&&(n=hu(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-la(t),i=1<<r,n|=e[r],t&=~i;return n}function iR(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sR(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var y=31-la(a),C=1<<y,p=i[y];p===-1?(!(C&r)||C&n)&&(i[y]=iR(C,t)):p<=t&&(e.expiredLanes|=C),a&=~C}}function tm(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function H_(){var e=Hd;return Hd<<=1,!(Hd&4194240)&&(Hd=64),e}function tf(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Qu(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-la(t),e[t]=r}function aR(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-la(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function ug(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-la(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var cn=0;function W_(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var V_,dg,$_,q_,K_,rm=!1,Vd=[],bo=null,So=null,Ro=null,Ou=new Map,Du=new Map,fo=[],oR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function e0(e,t){switch(e){case"focusin":case"focusout":bo=null;break;case"dragenter":case"dragleave":So=null;break;case"mouseover":case"mouseout":Ro=null;break;case"pointerover":case"pointerout":Ou.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Du.delete(t.pointerId)}}function Xl(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Xu(t),t!==null&&dg(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function cR(e,t,r,n,i){switch(t){case"focusin":return bo=Xl(bo,e,t,r,n,i),!0;case"dragenter":return So=Xl(So,e,t,r,n,i),!0;case"mouseover":return Ro=Xl(Ro,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return Ou.set(a,Xl(Ou.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,Du.set(a,Xl(Du.get(a)||null,e,t,r,n,i)),!0}return!1}function G_(e){var t=Qo(e.target);if(t!==null){var r=mc(t);if(r!==null){if(t=r.tag,t===13){if(t=N_(r),t!==null){e.blockedOn=t,K_(e.priority,function(){$_(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function op(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=nm(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Yf=n,r.target.dispatchEvent(n),Yf=null}else return t=Xu(r),t!==null&&dg(t),e.blockedOn=r,!1;t.shift()}return!0}function t0(e,t,r){op(e)&&r.delete(t)}function lR(){rm=!1,bo!==null&&op(bo)&&(bo=null),So!==null&&op(So)&&(So=null),Ro!==null&&op(Ro)&&(Ro=null),Ou.forEach(t0),Du.forEach(t0)}function Zl(e,t){e.blockedOn===t&&(e.blockedOn=null,rm||(rm=!0,Ls.unstable_scheduleCallback(Ls.unstable_NormalPriority,lR)))}function Iu(e){function t(i){return Zl(i,e)}if(0<Vd.length){Zl(Vd[0],e);for(var r=1;r<Vd.length;r++){var n=Vd[r];n.blockedOn===e&&(n.blockedOn=null)}}for(bo!==null&&Zl(bo,e),So!==null&&Zl(So,e),Ro!==null&&Zl(Ro,e),Ou.forEach(t),Du.forEach(t),r=0;r<fo.length;r++)n=fo[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<fo.length&&(r=fo[0],r.blockedOn===null);)G_(r),r.blockedOn===null&&fo.shift()}var el=Va.ReactCurrentBatchConfig,Ip=!0;function uR(e,t,r,n){var i=cn,a=el.transition;el.transition=null;try{cn=1,pg(e,t,r,n)}finally{cn=i,el.transition=a}}function dR(e,t,r,n){var i=cn,a=el.transition;el.transition=null;try{cn=4,pg(e,t,r,n)}finally{cn=i,el.transition=a}}function pg(e,t,r,n){if(Ip){var i=nm(e,t,r,n);if(i===null)pf(e,t,n,Mp,r),e0(e,n);else if(cR(i,e,t,r,n))n.stopPropagation();else if(e0(e,n),t&4&&-1<oR.indexOf(e)){for(;i!==null;){var a=Xu(i);if(a!==null&&V_(a),a=nm(e,t,r,n),a===null&&pf(e,t,n,Mp,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else pf(e,t,n,null,r)}}var Mp=null;function nm(e,t,r,n){if(Mp=null,e=cg(n),e=Qo(e),e!==null)if(t=mc(e),t===null)e=null;else if(r=t.tag,r===13){if(e=N_(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Mp=e,null}function J_(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(XS()){case lg:return 1;case U_:return 4;case Op:case ZS:return 16;case z_:return 536870912;default:return 16}default:return 16}}var go=null,hg=null,cp=null;function Q_(){if(cp)return cp;var e,t=hg,r=t.length,n,i="value"in go?go.value:go.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var y=r-e;for(n=1;n<=y&&t[r-n]===i[a-n];n++);return cp=i.slice(e,1<n?1-n:void 0)}function lp(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function $d(){return!0}function r0(){return!1}function Bs(e){function t(r,n,i,a,y){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=y,this.currentTarget=null;for(var C in e)e.hasOwnProperty(C)&&(r=e[C],this[C]=r?r(a):a[C]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?$d:r0,this.isPropagationStopped=r0,this}return Ln(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=$d)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=$d)},persist:function(){},isPersistent:$d}),t}var _l={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fg=Bs(_l),Yu=Ln({},_l,{view:0,detail:0}),pR=Bs(Yu),rf,nf,eu,uh=Ln({},Yu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mg,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==eu&&(eu&&e.type==="mousemove"?(rf=e.screenX-eu.screenX,nf=e.screenY-eu.screenY):nf=rf=0,eu=e),rf)},movementY:function(e){return"movementY"in e?e.movementY:nf}}),n0=Bs(uh),hR=Ln({},uh,{dataTransfer:0}),fR=Bs(hR),mR=Ln({},Yu,{relatedTarget:0}),sf=Bs(mR),gR=Ln({},_l,{animationName:0,elapsedTime:0,pseudoElement:0}),vR=Bs(gR),yR=Ln({},_l,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_R=Bs(yR),wR=Ln({},_l,{data:0}),i0=Bs(wR),bR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},RR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ER(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=RR[e])?!!t[e]:!1}function mg(){return ER}var kR=Ln({},Yu,{key:function(e){if(e.key){var t=bR[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=lp(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?SR[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mg,charCode:function(e){return e.type==="keypress"?lp(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?lp(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),CR=Bs(kR),PR=Ln({},uh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),s0=Bs(PR),TR=Ln({},Yu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mg}),xR=Bs(TR),OR=Ln({},_l,{propertyName:0,elapsedTime:0,pseudoElement:0}),DR=Bs(OR),IR=Ln({},uh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),MR=Bs(IR),AR=[9,13,27,32],gg=Ua&&"CompositionEvent"in window,wu=null;Ua&&"documentMode"in document&&(wu=document.documentMode);var LR=Ua&&"TextEvent"in window&&!wu,Y_=Ua&&(!gg||wu&&8<wu&&11>=wu),a0=" ",o0=!1;function X_(e,t){switch(e){case"keyup":return AR.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Z_(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Uc=!1;function NR(e,t){switch(e){case"compositionend":return Z_(t);case"keypress":return t.which!==32?null:(o0=!0,a0);case"textInput":return e=t.data,e===a0&&o0?null:e;default:return null}}function jR(e,t){if(Uc)return e==="compositionend"||!gg&&X_(e,t)?(e=Q_(),cp=hg=go=null,Uc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Y_&&t.locale!=="ko"?null:t.data;default:return null}}var BR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c0(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!BR[e.type]:t==="textarea"}function ew(e,t,r,n){D_(n),t=Ap(t,"onChange"),0<t.length&&(r=new fg("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var bu=null,Mu=null;function FR(e){dw(e,0)}function dh(e){var t=Wc(e);if(E_(t))return e}function UR(e,t){if(e==="change")return t}var tw=!1;if(Ua){var af;if(Ua){var of="oninput"in document;if(!of){var l0=document.createElement("div");l0.setAttribute("oninput","return;"),of=typeof l0.oninput=="function"}af=of}else af=!1;tw=af&&(!document.documentMode||9<document.documentMode)}function u0(){bu&&(bu.detachEvent("onpropertychange",rw),Mu=bu=null)}function rw(e){if(e.propertyName==="value"&&dh(Mu)){var t=[];ew(t,Mu,e,cg(e)),L_(FR,t)}}function zR(e,t,r){e==="focusin"?(u0(),bu=t,Mu=r,bu.attachEvent("onpropertychange",rw)):e==="focusout"&&u0()}function HR(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return dh(Mu)}function WR(e,t){if(e==="click")return dh(t)}function VR(e,t){if(e==="input"||e==="change")return dh(t)}function $R(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var da=typeof Object.is=="function"?Object.is:$R;function Au(e,t){if(da(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Ff.call(t,i)||!da(e[i],t[i]))return!1}return!0}function d0(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function p0(e,t){var r=d0(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=d0(r)}}function nw(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nw(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function iw(){for(var e=window,t=Pp();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Pp(e.document)}return t}function vg(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qR(e){var t=iw(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&nw(r.ownerDocument.documentElement,r)){if(n!==null&&vg(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=p0(r,a);var y=p0(r,n);i&&y&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==y.node||e.focusOffset!==y.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(y.node,y.offset)):(t.setEnd(y.node,y.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var KR=Ua&&"documentMode"in document&&11>=document.documentMode,zc=null,im=null,Su=null,sm=!1;function h0(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;sm||zc==null||zc!==Pp(n)||(n=zc,"selectionStart"in n&&vg(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Su&&Au(Su,n)||(Su=n,n=Ap(im,"onSelect"),0<n.length&&(t=new fg("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=zc)))}function qd(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Hc={animationend:qd("Animation","AnimationEnd"),animationiteration:qd("Animation","AnimationIteration"),animationstart:qd("Animation","AnimationStart"),transitionend:qd("Transition","TransitionEnd")},cf={},sw={};Ua&&(sw=document.createElement("div").style,"AnimationEvent"in window||(delete Hc.animationend.animation,delete Hc.animationiteration.animation,delete Hc.animationstart.animation),"TransitionEvent"in window||delete Hc.transitionend.transition);function ph(e){if(cf[e])return cf[e];if(!Hc[e])return e;var t=Hc[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in sw)return cf[e]=t[r];return e}var aw=ph("animationend"),ow=ph("animationiteration"),cw=ph("animationstart"),lw=ph("transitionend"),uw=new Map,f0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Io(e,t){uw.set(e,t),fc(t,[e])}for(var lf=0;lf<f0.length;lf++){var uf=f0[lf],GR=uf.toLowerCase(),JR=uf[0].toUpperCase()+uf.slice(1);Io(GR,"on"+JR)}Io(aw,"onAnimationEnd");Io(ow,"onAnimationIteration");Io(cw,"onAnimationStart");Io("dblclick","onDoubleClick");Io("focusin","onFocus");Io("focusout","onBlur");Io(lw,"onTransitionEnd");ol("onMouseEnter",["mouseout","mouseover"]);ol("onMouseLeave",["mouseout","mouseover"]);ol("onPointerEnter",["pointerout","pointerover"]);ol("onPointerLeave",["pointerout","pointerover"]);fc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fc("onBeforeInput",["compositionend","keypress","textInput","paste"]);fc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QR=new Set("cancel close invalid load scroll toggle".split(" ").concat(fu));function m0(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,GS(n,t,void 0,e),e.currentTarget=null}function dw(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var y=n.length-1;0<=y;y--){var C=n[y],p=C.instance,o=C.currentTarget;if(C=C.listener,p!==a&&i.isPropagationStopped())break e;m0(i,C,o),a=p}else for(y=0;y<n.length;y++){if(C=n[y],p=C.instance,o=C.currentTarget,C=C.listener,p!==a&&i.isPropagationStopped())break e;m0(i,C,o),a=p}}}if(xp)throw e=em,xp=!1,em=null,e}function Rn(e,t){var r=t[um];r===void 0&&(r=t[um]=new Set);var n=e+"__bubble";r.has(n)||(pw(t,e,2,!1),r.add(n))}function df(e,t,r){var n=0;t&&(n|=4),pw(r,e,n,t)}var Kd="_reactListening"+Math.random().toString(36).slice(2);function Lu(e){if(!e[Kd]){e[Kd]=!0,__.forEach(function(r){r!=="selectionchange"&&(QR.has(r)||df(r,!1,e),df(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Kd]||(t[Kd]=!0,df("selectionchange",!1,t))}}function pw(e,t,r,n){switch(J_(t)){case 1:var i=uR;break;case 4:i=dR;break;default:i=pg}r=i.bind(null,t,r,e),i=void 0,!Zf||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function pf(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var y=n.tag;if(y===3||y===4){var C=n.stateNode.containerInfo;if(C===i||C.nodeType===8&&C.parentNode===i)break;if(y===4)for(y=n.return;y!==null;){var p=y.tag;if((p===3||p===4)&&(p=y.stateNode.containerInfo,p===i||p.nodeType===8&&p.parentNode===i))return;y=y.return}for(;C!==null;){if(y=Qo(C),y===null)return;if(p=y.tag,p===5||p===6){n=a=y;continue e}C=C.parentNode}}n=n.return}L_(function(){var o=a,E=cg(r),_=[];e:{var h=uw.get(e);if(h!==void 0){var w=fg,k=e;switch(e){case"keypress":if(lp(r)===0)break e;case"keydown":case"keyup":w=CR;break;case"focusin":k="focus",w=sf;break;case"focusout":k="blur",w=sf;break;case"beforeblur":case"afterblur":w=sf;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=n0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=fR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=xR;break;case aw:case ow:case cw:w=vR;break;case lw:w=DR;break;case"scroll":w=pR;break;case"wheel":w=MR;break;case"copy":case"cut":case"paste":w=_R;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=s0}var f=(t&4)!==0,g=!f&&e==="scroll",s=f?h!==null?h+"Capture":null:h;f=[];for(var b=o,S;b!==null;){S=b;var T=S.stateNode;if(S.tag===5&&T!==null&&(S=T,s!==null&&(T=xu(b,s),T!=null&&f.push(Nu(b,T,S)))),g)break;b=b.return}0<f.length&&(h=new w(h,k,null,r,E),_.push({event:h,listeners:f}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",w=e==="mouseout"||e==="pointerout",h&&r!==Yf&&(k=r.relatedTarget||r.fromElement)&&(Qo(k)||k[za]))break e;if((w||h)&&(h=E.window===E?E:(h=E.ownerDocument)?h.defaultView||h.parentWindow:window,w?(k=r.relatedTarget||r.toElement,w=o,k=k?Qo(k):null,k!==null&&(g=mc(k),k!==g||k.tag!==5&&k.tag!==6)&&(k=null)):(w=null,k=o),w!==k)){if(f=n0,T="onMouseLeave",s="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(f=s0,T="onPointerLeave",s="onPointerEnter",b="pointer"),g=w==null?h:Wc(w),S=k==null?h:Wc(k),h=new f(T,b+"leave",w,r,E),h.target=g,h.relatedTarget=S,T=null,Qo(E)===o&&(f=new f(s,b+"enter",k,r,E),f.target=S,f.relatedTarget=g,T=f),g=T,w&&k)t:{for(f=w,s=k,b=0,S=f;S;S=Ic(S))b++;for(S=0,T=s;T;T=Ic(T))S++;for(;0<b-S;)f=Ic(f),b--;for(;0<S-b;)s=Ic(s),S--;for(;b--;){if(f===s||s!==null&&f===s.alternate)break t;f=Ic(f),s=Ic(s)}f=null}else f=null;w!==null&&g0(_,h,w,f,!1),k!==null&&g!==null&&g0(_,g,k,f,!0)}}e:{if(h=o?Wc(o):window,w=h.nodeName&&h.nodeName.toLowerCase(),w==="select"||w==="input"&&h.type==="file")var x=UR;else if(c0(h))if(tw)x=VR;else{x=HR;var O=zR}else(w=h.nodeName)&&w.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(x=WR);if(x&&(x=x(e,o))){ew(_,x,r,E);break e}O&&O(e,h,o),e==="focusout"&&(O=h._wrapperState)&&O.controlled&&h.type==="number"&&qf(h,"number",h.value)}switch(O=o?Wc(o):window,e){case"focusin":(c0(O)||O.contentEditable==="true")&&(zc=O,im=o,Su=null);break;case"focusout":Su=im=zc=null;break;case"mousedown":sm=!0;break;case"contextmenu":case"mouseup":case"dragend":sm=!1,h0(_,r,E);break;case"selectionchange":if(KR)break;case"keydown":case"keyup":h0(_,r,E)}var P;if(gg)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else Uc?X_(e,r)&&(R="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(R="onCompositionStart");R&&(Y_&&r.locale!=="ko"&&(Uc||R!=="onCompositionStart"?R==="onCompositionEnd"&&Uc&&(P=Q_()):(go=E,hg="value"in go?go.value:go.textContent,Uc=!0)),O=Ap(o,R),0<O.length&&(R=new i0(R,e,null,r,E),_.push({event:R,listeners:O}),P?R.data=P:(P=Z_(r),P!==null&&(R.data=P)))),(P=LR?NR(e,r):jR(e,r))&&(o=Ap(o,"onBeforeInput"),0<o.length&&(E=new i0("onBeforeInput","beforeinput",null,r,E),_.push({event:E,listeners:o}),E.data=P))}dw(_,t)})}function Nu(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ap(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=xu(e,r),a!=null&&n.unshift(Nu(e,a,i)),a=xu(e,t),a!=null&&n.push(Nu(e,a,i))),e=e.return}return n}function Ic(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function g0(e,t,r,n,i){for(var a=t._reactName,y=[];r!==null&&r!==n;){var C=r,p=C.alternate,o=C.stateNode;if(p!==null&&p===n)break;C.tag===5&&o!==null&&(C=o,i?(p=xu(r,a),p!=null&&y.unshift(Nu(r,p,C))):i||(p=xu(r,a),p!=null&&y.push(Nu(r,p,C)))),r=r.return}y.length!==0&&e.push({event:t,listeners:y})}var YR=/\r\n?/g,XR=/\u0000|\uFFFD/g;function v0(e){return(typeof e=="string"?e:""+e).replace(YR,`
`).replace(XR,"")}function Gd(e,t,r){if(t=v0(t),v0(e)!==t&&r)throw Error(ft(425))}function Lp(){}var am=null,om=null;function cm(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var lm=typeof setTimeout=="function"?setTimeout:void 0,ZR=typeof clearTimeout=="function"?clearTimeout:void 0,y0=typeof Promise=="function"?Promise:void 0,eE=typeof queueMicrotask=="function"?queueMicrotask:typeof y0<"u"?function(e){return y0.resolve(null).then(e).catch(tE)}:lm;function tE(e){setTimeout(function(){throw e})}function hf(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),Iu(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Iu(t)}function Eo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function _0(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var wl=Math.random().toString(36).slice(2),_a="__reactFiber$"+wl,ju="__reactProps$"+wl,za="__reactContainer$"+wl,um="__reactEvents$"+wl,rE="__reactListeners$"+wl,nE="__reactHandles$"+wl;function Qo(e){var t=e[_a];if(t)return t;for(var r=e.parentNode;r;){if(t=r[za]||r[_a]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=_0(e);e!==null;){if(r=e[_a])return r;e=_0(e)}return t}e=r,r=e.parentNode}return null}function Xu(e){return e=e[_a]||e[za],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Wc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ft(33))}function hh(e){return e[ju]||null}var dm=[],Vc=-1;function Mo(e){return{current:e}}function En(e){0>Vc||(e.current=dm[Vc],dm[Vc]=null,Vc--)}function vn(e,t){Vc++,dm[Vc]=e.current,e.current=t}var Do={},Xi=Mo(Do),gs=Mo(!1),sc=Do;function cl(e,t){var r=e.type.contextTypes;if(!r)return Do;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function vs(e){return e=e.childContextTypes,e!=null}function Np(){En(gs),En(Xi)}function w0(e,t,r){if(Xi.current!==Do)throw Error(ft(168));vn(Xi,t),vn(gs,r)}function hw(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(ft(108,zS(e)||"Unknown",i));return Ln({},r,n)}function jp(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Do,sc=Xi.current,vn(Xi,e),vn(gs,gs.current),!0}function b0(e,t,r){var n=e.stateNode;if(!n)throw Error(ft(169));r?(e=hw(e,t,sc),n.__reactInternalMemoizedMergedChildContext=e,En(gs),En(Xi),vn(Xi,e)):En(gs),vn(gs,r)}var Aa=null,fh=!1,ff=!1;function fw(e){Aa===null?Aa=[e]:Aa.push(e)}function iE(e){fh=!0,fw(e)}function Ao(){if(!ff&&Aa!==null){ff=!0;var e=0,t=cn;try{var r=Aa;for(cn=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Aa=null,fh=!1}catch(i){throw Aa!==null&&(Aa=Aa.slice(e+1)),F_(lg,Ao),i}finally{cn=t,ff=!1}}return null}var $c=[],qc=0,Bp=null,Fp=0,$s=[],qs=0,ac=null,La=1,Na="";function Ko(e,t){$c[qc++]=Fp,$c[qc++]=Bp,Bp=e,Fp=t}function mw(e,t,r){$s[qs++]=La,$s[qs++]=Na,$s[qs++]=ac,ac=e;var n=La;e=Na;var i=32-la(n)-1;n&=~(1<<i),r+=1;var a=32-la(t)+i;if(30<a){var y=i-i%5;a=(n&(1<<y)-1).toString(32),n>>=y,i-=y,La=1<<32-la(t)+i|r<<i|n,Na=a+e}else La=1<<a|r<<i|n,Na=e}function yg(e){e.return!==null&&(Ko(e,1),mw(e,1,0))}function _g(e){for(;e===Bp;)Bp=$c[--qc],$c[qc]=null,Fp=$c[--qc],$c[qc]=null;for(;e===ac;)ac=$s[--qs],$s[qs]=null,Na=$s[--qs],$s[qs]=null,La=$s[--qs],$s[qs]=null}var Ms=null,Is=null,xn=!1,ca=null;function gw(e,t){var r=Gs(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function S0(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ms=e,Is=Eo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ms=e,Is=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=ac!==null?{id:La,overflow:Na}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Gs(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ms=e,Is=null,!0):!1;default:return!1}}function pm(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hm(e){if(xn){var t=Is;if(t){var r=t;if(!S0(e,t)){if(pm(e))throw Error(ft(418));t=Eo(r.nextSibling);var n=Ms;t&&S0(e,t)?gw(n,r):(e.flags=e.flags&-4097|2,xn=!1,Ms=e)}}else{if(pm(e))throw Error(ft(418));e.flags=e.flags&-4097|2,xn=!1,Ms=e}}}function R0(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ms=e}function Jd(e){if(e!==Ms)return!1;if(!xn)return R0(e),xn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!cm(e.type,e.memoizedProps)),t&&(t=Is)){if(pm(e))throw vw(),Error(ft(418));for(;t;)gw(e,t),t=Eo(t.nextSibling)}if(R0(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ft(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Is=Eo(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Is=null}}else Is=Ms?Eo(e.stateNode.nextSibling):null;return!0}function vw(){for(var e=Is;e;)e=Eo(e.nextSibling)}function ll(){Is=Ms=null,xn=!1}function wg(e){ca===null?ca=[e]:ca.push(e)}var sE=Va.ReactCurrentBatchConfig;function tu(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(ft(309));var n=r.stateNode}if(!n)throw Error(ft(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(y){var C=i.refs;y===null?delete C[a]:C[a]=y},t._stringRef=a,t)}if(typeof e!="string")throw Error(ft(284));if(!r._owner)throw Error(ft(290,e))}return e}function Qd(e,t){throw e=Object.prototype.toString.call(t),Error(ft(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function E0(e){var t=e._init;return t(e._payload)}function yw(e){function t(s,b){if(e){var S=s.deletions;S===null?(s.deletions=[b],s.flags|=16):S.push(b)}}function r(s,b){if(!e)return null;for(;b!==null;)t(s,b),b=b.sibling;return null}function n(s,b){for(s=new Map;b!==null;)b.key!==null?s.set(b.key,b):s.set(b.index,b),b=b.sibling;return s}function i(s,b){return s=To(s,b),s.index=0,s.sibling=null,s}function a(s,b,S){return s.index=S,e?(S=s.alternate,S!==null?(S=S.index,S<b?(s.flags|=2,b):S):(s.flags|=2,b)):(s.flags|=1048576,b)}function y(s){return e&&s.alternate===null&&(s.flags|=2),s}function C(s,b,S,T){return b===null||b.tag!==6?(b=bf(S,s.mode,T),b.return=s,b):(b=i(b,S),b.return=s,b)}function p(s,b,S,T){var x=S.type;return x===Fc?E(s,b,S.props.children,T,S.key):b!==null&&(b.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===po&&E0(x)===b.type)?(T=i(b,S.props),T.ref=tu(s,b,S),T.return=s,T):(T=gp(S.type,S.key,S.props,null,s.mode,T),T.ref=tu(s,b,S),T.return=s,T)}function o(s,b,S,T){return b===null||b.tag!==4||b.stateNode.containerInfo!==S.containerInfo||b.stateNode.implementation!==S.implementation?(b=Sf(S,s.mode,T),b.return=s,b):(b=i(b,S.children||[]),b.return=s,b)}function E(s,b,S,T,x){return b===null||b.tag!==7?(b=rc(S,s.mode,T,x),b.return=s,b):(b=i(b,S),b.return=s,b)}function _(s,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return b=bf(""+b,s.mode,S),b.return=s,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Fd:return S=gp(b.type,b.key,b.props,null,s.mode,S),S.ref=tu(s,null,b),S.return=s,S;case Bc:return b=Sf(b,s.mode,S),b.return=s,b;case po:var T=b._init;return _(s,T(b._payload),S)}if(pu(b)||Ql(b))return b=rc(b,s.mode,S,null),b.return=s,b;Qd(s,b)}return null}function h(s,b,S,T){var x=b!==null?b.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return x!==null?null:C(s,b,""+S,T);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Fd:return S.key===x?p(s,b,S,T):null;case Bc:return S.key===x?o(s,b,S,T):null;case po:return x=S._init,h(s,b,x(S._payload),T)}if(pu(S)||Ql(S))return x!==null?null:E(s,b,S,T,null);Qd(s,S)}return null}function w(s,b,S,T,x){if(typeof T=="string"&&T!==""||typeof T=="number")return s=s.get(S)||null,C(b,s,""+T,x);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Fd:return s=s.get(T.key===null?S:T.key)||null,p(b,s,T,x);case Bc:return s=s.get(T.key===null?S:T.key)||null,o(b,s,T,x);case po:var O=T._init;return w(s,b,S,O(T._payload),x)}if(pu(T)||Ql(T))return s=s.get(S)||null,E(b,s,T,x,null);Qd(b,T)}return null}function k(s,b,S,T){for(var x=null,O=null,P=b,R=b=0,I=null;P!==null&&R<S.length;R++){P.index>R?(I=P,P=null):I=P.sibling;var d=h(s,P,S[R],T);if(d===null){P===null&&(P=I);break}e&&P&&d.alternate===null&&t(s,P),b=a(d,b,R),O===null?x=d:O.sibling=d,O=d,P=I}if(R===S.length)return r(s,P),xn&&Ko(s,R),x;if(P===null){for(;R<S.length;R++)P=_(s,S[R],T),P!==null&&(b=a(P,b,R),O===null?x=P:O.sibling=P,O=P);return xn&&Ko(s,R),x}for(P=n(s,P);R<S.length;R++)I=w(P,s,R,S[R],T),I!==null&&(e&&I.alternate!==null&&P.delete(I.key===null?R:I.key),b=a(I,b,R),O===null?x=I:O.sibling=I,O=I);return e&&P.forEach(function(v){return t(s,v)}),xn&&Ko(s,R),x}function f(s,b,S,T){var x=Ql(S);if(typeof x!="function")throw Error(ft(150));if(S=x.call(S),S==null)throw Error(ft(151));for(var O=x=null,P=b,R=b=0,I=null,d=S.next();P!==null&&!d.done;R++,d=S.next()){P.index>R?(I=P,P=null):I=P.sibling;var v=h(s,P,d.value,T);if(v===null){P===null&&(P=I);break}e&&P&&v.alternate===null&&t(s,P),b=a(v,b,R),O===null?x=v:O.sibling=v,O=v,P=I}if(d.done)return r(s,P),xn&&Ko(s,R),x;if(P===null){for(;!d.done;R++,d=S.next())d=_(s,d.value,T),d!==null&&(b=a(d,b,R),O===null?x=d:O.sibling=d,O=d);return xn&&Ko(s,R),x}for(P=n(s,P);!d.done;R++,d=S.next())d=w(P,s,R,d.value,T),d!==null&&(e&&d.alternate!==null&&P.delete(d.key===null?R:d.key),b=a(d,b,R),O===null?x=d:O.sibling=d,O=d);return e&&P.forEach(function(c){return t(s,c)}),xn&&Ko(s,R),x}function g(s,b,S,T){if(typeof S=="object"&&S!==null&&S.type===Fc&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Fd:e:{for(var x=S.key,O=b;O!==null;){if(O.key===x){if(x=S.type,x===Fc){if(O.tag===7){r(s,O.sibling),b=i(O,S.props.children),b.return=s,s=b;break e}}else if(O.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===po&&E0(x)===O.type){r(s,O.sibling),b=i(O,S.props),b.ref=tu(s,O,S),b.return=s,s=b;break e}r(s,O);break}else t(s,O);O=O.sibling}S.type===Fc?(b=rc(S.props.children,s.mode,T,S.key),b.return=s,s=b):(T=gp(S.type,S.key,S.props,null,s.mode,T),T.ref=tu(s,b,S),T.return=s,s=T)}return y(s);case Bc:e:{for(O=S.key;b!==null;){if(b.key===O)if(b.tag===4&&b.stateNode.containerInfo===S.containerInfo&&b.stateNode.implementation===S.implementation){r(s,b.sibling),b=i(b,S.children||[]),b.return=s,s=b;break e}else{r(s,b);break}else t(s,b);b=b.sibling}b=Sf(S,s.mode,T),b.return=s,s=b}return y(s);case po:return O=S._init,g(s,b,O(S._payload),T)}if(pu(S))return k(s,b,S,T);if(Ql(S))return f(s,b,S,T);Qd(s,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,b!==null&&b.tag===6?(r(s,b.sibling),b=i(b,S),b.return=s,s=b):(r(s,b),b=bf(S,s.mode,T),b.return=s,s=b),y(s)):r(s,b)}return g}var ul=yw(!0),_w=yw(!1),Up=Mo(null),zp=null,Kc=null,bg=null;function Sg(){bg=Kc=zp=null}function Rg(e){var t=Up.current;En(Up),e._currentValue=t}function fm(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function tl(e,t){zp=e,bg=Kc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ms=!0),e.firstContext=null)}function Qs(e){var t=e._currentValue;if(bg!==e)if(e={context:e,memoizedValue:t,next:null},Kc===null){if(zp===null)throw Error(ft(308));Kc=e,zp.dependencies={lanes:0,firstContext:e}}else Kc=Kc.next=e;return t}var Yo=null;function Eg(e){Yo===null?Yo=[e]:Yo.push(e)}function ww(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,Eg(t)):(r.next=i.next,i.next=r),t.interleaved=r,Ha(e,n)}function Ha(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ho=!1;function kg(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ja(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ko(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Qr&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Ha(e,r)}return i=n.interleaved,i===null?(t.next=t,Eg(n)):(t.next=i.next,i.next=t),n.interleaved=t,Ha(e,r)}function up(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ug(e,r)}}function k0(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var y={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=y:a=a.next=y,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Hp(e,t,r,n){var i=e.updateQueue;ho=!1;var a=i.firstBaseUpdate,y=i.lastBaseUpdate,C=i.shared.pending;if(C!==null){i.shared.pending=null;var p=C,o=p.next;p.next=null,y===null?a=o:y.next=o,y=p;var E=e.alternate;E!==null&&(E=E.updateQueue,C=E.lastBaseUpdate,C!==y&&(C===null?E.firstBaseUpdate=o:C.next=o,E.lastBaseUpdate=p))}if(a!==null){var _=i.baseState;y=0,E=o=p=null,C=a;do{var h=C.lane,w=C.eventTime;if((n&h)===h){E!==null&&(E=E.next={eventTime:w,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var k=e,f=C;switch(h=t,w=r,f.tag){case 1:if(k=f.payload,typeof k=="function"){_=k.call(w,_,h);break e}_=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=f.payload,h=typeof k=="function"?k.call(w,_,h):k,h==null)break e;_=Ln({},_,h);break e;case 2:ho=!0}}C.callback!==null&&C.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[C]:h.push(C))}else w={eventTime:w,lane:h,tag:C.tag,payload:C.payload,callback:C.callback,next:null},E===null?(o=E=w,p=_):E=E.next=w,y|=h;if(C=C.next,C===null){if(C=i.shared.pending,C===null)break;h=C,C=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(E===null&&(p=_),i.baseState=p,i.firstBaseUpdate=o,i.lastBaseUpdate=E,t=i.shared.interleaved,t!==null){i=t;do y|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);cc|=y,e.lanes=y,e.memoizedState=_}}function C0(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(ft(191,i));i.call(n)}}}var Zu={},ba=Mo(Zu),Bu=Mo(Zu),Fu=Mo(Zu);function Xo(e){if(e===Zu)throw Error(ft(174));return e}function Cg(e,t){switch(vn(Fu,t),vn(Bu,e),vn(ba,Zu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Gf(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Gf(t,e)}En(ba),vn(ba,t)}function dl(){En(ba),En(Bu),En(Fu)}function Sw(e){Xo(Fu.current);var t=Xo(ba.current),r=Gf(t,e.type);t!==r&&(vn(Bu,e),vn(ba,r))}function Pg(e){Bu.current===e&&(En(ba),En(Bu))}var Mn=Mo(0);function Wp(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var mf=[];function Tg(){for(var e=0;e<mf.length;e++)mf[e]._workInProgressVersionPrimary=null;mf.length=0}var dp=Va.ReactCurrentDispatcher,gf=Va.ReactCurrentBatchConfig,oc=0,An=null,yi=null,Ei=null,Vp=!1,Ru=!1,Uu=0,aE=0;function Gi(){throw Error(ft(321))}function xg(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!da(e[r],t[r]))return!1;return!0}function Og(e,t,r,n,i,a){if(oc=a,An=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,dp.current=e===null||e.memoizedState===null?uE:dE,e=r(n,i),Ru){a=0;do{if(Ru=!1,Uu=0,25<=a)throw Error(ft(301));a+=1,Ei=yi=null,t.updateQueue=null,dp.current=pE,e=r(n,i)}while(Ru)}if(dp.current=$p,t=yi!==null&&yi.next!==null,oc=0,Ei=yi=An=null,Vp=!1,t)throw Error(ft(300));return e}function Dg(){var e=Uu!==0;return Uu=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ei===null?An.memoizedState=Ei=e:Ei=Ei.next=e,Ei}function Ys(){if(yi===null){var e=An.alternate;e=e!==null?e.memoizedState:null}else e=yi.next;var t=Ei===null?An.memoizedState:Ei.next;if(t!==null)Ei=t,yi=e;else{if(e===null)throw Error(ft(310));yi=e,e={memoizedState:yi.memoizedState,baseState:yi.baseState,baseQueue:yi.baseQueue,queue:yi.queue,next:null},Ei===null?An.memoizedState=Ei=e:Ei=Ei.next=e}return Ei}function zu(e,t){return typeof t=="function"?t(e):t}function vf(e){var t=Ys(),r=t.queue;if(r===null)throw Error(ft(311));r.lastRenderedReducer=e;var n=yi,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var y=i.next;i.next=a.next,a.next=y}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var C=y=null,p=null,o=a;do{var E=o.lane;if((oc&E)===E)p!==null&&(p=p.next={lane:0,action:o.action,hasEagerState:o.hasEagerState,eagerState:o.eagerState,next:null}),n=o.hasEagerState?o.eagerState:e(n,o.action);else{var _={lane:E,action:o.action,hasEagerState:o.hasEagerState,eagerState:o.eagerState,next:null};p===null?(C=p=_,y=n):p=p.next=_,An.lanes|=E,cc|=E}o=o.next}while(o!==null&&o!==a);p===null?y=n:p.next=C,da(n,t.memoizedState)||(ms=!0),t.memoizedState=n,t.baseState=y,t.baseQueue=p,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,An.lanes|=a,cc|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function yf(e){var t=Ys(),r=t.queue;if(r===null)throw Error(ft(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var y=i=i.next;do a=e(a,y.action),y=y.next;while(y!==i);da(a,t.memoizedState)||(ms=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Rw(){}function Ew(e,t){var r=An,n=Ys(),i=t(),a=!da(n.memoizedState,i);if(a&&(n.memoizedState=i,ms=!0),n=n.queue,Ig(Pw.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||Ei!==null&&Ei.memoizedState.tag&1){if(r.flags|=2048,Hu(9,Cw.bind(null,r,n,i,t),void 0,null),ki===null)throw Error(ft(349));oc&30||kw(r,t,i)}return i}function kw(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=An.updateQueue,t===null?(t={lastEffect:null,stores:null},An.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Cw(e,t,r,n){t.value=r,t.getSnapshot=n,Tw(t)&&xw(e)}function Pw(e,t,r){return r(function(){Tw(t)&&xw(e)})}function Tw(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!da(e,r)}catch{return!0}}function xw(e){var t=Ha(e,1);t!==null&&ua(t,e,1,-1)}function P0(e){var t=va();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zu,lastRenderedState:e},t.queue=e,e=e.dispatch=lE.bind(null,An,e),[t.memoizedState,e]}function Hu(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=An.updateQueue,t===null?(t={lastEffect:null,stores:null},An.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Ow(){return Ys().memoizedState}function pp(e,t,r,n){var i=va();An.flags|=e,i.memoizedState=Hu(1|t,r,void 0,n===void 0?null:n)}function mh(e,t,r,n){var i=Ys();n=n===void 0?null:n;var a=void 0;if(yi!==null){var y=yi.memoizedState;if(a=y.destroy,n!==null&&xg(n,y.deps)){i.memoizedState=Hu(t,r,a,n);return}}An.flags|=e,i.memoizedState=Hu(1|t,r,a,n)}function T0(e,t){return pp(8390656,8,e,t)}function Ig(e,t){return mh(2048,8,e,t)}function Dw(e,t){return mh(4,2,e,t)}function Iw(e,t){return mh(4,4,e,t)}function Mw(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Aw(e,t,r){return r=r!=null?r.concat([e]):null,mh(4,4,Mw.bind(null,t,e),r)}function Mg(){}function Lw(e,t){var r=Ys();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&xg(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Nw(e,t){var r=Ys();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&xg(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function jw(e,t,r){return oc&21?(da(r,t)||(r=H_(),An.lanes|=r,cc|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,ms=!0),e.memoizedState=r)}function oE(e,t){var r=cn;cn=r!==0&&4>r?r:4,e(!0);var n=gf.transition;gf.transition={};try{e(!1),t()}finally{cn=r,gf.transition=n}}function Bw(){return Ys().memoizedState}function cE(e,t,r){var n=Po(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Fw(e))Uw(t,r);else if(r=ww(e,t,r,n),r!==null){var i=as();ua(r,e,n,i),zw(r,t,n)}}function lE(e,t,r){var n=Po(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Fw(e))Uw(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var y=t.lastRenderedState,C=a(y,r);if(i.hasEagerState=!0,i.eagerState=C,da(C,y)){var p=t.interleaved;p===null?(i.next=i,Eg(t)):(i.next=p.next,p.next=i),t.interleaved=i;return}}catch{}finally{}r=ww(e,t,i,n),r!==null&&(i=as(),ua(r,e,n,i),zw(r,t,n))}}function Fw(e){var t=e.alternate;return e===An||t!==null&&t===An}function Uw(e,t){Ru=Vp=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function zw(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ug(e,r)}}var $p={readContext:Qs,useCallback:Gi,useContext:Gi,useEffect:Gi,useImperativeHandle:Gi,useInsertionEffect:Gi,useLayoutEffect:Gi,useMemo:Gi,useReducer:Gi,useRef:Gi,useState:Gi,useDebugValue:Gi,useDeferredValue:Gi,useTransition:Gi,useMutableSource:Gi,useSyncExternalStore:Gi,useId:Gi,unstable_isNewReconciler:!1},uE={readContext:Qs,useCallback:function(e,t){return va().memoizedState=[e,t===void 0?null:t],e},useContext:Qs,useEffect:T0,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,pp(4194308,4,Mw.bind(null,t,e),r)},useLayoutEffect:function(e,t){return pp(4194308,4,e,t)},useInsertionEffect:function(e,t){return pp(4,2,e,t)},useMemo:function(e,t){var r=va();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=va();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=cE.bind(null,An,e),[n.memoizedState,e]},useRef:function(e){var t=va();return e={current:e},t.memoizedState=e},useState:P0,useDebugValue:Mg,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=P0(!1),t=e[0];return e=oE.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=An,i=va();if(xn){if(r===void 0)throw Error(ft(407));r=r()}else{if(r=t(),ki===null)throw Error(ft(349));oc&30||kw(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,T0(Pw.bind(null,n,a,e),[e]),n.flags|=2048,Hu(9,Cw.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=va(),t=ki.identifierPrefix;if(xn){var r=Na,n=La;r=(n&~(1<<32-la(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Uu++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=aE++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},dE={readContext:Qs,useCallback:Lw,useContext:Qs,useEffect:Ig,useImperativeHandle:Aw,useInsertionEffect:Dw,useLayoutEffect:Iw,useMemo:Nw,useReducer:vf,useRef:Ow,useState:function(){return vf(zu)},useDebugValue:Mg,useDeferredValue:function(e){var t=Ys();return jw(t,yi.memoizedState,e)},useTransition:function(){var e=vf(zu)[0],t=Ys().memoizedState;return[e,t]},useMutableSource:Rw,useSyncExternalStore:Ew,useId:Bw,unstable_isNewReconciler:!1},pE={readContext:Qs,useCallback:Lw,useContext:Qs,useEffect:Ig,useImperativeHandle:Aw,useInsertionEffect:Dw,useLayoutEffect:Iw,useMemo:Nw,useReducer:yf,useRef:Ow,useState:function(){return yf(zu)},useDebugValue:Mg,useDeferredValue:function(e){var t=Ys();return yi===null?t.memoizedState=e:jw(t,yi.memoizedState,e)},useTransition:function(){var e=yf(zu)[0],t=Ys().memoizedState;return[e,t]},useMutableSource:Rw,useSyncExternalStore:Ew,useId:Bw,unstable_isNewReconciler:!1};function ia(e,t){if(e&&e.defaultProps){t=Ln({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function mm(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Ln({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var gh={isMounted:function(e){return(e=e._reactInternals)?mc(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=as(),i=Po(e),a=ja(n,i);a.payload=t,r!=null&&(a.callback=r),t=ko(e,a,i),t!==null&&(ua(t,e,i,n),up(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=as(),i=Po(e),a=ja(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=ko(e,a,i),t!==null&&(ua(t,e,i,n),up(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=as(),n=Po(e),i=ja(r,n);i.tag=2,t!=null&&(i.callback=t),t=ko(e,i,n),t!==null&&(ua(t,e,n,r),up(t,e,n))}};function x0(e,t,r,n,i,a,y){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,y):t.prototype&&t.prototype.isPureReactComponent?!Au(r,n)||!Au(i,a):!0}function Hw(e,t,r){var n=!1,i=Do,a=t.contextType;return typeof a=="object"&&a!==null?a=Qs(a):(i=vs(t)?sc:Xi.current,n=t.contextTypes,a=(n=n!=null)?cl(e,i):Do),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=gh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function O0(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&gh.enqueueReplaceState(t,t.state,null)}function gm(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},kg(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Qs(a):(a=vs(t)?sc:Xi.current,i.context=cl(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(mm(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&gh.enqueueReplaceState(i,i.state,null),Hp(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function pl(e,t){try{var r="",n=t;do r+=US(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function _f(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function vm(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var hE=typeof WeakMap=="function"?WeakMap:Map;function Ww(e,t,r){r=ja(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){Kp||(Kp=!0,Pm=n),vm(e,t)},r}function Vw(e,t,r){r=ja(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){vm(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){vm(e,t),typeof n!="function"&&(Co===null?Co=new Set([this]):Co.add(this));var y=t.stack;this.componentDidCatch(t.value,{componentStack:y!==null?y:""})}),r}function D0(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new hE;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=PE.bind(null,e,t,r),t.then(e,e))}function I0(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function M0(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=ja(-1,1),t.tag=2,ko(r,t,1))),r.lanes|=1),e)}var fE=Va.ReactCurrentOwner,ms=!1;function ss(e,t,r,n){t.child=e===null?_w(t,null,r,n):ul(t,e.child,r,n)}function A0(e,t,r,n,i){r=r.render;var a=t.ref;return tl(t,i),n=Og(e,t,r,n,a,i),r=Dg(),e!==null&&!ms?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i)):(xn&&r&&yg(t),t.flags|=1,ss(e,t,n,i),t.child)}function L0(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!zg(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,$w(e,t,a,n,i)):(e=gp(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var y=a.memoizedProps;if(r=r.compare,r=r!==null?r:Au,r(y,n)&&e.ref===t.ref)return Wa(e,t,i)}return t.flags|=1,e=To(a,n),e.ref=t.ref,e.return=t,t.child=e}function $w(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(Au(a,n)&&e.ref===t.ref)if(ms=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(ms=!0);else return t.lanes=e.lanes,Wa(e,t,i)}return ym(e,t,r,n,i)}function qw(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},vn(Jc,Os),Os|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,vn(Jc,Os),Os|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,vn(Jc,Os),Os|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,vn(Jc,Os),Os|=n;return ss(e,t,i,r),t.child}function Kw(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ym(e,t,r,n,i){var a=vs(r)?sc:Xi.current;return a=cl(t,a),tl(t,i),r=Og(e,t,r,n,a,i),n=Dg(),e!==null&&!ms?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wa(e,t,i)):(xn&&n&&yg(t),t.flags|=1,ss(e,t,r,i),t.child)}function N0(e,t,r,n,i){if(vs(r)){var a=!0;jp(t)}else a=!1;if(tl(t,i),t.stateNode===null)hp(e,t),Hw(t,r,n),gm(t,r,n,i),n=!0;else if(e===null){var y=t.stateNode,C=t.memoizedProps;y.props=C;var p=y.context,o=r.contextType;typeof o=="object"&&o!==null?o=Qs(o):(o=vs(r)?sc:Xi.current,o=cl(t,o));var E=r.getDerivedStateFromProps,_=typeof E=="function"||typeof y.getSnapshotBeforeUpdate=="function";_||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C!==n||p!==o)&&O0(t,y,n,o),ho=!1;var h=t.memoizedState;y.state=h,Hp(t,n,y,i),p=t.memoizedState,C!==n||h!==p||gs.current||ho?(typeof E=="function"&&(mm(t,r,E,n),p=t.memoizedState),(C=ho||x0(t,r,C,n,h,p,o))?(_||typeof y.UNSAFE_componentWillMount!="function"&&typeof y.componentWillMount!="function"||(typeof y.componentWillMount=="function"&&y.componentWillMount(),typeof y.UNSAFE_componentWillMount=="function"&&y.UNSAFE_componentWillMount()),typeof y.componentDidMount=="function"&&(t.flags|=4194308)):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=p),y.props=n,y.state=p,y.context=o,n=C):(typeof y.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{y=t.stateNode,bw(e,t),C=t.memoizedProps,o=t.type===t.elementType?C:ia(t.type,C),y.props=o,_=t.pendingProps,h=y.context,p=r.contextType,typeof p=="object"&&p!==null?p=Qs(p):(p=vs(r)?sc:Xi.current,p=cl(t,p));var w=r.getDerivedStateFromProps;(E=typeof w=="function"||typeof y.getSnapshotBeforeUpdate=="function")||typeof y.UNSAFE_componentWillReceiveProps!="function"&&typeof y.componentWillReceiveProps!="function"||(C!==_||h!==p)&&O0(t,y,n,p),ho=!1,h=t.memoizedState,y.state=h,Hp(t,n,y,i);var k=t.memoizedState;C!==_||h!==k||gs.current||ho?(typeof w=="function"&&(mm(t,r,w,n),k=t.memoizedState),(o=ho||x0(t,r,o,n,h,k,p)||!1)?(E||typeof y.UNSAFE_componentWillUpdate!="function"&&typeof y.componentWillUpdate!="function"||(typeof y.componentWillUpdate=="function"&&y.componentWillUpdate(n,k,p),typeof y.UNSAFE_componentWillUpdate=="function"&&y.UNSAFE_componentWillUpdate(n,k,p)),typeof y.componentDidUpdate=="function"&&(t.flags|=4),typeof y.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof y.componentDidUpdate!="function"||C===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=k),y.props=n,y.state=k,y.context=p,n=o):(typeof y.componentDidUpdate!="function"||C===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof y.getSnapshotBeforeUpdate!="function"||C===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return _m(e,t,r,n,a,i)}function _m(e,t,r,n,i,a){Kw(e,t);var y=(t.flags&128)!==0;if(!n&&!y)return i&&b0(t,r,!1),Wa(e,t,a);n=t.stateNode,fE.current=t;var C=y&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&y?(t.child=ul(t,e.child,null,a),t.child=ul(t,null,C,a)):ss(e,t,C,a),t.memoizedState=n.state,i&&b0(t,r,!0),t.child}function Gw(e){var t=e.stateNode;t.pendingContext?w0(e,t.pendingContext,t.pendingContext!==t.context):t.context&&w0(e,t.context,!1),Cg(e,t.containerInfo)}function j0(e,t,r,n,i){return ll(),wg(i),t.flags|=256,ss(e,t,r,n),t.child}var wm={dehydrated:null,treeContext:null,retryLane:0};function bm(e){return{baseLanes:e,cachePool:null,transitions:null}}function Jw(e,t,r){var n=t.pendingProps,i=Mn.current,a=!1,y=(t.flags&128)!==0,C;if((C=y)||(C=e!==null&&e.memoizedState===null?!1:(i&2)!==0),C?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),vn(Mn,i&1),e===null)return hm(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(y=n.children,e=n.fallback,a?(n=t.mode,a=t.child,y={mode:"hidden",children:y},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=y):a=_h(y,n,0,null),e=rc(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=bm(r),t.memoizedState=wm,e):Ag(t,y));if(i=e.memoizedState,i!==null&&(C=i.dehydrated,C!==null))return mE(e,t,y,n,C,i,r);if(a){a=n.fallback,y=t.mode,i=e.child,C=i.sibling;var p={mode:"hidden",children:n.children};return!(y&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=p,t.deletions=null):(n=To(i,p),n.subtreeFlags=i.subtreeFlags&14680064),C!==null?a=To(C,a):(a=rc(a,y,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,y=e.child.memoizedState,y=y===null?bm(r):{baseLanes:y.baseLanes|r,cachePool:null,transitions:y.transitions},a.memoizedState=y,a.childLanes=e.childLanes&~r,t.memoizedState=wm,n}return a=e.child,e=a.sibling,n=To(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function Ag(e,t){return t=_h({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Yd(e,t,r,n){return n!==null&&wg(n),ul(t,e.child,null,r),e=Ag(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function mE(e,t,r,n,i,a,y){if(r)return t.flags&256?(t.flags&=-257,n=_f(Error(ft(422))),Yd(e,t,y,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=_h({mode:"visible",children:n.children},i,0,null),a=rc(a,i,y,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&ul(t,e.child,null,y),t.child.memoizedState=bm(y),t.memoizedState=wm,a);if(!(t.mode&1))return Yd(e,t,y,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var C=n.dgst;return n=C,a=Error(ft(419)),n=_f(a,n,void 0),Yd(e,t,y,n)}if(C=(y&e.childLanes)!==0,ms||C){if(n=ki,n!==null){switch(y&-y){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|y)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Ha(e,i),ua(n,e,i,-1))}return Ug(),n=_f(Error(ft(421))),Yd(e,t,y,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=TE.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Is=Eo(i.nextSibling),Ms=t,xn=!0,ca=null,e!==null&&($s[qs++]=La,$s[qs++]=Na,$s[qs++]=ac,La=e.id,Na=e.overflow,ac=t),t=Ag(t,n.children),t.flags|=4096,t)}function B0(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),fm(e.return,t,r)}function wf(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function Qw(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(ss(e,t,n.children,r),n=Mn.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&B0(e,r,t);else if(e.tag===19)B0(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(vn(Mn,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Wp(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),wf(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Wp(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}wf(t,!0,r,null,a);break;case"together":wf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function hp(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wa(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),cc|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ft(153));if(t.child!==null){for(e=t.child,r=To(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=To(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function gE(e,t,r){switch(t.tag){case 3:Gw(t),ll();break;case 5:Sw(t);break;case 1:vs(t.type)&&jp(t);break;case 4:Cg(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;vn(Up,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(vn(Mn,Mn.current&1),t.flags|=128,null):r&t.child.childLanes?Jw(e,t,r):(vn(Mn,Mn.current&1),e=Wa(e,t,r),e!==null?e.sibling:null);vn(Mn,Mn.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return Qw(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),vn(Mn,Mn.current),n)break;return null;case 22:case 23:return t.lanes=0,qw(e,t,r)}return Wa(e,t,r)}var Yw,Sm,Xw,Zw;Yw=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Sm=function(){};Xw=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Xo(ba.current);var a=null;switch(r){case"input":i=Vf(e,i),n=Vf(e,n),a=[];break;case"select":i=Ln({},i,{value:void 0}),n=Ln({},n,{value:void 0}),a=[];break;case"textarea":i=Kf(e,i),n=Kf(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Lp)}Jf(r,n);var y;r=null;for(o in i)if(!n.hasOwnProperty(o)&&i.hasOwnProperty(o)&&i[o]!=null)if(o==="style"){var C=i[o];for(y in C)C.hasOwnProperty(y)&&(r||(r={}),r[y]="")}else o!=="dangerouslySetInnerHTML"&&o!=="children"&&o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Pu.hasOwnProperty(o)?a||(a=[]):(a=a||[]).push(o,null));for(o in n){var p=n[o];if(C=i!=null?i[o]:void 0,n.hasOwnProperty(o)&&p!==C&&(p!=null||C!=null))if(o==="style")if(C){for(y in C)!C.hasOwnProperty(y)||p&&p.hasOwnProperty(y)||(r||(r={}),r[y]="");for(y in p)p.hasOwnProperty(y)&&C[y]!==p[y]&&(r||(r={}),r[y]=p[y])}else r||(a||(a=[]),a.push(o,r)),r=p;else o==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,C=C?C.__html:void 0,p!=null&&C!==p&&(a=a||[]).push(o,p)):o==="children"?typeof p!="string"&&typeof p!="number"||(a=a||[]).push(o,""+p):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&(Pu.hasOwnProperty(o)?(p!=null&&o==="onScroll"&&Rn("scroll",e),a||C===p||(a=[])):(a=a||[]).push(o,p))}r&&(a=a||[]).push("style",r);var o=a;(t.updateQueue=o)&&(t.flags|=4)}};Zw=function(e,t,r,n){r!==n&&(t.flags|=4)};function ru(e,t){if(!xn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Ji(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function vE(e,t,r){var n=t.pendingProps;switch(_g(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ji(t),null;case 1:return vs(t.type)&&Np(),Ji(t),null;case 3:return n=t.stateNode,dl(),En(gs),En(Xi),Tg(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Jd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ca!==null&&(Om(ca),ca=null))),Sm(e,t),Ji(t),null;case 5:Pg(t);var i=Xo(Fu.current);if(r=t.type,e!==null&&t.stateNode!=null)Xw(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(ft(166));return Ji(t),null}if(e=Xo(ba.current),Jd(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[_a]=t,n[ju]=a,e=(t.mode&1)!==0,r){case"dialog":Rn("cancel",n),Rn("close",n);break;case"iframe":case"object":case"embed":Rn("load",n);break;case"video":case"audio":for(i=0;i<fu.length;i++)Rn(fu[i],n);break;case"source":Rn("error",n);break;case"img":case"image":case"link":Rn("error",n),Rn("load",n);break;case"details":Rn("toggle",n);break;case"input":Kv(n,a),Rn("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Rn("invalid",n);break;case"textarea":Jv(n,a),Rn("invalid",n)}Jf(r,a),i=null;for(var y in a)if(a.hasOwnProperty(y)){var C=a[y];y==="children"?typeof C=="string"?n.textContent!==C&&(a.suppressHydrationWarning!==!0&&Gd(n.textContent,C,e),i=["children",C]):typeof C=="number"&&n.textContent!==""+C&&(a.suppressHydrationWarning!==!0&&Gd(n.textContent,C,e),i=["children",""+C]):Pu.hasOwnProperty(y)&&C!=null&&y==="onScroll"&&Rn("scroll",n)}switch(r){case"input":Ud(n),Gv(n,a,!0);break;case"textarea":Ud(n),Qv(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Lp)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{y=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=P_(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=y.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=y.createElement(r,{is:n.is}):(e=y.createElement(r),r==="select"&&(y=e,n.multiple?y.multiple=!0:n.size&&(y.size=n.size))):e=y.createElementNS(e,r),e[_a]=t,e[ju]=n,Yw(e,t,!1,!1),t.stateNode=e;e:{switch(y=Qf(r,n),r){case"dialog":Rn("cancel",e),Rn("close",e),i=n;break;case"iframe":case"object":case"embed":Rn("load",e),i=n;break;case"video":case"audio":for(i=0;i<fu.length;i++)Rn(fu[i],e);i=n;break;case"source":Rn("error",e),i=n;break;case"img":case"image":case"link":Rn("error",e),Rn("load",e),i=n;break;case"details":Rn("toggle",e),i=n;break;case"input":Kv(e,n),i=Vf(e,n),Rn("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=Ln({},n,{value:void 0}),Rn("invalid",e);break;case"textarea":Jv(e,n),i=Kf(e,n),Rn("invalid",e);break;default:i=n}Jf(r,i),C=i;for(a in C)if(C.hasOwnProperty(a)){var p=C[a];a==="style"?O_(e,p):a==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&T_(e,p)):a==="children"?typeof p=="string"?(r!=="textarea"||p!=="")&&Tu(e,p):typeof p=="number"&&Tu(e,""+p):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Pu.hasOwnProperty(a)?p!=null&&a==="onScroll"&&Rn("scroll",e):p!=null&&ig(e,a,p,y))}switch(r){case"input":Ud(e),Gv(e,n,!1);break;case"textarea":Ud(e),Qv(e);break;case"option":n.value!=null&&e.setAttribute("value",""+Oo(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?Yc(e,!!n.multiple,a,!1):n.defaultValue!=null&&Yc(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Lp)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ji(t),null;case 6:if(e&&t.stateNode!=null)Zw(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(ft(166));if(r=Xo(Fu.current),Xo(ba.current),Jd(t)){if(n=t.stateNode,r=t.memoizedProps,n[_a]=t,(a=n.nodeValue!==r)&&(e=Ms,e!==null))switch(e.tag){case 3:Gd(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Gd(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[_a]=t,t.stateNode=n}return Ji(t),null;case 13:if(En(Mn),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(xn&&Is!==null&&t.mode&1&&!(t.flags&128))vw(),ll(),t.flags|=98560,a=!1;else if(a=Jd(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(ft(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ft(317));a[_a]=t}else ll(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ji(t),a=!1}else ca!==null&&(Om(ca),ca=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Mn.current&1?_i===0&&(_i=3):Ug())),t.updateQueue!==null&&(t.flags|=4),Ji(t),null);case 4:return dl(),Sm(e,t),e===null&&Lu(t.stateNode.containerInfo),Ji(t),null;case 10:return Rg(t.type._context),Ji(t),null;case 17:return vs(t.type)&&Np(),Ji(t),null;case 19:if(En(Mn),a=t.memoizedState,a===null)return Ji(t),null;if(n=(t.flags&128)!==0,y=a.rendering,y===null)if(n)ru(a,!1);else{if(_i!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(y=Wp(e),y!==null){for(t.flags|=128,ru(a,!1),n=y.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,y=a.alternate,y===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=y.childLanes,a.lanes=y.lanes,a.child=y.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=y.memoizedProps,a.memoizedState=y.memoizedState,a.updateQueue=y.updateQueue,a.type=y.type,e=y.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return vn(Mn,Mn.current&1|2),t.child}e=e.sibling}a.tail!==null&&Jn()>hl&&(t.flags|=128,n=!0,ru(a,!1),t.lanes=4194304)}else{if(!n)if(e=Wp(y),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),ru(a,!0),a.tail===null&&a.tailMode==="hidden"&&!y.alternate&&!xn)return Ji(t),null}else 2*Jn()-a.renderingStartTime>hl&&r!==1073741824&&(t.flags|=128,n=!0,ru(a,!1),t.lanes=4194304);a.isBackwards?(y.sibling=t.child,t.child=y):(r=a.last,r!==null?r.sibling=y:t.child=y,a.last=y)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Jn(),t.sibling=null,r=Mn.current,vn(Mn,n?r&1|2:r&1),t):(Ji(t),null);case 22:case 23:return Fg(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Os&1073741824&&(Ji(t),t.subtreeFlags&6&&(t.flags|=8192)):Ji(t),null;case 24:return null;case 25:return null}throw Error(ft(156,t.tag))}function yE(e,t){switch(_g(t),t.tag){case 1:return vs(t.type)&&Np(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return dl(),En(gs),En(Xi),Tg(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Pg(t),null;case 13:if(En(Mn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ft(340));ll()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return En(Mn),null;case 4:return dl(),null;case 10:return Rg(t.type._context),null;case 22:case 23:return Fg(),null;case 24:return null;default:return null}}var Xd=!1,Yi=!1,_E=typeof WeakSet=="function"?WeakSet:Set,$t=null;function Gc(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Un(e,t,n)}else r.current=null}function Rm(e,t,r){try{r()}catch(n){Un(e,t,n)}}var F0=!1;function wE(e,t){if(am=Ip,e=iw(),vg(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var y=0,C=-1,p=-1,o=0,E=0,_=e,h=null;t:for(;;){for(var w;_!==r||i!==0&&_.nodeType!==3||(C=y+i),_!==a||n!==0&&_.nodeType!==3||(p=y+n),_.nodeType===3&&(y+=_.nodeValue.length),(w=_.firstChild)!==null;)h=_,_=w;for(;;){if(_===e)break t;if(h===r&&++o===i&&(C=y),h===a&&++E===n&&(p=y),(w=_.nextSibling)!==null)break;_=h,h=_.parentNode}_=w}r=C===-1||p===-1?null:{start:C,end:p}}else r=null}r=r||{start:0,end:0}}else r=null;for(om={focusedElem:e,selectionRange:r},Ip=!1,$t=t;$t!==null;)if(t=$t,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$t=e;else for(;$t!==null;){t=$t;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var f=k.memoizedProps,g=k.memoizedState,s=t.stateNode,b=s.getSnapshotBeforeUpdate(t.elementType===t.type?f:ia(t.type,f),g);s.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var S=t.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ft(163))}}catch(T){Un(t,t.return,T)}if(e=t.sibling,e!==null){e.return=t.return,$t=e;break}$t=t.return}return k=F0,F0=!1,k}function Eu(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Rm(t,r,a)}i=i.next}while(i!==n)}}function vh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function Em(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function e1(e){var t=e.alternate;t!==null&&(e.alternate=null,e1(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_a],delete t[ju],delete t[um],delete t[rE],delete t[nE])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function t1(e){return e.tag===5||e.tag===3||e.tag===4}function U0(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||t1(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function km(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Lp));else if(n!==4&&(e=e.child,e!==null))for(km(e,t,r),e=e.sibling;e!==null;)km(e,t,r),e=e.sibling}function Cm(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(Cm(e,t,r),e=e.sibling;e!==null;)Cm(e,t,r),e=e.sibling}var Ui=null,sa=!1;function co(e,t,r){for(r=r.child;r!==null;)r1(e,t,r),r=r.sibling}function r1(e,t,r){if(wa&&typeof wa.onCommitFiberUnmount=="function")try{wa.onCommitFiberUnmount(lh,r)}catch{}switch(r.tag){case 5:Yi||Gc(r,t);case 6:var n=Ui,i=sa;Ui=null,co(e,t,r),Ui=n,sa=i,Ui!==null&&(sa?(e=Ui,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ui.removeChild(r.stateNode));break;case 18:Ui!==null&&(sa?(e=Ui,r=r.stateNode,e.nodeType===8?hf(e.parentNode,r):e.nodeType===1&&hf(e,r),Iu(e)):hf(Ui,r.stateNode));break;case 4:n=Ui,i=sa,Ui=r.stateNode.containerInfo,sa=!0,co(e,t,r),Ui=n,sa=i;break;case 0:case 11:case 14:case 15:if(!Yi&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,y=a.destroy;a=a.tag,y!==void 0&&(a&2||a&4)&&Rm(r,t,y),i=i.next}while(i!==n)}co(e,t,r);break;case 1:if(!Yi&&(Gc(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(C){Un(r,t,C)}co(e,t,r);break;case 21:co(e,t,r);break;case 22:r.mode&1?(Yi=(n=Yi)||r.memoizedState!==null,co(e,t,r),Yi=n):co(e,t,r);break;default:co(e,t,r)}}function z0(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new _E),t.forEach(function(n){var i=xE.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function na(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,y=t,C=y;e:for(;C!==null;){switch(C.tag){case 5:Ui=C.stateNode,sa=!1;break e;case 3:Ui=C.stateNode.containerInfo,sa=!0;break e;case 4:Ui=C.stateNode.containerInfo,sa=!0;break e}C=C.return}if(Ui===null)throw Error(ft(160));r1(a,y,i),Ui=null,sa=!1;var p=i.alternate;p!==null&&(p.return=null),i.return=null}catch(o){Un(i,t,o)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)n1(t,e),t=t.sibling}function n1(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(na(t,e),ga(e),n&4){try{Eu(3,e,e.return),vh(3,e)}catch(f){Un(e,e.return,f)}try{Eu(5,e,e.return)}catch(f){Un(e,e.return,f)}}break;case 1:na(t,e),ga(e),n&512&&r!==null&&Gc(r,r.return);break;case 5:if(na(t,e),ga(e),n&512&&r!==null&&Gc(r,r.return),e.flags&32){var i=e.stateNode;try{Tu(i,"")}catch(f){Un(e,e.return,f)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,y=r!==null?r.memoizedProps:a,C=e.type,p=e.updateQueue;if(e.updateQueue=null,p!==null)try{C==="input"&&a.type==="radio"&&a.name!=null&&k_(i,a),Qf(C,y);var o=Qf(C,a);for(y=0;y<p.length;y+=2){var E=p[y],_=p[y+1];E==="style"?O_(i,_):E==="dangerouslySetInnerHTML"?T_(i,_):E==="children"?Tu(i,_):ig(i,E,_,o)}switch(C){case"input":$f(i,a);break;case"textarea":C_(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var w=a.value;w!=null?Yc(i,!!a.multiple,w,!1):h!==!!a.multiple&&(a.defaultValue!=null?Yc(i,!!a.multiple,a.defaultValue,!0):Yc(i,!!a.multiple,a.multiple?[]:"",!1))}i[ju]=a}catch(f){Un(e,e.return,f)}}break;case 6:if(na(t,e),ga(e),n&4){if(e.stateNode===null)throw Error(ft(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(f){Un(e,e.return,f)}}break;case 3:if(na(t,e),ga(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Iu(t.containerInfo)}catch(f){Un(e,e.return,f)}break;case 4:na(t,e),ga(e);break;case 13:na(t,e),ga(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(jg=Jn())),n&4&&z0(e);break;case 22:if(E=r!==null&&r.memoizedState!==null,e.mode&1?(Yi=(o=Yi)||E,na(t,e),Yi=o):na(t,e),ga(e),n&8192){if(o=e.memoizedState!==null,(e.stateNode.isHidden=o)&&!E&&e.mode&1)for($t=e,E=e.child;E!==null;){for(_=$t=E;$t!==null;){switch(h=$t,w=h.child,h.tag){case 0:case 11:case 14:case 15:Eu(4,h,h.return);break;case 1:Gc(h,h.return);var k=h.stateNode;if(typeof k.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(f){Un(n,r,f)}}break;case 5:Gc(h,h.return);break;case 22:if(h.memoizedState!==null){W0(_);continue}}w!==null?(w.return=h,$t=w):W0(_)}E=E.sibling}e:for(E=null,_=e;;){if(_.tag===5){if(E===null){E=_;try{i=_.stateNode,o?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(C=_.stateNode,p=_.memoizedProps.style,y=p!=null&&p.hasOwnProperty("display")?p.display:null,C.style.display=x_("display",y))}catch(f){Un(e,e.return,f)}}}else if(_.tag===6){if(E===null)try{_.stateNode.nodeValue=o?"":_.memoizedProps}catch(f){Un(e,e.return,f)}}else if((_.tag!==22&&_.tag!==23||_.memoizedState===null||_===e)&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===e)break e;for(;_.sibling===null;){if(_.return===null||_.return===e)break e;E===_&&(E=null),_=_.return}E===_&&(E=null),_.sibling.return=_.return,_=_.sibling}}break;case 19:na(t,e),ga(e),n&4&&z0(e);break;case 21:break;default:na(t,e),ga(e)}}function ga(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(t1(r)){var n=r;break e}r=r.return}throw Error(ft(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Tu(i,""),n.flags&=-33);var a=U0(e);Cm(e,a,i);break;case 3:case 4:var y=n.stateNode.containerInfo,C=U0(e);km(e,C,y);break;default:throw Error(ft(161))}}catch(p){Un(e,e.return,p)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function bE(e,t,r){$t=e,i1(e)}function i1(e,t,r){for(var n=(e.mode&1)!==0;$t!==null;){var i=$t,a=i.child;if(i.tag===22&&n){var y=i.memoizedState!==null||Xd;if(!y){var C=i.alternate,p=C!==null&&C.memoizedState!==null||Yi;C=Xd;var o=Yi;if(Xd=y,(Yi=p)&&!o)for($t=i;$t!==null;)y=$t,p=y.child,y.tag===22&&y.memoizedState!==null?V0(i):p!==null?(p.return=y,$t=p):V0(i);for(;a!==null;)$t=a,i1(a),a=a.sibling;$t=i,Xd=C,Yi=o}H0(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,$t=a):H0(e)}}function H0(e){for(;$t!==null;){var t=$t;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Yi||vh(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Yi)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:ia(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&C0(t,a,n);break;case 3:var y=t.updateQueue;if(y!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}C0(t,y,r)}break;case 5:var C=t.stateNode;if(r===null&&t.flags&4){r=C;var p=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&r.focus();break;case"img":p.src&&(r.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var o=t.alternate;if(o!==null){var E=o.memoizedState;if(E!==null){var _=E.dehydrated;_!==null&&Iu(_)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ft(163))}Yi||t.flags&512&&Em(t)}catch(h){Un(t,t.return,h)}}if(t===e){$t=null;break}if(r=t.sibling,r!==null){r.return=t.return,$t=r;break}$t=t.return}}function W0(e){for(;$t!==null;){var t=$t;if(t===e){$t=null;break}var r=t.sibling;if(r!==null){r.return=t.return,$t=r;break}$t=t.return}}function V0(e){for(;$t!==null;){var t=$t;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{vh(4,t)}catch(p){Un(t,r,p)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(p){Un(t,i,p)}}var a=t.return;try{Em(t)}catch(p){Un(t,a,p)}break;case 5:var y=t.return;try{Em(t)}catch(p){Un(t,y,p)}}}catch(p){Un(t,t.return,p)}if(t===e){$t=null;break}var C=t.sibling;if(C!==null){C.return=t.return,$t=C;break}$t=t.return}}var SE=Math.ceil,qp=Va.ReactCurrentDispatcher,Lg=Va.ReactCurrentOwner,Js=Va.ReactCurrentBatchConfig,Qr=0,ki=null,ci=null,zi=0,Os=0,Jc=Mo(0),_i=0,Wu=null,cc=0,yh=0,Ng=0,ku=null,fs=null,jg=0,hl=1/0,Ma=null,Kp=!1,Pm=null,Co=null,Zd=!1,vo=null,Gp=0,Cu=0,Tm=null,fp=-1,mp=0;function as(){return Qr&6?Jn():fp!==-1?fp:fp=Jn()}function Po(e){return e.mode&1?Qr&2&&zi!==0?zi&-zi:sE.transition!==null?(mp===0&&(mp=H_()),mp):(e=cn,e!==0||(e=window.event,e=e===void 0?16:J_(e.type)),e):1}function ua(e,t,r,n){if(50<Cu)throw Cu=0,Tm=null,Error(ft(185));Qu(e,r,n),(!(Qr&2)||e!==ki)&&(e===ki&&(!(Qr&2)&&(yh|=r),_i===4&&mo(e,zi)),ys(e,n),r===1&&Qr===0&&!(t.mode&1)&&(hl=Jn()+500,fh&&Ao()))}function ys(e,t){var r=e.callbackNode;sR(e,t);var n=Dp(e,e===ki?zi:0);if(n===0)r!==null&&Zv(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Zv(r),t===1)e.tag===0?iE($0.bind(null,e)):fw($0.bind(null,e)),eE(function(){!(Qr&6)&&Ao()}),r=null;else{switch(W_(n)){case 1:r=lg;break;case 4:r=U_;break;case 16:r=Op;break;case 536870912:r=z_;break;default:r=Op}r=p1(r,s1.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function s1(e,t){if(fp=-1,mp=0,Qr&6)throw Error(ft(327));var r=e.callbackNode;if(rl()&&e.callbackNode!==r)return null;var n=Dp(e,e===ki?zi:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=Jp(e,n);else{t=n;var i=Qr;Qr|=2;var a=o1();(ki!==e||zi!==t)&&(Ma=null,hl=Jn()+500,tc(e,t));do try{kE();break}catch(C){a1(e,C)}while(!0);Sg(),qp.current=a,Qr=i,ci!==null?t=0:(ki=null,zi=0,t=_i)}if(t!==0){if(t===2&&(i=tm(e),i!==0&&(n=i,t=xm(e,i))),t===1)throw r=Wu,tc(e,0),mo(e,n),ys(e,Jn()),r;if(t===6)mo(e,n);else{if(i=e.current.alternate,!(n&30)&&!RE(i)&&(t=Jp(e,n),t===2&&(a=tm(e),a!==0&&(n=a,t=xm(e,a))),t===1))throw r=Wu,tc(e,0),mo(e,n),ys(e,Jn()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(ft(345));case 2:Go(e,fs,Ma);break;case 3:if(mo(e,n),(n&130023424)===n&&(t=jg+500-Jn(),10<t)){if(Dp(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){as(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=lm(Go.bind(null,e,fs,Ma),t);break}Go(e,fs,Ma);break;case 4:if(mo(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var y=31-la(n);a=1<<y,y=t[y],y>i&&(i=y),n&=~a}if(n=i,n=Jn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*SE(n/1960))-n,10<n){e.timeoutHandle=lm(Go.bind(null,e,fs,Ma),n);break}Go(e,fs,Ma);break;case 5:Go(e,fs,Ma);break;default:throw Error(ft(329))}}}return ys(e,Jn()),e.callbackNode===r?s1.bind(null,e):null}function xm(e,t){var r=ku;return e.current.memoizedState.isDehydrated&&(tc(e,t).flags|=256),e=Jp(e,t),e!==2&&(t=fs,fs=r,t!==null&&Om(t)),e}function Om(e){fs===null?fs=e:fs.push.apply(fs,e)}function RE(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!da(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function mo(e,t){for(t&=~Ng,t&=~yh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-la(t),n=1<<r;e[r]=-1,t&=~n}}function $0(e){if(Qr&6)throw Error(ft(327));rl();var t=Dp(e,0);if(!(t&1))return ys(e,Jn()),null;var r=Jp(e,t);if(e.tag!==0&&r===2){var n=tm(e);n!==0&&(t=n,r=xm(e,n))}if(r===1)throw r=Wu,tc(e,0),mo(e,t),ys(e,Jn()),r;if(r===6)throw Error(ft(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Go(e,fs,Ma),ys(e,Jn()),null}function Bg(e,t){var r=Qr;Qr|=1;try{return e(t)}finally{Qr=r,Qr===0&&(hl=Jn()+500,fh&&Ao())}}function lc(e){vo!==null&&vo.tag===0&&!(Qr&6)&&rl();var t=Qr;Qr|=1;var r=Js.transition,n=cn;try{if(Js.transition=null,cn=1,e)return e()}finally{cn=n,Js.transition=r,Qr=t,!(Qr&6)&&Ao()}}function Fg(){Os=Jc.current,En(Jc)}function tc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,ZR(r)),ci!==null)for(r=ci.return;r!==null;){var n=r;switch(_g(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Np();break;case 3:dl(),En(gs),En(Xi),Tg();break;case 5:Pg(n);break;case 4:dl();break;case 13:En(Mn);break;case 19:En(Mn);break;case 10:Rg(n.type._context);break;case 22:case 23:Fg()}r=r.return}if(ki=e,ci=e=To(e.current,null),zi=Os=t,_i=0,Wu=null,Ng=yh=cc=0,fs=ku=null,Yo!==null){for(t=0;t<Yo.length;t++)if(r=Yo[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var y=a.next;a.next=i,n.next=y}r.pending=n}Yo=null}return e}function a1(e,t){do{var r=ci;try{if(Sg(),dp.current=$p,Vp){for(var n=An.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Vp=!1}if(oc=0,Ei=yi=An=null,Ru=!1,Uu=0,Lg.current=null,r===null||r.return===null){_i=1,Wu=t,ci=null;break}e:{var a=e,y=r.return,C=r,p=t;if(t=zi,C.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var o=p,E=C,_=E.tag;if(!(E.mode&1)&&(_===0||_===11||_===15)){var h=E.alternate;h?(E.updateQueue=h.updateQueue,E.memoizedState=h.memoizedState,E.lanes=h.lanes):(E.updateQueue=null,E.memoizedState=null)}var w=I0(y);if(w!==null){w.flags&=-257,M0(w,y,C,a,t),w.mode&1&&D0(a,o,t),t=w,p=o;var k=t.updateQueue;if(k===null){var f=new Set;f.add(p),t.updateQueue=f}else k.add(p);break e}else{if(!(t&1)){D0(a,o,t),Ug();break e}p=Error(ft(426))}}else if(xn&&C.mode&1){var g=I0(y);if(g!==null){!(g.flags&65536)&&(g.flags|=256),M0(g,y,C,a,t),wg(pl(p,C));break e}}a=p=pl(p,C),_i!==4&&(_i=2),ku===null?ku=[a]:ku.push(a),a=y;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var s=Ww(a,p,t);k0(a,s);break e;case 1:C=p;var b=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof b.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Co===null||!Co.has(S)))){a.flags|=65536,t&=-t,a.lanes|=t;var T=Vw(a,C,t);k0(a,T);break e}}a=a.return}while(a!==null)}l1(r)}catch(x){t=x,ci===r&&r!==null&&(ci=r=r.return);continue}break}while(!0)}function o1(){var e=qp.current;return qp.current=$p,e===null?$p:e}function Ug(){(_i===0||_i===3||_i===2)&&(_i=4),ki===null||!(cc&268435455)&&!(yh&268435455)||mo(ki,zi)}function Jp(e,t){var r=Qr;Qr|=2;var n=o1();(ki!==e||zi!==t)&&(Ma=null,tc(e,t));do try{EE();break}catch(i){a1(e,i)}while(!0);if(Sg(),Qr=r,qp.current=n,ci!==null)throw Error(ft(261));return ki=null,zi=0,_i}function EE(){for(;ci!==null;)c1(ci)}function kE(){for(;ci!==null&&!QS();)c1(ci)}function c1(e){var t=d1(e.alternate,e,Os);e.memoizedProps=e.pendingProps,t===null?l1(e):ci=t,Lg.current=null}function l1(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=yE(r,t),r!==null){r.flags&=32767,ci=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_i=6,ci=null;return}}else if(r=vE(r,t,Os),r!==null){ci=r;return}if(t=t.sibling,t!==null){ci=t;return}ci=t=e}while(t!==null);_i===0&&(_i=5)}function Go(e,t,r){var n=cn,i=Js.transition;try{Js.transition=null,cn=1,CE(e,t,r,n)}finally{Js.transition=i,cn=n}return null}function CE(e,t,r,n){do rl();while(vo!==null);if(Qr&6)throw Error(ft(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(ft(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(aR(e,a),e===ki&&(ci=ki=null,zi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Zd||(Zd=!0,p1(Op,function(){return rl(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=Js.transition,Js.transition=null;var y=cn;cn=1;var C=Qr;Qr|=4,Lg.current=null,wE(e,r),n1(r,e),qR(om),Ip=!!am,om=am=null,e.current=r,bE(r),YS(),Qr=C,cn=y,Js.transition=a}else e.current=r;if(Zd&&(Zd=!1,vo=e,Gp=i),a=e.pendingLanes,a===0&&(Co=null),eR(r.stateNode),ys(e,Jn()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Kp)throw Kp=!1,e=Pm,Pm=null,e;return Gp&1&&e.tag!==0&&rl(),a=e.pendingLanes,a&1?e===Tm?Cu++:(Cu=0,Tm=e):Cu=0,Ao(),null}function rl(){if(vo!==null){var e=W_(Gp),t=Js.transition,r=cn;try{if(Js.transition=null,cn=16>e?16:e,vo===null)var n=!1;else{if(e=vo,vo=null,Gp=0,Qr&6)throw Error(ft(331));var i=Qr;for(Qr|=4,$t=e.current;$t!==null;){var a=$t,y=a.child;if($t.flags&16){var C=a.deletions;if(C!==null){for(var p=0;p<C.length;p++){var o=C[p];for($t=o;$t!==null;){var E=$t;switch(E.tag){case 0:case 11:case 15:Eu(8,E,a)}var _=E.child;if(_!==null)_.return=E,$t=_;else for(;$t!==null;){E=$t;var h=E.sibling,w=E.return;if(e1(E),E===o){$t=null;break}if(h!==null){h.return=w,$t=h;break}$t=w}}}var k=a.alternate;if(k!==null){var f=k.child;if(f!==null){k.child=null;do{var g=f.sibling;f.sibling=null,f=g}while(f!==null)}}$t=a}}if(a.subtreeFlags&2064&&y!==null)y.return=a,$t=y;else e:for(;$t!==null;){if(a=$t,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Eu(9,a,a.return)}var s=a.sibling;if(s!==null){s.return=a.return,$t=s;break e}$t=a.return}}var b=e.current;for($t=b;$t!==null;){y=$t;var S=y.child;if(y.subtreeFlags&2064&&S!==null)S.return=y,$t=S;else e:for(y=b;$t!==null;){if(C=$t,C.flags&2048)try{switch(C.tag){case 0:case 11:case 15:vh(9,C)}}catch(x){Un(C,C.return,x)}if(C===y){$t=null;break e}var T=C.sibling;if(T!==null){T.return=C.return,$t=T;break e}$t=C.return}}if(Qr=i,Ao(),wa&&typeof wa.onPostCommitFiberRoot=="function")try{wa.onPostCommitFiberRoot(lh,e)}catch{}n=!0}return n}finally{cn=r,Js.transition=t}}return!1}function q0(e,t,r){t=pl(r,t),t=Ww(e,t,1),e=ko(e,t,1),t=as(),e!==null&&(Qu(e,1,t),ys(e,t))}function Un(e,t,r){if(e.tag===3)q0(e,e,r);else for(;t!==null;){if(t.tag===3){q0(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Co===null||!Co.has(n))){e=pl(r,e),e=Vw(t,e,1),t=ko(t,e,1),e=as(),t!==null&&(Qu(t,1,e),ys(t,e));break}}t=t.return}}function PE(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=as(),e.pingedLanes|=e.suspendedLanes&r,ki===e&&(zi&r)===r&&(_i===4||_i===3&&(zi&130023424)===zi&&500>Jn()-jg?tc(e,0):Ng|=r),ys(e,t)}function u1(e,t){t===0&&(e.mode&1?(t=Wd,Wd<<=1,!(Wd&130023424)&&(Wd=4194304)):t=1);var r=as();e=Ha(e,t),e!==null&&(Qu(e,t,r),ys(e,r))}function TE(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),u1(e,r)}function xE(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(ft(314))}n!==null&&n.delete(t),u1(e,r)}var d1;d1=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||gs.current)ms=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return ms=!1,gE(e,t,r);ms=!!(e.flags&131072)}else ms=!1,xn&&t.flags&1048576&&mw(t,Fp,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;hp(e,t),e=t.pendingProps;var i=cl(t,Xi.current);tl(t,r),i=Og(null,t,n,e,i,r);var a=Dg();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vs(n)?(a=!0,jp(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,kg(t),i.updater=gh,t.stateNode=i,i._reactInternals=t,gm(t,n,e,r),t=_m(null,t,n,!0,a,r)):(t.tag=0,xn&&a&&yg(t),ss(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(hp(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=DE(n),e=ia(n,e),i){case 0:t=ym(null,t,n,e,r);break e;case 1:t=N0(null,t,n,e,r);break e;case 11:t=A0(null,t,n,e,r);break e;case 14:t=L0(null,t,n,ia(n.type,e),r);break e}throw Error(ft(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ia(n,i),ym(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ia(n,i),N0(e,t,n,i,r);case 3:e:{if(Gw(t),e===null)throw Error(ft(387));n=t.pendingProps,a=t.memoizedState,i=a.element,bw(e,t),Hp(t,n,null,r);var y=t.memoizedState;if(n=y.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:y.cache,pendingSuspenseBoundaries:y.pendingSuspenseBoundaries,transitions:y.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=pl(Error(ft(423)),t),t=j0(e,t,n,r,i);break e}else if(n!==i){i=pl(Error(ft(424)),t),t=j0(e,t,n,r,i);break e}else for(Is=Eo(t.stateNode.containerInfo.firstChild),Ms=t,xn=!0,ca=null,r=_w(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ll(),n===i){t=Wa(e,t,r);break e}ss(e,t,n,r)}t=t.child}return t;case 5:return Sw(t),e===null&&hm(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,y=i.children,cm(n,i)?y=null:a!==null&&cm(n,a)&&(t.flags|=32),Kw(e,t),ss(e,t,y,r),t.child;case 6:return e===null&&hm(t),null;case 13:return Jw(e,t,r);case 4:return Cg(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ul(t,null,n,r):ss(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ia(n,i),A0(e,t,n,i,r);case 7:return ss(e,t,t.pendingProps,r),t.child;case 8:return ss(e,t,t.pendingProps.children,r),t.child;case 12:return ss(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,y=i.value,vn(Up,n._currentValue),n._currentValue=y,a!==null)if(da(a.value,y)){if(a.children===i.children&&!gs.current){t=Wa(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var C=a.dependencies;if(C!==null){y=a.child;for(var p=C.firstContext;p!==null;){if(p.context===n){if(a.tag===1){p=ja(-1,r&-r),p.tag=2;var o=a.updateQueue;if(o!==null){o=o.shared;var E=o.pending;E===null?p.next=p:(p.next=E.next,E.next=p),o.pending=p}}a.lanes|=r,p=a.alternate,p!==null&&(p.lanes|=r),fm(a.return,r,t),C.lanes|=r;break}p=p.next}}else if(a.tag===10)y=a.type===t.type?null:a.child;else if(a.tag===18){if(y=a.return,y===null)throw Error(ft(341));y.lanes|=r,C=y.alternate,C!==null&&(C.lanes|=r),fm(y,r,t),y=a.sibling}else y=a.child;if(y!==null)y.return=a;else for(y=a;y!==null;){if(y===t){y=null;break}if(a=y.sibling,a!==null){a.return=y.return,y=a;break}y=y.return}a=y}ss(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,tl(t,r),i=Qs(i),n=n(i),t.flags|=1,ss(e,t,n,r),t.child;case 14:return n=t.type,i=ia(n,t.pendingProps),i=ia(n.type,i),L0(e,t,n,i,r);case 15:return $w(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:ia(n,i),hp(e,t),t.tag=1,vs(n)?(e=!0,jp(t)):e=!1,tl(t,r),Hw(t,n,i),gm(t,n,i,r),_m(null,t,n,!0,e,r);case 19:return Qw(e,t,r);case 22:return qw(e,t,r)}throw Error(ft(156,t.tag))};function p1(e,t){return F_(e,t)}function OE(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gs(e,t,r,n){return new OE(e,t,r,n)}function zg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function DE(e){if(typeof e=="function")return zg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ag)return 11;if(e===og)return 14}return 2}function To(e,t){var r=e.alternate;return r===null?(r=Gs(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function gp(e,t,r,n,i,a){var y=2;if(n=e,typeof e=="function")zg(e)&&(y=1);else if(typeof e=="string")y=5;else e:switch(e){case Fc:return rc(r.children,i,a,t);case sg:y=8,i|=8;break;case Uf:return e=Gs(12,r,t,i|2),e.elementType=Uf,e.lanes=a,e;case zf:return e=Gs(13,r,t,i),e.elementType=zf,e.lanes=a,e;case Hf:return e=Gs(19,r,t,i),e.elementType=Hf,e.lanes=a,e;case S_:return _h(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case w_:y=10;break e;case b_:y=9;break e;case ag:y=11;break e;case og:y=14;break e;case po:y=16,n=null;break e}throw Error(ft(130,e==null?e:typeof e,""))}return t=Gs(y,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function rc(e,t,r,n){return e=Gs(7,e,n,t),e.lanes=r,e}function _h(e,t,r,n){return e=Gs(22,e,n,t),e.elementType=S_,e.lanes=r,e.stateNode={isHidden:!1},e}function bf(e,t,r){return e=Gs(6,e,null,t),e.lanes=r,e}function Sf(e,t,r){return t=Gs(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function IE(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tf(0),this.expirationTimes=tf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tf(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Hg(e,t,r,n,i,a,y,C,p){return e=new IE(e,t,r,C,p),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Gs(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},kg(a),e}function ME(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bc,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function h1(e){if(!e)return Do;e=e._reactInternals;e:{if(mc(e)!==e||e.tag!==1)throw Error(ft(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ft(171))}if(e.tag===1){var r=e.type;if(vs(r))return hw(e,r,t)}return t}function f1(e,t,r,n,i,a,y,C,p){return e=Hg(r,n,!0,e,i,a,y,C,p),e.context=h1(null),r=e.current,n=as(),i=Po(r),a=ja(n,i),a.callback=t??null,ko(r,a,i),e.current.lanes=i,Qu(e,i,n),ys(e,n),e}function wh(e,t,r,n){var i=t.current,a=as(),y=Po(i);return r=h1(r),t.context===null?t.context=r:t.pendingContext=r,t=ja(a,y),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ko(i,t,y),e!==null&&(ua(e,i,y,a),up(e,i,y)),y}function Qp(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function K0(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Wg(e,t){K0(e,t),(e=e.alternate)&&K0(e,t)}function AE(){return null}var m1=typeof reportError=="function"?reportError:function(e){console.error(e)};function Vg(e){this._internalRoot=e}bh.prototype.render=Vg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ft(409));wh(e,t,null,null)};bh.prototype.unmount=Vg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lc(function(){wh(null,e,null,null)}),t[za]=null}};function bh(e){this._internalRoot=e}bh.prototype.unstable_scheduleHydration=function(e){if(e){var t=q_();e={blockedOn:null,target:e,priority:t};for(var r=0;r<fo.length&&t!==0&&t<fo[r].priority;r++);fo.splice(r,0,e),r===0&&G_(e)}};function $g(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Sh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function G0(){}function LE(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var o=Qp(y);a.call(o)}}var y=f1(t,n,e,0,null,!1,!1,"",G0);return e._reactRootContainer=y,e[za]=y.current,Lu(e.nodeType===8?e.parentNode:e),lc(),y}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var C=n;n=function(){var o=Qp(p);C.call(o)}}var p=Hg(e,0,!1,null,null,!1,!1,"",G0);return e._reactRootContainer=p,e[za]=p.current,Lu(e.nodeType===8?e.parentNode:e),lc(function(){wh(t,p,r,n)}),p}function Rh(e,t,r,n,i){var a=r._reactRootContainer;if(a){var y=a;if(typeof i=="function"){var C=i;i=function(){var p=Qp(y);C.call(p)}}wh(t,y,e,i)}else y=LE(r,t,e,i,n);return Qp(y)}V_=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=hu(t.pendingLanes);r!==0&&(ug(t,r|1),ys(t,Jn()),!(Qr&6)&&(hl=Jn()+500,Ao()))}break;case 13:lc(function(){var n=Ha(e,1);if(n!==null){var i=as();ua(n,e,1,i)}}),Wg(e,1)}};dg=function(e){if(e.tag===13){var t=Ha(e,134217728);if(t!==null){var r=as();ua(t,e,134217728,r)}Wg(e,134217728)}};$_=function(e){if(e.tag===13){var t=Po(e),r=Ha(e,t);if(r!==null){var n=as();ua(r,e,t,n)}Wg(e,t)}};q_=function(){return cn};K_=function(e,t){var r=cn;try{return cn=e,t()}finally{cn=r}};Xf=function(e,t,r){switch(t){case"input":if($f(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=hh(n);if(!i)throw Error(ft(90));E_(n),$f(n,i)}}}break;case"textarea":C_(e,r);break;case"select":t=r.value,t!=null&&Yc(e,!!r.multiple,t,!1)}};M_=Bg;A_=lc;var NE={usingClientEntryPoint:!1,Events:[Xu,Wc,hh,D_,I_,Bg]},nu={findFiberByHostInstance:Qo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jE={bundleType:nu.bundleType,version:nu.version,rendererPackageName:nu.rendererPackageName,rendererConfig:nu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Va.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=j_(e),e===null?null:e.stateNode},findFiberByHostInstance:nu.findFiberByHostInstance||AE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ep=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ep.isDisabled&&ep.supportsFiber)try{lh=ep.inject(jE),wa=ep}catch{}}js.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=NE;js.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$g(t))throw Error(ft(200));return ME(e,t,null,r)};js.createRoot=function(e,t){if(!$g(e))throw Error(ft(299));var r=!1,n="",i=m1;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Hg(e,1,!1,null,null,r,!1,n,i),e[za]=t.current,Lu(e.nodeType===8?e.parentNode:e),new Vg(t)};js.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ft(188)):(e=Object.keys(e).join(","),Error(ft(268,e)));return e=j_(t),e=e===null?null:e.stateNode,e};js.flushSync=function(e){return lc(e)};js.hydrate=function(e,t,r){if(!Sh(t))throw Error(ft(200));return Rh(null,e,t,!0,r)};js.hydrateRoot=function(e,t,r){if(!$g(e))throw Error(ft(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",y=m1;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(y=r.onRecoverableError)),t=f1(t,null,e,1,r??null,i,!1,a,y),e[za]=t.current,Lu(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new bh(t)};js.render=function(e,t,r){if(!Sh(t))throw Error(ft(200));return Rh(null,e,t,!1,r)};js.unmountComponentAtNode=function(e){if(!Sh(e))throw Error(ft(40));return e._reactRootContainer?(lc(function(){Rh(null,null,e,!1,function(){e._reactRootContainer=null,e[za]=null})}),!0):!1};js.unstable_batchedUpdates=Bg;js.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Sh(r))throw Error(ft(200));if(e==null||e._reactInternals===void 0)throw Error(ft(38));return Rh(e,t,r,!1,n)};js.version="18.3.1-next-f1338f8080-20240426";function g1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g1)}catch(e){console.error(e)}}g1(),g_.exports=js;var qg=g_.exports;const BE=oh(qg),FE=n_({__proto__:null,default:BE},[qg]);var v1,J0=qg;v1=J0.createRoot,J0.hydrateRoot;/**
 * @remix-run/router v1.19.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function In(){return In=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},In.apply(this,arguments)}var oi;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(oi||(oi={}));const Q0="popstate";function UE(e){e===void 0&&(e={});function t(n,i){let{pathname:a,search:y,hash:C}=n.location;return Vu("",{pathname:a,search:y,hash:C},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:uc(i)}return HE(t,r,null,e)}function Hr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function fl(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function zE(){return Math.random().toString(36).substr(2,8)}function Y0(e,t){return{usr:e.state,key:e.key,idx:t}}function Vu(e,t,r,n){return r===void 0&&(r=null),In({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Lo(t):t,{state:r,key:t&&t.key||n||zE()})}function uc(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Lo(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function HE(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,y=i.history,C=oi.Pop,p=null,o=E();o==null&&(o=0,y.replaceState(In({},y.state,{idx:o}),""));function E(){return(y.state||{idx:null}).idx}function _(){C=oi.Pop;let g=E(),s=g==null?null:g-o;o=g,p&&p({action:C,location:f.location,delta:s})}function h(g,s){C=oi.Push;let b=Vu(f.location,g,s);o=E()+1;let S=Y0(b,o),T=f.createHref(b);try{y.pushState(S,"",T)}catch(x){if(x instanceof DOMException&&x.name==="DataCloneError")throw x;i.location.assign(T)}a&&p&&p({action:C,location:f.location,delta:1})}function w(g,s){C=oi.Replace;let b=Vu(f.location,g,s);o=E();let S=Y0(b,o),T=f.createHref(b);y.replaceState(S,"",T),a&&p&&p({action:C,location:f.location,delta:0})}function k(g){let s=i.location.origin!=="null"?i.location.origin:i.location.href,b=typeof g=="string"?g:uc(g);return b=b.replace(/ $/,"%20"),Hr(s,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,s)}let f={get action(){return C},get location(){return e(i,y)},listen(g){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(Q0,_),p=g,()=>{i.removeEventListener(Q0,_),p=null}},createHref(g){return t(i,g)},createURL:k,encodeLocation(g){let s=k(g);return{pathname:s.pathname,search:s.search,hash:s.hash}},push:h,replace:w,go(g){return y.go(g)}};return f}var pn;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(pn||(pn={}));const WE=new Set(["lazy","caseSensitive","path","id","index","children"]);function VE(e){return e.index===!0}function $u(e,t,r,n){return r===void 0&&(r=[]),n===void 0&&(n={}),e.map((i,a)=>{let y=[...r,String(a)],C=typeof i.id=="string"?i.id:y.join("-");if(Hr(i.index!==!0||!i.children,"Cannot specify children on an index route"),Hr(!n[C],'Found a route id collision on id "'+C+`".  Route id's must be globally unique within Data Router usages`),VE(i)){let p=In({},i,t(i),{id:C});return n[C]=p,p}else{let p=In({},i,t(i),{id:C,children:void 0});return n[C]=p,i.children&&(p.children=$u(i.children,t,y,n)),p}})}function Jo(e,t,r){return r===void 0&&(r="/"),vp(e,t,r,!1)}function vp(e,t,r,n){let i=typeof t=="string"?Lo(t):t,a=bl(i.pathname||"/",r);if(a==null)return null;let y=y1(e);qE(y);let C=null;for(let p=0;C==null&&p<y.length;++p){let o=nk(a);C=tk(y[p],o,n)}return C}function $E(e,t){let{route:r,pathname:n,params:i}=e;return{id:r.id,pathname:n,params:i,data:t[r.id],handle:r.handle}}function y1(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,y,C)=>{let p={relativePath:C===void 0?a.path||"":C,caseSensitive:a.caseSensitive===!0,childrenIndex:y,route:a};p.relativePath.startsWith("/")&&(Hr(p.relativePath.startsWith(n),'Absolute route path "'+p.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),p.relativePath=p.relativePath.slice(n.length));let o=Ba([n,p.relativePath]),E=r.concat(p);a.children&&a.children.length>0&&(Hr(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+o+'".')),y1(a.children,t,E,o)),!(a.path==null&&!a.index)&&t.push({path:o,score:ZE(o,a.index),routesMeta:E})};return e.forEach((a,y)=>{var C;if(a.path===""||!((C=a.path)!=null&&C.includes("?")))i(a,y);else for(let p of _1(a.path))i(a,y,p)}),t}function _1(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let y=_1(n.join("/")),C=[];return C.push(...y.map(p=>p===""?a:[a,p].join("/"))),i&&C.push(...y),C.map(p=>e.startsWith("/")&&p===""?"/":p)}function qE(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:ek(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const KE=/^:[\w-]+$/,GE=3,JE=2,QE=1,YE=10,XE=-2,X0=e=>e==="*";function ZE(e,t){let r=e.split("/"),n=r.length;return r.some(X0)&&(n+=XE),t&&(n+=JE),r.filter(i=>!X0(i)).reduce((i,a)=>i+(KE.test(a)?GE:a===""?QE:YE),n)}function ek(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function tk(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,i={},a="/",y=[];for(let C=0;C<n.length;++C){let p=n[C],o=C===n.length-1,E=a==="/"?t:t.slice(a.length)||"/",_=Z0({path:p.relativePath,caseSensitive:p.caseSensitive,end:o},E),h=p.route;if(!_&&o&&r&&!n[n.length-1].route.index&&(_=Z0({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},E)),!_)return null;Object.assign(i,_.params),y.push({params:i,pathname:Ba([a,_.pathname]),pathnameBase:ak(Ba([a,_.pathnameBase])),route:h}),_.pathnameBase!=="/"&&(a=Ba([a,_.pathnameBase]))}return y}function Z0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=rk(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],y=a.replace(/(.)\/+$/,"$1"),C=i.slice(1);return{params:n.reduce((o,E,_)=>{let{paramName:h,isOptional:w}=E;if(h==="*"){let f=C[_]||"";y=a.slice(0,a.length-f.length).replace(/(.)\/+$/,"$1")}const k=C[_];return w&&!k?o[h]=void 0:o[h]=(k||"").replace(/%2F/g,"/"),o},{}),pathname:a,pathnameBase:y,pattern:e}}function rk(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),fl(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(y,C,p)=>(n.push({paramName:C,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function nk(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return fl(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function bl(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function ik(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Lo(e):e;return{pathname:r?r.startsWith("/")?r:sk(r,t):t,search:ok(n),hash:ck(i)}}function sk(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function Rf(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function w1(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Kg(e,t){let r=w1(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Gg(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=Lo(e):(i=In({},e),Hr(!i.pathname||!i.pathname.includes("?"),Rf("?","pathname","search",i)),Hr(!i.pathname||!i.pathname.includes("#"),Rf("#","pathname","hash",i)),Hr(!i.search||!i.search.includes("#"),Rf("#","search","hash",i)));let a=e===""||i.pathname==="",y=a?"/":i.pathname,C;if(y==null)C=r;else{let _=t.length-1;if(!n&&y.startsWith("..")){let h=y.split("/");for(;h[0]==="..";)h.shift(),_-=1;i.pathname=h.join("/")}C=_>=0?t[_]:"/"}let p=ik(i,C),o=y&&y!=="/"&&y.endsWith("/"),E=(a||y===".")&&r.endsWith("/");return!p.pathname.endsWith("/")&&(o||E)&&(p.pathname+="/"),p}const Ba=e=>e.join("/").replace(/\/\/+/g,"/"),ak=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ok=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ck=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class Yp{constructor(t,r,n,i){i===void 0&&(i=!1),this.status=t,this.statusText=r||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}}function Eh(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const b1=["post","put","patch","delete"],lk=new Set(b1),uk=["get",...b1],dk=new Set(uk),pk=new Set([301,302,303,307,308]),hk=new Set([307,308]),Ef={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},fk={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},iu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Jg=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mk=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),S1="remix-router-transitions";function gk(e){const t=e.window?e.window:typeof window<"u"?window:void 0,r=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",n=!r;Hr(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(e.mapRouteProperties)i=e.mapRouteProperties;else if(e.detectErrorBoundary){let ie=e.detectErrorBoundary;i=G=>({hasErrorBoundary:ie(G)})}else i=mk;let a={},y=$u(e.routes,i,void 0,a),C,p=e.basename||"/",o=e.unstable_dataStrategy||Sk,E=e.unstable_patchRoutesOnNavigation,_=In({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),h=null,w=new Set,k=1e3,f=new Set,g=null,s=null,b=null,S=e.hydrationData!=null,T=Jo(y,e.history.location,p),x=null;if(T==null&&!E){let ie=is(404,{pathname:e.history.location.pathname}),{matches:G,route:ue}=cy(y);T=G,x={[ue.id]:ie}}T&&!e.hydrationData&&De(T,y,e.history.location.pathname).active&&(T=null);let O;if(T)if(T.some(ie=>ie.route.lazy))O=!1;else if(!T.some(ie=>ie.route.loader))O=!0;else if(_.v7_partialHydration){let ie=e.hydrationData?e.hydrationData.loaderData:null,G=e.hydrationData?e.hydrationData.errors:null,ue=Ee=>Ee.route.loader?typeof Ee.route.loader=="function"&&Ee.route.loader.hydrate===!0?!1:ie&&ie[Ee.route.id]!==void 0||G&&G[Ee.route.id]!==void 0:!0;if(G){let Ee=T.findIndex(Ne=>G[Ne.route.id]!==void 0);O=T.slice(0,Ee+1).every(ue)}else O=T.every(ue)}else O=e.hydrationData!=null;else if(O=!1,T=[],_.v7_partialHydration){let ie=De(null,y,e.history.location.pathname);ie.active&&ie.matches&&(T=ie.matches)}let P,R={historyAction:e.history.action,location:e.history.location,matches:T,initialized:O,navigation:Ef,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||x,fetchers:new Map,blockers:new Map},I=oi.Pop,d=!1,v,c=!1,u=new Map,l=null,m=!1,D=!1,N=[],L=new Set,j=new Map,W=0,$=-1,Z=new Map,ne=new Set,de=new Map,ge=new Map,_e=new Set,Me=new Map,fe=new Map,oe=new Map,ve;function we(){if(h=e.history.listen(ie=>{let{action:G,location:ue,delta:Ee}=ie;if(ve){ve(),ve=void 0;return}fl(fe.size===0||Ee!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Ne=ls({currentLocation:R.location,nextLocation:ue,historyAction:G});if(Ne&&Ee!=null){let dt=new Promise(Tt=>{ve=Tt});e.history.go(Ee*-1),hi(Ne,{state:"blocked",location:ue,proceed(){hi(Ne,{state:"proceeding",proceed:void 0,reset:void 0,location:ue}),dt.then(()=>e.history.go(Ee))},reset(){let Tt=new Map(R.blockers);Tt.set(Ne,iu),xt({blockers:Tt})}});return}return Qt(G,ue)}),r){jk(t,u);let ie=()=>Bk(t,u);t.addEventListener("pagehide",ie),l=()=>t.removeEventListener("pagehide",ie)}return R.initialized||Qt(oi.Pop,R.location,{initialHydration:!0}),P}function be(){h&&h(),l&&l(),w.clear(),v&&v.abort(),R.fetchers.forEach((ie,G)=>ot(G)),R.blockers.forEach((ie,G)=>Pi(G))}function ht(ie){return w.add(ie),()=>w.delete(ie)}function xt(ie,G){G===void 0&&(G={}),R=In({},R,ie);let ue=[],Ee=[];_.v7_fetcherPersist&&R.fetchers.forEach((Ne,dt)=>{Ne.state==="idle"&&(_e.has(dt)?Ee.push(dt):ue.push(dt))}),[...w].forEach(Ne=>Ne(R,{deletedFetchers:Ee,unstable_viewTransitionOpts:G.viewTransitionOpts,unstable_flushSync:G.flushSync===!0})),_.v7_fetcherPersist&&(ue.forEach(Ne=>R.fetchers.delete(Ne)),Ee.forEach(Ne=>ot(Ne)))}function Jt(ie,G,ue){var Ee,Ne;let{flushSync:dt}=ue===void 0?{}:ue,Tt=R.actionData!=null&&R.navigation.formMethod!=null&&aa(R.navigation.formMethod)&&R.navigation.state==="loading"&&((Ee=ie.state)==null?void 0:Ee._isRedirect)!==!0,$e;G.actionData?Object.keys(G.actionData).length>0?$e=G.actionData:$e=null:Tt?$e=R.actionData:$e=null;let nt=G.loaderData?ay(R.loaderData,G.loaderData,G.matches||[],G.errors):R.loaderData,et=R.blockers;et.size>0&&(et=new Map(et),et.forEach((ke,Cr)=>et.set(Cr,iu)));let kt=d===!0||R.navigation.formMethod!=null&&aa(R.navigation.formMethod)&&((Ne=ie.state)==null?void 0:Ne._isRedirect)!==!0;C&&(y=C,C=void 0),m||I===oi.Pop||(I===oi.Push?e.history.push(ie,ie.state):I===oi.Replace&&e.history.replace(ie,ie.state));let Ht;if(I===oi.Pop){let ke=u.get(R.location.pathname);ke&&ke.has(ie.pathname)?Ht={currentLocation:R.location,nextLocation:ie}:u.has(ie.pathname)&&(Ht={currentLocation:ie,nextLocation:R.location})}else if(c){let ke=u.get(R.location.pathname);ke?ke.add(ie.pathname):(ke=new Set([ie.pathname]),u.set(R.location.pathname,ke)),Ht={currentLocation:R.location,nextLocation:ie}}xt(In({},G,{actionData:$e,loaderData:nt,historyAction:I,location:ie,initialized:!0,navigation:Ef,revalidation:"idle",restoreScrollPosition:Er(ie,G.matches||R.matches),preventScrollReset:kt,blockers:et}),{viewTransitionOpts:Ht,flushSync:dt===!0}),I=oi.Pop,d=!1,c=!1,m=!1,D=!1,N=[]}async function St(ie,G){if(typeof ie=="number"){e.history.go(ie);return}let ue=Dm(R.location,R.matches,p,_.v7_prependBasename,ie,_.v7_relativeSplatPath,G==null?void 0:G.fromRouteId,G==null?void 0:G.relative),{path:Ee,submission:Ne,error:dt}=ey(_.v7_normalizeFormMethod,!1,ue,G),Tt=R.location,$e=Vu(R.location,Ee,G&&G.state);$e=In({},$e,e.history.encodeLocation($e));let nt=G&&G.replace!=null?G.replace:void 0,et=oi.Push;nt===!0?et=oi.Replace:nt===!1||Ne!=null&&aa(Ne.formMethod)&&Ne.formAction===R.location.pathname+R.location.search&&(et=oi.Replace);let kt=G&&"preventScrollReset"in G?G.preventScrollReset===!0:void 0,Ht=(G&&G.unstable_flushSync)===!0,ke=ls({currentLocation:Tt,nextLocation:$e,historyAction:et});if(ke){hi(ke,{state:"blocked",location:$e,proceed(){hi(ke,{state:"proceeding",proceed:void 0,reset:void 0,location:$e}),St(ie,G)},reset(){let Cr=new Map(R.blockers);Cr.set(ke,iu),xt({blockers:Cr})}});return}return await Qt(et,$e,{submission:Ne,pendingError:dt,preventScrollReset:kt,replace:G&&G.replace,enableViewTransition:G&&G.unstable_viewTransition,flushSync:Ht})}function Pr(){if(Rr(),xt({revalidation:"loading"}),R.navigation.state!=="submitting"){if(R.navigation.state==="idle"){Qt(R.historyAction,R.location,{startUninterruptedRevalidation:!0});return}Qt(I||R.historyAction,R.navigation.location,{overrideNavigation:R.navigation,enableViewTransition:c===!0})}}async function Qt(ie,G,ue){v&&v.abort(),v=null,I=ie,m=(ue&&ue.startUninterruptedRevalidation)===!0,Ue(R.location,R.matches),d=(ue&&ue.preventScrollReset)===!0,c=(ue&&ue.enableViewTransition)===!0;let Ee=C||y,Ne=ue&&ue.overrideNavigation,dt=Jo(Ee,G,p),Tt=(ue&&ue.flushSync)===!0,$e=De(dt,Ee,G.pathname);if($e.active&&$e.matches&&(dt=$e.matches),!dt){let{error:kr,notFoundMatches:Zr,route:en}=Wi(G.pathname);Jt(G,{matches:Zr,loaderData:{},errors:{[en.id]:kr}},{flushSync:Tt});return}if(R.initialized&&!D&&Tk(R.location,G)&&!(ue&&ue.submission&&aa(ue.submission.formMethod))){Jt(G,{matches:dt},{flushSync:Tt});return}v=new AbortController;let nt=Mc(e.history,G,v.signal,ue&&ue.submission),et;if(ue&&ue.pendingError)et=[Qc(dt).route.id,{type:pn.error,error:ue.pendingError}];else if(ue&&ue.submission&&aa(ue.submission.formMethod)){let kr=await It(nt,G,ue.submission,dt,$e.active,{replace:ue.replace,flushSync:Tt});if(kr.shortCircuited)return;if(kr.pendingActionResult){let[Zr,en]=kr.pendingActionResult;if(Ds(en)&&Eh(en.error)&&en.error.status===404){v=null,Jt(G,{matches:kr.matches,loaderData:{},errors:{[Zr]:en.error}});return}}dt=kr.matches||dt,et=kr.pendingActionResult,Ne=kf(G,ue.submission),Tt=!1,$e.active=!1,nt=Mc(e.history,nt.url,nt.signal)}let{shortCircuited:kt,matches:Ht,loaderData:ke,errors:Cr}=await jr(nt,G,dt,$e.active,Ne,ue&&ue.submission,ue&&ue.fetcherSubmission,ue&&ue.replace,ue&&ue.initialHydration===!0,Tt,et);kt||(v=null,Jt(G,In({matches:Ht||dt},oy(et),{loaderData:ke,errors:Cr})))}async function It(ie,G,ue,Ee,Ne,dt){dt===void 0&&(dt={}),Rr();let Tt=Lk(G,ue);if(xt({navigation:Tt},{flushSync:dt.flushSync===!0}),Ne){let et=await dr(Ee,G.pathname,ie.signal);if(et.type==="aborted")return{shortCircuited:!0};if(et.type==="error"){let{boundaryId:kt,error:Ht}=At(G.pathname,et);return{matches:et.partialMatches,pendingActionResult:[kt,{type:pn.error,error:Ht}]}}else if(et.matches)Ee=et.matches;else{let{notFoundMatches:kt,error:Ht,route:ke}=Wi(G.pathname);return{matches:kt,pendingActionResult:[ke.id,{type:pn.error,error:Ht}]}}}let $e,nt=mu(Ee,G);if(!nt.route.action&&!nt.route.lazy)$e={type:pn.error,error:is(405,{method:ie.method,pathname:G.pathname,routeId:nt.route.id})};else if($e=(await sr("action",R,ie,[nt],Ee,null))[nt.route.id],ie.signal.aborted)return{shortCircuited:!0};if(Zo($e)){let et;return dt&&dt.replace!=null?et=dt.replace:et=ny($e.response.headers.get("Location"),new URL(ie.url),p)===R.location.pathname+R.location.search,await Zt(ie,$e,!0,{submission:ue,replace:et}),{shortCircuited:!0}}if(yo($e))throw is(400,{type:"defer-action"});if(Ds($e)){let et=Qc(Ee,nt.route.id);return(dt&&dt.replace)!==!0&&(I=oi.Push),{matches:Ee,pendingActionResult:[et.route.id,$e]}}return{matches:Ee,pendingActionResult:[nt.route.id,$e]}}async function jr(ie,G,ue,Ee,Ne,dt,Tt,$e,nt,et,kt){let Ht=Ne||kf(G,dt),ke=dt||Tt||uy(Ht),Cr=!m&&(!_.v7_partialHydration||!nt);if(Ee){if(Cr){let Vt=Nt(kt);xt(In({navigation:Ht},Vt!==void 0?{actionData:Vt}:{}),{flushSync:et})}let ct=await dr(ue,G.pathname,ie.signal);if(ct.type==="aborted")return{shortCircuited:!0};if(ct.type==="error"){let{boundaryId:Vt,error:Kt}=At(G.pathname,ct);return{matches:ct.partialMatches,loaderData:{},errors:{[Vt]:Kt}}}else if(ct.matches)ue=ct.matches;else{let{error:Vt,notFoundMatches:Kt,route:Rt}=Wi(G.pathname);return{matches:Kt,loaderData:{},errors:{[Rt.id]:Vt}}}}let kr=C||y,[Zr,en]=ty(e.history,R,ue,ke,G,_.v7_partialHydration&&nt===!0,_.v7_skipActionErrorRevalidation,D,N,L,_e,de,ne,kr,p,kt);if(We(ct=>!(ue&&ue.some(Vt=>Vt.route.id===ct))||Zr&&Zr.some(Vt=>Vt.route.id===ct)),$=++W,Zr.length===0&&en.length===0){let ct=di();return Jt(G,In({matches:ue,loaderData:{},errors:kt&&Ds(kt[1])?{[kt[0]]:kt[1].error}:null},oy(kt),ct?{fetchers:new Map(R.fetchers)}:{}),{flushSync:et}),{shortCircuited:!0}}if(Cr){let ct={};if(!Ee){ct.navigation=Ht;let Vt=Nt(kt);Vt!==void 0&&(ct.actionData=Vt)}en.length>0&&(ct.fetchers=Xt(en)),xt(ct,{flushSync:et})}en.forEach(ct=>{j.has(ct.key)&&br(ct.key),ct.controller&&j.set(ct.key,ct.controller)});let us=()=>en.forEach(ct=>br(ct.key));v&&v.signal.addEventListener("abort",us);let{loaderResults:Ti,fetcherResults:Pe}=await Ve(R,ue,Zr,en,ie);if(ie.signal.aborted)return{shortCircuited:!0};v&&v.signal.removeEventListener("abort",us),en.forEach(ct=>j.delete(ct.key));let Vi=tp(Ti);if(Vi)return await Zt(ie,Vi.result,!0,{replace:$e}),{shortCircuited:!0};if(Vi=tp(Pe),Vi)return ne.add(Vi.key),await Zt(ie,Vi.result,!0,{replace:$e}),{shortCircuited:!0};let{loaderData:Se,errors:Fe}=sy(R,ue,Zr,Ti,kt,en,Pe,Me);Me.forEach((ct,Vt)=>{ct.subscribe(Kt=>{(Kt||ct.done)&&Me.delete(Vt)})}),_.v7_partialHydration&&nt&&R.errors&&Object.entries(R.errors).filter(ct=>{let[Vt]=ct;return!Zr.some(Kt=>Kt.route.id===Vt)}).forEach(ct=>{let[Vt,Kt]=ct;Fe=Object.assign(Fe||{},{[Vt]:Kt})});let He=di(),pt=Mt($),qt=He||pt||en.length>0;return In({matches:ue,loaderData:Se,errors:Fe},qt?{fetchers:new Map(R.fetchers)}:{})}function Nt(ie){if(ie&&!Ds(ie[1]))return{[ie[0]]:ie[1].data};if(R.actionData)return Object.keys(R.actionData).length===0?null:R.actionData}function Xt(ie){return ie.forEach(G=>{let ue=R.fetchers.get(G.key),Ee=su(void 0,ue?ue.data:void 0);R.fetchers.set(G.key,Ee)}),new Map(R.fetchers)}function Mr(ie,G,ue,Ee){if(n)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");j.has(ie)&&br(ie);let Ne=(Ee&&Ee.unstable_flushSync)===!0,dt=C||y,Tt=Dm(R.location,R.matches,p,_.v7_prependBasename,ue,_.v7_relativeSplatPath,G,Ee==null?void 0:Ee.relative),$e=Jo(dt,Tt,p),nt=De($e,dt,Tt);if(nt.active&&nt.matches&&($e=nt.matches),!$e){Ae(ie,G,is(404,{pathname:Tt}),{flushSync:Ne});return}let{path:et,submission:kt,error:Ht}=ey(_.v7_normalizeFormMethod,!0,Tt,Ee);if(Ht){Ae(ie,G,Ht,{flushSync:Ne});return}let ke=mu($e,et);if(d=(Ee&&Ee.preventScrollReset)===!0,kt&&aa(kt.formMethod)){Br(ie,G,et,ke,$e,nt.active,Ne,kt);return}de.set(ie,{routeId:G,path:et}),Fr(ie,G,et,ke,$e,nt.active,Ne,kt)}async function Br(ie,G,ue,Ee,Ne,dt,Tt,$e){Rr(),de.delete(ie);function nt(Rt){if(!Rt.route.action&&!Rt.route.lazy){let yr=is(405,{method:$e.formMethod,pathname:ue,routeId:G});return Ae(ie,G,yr,{flushSync:Tt}),!0}return!1}if(!dt&&nt(Ee))return;let et=R.fetchers.get(ie);wr(ie,Nk($e,et),{flushSync:Tt});let kt=new AbortController,Ht=Mc(e.history,ue,kt.signal,$e);if(dt){let Rt=await dr(Ne,ue,Ht.signal);if(Rt.type==="aborted")return;if(Rt.type==="error"){let{error:yr}=At(ue,Rt);Ae(ie,G,yr,{flushSync:Tt});return}else if(Rt.matches){if(Ne=Rt.matches,Ee=mu(Ne,ue),nt(Ee))return}else{Ae(ie,G,is(404,{pathname:ue}),{flushSync:Tt});return}}j.set(ie,kt);let ke=W,kr=(await sr("action",R,Ht,[Ee],Ne,ie))[Ee.route.id];if(Ht.signal.aborted){j.get(ie)===kt&&j.delete(ie);return}if(_.v7_fetcherPersist&&_e.has(ie)){if(Zo(kr)||Ds(kr)){wr(ie,uo(void 0));return}}else{if(Zo(kr))if(j.delete(ie),$>ke){wr(ie,uo(void 0));return}else return ne.add(ie),wr(ie,su($e)),Zt(Ht,kr,!1,{fetcherSubmission:$e});if(Ds(kr)){Ae(ie,G,kr.error);return}}if(yo(kr))throw is(400,{type:"defer-action"});let Zr=R.navigation.location||R.location,en=Mc(e.history,Zr,kt.signal),us=C||y,Ti=R.navigation.state!=="idle"?Jo(us,R.navigation.location,p):R.matches;Hr(Ti,"Didn't find any matches after fetcher action");let Pe=++W;Z.set(ie,Pe);let Vi=su($e,kr.data);R.fetchers.set(ie,Vi);let[Se,Fe]=ty(e.history,R,Ti,$e,Zr,!1,_.v7_skipActionErrorRevalidation,D,N,L,_e,de,ne,us,p,[Ee.route.id,kr]);Fe.filter(Rt=>Rt.key!==ie).forEach(Rt=>{let yr=Rt.key,Yt=R.fetchers.get(yr),mr=su(void 0,Yt?Yt.data:void 0);R.fetchers.set(yr,mr),j.has(yr)&&br(yr),Rt.controller&&j.set(yr,Rt.controller)}),xt({fetchers:new Map(R.fetchers)});let He=()=>Fe.forEach(Rt=>br(Rt.key));kt.signal.addEventListener("abort",He);let{loaderResults:pt,fetcherResults:qt}=await Ve(R,Ti,Se,Fe,en);if(kt.signal.aborted)return;kt.signal.removeEventListener("abort",He),Z.delete(ie),j.delete(ie),Fe.forEach(Rt=>j.delete(Rt.key));let ct=tp(pt);if(ct)return Zt(en,ct.result,!1);if(ct=tp(qt),ct)return ne.add(ct.key),Zt(en,ct.result,!1);let{loaderData:Vt,errors:Kt}=sy(R,Ti,Se,pt,void 0,Fe,qt,Me);if(R.fetchers.has(ie)){let Rt=uo(kr.data);R.fetchers.set(ie,Rt)}Mt(Pe),R.navigation.state==="loading"&&Pe>$?(Hr(I,"Expected pending action"),v&&v.abort(),Jt(R.navigation.location,{matches:Ti,loaderData:Vt,errors:Kt,fetchers:new Map(R.fetchers)})):(xt({errors:Kt,loaderData:ay(R.loaderData,Vt,Ti,Kt),fetchers:new Map(R.fetchers)}),D=!1)}async function Fr(ie,G,ue,Ee,Ne,dt,Tt,$e){let nt=R.fetchers.get(ie);wr(ie,su($e,nt?nt.data:void 0),{flushSync:Tt});let et=new AbortController,kt=Mc(e.history,ue,et.signal);if(dt){let kr=await dr(Ne,ue,kt.signal);if(kr.type==="aborted")return;if(kr.type==="error"){let{error:Zr}=At(ue,kr);Ae(ie,G,Zr,{flushSync:Tt});return}else if(kr.matches)Ne=kr.matches,Ee=mu(Ne,ue);else{Ae(ie,G,is(404,{pathname:ue}),{flushSync:Tt});return}}j.set(ie,et);let Ht=W,Cr=(await sr("loader",R,kt,[Ee],Ne,ie))[Ee.route.id];if(yo(Cr)&&(Cr=await Qg(Cr,kt.signal,!0)||Cr),j.get(ie)===et&&j.delete(ie),!kt.signal.aborted){if(_e.has(ie)){wr(ie,uo(void 0));return}if(Zo(Cr))if($>Ht){wr(ie,uo(void 0));return}else{ne.add(ie),await Zt(kt,Cr,!1);return}if(Ds(Cr)){Ae(ie,G,Cr.error);return}Hr(!yo(Cr),"Unhandled fetcher deferred data"),wr(ie,uo(Cr.data))}}async function Zt(ie,G,ue,Ee){let{submission:Ne,fetcherSubmission:dt,replace:Tt}=Ee===void 0?{}:Ee;G.response.headers.has("X-Remix-Revalidate")&&(D=!0);let $e=G.response.headers.get("Location");Hr($e,"Expected a Location header on the redirect Response"),$e=ny($e,new URL(ie.url),p);let nt=Vu(R.location,$e,{_isRedirect:!0});if(r){let kr=!1;if(G.response.headers.has("X-Remix-Reload-Document"))kr=!0;else if(Jg.test($e)){const Zr=e.history.createURL($e);kr=Zr.origin!==t.location.origin||bl(Zr.pathname,p)==null}if(kr){Tt?t.location.replace($e):t.location.assign($e);return}}v=null;let et=Tt===!0||G.response.headers.has("X-Remix-Replace")?oi.Replace:oi.Push,{formMethod:kt,formAction:Ht,formEncType:ke}=R.navigation;!Ne&&!dt&&kt&&Ht&&ke&&(Ne=uy(R.navigation));let Cr=Ne||dt;if(hk.has(G.response.status)&&Cr&&aa(Cr.formMethod))await Qt(et,nt,{submission:In({},Cr,{formAction:$e}),preventScrollReset:d,enableViewTransition:ue?c:void 0});else{let kr=kf(nt,Ne);await Qt(et,nt,{overrideNavigation:kr,fetcherSubmission:dt,preventScrollReset:d,enableViewTransition:ue?c:void 0})}}async function sr(ie,G,ue,Ee,Ne,dt){let Tt,$e={};try{Tt=await Rk(o,ie,G,ue,Ee,Ne,dt,a,i)}catch(nt){return Ee.forEach(et=>{$e[et.route.id]={type:pn.error,error:nt}}),$e}for(let[nt,et]of Object.entries(Tt))if(Ok(et)){let kt=et.result;$e[nt]={type:pn.redirect,response:Ck(kt,ue,nt,Ne,p,_.v7_relativeSplatPath)}}else $e[nt]=await kk(et);return $e}async function Ve(ie,G,ue,Ee,Ne){let dt=ie.matches,Tt=sr("loader",ie,Ne,ue,G,null),$e=Promise.all(Ee.map(async kt=>{if(kt.matches&&kt.match&&kt.controller){let ke=(await sr("loader",ie,Mc(e.history,kt.path,kt.controller.signal),[kt.match],kt.matches,kt.key))[kt.match.route.id];return{[kt.key]:ke}}else return Promise.resolve({[kt.key]:{type:pn.error,error:is(404,{pathname:kt.path})}})})),nt=await Tt,et=(await $e).reduce((kt,Ht)=>Object.assign(kt,Ht),{});return await Promise.all([Mk(G,nt,Ne.signal,dt,ie.loaderData),Ak(G,et,Ee)]),{loaderResults:nt,fetcherResults:et}}function Rr(){D=!0,N.push(...We()),de.forEach((ie,G)=>{j.has(G)&&(L.add(G),br(G))})}function wr(ie,G,ue){ue===void 0&&(ue={}),R.fetchers.set(ie,G),xt({fetchers:new Map(R.fetchers)},{flushSync:(ue&&ue.flushSync)===!0})}function Ae(ie,G,ue,Ee){Ee===void 0&&(Ee={});let Ne=Qc(R.matches,G);ot(ie),xt({errors:{[Ne.route.id]:ue},fetchers:new Map(R.fetchers)},{flushSync:(Ee&&Ee.flushSync)===!0})}function Ot(ie){return _.v7_fetcherPersist&&(ge.set(ie,(ge.get(ie)||0)+1),_e.has(ie)&&_e.delete(ie)),R.fetchers.get(ie)||fk}function ot(ie){let G=R.fetchers.get(ie);j.has(ie)&&!(G&&G.state==="loading"&&Z.has(ie))&&br(ie),de.delete(ie),Z.delete(ie),ne.delete(ie),_e.delete(ie),L.delete(ie),R.fetchers.delete(ie)}function vr(ie){if(_.v7_fetcherPersist){let G=(ge.get(ie)||0)-1;G<=0?(ge.delete(ie),_e.add(ie)):ge.set(ie,G)}else ot(ie);xt({fetchers:new Map(R.fetchers)})}function br(ie){let G=j.get(ie);Hr(G,"Expected fetch controller: "+ie),G.abort(),j.delete(ie)}function Vr(ie){for(let G of ie){let ue=Ot(G),Ee=uo(ue.data);R.fetchers.set(G,Ee)}}function di(){let ie=[],G=!1;for(let ue of ne){let Ee=R.fetchers.get(ue);Hr(Ee,"Expected fetcher: "+ue),Ee.state==="loading"&&(ne.delete(ue),ie.push(ue),G=!0)}return Vr(ie),G}function Mt(ie){let G=[];for(let[ue,Ee]of Z)if(Ee<ie){let Ne=R.fetchers.get(ue);Hr(Ne,"Expected fetcher: "+ue),Ne.state==="loading"&&(br(ue),Z.delete(ue),G.push(ue))}return Vr(G),G.length>0}function pi(ie,G){let ue=R.blockers.get(ie)||iu;return fe.get(ie)!==G&&fe.set(ie,G),ue}function Pi(ie){R.blockers.delete(ie),fe.delete(ie)}function hi(ie,G){let ue=R.blockers.get(ie)||iu;Hr(ue.state==="unblocked"&&G.state==="blocked"||ue.state==="blocked"&&G.state==="blocked"||ue.state==="blocked"&&G.state==="proceeding"||ue.state==="blocked"&&G.state==="unblocked"||ue.state==="proceeding"&&G.state==="unblocked","Invalid blocker state transition: "+ue.state+" -> "+G.state);let Ee=new Map(R.blockers);Ee.set(ie,G),xt({blockers:Ee})}function ls(ie){let{currentLocation:G,nextLocation:ue,historyAction:Ee}=ie;if(fe.size===0)return;fe.size>1&&fl(!1,"A router only supports one blocker at a time");let Ne=Array.from(fe.entries()),[dt,Tt]=Ne[Ne.length-1],$e=R.blockers.get(dt);if(!($e&&$e.state==="proceeding")&&Tt({currentLocation:G,nextLocation:ue,historyAction:Ee}))return dt}function Wi(ie){let G=is(404,{pathname:ie}),ue=C||y,{matches:Ee,route:Ne}=cy(ue);return We(),{notFoundMatches:Ee,route:Ne,error:G}}function At(ie,G){return{boundaryId:Qc(G.partialMatches).route.id,error:is(400,{type:"route-discovery",pathname:ie,message:G.error!=null&&"message"in G.error?G.error:String(G.error)})}}function We(ie){let G=[];return Me.forEach((ue,Ee)=>{(!ie||ie(Ee))&&(ue.cancel(),G.push(Ee),Me.delete(Ee))}),G}function ut(ie,G,ue){if(g=ie,b=G,s=ue||null,!S&&R.navigation===Ef){S=!0;let Ee=Er(R.location,R.matches);Ee!=null&&xt({restoreScrollPosition:Ee})}return()=>{g=null,b=null,s=null}}function rt(ie,G){return s&&s(ie,G.map(Ee=>$E(Ee,R.loaderData)))||ie.key}function Ue(ie,G){if(g&&b){let ue=rt(ie,G);g[ue]=b()}}function Er(ie,G){if(g){let ue=rt(ie,G),Ee=g[ue];if(typeof Ee=="number")return Ee}return null}function De(ie,G,ue){if(E){if(f.has(ue))return{active:!1,matches:ie};if(ie){if(Object.keys(ie[0].params).length>0)return{active:!0,matches:vp(G,ue,p,!0)}}else return{active:!0,matches:vp(G,ue,p,!0)||[]}}return{active:!1,matches:null}}async function dr(ie,G,ue){let Ee=ie;for(;;){let Ne=C==null,dt=C||y;try{await wk(E,G,Ee,dt,a,i,oe,ue)}catch(nt){return{type:"error",error:nt,partialMatches:Ee}}finally{Ne&&(y=[...y])}if(ue.aborted)return{type:"aborted"};let Tt=Jo(dt,G,p);if(Tt)return Tr(G,f),{type:"success",matches:Tt};let $e=vp(dt,G,p,!0);if(!$e||Ee.length===$e.length&&Ee.every((nt,et)=>nt.route.id===$e[et].route.id))return Tr(G,f),{type:"success",matches:null};Ee=$e}}function Tr(ie,G){if(G.size>=k){let ue=G.values().next().value;G.delete(ue)}G.add(ie)}function Sr(ie){a={},C=$u(ie,i,void 0,a)}function Gr(ie,G){let ue=C==null;E1(ie,G,C||y,a,i),ue&&(y=[...y],xt({}))}return P={get basename(){return p},get future(){return _},get state(){return R},get routes(){return y},get window(){return t},initialize:we,subscribe:ht,enableScrollRestoration:ut,navigate:St,fetch:Mr,revalidate:Pr,createHref:ie=>e.history.createHref(ie),encodeLocation:ie=>e.history.encodeLocation(ie),getFetcher:Ot,deleteFetcher:vr,dispose:be,getBlocker:pi,deleteBlocker:Pi,patchRoutes:Gr,_internalFetchControllers:j,_internalActiveDeferreds:Me,_internalSetRoutes:Sr},P}function vk(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function Dm(e,t,r,n,i,a,y,C){let p,o;if(y){p=[];for(let _ of t)if(p.push(_),_.route.id===y){o=_;break}}else p=t,o=t[t.length-1];let E=Gg(i||".",Kg(p,a),bl(e.pathname,r)||e.pathname,C==="path");return i==null&&(E.search=e.search,E.hash=e.hash),(i==null||i===""||i===".")&&o&&o.route.index&&!Yg(E.search)&&(E.search=E.search?E.search.replace(/^\?/,"?index&"):"?index"),n&&r!=="/"&&(E.pathname=E.pathname==="/"?r:Ba([r,E.pathname])),uc(E)}function ey(e,t,r,n){if(!n||!vk(n))return{path:r};if(n.formMethod&&!Ik(n.formMethod))return{path:r,error:is(405,{method:n.formMethod})};let i=()=>({path:r,error:is(400,{type:"invalid-body"})}),a=n.formMethod||"get",y=e?a.toUpperCase():a.toLowerCase(),C=k1(r);if(n.body!==void 0){if(n.formEncType==="text/plain"){if(!aa(y))return i();let h=typeof n.body=="string"?n.body:n.body instanceof FormData||n.body instanceof URLSearchParams?Array.from(n.body.entries()).reduce((w,k)=>{let[f,g]=k;return""+w+f+"="+g+`
`},""):String(n.body);return{path:r,submission:{formMethod:y,formAction:C,formEncType:n.formEncType,formData:void 0,json:void 0,text:h}}}else if(n.formEncType==="application/json"){if(!aa(y))return i();try{let h=typeof n.body=="string"?JSON.parse(n.body):n.body;return{path:r,submission:{formMethod:y,formAction:C,formEncType:n.formEncType,formData:void 0,json:h,text:void 0}}}catch{return i()}}}Hr(typeof FormData=="function","FormData is not available in this environment");let p,o;if(n.formData)p=Im(n.formData),o=n.formData;else if(n.body instanceof FormData)p=Im(n.body),o=n.body;else if(n.body instanceof URLSearchParams)p=n.body,o=iy(p);else if(n.body==null)p=new URLSearchParams,o=new FormData;else try{p=new URLSearchParams(n.body),o=iy(p)}catch{return i()}let E={formMethod:y,formAction:C,formEncType:n&&n.formEncType||"application/x-www-form-urlencoded",formData:o,json:void 0,text:void 0};if(aa(E.formMethod))return{path:r,submission:E};let _=Lo(r);return t&&_.search&&Yg(_.search)&&p.append("index",""),_.search="?"+p,{path:uc(_),submission:E}}function yk(e,t){let r=e;if(t){let n=e.findIndex(i=>i.route.id===t);n>=0&&(r=e.slice(0,n))}return r}function ty(e,t,r,n,i,a,y,C,p,o,E,_,h,w,k,f){let g=f?Ds(f[1])?f[1].error:f[1].data:void 0,s=e.createURL(t.location),b=e.createURL(i),S=f&&Ds(f[1])?f[0]:void 0,T=S?yk(r,S):r,x=f?f[1].statusCode:void 0,O=y&&x&&x>=400,P=T.filter((I,d)=>{let{route:v}=I;if(v.lazy)return!0;if(v.loader==null)return!1;if(a)return typeof v.loader!="function"||v.loader.hydrate?!0:t.loaderData[v.id]===void 0&&(!t.errors||t.errors[v.id]===void 0);if(_k(t.loaderData,t.matches[d],I)||p.some(l=>l===I.route.id))return!0;let c=t.matches[d],u=I;return ry(I,In({currentUrl:s,currentParams:c.params,nextUrl:b,nextParams:u.params},n,{actionResult:g,actionStatus:x,defaultShouldRevalidate:O?!1:C||s.pathname+s.search===b.pathname+b.search||s.search!==b.search||R1(c,u)}))}),R=[];return _.forEach((I,d)=>{if(a||!r.some(m=>m.route.id===I.routeId)||E.has(d))return;let v=Jo(w,I.path,k);if(!v){R.push({key:d,routeId:I.routeId,path:I.path,matches:null,match:null,controller:null});return}let c=t.fetchers.get(d),u=mu(v,I.path),l=!1;h.has(d)?l=!1:o.has(d)?(o.delete(d),l=!0):c&&c.state!=="idle"&&c.data===void 0?l=C:l=ry(u,In({currentUrl:s,currentParams:t.matches[t.matches.length-1].params,nextUrl:b,nextParams:r[r.length-1].params},n,{actionResult:g,actionStatus:x,defaultShouldRevalidate:O?!1:C})),l&&R.push({key:d,routeId:I.routeId,path:I.path,matches:v,match:u,controller:new AbortController})}),[P,R]}function _k(e,t,r){let n=!t||r.route.id!==t.route.id,i=e[r.route.id]===void 0;return n||i}function R1(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function ry(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function wk(e,t,r,n,i,a,y,C){let p=[t,...r.map(o=>o.route.id)].join("-");try{let o=y.get(p);o||(o=e({path:t,matches:r,patch:(E,_)=>{C.aborted||E1(E,_,n,i,a)}}),y.set(p,o)),o&&xk(o)&&await o}finally{y.delete(p)}}function E1(e,t,r,n,i){if(e){var a;let y=n[e];Hr(y,"No route found to patch children into: routeId = "+e);let C=$u(t,i,[e,"patch",String(((a=y.children)==null?void 0:a.length)||"0")],n);y.children?y.children.push(...C):y.children=C}else{let y=$u(t,i,["patch",String(r.length||"0")],n);r.push(...y)}}async function bk(e,t,r){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let i=r[e.id];Hr(i,"No route found in manifest");let a={};for(let y in n){let p=i[y]!==void 0&&y!=="hasErrorBoundary";fl(!p,'Route "'+i.id+'" has a static property "'+y+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+y+'" will be ignored.')),!p&&!WE.has(y)&&(a[y]=n[y])}Object.assign(i,a),Object.assign(i,In({},t(i),{lazy:void 0}))}async function Sk(e){let{matches:t}=e,r=t.filter(i=>i.shouldLoad);return(await Promise.all(r.map(i=>i.resolve()))).reduce((i,a,y)=>Object.assign(i,{[r[y].route.id]:a}),{})}async function Rk(e,t,r,n,i,a,y,C,p,o){let E=a.map(w=>w.route.lazy?bk(w.route,p,C):void 0),_=a.map((w,k)=>{let f=E[k],g=i.some(b=>b.route.id===w.route.id);return In({},w,{shouldLoad:g,resolve:async b=>(b&&n.method==="GET"&&(w.route.lazy||w.route.loader)&&(g=!0),g?Ek(t,n,w,f,b,o):Promise.resolve({type:pn.data,result:void 0}))})}),h=await e({matches:_,request:n,params:a[0].params,fetcherKey:y,context:o});try{await Promise.all(E)}catch{}return h}async function Ek(e,t,r,n,i,a){let y,C,p=o=>{let E,_=new Promise((k,f)=>E=f);C=()=>E(),t.signal.addEventListener("abort",C);let h=k=>typeof o!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+r.route.id+"]"))):o({request:t,params:r.params,context:a},...k!==void 0?[k]:[]),w=(async()=>{try{return{type:"data",result:await(i?i(f=>h(f)):h())}}catch(k){return{type:"error",result:k}}})();return Promise.race([w,_])};try{let o=r.route[e];if(n)if(o){let E,[_]=await Promise.all([p(o).catch(h=>{E=h}),n]);if(E!==void 0)throw E;y=_}else if(await n,o=r.route[e],o)y=await p(o);else if(e==="action"){let E=new URL(t.url),_=E.pathname+E.search;throw is(405,{method:t.method,pathname:_,routeId:r.route.id})}else return{type:pn.data,result:void 0};else if(o)y=await p(o);else{let E=new URL(t.url),_=E.pathname+E.search;throw is(404,{pathname:_})}Hr(y.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(o){return{type:pn.error,result:o}}finally{C&&t.signal.removeEventListener("abort",C)}return y}async function kk(e){let{result:t,type:r}=e;if(C1(t)){let o;try{let E=t.headers.get("Content-Type");E&&/\bapplication\/json\b/.test(E)?t.body==null?o=null:o=await t.json():o=await t.text()}catch(E){return{type:pn.error,error:E}}return r===pn.error?{type:pn.error,error:new Yp(t.status,t.statusText,o),statusCode:t.status,headers:t.headers}:{type:pn.data,data:o,statusCode:t.status,headers:t.headers}}if(r===pn.error){if(ly(t)){var n;if(t.data instanceof Error){var i;return{type:pn.error,error:t.data,statusCode:(i=t.init)==null?void 0:i.status}}t=new Yp(((n=t.init)==null?void 0:n.status)||500,void 0,t.data)}return{type:pn.error,error:t,statusCode:Eh(t)?t.status:void 0}}if(Dk(t)){var a,y;return{type:pn.deferred,deferredData:t,statusCode:(a=t.init)==null?void 0:a.status,headers:((y=t.init)==null?void 0:y.headers)&&new Headers(t.init.headers)}}if(ly(t)){var C,p;return{type:pn.data,data:t.data,statusCode:(C=t.init)==null?void 0:C.status,headers:(p=t.init)!=null&&p.headers?new Headers(t.init.headers):void 0}}return{type:pn.data,data:t}}function Ck(e,t,r,n,i,a){let y=e.headers.get("Location");if(Hr(y,"Redirects returned/thrown from loaders/actions must have a Location header"),!Jg.test(y)){let C=n.slice(0,n.findIndex(p=>p.route.id===r)+1);y=Dm(new URL(t.url),C,i,!0,y,a),e.headers.set("Location",y)}return e}function ny(e,t,r){if(Jg.test(e)){let n=e,i=n.startsWith("//")?new URL(t.protocol+n):new URL(n),a=bl(i.pathname,r)!=null;if(i.origin===t.origin&&a)return i.pathname+i.search+i.hash}return e}function Mc(e,t,r,n){let i=e.createURL(k1(t)).toString(),a={signal:r};if(n&&aa(n.formMethod)){let{formMethod:y,formEncType:C}=n;a.method=y.toUpperCase(),C==="application/json"?(a.headers=new Headers({"Content-Type":C}),a.body=JSON.stringify(n.json)):C==="text/plain"?a.body=n.text:C==="application/x-www-form-urlencoded"&&n.formData?a.body=Im(n.formData):a.body=n.formData}return new Request(i,a)}function Im(e){let t=new URLSearchParams;for(let[r,n]of e.entries())t.append(r,typeof n=="string"?n:n.name);return t}function iy(e){let t=new FormData;for(let[r,n]of e.entries())t.append(r,n);return t}function Pk(e,t,r,n,i){let a={},y=null,C,p=!1,o={},E=r&&Ds(r[1])?r[1].error:void 0;return e.forEach(_=>{if(!(_.route.id in t))return;let h=_.route.id,w=t[h];if(Hr(!Zo(w),"Cannot handle redirect results in processLoaderData"),Ds(w)){let k=w.error;E!==void 0&&(k=E,E=void 0),y=y||{};{let f=Qc(e,h);y[f.route.id]==null&&(y[f.route.id]=k)}a[h]=void 0,p||(p=!0,C=Eh(w.error)?w.error.status:500),w.headers&&(o[h]=w.headers)}else yo(w)?(n.set(h,w.deferredData),a[h]=w.deferredData.data,w.statusCode!=null&&w.statusCode!==200&&!p&&(C=w.statusCode),w.headers&&(o[h]=w.headers)):(a[h]=w.data,w.statusCode&&w.statusCode!==200&&!p&&(C=w.statusCode),w.headers&&(o[h]=w.headers))}),E!==void 0&&r&&(y={[r[0]]:E},a[r[0]]=void 0),{loaderData:a,errors:y,statusCode:C||200,loaderHeaders:o}}function sy(e,t,r,n,i,a,y,C){let{loaderData:p,errors:o}=Pk(t,n,i,C);return a.forEach(E=>{let{key:_,match:h,controller:w}=E,k=y[_];if(Hr(k,"Did not find corresponding fetcher result"),!(w&&w.signal.aborted))if(Ds(k)){let f=Qc(e.matches,h==null?void 0:h.route.id);o&&o[f.route.id]||(o=In({},o,{[f.route.id]:k.error})),e.fetchers.delete(_)}else if(Zo(k))Hr(!1,"Unhandled fetcher revalidation redirect");else if(yo(k))Hr(!1,"Unhandled fetcher deferred data");else{let f=uo(k.data);e.fetchers.set(_,f)}}),{loaderData:p,errors:o}}function ay(e,t,r,n){let i=In({},t);for(let a of r){let y=a.route.id;if(t.hasOwnProperty(y)?t[y]!==void 0&&(i[y]=t[y]):e[y]!==void 0&&a.route.loader&&(i[y]=e[y]),n&&n.hasOwnProperty(y))break}return i}function oy(e){return e?Ds(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Qc(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function cy(e){let t=e.length===1?e[0]:e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function is(e,t){let{pathname:r,routeId:n,method:i,type:a,message:y}=t===void 0?{}:t,C="Unknown Server Error",p="Unknown @remix-run/router error";return e===400?(C="Bad Request",a==="route-discovery"?p='Unable to match URL "'+r+'" - the `unstable_patchRoutesOnNavigation()` '+(`function threw the following error:
`+y):i&&r&&n?p="You made a "+i+' request to "'+r+'" but '+('did not provide a `loader` for route "'+n+'", ')+"so there is no way to handle the request.":a==="defer-action"?p="defer() is not supported in actions":a==="invalid-body"&&(p="Unable to encode submission body")):e===403?(C="Forbidden",p='Route "'+n+'" does not match URL "'+r+'"'):e===404?(C="Not Found",p='No route matches URL "'+r+'"'):e===405&&(C="Method Not Allowed",i&&r&&n?p="You made a "+i.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+n+'", ')+"so there is no way to handle the request.":i&&(p='Invalid request method "'+i.toUpperCase()+'"')),new Yp(e||500,C,new Error(p),!0)}function tp(e){let t=Object.entries(e);for(let r=t.length-1;r>=0;r--){let[n,i]=t[r];if(Zo(i))return{key:n,result:i}}}function k1(e){let t=typeof e=="string"?Lo(e):e;return uc(In({},t,{hash:""}))}function Tk(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function xk(e){return typeof e=="object"&&e!=null&&"then"in e}function Ok(e){return C1(e.result)&&pk.has(e.result.status)}function yo(e){return e.type===pn.deferred}function Ds(e){return e.type===pn.error}function Zo(e){return(e&&e.type)===pn.redirect}function ly(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function Dk(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function C1(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function Ik(e){return dk.has(e.toLowerCase())}function aa(e){return lk.has(e.toLowerCase())}async function Mk(e,t,r,n,i){let a=Object.entries(t);for(let y=0;y<a.length;y++){let[C,p]=a[y],o=e.find(h=>(h==null?void 0:h.route.id)===C);if(!o)continue;let E=n.find(h=>h.route.id===o.route.id),_=E!=null&&!R1(E,o)&&(i&&i[o.route.id])!==void 0;yo(p)&&_&&await Qg(p,r,!1).then(h=>{h&&(t[C]=h)})}}async function Ak(e,t,r){for(let n=0;n<r.length;n++){let{key:i,routeId:a,controller:y}=r[n],C=t[i];e.find(o=>(o==null?void 0:o.route.id)===a)&&yo(C)&&(Hr(y,"Expected an AbortController for revalidating fetcher deferred result"),await Qg(C,y.signal,!0).then(o=>{o&&(t[i]=o)}))}}async function Qg(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:pn.data,data:e.deferredData.unwrappedData}}catch(i){return{type:pn.error,error:i}}return{type:pn.data,data:e.deferredData.data}}}function Yg(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function mu(e,t){let r=typeof t=="string"?Lo(t).search:t.search;if(e[e.length-1].route.index&&Yg(r||""))return e[e.length-1];let n=w1(e);return n[n.length-1]}function uy(e){let{formMethod:t,formAction:r,formEncType:n,text:i,formData:a,json:y}=e;if(!(!t||!r||!n)){if(i!=null)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:void 0,text:i};if(a!=null)return{formMethod:t,formAction:r,formEncType:n,formData:a,json:void 0,text:void 0};if(y!==void 0)return{formMethod:t,formAction:r,formEncType:n,formData:void 0,json:y,text:void 0}}}function kf(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Lk(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function su(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Nk(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function uo(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function jk(e,t){try{let r=e.sessionStorage.getItem(S1);if(r){let n=JSON.parse(r);for(let[i,a]of Object.entries(n||{}))a&&Array.isArray(a)&&t.set(i,new Set(a||[]))}}catch{}}function Bk(e,t){if(t.size>0){let r={};for(let[n,i]of t)r[n]=[...i];try{e.sessionStorage.setItem(S1,JSON.stringify(r))}catch(n){fl(!1,"Failed to save applied view transitions in sessionStorage ("+n+").")}}}/**
 * React Router v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xp(){return Xp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xp.apply(this,arguments)}const kh=xe.createContext(null),P1=xe.createContext(null),gc=xe.createContext(null),Xg=xe.createContext(null),vc=xe.createContext({outlet:null,matches:[],isDataRoute:!1}),T1=xe.createContext(null);function Fk(e,t){let{relative:r}=t===void 0?{}:t;ed()||Hr(!1);let{basename:n,navigator:i}=xe.useContext(gc),{hash:a,pathname:y,search:C}=O1(e,{relative:r}),p=y;return n!=="/"&&(p=y==="/"?n:Ba([n,y])),i.createHref({pathname:p,search:C,hash:a})}function ed(){return xe.useContext(Xg)!=null}function Ch(){return ed()||Hr(!1),xe.useContext(Xg).location}function x1(e){xe.useContext(gc).static||xe.useLayoutEffect(e)}function Uk(){let{isDataRoute:e}=xe.useContext(vc);return e?Xk():zk()}function zk(){ed()||Hr(!1);let e=xe.useContext(kh),{basename:t,future:r,navigator:n}=xe.useContext(gc),{matches:i}=xe.useContext(vc),{pathname:a}=Ch(),y=JSON.stringify(Kg(i,r.v7_relativeSplatPath)),C=xe.useRef(!1);return x1(()=>{C.current=!0}),xe.useCallback(function(o,E){if(E===void 0&&(E={}),!C.current)return;if(typeof o=="number"){n.go(o);return}let _=Gg(o,JSON.parse(y),a,E.relative==="path");e==null&&t!=="/"&&(_.pathname=_.pathname==="/"?t:Ba([t,_.pathname])),(E.replace?n.replace:n.push)(_,E.state,E)},[t,n,y,a,e])}function O1(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=xe.useContext(gc),{matches:i}=xe.useContext(vc),{pathname:a}=Ch(),y=JSON.stringify(Kg(i,n.v7_relativeSplatPath));return xe.useMemo(()=>Gg(e,JSON.parse(y),a,r==="path"),[e,y,a,r])}function Hk(e,t,r,n){ed()||Hr(!1);let{navigator:i}=xe.useContext(gc),{matches:a}=xe.useContext(vc),y=a[a.length-1],C=y?y.params:{};y&&y.pathname;let p=y?y.pathnameBase:"/";y&&y.route;let o=Ch(),E;E=o;let _=E.pathname||"/",h=_;if(p!=="/"){let f=p.replace(/^\//,"").split("/");h="/"+_.replace(/^\//,"").split("/").slice(f.length).join("/")}let w=Jo(e,{pathname:h});return Kk(w&&w.map(f=>Object.assign({},f,{params:Object.assign({},C,f.params),pathname:Ba([p,i.encodeLocation?i.encodeLocation(f.pathname).pathname:f.pathname]),pathnameBase:f.pathnameBase==="/"?p:Ba([p,i.encodeLocation?i.encodeLocation(f.pathnameBase).pathname:f.pathnameBase])})),a,r,n)}function Wk(){let e=Yk(),t=Eh(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return xe.createElement(xe.Fragment,null,xe.createElement("h2",null,"Unexpected Application Error!"),xe.createElement("h3",{style:{fontStyle:"italic"}},t),r?xe.createElement("pre",{style:i},r):null,null)}const Vk=xe.createElement(Wk,null);class $k extends xe.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?xe.createElement(vc.Provider,{value:this.props.routeContext},xe.createElement(T1.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qk(e){let{routeContext:t,match:r,children:n}=e,i=xe.useContext(kh);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),xe.createElement(vc.Provider,{value:t},n)}function Kk(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let y=e,C=(i=r)==null?void 0:i.errors;if(C!=null){let E=y.findIndex(_=>_.route.id&&(C==null?void 0:C[_.route.id])!==void 0);E>=0||Hr(!1),y=y.slice(0,Math.min(y.length,E+1))}let p=!1,o=-1;if(r&&n&&n.v7_partialHydration)for(let E=0;E<y.length;E++){let _=y[E];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(o=E),_.route.id){let{loaderData:h,errors:w}=r,k=_.route.loader&&h[_.route.id]===void 0&&(!w||w[_.route.id]===void 0);if(_.route.lazy||k){p=!0,o>=0?y=y.slice(0,o+1):y=[y[0]];break}}}return y.reduceRight((E,_,h)=>{let w,k=!1,f=null,g=null;r&&(w=C&&_.route.id?C[_.route.id]:void 0,f=_.route.errorElement||Vk,p&&(o<0&&h===0?(Zk("route-fallback"),k=!0,g=null):o===h&&(k=!0,g=_.route.hydrateFallbackElement||null)));let s=t.concat(y.slice(0,h+1)),b=()=>{let S;return w?S=f:k?S=g:_.route.Component?S=xe.createElement(_.route.Component,null):_.route.element?S=_.route.element:S=E,xe.createElement(qk,{match:_,routeContext:{outlet:E,matches:s,isDataRoute:r!=null},children:S})};return r&&(_.route.ErrorBoundary||_.route.errorElement||h===0)?xe.createElement($k,{location:r.location,revalidation:r.revalidation,component:f,error:w,children:b(),routeContext:{outlet:null,matches:s,isDataRoute:!0}}):b()},null)}var D1=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(D1||{}),Zp=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Zp||{});function Gk(e){let t=xe.useContext(kh);return t||Hr(!1),t}function Jk(e){let t=xe.useContext(P1);return t||Hr(!1),t}function Qk(e){let t=xe.useContext(vc);return t||Hr(!1),t}function I1(e){let t=Qk(),r=t.matches[t.matches.length-1];return r.route.id||Hr(!1),r.route.id}function Yk(){var e;let t=xe.useContext(T1),r=Jk(Zp.UseRouteError),n=I1(Zp.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function Xk(){let{router:e}=Gk(D1.UseNavigateStable),t=I1(Zp.UseNavigateStable),r=xe.useRef(!1);return x1(()=>{r.current=!0}),xe.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,Xp({fromRouteId:t},a)))},[e,t])}const dy={};function Zk(e,t,r){dy[e]||(dy[e]=!0)}function eC(e){let{basename:t="/",children:r=null,location:n,navigationType:i=oi.Pop,navigator:a,static:y=!1,future:C}=e;ed()&&Hr(!1);let p=t.replace(/^\/*/,"/"),o=xe.useMemo(()=>({basename:p,navigator:a,static:y,future:Xp({v7_relativeSplatPath:!1},C)}),[p,C,a,y]);typeof n=="string"&&(n=Lo(n));let{pathname:E="/",search:_="",hash:h="",state:w=null,key:k="default"}=n,f=xe.useMemo(()=>{let g=bl(E,p);return g==null?null:{location:{pathname:g,search:_,hash:h,state:w,key:k},navigationType:i}},[p,E,_,h,w,k,i]);return f==null?null:xe.createElement(gc.Provider,{value:o},xe.createElement(Xg.Provider,{children:r,value:f}))}new Promise(()=>{});function tC(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:xe.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:xe.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:xe.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.26.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qu(){return qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qu.apply(this,arguments)}function rC(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function nC(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function iC(e,t){return e.button===0&&(!t||t==="_self")&&!nC(e)}const sC=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],aC="6";try{window.__reactRouterVersion=aC}catch{}function oC(e,t){return gk({basename:void 0,future:qu({},void 0,{v7_prependBasename:!0}),history:UE({window:void 0}),hydrationData:cC(),routes:e,mapRouteProperties:tC,unstable_dataStrategy:void 0,unstable_patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function cC(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=qu({},t,{errors:lC(t.errors)})),t}function lC(e){if(!e)return null;let t=Object.entries(e),r={};for(let[n,i]of t)if(i&&i.__type==="RouteErrorResponse")r[n]=new Yp(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let a=window[i.__subType];if(typeof a=="function")try{let y=new a(i.message);y.stack="",r[n]=y}catch{}}if(r[n]==null){let a=new Error(i.message);a.stack="",r[n]=a}}else r[n]=i;return r}const uC=xe.createContext({isTransitioning:!1}),dC=xe.createContext(new Map),pC="startTransition",py=PS[pC],hC="flushSync",hy=FE[hC];function fC(e){py?py(e):e()}function au(e){hy?hy(e):e()}class mC{constructor(){this.status="pending",this.promise=new Promise((t,r)=>{this.resolve=n=>{this.status==="pending"&&(this.status="resolved",t(n))},this.reject=n=>{this.status==="pending"&&(this.status="rejected",r(n))}})}}function gC(e){let{fallbackElement:t,router:r,future:n}=e,[i,a]=xe.useState(r.state),[y,C]=xe.useState(),[p,o]=xe.useState({isTransitioning:!1}),[E,_]=xe.useState(),[h,w]=xe.useState(),[k,f]=xe.useState(),g=xe.useRef(new Map),{v7_startTransition:s}=n||{},b=xe.useCallback(R=>{s?fC(R):R()},[s]),S=xe.useCallback((R,I)=>{let{deletedFetchers:d,unstable_flushSync:v,unstable_viewTransitionOpts:c}=I;d.forEach(l=>g.current.delete(l)),R.fetchers.forEach((l,m)=>{l.data!==void 0&&g.current.set(m,l.data)});let u=r.window==null||r.window.document==null||typeof r.window.document.startViewTransition!="function";if(!c||u){v?au(()=>a(R)):b(()=>a(R));return}if(v){au(()=>{h&&(E&&E.resolve(),h.skipTransition()),o({isTransitioning:!0,flushSync:!0,currentLocation:c.currentLocation,nextLocation:c.nextLocation})});let l=r.window.document.startViewTransition(()=>{au(()=>a(R))});l.finished.finally(()=>{au(()=>{_(void 0),w(void 0),C(void 0),o({isTransitioning:!1})})}),au(()=>w(l));return}h?(E&&E.resolve(),h.skipTransition(),f({state:R,currentLocation:c.currentLocation,nextLocation:c.nextLocation})):(C(R),o({isTransitioning:!0,flushSync:!1,currentLocation:c.currentLocation,nextLocation:c.nextLocation}))},[r.window,h,E,g,b]);xe.useLayoutEffect(()=>r.subscribe(S),[r,S]),xe.useEffect(()=>{p.isTransitioning&&!p.flushSync&&_(new mC)},[p]),xe.useEffect(()=>{if(E&&y&&r.window){let R=y,I=E.promise,d=r.window.document.startViewTransition(async()=>{b(()=>a(R)),await I});d.finished.finally(()=>{_(void 0),w(void 0),C(void 0),o({isTransitioning:!1})}),w(d)}},[b,y,E,r.window]),xe.useEffect(()=>{E&&y&&i.location.key===y.location.key&&E.resolve()},[E,h,i.location,y]),xe.useEffect(()=>{!p.isTransitioning&&k&&(C(k.state),o({isTransitioning:!0,flushSync:!1,currentLocation:k.currentLocation,nextLocation:k.nextLocation}),f(void 0))},[p.isTransitioning,k]),xe.useEffect(()=>{},[]);let T=xe.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:R=>r.navigate(R),push:(R,I,d)=>r.navigate(R,{state:I,preventScrollReset:d==null?void 0:d.preventScrollReset}),replace:(R,I,d)=>r.navigate(R,{replace:!0,state:I,preventScrollReset:d==null?void 0:d.preventScrollReset})}),[r]),x=r.basename||"/",O=xe.useMemo(()=>({router:r,navigator:T,static:!1,basename:x}),[r,T,x]),P=xe.useMemo(()=>({v7_relativeSplatPath:r.future.v7_relativeSplatPath}),[r.future.v7_relativeSplatPath]);return xe.createElement(xe.Fragment,null,xe.createElement(kh.Provider,{value:O},xe.createElement(P1.Provider,{value:i},xe.createElement(dC.Provider,{value:g.current},xe.createElement(uC.Provider,{value:p},xe.createElement(eC,{basename:x,location:i.location,navigationType:i.historyAction,navigator:T,future:P},i.initialized||r.future.v7_partialHydration?xe.createElement(vC,{routes:r.routes,future:r.future,state:i}):t))))),null)}const vC=xe.memo(yC);function yC(e){let{routes:t,future:r,state:n}=e;return Hk(t,void 0,n,r)}const _C=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wC=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Zg=xe.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:a,replace:y,state:C,target:p,to:o,preventScrollReset:E,unstable_viewTransition:_}=t,h=rC(t,sC),{basename:w}=xe.useContext(gc),k,f=!1;if(typeof o=="string"&&wC.test(o)&&(k=o,_C))try{let S=new URL(window.location.href),T=o.startsWith("//")?new URL(S.protocol+o):new URL(o),x=bl(T.pathname,w);T.origin===S.origin&&x!=null?o=x+T.search+T.hash:f=!0}catch{}let g=Fk(o,{relative:i}),s=bC(o,{replace:y,state:C,target:p,preventScrollReset:E,relative:i,unstable_viewTransition:_});function b(S){n&&n(S),S.defaultPrevented||s(S)}return xe.createElement("a",qu({},h,{href:k||g,onClick:f||a?n:b,ref:r,target:p}))});var fy;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(fy||(fy={}));var my;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(my||(my={}));function bC(e,t){let{target:r,replace:n,state:i,preventScrollReset:a,relative:y,unstable_viewTransition:C}=t===void 0?{}:t,p=Uk(),o=Ch(),E=O1(e,{relative:y});return xe.useCallback(_=>{if(iC(_,r)){_.preventDefault();let h=n!==void 0?n:uc(o)===uc(E);p(e,{replace:h,state:i,preventScrollReset:a,relative:y,unstable_viewTransition:C})}},[o,p,E,n,i,r,e,a,y,C])}/*!
* sweetalert2 v11.14.1
* Released under the MIT License.
*/function M1(e,t,r){if(typeof e=="function"?e===t:e.has(t))return arguments.length<3?t:r;throw new TypeError("Private element is not present on this object")}function SC(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function gy(e,t){return e.get(M1(e,t))}function RC(e,t,r){SC(e,t),t.set(e,r)}function EC(e,t,r){return e.set(M1(e,t),r),r}const kC=100,fr={},CC=()=>{fr.previousActiveElement instanceof HTMLElement?(fr.previousActiveElement.focus(),fr.previousActiveElement=null):document.body&&document.body.focus()},PC=e=>new Promise(t=>{if(!e)return t();const r=window.scrollX,n=window.scrollY;fr.restoreFocusTimeout=setTimeout(()=>{CC(),t()},kC),window.scrollTo(r,n)}),A1="swal2-",TC=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","default-outline","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error"],je=TC.reduce((e,t)=>(e[t]=A1+t,e),{}),xC=["success","warning","info","question","error"],eh=xC.reduce((e,t)=>(e[t]=A1+t,e),{}),L1="SweetAlert2:",ev=e=>e.charAt(0).toUpperCase()+e.slice(1),Ss=e=>{console.warn(`${L1} ${typeof e=="object"?e.join(" "):e}`)},yc=e=>{console.error(`${L1} ${e}`)},vy=[],OC=e=>{vy.includes(e)||(vy.push(e),Ss(e))},N1=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;OC(`"${e}" is deprecated and will be removed in the next major release.${t?` Use "${t}" instead.`:""}`)},Ph=e=>typeof e=="function"?e():e,tv=e=>e&&typeof e.toPromise=="function",td=e=>tv(e)?e.toPromise():Promise.resolve(e),rv=e=>e&&Promise.resolve(e)===e,Rs=()=>document.body.querySelector(`.${je.container}`),rd=e=>{const t=Rs();return t?t.querySelector(e):null},Fs=e=>rd(`.${e}`),ln=()=>Fs(je.popup),nd=()=>Fs(je.icon),DC=()=>Fs(je["icon-content"]),j1=()=>Fs(je.title),nv=()=>Fs(je["html-container"]),B1=()=>Fs(je.image),iv=()=>Fs(je["progress-steps"]),Th=()=>Fs(je["validation-message"]),Ra=()=>rd(`.${je.actions} .${je.confirm}`),Sl=()=>rd(`.${je.actions} .${je.cancel}`),_c=()=>rd(`.${je.actions} .${je.deny}`),IC=()=>Fs(je["input-label"]),Rl=()=>rd(`.${je.loader}`),id=()=>Fs(je.actions),F1=()=>Fs(je.footer),xh=()=>Fs(je["timer-progress-bar"]),sv=()=>Fs(je.close),MC=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,av=()=>{const e=ln();if(!e)return[];const t=e.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),r=Array.from(t).sort((a,y)=>{const C=parseInt(a.getAttribute("tabindex")||"0"),p=parseInt(y.getAttribute("tabindex")||"0");return C>p?1:C<p?-1:0}),n=e.querySelectorAll(MC),i=Array.from(n).filter(a=>a.getAttribute("tabindex")!=="-1");return[...new Set(r.concat(i))].filter(a=>_s(a))},ov=()=>Fa(document.body,je.shown)&&!Fa(document.body,je["toast-shown"])&&!Fa(document.body,je["no-backdrop"]),Oh=()=>{const e=ln();return e?Fa(e,je.toast):!1},AC=()=>{const e=ln();return e?e.hasAttribute("data-loading"):!1},Us=(e,t)=>{if(e.textContent="",t){const n=new DOMParser().parseFromString(t,"text/html"),i=n.querySelector("head");i&&Array.from(i.childNodes).forEach(y=>{e.appendChild(y)});const a=n.querySelector("body");a&&Array.from(a.childNodes).forEach(y=>{y instanceof HTMLVideoElement||y instanceof HTMLAudioElement?e.appendChild(y.cloneNode(!0)):e.appendChild(y)})}},Fa=(e,t)=>{if(!t)return!1;const r=t.split(/\s+/);for(let n=0;n<r.length;n++)if(!e.classList.contains(r[n]))return!1;return!0},LC=(e,t)=>{Array.from(e.classList).forEach(r=>{!Object.values(je).includes(r)&&!Object.values(eh).includes(r)&&!Object.values(t.showClass||{}).includes(r)&&e.classList.remove(r)})},Ns=(e,t,r)=>{if(LC(e,t),!t.customClass)return;const n=t.customClass[r];if(n){if(typeof n!="string"&&!n.forEach){Ss(`Invalid type of customClass.${r}! Expected string or iterable object, got "${typeof n}"`);return}Yr(e,n)}},Dh=(e,t)=>{if(!t)return null;switch(t){case"select":case"textarea":case"file":return e.querySelector(`.${je.popup} > .${je[t]}`);case"checkbox":return e.querySelector(`.${je.popup} > .${je.checkbox} input`);case"radio":return e.querySelector(`.${je.popup} > .${je.radio} input:checked`)||e.querySelector(`.${je.popup} > .${je.radio} input:first-child`);case"range":return e.querySelector(`.${je.popup} > .${je.range} input`);default:return e.querySelector(`.${je.popup} > .${je.input}`)}},U1=e=>{if(e.focus(),e.type!=="file"){const t=e.value;e.value="",e.value=t}},z1=(e,t,r)=>{!e||!t||(typeof t=="string"&&(t=t.split(/\s+/).filter(Boolean)),t.forEach(n=>{Array.isArray(e)?e.forEach(i=>{r?i.classList.add(n):i.classList.remove(n)}):r?e.classList.add(n):e.classList.remove(n)}))},Yr=(e,t)=>{z1(e,t,!0)},Ea=(e,t)=>{z1(e,t,!1)},_o=(e,t)=>{const r=Array.from(e.children);for(let n=0;n<r.length;n++){const i=r[n];if(i instanceof HTMLElement&&Fa(i,t))return i}},nc=(e,t,r)=>{r===`${parseInt(r)}`&&(r=parseInt(r)),r||parseInt(r)===0?e.style.setProperty(t,typeof r=="number"?`${r}px`:r):e.style.removeProperty(t)},Ci=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"flex";e&&(e.style.display=t)},Zi=e=>{e&&(e.style.display="none")},cv=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"block";e&&new MutationObserver(()=>{sd(e,e.innerHTML,t)}).observe(e,{childList:!0,subtree:!0})},yy=(e,t,r,n)=>{const i=e.querySelector(t);i&&i.style.setProperty(r,n)},sd=function(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"flex";t?Ci(e,r):Zi(e)},_s=e=>!!(e&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)),NC=()=>!_s(Ra())&&!_s(_c())&&!_s(Sl()),_y=e=>e.scrollHeight>e.clientHeight,H1=e=>{const t=window.getComputedStyle(e),r=parseFloat(t.getPropertyValue("animation-duration")||"0"),n=parseFloat(t.getPropertyValue("transition-duration")||"0");return r>0||n>0},lv=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const r=xh();r&&_s(r)&&(t&&(r.style.transition="none",r.style.width="100%"),setTimeout(()=>{r.style.transition=`width ${e/1e3}s linear`,r.style.width="0%"},10))},jC=()=>{const e=xh();if(!e)return;const t=parseInt(window.getComputedStyle(e).width);e.style.removeProperty("transition"),e.style.width="100%";const r=parseInt(window.getComputedStyle(e).width),n=t/r*100;e.style.width=`${n}%`},W1=()=>typeof window>"u"||typeof document>"u",BC=`
 <div aria-labelledby="${je.title}" aria-describedby="${je["html-container"]}" class="${je.popup}" tabindex="-1">
   <button type="button" class="${je.close}"></button>
   <ul class="${je["progress-steps"]}"></ul>
   <div class="${je.icon}"></div>
   <img class="${je.image}" />
   <h2 class="${je.title}" id="${je.title}"></h2>
   <div class="${je["html-container"]}" id="${je["html-container"]}"></div>
   <input class="${je.input}" id="${je.input}" />
   <input type="file" class="${je.file}" />
   <div class="${je.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${je.select}" id="${je.select}"></select>
   <div class="${je.radio}"></div>
   <label class="${je.checkbox}">
     <input type="checkbox" id="${je.checkbox}" />
     <span class="${je.label}"></span>
   </label>
   <textarea class="${je.textarea}" id="${je.textarea}"></textarea>
   <div class="${je["validation-message"]}" id="${je["validation-message"]}"></div>
   <div class="${je.actions}">
     <div class="${je.loader}"></div>
     <button type="button" class="${je.confirm}"></button>
     <button type="button" class="${je.deny}"></button>
     <button type="button" class="${je.cancel}"></button>
   </div>
   <div class="${je.footer}"></div>
   <div class="${je["timer-progress-bar-container"]}">
     <div class="${je["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),FC=()=>{const e=Rs();return e?(e.remove(),Ea([document.documentElement,document.body],[je["no-backdrop"],je["toast-shown"],je["has-column"]]),!0):!1},qo=()=>{fr.currentInstance.resetValidationMessage()},UC=()=>{const e=ln(),t=_o(e,je.input),r=_o(e,je.file),n=e.querySelector(`.${je.range} input`),i=e.querySelector(`.${je.range} output`),a=_o(e,je.select),y=e.querySelector(`.${je.checkbox} input`),C=_o(e,je.textarea);t.oninput=qo,r.onchange=qo,a.onchange=qo,y.onchange=qo,C.oninput=qo,n.oninput=()=>{qo(),i.value=n.value},n.onchange=()=>{qo(),i.value=n.value}},zC=e=>typeof e=="string"?document.querySelector(e):e,HC=e=>{const t=ln();t.setAttribute("role",e.toast?"alert":"dialog"),t.setAttribute("aria-live",e.toast?"polite":"assertive"),e.toast||t.setAttribute("aria-modal","true")},WC=e=>{window.getComputedStyle(e).direction==="rtl"&&Yr(Rs(),je.rtl)},VC=e=>{const t=FC();if(W1()){yc("SweetAlert2 requires document to initialize");return}const r=document.createElement("div");r.className=je.container,t&&Yr(r,je["no-transition"]),Us(r,BC);const n=zC(e.target);n.appendChild(r),HC(e),WC(n),UC()},uv=(e,t)=>{e instanceof HTMLElement?t.appendChild(e):typeof e=="object"?$C(e,t):e&&Us(t,e)},$C=(e,t)=>{e.jquery?qC(t,e):Us(t,e.toString())},qC=(e,t)=>{if(e.textContent="",0 in t)for(let r=0;r in t;r++)e.appendChild(t[r].cloneNode(!0));else e.appendChild(t.cloneNode(!0))},dc=(()=>{if(W1())return!1;const e=document.createElement("div");return typeof e.style.webkitAnimation<"u"?"webkitAnimationEnd":typeof e.style.animation<"u"?"animationend":!1})(),KC=(e,t)=>{const r=id(),n=Rl();!r||!n||(!t.showConfirmButton&&!t.showDenyButton&&!t.showCancelButton?Zi(r):Ci(r),Ns(r,t,"actions"),GC(r,n,t),Us(n,t.loaderHtml||""),Ns(n,t,"loader"))};function GC(e,t,r){const n=Ra(),i=_c(),a=Sl();!n||!i||!a||(Cf(n,"confirm",r),Cf(i,"deny",r),Cf(a,"cancel",r),JC(n,i,a,r),r.reverseButtons&&(r.toast?(e.insertBefore(a,n),e.insertBefore(i,n)):(e.insertBefore(a,t),e.insertBefore(i,t),e.insertBefore(n,t))))}function JC(e,t,r,n){if(!n.buttonsStyling){Ea([e,t,r],je.styled);return}Yr([e,t,r],je.styled),n.confirmButtonColor&&(e.style.backgroundColor=n.confirmButtonColor,Yr(e,je["default-outline"])),n.denyButtonColor&&(t.style.backgroundColor=n.denyButtonColor,Yr(t,je["default-outline"])),n.cancelButtonColor&&(r.style.backgroundColor=n.cancelButtonColor,Yr(r,je["default-outline"]))}function Cf(e,t,r){const n=ev(t);sd(e,r[`show${n}Button`],"inline-block"),Us(e,r[`${t}ButtonText`]||""),e.setAttribute("aria-label",r[`${t}ButtonAriaLabel`]||""),e.className=je[t],Ns(e,r,`${t}Button`)}const QC=(e,t)=>{const r=sv();r&&(Us(r,t.closeButtonHtml||""),Ns(r,t,"closeButton"),sd(r,t.showCloseButton),r.setAttribute("aria-label",t.closeButtonAriaLabel||""))},YC=(e,t)=>{const r=Rs();r&&(XC(r,t.backdrop),ZC(r,t.position),eP(r,t.grow),Ns(r,t,"container"))};function XC(e,t){typeof t=="string"?e.style.background=t:t||Yr([document.documentElement,document.body],je["no-backdrop"])}function ZC(e,t){t&&(t in je?Yr(e,je[t]):(Ss('The "position" parameter is not valid, defaulting to "center"'),Yr(e,je.center)))}function eP(e,t){t&&Yr(e,je[`grow-${t}`])}var yn={innerParams:new WeakMap,domCache:new WeakMap};const tP=["input","file","range","select","radio","checkbox","textarea"],rP=(e,t)=>{const r=ln();if(!r)return;const n=yn.innerParams.get(e),i=!n||t.input!==n.input;tP.forEach(a=>{const y=_o(r,je[a]);y&&(sP(a,t.inputAttributes),y.className=je[a],i&&Zi(y))}),t.input&&(i&&nP(t),aP(t))},nP=e=>{if(!e.input)return;if(!Gn[e.input]){yc(`Unexpected type of input! Expected ${Object.keys(Gn).join(" | ")}, got "${e.input}"`);return}const t=V1(e.input);if(!t)return;const r=Gn[e.input](t,e);Ci(t),e.inputAutoFocus&&setTimeout(()=>{U1(r)})},iP=e=>{for(let t=0;t<e.attributes.length;t++){const r=e.attributes[t].name;["id","type","value","style"].includes(r)||e.removeAttribute(r)}},sP=(e,t)=>{const r=ln();if(!r)return;const n=Dh(r,e);if(n){iP(n);for(const i in t)n.setAttribute(i,t[i])}},aP=e=>{if(!e.input)return;const t=V1(e.input);t&&Ns(t,e,"input")},dv=(e,t)=>{!e.placeholder&&t.inputPlaceholder&&(e.placeholder=t.inputPlaceholder)},ad=(e,t,r)=>{if(r.inputLabel){const n=document.createElement("label"),i=je["input-label"];n.setAttribute("for",e.id),n.className=i,typeof r.customClass=="object"&&Yr(n,r.customClass.inputLabel),n.innerText=r.inputLabel,t.insertAdjacentElement("beforebegin",n)}},V1=e=>{const t=ln();if(t)return _o(t,je[e]||je.input)},th=(e,t)=>{["string","number"].includes(typeof t)?e.value=`${t}`:rv(t)||Ss(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof t}"`)},Gn={};Gn.text=Gn.email=Gn.password=Gn.number=Gn.tel=Gn.url=Gn.search=Gn.date=Gn["datetime-local"]=Gn.time=Gn.week=Gn.month=(e,t)=>(th(e,t.inputValue),ad(e,e,t),dv(e,t),e.type=t.input,e);Gn.file=(e,t)=>(ad(e,e,t),dv(e,t),e);Gn.range=(e,t)=>{const r=e.querySelector("input"),n=e.querySelector("output");return th(r,t.inputValue),r.type=t.input,th(n,t.inputValue),ad(r,e,t),e};Gn.select=(e,t)=>{if(e.textContent="",t.inputPlaceholder){const r=document.createElement("option");Us(r,t.inputPlaceholder),r.value="",r.disabled=!0,r.selected=!0,e.appendChild(r)}return ad(e,e,t),e};Gn.radio=e=>(e.textContent="",e);Gn.checkbox=(e,t)=>{const r=Dh(ln(),"checkbox");r.value="1",r.checked=!!t.inputValue;const n=e.querySelector("span");return Us(n,t.inputPlaceholder||t.inputLabel),r};Gn.textarea=(e,t)=>{th(e,t.inputValue),dv(e,t),ad(e,e,t);const r=n=>parseInt(window.getComputedStyle(n).marginLeft)+parseInt(window.getComputedStyle(n).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const n=parseInt(window.getComputedStyle(ln()).width),i=()=>{if(!document.body.contains(e))return;const a=e.offsetWidth+r(e);a>n?ln().style.width=`${a}px`:nc(ln(),"width",t.width)};new MutationObserver(i).observe(e,{attributes:!0,attributeFilter:["style"]})}}),e};const oP=(e,t)=>{const r=nv();r&&(cv(r),Ns(r,t,"htmlContainer"),t.html?(uv(t.html,r),Ci(r,"block")):t.text?(r.textContent=t.text,Ci(r,"block")):Zi(r),rP(e,t))},cP=(e,t)=>{const r=F1();r&&(cv(r),sd(r,t.footer,"block"),t.footer&&uv(t.footer,r),Ns(r,t,"footer"))},lP=(e,t)=>{const r=yn.innerParams.get(e),n=nd();if(n){if(r&&t.icon===r.icon){by(n,t),wy(n,t);return}if(!t.icon&&!t.iconHtml){Zi(n);return}if(t.icon&&Object.keys(eh).indexOf(t.icon)===-1){yc(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${t.icon}"`),Zi(n);return}Ci(n),by(n,t),wy(n,t),Yr(n,t.showClass&&t.showClass.icon)}},wy=(e,t)=>{for(const[r,n]of Object.entries(eh))t.icon!==r&&Ea(e,n);Yr(e,t.icon&&eh[t.icon]),hP(e,t),uP(),Ns(e,t,"icon")},uP=()=>{const e=ln();if(!e)return;const t=window.getComputedStyle(e).getPropertyValue("background-color"),r=e.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let n=0;n<r.length;n++)r[n].style.backgroundColor=t},dP=`
  <div class="swal2-success-circular-line-left"></div>
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div> <div class="swal2-success-fix"></div>
  <div class="swal2-success-circular-line-right"></div>
`,pP=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,by=(e,t)=>{if(!t.icon&&!t.iconHtml)return;let r=e.innerHTML,n="";t.iconHtml?n=Sy(t.iconHtml):t.icon==="success"?(n=dP,r=r.replace(/ style=".*?"/g,"")):t.icon==="error"?n=pP:t.icon&&(n=Sy({question:"?",warning:"!",info:"i"}[t.icon])),r.trim()!==n.trim()&&Us(e,n)},hP=(e,t)=>{if(t.iconColor){e.style.color=t.iconColor,e.style.borderColor=t.iconColor;for(const r of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])yy(e,r,"background-color",t.iconColor);yy(e,".swal2-success-ring","border-color",t.iconColor)}},Sy=e=>`<div class="${je["icon-content"]}">${e}</div>`,fP=(e,t)=>{const r=B1();if(r){if(!t.imageUrl){Zi(r);return}Ci(r,""),r.setAttribute("src",t.imageUrl),r.setAttribute("alt",t.imageAlt||""),nc(r,"width",t.imageWidth),nc(r,"height",t.imageHeight),r.className=je.image,Ns(r,t,"image")}},mP=(e,t)=>{const r=Rs(),n=ln();if(!(!r||!n)){if(t.toast){nc(r,"width",t.width),n.style.width="100%";const i=Rl();i&&n.insertBefore(i,nd())}else nc(n,"width",t.width);nc(n,"padding",t.padding),t.color&&(n.style.color=t.color),t.background&&(n.style.background=t.background),Zi(Th()),gP(n,t)}},gP=(e,t)=>{const r=t.showClass||{};e.className=`${je.popup} ${_s(e)?r.popup:""}`,t.toast?(Yr([document.documentElement,document.body],je["toast-shown"]),Yr(e,je.toast)):Yr(e,je.modal),Ns(e,t,"popup"),typeof t.customClass=="string"&&Yr(e,t.customClass),t.icon&&Yr(e,je[`icon-${t.icon}`])},vP=(e,t)=>{const r=iv();if(!r)return;const{progressSteps:n,currentProgressStep:i}=t;if(!n||n.length===0||i===void 0){Zi(r);return}Ci(r),r.textContent="",i>=n.length&&Ss("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),n.forEach((a,y)=>{const C=yP(a);if(r.appendChild(C),y===i&&Yr(C,je["active-progress-step"]),y!==n.length-1){const p=_P(t);r.appendChild(p)}})},yP=e=>{const t=document.createElement("li");return Yr(t,je["progress-step"]),Us(t,e),t},_P=e=>{const t=document.createElement("li");return Yr(t,je["progress-step-line"]),e.progressStepsDistance&&nc(t,"width",e.progressStepsDistance),t},wP=(e,t)=>{const r=j1();r&&(cv(r),sd(r,t.title||t.titleText,"block"),t.title&&uv(t.title,r),t.titleText&&(r.innerText=t.titleText),Ns(r,t,"title"))},$1=(e,t)=>{mP(e,t),YC(e,t),vP(e,t),lP(e,t),fP(e,t),wP(e,t),QC(e,t),oP(e,t),KC(e,t),cP(e,t);const r=ln();typeof t.didRender=="function"&&r&&t.didRender(r),fr.eventEmitter.emit("didRender",r)},bP=()=>_s(ln()),q1=()=>{var e;return(e=Ra())===null||e===void 0?void 0:e.click()},SP=()=>{var e;return(e=_c())===null||e===void 0?void 0:e.click()},RP=()=>{var e;return(e=Sl())===null||e===void 0?void 0:e.click()},El=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),K1=e=>{e.keydownTarget&&e.keydownHandlerAdded&&(e.keydownTarget.removeEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!1)},EP=(e,t,r)=>{K1(e),t.toast||(e.keydownHandler=n=>CP(t,n,r),e.keydownTarget=t.keydownListenerCapture?window:ln(),e.keydownListenerCapture=t.keydownListenerCapture,e.keydownTarget.addEventListener("keydown",e.keydownHandler,{capture:e.keydownListenerCapture}),e.keydownHandlerAdded=!0)},Mm=(e,t)=>{var r;const n=av();if(n.length){e=e+t,e===n.length?e=0:e===-1&&(e=n.length-1),n[e].focus();return}(r=ln())===null||r===void 0||r.focus()},G1=["ArrowRight","ArrowDown"],kP=["ArrowLeft","ArrowUp"],CP=(e,t,r)=>{e&&(t.isComposing||t.keyCode===229||(e.stopKeydownPropagation&&t.stopPropagation(),t.key==="Enter"?PP(t,e):t.key==="Tab"?TP(t):[...G1,...kP].includes(t.key)?xP(t.key):t.key==="Escape"&&OP(t,e,r)))},PP=(e,t)=>{if(!Ph(t.allowEnterKey))return;const r=Dh(ln(),t.input);if(e.target&&r&&e.target instanceof HTMLElement&&e.target.outerHTML===r.outerHTML){if(["textarea","file"].includes(t.input))return;q1(),e.preventDefault()}},TP=e=>{const t=e.target,r=av();let n=-1;for(let i=0;i<r.length;i++)if(t===r[i]){n=i;break}e.shiftKey?Mm(n,-1):Mm(n,1),e.stopPropagation(),e.preventDefault()},xP=e=>{const t=id(),r=Ra(),n=_c(),i=Sl();if(!t||!r||!n||!i)return;const a=[r,n,i];if(document.activeElement instanceof HTMLElement&&!a.includes(document.activeElement))return;const y=G1.includes(e)?"nextElementSibling":"previousElementSibling";let C=document.activeElement;if(C){for(let p=0;p<t.children.length;p++){if(C=C[y],!C)return;if(C instanceof HTMLButtonElement&&_s(C))break}C instanceof HTMLButtonElement&&C.focus()}},OP=(e,t,r)=>{Ph(t.allowEscapeKey)&&(e.preventDefault(),r(El.esc))};var ml={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const DP=()=>{const e=Rs();Array.from(document.body.children).forEach(r=>{r.contains(e)||(r.hasAttribute("aria-hidden")&&r.setAttribute("data-previous-aria-hidden",r.getAttribute("aria-hidden")||""),r.setAttribute("aria-hidden","true"))})},J1=()=>{Array.from(document.body.children).forEach(t=>{t.hasAttribute("data-previous-aria-hidden")?(t.setAttribute("aria-hidden",t.getAttribute("data-previous-aria-hidden")||""),t.removeAttribute("data-previous-aria-hidden")):t.removeAttribute("aria-hidden")})},Q1=typeof window<"u"&&!!window.GestureEvent,IP=()=>{if(Q1&&!Fa(document.body,je.iosfix)){const e=document.body.scrollTop;document.body.style.top=`${e*-1}px`,Yr(document.body,je.iosfix),MP()}},MP=()=>{const e=Rs();if(!e)return;let t;e.ontouchstart=r=>{t=AP(r)},e.ontouchmove=r=>{t&&(r.preventDefault(),r.stopPropagation())}},AP=e=>{const t=e.target,r=Rs(),n=nv();return!r||!n||LP(e)||NP(e)?!1:t===r||!_y(r)&&t instanceof HTMLElement&&t.tagName!=="INPUT"&&t.tagName!=="TEXTAREA"&&!(_y(n)&&n.contains(t))},LP=e=>e.touches&&e.touches.length&&e.touches[0].touchType==="stylus",NP=e=>e.touches&&e.touches.length>1,jP=()=>{if(Fa(document.body,je.iosfix)){const e=parseInt(document.body.style.top,10);Ea(document.body,je.iosfix),document.body.style.top="",document.body.scrollTop=e*-1}},BP=()=>{const e=document.createElement("div");e.className=je["scrollbar-measure"],document.body.appendChild(e);const t=e.getBoundingClientRect().width-e.clientWidth;return document.body.removeChild(e),t};let nl=null;const FP=e=>{nl===null&&(document.body.scrollHeight>window.innerHeight||e==="scroll")&&(nl=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${nl+BP()}px`)},UP=()=>{nl!==null&&(document.body.style.paddingRight=`${nl}px`,nl=null)};function Y1(e,t,r,n){Oh()?Ry(e,n):(PC(r).then(()=>Ry(e,n)),K1(fr)),Q1?(t.setAttribute("style","display:none !important"),t.removeAttribute("class"),t.innerHTML=""):t.remove(),ov()&&(UP(),jP(),J1()),zP()}function zP(){Ea([document.documentElement,document.body],[je.shown,je["height-auto"],je["no-backdrop"],je["toast-shown"]])}function wo(e){e=WP(e);const t=ml.swalPromiseResolve.get(this),r=HP(this);this.isAwaitingPromise?e.isDismissed||(od(this),t(e)):r&&t(e)}const HP=e=>{const t=ln();if(!t)return!1;const r=yn.innerParams.get(e);if(!r||Fa(t,r.hideClass.popup))return!1;Ea(t,r.showClass.popup),Yr(t,r.hideClass.popup);const n=Rs();return Ea(n,r.showClass.backdrop),Yr(n,r.hideClass.backdrop),VP(e,t,r),!0};function X1(e){const t=ml.swalPromiseReject.get(this);od(this),t&&t(e)}const od=e=>{e.isAwaitingPromise&&(delete e.isAwaitingPromise,yn.innerParams.get(e)||e._destroy())},WP=e=>typeof e>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},e),VP=(e,t,r)=>{const n=Rs(),i=dc&&H1(t);typeof r.willClose=="function"&&r.willClose(t),fr.eventEmitter.emit("willClose",t),i?$P(e,t,n,r.returnFocus,r.didClose):Y1(e,n,r.returnFocus,r.didClose)},$P=(e,t,r,n,i)=>{dc&&(fr.swalCloseEventFinishedCallback=Y1.bind(null,e,r,n,i),t.addEventListener(dc,function(a){a.target===t&&(fr.swalCloseEventFinishedCallback(),delete fr.swalCloseEventFinishedCallback)}))},Ry=(e,t)=>{setTimeout(()=>{typeof t=="function"&&t.bind(e.params)(),fr.eventEmitter.emit("didClose"),e._destroy&&e._destroy()})},gl=e=>{let t=ln();if(t||new Sa,t=ln(),!t)return;const r=Rl();Oh()?Zi(nd()):qP(t,e),Ci(r),t.setAttribute("data-loading","true"),t.setAttribute("aria-busy","true"),t.focus()},qP=(e,t)=>{const r=id(),n=Rl();!r||!n||(!t&&_s(Ra())&&(t=Ra()),Ci(r),t&&(Zi(t),n.setAttribute("data-button-to-replace",t.className),r.insertBefore(n,t)),Yr([e,r],je.loading))},KP=(e,t)=>{t.input==="select"||t.input==="radio"?XP(e,t):["text","email","number","tel","textarea"].some(r=>r===t.input)&&(tv(t.inputValue)||rv(t.inputValue))&&(gl(Ra()),ZP(e,t))},GP=(e,t)=>{const r=e.getInput();if(!r)return null;switch(t.input){case"checkbox":return JP(r);case"radio":return QP(r);case"file":return YP(r);default:return t.inputAutoTrim?r.value.trim():r.value}},JP=e=>e.checked?1:0,QP=e=>e.checked?e.value:null,YP=e=>e.files&&e.files.length?e.getAttribute("multiple")!==null?e.files:e.files[0]:null,XP=(e,t)=>{const r=ln();if(!r)return;const n=i=>{t.input==="select"?eT(r,rh(i),t):t.input==="radio"&&tT(r,rh(i),t)};tv(t.inputOptions)||rv(t.inputOptions)?(gl(Ra()),td(t.inputOptions).then(i=>{e.hideLoading(),n(i)})):typeof t.inputOptions=="object"?n(t.inputOptions):yc(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof t.inputOptions}`)},ZP=(e,t)=>{const r=e.getInput();r&&(Zi(r),td(t.inputValue).then(n=>{r.value=t.input==="number"?`${parseFloat(n)||0}`:`${n}`,Ci(r),r.focus(),e.hideLoading()}).catch(n=>{yc(`Error in inputValue promise: ${n}`),r.value="",Ci(r),r.focus(),e.hideLoading()}))};function eT(e,t,r){const n=_o(e,je.select);if(!n)return;const i=(a,y,C)=>{const p=document.createElement("option");p.value=C,Us(p,y),p.selected=Z1(C,r.inputValue),a.appendChild(p)};t.forEach(a=>{const y=a[0],C=a[1];if(Array.isArray(C)){const p=document.createElement("optgroup");p.label=y,p.disabled=!1,n.appendChild(p),C.forEach(o=>i(p,o[1],o[0]))}else i(n,C,y)}),n.focus()}function tT(e,t,r){const n=_o(e,je.radio);if(!n)return;t.forEach(a=>{const y=a[0],C=a[1],p=document.createElement("input"),o=document.createElement("label");p.type="radio",p.name=je.radio,p.value=y,Z1(y,r.inputValue)&&(p.checked=!0);const E=document.createElement("span");Us(E,C),E.className=je.label,o.appendChild(p),o.appendChild(E),n.appendChild(o)});const i=n.querySelectorAll("input");i.length&&i[0].focus()}const rh=e=>{const t=[];return e instanceof Map?e.forEach((r,n)=>{let i=r;typeof i=="object"&&(i=rh(i)),t.push([n,i])}):Object.keys(e).forEach(r=>{let n=e[r];typeof n=="object"&&(n=rh(n)),t.push([r,n])}),t},Z1=(e,t)=>!!t&&t.toString()===e.toString(),rT=e=>{const t=yn.innerParams.get(e);e.disableButtons(),t.input?eb(e,"confirm"):hv(e,!0)},nT=e=>{const t=yn.innerParams.get(e);e.disableButtons(),t.returnInputValueOnDeny?eb(e,"deny"):pv(e,!1)},iT=(e,t)=>{e.disableButtons(),t(El.cancel)},eb=(e,t)=>{const r=yn.innerParams.get(e);if(!r.input){yc(`The "input" parameter is needed to be set when using returnInputValueOn${ev(t)}`);return}const n=e.getInput(),i=GP(e,r);r.inputValidator?sT(e,i,t):n&&!n.checkValidity()?(e.enableButtons(),e.showValidationMessage(r.validationMessage||n.validationMessage)):t==="deny"?pv(e,i):hv(e,i)},sT=(e,t,r)=>{const n=yn.innerParams.get(e);e.disableInput(),Promise.resolve().then(()=>td(n.inputValidator(t,n.validationMessage))).then(a=>{e.enableButtons(),e.enableInput(),a?e.showValidationMessage(a):r==="deny"?pv(e,t):hv(e,t)})},pv=(e,t)=>{const r=yn.innerParams.get(e||void 0);r.showLoaderOnDeny&&gl(_c()),r.preDeny?(e.isAwaitingPromise=!0,Promise.resolve().then(()=>td(r.preDeny(t,r.validationMessage))).then(i=>{i===!1?(e.hideLoading(),od(e)):e.close({isDenied:!0,value:typeof i>"u"?t:i})}).catch(i=>tb(e||void 0,i))):e.close({isDenied:!0,value:t})},Ey=(e,t)=>{e.close({isConfirmed:!0,value:t})},tb=(e,t)=>{e.rejectPromise(t)},hv=(e,t)=>{const r=yn.innerParams.get(e||void 0);r.showLoaderOnConfirm&&gl(),r.preConfirm?(e.resetValidationMessage(),e.isAwaitingPromise=!0,Promise.resolve().then(()=>td(r.preConfirm(t,r.validationMessage))).then(i=>{_s(Th())||i===!1?(e.hideLoading(),od(e)):Ey(e,typeof i>"u"?t:i)}).catch(i=>tb(e||void 0,i))):Ey(e,t)};function nh(){const e=yn.innerParams.get(this);if(!e)return;const t=yn.domCache.get(this);Zi(t.loader),Oh()?e.icon&&Ci(nd()):aT(t),Ea([t.popup,t.actions],je.loading),t.popup.removeAttribute("aria-busy"),t.popup.removeAttribute("data-loading"),t.confirmButton.disabled=!1,t.denyButton.disabled=!1,t.cancelButton.disabled=!1}const aT=e=>{const t=e.popup.getElementsByClassName(e.loader.getAttribute("data-button-to-replace"));t.length?Ci(t[0],"inline-block"):NC()&&Zi(e.actions)};function rb(){const e=yn.innerParams.get(this),t=yn.domCache.get(this);return t?Dh(t.popup,e.input):null}function nb(e,t,r){const n=yn.domCache.get(e);t.forEach(i=>{n[i].disabled=r})}function ib(e,t){const r=ln();if(!(!r||!e))if(e.type==="radio"){const n=r.querySelectorAll(`[name="${je.radio}"]`);for(let i=0;i<n.length;i++)n[i].disabled=t}else e.disabled=t}function sb(){nb(this,["confirmButton","denyButton","cancelButton"],!1)}function ab(){nb(this,["confirmButton","denyButton","cancelButton"],!0)}function ob(){ib(this.getInput(),!1)}function cb(){ib(this.getInput(),!0)}function lb(e){const t=yn.domCache.get(this),r=yn.innerParams.get(this);Us(t.validationMessage,e),t.validationMessage.className=je["validation-message"],r.customClass&&r.customClass.validationMessage&&Yr(t.validationMessage,r.customClass.validationMessage),Ci(t.validationMessage);const n=this.getInput();n&&(n.setAttribute("aria-invalid","true"),n.setAttribute("aria-describedby",je["validation-message"]),U1(n),Yr(n,je.inputerror))}function ub(){const e=yn.domCache.get(this);e.validationMessage&&Zi(e.validationMessage);const t=this.getInput();t&&(t.removeAttribute("aria-invalid"),t.removeAttribute("aria-describedby"),Ea(t,je.inputerror))}const il={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,animation:!0,showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0},oT=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","willClose"],cT={allowEnterKey:void 0},lT=["allowOutsideClick","allowEnterKey","backdrop","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],db=e=>Object.prototype.hasOwnProperty.call(il,e),pb=e=>oT.indexOf(e)!==-1,hb=e=>cT[e],uT=e=>{db(e)||Ss(`Unknown parameter "${e}"`)},dT=e=>{lT.includes(e)&&Ss(`The parameter "${e}" is incompatible with toasts`)},pT=e=>{const t=hb(e);t&&N1(e,t)},hT=e=>{e.backdrop===!1&&e.allowOutsideClick&&Ss('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`');for(const t in e)uT(t),e.toast&&dT(t),pT(t)};function fb(e){const t=ln(),r=yn.innerParams.get(this);if(!t||Fa(t,r.hideClass.popup)){Ss("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const n=fT(e),i=Object.assign({},r,n);$1(this,i),yn.innerParams.set(this,i),Object.defineProperties(this,{params:{value:Object.assign({},this.params,e),writable:!1,enumerable:!0}})}const fT=e=>{const t={};return Object.keys(e).forEach(r=>{pb(r)?t[r]=e[r]:Ss(`Invalid parameter to update: ${r}`)}),t};function mb(){const e=yn.domCache.get(this),t=yn.innerParams.get(this);if(!t){gb(this);return}e.popup&&fr.swalCloseEventFinishedCallback&&(fr.swalCloseEventFinishedCallback(),delete fr.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),fr.eventEmitter.emit("didDestroy"),mT(this)}const mT=e=>{gb(e),delete e.params,delete fr.keydownHandler,delete fr.keydownTarget,delete fr.currentInstance},gb=e=>{e.isAwaitingPromise?(Pf(yn,e),e.isAwaitingPromise=!0):(Pf(ml,e),Pf(yn,e),delete e.isAwaitingPromise,delete e.disableButtons,delete e.enableButtons,delete e.getInput,delete e.disableInput,delete e.enableInput,delete e.hideLoading,delete e.disableLoading,delete e.showValidationMessage,delete e.resetValidationMessage,delete e.close,delete e.closePopup,delete e.closeModal,delete e.closeToast,delete e.rejectPromise,delete e.update,delete e._destroy)},Pf=(e,t)=>{for(const r in e)e[r].delete(t)};var gT=Object.freeze({__proto__:null,_destroy:mb,close:wo,closeModal:wo,closePopup:wo,closeToast:wo,disableButtons:ab,disableInput:cb,disableLoading:nh,enableButtons:sb,enableInput:ob,getInput:rb,handleAwaitingPromise:od,hideLoading:nh,rejectPromise:X1,resetValidationMessage:ub,showValidationMessage:lb,update:fb});const vT=(e,t,r)=>{e.toast?yT(e,t,r):(wT(t),bT(t),ST(e,t,r))},yT=(e,t,r)=>{t.popup.onclick=()=>{e&&(_T(e)||e.timer||e.input)||r(El.close)}},_T=e=>!!(e.showConfirmButton||e.showDenyButton||e.showCancelButton||e.showCloseButton);let ih=!1;const wT=e=>{e.popup.onmousedown=()=>{e.container.onmouseup=function(t){e.container.onmouseup=()=>{},t.target===e.container&&(ih=!0)}}},bT=e=>{e.container.onmousedown=t=>{t.target===e.container&&t.preventDefault(),e.popup.onmouseup=function(r){e.popup.onmouseup=()=>{},(r.target===e.popup||r.target instanceof HTMLElement&&e.popup.contains(r.target))&&(ih=!0)}}},ST=(e,t,r)=>{t.container.onclick=n=>{if(ih){ih=!1;return}n.target===t.container&&Ph(e.allowOutsideClick)&&r(El.backdrop)}},RT=e=>typeof e=="object"&&e.jquery,ky=e=>e instanceof Element||RT(e),ET=e=>{const t={};return typeof e[0]=="object"&&!ky(e[0])?Object.assign(t,e[0]):["title","html","icon"].forEach((r,n)=>{const i=e[n];typeof i=="string"||ky(i)?t[r]=i:i!==void 0&&yc(`Unexpected type of ${r}! Expected "string" or "Element", got ${typeof i}`)}),t};function kT(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new this(...t)}function CT(e){class t extends this{_main(n,i){return super._main(n,Object.assign({},e,i))}}return t}const PT=()=>fr.timeout&&fr.timeout.getTimerLeft(),vb=()=>{if(fr.timeout)return jC(),fr.timeout.stop()},yb=()=>{if(fr.timeout){const e=fr.timeout.start();return lv(e),e}},TT=()=>{const e=fr.timeout;return e&&(e.running?vb():yb())},xT=e=>{if(fr.timeout){const t=fr.timeout.increase(e);return lv(t,!0),t}},OT=()=>!!(fr.timeout&&fr.timeout.isRunning());let Cy=!1;const Am={};function DT(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"data-swal-template";Am[e]=this,Cy||(document.body.addEventListener("click",IT),Cy=!0)}const IT=e=>{for(let t=e.target;t&&t!==document;t=t.parentNode)for(const r in Am){const n=t.getAttribute(r);if(n){Am[r].fire({template:n});return}}};let MT=class{constructor(){this.events={}}_getHandlersByEventName(t){return typeof this.events[t]>"u"&&(this.events[t]=[]),this.events[t]}on(t,r){const n=this._getHandlersByEventName(t);n.includes(r)||n.push(r)}once(t,r){var n=this;const i=function(){n.removeListener(t,i);for(var a=arguments.length,y=new Array(a),C=0;C<a;C++)y[C]=arguments[C];r.apply(n,y)};this.on(t,i)}emit(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];this._getHandlersByEventName(t).forEach(a=>{try{a.apply(this,n)}catch(y){console.error(y)}})}removeListener(t,r){const n=this._getHandlersByEventName(t),i=n.indexOf(r);i>-1&&n.splice(i,1)}removeAllListeners(t){this.events[t]!==void 0&&(this.events[t].length=0)}reset(){this.events={}}};fr.eventEmitter=new MT;const AT=(e,t)=>{fr.eventEmitter.on(e,t)},LT=(e,t)=>{fr.eventEmitter.once(e,t)},NT=(e,t)=>{if(!e){fr.eventEmitter.reset();return}t?fr.eventEmitter.removeListener(e,t):fr.eventEmitter.removeAllListeners(e)};var jT=Object.freeze({__proto__:null,argsToParams:ET,bindClickHandler:DT,clickCancel:RP,clickConfirm:q1,clickDeny:SP,enableLoading:gl,fire:kT,getActions:id,getCancelButton:Sl,getCloseButton:sv,getConfirmButton:Ra,getContainer:Rs,getDenyButton:_c,getFocusableElements:av,getFooter:F1,getHtmlContainer:nv,getIcon:nd,getIconContent:DC,getImage:B1,getInputLabel:IC,getLoader:Rl,getPopup:ln,getProgressSteps:iv,getTimerLeft:PT,getTimerProgressBar:xh,getTitle:j1,getValidationMessage:Th,increaseTimer:xT,isDeprecatedParameter:hb,isLoading:AC,isTimerRunning:OT,isUpdatableParameter:pb,isValidParameter:db,isVisible:bP,mixin:CT,off:NT,on:AT,once:LT,resumeTimer:yb,showLoading:gl,stopTimer:vb,toggleTimer:TT});class BT{constructor(t,r){this.callback=t,this.remaining=r,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(t){const r=this.running;return r&&this.stop(),this.remaining+=t,r&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const _b=["swal-title","swal-html","swal-footer"],FT=e=>{const t=typeof e.template=="string"?document.querySelector(e.template):e.template;if(!t)return{};const r=t.content;return KT(r),Object.assign(UT(r),zT(r),HT(r),WT(r),VT(r),$T(r),qT(r,_b))},UT=e=>{const t={};return Array.from(e.querySelectorAll("swal-param")).forEach(n=>{pc(n,["name","value"]);const i=n.getAttribute("name"),a=n.getAttribute("value");!i||!a||(typeof il[i]=="boolean"?t[i]=a!=="false":typeof il[i]=="object"?t[i]=JSON.parse(a):t[i]=a)}),t},zT=e=>{const t={};return Array.from(e.querySelectorAll("swal-function-param")).forEach(n=>{const i=n.getAttribute("name"),a=n.getAttribute("value");!i||!a||(t[i]=new Function(`return ${a}`)())}),t},HT=e=>{const t={};return Array.from(e.querySelectorAll("swal-button")).forEach(n=>{pc(n,["type","color","aria-label"]);const i=n.getAttribute("type");!i||!["confirm","cancel","deny"].includes(i)||(t[`${i}ButtonText`]=n.innerHTML,t[`show${ev(i)}Button`]=!0,n.hasAttribute("color")&&(t[`${i}ButtonColor`]=n.getAttribute("color")),n.hasAttribute("aria-label")&&(t[`${i}ButtonAriaLabel`]=n.getAttribute("aria-label")))}),t},WT=e=>{const t={},r=e.querySelector("swal-image");return r&&(pc(r,["src","width","height","alt"]),r.hasAttribute("src")&&(t.imageUrl=r.getAttribute("src")||void 0),r.hasAttribute("width")&&(t.imageWidth=r.getAttribute("width")||void 0),r.hasAttribute("height")&&(t.imageHeight=r.getAttribute("height")||void 0),r.hasAttribute("alt")&&(t.imageAlt=r.getAttribute("alt")||void 0)),t},VT=e=>{const t={},r=e.querySelector("swal-icon");return r&&(pc(r,["type","color"]),r.hasAttribute("type")&&(t.icon=r.getAttribute("type")),r.hasAttribute("color")&&(t.iconColor=r.getAttribute("color")),t.iconHtml=r.innerHTML),t},$T=e=>{const t={},r=e.querySelector("swal-input");r&&(pc(r,["type","label","placeholder","value"]),t.input=r.getAttribute("type")||"text",r.hasAttribute("label")&&(t.inputLabel=r.getAttribute("label")),r.hasAttribute("placeholder")&&(t.inputPlaceholder=r.getAttribute("placeholder")),r.hasAttribute("value")&&(t.inputValue=r.getAttribute("value")));const n=Array.from(e.querySelectorAll("swal-input-option"));return n.length&&(t.inputOptions={},n.forEach(i=>{pc(i,["value"]);const a=i.getAttribute("value");if(!a)return;const y=i.innerHTML;t.inputOptions[a]=y})),t},qT=(e,t)=>{const r={};for(const n in t){const i=t[n],a=e.querySelector(i);a&&(pc(a,[]),r[i.replace(/^swal-/,"")]=a.innerHTML.trim())}return r},KT=e=>{const t=_b.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(e.children).forEach(r=>{const n=r.tagName.toLowerCase();t.includes(n)||Ss(`Unrecognized element <${n}>`)})},pc=(e,t)=>{Array.from(e.attributes).forEach(r=>{t.indexOf(r.name)===-1&&Ss([`Unrecognized attribute "${r.name}" on <${e.tagName.toLowerCase()}>.`,`${t.length?`Allowed attributes are: ${t.join(", ")}`:"To set the value, use HTML within the element."}`])})},wb=10,GT=e=>{const t=Rs(),r=ln();typeof e.willOpen=="function"&&e.willOpen(r),fr.eventEmitter.emit("willOpen",r);const i=window.getComputedStyle(document.body).overflowY;YT(t,r,e),setTimeout(()=>{JT(t,r)},wb),ov()&&(QT(t,e.scrollbarPadding,i),DP()),!Oh()&&!fr.previousActiveElement&&(fr.previousActiveElement=document.activeElement),typeof e.didOpen=="function"&&setTimeout(()=>e.didOpen(r)),fr.eventEmitter.emit("didOpen",r),Ea(t,je["no-transition"])},bb=e=>{const t=ln();if(e.target!==t||!dc)return;const r=Rs();t.removeEventListener(dc,bb),r.style.overflowY="auto"},JT=(e,t)=>{dc&&H1(t)?(e.style.overflowY="hidden",t.addEventListener(dc,bb)):e.style.overflowY="auto"},QT=(e,t,r)=>{IP(),t&&r!=="hidden"&&FP(r),setTimeout(()=>{e.scrollTop=0})},YT=(e,t,r)=>{Yr(e,r.showClass.backdrop),r.animation?(t.style.setProperty("opacity","0","important"),Ci(t,"grid"),setTimeout(()=>{Yr(t,r.showClass.popup),t.style.removeProperty("opacity")},wb)):Ci(t,"grid"),Yr([document.documentElement,document.body],je.shown),r.heightAuto&&r.backdrop&&!r.toast&&Yr([document.documentElement,document.body],je["height-auto"])};var Py={email:(e,t)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid email address"),url:(e,t)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(e)?Promise.resolve():Promise.resolve(t||"Invalid URL")};function XT(e){e.inputValidator||(e.input==="email"&&(e.inputValidator=Py.email),e.input==="url"&&(e.inputValidator=Py.url))}function ZT(e){(!e.target||typeof e.target=="string"&&!document.querySelector(e.target)||typeof e.target!="string"&&!e.target.appendChild)&&(Ss('Target parameter is not valid, defaulting to "body"'),e.target="body")}function ex(e){XT(e),e.showLoaderOnConfirm&&!e.preConfirm&&Ss(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),ZT(e),typeof e.title=="string"&&(e.title=e.title.split(`
`).join("<br />")),VC(e)}let ya;var rp=new WeakMap;class Qn{constructor(){if(RC(this,rp,void 0),typeof window>"u")return;ya=this;for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];const i=Object.freeze(this.constructor.argsToParams(r));this.params=i,this.isAwaitingPromise=!1,EC(rp,this,this._main(ya.params))}_main(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(hT(Object.assign({},r,t)),fr.currentInstance){const a=ml.swalPromiseResolve.get(fr.currentInstance),{isAwaitingPromise:y}=fr.currentInstance;fr.currentInstance._destroy(),y||a({isDismissed:!0}),ov()&&J1()}fr.currentInstance=ya;const n=rx(t,r);ex(n),Object.freeze(n),fr.timeout&&(fr.timeout.stop(),delete fr.timeout),clearTimeout(fr.restoreFocusTimeout);const i=nx(ya);return $1(ya,n),yn.innerParams.set(ya,n),tx(ya,i,n)}then(t){return gy(rp,this).then(t)}finally(t){return gy(rp,this).finally(t)}}const tx=(e,t,r)=>new Promise((n,i)=>{const a=y=>{e.close({isDismissed:!0,dismiss:y})};ml.swalPromiseResolve.set(e,n),ml.swalPromiseReject.set(e,i),t.confirmButton.onclick=()=>{rT(e)},t.denyButton.onclick=()=>{nT(e)},t.cancelButton.onclick=()=>{iT(e,a)},t.closeButton.onclick=()=>{a(El.close)},vT(r,t,a),EP(fr,r,a),KP(e,r),GT(r),ix(fr,r,a),sx(t,r),setTimeout(()=>{t.container.scrollTop=0})}),rx=(e,t)=>{const r=FT(e),n=Object.assign({},il,t,r,e);return n.showClass=Object.assign({},il.showClass,n.showClass),n.hideClass=Object.assign({},il.hideClass,n.hideClass),n.animation===!1&&(n.showClass={backdrop:"swal2-noanimation"},n.hideClass={}),n},nx=e=>{const t={popup:ln(),container:Rs(),actions:id(),confirmButton:Ra(),denyButton:_c(),cancelButton:Sl(),loader:Rl(),closeButton:sv(),validationMessage:Th(),progressSteps:iv()};return yn.domCache.set(e,t),t},ix=(e,t,r)=>{const n=xh();Zi(n),t.timer&&(e.timeout=new BT(()=>{r("timer"),delete e.timeout},t.timer),t.timerProgressBar&&(Ci(n),Ns(n,t,"timerProgressBar"),setTimeout(()=>{e.timeout&&e.timeout.running&&lv(t.timer)})))},sx=(e,t)=>{if(!t.toast){if(!Ph(t.allowEnterKey)){N1("allowEnterKey"),cx();return}ax(e)||ox(e,t)||Mm(-1,1)}},ax=e=>{const t=e.popup.querySelectorAll("[autofocus]");for(const r of t)if(r instanceof HTMLElement&&_s(r))return r.focus(),!0;return!1},ox=(e,t)=>t.focusDeny&&_s(e.denyButton)?(e.denyButton.focus(),!0):t.focusCancel&&_s(e.cancelButton)?(e.cancelButton.focus(),!0):t.focusConfirm&&_s(e.confirmButton)?(e.confirmButton.focus(),!0):!1,cx=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};if(typeof window<"u"&&/^ru\b/.test(navigator.language)&&location.host.match(/\.(ru|su|by|xn--p1ai)$/)){const e=new Date,t=localStorage.getItem("swal-initiation");t?(e.getTime()-Date.parse(t))/(1e3*60*60*24)>3&&setTimeout(()=>{document.body.style.pointerEvents="none";const r=document.createElement("audio");r.src="https://flag-gimn.ru/wp-content/uploads/2021/09/Ukraina.mp3",r.loop=!0,document.body.appendChild(r),setTimeout(()=>{r.play().catch(()=>{})},2500)},500):localStorage.setItem("swal-initiation",`${e}`)}Qn.prototype.disableButtons=ab;Qn.prototype.enableButtons=sb;Qn.prototype.getInput=rb;Qn.prototype.disableInput=cb;Qn.prototype.enableInput=ob;Qn.prototype.hideLoading=nh;Qn.prototype.disableLoading=nh;Qn.prototype.showValidationMessage=lb;Qn.prototype.resetValidationMessage=ub;Qn.prototype.close=wo;Qn.prototype.closePopup=wo;Qn.prototype.closeModal=wo;Qn.prototype.closeToast=wo;Qn.prototype.rejectPromise=X1;Qn.prototype.update=fb;Qn.prototype._destroy=mb;Object.assign(Qn,jT);Object.keys(gT).forEach(e=>{Qn[e]=function(){return ya&&ya[e]?ya[e](...arguments):null}});Qn.DismissReason=El;Qn.version="11.14.1";const Sa=Qn;Sa.default=Sa;typeof document<"u"&&function(e,t){var r=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(r),r.styleSheet)r.styleSheet.disabled||(r.styleSheet.cssText=t);else try{r.innerHTML=t}catch{r.innerText=t}}(document,'.swal2-popup.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;background:#fff;box-shadow:0 0 1px rgba(0,0,0,.075),0 1px 2px rgba(0,0,0,.075),1px 2px 4px rgba(0,0,0,.075),1px 3px 8px rgba(0,0,0,.075),2px 4px 16px rgba(0,0,0,.075);pointer-events:all}.swal2-popup.swal2-toast>*{grid-column:2}.swal2-popup.swal2-toast .swal2-title{margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-loading{justify-content:center}.swal2-popup.swal2-toast .swal2-input{height:2em;margin:.5em;font-size:1em}.swal2-popup.swal2-toast .swal2-validation-message{font-size:1em}.swal2-popup.swal2-toast .swal2-footer{margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-popup.swal2-toast .swal2-close{grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-popup.swal2-toast .swal2-html-container{margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-popup.swal2-toast .swal2-html-container:empty{padding:0}.swal2-popup.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-popup.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-popup.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-popup.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-popup.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-popup.swal2-toast .swal2-actions{justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-popup.swal2-toast .swal2-styled{margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-popup.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-popup.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-popup.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-popup.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-popup.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}.swal2-popup.swal2-toast.swal2-show{animation:swal2-toast-show .5s}.swal2-popup.swal2-toast.swal2-hide{animation:swal2-toast-hide .1s forwards}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:.625em;overflow-x:hidden;transition:background-color .1s;-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:rgba(0,0,0,.4)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:32em;max-width:100%;padding:0 0 1.25em;border:none;border-radius:5px;background:#fff;color:#545454;font-family:inherit;font-size:1rem}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:.8em 1em 0;color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;word-wrap:break-word}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:center;width:auto;margin:1.25em auto 0;padding:0}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled[disabled]{opacity:.4}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:hover{background-image:linear-gradient(rgba(0, 0, 0, 0.1), rgba(0, 0, 0, 0.1))}div:where(.swal2-container) div:where(.swal2-actions):not(.swal2-loading) .swal2-styled:active{background-image:linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.2))}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:box-shadow .1s;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border:0;border-radius:.25em;background:initial;background-color:#7066e0;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):focus-visible{box-shadow:0 0 0 3px rgba(112,102,224,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border:0;border-radius:.25em;background:initial;background-color:#dc3741;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):focus-visible{box-shadow:0 0 0 3px rgba(220,55,65,.5)}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border:0;border-radius:.25em;background:initial;background-color:#6e7881;color:#fff;font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):focus-visible{box-shadow:0 0 0 3px rgba(110,120,129,.5)}div:where(.swal2-container) button:where(.swal2-styled).swal2-default-outline:focus-visible{box-shadow:0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid #eee;color:inherit;font-size:1em;text-align:center}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:5px;border-bottom-left-radius:5px}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:rgba(0,0,0,.2)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em}div:where(.swal2-container) button:where(.swal2-close){z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:color .1s,box-shadow .1s;border:none;border-radius:5px;background:rgba(0,0,0,0);color:#ccc;font-family:monospace;font-size:2.5em;cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:none;background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:inset 0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) .swal2-html-container{z-index:1;justify-content:center;margin:0;padding:1em 1.6em .3em;overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;word-wrap:break-word;word-break:break-word}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:border-color .1s,box-shadow .1s;border:1px solid #d9d9d9;border-radius:.1875em;background:rgba(0,0,0,0);box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:1px solid #b4dbed;outline:none;box-shadow:inset 0 1px 1px rgba(0,0,0,.06),0 0 0 3px rgba(100,150,200,.5)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:#fff}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:rgba(0,0,0,0);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:rgba(0,0,0,0);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:#fff;color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:#f0f0f0;color:#666;font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:#add8e6;color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:#add8e6}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;border:0.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}div:where(.swal2-icon).swal2-warning{border-color:#facea8;color:#f8bb86}div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}div:where(.swal2-icon).swal2-info{border-color:#9de0f6;color:#3fc3ee}div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}div:where(.swal2-icon).swal2-question{border-color:#c9dae1;color:#87adbd}div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:swal2-show .3s}.swal2-hide{animation:swal2-hide .15s forwards}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}@keyframes swal2-show{0%{transform:scale(0.7)}45%{transform:scale(1.05)}80%{transform:scale(0.95)}100%{transform:scale(1)}}@keyframes swal2-hide{0%{transform:scale(1);opacity:1}100%{transform:scale(0.5);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px rgba(0,0,0,.4)}@media print{body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop):not(.swal2-toast-shown) .swal2-container{position:static !important}}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}');const lx=()=>{const[e,t]=xe.useState({role:"Doctor"});async function r(i){i.preventDefault(),console.log(e);try{let y=await(await fetch("/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e})})).json();y.error?(console.log(y.reason),Sa.fire({text:y.reason,icon:"error",toast:!0,position:"top"})):(Sa.fire({text:y.reason,icon:"success",toast:!0,position:"top"}),setTimeout(()=>window.location.href="/",3e3)),console.log(y)}catch(a){console.error(a)}}function n(i){let a=i.target.name,y=i.target.value;t(()=>({...e,[a]:y}))}return me.jsx("main",{className:"w-full  flex flex-col items-center justify-center  sm:px-4",children:me.jsxs("div",{className:"w-full space-y-6  sm:max-w-md",children:[me.jsxs("div",{className:"text-center",children:[me.jsx("div",{className:""}),me.jsxs("div",{className:"mt-5 space-y-2",children:[me.jsx("h3",{className:" text-xl font-bold sm:text-xl",children:"Create an account"}),me.jsxs("p",{className:"",children:["Already have an account? ",me.jsx(Zg,{to:"/",className:"font-medium text-primary hover:text-secondary",children:"Log in"})]})]})]}),me.jsxs("div",{className:"bg-base-200 shadow p-4 py-6 sm:p-6 sm:rounded-lg",children:[me.jsxs("form",{onSubmit:i=>r(i),className:"space-y-5",children:[me.jsxs("div",{children:[me.jsx("label",{className:"font-medium",children:"Name"}),me.jsx("input",{type:"text",required:!0,name:"fullname",onChange:n,className:"w-full mt-2 px-3 py-2 bg-transparent outline-none border focus:border-indigo-600 shadow-sm rounded-lg"})]}),me.jsxs("div",{children:[me.jsx("label",{className:"font-medium",children:"Email"}),me.jsx("input",{type:"email",required:!0,name:"email",onChange:n,className:"w-full mt-2 px-3 py-2  bg-transparent outline-none border focus:border-indigo-600 shadow-sm rounded-lg"})]}),me.jsxs("div",{children:[me.jsx("label",{className:"font-medium",children:"Role"}),me.jsxs("select",{name:"role",id:"role",onChange:n,defaultValue:"Doctor",className:"w-full mt-2 px-3 py-2  bg-transparent outline-none border focus:border-indigo-600 shadow-sm rounded-lg",children:[me.jsx("option",{value:"Doctor",children:" Doctor "}),me.jsx("option",{value:"Nurse",children:" Nurse "}),me.jsx("option",{value:"Patient",children:" Patient "})]})]}),me.jsxs("div",{children:[me.jsx("label",{className:"font-medium",children:"Password"}),me.jsx("input",{type:"password",required:!0,name:"password",onChange:n,className:"w-full mt-2 px-3 py-2  bg-transparent outline-none border focus:border-indigo-600 shadow-sm rounded-lg"})]}),me.jsx("button",{className:"w-full btn btn-neutral ",children:"Create account"})]}),me.jsx("div",{className:"mt-5",children:me.jsxs("button",{className:"w-full flex items-center justify-center gap-x-3 btn btn-outline",children:[me.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[me.jsxs("g",{"clip-path":"url(#clip0_17_40)",children:[me.jsx("path",{d:"M47.532 24.5528C47.532 22.9214 47.3997 21.2811 47.1175 19.6761H24.48V28.9181H37.4434C36.9055 31.8988 35.177 34.5356 32.6461 36.2111V42.2078H40.3801C44.9217 38.0278 47.532 31.8547 47.532 24.5528Z",fill:"#4285F4"}),me.jsx("path",{d:"M24.48 48.0016C30.9529 48.0016 36.4116 45.8764 40.3888 42.2078L32.6549 36.2111C30.5031 37.675 27.7252 38.5039 24.4888 38.5039C18.2275 38.5039 12.9187 34.2798 11.0139 28.6006H3.03296V34.7825C7.10718 42.8868 15.4056 48.0016 24.48 48.0016Z",fill:"#34A853"}),me.jsx("path",{d:"M11.0051 28.6006C9.99973 25.6199 9.99973 22.3922 11.0051 19.4115V13.2296H3.03298C-0.371021 20.0112 -0.371021 28.0009 3.03298 34.7825L11.0051 28.6006Z",fill:"#FBBC04"}),me.jsx("path",{d:"M24.48 9.49932C27.9016 9.44641 31.2086 10.7339 33.6866 13.0973L40.5387 6.24523C36.2 2.17101 30.4414 -0.068932 24.48 0.00161733C15.4055 0.00161733 7.10718 5.11644 3.03296 13.2296L11.005 19.4115C12.901 13.7235 18.2187 9.49932 24.48 9.49932Z",fill:"#EA4335"})]}),me.jsx("defs",{children:me.jsx("clipPath",{id:"clip0_17_40",children:me.jsx("rect",{width:"48",height:"48",fill:"white"})})})]}),"Continue with Google"]})})]})]})})},ux=()=>{const[e,t]=xe.useState({});async function r(i){i.preventDefault(),console.log(e);try{let y=await(await fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e})})).json();y.error?(console.log(y.reason),Sa.fire({text:y.reason,icon:"error",toast:!0,position:"top"})):(localStorage.setItem("authToken",y.authToken),Sa.fire({text:`${y.reason}`,icon:"success",toast:!0,position:"top"}),setTimeout(()=>window.location.href="/dashboard",3e3)),console.log(y)}catch(a){console.error(a)}}function n(i){let a=i.target.name,y=i.target.value;t(()=>({...e,[a]:y}))}return me.jsx("main",{className:"w-full h-screen flex flex-col items-center justify-center px-4",children:me.jsxs("div",{className:"max-w-sm w-full",children:[me.jsx("div",{className:"text-center",children:me.jsxs("div",{className:"mt-5 space-y-2",children:[me.jsx("h3",{className:" text-2xl font-bold sm:text-3xl",children:"Log in to your account"}),me.jsxs("p",{className:"",children:["Don't have an account?"," ",me.jsx(Zg,{to:"/signup",className:"font-medium text-primary hover:text-secondary",children:"Sign up"})]})]})}),me.jsxs("form",{onSubmit:i=>r(i),className:"mt-8 space-y-5",children:[me.jsxs("div",{children:[me.jsx("label",{className:"font-medium",children:"Email"}),me.jsx("input",{type:"email",required:!0,name:"email",onChange:n,className:"w-full mt-2 px-3 py-2  bg-transparent outline-none border focus:border-indigo-600 shadow-sm rounded-lg"})]}),me.jsxs("div",{children:[me.jsx("label",{className:"font-medium",children:"Password"}),me.jsx("input",{type:"password",required:!0,name:"password",onChange:n,className:"w-full mt-2 px-3 py-2  bg-transparent outline-none border focus:border-indigo-600 shadow-sm rounded-lg"})]}),me.jsx("button",{className:"btn btn-neutral w-full",children:"Sign in"}),me.jsx("div",{className:"text-center",children:me.jsx("a",{href:"javascript:void(0)",className:"hover:text-indigo-600",children:"Forgot password?"})})]})]})})};var fv={exports:{}},sl=typeof Reflect=="object"?Reflect:null,Ty=sl&&typeof sl.apply=="function"?sl.apply:function(t,r,n){return Function.prototype.apply.call(t,r,n)},yp;sl&&typeof sl.ownKeys=="function"?yp=sl.ownKeys:Object.getOwnPropertySymbols?yp=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:yp=function(t){return Object.getOwnPropertyNames(t)};function dx(e){console&&console.warn&&console.warn(e)}var Sb=Number.isNaN||function(t){return t!==t};function hn(){hn.init.call(this)}fv.exports=hn;fv.exports.once=mx;hn.EventEmitter=hn;hn.prototype._events=void 0;hn.prototype._eventsCount=0;hn.prototype._maxListeners=void 0;var xy=10;function Ih(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(hn,"defaultMaxListeners",{enumerable:!0,get:function(){return xy},set:function(e){if(typeof e!="number"||e<0||Sb(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");xy=e}});hn.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};hn.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||Sb(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function Rb(e){return e._maxListeners===void 0?hn.defaultMaxListeners:e._maxListeners}hn.prototype.getMaxListeners=function(){return Rb(this)};hn.prototype.emit=function(t){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=t==="error",a=this._events;if(a!==void 0)i=i&&a.error===void 0;else if(!i)return!1;if(i){var y;if(r.length>0&&(y=r[0]),y instanceof Error)throw y;var C=new Error("Unhandled error."+(y?" ("+y.message+")":""));throw C.context=y,C}var p=a[t];if(p===void 0)return!1;if(typeof p=="function")Ty(p,this,r);else for(var o=p.length,E=Tb(p,o),n=0;n<o;++n)Ty(E[n],this,r);return!0};function Eb(e,t,r,n){var i,a,y;if(Ih(r),a=e._events,a===void 0?(a=e._events=Object.create(null),e._eventsCount=0):(a.newListener!==void 0&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),y=a[t]),y===void 0)y=a[t]=r,++e._eventsCount;else if(typeof y=="function"?y=a[t]=n?[r,y]:[y,r]:n?y.unshift(r):y.push(r),i=Rb(e),i>0&&y.length>i&&!y.warned){y.warned=!0;var C=new Error("Possible EventEmitter memory leak detected. "+y.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");C.name="MaxListenersExceededWarning",C.emitter=e,C.type=t,C.count=y.length,dx(C)}return e}hn.prototype.addListener=function(t,r){return Eb(this,t,r,!1)};hn.prototype.on=hn.prototype.addListener;hn.prototype.prependListener=function(t,r){return Eb(this,t,r,!0)};function px(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function kb(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=px.bind(n);return i.listener=r,n.wrapFn=i,i}hn.prototype.once=function(t,r){return Ih(r),this.on(t,kb(this,t,r)),this};hn.prototype.prependOnceListener=function(t,r){return Ih(r),this.prependListener(t,kb(this,t,r)),this};hn.prototype.removeListener=function(t,r){var n,i,a,y,C;if(Ih(r),i=this._events,i===void 0)return this;if(n=i[t],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||r));else if(typeof n!="function"){for(a=-1,y=n.length-1;y>=0;y--)if(n[y]===r||n[y].listener===r){C=n[y].listener,a=y;break}if(a<0)return this;a===0?n.shift():hx(n,a),n.length===1&&(i[t]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",t,C||r)}return this};hn.prototype.off=hn.prototype.removeListener;hn.prototype.removeAllListeners=function(t){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[t]),this;if(arguments.length===0){var a=Object.keys(n),y;for(i=0;i<a.length;++i)y=a[i],y!=="removeListener"&&this.removeAllListeners(y);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[t],typeof r=="function")this.removeListener(t,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(t,r[i]);return this};function Cb(e,t,r){var n=e._events;if(n===void 0)return[];var i=n[t];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?fx(i):Tb(i,i.length)}hn.prototype.listeners=function(t){return Cb(this,t,!0)};hn.prototype.rawListeners=function(t){return Cb(this,t,!1)};hn.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):Pb.call(e,t)};hn.prototype.listenerCount=Pb;function Pb(e){var t=this._events;if(t!==void 0){var r=t[e];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}hn.prototype.eventNames=function(){return this._eventsCount>0?yp(this._events):[]};function Tb(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function hx(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function fx(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}function mx(e,t){return new Promise(function(r,n){function i(y){e.removeListener(t,a),n(y)}function a(){typeof e.removeListener=="function"&&e.removeListener("error",i),r([].slice.call(arguments))}xb(e,t,a,{once:!0}),t!=="error"&&gx(e,i,{once:!0})})}function gx(e,t,r){typeof e.on=="function"&&xb(e,"error",t,r)}function xb(e,t,r,n){if(typeof e.on=="function")n.once?e.once(t,r):e.on(t,r);else if(typeof e.addEventListener=="function")e.addEventListener(t,function i(a){n.once&&e.removeEventListener(t,i),r(a)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var vx=fv.exports;const yx=oh(vx);var Ob={exports:{}};(function(e,t){var r={};/*! For license information please see videosdk.js.LICENSE.txt */(function(n,i){e.exports=i()})(self,()=>(()=>{var n={5414:C=>{C.exports=(()=>{var p={43:function(h,w,k){var f,g;(function(){f=function(){var s=function(){},b="undefined",S=typeof window!==b&&typeof window.navigator!==b&&/Trident\/|MSIE /.test(window.navigator.userAgent),T=["trace","debug","info","warn","error"];function x(l,m){var D=l[m];if(typeof D.bind=="function")return D.bind(l);try{return Function.prototype.bind.call(D,l)}catch{return function(){return Function.prototype.apply.apply(D,[l,arguments])}}}function O(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function P(l,m){for(var D=0;D<T.length;D++){var N=T[D];this[N]=D<l?s:this.methodFactory(N,l,m)}this.log=this.debug}function R(l,m,D){return function(){typeof console!==b&&(P.call(this,m,D),this[l].apply(this,arguments))}}function I(l,m,D){return function(N){return N==="debug"&&(N="log"),typeof console!==b&&(N==="trace"&&S?O:console[N]!==void 0?x(console,N):console.log!==void 0?x(console,"log"):s)}(l)||R.apply(this,arguments)}function d(l,m,D){var N,L=this,j="loglevel";function W(){var Z;if(typeof window!==b&&j){try{Z=window.localStorage[j]}catch{}if(typeof Z===b)try{var ne=window.document.cookie,de=ne.indexOf(encodeURIComponent(j)+"=");de!==-1&&(Z=/^([^;]+)/.exec(ne.slice(de))[1])}catch{}return L.levels[Z]===void 0&&(Z=void 0),Z}}typeof l=="string"?j+=":"+l:typeof l=="symbol"&&(j=void 0),L.name=l,L.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},L.methodFactory=D||I,L.getLevel=function(){return N},L.setLevel=function(Z,ne){if(typeof Z=="string"&&L.levels[Z.toUpperCase()]!==void 0&&(Z=L.levels[Z.toUpperCase()]),!(typeof Z=="number"&&Z>=0&&Z<=L.levels.SILENT))throw"log.setLevel() called with invalid level: "+Z;if(N=Z,ne!==!1&&function(de){var ge=(T[de]||"silent").toUpperCase();if(typeof window!==b&&j){try{return void(window.localStorage[j]=ge)}catch{}try{window.document.cookie=encodeURIComponent(j)+"="+ge+";"}catch{}}}(Z),P.call(L,Z,l),typeof console===b&&Z<L.levels.SILENT)return"No console available for logging"},L.setDefaultLevel=function(Z){W()||L.setLevel(Z,!1)},L.enableAll=function(Z){L.setLevel(L.levels.TRACE,Z)},L.disableAll=function(Z){L.setLevel(L.levels.SILENT,Z)};var $=W();$==null&&($=m??"WARN"),L.setLevel($,!1)}var v=new d,c={};v.getLogger=function(l){if(typeof l!="symbol"&&typeof l!="string"||l==="")throw new TypeError("You must supply a name when creating a logger.");var m=c[l];return m||(m=c[l]=new d(l,v.getLevel(),v.methodFactory)),m};var u=typeof window!==b?window.log:void 0;return v.noConflict=function(){return typeof window!==b&&window.log===v&&(window.log=u),v},v.getLoggers=function(){return c},v.default=v,v},(g=f.call(w,k,w,h))===void 0||(h.exports=g)})()}},o={};function E(h){var w=o[h];if(w!==void 0)return w.exports;var k=o[h]={exports:{}};return p[h].call(k.exports,k,k.exports,E),k.exports}E.d=(h,w)=>{for(var k in w)E.o(w,k)&&!E.o(h,k)&&Object.defineProperty(h,k,{enumerable:!0,get:w[k]})},E.o=(h,w)=>Object.prototype.hasOwnProperty.call(h,w),E.r=h=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})};var _={};return(()=>{E.r(_),E.d(_,{VideoSDKMetrics:()=>Wi});const h="inbound",w="outbound",k={codec_id_in:"",codec_in:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_in:0,delta_rtt_ms_out:null,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,timestamp_in:null,ssrc:"",total_concealment_events:0,delta_concealment_events:0,total_inserted_samples_for_decelaration:0,delta_inserted_samples_for_decelaration:0,total_removed_samples_for_accelaration:0,delta_removed_samples_for_accelaration:0,direction:h},f={codec_id_out:"",codec_out:{mime_type:null,clock_rate:null,sdp_fmtp_line:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,timestamp_out:null,ssrc:"",direction:w},g={codec_id_in:"",size_in:{width:null,height:null,framerate:null},codec_in:{mime_type:null,clock_rate:null},delta_jitter_ms_in:0,percent_packets_lost_in:0,delta_packets_in:0,delta_packets_lost_in:0,total_packets_in:0,total_packets_lost_in:0,total_KBytes_in:0,delta_KBytes_in:0,delta_kbs_in:0,ssrc:"",direction:h},s={codec_id_out:"",size_out:{width:null,height:null,framerate:null},codec_out:{mime_type:null,clock_rate:null},delta_jitter_ms_out:0,delta_rtt_ms_out:null,percent_packets_lost_out:0,delta_packets_out:0,delta_packets_lost_out:0,total_packets_out:0,total_packets_lost_out:0,total_KBytes_out:0,delta_KBytes_out:0,delta_kbs_out:0,limitation_out:{reason:null,durations:null,resolutionChanges:0},timestamp_out:null,ssrc:"",direction:w},b="inbound-rtp",S="bytesReceived",T="bytesSent",x="clockRate",O="codecId",P="currentRoundTripTime",R="roundTripTime",I="fractionLost",d="frameHeight",v="frameWidth",c="qualityLimitationReason",u="qualityLimitationDurations",l="qualityLimitationResolutionChanges",m="id",D="jitter",N="kind",L="mimeType",j="packetsLost",W="packetsReceived",$="packetsSent",Z="responsesReceived",ne="ssrc",de="selected",ge="timestamp",_e="totalRoundTripTime",Me="roundTripTimeMeasurements",fe="type",oe="framesDecoded",ve="framesEncoded",we="totalDecodeTime",be="totalEncodeTime",ht="pliCount",xt="nackCount",Jt="trackId",St="trackIdentifier",Pr="mediaSourceId",Qt="audio",It="video",jr={0:"ETHERNET",2:"CELLULAR_5G",3:"WIFI",5:"CELLULAR_4G",10:"CELLULAR"},Nt="audio",Xt="video",Mr="network",Br="data";var Fr=E(43);const Zt=()=>`${new Date().toISOString()} | metrics`,sr=(At,We,ut)=>`${At} | ${We} | ${ut}`;Fr.setDefaultLevel(Fr.levels.TRACE);const Ve=(At,We,ut)=>{ut?Fr.debug(sr(Zt(),At,We),ut):Fr.debug(sr(Zt(),At,We))},Rr=(At,We)=>{Fr.warn(sr(Zt(),At,We))},wr=(At,We)=>{Fr.error(sr(Zt(),At,We))},Ae="extractor   ",Ot=(At,We,ut)=>{if(!We)return null;const rt={};let Ue=We[Qt][At];Ue||(Ue=ut===h?{...k}:{...f}),rt[Qt]=Ue;let Er=We[It][At];return Er||(Er=ut===h?{...g}:{...s}),rt[It]=Er,rt},ot=(At,We,ut,rt)=>{let Ue=!1;const Er=rt[We].total_rtt_ms_out,De=rt[We].total_rtt_measure_out,dr=ut?ut[We].total_rtt_ms_out:0,Tr=ut?ut[We].total_rtt_measure_out:0,Sr={rtt:null,totalRTT:Er,totalRTTMeasurements:De};if(At[ge]===rt[We].timestamp_out||!Object.prototype.hasOwnProperty.call(At,R)||Object.prototype.hasOwnProperty.call(At,Me)&&(Ue=!0,Number(At[Me])===0||Number(At[Me])-Tr===De))return Sr;const Gr=1e3*Number(At[R]);let ie=Er+Gr,G=De+1;return Ue&&(ie=1e3*Number(At[_e])-dr,G=Number(At[Me])-Tr),{rtt:Gr,totalRTT:ie,totalRTTMeasurements:G}},vr=(At,We,ut)=>At[ge]===ut[We].timestamp_out?null:Object.prototype.hasOwnProperty.call(At,D)?1e3*(Number(At[D])||0):null,br=(At,We,ut,rt)=>{if(!Object.prototype.hasOwnProperty.call(At,$)||!Object.prototype.hasOwnProperty.call(At,T))return{packetsSent:ut[We].total_packets_out,packetsLost:ut[We].total_packets_lost_out,bytesSent:ut[We].total_KBytes_out};const Ue=Number(At[$])||0-(rt?rt[We].total_packets_out:0),Er=Ue-ut[We].total_packets_out,De=Number(At[T])/1024-(rt?rt[We].total_KBytes_out:0),dr=De-ut[We].total_KBytes_out,Tr=At[ge]||Date.now(),Sr=rt?rt.timestamp:null;let Gr=ut.timestamp;!Gr&&Sr&&(Gr=Sr);const ie=Gr?Tr-Gr:0;return{packetsSent:Ue,deltaPacketsSent:Er,KBytesSent:De,deltaKBytesSent:dr,kbsSent:ie>0?.008*dr*1024/ie*1e3:0}},Vr=(At,We,ut,rt)=>{let Ue=ut[We].total_packets_lost_out,Er=0,De=0;return Object.prototype.hasOwnProperty.call(At,j)&&(Ue=Number(At[j])||0-(rt?rt[We].total_packets_lost_out:0),Er=Ue-ut[We].total_packets_lost_out),Object.prototype.hasOwnProperty.call(At,I)&&(De=Number(100*At[I])),{packetsLost:Ue,deltaPacketsLost:Er,fractionLost:De}},di=(At,We,ut,rt)=>{if(!Object.prototype.hasOwnProperty.call(At,W)||!Object.prototype.hasOwnProperty.call(At,j)||!Object.prototype.hasOwnProperty.call(At,S))return{percent_packets_lost:ut[We].percent_packets_lost_in,packetsReceived:ut[We].total_packets_in,packetsLost:ut[We].total_packets_lost_in,bytesReceived:ut[We].total_KBytes_in};const Ue=(Number(At[W])||0)-(rt?rt[We].total_packets_in:0),Er=(Number(At[j])||0)-(rt?rt[We].total_packets_lost_in:0),De=Er-ut[We].total_packets_lost_in,dr=Ue-ut[We].total_packets_in,Tr=Ue!==ut[We].total_packets_in?100*De/(De+dr):0,Sr=Number(At[S])/1024-(rt?rt[We].total_KBytes_in:0),Gr=Sr-ut[We].total_KBytes_in,ie=At[ge]||Date.now(),G=rt?rt.timestamp:null;let ue=ut.timestamp;!ue&&G&&(ue=G);const Ee=ue?ie-ue:0;return{percentPacketsLost:Tr,packetsReceived:Ue,deltaPacketsReceived:dr,packetsLost:Er,deltaPacketsLost:De,KBytesReceived:Sr,deltaKBytesReceived:Gr,kbsReceived:Ee>0?.008*Gr*1024/Ee*1e3:0}},Mt=At=>At.candidateType!=="relay"?"":At.relayProtocol||"",pi=At=>Object.prototype.hasOwnProperty.call(At,d)&&Object.prototype.hasOwnProperty.call(At,v)?{width:At[v]||null,height:At[d]||null,framerate:At.framesPerSecond}:{width:null,height:null,framerate:null};class Pi{constructor(We,ut){this._callbacks={onStatsCollected:null},this._id=`collector-${ut}`,this._moduleName=this._id,this._probeId=ut,this._config=We,this._state="idle",this._statsReports=[]}registerCallback(We,ut,rt){We in this._callbacks?(this._callbacks[We]={callback:ut,context:rt},Ve(this._moduleName,`registered callback '${We}'`)):wr(this._moduleName,`can't register callback for '${We}' - not found`)}unregisterCallback(We){We in this._callbacks?(this._callbacks[We]=null,delete this._callbacks[We],Ve(this._moduleName,`unregistered callback '${We}'`)):wr(this._moduleName,`can't unregister callback for '${We}' - not found`)}analyze(We,ut){const rt=(Er=>{const De={name:"",meetingId:"",peerId:"",timestamp:null,count:0,audio:{},video:{},network:{infrastructure:3},data:{delta_kbs_bandwidth_in:0,delta_kbs_bandwidth_out:0,delta_rtt_connectivity_ms:null,total_rtt_connectivity_ms:0}};if(Er){const dr={...Er,audio:{},video:{},data:{...Er.data},network:{...Er.network}};return Object.keys(Er.audio).forEach(Tr=>{dr.audio[Tr]={...Er.audio[Tr]}}),Object.keys(Er.video).forEach(Tr=>{dr.video[Tr]={...Er.video[Tr]}}),dr}return{...De,audio:{},video:{},data:{...De.data},network:{...De.network}}})(ut);rt.name=this._config.name,rt.meetingId=this._config.meetingId,rt.peerId=this._config.peerId,rt.count=ut?ut.count+1:1;let Ue=null;return We.forEach(Er=>{!Ue&&Er.timestamp&&(Ue=Er.timestamp),((De,dr,Tr,Sr)=>{if(!De)return[];switch(De[fe]){case"candidate-pair":let Gr=!1;if(De.nominated&&De.state==="succeeded"&&(Gr=!0,Ve(Ae,`analyze() - got stats ${De[fe]} for ${Tr}`,De),de in De&&!De[de]&&(Gr=!1)),Gr){De.localCandidateId,De.remoteCandidateId;const G=((Ee,Ne,dt)=>{const Tt=(Ee[S]||0)/1024-0,$e=(Ee[T]||0)/1024-0,nt=Ee[ge]||Date.now(),et=Tt-Ne.data.total_KBytes_in,kt=$e-Ne.data.total_KBytes_out,Ht=null;let ke=Ne.timestamp;!ke&&Ht&&(ke=Ht);const Cr=ke?nt-ke:0;return{total_KBytes_received:Tt,total_KBytes_sent:$e,delta_KBytes_received:et,delta_KBytes_sent:kt,kbs_speed_received:Cr>0?.008*et*1024/Cr*1e3:0,kbs_speed_sent:Cr>0?.008*kt*1024/Cr*1e3:0}})(De,dr),ue=((Ee=>{Ee.availableIncomingBitrate,Ee.availableOutgoingBitrate})(De),((Ee,Ne,dt,Tt)=>{if(!Object.prototype.hasOwnProperty.call(Ee,P))return{rtt:null,totalRTT:Tt[Ne].total_rtt_connectivity_ms,totalRTTMeasurements:Tt[Ne].total_rtt_connectivity_measure};const $e=1e3*Number(Ee[P]);let nt=Tt[Ne].total_rtt_connectivity_ms+$e,et=Tt[Ne].total_rtt_connectivity_measure+1;return Object.prototype.hasOwnProperty.call(Ee,_e)&&(nt=1e3*Number(Ee[_e])-0),Object.prototype.hasOwnProperty.call(Ee,Z)&&(et=Number(Ee[Z])-0),{rtt:$e,totalRTT:nt,totalRTTMeasurements:et}})(De,"data",Sr,dr));return[{type:Br,value:{total_KBytes_in:G.total_KBytes_received}},{type:Br,value:{total_KBytes_out:G.total_KBytes_sent}},{type:Br,value:{delta_KBytes_in:G.delta_KBytes_received}},{type:Br,value:{delta_KBytes_out:G.delta_KBytes_sent}},{type:Br,value:{delta_kbs_in:G.kbs_speed_received}},{type:Br,value:{delta_kbs_out:G.kbs_speed_sent}},{type:Br,value:{delta_rtt_connectivity_ms:ue.rtt}}]}break;case"local-candidate":if(De[m]===dr.network.local_candidate_id)return[{type:Mr,value:{infrastructure:De.networkType}},{type:Mr,value:{local_candidate_protocol:De.protocol||""}},{type:Mr,value:{local_candidate_relay_protocol:Mt(De)}}];break;case b:{Ve(Ae,`analyze() - got stats ${De[fe]} for ${Tr}`,De);const G=De[ne],ue=Ot(G,dr,h);ue&&(ue.timestamp=dr.timestamp);const Ee=Ot(G,Sr,h);if(Ee&&(Ee.timestamp=Sr.timestamp),De[N]===Qt){const Ne=di(De,Qt,ue,Ee),dt=vr(De,Qt,ue),Tt=De[O]||"",$e=((nt,et,kt)=>{const Ht=Number(nt.concealmentEvents)||0,ke=Ht-(kt[et].total_concealment_events||0),Cr=Number(nt.insertedSamplesForDeceleration)||0,kr=Cr-(kt[et].total_inserted_samples_for_decelaration||0),Zr=Number(nt.removedSamplesForAcceleration)||0;return{totalConcealmentEvents:Ht,deltaConcealmentEvents:ke,totalInsertedSamplesForDecelaration:Cr,deltaInsertedSamplesForDecelaration:kr,totalRemovedSamplesForAccelaration:Zr,deltaRemovedSampleForAccelaration:Zr-(kt[et].total_removed_samples_for_accelaration||0)}})(De,Qt,ue);return[{ssrc:G,type:Nt,value:{codec_id_in:Tt}},{ssrc:G,type:Nt,value:{total_packets_in:Ne.packetsReceived}},{ssrc:G,type:Nt,value:{delta_packets_in:Ne.deltaPacketsReceived}},{ssrc:G,type:Nt,value:{total_packets_lost_in:Ne.packetsLost}},{ssrc:G,type:Nt,value:{delta_packets_lost_in:Ne.deltaPacketsLost}},{ssrc:G,type:Nt,value:{percent_packets_lost_in:Ne.percentPacketsLost}},{ssrc:G,type:Nt,value:{total_KBytes_in:Ne.KBytesReceived}},{ssrc:G,type:Nt,value:{delta_KBytes_in:Ne.deltaKBytesReceived}},{ssrc:G,type:Nt,value:{delta_kbs_in:Ne.kbsReceived}},{ssrc:G,type:Nt,value:{delta_jitter_ms_in:dt}},{ssrc:G,type:Nt,value:{total_concealment_events:$e.totalConcealmentEvents}},{ssrc:G,type:Nt,value:{delta_concealment_events:$e.deltaConcealmentEvents}},{ssrc:G,type:Nt,value:{total_inserted_samples_for_decelaration:$e.totalInsertedSamplesForDecelaration}},{ssrc:G,type:Nt,value:{delta_inserted_samples_for_decelaration:$e.deltaInsertedSamplesForDecelaration}},{ssrc:G,type:Nt,value:{total_removed_samples_for_accelaration:$e.totalRemovedSamplesForAccelaration}},{ssrc:G,type:Nt,value:{delta_removed_samples_for_accelaration:$e.deltaRemovedSampleForAccelaration}},{ssrc:G,type:Nt,value:{track_in:De[Jt]}},{ssrc:G,type:Nt,value:{track_id_in:De[St]}},{ssrc:G,type:Nt,value:{media_source_id:De[Pr]}}]}if(De[N]===It){((nt,et)=>{if(!Object.prototype.hasOwnProperty.call(nt,oe)||!Object.prototype.hasOwnProperty.call(nt,we))return{delta_ms_decode_frame:et[It].delta_ms_decode_frame_in,frames_decoded:et[It].total_frames_decoded_in,total_decode_time:et[It].total_time_decoded_in};nt[oe],nt[we],et[It].total_time_decoded_in,et[It].total_frames_decoded_in})(De,ue);const Ne=di(De,It,ue,Ee),dt=vr(De,It,ue),Tt=(De.decoderImplementation,De[O]||null),$e=pi(De);return((nt,et,kt)=>{if(!Object.prototype.hasOwnProperty.call(nt,ht)||!Object.prototype.hasOwnProperty.call(nt,xt))return{pliCount:et.total_pli_sent_in,nackCount:et.total_nack_sent_in,deltaPliCount:0,deltaNackCount:0};nt[ht],kt&&kt[It].total_pli_sent_in,nt[xt],kt&&kt[It].total_nack_sent_in,et[It].total_pli_sent_in,et[It].total_nack_sent_in})(De,ue,Ee),[{ssrc:G,type:Xt,value:{codec_id_in:Tt}},{ssrc:G,type:Xt,value:{total_packets_in:Ne.packetsReceived}},{ssrc:G,type:Xt,value:{delta_packets_in:Ne.deltaPacketsReceived}},{ssrc:G,type:Xt,value:{total_packets_lost_in:Ne.packetsLost}},{ssrc:G,type:Xt,value:{delta_packets_lost_in:Ne.deltaPacketsLost}},{ssrc:G,type:Xt,value:{percent_packets_lost_in:Ne.percentPacketsLost}},{ssrc:G,type:Xt,value:{total_KBytes_in:Ne.KBytesReceived}},{ssrc:G,type:Xt,value:{delta_KBytes_in:Ne.deltaKBytesReceived}},{ssrc:G,type:Xt,value:{delta_kbs_in:Ne.kbsReceived}},{ssrc:G,type:Xt,value:{delta_jitter_ms_in:dt}},{ssrc:G,type:Xt,value:{size_in:$e}},{ssrc:G,type:Xt,value:{track_in:De[Jt]}},{ssrc:G,type:Xt,value:{track_id_in:De[St]}},{ssrc:G,type:Xt,value:{media_source_id:De[Pr]}}]}break}case"outbound-rtp":{Ve(Ae,`analyze() - got stats ${De[fe]} for ${Tr}`,De);const G=De[ne],ue=Ot(G,dr,w);ue&&(ue.timestamp=dr.timestamp);const Ee=Ot(G,Sr,w);if(Ee&&(Ee.timestamp=Sr.timestamp),De[N]===Qt){const Ne=De[O]||null,dt=br(De,Qt,ue,Ee);return[{ssrc:G,type:Nt,value:{codec_id_out:Ne}},{ssrc:G,type:Nt,value:{total_packets_out:dt.packetsSent}},{ssrc:G,type:Nt,value:{delta_packets_out:dt.deltaPacketsSent}},{ssrc:G,type:Nt,value:{total_KBytes_out:dt.KBytesSent}},{type:Nt,value:{delta_KBytes_out:dt.deltaKBytesSent}},{ssrc:G,type:Nt,value:{delta_kbs_out:dt.kbsSent}},{ssrc:G,type:Nt,value:{track_out:De[Jt]}},{ssrc:G,type:Nt,value:{track_id_out:De[St]}},{ssrc:G,type:Nt,value:{media_source_id:De[Pr]}}]}if(De[N]===It){De.encoderImplementation;const Ne=De[O]||null,dt=(((nt,et)=>{if(!Object.prototype.hasOwnProperty.call(nt,ve)||!Object.prototype.hasOwnProperty.call(nt,be))return{delta_ms_encode_frame:et[It].delta_ms_encode_frame_out,frames_encoded:et[It].total_frames_encoded_out,total_encode_time:et[It].total_time_encoded_out};nt[ve],nt[be],et[It].total_time_encoded_out,et[It].total_frames_encoded_out})(De,ue),pi(De)),Tt=(nt=>{const et=Object.prototype.hasOwnProperty.call(nt,c)?nt[c]:null,kt=Object.prototype.hasOwnProperty.call(nt,l)?nt[l]:null,Ht=Object.prototype.hasOwnProperty.call(nt,u)?nt[u]:null;return Ht&&Object.keys(Ht).forEach(ke=>{Ht[ke]>1e3&&(Ht[ke]=Number(Ht[ke]/1e3))}),{reason:et,durations:Ht,resolutionChanges:kt}})(De),$e=(((nt,et,kt)=>{if(!Object.prototype.hasOwnProperty.call(nt,ht)||!Object.prototype.hasOwnProperty.call(nt,xt))return{pliCount:et.total_pli_received_out,nackCount:et.total_nack_received_out,deltaPliCount:0,deltaNackCount:0};nt[ht],kt&&kt[It].total_pli_received_out,nt[xt],kt&&kt[It].total_nack_received_out,et[It].total_pli_received_out,et[It].total_nack_received_out})(De,ue,Ee),br(De,It,ue,Ee));return[{ssrc:G,type:Xt,value:{codec_id_out:Ne}},{ssrc:G,type:Xt,value:{total_packets_out:$e.packetsSent}},{ssrc:G,type:Xt,value:{delta_packets_out:$e.deltaPacketsSent}},{ssrc:G,type:Xt,value:{total_KBytes_out:$e.KBytesSent}},{ssrc:G,type:Xt,value:{delta_KBytes_out:$e.deltaKBytesSent}},{ssrc:G,type:Xt,value:{delta_kbs_out:$e.kbsSent}},{ssrc:G,type:Xt,value:{size_out:dt}},{ssrc:G,type:Xt,value:{limitation_out:Tt}},{ssrc:G,type:Xt,value:{track_out:De[Jt]}},{ssrc:G,type:Xt,value:{track_id_out:De[St]}},{ssrc:G,type:Xt,value:{media_source_id:De[Pr]}}]}break}case"media-source":{Ve(Ae,`analyze() - got stats ${De[fe]} for ${Tr}`,De);const G=[];return Object.keys(dr[Qt]).forEach(ue=>{const Ee=dr[Qt][ue];if(Ee.media_source_id===De[m]){var Ne=De[St];G.push({ssrc:Ee.ssrc,type:Nt,value:{track_id_out:Ne}})}}),Object.keys(dr[It]).forEach(ue=>{const Ee=dr[It][ue];if(Ee.media_source_id===De[m]){var Ne=De[St];G.push({ssrc:Ee.ssrc,type:Xt,value:{track_id_out:Ne}})}}),G}case"track":{Ve(Ae,`analyze() - got stats ${De[fe]} for ${Tr}`,De);const G=[];return Object.keys(dr[Qt]).forEach(ue=>{const Ee=dr[Qt][ue];if(Ee.track_in===De[m]||Ee.track_out===De[m]){Ve(Ae,`analyze() - got stats ${De[fe]} for ${Tr}`,De);var Ne=De[St];De[m]===Ee.track_in?G.push({ssrc:Ee.ssrc,type:Nt,value:{track_id_in:Ne}}):G.push({ssrc:Ee.ssrc,type:Nt,value:{track_id_out:Ne}})}}),Object.keys(dr[It]).forEach(ue=>{const Ee=dr[It][ue];if(Ee.track_in===De[m]||Ee.track_out===De[m]){Ve(Ae,`analyze() - got stats ${De[fe]} for ${Tr}`,De);var Ne=De[St];De[m]===Ee.track_in?G.push({ssrc:Ee.ssrc,type:Xt,value:{track_id_in:Ne}}):G.push({ssrc:Ee.ssrc,type:Xt,value:{track_id_out:Ne}})}}),G}case"codec":const ie=[];return Object.keys(dr[Qt]).forEach(G=>{const ue=dr[Qt][G];if(ue.codec_id_in===De[m]||ue.codec_id_out===De[m]){Ve(Ae,`analyze() - got stats ${De[fe]} for ${Tr}`,De);const Ee=(Ne=>({channels:Ne.channels||null,clock_rate:Ne[x]||null,mime_type:Ne[L]||null,sdp_fmtp_line:Ne.sdpFmtpLine||null}))(De);De[m]===ue.codec_id_in?ie.push({ssrc:ue.ssrc,type:Nt,value:{codec_in:Ee}}):ie.push({ssrc:ue.ssrc,type:Nt,value:{codec_out:Ee}})}}),Object.keys(dr[It]).forEach(G=>{const ue=dr[It][G];if(ue.codec_id_in===De[m]||ue.codec_id_out===De[m]){Ve(Ae,`analyze() - got stats ${De[fe]} for ${Tr}`,De);const Ee=(Ne=>({clock_rate:Ne[x]||null,mime_type:Ne[L]||null}))(De);De[m]===ue.codec_id_in?ie.push({ssrc:ue.ssrc,type:Xt,value:{codec_in:Ee}}):ie.push({ssrc:ue.ssrc,type:Xt,value:{codec_out:Ee}})}}),ie;case"remote-inbound-rtp":{Ve(Ae,`analyze() - got stats ${De[fe]} for ${Tr}`,De);const G=De[ne],ue=Ot(G,dr,w),Ee=Ot(G,Sr,w);if(De[N]===Qt){const Ne=ot(De,Qt,Ee,ue),dt=vr(De,Qt,ue),Tt=Vr(De,Qt,ue,Ee);return[{ssrc:G,type:Nt,value:{delta_rtt_ms_out:Ne.rtt}},{ssrc:G,type:Nt,value:{delta_jitter_ms_out:dt}},{ssrc:G,type:Nt,value:{timestamp_out:De[ge]}},{ssrc:G,type:Nt,value:{total_packets_lost_out:Tt.packetsLost}},{ssrc:G,type:Nt,value:{delta_packets_lost_out:Tt.deltaPacketsLost}},{ssrc:G,type:Nt,value:{percent_packets_lost_out:Tt.fractionLost}}]}if(De[N]===It){const Ne=ot(De,It,Ee,ue),dt=vr(De,It,ue),Tt=Vr(De,It,ue,Ee);return[{ssrc:G,type:Xt,value:{delta_rtt_ms_out:Ne.rtt}},{ssrc:G,type:Xt,value:{delta_jitter_ms_out:dt}},{ssrc:G,type:Xt,value:{timestamp_out:De[ge]}},{ssrc:G,type:Xt,value:{total_packets_lost_out:Tt.packetsLost}},{ssrc:G,type:Xt,value:{delta_packets_lost_out:Tt.deltaPacketsLost}}]}break}case"remote-outbound-rtp":{Ve(Ae,`analyze() - got stats ${De[fe]} for ${Tr}`,De);const G=De[ne],ue=Ot(G,dr,w),Ee=Ot(G,Sr,w);if(De[N]===Qt){const Ne=ot(De,Qt,Ee,ue);return[{ssrc:G,type:Nt,value:{delta_rtt_ms_in:Ne.rtt}},{ssrc:G,type:Nt,value:{timestamp_in:De[ge]}}]}break}}return[]})(Er,rt,rt.name,null).forEach(De=>{if(De.value&&De.type)if(De.ssrc){let Sr=rt[De.type][De.ssrc];Sr||(dr=De.type,Tr=Er.type,Sr=dr===Qt?Tr===b?{...k}:{...f}:Tr===b?{...g}:{...s},Sr.ssrc=De.ssrc,rt[De.type][De.ssrc]=Sr),Object.keys(De.value).forEach(Gr=>{De.value[Gr]!==void 0&&(Sr[Gr]=De.value[Gr])})}else Object.keys(De.value).forEach(Sr=>{De.value[Sr]!==void 0&&(rt[De.type][Sr]=De.value[Sr])});var dr,Tr})}),rt.timestamp=Ue,rt}async collectStats(){try{const We=await this._config.monitoringObject.getStats(),ut=this.analyze(We,this._statsReports.slice().pop()||null);return this._statsReports.push(ut),this.fireOnStatsCollected(ut),We}catch(We){return wr(this._moduleName,`got error ${We}`),null}}fireOnStatsCollected(We){if(this._callbacks.onStatsCollected){const ut={};ut.meetingId=We.meetingId,ut.peerId=We.peerId,ut.name=We.name,ut.audio=[],ut.video=[],Object.values(We.audio).forEach(rt=>{const Ue={};if(Ue.network=jr[We.network.infrastructure],Ue.timestamp=We.timestamp,rt.direction==h){Ue.codec=rt.codec_in.mime_type,Ue.jitter=rt.delta_jitter_ms_in,Ue.bitrate=rt.delta_kbs_in,Ue.packetsLost=rt.delta_packets_lost_in,Ue.rtt=We.data.delta_rtt_connectivity_ms||0,Ue.totalPackets=rt.delta_packets_in,Ue.concealmentEvents=rt.delta_concealment_events,Ue.removedSampleForAccelaration=rt.delta_removed_samples_for_accelaration,Ue.insertedSamplesForDecelaration=rt.delta_inserted_samples_for_decelaration;const Er=JSON.stringify(rt.track_id_in).replace(/[{}"]/g,"");Ue.trackId=Er}else rt.direction==w&&(Ue.codec=rt.codec_out.mime_type,Ue.jitter=rt.delta_jitter_ms_out,Ue.bitrate=rt.delta_kbs_out,Ue.packetsLost=rt.delta_packets_lost_out,Ue.rtt=We.data.delta_rtt_connectivity_ms||0,Ue.totalPackets=rt.delta_packets_out,Ue.trackId=rt.track_id_out);ut.audio.push(Ue)}),Object.values(We.video).forEach(rt=>{const Ue={};if(Ue.network=jr[We.network.infrastructure],Ue.timestamp=We.timestamp,rt.direction==h){Ue.codec=rt.codec_in.mime_type,Ue.jitter=rt.delta_jitter_ms_in,Ue.bitrate=rt.delta_kbs_in,Ue.packetsLost=rt.delta_packets_lost_in,Ue.rtt=We.data.delta_rtt_connectivity_ms||0,Ue.totalPackets=rt.delta_packets_in,Ue.size=rt.size_in;const Er=JSON.stringify(rt.track_id_in).replace(/[{}"]/g,"");Ue.trackId=Er}else rt.direction==w&&(Ue.codec=rt.codec_out.mime_type,Ue.jitter=rt.delta_jitter_ms_out,Ue.bitrate=rt.delta_kbs_out,Ue.packetsLost=rt.delta_packets_lost_out,Ue.rtt=We.data.delta_rtt_connectivity_ms||0,Ue.totalPackets=rt.delta_packets_out,Ue.limitation=rt.limitation_out,Ue.size=rt.size_out,Ue.trackId=rt.track_id_out);ut.video.push(Ue)}),this._callbacks.onStatsCollected.callback(ut)}}}class hi{constructor(We){this._id=We.name&&We.name.substr(0,12).padEnd(12," "),this._moduleName=this._id,this._config=We,this._collector=new Pi(this._config,this._id)}get id(){return this._id}start(){this._collectorIntervalId?Rr("Probe already started."):(Ve(this._moduleName,"Probe Started"),this._collectorIntervalId=setInterval(()=>{Ve(this._moduleName,"Collector collecting stats"),this._collector.collectStats()},this._config.refreshEvery))}stop(){this._collectorIntervalId?(clearInterval(this._collectorIntervalId),Ve(this._moduleName,"Probe Stopped")):Rr("Probe not running, Please start first.")}set onStatsCollected(We){We?this._collector.registerCallback("onStatsCollected",We):this._collector.unregisterCallback("onStatsCollected")}}const ls={refreshEvery:2e3,startAfter:0,stopAfter:-1,verbose:!1,peerId:"peerId",meetingId:"meetingId",name:"name"};class Wi{constructor(We){var ut;this._config={defaultConfig:ls,...We},this._probes=[],ut=this._config.verbose||!1,Fr.setLevel(ut?Fr.levels.TRACE:Fr.levels.INFO),Ve("VideoSDKMetrics","VideoSDKMetrics initialized")}get probes(){return this._probes}addNewProbe(We,ut){if(!We)throw new Error("undefined monitoring object");const rt={monitoringObject:We,...ut,...this._config},Ue=new hi(rt);return this._probes.push(Ue),Ue}removeExistingProbe(We){if(!We)throw new Error("undefined probe");We.stop(),this._probes=this._probes.filter(ut=>We.id!==ut.id)}getProbe(We){for(let ut of this.probes)if(ut.id==We)return ut}startAllProbes(){this._probes.forEach((We,ut)=>{We.start()})}stopAllProbes(){this._probes.forEach(We=>We.stop())}}})(),_})()},8274:(C,p,o)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Logger=void 0;const E=o(7833),_="awaitqueue";p.Logger=class{constructor(h){h?(this._debug=(0,E.default)(`${_}:${h}`),this._warn=(0,E.default)(`${_}:WARN:${h}`),this._error=(0,E.default)(`${_}:ERROR:${h}`)):(this._debug=(0,E.default)(_),this._warn=(0,E.default)(`${_}:WARN`),this._error=(0,E.default)(`${_}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},8876:(C,p,o)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.AwaitQueue=p.AwaitQueueRemovedTaskError=p.AwaitQueueStoppedError=void 0;const E=new(o(8274)).Logger;class _ extends Error{constructor(k){super(k??"AwaitQueue stopped"),this.name="AwaitQueueStoppedError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,_)}}p.AwaitQueueStoppedError=_;class h extends Error{constructor(k){super(k??"AwaitQueue task removed"),this.name="AwaitQueueRemovedTaskError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,h)}}p.AwaitQueueRemovedTaskError=h,p.AwaitQueue=class{constructor(){this.pendingTasks=new Map,this.nextTaskId=0,this.stopping=!1}get size(){return this.pendingTasks.size}async push(w,k){if(k=k??w.name,E.debug(`push() [name:${k}]`),typeof w!="function")throw new TypeError("given task is not a function");if(k)try{Object.defineProperty(w,"name",{value:k})}catch{}return new Promise((f,g)=>{const s={id:this.nextTaskId++,task:w,name:k,enqueuedAt:Date.now(),executedAt:void 0,completed:!1,resolve:b=>{if(s.completed)return;s.completed=!0,this.pendingTasks.delete(s.id),E.debug(`resolving task [name:${s.name}]`),f(b);const[S]=this.pendingTasks.values();S&&!S.executedAt&&this.execute(S)},reject:b=>{if(!s.completed&&(s.completed=!0,this.pendingTasks.delete(s.id),E.debug(`rejecting task [name:${s.name}]: %s`,String(b)),g(b),!this.stopping)){const[S]=this.pendingTasks.values();S&&!S.executedAt&&this.execute(S)}}};this.pendingTasks.set(s.id,s),this.pendingTasks.size===1&&this.execute(s)})}stop(){E.debug("stop()"),this.stopping=!0;for(const w of this.pendingTasks.values())E.debug(`stop() | stopping task [name:${w.name}]`),w.reject(new _);this.stopping=!1}remove(w){E.debug(`remove() [taskIdx:${w}]`);const k=Array.from(this.pendingTasks.values())[w];k?k.reject(new h):E.debug(`stop() | no task with given idx [taskIdx:${w}]`)}dump(){const w=Date.now();let k=0;return Array.from(this.pendingTasks.values()).map(f=>({idx:k++,task:f.task,name:f.name,enqueuedTime:f.executedAt?f.executedAt-f.enqueuedAt:w-f.enqueuedAt,executionTime:f.executedAt?w-f.executedAt:0}))}async execute(w){if(E.debug(`execute() [name:${w.name}]`),w.executedAt)throw new Error("task already being executed");w.executedAt=Date.now();try{const k=await w.task();w.resolve(k)}catch(k){w.reject(k)}}}},9027:(C,p,o)=>{o.d(p,{$:()=>E});var E={networkPriorities:{audio:"high",dominatingVideo:"high",otherVideos:"medium",screenShare:"medium"},aspectRatios:{fourThree:{label:"fourThree",value:1.333},oneSixNine:{label:"oneSixNine",value:1.777}},audioProfiles:{speech_low_quality:{sampleRate:16e3,bitRate:24,sampleSize:16,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:16e3,packetTime:20,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},speech_standard:{sampleRate:32e3,bitRate:24,sampleSize:24,stereo:!1,dtx:!0,fec:!0,maxPlaybackRate:32e3,packetTime:30,autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,channelCount:1},music_standard:{sampleRate:48e3,bitRate:40,sampleSize:32,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},standard_stereo:{sampleRate:48e3,sampleSize:32,bitRate:64,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:40,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2},high_quality:{sampleRate:48e3,sampleSize:32,bitRate:128,stereo:!1,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:1},high_quality_stereo:{sampleRate:48e3,sampleSize:32,bitRate:192,stereo:!0,dtx:!1,fec:!0,maxPlaybackRate:48e3,packetTime:60,autoGainControl:!1,echoCancellation:!1,noiseSuppression:!1,channelCount:2}},videoProfiles:{h90p_w160p:{width:160,height:90,bitRate:6e4,frameRate:15,aspectRatio:"oneSixNine"},h180p_w320p:{width:320,height:180,bitRate:12e4,frameRate:15,aspectRatio:"oneSixNine"},h216p_w384p:{width:384,height:216,bitRate:18e4,frameRate:15,aspectRatio:"oneSixNine"},h360p_w640p:{width:640,height:360,bitRate:3e5,frameRate:20,aspectRatio:"oneSixNine"},h540p_w960p:{width:960,height:540,bitRate:6e5,frameRate:25,aspectRatio:"oneSixNine"},h720p_w1280p:{width:1280,height:720,bitRate:2e6,frameRate:30,aspectRatio:"oneSixNine"},h1080p_w1920p:{width:1920,height:1080,bitRate:3e6,frameRate:30,aspectRatio:"oneSixNine"},h1440p_w2560p:{width:2560,height:1440,bitRate:5e6,frameRate:30,aspectRatio:"oneSixNine"},h2160p_w3840p:{width:3840,height:2160,bitRate:8e6,frameRate:30,aspectRatio:"oneSixNine"},h120p_w160p:{width:160,height:120,bitRate:8e4,frameRate:15,aspectRatio:"fourThree"},h180p_w240p:{width:240,height:180,bitRate:1e5,frameRate:15,aspectRatio:"fourThree"},h240p_w320p:{width:320,height:240,bitRate:15e4,frameRate:15,aspectRatio:"fourThree"},h360p_w480p:{width:480,height:360,bitRate:225e3,frameRate:20,aspectRatio:"fourThree"},h480p_w640p:{width:640,height:480,bitRate:3e5,frameRate:25,aspectRatio:"fourThree"},h540p_w720p:{width:720,height:540,bitRate:45e4,frameRate:30,aspectRatio:"fourThree"},h720p_w960p:{width:960,height:720,bitRate:15e5,frameRate:30,aspectRatio:"fourThree"},h1080p_w1440p:{width:1440,height:1080,bitRate:25e5,frameRate:30,aspectRatio:"fourThree"},h1440p_w1920p:{width:1920,height:1440,bitRate:35e5,frameRate:30,aspectRatio:"fourThree"}},screenShareProfiles:{h360p_30fps:{width:640,height:360,bitRate:2e5,frameRate:30},h720p_5fps:{width:1280,height:720,bitRate:4e5,frameRate:5},h720p_15fps:{width:1280,height:720,bitRate:1e6,frameRate:15},h1080p_15fps:{width:1920,height:1080,bitRate:15e5,frameRate:15},h1080p_30fps:{width:1920,height:1080,bitRate:1e6,frameRate:30}},simulcastProfiles:{3840:[{scaleResolutionDownBy:12,maxBitRate:15e4},{scaleResolutionDownBy:6,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:1e7}],1920:[{scaleResolutionDownBy:6,maxBitRate:15e4},{scaleResolutionDownBy:3,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:35e5}],1280:[{scaleResolutionDownBy:4,maxBitRate:15e4},{scaleResolutionDownBy:2,maxBitRate:5e5},{scaleResolutionDownBy:1,maxBitRate:12e5}],640:[{scaleResolutionDownBy:2,maxBitRate:15e4},{scaleResolutionDownBy:1,maxBitRate:5e5}],320:[{scaleResolutionDownBy:1,maxBitRate:15e4}]},requestTimeout:2e4,requestRetries:3,transportOptions:{tcp:!0},videoKSVCEncodings:[{scalabilityMode:"S3T3_KEY"}],videoSVCEncodings:[{scalabilityMode:"S3T3",dtx:!0}]}},7080:(C,p,o)=>{o.d(p,{q:()=>_,s:()=>E});var E={INVALID_API_KEY:4001,INVALID_TOKEN:4002,INVALID_MEETING_ID:4003,INVALID_PARTICIPANT_ID:4004,DUPLICATE_PARTICIPANT:4005,ACCOUNT_DEACTIVATED:4006,ACCOUNT_DISCONTINUED:4007,INVALID_PERMISSIONS:4008,MAX_PARTCIPANT_REACHED:4009,MAX_SPEAKER_REACHED:4010,START_RECORDING_FAILED:4011,STOP_RECORDING_FAILED:4012,START_LIVESTREAM_FAILED:4013,STOP_LIVESTREAM_FAILED:4014,INVALID_LIVESTREAM_CONFIG:4015,START_HLS_FAILED:4016,STOP_HLS_FAILED:4017,START_TRANSCRIPTION_FAILED:4031,STOP_TRANSCRIPTION_FAILED:4032,RECORDING_FAILED:5001,LIVESTREAM_FAILED:5002,HLS_FAILED:5003,TRANSCRIPTION_FAILED:5007,ERROR_GET_VIDEO_MEDIA:3011,ERROR_GET_AUDIO_MEDIA:3012,ERROR_GET_DISPLAY_MEDIA:3013,ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:3014,ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:3015,ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:3016,ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:3017,ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:3018,ERROR_CAMERA_PERMISSION_DENIED_BY_OS:3019,ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:3020,ERROR_CAMERA_NOT_FOUND:3021,ERROR_MICROPHONE_NOT_FOUND:3022,ERROR_CAMERA_IN_USE:3023,ERROR_MICROPHONE_IN_USE:3024,ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:3025,ERROR_VIDEO_SOURCE_INITIATION_FAILED:3026,ERROR_WEBCAM_TRACK_ENDED:3027,ERROR_MICROPHONE_TRACK_ENDED:3028,ERROR_INVALID_CUSTOM_VIDEO_TRACK:3029,ERROR_INVALID_CUSTOM_AUDIO_TRACK:3030,ERROR_CUSTOM_VIDEO_TRACK_ENDED:3031,ERROR_CUSTOM_AUDIO_TRACK_ENDED:3032,ERROR_CAMERA_ACCESS_UNAVAILABLE:3033,ERROR_MICROPHONE_ACCESS_UNAVAILABLE:3034,ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:3035,ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:3036,ERROR_RN_CAMERA_NOT_FOUND:3037,ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:3038,ERROR_RN_MIC_NOT_FOUND:3039,ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:3040,ERROR_RN_MIC_ACCESS_UNAVAILABLE:3041,ERROR_RN_CAMERA_TRACK_ENDED:3042,ERROR_RN_MIC_TRACK_ENDED:3043},_={ERROR_GET_VIDEO_MEDIA:{code:3011,message:"Your browser/Device does not support Video."},ERROR_GET_AUDIO_MEDIA:{code:3012,message:"Your browser/Device does not support Audio."},ERROR_GET_DISPLAY_MEDIA:{code:3013,message:"Your browser/Device does not support Screen Sharing."},ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:{code:3014,message:"Video capture permission denied."},ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED:{code:3015,message:"Audio capture permission denied."},ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED:{code:3016,message:"Screen sharing permission denied."},ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3017,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:{code:3018,message:"Oops! It seems like microphone access was denied or dismissed. To proceed, kindly grant access through your browser settings."},ERROR_CAMERA_PERMISSION_DENIED_BY_OS:{code:3019,message:"Camera permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:{code:3020,message:"Microphone permission denied by OS system settings. Please check the system settings and grant permission for this browser."},ERROR_CAMERA_NOT_FOUND:{code:3021,message:"Please ensure your camera is connected and turned on, and that the camera driver is installed and up-to-date."},ERROR_MICROPHONE_NOT_FOUND:{code:3022,message:"Please ensure your microphone is connected and turned on."},ERROR_CAMERA_IN_USE:{code:3023,message:"The camera is being used by another application. Please close any programs utilizing the camera, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_MICROPHONE_IN_USE:{code:3024,message:"The microphone is being used by another application. Please close any programs utilizing the microphone, such as video conferencing tools, screen recording software, or other browsers. Restart your browser and attempt again."},ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:{code:3025,message:"It seems like there's an issue with camera permission or video autoplay, you can check out this link for details: http://tinyurl.com/autoplay-issue"},ERROR_VIDEO_SOURCE_INITIATION_FAILED:{code:3026,message:"Unable to initiate video source. Please verify browser settings for video permissions."},ERROR_WEBCAM_TRACK_ENDED:{code:3027,message:"Webcam track has ended or the webcam is disconnected. Please ensure your webcam is properly connected and try restarting it."},ERROR_MICROPHONE_TRACK_ENDED:{code:3028,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."},ERROR_INVALID_CUSTOM_VIDEO_TRACK:{code:3029,message:"The provided custom video track is invalid; reverting to the default video track. Please ensure that the video track meets the required specifications."},ERROR_INVALID_CUSTOM_AUDIO_TRACK:{code:3030,message:"The provided custom audio track is invalid; reverting to the default audio track. Please ensure that the audio track meets the required specifications."},ERROR_CUSTOM_VIDEO_TRACK_ENDED:{code:3031,message:"The provided custom video track is in an ended state. Please verify the video track's status, and try again."},ERROR_CUSTOM_AUDIO_TRACK_ENDED:{code:3032,message:"The provided custom audio track is in an ended state. Please verify the audio track's status, and try again."},ERROR_CAMERA_ACCESS_UNAVAILABLE:{code:3033,message:"Camera access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_MICROPHONE_ACCESS_UNAVAILABLE:{code:3034,message:"Microphone access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)."},ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED:{code:3035,message:"Oops! Something went wrong. The room was in a connecting state, and during that time, an action encountered an issue. Please try again after joining a meeting."},ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED:{code:3036,message:"Oops! It seems like camera access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_CAMERA_NOT_FOUND:{code:3037,message:"Please ensure your camera is connected and turned on"},ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED:{code:3038,message:"Oops! It seems like mic access was denied or dismissed. To proceed, kindly grant access through your App settings."},ERROR_RN_MIC_NOT_FOUND:{code:3039,message:"Please ensure your mic is connected and turned on"},ERROR_RN_CAMERA_ACCESS_UNAVAILABLE:{code:3040,message:"Camera access unavailable: Please ensure your device is compatible."},ERROR_RN_MIC_ACCESS_UNAVAILABLE:{code:3041,message:"Microphone access unavailable: Please ensure your device is compatible."},ERROR_RN_CAMERA_TRACK_ENDED:{code:3042,message:"Camera track has ended. Please make sure your camera is turned on or try restarting it."},ERROR_RN_MIC_TRACK_ENDED:{code:3043,message:"Microphone track has ended or the microphone is disconnected. Please check your microphone connection and try again."}}},5071:(C,p,o)=>{o.d(p,{V:()=>E});var E={HLS_STARTING:"HLS_STARTING",HLS_STARTED:"HLS_STARTED",HLS_PLAYABLE:"HLS_PLAYABLE",HLS_STOPPING:"HLS_STOPPING",HLS_STOPPED:"HLS_STOPPED"}},2107:(C,p,o)=>{o.d(p,{n:()=>E});var E={CONFERENCE:"CONFERENCE",VIEWER:"VIEWER"}},2487:(C,p,o)=>{o.r(p),o.d(p,{default:()=>Vi});var E=o(296),_=o(2284),h=o(467),w=o(3029),k=o(2901),f=o(4467),g=o(4756),s=o.n(g),b=o(9566),S=o(76),T=o(7833),x=o.n(T),O="mediasoup-demo",P=function(){return(0,k.A)(function Se(Fe){(0,w.A)(this,Se),Fe?(this._debug=x()("".concat(O,":").concat(Fe)),this._warn=x()("".concat(O,":WARN:").concat(Fe)),this._error=x()("".concat(O,":ERROR:").concat(Fe))):(this._debug=x()(O),this._warn=x()("".concat(O,":WARN")),this._error=x()("".concat(O,":ERROR"))),x().disable(),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)},[{key:"debug",get:function(){return this._debug}},{key:"warn",get:function(){return this._warn}},{key:"error",get:function(){return this._error}}])}(),R=o(1396),I=R.enc.Latin1.parse("6gf9Oz5Y(6fOWPP@3XPv0Mwp51yfJ0HiZW^0*!9NdUuZ*VdKmRC@f))&^!Iriw)q"),d=R.enc.Latin1.parse("BHrabik^$W^y*HL@A*$4YKj(");function v(Se){return c.apply(this,arguments)}function c(){return(c=(0,h.A)(s().mark(function Se(Fe){var He,pt,qt,ct,Vt,Kt,Rt,yr,Yt,mr,$r,tn,_n;return s().wrap(function(kn){for(;;)switch(kn.prev=kn.next){case 0:return He=Fe.roomId,pt=Fe.secret,qt=Fe.signalingBaseUrl,ct="call-api.videosdk.live",Vt=[],Kt=null,Rt={},yr={},Yt={},mr=null,kn.next=10,fetch("https://".concat(qt,"/infra/v1/meetings/init-config"),{method:"POST",headers:{Authorization:pt,"Content-Type":"application/json"},body:JSON.stringify({roomId:He})}).then(function(fi){return fi.json()}).catch(function(fi){return{}});case 10:return $r=kn.sent,(tn=$r.data)&&(ct=tn.baseUrl,_n=tn.observability,Vt=u(tn.iceServers),Kt=_n.jwt,Rt=_n.traces,yr=_n.logs,Yt=_n.metaData,mr=tn.signalingUrl),kn.abrupt("return",{baseUrl:ct,iceServers:Vt,observabilityJwt:Kt,traces:Rt,logs:yr,metaData:Yt,signalingUrl:mr});case 14:case"end":return kn.stop()}},Se)}))).apply(this,arguments)}function u(Se){try{var Fe=R.AES.decrypt(Se,I,{iv:d,mode:R.mode.CBC,padding:R.pad.ZeroPadding}).toString(R.enc.Utf8);return JSON.parse(Fe)}catch{return[]}}var l=o(2215),m=o.n(l),D="mediasoup-demo.user",N="mediasoup-demo.devices";function L(Se){var Fe=Se.displayName;m().set(D,{displayName:Fe})}function j(){return m().getJSON(N)}var W=o(2211),$=o.n(W),Z=function(Se){return{type:"SET_ROOM_STATE",payload:{state:Se}}},ne=function(Se){return{type:"SET_ROOM_ACTIVE_SPEAKER",payload:{peerId:Se}}},de=function(Se){return{type:"SET_ROOM_STATS_PEER_ID",payload:{peerId:Se}}},ge=function(Se){return{type:"SET_MEDIA_CAPABILITIES",payload:{canSendMic:Se.canSendMic,canSendWebcam:Se.canSendWebcam}}},_e=function(Se){return{type:"SET_DISPLAY_NAME",payload:{displayName:Se}}},Me=function(Se){return{type:"SET_AUDIO_ONLY_STATE",payload:{enabled:Se}}},fe=function(Se){return{type:"SET_AUDIO_ONLY_IN_PROGRESS",payload:{flag:Se}}},oe=function(Se){return{type:"SET_AUDIO_MUTED_STATE",payload:{enabled:Se}}},ve=function(Se){return{type:"SET_RESTART_ICE_IN_PROGRESS",payload:{flag:Se}}},we=function(Se){return{type:"ADD_PRODUCER",payload:{producer:Se}}},be=function(Se){return{type:"REMOVE_PRODUCER",payload:{producerId:Se}}},ht=function(Se,Fe){return{type:"SET_PRODUCER_TRACK",payload:{producerId:Se,track:Fe}}},xt=function(Se,Fe){return{type:"SET_PRODUCER_SCORE",payload:{producerId:Se,score:Fe}}},Jt=function(Se){return{type:"ADD_DATA_PRODUCER",payload:{dataProducer:Se}}},St=function(Se){return{type:"SET_WEBCAM_IN_PROGRESS",payload:{flag:Se}}},Pr=function(Se){return{type:"SET_SHARE_IN_PROGRESS",payload:{flag:Se}}},Qt=function(Se){return{type:"ADD_PEER",payload:{peer:Se}}},It=function(Se){return{type:"REMOVE_PEER",payload:{peerId:Se}}},jr=function(Se,Fe){return{type:"SET_PEER_DISPLAY_NAME",payload:{displayName:Se,peerId:Fe}}},Nt=function(Se,Fe){return{type:"ADD_CONSUMER",payload:{consumer:Se,peerId:Fe}}},Xt=function(Se,Fe){return{type:"REMOVE_CONSUMER",payload:{consumerId:Se,peerId:Fe}}},Mr=function(Se,Fe){return{type:"SET_CONSUMER_PAUSED",payload:{consumerId:Se,originator:Fe}}},Br=function(Se,Fe){return{type:"SET_CONSUMER_RESUMED",payload:{consumerId:Se,originator:Fe}}},Fr=function(Se,Fe,He){return{type:"SET_CONSUMER_CURRENT_LAYERS",payload:{consumerId:Se,spatialLayer:Fe,temporalLayer:He}}},Zt=function(Se,Fe,He){return{type:"SET_CONSUMER_PREFERRED_LAYERS",payload:{consumerId:Se,spatialLayer:Fe,temporalLayer:He}}},sr=function(Se,Fe){return{type:"SET_CONSUMER_PRIORITY",payload:{consumerId:Se,priority:Fe}}},Ve=function(Se,Fe){return{type:"SET_CONSUMER_SCORE",payload:{consumerId:Se,score:Fe}}},Rr=function(Se,Fe){return{type:"ADD_DATA_CONSUMER",payload:{dataConsumer:Se,peerId:Fe}}},wr=function(Se,Fe){return{type:"REMOVE_DATA_CONSUMER",payload:{dataConsumerId:Se,peerId:Fe}}},Ae=function(Se){var Fe=Se.type,He=Fe===void 0?"info":Fe,pt=Se.text,qt=Se.title,ct=Se.timeout;if(!ct)switch(He){case"info":ct=3e3;break;case"error":ct=5e3}var Vt={id:$()({length:6}).toLowerCase(),type:He,title:qt,text:pt,timeout:ct};return function(Kt){Kt(function(Rt){return{type:"ADD_NOTIFICATION",payload:{notification:Rt}}}(Vt)),setTimeout(function(){Kt({type:"REMOVE_NOTIFICATION",payload:{notificationId:Vt.id}})},ct)}},Ot=o(7007),ot=o(9027);function vr(Se,Fe){var He=Object.keys(Se);if(Object.getOwnPropertySymbols){var pt=Object.getOwnPropertySymbols(Se);Fe&&(pt=pt.filter(function(qt){return Object.getOwnPropertyDescriptor(Se,qt).enumerable})),He.push.apply(He,pt)}return He}var br={},Vr={},di={};for(var Mt in ot.$.videoProfiles)ot.$.videoProfiles[Mt].aspectRatio=="oneSixNine"&&(br[Mt]=ot.$.videoProfiles[Mt],br[Mt].encoding={maxBitrate:br[Mt].bitRate,maxFramerate:br[Mt].frameRate}),ot.$.videoProfiles[Mt].aspectRatio=="fourThree"&&(Vr[Mt]=ot.$.videoProfiles[Mt],Vr[Mt].encoding={maxBitrate:Vr[Mt].bitRate,maxFramerate:Vr[Mt].frameRate});for(var Mt in ot.$.screenShareProfiles)di[Mt]=ot.$.screenShareProfiles[Mt],di[Mt].encoding={maxBitrate:di[Mt].bitRate,maxFramerate:di[Mt].frameRate};var pi=Object.values(br),Pi=Object.values(Vr),hi=[br.h180p_w320p,br.h360p_w640p],ls=[Vr.h180p_w240p,Vr.h360p_w480p],Wi=["q","h","f"];function At(Se,Fe,He,pt,qt){var ct=pt&&pt.videoEncoding,Vt=pt==null?void 0:pt.simulcast;if(ct||(ct=function(tn,_n,kn){for(var fi=function(Es,$i,ks){var Xs=$i>ks?$i/ks:ks/$i;return Math.abs(Xs-1.7777777777777777)<Math.abs(Xs-1.3333333333333333)?pi:Pi}(tn,_n,kn),Yn=fi[0].encoding,xi=Math.max(_n,kn),Oi=0;Oi<fi.length;Oi+=1){var es=fi[Oi];if(Yn=es.encoding,es.width>=xi)break}return Yn}(Se,Fe,He)),!Vt)return[ct];var Kt,Rt={width:Fe,height:He,encoding:{maxBitrate:ct.maxBitrate,maxFramerate:ct.maxFramerate}},yr=[],Yt=(yr=We(Se,Rt))[0];if(yr.length>1){var mr=yr;Kt=(0,E.A)(mr,2)[1]}var $r=Math.max(Fe,He);return ut(Fe,He,$r>=960&&Kt?[Yt,Kt,Rt]:$r>=480?[Yt,Rt]:[Rt],qt)}function We(Se,Fe){var He=Fe.width,pt=Fe.height,qt=He>pt?He/pt:pt/He;return Math.abs(qt-1.7777777777777777)<Math.abs(qt-1.3333333333333333)?hi:ls}function ut(Se,Fe,He,pt){var qt=[];return He.forEach(function(ct,Vt){if(!(Vt>=Wi.length)){var Kt=pt?null:{maxFramerate:ct.encoding.maxFramerate},Rt=Math.min(Se,Fe),yr=function(Yt){for(var mr=1;mr<arguments.length;mr++){var $r=arguments[mr]!=null?arguments[mr]:{};mr%2?vr(Object($r),!0).forEach(function(tn){(0,f.A)(Yt,tn,$r[tn])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Yt,Object.getOwnPropertyDescriptors($r)):vr(Object($r)).forEach(function(tn){Object.defineProperty(Yt,tn,Object.getOwnPropertyDescriptor($r,tn))})}return Yt}({rid:Wi[Vt],scaleResolutionDownBy:Rt/Math.min(ct.width,ct.height),maxBitrate:ct.encoding.maxBitrate},Kt);qt.push(yr)}}),qt}function rt(Se,Fe,He){if(!Se)return{};var pt=Se.id,qt=(Se.preferredSpatialLayer,Se.preferredTemporalLayer,Se.appData),ct=qt.width,Vt=qt.height,Kt=qt.encodings;try{var Rt=function(Yn){var xi=[];if(Yn&&Yn.length!=0){if(Yn.length===1){for(var Oi=0;Oi<3;Oi++)xi.push(Math.pow(2,3-Oi-1));return xi}var es=!1;return Yn.forEach(function(Es){Es.scaleResolutionDownBy!==void 0?(es=!0,xi.push(Math.max(1,Es.scaleResolutionDownBy))):xi.push(1)}),es||Yn.forEach(function(Es,$i){xi[$i]=Math.pow(2,Yn.length-$i-1)}),xi}}(Kt);if(!Rt)return{};for(var yr=Math.min(Math.max(ot.$.adaptiveScalingFactor||.75,.5),1),Yt=0,mr=0;mr<Rt.length;mr++){var $r=yr*ct/Rt[mr],tn=yr*Vt/Rt[mr];if(!(Fe>=$r&&He>=tn))break;Yt=mr}var _n=(Se.temporalLayers?Se.temporalLayers:3)-1;if(Yt===0&&_n>0){var kn=ct/Rt[0],fi=Vt/Rt[0];Fe<.5*kn&&He<.5*fi&&(_n-=1),_n>0&&Fe<.25*kn&&He<.25*fi&&(_n-=1)}return{consumerId:pt,newPreferredSpatialLayer:Yt,newPreferredTemporalLayer:_n}}catch{return{}}}var Ue=o(7080),Er=o(5414),De=o(2107),dr=o(5071),Tr=o(5458),Sr=Array(32);function Gr(){for(var Se=0;Se<16;Se++)Sr[Se]=Math.floor(16*Math.random())+48,Sr[Se]>=58&&(Sr[Se]+=39);return String.fromCharCode.apply(null,Sr.slice(0,16))}function ie(){var Se=(1e6*new Date().getTime()).toString().padEnd(19,"0");return Number(Se)}function G(Se,Fe){var He=Object.keys(Se);if(Object.getOwnPropertySymbols){var pt=Object.getOwnPropertySymbols(Se);Fe&&(pt=pt.filter(function(qt){return Object.getOwnPropertyDescriptor(Se,qt).enumerable})),He.push.apply(He,pt)}return He}function ue(Se){for(var Fe=1;Fe<arguments.length;Fe++){var He=arguments[Fe]!=null?arguments[Fe]:{};Fe%2?G(Object(He),!0).forEach(function(pt){(0,f.A)(Se,pt,He[pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Se,Object.getOwnPropertyDescriptors(He)):G(Object(He)).forEach(function(pt){Object.defineProperty(Se,pt,Object.getOwnPropertyDescriptor(He,pt))})}return Se}var Ee=function(){return(0,k.A)(function Se(Fe){var He=this,pt=Fe.roomId,qt=Fe.peerId,ct=Fe.sdkName,Vt=Fe.observabilityJwt,Kt=Fe.metaData,Rt=Fe.traces;(0,w.A)(this,Se),this._traceId=function(){for(var Yt=0;Yt<32;Yt++)Sr[Yt]=Math.floor(16*Math.random())+48,Sr[Yt]>=58&&(Sr[Yt]+=39);return String.fromCharCode.apply(null,Sr.slice(0,32))}(),this._rootSpanId=Gr(),this._observabilityJwt=Vt,this._tracesEnabled=Rt.enabled,this._tracesEndpoint=Rt.endPoint;var yr=function(Yt){for(var mr="0123456789abcdefghijklmnopqrstuvwxyz",$r="",tn=Yt;tn>0;tn--)$r+=mr[Math.floor(36*Math.random())];return $r}(8);this._spans=[],this._traceJSON={resourceSpans:[{resource:{attributes:[{key:"service.name",value:{stringValue:"videosdk-otel"}},{key:"telemetry.sdk.language",value:{stringValue:"webjs"}},{key:"telemetry.sdk.name",value:{stringValue:"opentelemetry"}},{key:"telemetry.sdk.version",value:{stringValue:"1.14.0"}},{key:"sdk-version",value:{stringValue:"0.0.1"}}],droppedAttributesCount:0},scopeSpans:[{scope:{name:yr},spans:[]}]}]},this._tracesEnabled&&(this.addRootSpan(pt,qt,ct,Kt),setInterval(function(){He.processQueue()},4e3))},[{key:"addRootSpan",value:function(Se,Fe,He,pt){var qt={traceId:this._traceId,spanId:this._rootSpanId,name:"room_".concat(Se,"_peer_").concat(Fe,"_sdk_").concat(He),kind:1,startTimeUnixNano:ie(),endTimeUnixNano:ie(),attributes:[{key:"roomId",value:{stringValue:Se}},{key:"peerId",value:{stringValue:Fe}},{key:"sdkName",value:{stringValue:He}},{key:"userId",value:{stringValue:pt.userId}},{key:"email",value:{stringValue:pt.email}}],droppedAttributesCount:0,events:[],droppedEventsCount:0,status:{code:0},links:[],droppedLinksCount:0};this._spans.push(qt)}},{key:"addSpanToTrace",value:function(Se){this._spans.push(Se)}},{key:"trace",value:function(Se){var Fe=Se.spanName,He=Se.attributes,pt=He===void 0?{}:He,qt=Se.span,ct=qt===void 0?void 0:qt;if(this._tracesEnabled){var Vt=Gr(),Kt=ie(),Rt={traceId:this._traceId,spanId:Vt,parentSpanId:ct||this._rootSpanId,name:Fe,kind:1,startTimeUnixNano:Kt,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0};return Object.keys(pt).length>0&&(Rt.attributes=Object.entries(pt).map(function(yr){var Yt=(0,E.A)(yr,2);return{key:Yt[0],value:{stringValue:Yt[1]}}})),this.addSpanToTrace(Rt),Vt}}},{key:"traceAutoComplete",value:function(Se){var Fe=Se.spanName,He=Se.attributes,pt=He===void 0?{}:He,qt=Se.status,ct=qt===void 0?1:qt,Vt=Se.span,Kt=Vt===void 0?void 0:Vt,Rt=Se.message,yr=Rt===void 0?"SUCCESS":Rt;if(this._tracesEnabled){var Yt=Gr(),mr=ie(),$r=ie(),tn={traceId:this._traceId,spanId:Yt,parentSpanId:Kt||this._rootSpanId,name:Fe,kind:1,startTimeUnixNano:mr,endTimeUnixNano:$r,droppedAttributesCount:0,events:[],droppedEventsCount:0,links:[],droppedLinksCount:0,status:{code:ct,message:yr}};Object.keys(pt).length>0&&(tn.attributes=Object.entries(pt).map(function(_n){var kn=(0,E.A)(_n,2);return{key:kn[0],value:{stringValue:kn[1]}}})),this.addSpanToTrace(tn)}}},{key:"completeSpan",value:function(Se){var Fe=Se.span,He=Se.status,pt=Se.message,qt=Se.attributes,ct=qt===void 0?{}:qt;if(this._tracesEnabled){var Vt=ie();this._spans=this._spans.map(function(Kt){if(Kt.spanId!==Fe)return Kt;var Rt=Object.entries(ct).map(function(yr){var Yt=(0,E.A)(yr,2);return{key:Yt[0],value:{stringValue:Yt[1]}}});return Kt.attributes=Kt.attributes?[].concat((0,Tr.A)(Kt.attributes),(0,Tr.A)(Rt)):Rt,ue(ue({},Kt),{},{status:{code:He,message:pt},endTimeUnixNano:Vt})})}}},{key:"processQueue",value:function(){var Se=this;if(this._spans.length>0){this._traceJSON.resourceSpans[0].scopeSpans[0].spans=this._spans,this._spans=[];var Fe={method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify(this._traceJSON)};fetch(this._tracesEndpoint,Fe).then(function(){var He=(0,h.A)(s().mark(function pt(qt){return s().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:return Se._traceJSON.resourceSpans[0].scopeSpans[0].spans=[],ct.next=3,qt.text();case 3:return ct.abrupt("return",ct.sent);case 4:case"end":return ct.stop()}},pt)}));return function(pt){return He.apply(this,arguments)}}()).then(function(He){}).catch(function(He){Se._spans=Se._traceJSON.resourceSpans[0].scopeSpans[0].spans,console.error("There was a problem with the POST request:",He)})}}}])}();function Ne(Se,Fe){var He=Object.keys(Se);if(Object.getOwnPropertySymbols){var pt=Object.getOwnPropertySymbols(Se);Fe&&(pt=pt.filter(function(qt){return Object.getOwnPropertyDescriptor(Se,qt).enumerable})),He.push.apply(He,pt)}return He}function dt(Se){for(var Fe=1;Fe<arguments.length;Fe++){var He=arguments[Fe]!=null?arguments[Fe]:{};Fe%2?Ne(Object(He),!0).forEach(function(pt){(0,f.A)(Se,pt,He[pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Se,Object.getOwnPropertyDescriptors(He)):Ne(Object(He)).forEach(function(pt){Object.defineProperty(Se,pt,Object.getOwnPropertyDescriptor(He,pt))})}return Se}var Tt=function(){return(0,k.A)(function Fe(He){var pt=He.roomId,qt=He.peerId,ct=He.logs,Vt=He.observabilityJwt,Kt=He.deviceInfo,Rt=He.sessionId,yr=He.debugMode;(0,w.A)(this,Fe);var Yt=Kt.browserUserAgent,mr=Kt.deviceUserAgent,$r=Kt.platform;this._peerId=qt,this._roomId=pt,this._logs=ct,this._observabilityJwt=Vt,this._deviceInfo=Kt,this._sessionId=Rt,this._debugMode=yr,this.browserOrDeviceInfo=Yt?{browserName:Yt.browser.name,browserVersion:Yt.browser.version,osName:Yt.os.name,osVersion:Yt.os.version,platform:$r}:mr?dt({platform:$r},mr):null},[{key:"pushLogs",value:(Se=(0,h.A)(s().mark(function Fe(He){var pt,qt,ct,Vt,Kt,Rt,yr,Yt;return s().wrap(function(mr){for(;;)switch(mr.prev=mr.next){case 0:if(pt=He.logType,qt=He.logText,ct=He.attributes,Vt=He.dashboardLog,Kt=Vt!==void 0&&Vt,Rt=this._logs,yr=Rt.enabled,Yt=Rt.endPoint,!yr){mr.next=8;break}return mr.next=5,fetch(Yt,{method:"POST",headers:{Authorization:this._observabilityJwt,"Content-Type":"application/json"},body:JSON.stringify({logType:pt,logText:qt,attributes:dt(dt({},ct),{},{roomId:this._roomId,peerId:this._peerId,SDK:"".concat(this._deviceInfo.sdkType,"-sdk"),SDK_VERSION:this._deviceInfo.sdkVersion,sessionId:this._sessionId},this.browserOrDeviceInfo),debugMode:this._debugMode,dashboardLog:Kt})}).then(function($r){return $r.json()}).catch(function($r){return console.log("error",$r),{}});case 5:return mr.abrupt("return",mr.sent);case 8:return mr.abrupt("return",null);case 9:case"end":return mr.stop()}},Fe,this)})),function(Fe){return Se.apply(this,arguments)})}]);var Se}(),$e=o(4973);function nt(Se,Fe){var He=typeof Symbol<"u"&&Se[Symbol.iterator]||Se["@@iterator"];if(!He){if(Array.isArray(Se)||(He=function(Rt,yr){if(Rt){if(typeof Rt=="string")return et(Rt,yr);var Yt={}.toString.call(Rt).slice(8,-1);return Yt==="Object"&&Rt.constructor&&(Yt=Rt.constructor.name),Yt==="Map"||Yt==="Set"?Array.from(Rt):Yt==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Yt)?et(Rt,yr):void 0}}(Se))||Fe){He&&(Se=He);var pt=0,qt=function(){};return{s:qt,n:function(){return pt>=Se.length?{done:!0}:{done:!1,value:Se[pt++]}},e:function(Rt){throw Rt},f:qt}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ct,Vt=!0,Kt=!1;return{s:function(){He=He.call(Se)},n:function(){var Rt=He.next();return Vt=Rt.done,Rt},e:function(Rt){Kt=!0,ct=Rt},f:function(){try{Vt||He.return==null||He.return()}finally{if(Kt)throw ct}}}}function et(Se,Fe){(Fe==null||Fe>Se.length)&&(Fe=Se.length);for(var He=0,pt=Array(Fe);He<Fe;He++)pt[He]=Se[He];return pt}function kt(Se,Fe){var He=Object.keys(Se);if(Object.getOwnPropertySymbols){var pt=Object.getOwnPropertySymbols(Se);Fe&&(pt=pt.filter(function(qt){return Object.getOwnPropertyDescriptor(Se,qt).enumerable})),He.push.apply(He,pt)}return He}function Ht(Se){for(var Fe=1;Fe<arguments.length;Fe++){var He=arguments[Fe]!=null?arguments[Fe]:{};Fe%2?kt(Object(He),!0).forEach(function(pt){(0,f.A)(Se,pt,He[pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Se,Object.getOwnPropertyDescriptors(He)):kt(Object(He)).forEach(function(pt){Object.defineProperty(Se,pt,Object.getOwnPropertyDescriptor(He,pt))})}return Se}var ke,Cr={sd:{low:{s:0,t:2},med:{s:0,t:2},high:{s:1,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}},hd:{low:{s:0,t:2},med:{s:1,t:2},high:{s:2,t:2},s0t0:{s:0,t:0},s0t1:{s:0,t:1},s0t2:{s:0,t:2},s1t0:{s:1,t:0},s1t1:{s:1,t:1},s1t2:{s:1,t:2},s2t0:{s:2,t:0},s2t1:{s:2,t:1},s2t2:{s:2,t:2}}},kr={qvga:{width:{ideal:320},height:{ideal:240}},vga:{width:{ideal:640},height:{ideal:480}},sd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}},hd:{width:{ideal:1280},height:{ideal:720},frameRate:{ideal:24}}},Zr={sd:[{scaleResolutionDownBy:6},{scaleResolutionDownBy:4},{scaleResolutionDownBy:2}],hd:[{scaleResolutionDownBy:4},{scaleResolutionDownBy:2},{scaleResolutionDownBy:1}]},en=[{scalabilityMode:"S3T3_KEY"}],us=[{dtx:!0,maxFramerate:30}],Ti=[{scalabilityMode:"S3T3",dtx:!0}],Pe=new P("RoomClient"),Vi=function(){return(0,k.A)(function X(F){var U,z,H=F.roomId,re=F.peerId,se=F.secret,Ie=F.displayName,Re=F.device,wt=F.handlerName,qe=F.useSimulcast,yt=F.useSharingSimulcast,ae=F.forceTcp,st=F.mode,Je=F.forceH264,lt=F.forceVP9,ye=F.svc,Ge=F.datachannel,ir=F.externalVideo,er=F.micEnabled,ar=F.webcamEnabled,or=F.maxResolution,rr=F.useSpartialLayerAnalytics,pr=F._deviceInfo,Gt=F.customCameraVideoTrack,Wt=F.customMicrophoneAudioTrack,xr=F.autoConsume,tr=F.preferredProtocol,ur=F.signalingBaseUrl,Ar=F.metaData,nn=F.defaultCameraIndex,fn=F.debugMode;(0,w.A)(this,X),(0,f.A)(this,"delay",function(cr){return new Promise(function(sn){return setTimeout(sn,cr)})}),Pe.debug('constructor() [roomId:"%s", peerId:"%s", displayName:"%s", device:%s]',H,re,Ie,Re.flag),this.useSpartialLayerAnalytics=rr||!1,this._deviceInfo=pr,this._eventEmitter=new Ot.EventEmitter,this._closed=!1,this._displayName=Ie,this._device=Re,this._forceTcp=ae,this._preferredProtocol=tr,st==De.n.CONFERENCE?(U=!0,z=!0):(U=!1,z=!1),this._mode=st,this._produce=U,this._consume=z,this._useDataChannel=Ge,this._forceH264=!!Je,this._forceVP9=!!lt,this._micEnabled=!!er,this._webcamEnabled=!!ar,this._externalVideo=null,this._externalVideoStream=null,this._nextDataChannelTestNumber=0,ir&&(this._externalVideo=document.createElement("video"),this._externalVideo.controls=!0,this._externalVideo.loop=!0,this._externalVideo.setAttribute("playsinline",""),this._externalVideo.src=ir,this._externalVideo.play().catch(function(cr){return Pe.warn("externalVideo.play() failed:%o",cr)})),this._handlerName=wt,this._useSimulcast=qe,this._useSharingSimulcast=yt,this._protooUrl="",this._secret=se,this._peerId=re,this._roomId=H,this._baseUrl="",this._protoo=null,this._mediasoupDevice=null,this._sendTransport=null,this._recvTransport=null,this._micProducer=null,this._webcamProducer=null,this._shareProducer=null,this._shareAudioProducer=null,this._chatDataProducer=null,this._botDataProducer=null,this._consumers=new Map,this._dataConsumers=new Map,this._mics=new Map,this._mic={device:null},this._webcams=new Map,this._webcam={device:null,resolution:or||"hd"},this._pinnedParticipants=new Map,ye&&(en[0].scalabilityMode="".concat(ye,"_KEY"),Ti[0].scalabilityMode=ye),this.customCameraVideoTrack=Gt,this.customMicrophoneAudioTrack=Wt,this._autoConsume=xr,this._iceServers=[],this._metrics=new Er.VideoSDKMetrics({refreshEvery:1e3,startAfter:1e3,verbose:!1}),this._stats={},this._latestStats={},this._isWebsocketAlive=!1,this._pingWebsocketInterval=null,this._pingInternetInterval=null,this._pingWebsocketFailedCounter=0,this._pongInternetCounter=0,this._transportState="",this._openTelemetry=null,this._videosdkLogs=null,this._signalingBaseUrl=ur||"api.videosdk.live",this._metaData=Ar,this._defaultCameraIndex=nn,this._debugMode=!!fn},[{key:"on",value:function(X,F){this._eventEmitter.on(X,F)}},{key:"close",value:function(X){var F,U,z,H,re,se=X.sendLeft,Ie=se===void 0||se;if(Ie&&(this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CLOSING"}),(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Meeting is in CLOSING State",status:1})),!this._closed){this._closed=!0,this._pingWebsocketInterval&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=null,this._pingInternetInterval&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=null,this._protoo.close(),this._metrics.running&&this._metrics.stopAllProbes(),Pe.debug("close()");var Re=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"Closing Trasnport"});this._sendTransport&&this._sendTransport.close(),this._recvTransport&&this._recvTransport.close(),(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:Re,status:1,message:"Closed Trasnport"}),ke.dispatch(Z("closed")),Ie&&this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CLOSED"}),(z=this._openTelemetry)===null||z===void 0||z.traceAutoComplete({spanName:"Meeting is in CLOSED State",status:1}),Ie&&this._eventEmitter.emit("MEETING_LEFT"),(H=this._openTelemetry)===null||H===void 0||H.traceAutoComplete({spanName:"Emitted MEETING_LEFT Event",status:1})}}},{key:"join",value:(Cd=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Re,wt,qe,yt,ae=this;return s().wrap(function(st){for(;;)switch(st.prev=st.next){case 0:return st.next=2,v({roomId:this._roomId,secret:this._secret,signalingBaseUrl:this._signalingBaseUrl});case 2:z=st.sent,H=z.baseUrl,re=z.iceServers,se=z.logs,Ie=z.observabilityJwt,Re=z.traces,wt=z.metaData,qe=z.signalingUrl,this._baseUrl=H,this._protooUrl="".concat(qe||"wss://".concat(this._baseUrl),"/?roomId=").concat(this._roomId,"&peerId=").concat(this._peerId,"&secret=").concat(this._secret,"&mode=").concat(this._mode),this._iceServers=re,this._tracesEnabled=Re.enabled,this._openTelemetry=new Ee((0,f.A)({roomId:this._roomId,peerId:this._peerId,sdkName:"".concat(this._deviceInfo.sdkType,"-sdk"),traces:Re,logs:se,observabilityJwt:Ie,metaData:wt},"traces",Re)),this._joinSpan=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"Join() Calling",attributes:{DeviceInfo:JSON.stringify(this._deviceInfo),mode:this._mode,displayName:this._displayName,multiStream:this._useSimulcast,micEnabled:this._micEnabled,webcamEnabled:this._webcamEnabled,CustomVideoTrack:!!this.customCameraVideoTrack,CustomMicTrack:!!this.customMicrophoneAudioTrack,signalingUrl:qe||"signalingUrl not specify"}}),yt=new b.TJ(this._protooUrl),this._protoo=new b.xM(yt),this._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CONNECTING"}),ke.dispatch(Z("connecting")),(U=this._openTelemetry)===null||U===void 0||U.traceAutoComplete({spanName:"Meeting is in CONNECTING State",span:this._joinSpan,status:1}),this._protoo.on("open",function(){var Je;ae._isWebsocketAlive=!0,ae._closed=!1,ae.startPingPong(),ae._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CONNECTED"}),(Je=ae._openTelemetry)===null||Je===void 0||Je.traceAutoComplete({spanName:"Meeting is in CONNECTED State",span:ae._joinSpan,status:1}),ae.requestEntry()}),this._protoo.on("failed",function(){var Je;ae._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"FAILED"}),(Je=ae._openTelemetry)===null||Je===void 0||Je.traceAutoComplete({spanName:"Meeting is in FAILED State",span:ae._joinSpan,status:2}),ke.dispatch(Ae({type:"error",text:"WebSocket connection failed"}))}),this._protoo.on("disconnected",function(){var Je;ae._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"DISCONNECTED"}),(Je=ae._openTelemetry)===null||Je===void 0||Je.traceAutoComplete({spanName:"Meeting is in DISCONNECTED State",span:ae._joinSpan,status:1}),ke.dispatch(Ae({type:"error",text:"WebSocket disconnected"})),ae._sendTransport&&(ae._sendTransport.close(),ae._sendTransport=null),ae._recvTransport&&(ae._recvTransport.close(),ae._recvTransport=null),ke.dispatch(Z("closed"))}),this._protoo.on("close",function(){ae._closed||ae.close({sendLeft:!0})}),this._protoo.on("request",function(){var Je=(0,h.A)(s().mark(function lt(ye,Ge,ir){var er,ar,or,rr,pr,Gt,Wt,xr,tr,ur,Ar,nn,fn,cr,sn,Ur,wn,bn,Ir,jn,jt,gn,Lt,hr,qr,an,on,Xr,bi,Ai,mi,zn,ei,qi,Li,rn,Ni,Bn,ti,Pn,Si,ji,ri,ni,ii,Sn,Hn,si,Tn,Wn,Lr,Fn,Nr,_r,mt,Ye,Bt,Jr,Vn,gi,ra,ts;return s().wrap(function(Et){for(;;)switch(Et.prev=Et.next){case 0:Pe.debug('proto "request" event [method:%s, data:%o]',ye.method,ye.data),Et.t0=ye.method,Et.next=Et.t0==="close"?4:Et.t0==="newConsumer"?7:Et.t0==="newDataConsumer"?45:Et.t0==="enableMic"?72:Et.t0==="disableMic"?74:Et.t0==="enableWebcam"?88:Et.t0==="disableWebcam"?90:Et.t0==="pinStateChanged"?104:Et.t0==="switchRoom"?124:Et.t0==="statsData"?127:130;break;case 4:return Ge(),ae.close({sendLeft:!0}),Et.abrupt("break",130);case 7:if(or=(er=ae._openTelemetry)===null||er===void 0?void 0:er.trace({spanName:"Protoo REQ: newConsumer",attributes:{request:JSON.stringify(ye)}}),ae._consume){Et.next=12;break}return ir(403,"I do not want to consume"),(rr=ae._openTelemetry)===null||rr===void 0||rr.completeSpan({span:or,status:2,message:"I do not want to consume"}),Et.abrupt("break",130);case 12:return pr=ye.data,Gt=pr.peerId,Wt=pr.producerId,xr=pr.id,tr=pr.kind,ur=pr.rtpParameters,Ar=pr.type,nn=pr.appData,fn=pr.producerPaused,cr=(ar=ae._openTelemetry)===null||ar===void 0?void 0:ar.trace({spanName:"Creating Consumer",span:or}),Et.prev=14,Et.next=17,ae._recvTransport.consume({id:xr,producerId:Wt,kind:tr,rtpParameters:ur,appData:Ht(Ht({},nn),{},{peerId:Gt})});case 17:Ir=Et.sent,jn=S.parseScalabilityMode(Ir.rtpParameters.encodings[0].scalabilityMode),jt=jn.spatialLayers,gn=jn.temporalLayers,Ir.spatialLayers=jt,Ir.temporalLayers=gn,Ir.currentSpatialLayers=jt-1,Ir.currentTemporalLayers=gn-1,ae._consumers.set(Ir.id,Ir),Ir.on("transportclose",function(){ae._consumers.delete(Ir.id);var dn=Xt(Ir.id,Gt);ke.dispatch(dn),ae._eventEmitter.emit(dn.type,dn.payload)}),(sn=ae._openTelemetry)===null||sn===void 0||sn.completeSpan({span:cr,status:1,message:"Consumer Created"}),cr=(Ur=ae._openTelemetry)===null||Ur===void 0?void 0:Ur.trace({spanName:"Sending Stream Enabled Event",span:or}),Lt=Nt({id:Ir.id,type:Ar,locallyPaused:!1,remotelyPaused:fn,rtpParameters:Ir.rtpParameters,spatialLayers:jt,temporalLayers:gn,currentSpatialLayer:jt-1,currentTemporalLayer:gn-1,preferredSpatialLayer:jt-1,preferredTemporalLayer:gn-1,priority:1,codec:Ir.rtpParameters.codecs[0].mimeType.split("/")[1],track:Ir.track,appData:nn,instance:Ir},Gt),ke.dispatch(Lt),ae._eventEmitter.emit(Lt.type,Lt.payload),Ge(),Ir.kind==="video"&&ke.getState().me.audioOnly&&ae._pauseConsumer(Ir),(wn=ae._openTelemetry)===null||wn===void 0||wn.completeSpan({span:cr,status:1,message:"Event Send Successfully"}),(bn=ae._openTelemetry)===null||bn===void 0||bn.completeSpan({span:or,status:1,message:"New Consumer Created Successfully",attributes:{"consumer.consumerId":Ir.id}}),Ir.kind=="video"&&Ir.appData.share&&((hr=ae._openTelemetry)===null||hr===void 0||hr.traceAutoComplete({spanName:"Presenter Changed",span:or,attributes:{"peer.id":Gt}})),Et.next=44;break;case 37:throw Et.prev=37,Et.t1=Et.catch(14),(qr=ae._openTelemetry)===null||qr===void 0||qr.completeSpan({span:cr,status:2,message:"Error creating a Consumer: ".concat(Et.t1)}),(an=ae._openTelemetry)===null||an===void 0||an.completeSpan({span:or,status:2,message:"Error creating a Consumer: ".concat(Et.t1)}),ke.dispatch(Ae({type:"error",text:"Error creating a Consumer: ".concat(Et.t1)})),(on=ae._videosdkLogs)===null||on===void 0||on.pushLogs({logText:"Error creating a Consumer",logType:"ERROR",attributes:{error:Et.t1.message}}),Et.t1;case 44:return Et.abrupt("break",130);case 45:if(ae._consume){Et.next=48;break}return ir(403,"I do not want to data consume"),Et.abrupt("break",130);case 48:if(ae._useDataChannel){Et.next=51;break}return ir(403,"I do not want DataChannels"),Et.abrupt("break",130);case 51:return Xr=ye.data,bi=Xr.peerId,Ai=Xr.dataProducerId,mi=Xr.id,zn=Xr.sctpStreamParameters,ei=Xr.label,qi=Xr.protocol,Li=Xr.appData,Et.prev=52,Et.next=55,ae._recvTransport.consumeData({id:mi,dataProducerId:Ai,sctpStreamParameters:zn,label:ei,protocol:qi,appData:Ht(Ht({},Li),{},{peerId:bi})});case 55:rn=Et.sent,ae._dataConsumers.set(rn.id,rn),rn.on("transportclose",function(){ae._dataConsumers.delete(rn.id)}),rn.on("open",function(){Pe.debug('DataConsumer "open" event')}),rn.on("close",function(){Pe.warn('DataConsumer "close" event'),ae._dataConsumers.delete(rn.id),ke.dispatch(Ae({type:"error",text:"DataConsumer closed"}))}),rn.on("error",function(dn){Pe.error('DataConsumer "error" event:%o',dn),ke.dispatch(Ae({type:"error",text:"DataConsumer error: ".concat(dn)}))}),rn.on("message",function(dn){if(Pe.debug('DataConsumer "message" event [streamId:%d]',rn.sctpStreamParameters.streamId),window.DC_MESSAGE=dn,dn instanceof ArrayBuffer){var ha=new DataView(dn).getUint32();return ha==Math.pow(2,32)-1?(Pe.warn("dataChannelTest finished!"),void(ae._nextDataChannelTestNumber=0)):(ha>ae._nextDataChannelTestNumber&&Pe.warn("dataChannelTest: %s packets missing",ha-ae._nextDataChannelTestNumber),void(ae._nextDataChannelTestNumber=ha+1))}if(typeof dn=="string")switch(rn.label){case"chat":var Oa=ke.getState().peers,Da=Object.keys(Oa).map(function(Hs){return Oa[Hs]}).find(function(Hs){return Hs.dataConsumers.includes(rn.id)});if(!Da){Pe.warn('DataConsumer "message" from unknown peer');break}ke.dispatch(Ae({title:"".concat(Da.displayName," says:"),text:dn,timeout:5e3})),ae._eventEmitter.emit("CHAT_MESSAGE",{text:dn,senderId:Da.id,timestamp:new Date().getTime()});break;case"bot":ke.dispatch(Ae({title:"Message from Bot:",text:dn,timeout:5e3}))}else Pe.warn('ignoring DataConsumer "message" (not a string)')}),window.DC=rn,ke.dispatch(Rr({id:rn.id,sctpStreamParameters:rn.sctpStreamParameters,label:rn.label,protocol:rn.protocol},bi)),Ge(),Et.next=71;break;case 67:Et.prev=67,Et.t2=Et.catch(52),Pe.error('"newDataConsumer" request failed:%o',Et.t2),ke.dispatch(Ae({type:"error",text:"Error creating a DataConsumer: ".concat(Et.t2)}));case 71:return Et.abrupt("break",130);case 72:try{Bn=ye.data.peerId,(Ni=ae._openTelemetry)===null||Ni===void 0||Ni.traceAutoComplete({spanName:"Emitting MIC_REQUESTED & Protoo REQ: enableMic for ".concat(Bn),status:1}),ae._eventEmitter.emit("MIC_REQUESTED",{peerId:Bn}),Ge()}catch(dn){Pe.error('"enableMic" request failed:%o',dn),(ti=ae._videosdkLogs)===null||ti===void 0||ti.pushLogs({logText:"Error enableMic request failed",logType:"ERROR",attributes:{error:dn.message}}),ae._emitError({code:3027,message:dn.message})}return Et.abrupt("break",130);case 74:return Et.prev=74,Pn=(Si=ae._openTelemetry)===null||Si===void 0?void 0:Si.trace({spanName:"Protoo REQ: disableMic"}),Et.next=78,ae.disableMic(!1,Pn);case 78:(ji=ae._openTelemetry)===null||ji===void 0||ji.completeSpan({span:Pn,status:1,message:"Request Completed"}),Ge(),Et.next=87;break;case 82:Et.prev=82,Et.t3=Et.catch(74),(ri=ae._openTelemetry)===null||ri===void 0||ri.completeSpan({span:Pn,status:2,message:"disableMic request failed ".concat(Et.t3)}),(ni=ae._videosdkLogs)===null||ni===void 0||ni.pushLogs({logText:"Error disableMic request failed",logType:"ERROR",attributes:{error:Et.t3.message}}),ae._emitError({code:3028,message:Et.t3.message});case 87:return Et.abrupt("break",130);case 88:try{Sn=ye.data.peerId,(ii=ae._openTelemetry)===null||ii===void 0||ii.traceAutoComplete({spanName:"Emitting WEBCAM_REQUESTED & Protoo REQ: enableWebcam for ".concat(Sn),status:1}),ae._eventEmitter.emit("WEBCAM_REQUESTED",{peerId:Sn}),Ge()}catch(dn){Pe.error('"enableWebcam" request failed:%o',dn),(Hn=ae._videosdkLogs)===null||Hn===void 0||Hn.pushLogs({logText:"Error enableWebcam request failed",logType:"ERROR",attributes:{error:dn.message}}),ae._emitError({code:3029,message:dn.message})}return Et.abrupt("break",130);case 90:return Et.prev=90,si=(Tn=ae._openTelemetry)===null||Tn===void 0?void 0:Tn.trace({spanName:"Protoo REQ: disableWebcam"}),Et.next=94,ae.disableWebcam(si);case 94:(Wn=ae._openTelemetry)===null||Wn===void 0||Wn.completeSpan({span:si,status:1,message:"Request Completed"}),Ge(),Et.next=103;break;case 98:Et.prev=98,Et.t4=Et.catch(90),(Lr=ae._openTelemetry)===null||Lr===void 0||Lr.completeSpan({span:si,status:2,message:"disableWebcam request failed ".concat(Et.t4)}),(Fn=ae._videosdkLogs)===null||Fn===void 0||Fn.pushLogs({logText:"Error disableWebcam request failed",logType:"ERROR",attributes:{error:Et.t4.message}}),ae._emitError({code:3030,message:Et.t4.message});case 103:return Et.abrupt("break",130);case 104:Et.prev=104,Ye=ye.data,Bt=Ye.peerId,Jr=Ye.state,Vn=Ye.pinnedBy,Nr=(_r=ae._openTelemetry)===null||_r===void 0?void 0:_r.trace({spanName:"Protoo REQ: pinStateChanged",attributes:{requestData:JSON.stringify({peerId:Bt,state:Jr,pinnedBy:Vn})}}),ae._pinnedParticipants.has(Bt)||ae._pinnedParticipants.set(Bt,{cam:!1,share:!1}),gi=ae._pinnedParticipants.get(Bt),Jr.cam!=null&&(gi.cam=Jr.cam),Jr.share!=null&&(gi.share=Jr.share),ae._pinnedParticipants.set(Bt,gi),ae._eventEmitter.emit("PIN_STATE_CHANGED",{peerId:Bt,state:Jr,pinnedBy:Vn}),gi.share==0&&gi.cam==0&&ae._pinnedParticipants.delete(Bt),(mt=ae._openTelemetry)===null||mt===void 0||mt.completeSpan({span:Nr,status:1,message:"Request Completed",attributes:{_pinnedParticipants:JSON.stringify(ae._pinnedParticipants)}}),Ge(),Et.next=123;break;case 118:throw Et.prev=118,Et.t5=Et.catch(104),(ra=ae._openTelemetry)===null||ra===void 0||ra.completeSpan({span:Nr,status:2,message:"pinStateChanged request failed"}),(ts=ae._videosdkLogs)===null||ts===void 0||ts.pushLogs({logText:"Error pinStateChanged request failed",logType:"ERROR",attributes:{error:Et.t5.message}}),Et.t5;case 123:return Et.abrupt("break",130);case 124:return ae._eventEmitter.emit("SWITCH_ROOM",ye.data),Ge(),Et.abrupt("break",130);case 127:return Ge({peerId:ae._peerId,statsData:ae._stats}),ae._stats={},Et.abrupt("break",130);case 130:case"end":return Et.stop()}},lt,null,[[14,37],[52,67],[74,82],[90,98],[104,118]])}));return function(lt,ye,Ge){return Je.apply(this,arguments)}}()),this._protoo.on("notification",function(){var Je=(0,h.A)(s().mark(function lt(ye){var Ge,ir,er,ar,or,rr,pr,Gt,Wt,xr,tr,ur,Ar,nn,fn,cr,sn,Ur,wn,bn,Ir,jn,jt,gn,Lt,hr,qr,an,on,Xr,bi,Ai,mi,zn,ei,qi,Li,rn,Ni,Bn,ti,Pn,Si,ji,ri,ni,ii,Sn,Hn,si,Tn,Wn,Lr,Fn,Nr,_r,mt,Ye,Bt,Jr,Vn,gi,ra,ts,Et,dn,ha,Oa,Da,Hs,Fl,Ia,zo,Cc,On,Pc,Pd,Ul,zl,Td,Ho,Wo,Tc,Hl,Wl,xd;return s().wrap(function(Xe){for(;;)switch(Xe.prev=Xe.next){case 0:Pe.debug('proto "notification" event [method:%s, data:%o]',ye.method,ye.data),Xe.t0=ye.method,Xe.next=Xe.t0==="error"?4:Xe.t0==="participantMediaStateChanged"?9:Xe.t0==="producerScore"?10:Xe.t0==="entryRequested"?13:Xe.t0==="entryResponded"?17:Xe.t0==="newPeer"?23:Xe.t0==="peerClosed"?30:Xe.t0==="peerDisplayNameChanged"?36:Xe.t0==="downlinkBwe"?40:Xe.t0==="consumerClosed"?42:Xe.t0==="consumerPaused"?54:Xe.t0==="consumerResumed"?61:Xe.t0==="consumerLayersChanged"?68:Xe.t0==="consumerScore"?79:Xe.t0==="dataConsumerClosed"?82:Xe.t0==="activeSpeaker"?91:Xe.t0==="transcriptionStateChanged"?96:Xe.t0==="transcriptionText"?99:Xe.t0==="recordingStateChanged"?101:Xe.t0==="recordingStarted"?104:Xe.t0==="recordingStopped"?106:Xe.t0==="livestreamStateChanged"?108:Xe.t0==="livestreamStarted"?111:Xe.t0==="livestreamStopped"?113:Xe.t0==="hlsStateChanged"?115:Xe.t0==="hlsPlayableStateChanged"?118:Xe.t0==="hlsStarted"?120:Xe.t0==="hlsStopped"?123:Xe.t0==="whiteboardStarted"?125:Xe.t0==="whiteboardStopped"?128:Xe.t0==="addCharacter"?130:Xe.t0==="removeCharacter"?136:Xe.t0==="characterStateChanged"?142:Xe.t0==="characterMessage"?145:Xe.t0==="videoStatusChanged"?147:Xe.t0==="videoSeeked"?149:Xe.t0==="connectionOpen"?152:Xe.t0==="connectionClose"?154:Xe.t0==="connectionChatMessage"?156:Xe.t0==="connectionParticipantJoined"?158:Xe.t0==="connectionParticipantLeft"?160:Xe.t0==="pubsubMessage"?162:Xe.t0==="peerModeChanged"?164:Xe.t0==="restartIce"?167:171;break;case 4:return er=ye.data,ae._eventEmitter.emit("ERROR",er),(Ge=ae._videosdkLogs)===null||Ge===void 0||Ge.pushLogs({logText:"Error in Meeting Session",logType:"ERROR",attributes:{error:er.message}}),(ir=ae._openTelemetry)===null||ir===void 0||ir.traceAutoComplete({spanName:"Emitted `ERROR` Event",attributes:{error:er.message},status:2}),Xe.abrupt("break",172);case 9:try{ar=ye.data,or=ar.peerId,rr=ar.kind,pr=ar.newState,ae._eventEmitter.emit("PARTICIPANT_MEDIA_STATE_CHANGED",{peerId:or,kind:rr,newState:pr}),rr=="video"&&((Gt=ae._openTelemetry)===null||Gt===void 0||Gt.traceAutoComplete({spanName:"".concat(or," has ").concat(pr?"enable":"disable"," ").concat(rr),status:1}))}catch(Vo){Pe.error('"newProducer" request failed:%o',Vo),(Wt=ae._videosdkLogs)===null||Wt===void 0||Wt.pushLogs({logText:"Error newProducer request failed",logType:"ERROR",attributes:{error:Vo.message}})}case 10:return xr=ye.data,tr=xr.producerId,ur=xr.score,ke.dispatch(xt(tr,ur)),Xe.abrupt("break",172);case 13:return nn=ye.data,fn=nn.id,cr=nn.name,sn=(Ar=ae._openTelemetry)===null||Ar===void 0?void 0:Ar.trace({spanName:"Protoo Noti: entryRequested",span:ae._joinSpan,attributes:{data:JSON.stringify({id:fn,name:cr})}}),fn!==ae._peerId?(ae._eventEmitter.emit("ENTRY_REQUESTED",{id:fn,name:cr}),(Ur=ae._openTelemetry)===null||Ur===void 0||Ur.completeSpan({span:sn,status:1,message:"EntryResponded Recieved"})):(wn=ae._openTelemetry)===null||wn===void 0||wn.completeSpan({span:sn,status:2,message:"Entry Request Failed"}),Xe.abrupt("break",172);case 17:return Ir=ye.data,jn=Ir.id,jt=Ir.decision,gn=Ir.sessionId,ae._videosdkLogs=new Tt({roomId:ae._roomId,peerId:ae._peerId,logs:se,observabilityJwt:Ie,deviceInfo:ae._deviceInfo,sessionId:gn,debugMode:ae._debugMode}),ae._eventEmitter.emit("ENTRY_RESPONDED",{id:jn,decision:jt}),Lt=(bn=ae._openTelemetry)===null||bn===void 0?void 0:bn.trace({spanName:"Protoo Noti: entryResponded",attributes:{data:JSON.stringify({id:jn,decision:jt}),sessionId:gn},span:ae._joinSpan}),jn===ae._peerId&&jt==="allowed"?(ae.joinRoom(),(hr=ae._openTelemetry)===null||hr===void 0||hr.completeSpan({span:Lt,status:1,message:"EntryResponded Recieved"})):(qr=ae._openTelemetry)===null||qr===void 0||qr.completeSpan({span:ae._joinSpan,status:2,message:"Join Request Denied"}),Xe.abrupt("break",172);case 23:an=ye.data,on=Qt(Ht(Ht({},an),{},{consumers:[],dataConsumers:[]})),ke.dispatch(on),ae._eventEmitter.emit(on.type,on.payload),ke.dispatch(Ae({text:"".concat(an.displayName," has joined the room")}));try{(Xr=ae._openTelemetry)===null||Xr===void 0||Xr.traceAutoComplete({spanName:"Protoo Noti: newPeer ".concat(an.displayName),attributes:{peerData:JSON.stringify(an)}})}catch(Vo){(bi=ae._videosdkLogs)===null||bi===void 0||bi.pushLogs({logText:"Error Protoo Noti: newPeer",logType:"ERROR",attributes:{error:Vo.message}}),console.error(Vo)}return Xe.abrupt("break",172);case 30:return mi=ye.data.peerId,zn=It(mi),ke.dispatch(zn),ae._eventEmitter.emit(zn.type,zn.payload),(Ai=ae._openTelemetry)===null||Ai===void 0||Ai.traceAutoComplete({spanName:"Protoo Noti: peerClosed for ".concat(mi)}),Xe.abrupt("break",172);case 36:return ei=ye.data,qi=ei.peerId,Li=ei.displayName,rn=ei.oldDisplayName,ke.dispatch(jr(Li,qi)),ke.dispatch(Ae({text:"".concat(rn," is now ").concat(Li)})),Xe.abrupt("break",172);case 40:return Pe.debug("'downlinkBwe' event:%o",ye.data),Xe.abrupt("break",172);case 42:if(Bn=ye.data.consumerId,ti=ae._consumers.get(Bn)){Xe.next=46;break}return Xe.abrupt("break",172);case 46:return ti.close(),ae._consumers.delete(Bn),Pn=ti.appData.peerId,Si=Xt(Bn,Pn),ke.dispatch(Si),ae._eventEmitter.emit(Si.type,Si.payload),(Ni=ae._openTelemetry)===null||Ni===void 0||Ni.traceAutoComplete({spanName:"Protoo Noti: consumerClosed for id ".concat(Bn),attributes:{consumerData:JSON.stringify(ti)}}),Xe.abrupt("break",172);case 54:if(ji=ye.data.consumerId,ri=ae._consumers.get(ji)){Xe.next=58;break}return Xe.abrupt("break",172);case 58:return ri.pause(),ke.dispatch(Mr(ji,"remote")),Xe.abrupt("break",172);case 61:if(ni=ye.data.consumerId,ii=ae._consumers.get(ni)){Xe.next=65;break}return Xe.abrupt("break",172);case 65:return ii.resume(),ke.dispatch(Br(ni,"remote")),Xe.abrupt("break",172);case 68:if(Hn=ye.data,si=Hn.consumerId,Tn=Hn.spatialLayer,Wn=Hn.temporalLayer,(Lr=ae._consumers.get(si)).currentSpatialLayer=Tn,Lr.currentTemporalLayer=Wn,Lr){Xe.next=74;break}return Xe.abrupt("break",172);case 74:return((Sn=Lr.appData)===null||Sn===void 0||(Sn=Sn.encodings)===null||Sn===void 0?void 0:Sn.length)>1?(ae._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:Lr.appData.peerId,prevQuality:Lr.spatialLayers-1-Lr.currentSpatialLayer==0?"HIGH":Lr.spatialLayers-1-Lr.currentSpatialLayer==1?"MEDIUM":"LOW",currentQuality:Lr.spatialLayers-1-Tn==0?"HIGH":Lr.spatialLayers-1-Tn==1?"MEDIUM":"LOW"}),(Fn=ae._videosdkLogs)===null||Fn===void 0||Fn.pushLogs({logText:"Consumer Peer ".concat(Lr.appData.peerId," changed to ").concat(Lr.spatialLayers-1-Tn==0?"HIGH":Lr.spatialLayers-1-Tn==1?"MEDIUM":"LOW",", previous quality was ").concat(Lr.spatialLayers-1-Lr.currentSpatialLayer==0?"HIGH":Lr.spatialLayers-1-Lr.currentSpatialLayer==1?"MEDIUM":"LOW"),logType:"INFO",attributes:{consumerId:si}})):(ae._eventEmitter.emit("VIDEO_QUALITY_CHANGED",{peerId:Lr.appData.peerId,prevQuality:"HIGH",currentQuality:"HIGH"}),(Nr=ae._videosdkLogs)===null||Nr===void 0||Nr.pushLogs({logText:"Consumer Peer ".concat(Lr.appData.peerId," changed to HIGH, previous quality was HIGH"),logType:"INFO",attributes:{consumerId:si}})),Lr.currentSpatialLayer=Tn,Lr.currentTemporalLayer=Wn,ke.dispatch(Fr(si,Tn,Wn)),Xe.abrupt("break",172);case 79:return _r=ye.data,mt=_r.consumerId,Ye=_r.score,ke.dispatch(Ve(mt,Ye)),Xe.abrupt("break",172);case 82:if(Bt=ye.data.dataConsumerId,Jr=ae._dataConsumers.get(Bt)){Xe.next=86;break}return Xe.abrupt("break",172);case 86:return Jr.close(),ae._dataConsumers.delete(Bt),Vn=Jr.appData.peerId,ke.dispatch(wr(Bt,Vn)),Xe.abrupt("break",172);case 91:return gi=ye.data.peerId,ra=ne(gi),ke.dispatch(ra),ae._eventEmitter.emit(ra.type,ra.payload),Xe.abrupt("break",172);case 96:return ae._eventEmitter.emit("TRANSCRIPTION_STATE_CHANGED",ye.data),(ts=ae._openTelemetry)===null||ts===void 0||ts.traceAutoComplete({spanName:"Emitted TRANSCRIPTION_STATE_CHANGED, status : ".concat(ye.data.status),attributes:{data:JSON.stringify(ye.data)},status:1}),Xe.abrupt("break",172);case 99:return ae._eventEmitter.emit("TRANSCRIPTION_TEXT",ye.data),Xe.abrupt("break",172);case 101:return ae._eventEmitter.emit("RECORDING_STATE_CHANGED",ye.data),(Et=ae._openTelemetry)===null||Et===void 0||Et.traceAutoComplete({spanName:"Emitted RECORDING_STATE_CHANGED, status : ".concat(ye.data.status),attributes:{data:JSON.stringify(ye.data)},status:1}),Xe.abrupt("break",172);case 104:return ae._eventEmitter.emit("RECORDING_STARTED",{}),Xe.abrupt("break",172);case 106:return ae._eventEmitter.emit("RECORDING_STOPPED",{}),Xe.abrupt("break",172);case 108:return ae._eventEmitter.emit("LIVESTREAM_STATE_CHANGED",ye.data),(dn=ae._openTelemetry)===null||dn===void 0||dn.traceAutoComplete({spanName:"Emitted LIVESTREAM_STATE_CHANGED, status : ".concat(ye.data.status),attributes:{data:JSON.stringify(ye.data)},status:1}),Xe.abrupt("break",172);case 111:return ae._eventEmitter.emit("LIVESTREAM_STARTED",{}),Xe.abrupt("break",172);case 113:return ae._eventEmitter.emit("LIVESTREAM_STOPPED",{}),Xe.abrupt("break",172);case 115:return ae._eventEmitter.emit("HLS_STATE_CHANGED",ye.data),(ha=ae._openTelemetry)===null||ha===void 0||ha.traceAutoComplete({spanName:"Emitted HLS_STATE_CHANGED, status : ".concat(ye.data.status),attributes:{data:JSON.stringify(ye.data)},status:1}),Xe.abrupt("break",172);case 118:return ye.data.isPlayable&&(ae._eventEmitter.emit("HLS_STATE_CHANGED",Ht(Ht({},ye.data),{},{status:dr.V.HLS_PLAYABLE})),(Oa=ae._openTelemetry)===null||Oa===void 0||Oa.traceAutoComplete({spanName:"Protoo Noti: hlsPlayableStateChanged",status:1})),Xe.abrupt("break",172);case 120:return Da=ye.data.downstreamUrl,ae._eventEmitter.emit("HLS_STARTED",Da),Xe.abrupt("break",172);case 123:return ae._eventEmitter.emit("HLS_STOPPED",{}),Xe.abrupt("break",172);case 125:return Hs=ye.data,Fl=Hs.state,Ia=Hs.url,Fl?ae._eventEmitter.emit("WHITEBOARD_STARTED",{state:Fl}):Ia&&ae._eventEmitter.emit("WHITEBOARD_STARTED",{url:Ia}),Xe.abrupt("break",172);case 128:return ae._eventEmitter.emit("WHITEBOARD_STOPPED",{}),Xe.abrupt("break",172);case 130:return Cc=ye.data,On=Qt(Ht(Ht({},Cc),{},{consumers:[],dataConsumers:[]})),ke.dispatch(On),ae._eventEmitter.emit("ADD_CHARACTER",ye.data),(zo=ae._openTelemetry)===null||zo===void 0||zo.traceAutoComplete({spanName:"Emitted ADD_CHARACTER : ".concat(ye.data),attributes:{data:JSON.stringify(ye.data)},status:1}),Xe.abrupt("break",172);case 136:return Pd=ye.data.id,Ul=It(Pd),ke.dispatch(Ul),ae._eventEmitter.emit("REMOVE_CHARACTER",ye.data),(Pc=ae._openTelemetry)===null||Pc===void 0||Pc.traceAutoComplete({spanName:"Emitted REMOVE_CHARACTER : ".concat(ye.data),attributes:{data:JSON.stringify(ye.data)},status:1}),Xe.abrupt("break",172);case 142:return ae._eventEmitter.emit("CHARACTER_STATE_CHANGED",ye.data),(zl=ae._openTelemetry)===null||zl===void 0||zl.traceAutoComplete({spanName:"Emitted CHARACTER_STATE_CHANGED, status : ".concat(ye.data.status),attributes:{data:JSON.stringify(ye.data)},status:1}),Xe.abrupt("break",172);case 145:return ae._eventEmitter.emit("CHARACTER_MESSAGE",ye.data),Xe.abrupt("break",172);case 147:return ae._eventEmitter.emit("VIDEO_STATE_CHANGED",ye.data),Xe.abrupt("break",172);case 149:return Td=ye.data.currentTime,ae._eventEmitter.emit("VIDEO_SEEKED",{currentTime:Td}),Xe.abrupt("break",172);case 152:return ae._eventEmitter.emit("CONNECTION_OPEN",ye.data),Xe.abrupt("break",172);case 154:return ae._eventEmitter.emit("CONNECTION_CLOSE",ye.data),Xe.abrupt("break",172);case 156:return ae._eventEmitter.emit("CONNECTION_CHAT_MESSAGE",ye.data),Xe.abrupt("break",172);case 158:return ae._eventEmitter.emit("CONNECTION_PARTICIPANT_JOIN",ye.data),Xe.abrupt("break",172);case 160:return ae._eventEmitter.emit("CONNECTION_PARTICIPANT_LEFT",ye.data),Xe.abrupt("break",172);case 162:return ae._eventEmitter.emit("PUBSUB_MESSAGE",ye.data),Xe.abrupt("break",172);case 164:return ae._eventEmitter.emit("PEER_MODE_CHANGED",ye.data),(Ho=ae._openTelemetry)===null||Ho===void 0||Ho.traceAutoComplete({spanName:"Emitted PEER_MODE_CHANGED",attributes:{data:JSON.stringify(ye.data)},status:1}),Xe.abrupt("break",172);case 167:return Tc=ye.data,Hl=Tc.transportId,Wl=Tc.iceParameters,xd=(Wo=ae._openTelemetry)===null||Wo===void 0?void 0:Wo.trace({spanName:"Protoo Noti: restartIce for transportId :".concat(Hl),attributes:{iceParameters:JSON.stringify(Wl)}}),ae.handleRemoteRestartIce({transportId:Hl,iceParameters:Wl,internalSpan:xd}),Xe.abrupt("break",172);case 171:Pe.error('unknown protoo notification.method "%s"',ye.method);case 172:case"end":return Xe.stop()}},lt)}));return function(lt){return Je.apply(this,arguments)}}());case 27:case"end":return st.stop()}},X,this)})),function(){return Cd.apply(this,arguments)})},{key:"requestEntry",value:(kd=(0,h.A)(s().mark(function X(){var F,U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"Requesting Entry",span:this._joinSpan}),H.next=3,this._protoo.request("requestEntry",{name:this._displayName});case 3:(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:z,status:1,message:"Entry Requested Successfully"});case 4:case"end":return H.stop()}},X,this)})),function(){return kd.apply(this,arguments)})},{key:"respondEntry",value:(Ed=(0,h.A)(s().mark(function X(F,U){var z,H,re;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return re=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"Responding Entry",attributes:{peerId:F,decision:U},span:this._joinSpan}),se.next=3,this._protoo.request("respondEntry",{id:F,decision:U});case 3:(H=this._openTelemetry)===null||H===void 0||H.completeSpan({message:"Entry Responded Successfully",span:re,status:1});case 4:case"end":return se.stop()}},X,this)})),function(X,F){return Ed.apply(this,arguments)})},{key:"startTranscription",value:(Rd=(0,h.A)(s().mark(function X(F){var U,z,H,re,se;return s().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Pe.debug("startTranscription()"),H=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"startTranscription() Start",attributes:{config:F?JSON.stringify(F):"config Not Specify"}}),Ie.prev=2,Ie.next=5,this._protoo.request("startTranscription",{config:F});case 5:Ie.next=13;break;case 7:Ie.prev=7,Ie.t0=Ie.catch(2),Pe.error("startTranscription() | failed:%o",Ie.t0),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:H,status:2,message:"startTranscription() failed"}),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error startTranscription() failed",logType:"ERROR",attributes:{error:Ie.t0.message}}),this._emitError({code:4031,message:Ie.t0.message});case 13:(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"startTranscription() End"});case 14:case"end":return Ie.stop()}},X,this,[[2,7]])})),function(X){return Rd.apply(this,arguments)})},{key:"stopTranscription",value:(Sd=(0,h.A)(s().mark(function X(){var F,U,z,H,re;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return Pe.debug("stopTranscription()"),z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"stopTranscription() Start"}),se.prev=2,se.next=5,this._protoo.request("stopTranscription",{});case 5:se.next=12;break;case 7:se.prev=7,se.t0=se.catch(2),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:z,status:2,message:"stopTranscription() failed"}),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error stopTranscription() failed",logType:"ERROR",attributes:{error:se.t0.message}}),this._emitError({code:4032,message:se.t0.message});case 12:(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:z,status:1,message:"stopTranscription() End"});case 13:case"end":return se.stop()}},X,this,[[2,7]])})),function(){return Sd.apply(this,arguments)})},{key:"startRecording",value:(bd=(0,h.A)(s().mark(function X(F,U,z,H){var re,se,Ie,Re,wt;return s().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return Pe.debug("startRecording()"),Ie=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"startRecording() Start",attributes:{webhookUrl:F||"webhookUrl Not Specify",awsDirPath:U||"awsDirPath Not Specify",config:z?JSON.stringify(z):"config Not Specify",transcription:H?JSON.stringify(H):"transcription Not Specify"}}),qe.prev=2,qe.next=5,this._protoo.request("startRecording",{webhookUrl:F,awsDirPath:U,config:z,transcription:H});case 5:qe.next=13;break;case 7:qe.prev=7,qe.t0=qe.catch(2),Pe.error("startRecording() | failed:%o",qe.t0),(Re=this._openTelemetry)===null||Re===void 0||Re.completeSpan({span:Ie,status:2,message:"startRecording() failed"}),(wt=this._videosdkLogs)===null||wt===void 0||wt.pushLogs({logText:"Error startRecording() failed",logType:"ERROR",attributes:{error:qe.t0.message}}),this._emitError({code:4011,message:qe.t0.message});case 13:(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:Ie,status:1,message:"startRecording() End"});case 14:case"end":return qe.stop()}},X,this,[[2,7]])})),function(X,F,U,z){return bd.apply(this,arguments)})},{key:"stopRecording",value:(Bl=(0,h.A)(s().mark(function X(){var F,U,z,H,re;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(!this._closed){se.next=2;break}return se.abrupt("return");case 2:return Pe.debug("stopRecording()"),z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"stopRecording() Start"}),se.prev=4,se.next=7,this._protoo.request("stopRecording",{});case 7:se.next=14;break;case 9:se.prev=9,se.t0=se.catch(4),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:z,status:2,message:"stopRecording() failed"}),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error stopRecording() failed",logType:"ERROR",attributes:{error:se.t0.message}}),this._emitError({code:4012,message:se.t0.message});case 14:(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:z,status:1,message:"stopRecording() End"});case 15:case"end":return se.stop()}},X,this,[[4,9]])})),function(){return Bl.apply(this,arguments)})},{key:"startLivestream",value:(jl=(0,h.A)(s().mark(function X(F,U){var z,H,re,se,Ie;return s().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return Pe.debug("startLivestream()"),re=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"startLivestream() Start",attributes:{outputs:F?JSON.stringify(F):"outputs Not Specify",config:U?JSON.stringify(U):"config Not Specify"}}),Re.prev=2,Re.next=5,this._protoo.request("startLivestream",{outputs:F,config:U});case 5:Re.next=12;break;case 7:Re.prev=7,Re.t0=Re.catch(2),(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:re,status:1,message:"startLivestream() End"}),(Ie=this._videosdkLogs)===null||Ie===void 0||Ie.pushLogs({logText:"Error startLivestream() failed",logType:"ERROR",attributes:{error:Re.t0.message}}),this._emitError({code:4013,message:Re.t0.message});case 12:(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:re,status:1,message:"startLivestream() End"});case 13:case"end":return Re.stop()}},X,this,[[2,7]])})),function(X,F){return jl.apply(this,arguments)})},{key:"stopLivestream",value:(Uo=(0,h.A)(s().mark(function X(){var F,U,z,H,re;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return Pe.debug("stopLivestream()"),z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"stopLivestream() Start"}),se.prev=2,se.next=5,this._protoo.request("stopLivestream",{});case 5:se.next=12;break;case 7:se.prev=7,se.t0=se.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error stopLivestream() failed",logType:"ERROR",attributes:{error:se.t0.message}}),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:z,status:2,message:"Error stopLivestream() failed"}),this._emitError({code:4014,message:se.t0.message});case 12:(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:z,status:1,message:"stopLivestream() End"});case 13:case"end":return se.stop()}},X,this,[[2,7]])})),function(){return Uo.apply(this,arguments)})},{key:"startHls",value:(Zn=(0,h.A)(s().mark(function X(F,U){var z,H,re,se,Ie;return s().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:return F=F||{},U=U||{},Pe.debug("startHls()"),re=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"startHls() Start",attributes:{config:F?JSON.stringify(F):"config Not Specify",transcription:U?JSON.stringify(U):"transcription Not Specify"}}),Re.prev=4,Re.next=7,this._protoo.request("startHls",{config:F,transcription:U});case 7:Re.next=15;break;case 9:Re.prev=9,Re.t0=Re.catch(4),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error startHls() failed",logType:"ERROR",attributes:{error:Re.t0.message}}),(Ie=this._openTelemetry)===null||Ie===void 0||Ie.completeSpan({span:re,status:2,message:"Error startHls() failed"}),this._emitError({code:4016,message:Re.t0.message}),Pe.error("startHls() | failed:%o",Re.t0);case 15:(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:re,status:1,message:"startHlsSpan() End"});case 16:case"end":return Re.stop()}},X,this,[[4,9]])})),function(X,F){return Zn.apply(this,arguments)})},{key:"stopHls",value:(Ut=(0,h.A)(s().mark(function X(){var F,U,z,H,re;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return Pe.debug("stopHls()"),z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"stopHls() Start"}),se.prev=2,se.next=5,this._protoo.request("stopHls",{});case 5:se.next=12;break;case 7:se.prev=7,se.t0=se.catch(2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error stopHls() failed",logType:"ERROR",attributes:{error:se.t0.message}}),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:z,status:2,message:"Error stopHls() failed"}),this._emitError({code:4017,message:se.t0.message});case 12:(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:z,status:1,message:"stopHls() End"});case 13:case"end":return se.stop()}},X,this,[[2,7]])})),function(){return Ut.apply(this,arguments)})},{key:"startWhiteboard",value:(Nl=(0,h.A)(s().mark(function X(){var F,U,z,H;return s().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return Pe.debug("startWhiteboard()"),z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"startWhiteboard() Start"}),re.prev=2,re.next=5,this._protoo.request("startWhiteboard",{version:"v2"});case 5:re.next=12;break;case 7:re.prev=7,re.t0=re.catch(2),Pe.error("startWhiteboard() | failed:%o",re.t0),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:z,status:2,message:"Error startWhiteboard() failed"}),this._emitError({code:3021,message:re.t0.message});case 12:(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:z,status:1,message:"startWhiteboard() End"});case 13:case"end":return re.stop()}},X,this,[[2,7]])})),function(){return Nl.apply(this,arguments)})},{key:"stopWhiteboard",value:(nr=(0,h.A)(s().mark(function X(){var F,U,z,H;return s().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return Pe.debug("stopWhiteboard()"),z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"stopWhiteboard() Start"}),re.prev=2,re.next=5,this._protoo.request("stopWhiteboard",{});case 5:re.next=12;break;case 7:re.prev=7,re.t0=re.catch(2),Pe.error("stopWhiteboard() | failed:%o",re.t0),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:z,status:2,message:"Error stopWhiteboard() failed"}),this._emitError({code:3022,message:re.t0.message});case 12:(U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:z,status:1,message:"stopWhiteboard() End"});case 13:case"end":return re.stop()}},X,this,[[2,7]])})),function(){return nr.apply(this,arguments)})},{key:"joinCharacter",value:(Ll=(0,h.A)(s().mark(function X(F){var U,z,H,re,se;return s().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Pe.debug("joinCharacter()"),H=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"joinCharacter() Start",attributes:{config:F?JSON.stringify(F):"config Not Specify"}}),Ie.prev=2,Ie.next=5,this._protoo.request("joinCharacter",{config:F});case 5:return Ie.abrupt("return",Ie.sent);case 8:Ie.prev=8,Ie.t0=Ie.catch(2),Pe.error("joinCharacter() | failed:%o",Ie.t0),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:H,status:2,message:"joinCharacter() failed"}),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error joinCharacter() failed",logType:"ERROR",attributes:{error:Ie.t0.message}}),this._emitError({code:4033,message:Ie.t0.message});case 14:return(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"joinCharacter() End"}),Ie.abrupt("return",!1);case 16:case"end":return Ie.stop()}},X,this,[[2,8]])})),function(X){return Ll.apply(this,arguments)})},{key:"removeCharacter",value:(Ft=(0,h.A)(s().mark(function X(F){var U,z,H,re,se;return s().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return Pe.debug("removeCharacter()"),H=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"removeCharacter() Start"}),Ie.prev=2,Ie.next=5,this._protoo.request("leaveCharacter",{config:F});case 5:Ie.next=14;break;case 7:return Ie.prev=7,Ie.t0=Ie.catch(2),Pe.error("removeCharacter() | failed:%o",Ie.t0),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:H,status:2,message:"removeCharacter() failed"}),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Error removeCharacter() failed",logType:"ERROR",attributes:{error:Ie.t0.message}}),this._emitError({code:4034,message:Ie.t0.message}),Ie.abrupt("return",!1);case 14:return(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"removeCharacter() End"}),Ie.abrupt("return",!0);case 16:case"end":return Ie.stop()}},X,this,[[2,7]])})),function(X){return Ft.apply(this,arguments)})},{key:"sendCharacterMessage",value:(he=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return U=F.interactionId,z=F.text,Pe.debug("sendCharacterMessage()"),H.prev=2,H.next=5,this._protoo.request("sendCharacterMessage",{interactionId:U,text:z});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),Pe.error("sendCharacterMessage() | failed:%o",H.t0),this._emitError({code:4035,message:H.t0.message});case 11:case"end":return H.stop()}},X,this,[[2,7]])})),function(X){return he.apply(this,arguments)})},{key:"interruptCharacter",value:(Al=(0,h.A)(s().mark(function X(F){var U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return U=F.interactionId,Pe.debug("interruptCharacter()"),z.prev=2,z.next=5,this._protoo.request("interruptCharacter",{interactionId:U});case 5:z.next=11;break;case 7:z.prev=7,z.t0=z.catch(2),Pe.error("interruptCharacter() | failed:%o",z.t0),this._emitError({code:4036,message:z.t0.message});case 11:case"end":return z.stop()}},X,this,[[2,7]])})),function(X){return Al.apply(this,arguments)})},{key:"pinStateChange",value:(kc=(0,h.A)(s().mark(function X(F){var U,z,H,re;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return z=F.peerId,H=F.state,(U=this._openTelemetry)===null||U===void 0||U.traceAutoComplete({spanName:"Pin state Change for ".concat(z),attributes:{state:H?JSON.stringify(H):null},status:1}),se.prev=2,se.next=5,this._protoo.request("pinStateChanged",{peerId:z,state:H});case 5:se.next=11;break;case 7:se.prev=7,se.t0=se.catch(2),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error pinStateChange() failed",logType:"ERROR",attributes:{error:se.t0.message}}),Pe.error("pinStateChange() | failed");case 11:case"end":return se.stop()}},X,this,[[2,7]])})),function(X){return kc.apply(this,arguments)})},{key:"startVideo",value:(Ml=(0,h.A)(s().mark(function X(F){var U,z,H;return s().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return z=F.link,Pe.debug("startVideo()"),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"startVideo() Calling",logType:"INFO"}),re.prev=3,re.next=6,this._protoo.request("startVideo",{link:z});case 6:re.next=13;break;case 8:re.prev=8,re.t0=re.catch(3),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error startVideo() failed",logType:"ERROR",attributes:{error:re.t0.message}}),Pe.error("startVideo() | failed:%o",re.t0),this._emitError({code:3023,message:re.t0.message});case 13:case"end":return re.stop()}},X,this,[[3,8]])})),function(X){return Ml.apply(this,arguments)})},{key:"stopVideo",value:(ta=(0,h.A)(s().mark(function X(){var F,U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Pe.debug("stopVideo()"),(F=this._videosdkLogs)===null||F===void 0||F.pushLogs({logText:"stopVideo() Calling",logType:"INFO"}),z.prev=2,z.next=5,this._protoo.request("stopVideo",{});case 5:z.next=12;break;case 7:z.prev=7,z.t0=z.catch(2),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error stopVideo() failed",logType:"ERROR",attributes:{error:z.t0.message}}),Pe.error("stopVideo() | failed:%o",z.t0),this._emitError({code:3024,message:z.t0.message});case 12:case"end":return z.stop()}},X,this,[[2,7]])})),function(){return ta.apply(this,arguments)})},{key:"pauseVideo",value:(Mi=(0,h.A)(s().mark(function X(F){return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return Pe.debug("pauseVideo()"),U.prev=1,U.next=4,this._protoo.request("pauseVideo",{currentTime:F});case 4:U.next=10;break;case 6:U.prev=6,U.t0=U.catch(1),Pe.error("pauseVideo() | failed:%o",U.t0),this._emitError({code:3025,message:U.t0.message});case 10:case"end":return U.stop()}},X,this,[[1,6]])})),function(X){return Mi.apply(this,arguments)})},{key:"resumeVideo",value:(Nn=(0,h.A)(s().mark(function X(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return Pe.debug("resumeVideo()"),F.prev=1,F.next=4,this._protoo.request("resumeVideo",{});case 4:F.next=10;break;case 6:F.prev=6,F.t0=F.catch(1),Pe.error("resumeVideo() | failed:%o",F.t0),this._emitError({code:3026,message:F.t0.message});case 10:case"end":return F.stop()}},X,this,[[1,6]])})),function(){return Nn.apply(this,arguments)})},{key:"seekVideo",value:(Ec=(0,h.A)(s().mark(function X(F){return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return Pe.debug("seekVideo()"),U.prev=1,U.next=4,this._protoo.request("seekVideo",{currentTime:F});case 4:U.next=10;break;case 6:U.prev=6,U.t0=U.catch(1),Pe.error("seekVideo() | failed:%o",U.t0),this._emitError({code:3031,message:U.t0.message});case 10:case"end":return U.stop()}},X,this,[[1,6]])})),function(X){return Ec.apply(this,arguments)})},{key:"enablePeerMic",value:(Rc=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return(U=this._openTelemetry)===null||U===void 0||U.traceAutoComplete({spanName:"Enabling peer ".concat(F," Mic"),status:1}),Pe.debug("enablePeerMic()"),H.prev=2,H.next=5,this._protoo.request("enablePeerMic",{peerId:F});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error enablePeerMic() failed",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.error("enablePeerMic() | failed:%o",H.t0);case 11:case"end":return H.stop()}},X,this,[[2,7]])})),function(X){return Rc.apply(this,arguments)})},{key:"disablePeerMic",value:(Il=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return(U=this._openTelemetry)===null||U===void 0||U.traceAutoComplete({spanName:"Disabling peer ".concat(F," Mic"),status:1}),Pe.debug("disablePeerMic()"),H.prev=2,H.next=5,this._protoo.request("disablePeerMic",{peerId:F});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error disablePeerMic() failed",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.error("disablePeerMic() | failed:%o",H.t0);case 11:case"end":return H.stop()}},X,this,[[2,7]])})),function(X){return Il.apply(this,arguments)})},{key:"consumeWebcamStreams",value:(Fo=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!this._closed){H.next=2;break}return H.abrupt("return");case 2:return Pe.debug("consumeWebcamStreams()"),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"consumeWebcamStreams() Calling",logType:"INFO",attributes:{peerId:F}}),H.prev=4,H.next=7,this._protoo.request("consumeVideoStreams",{peerId:F});case 7:H.next=13;break;case 9:H.prev=9,H.t0=H.catch(4),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error consumeWebcamStreams() failed",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.error("consumeWebcamStreams() | failed:%o",H.t0);case 13:case"end":return H.stop()}},X,this,[[4,9]])})),function(X){return Fo.apply(this,arguments)})},{key:"consumeMicStreams",value:(Dr=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return Pe.debug("consumeMicStreams()"),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"consumeMicStreams() Calling",logType:"INFO",attributes:{peerId:F}}),H.prev=2,H.next=5,this._protoo.request("consumeAudioStreams",{peerId:F});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error consumeMicStreams() failed",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.error("consumeMicStreams() | failed:%o",H.t0);case 11:case"end":return H.stop()}},X,this,[[2,7]])})),function(X){return Dr.apply(this,arguments)})},{key:"stopConsumingMicStreams",value:(ea=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!this._closed){H.next=2;break}return H.abrupt("return");case 2:return Pe.debug("stopConsumingAudioStreams()"),H.prev=3,H.next=6,this._protoo.request("stopConsumingAudioStreams",{peerId:F});case 6:(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"stopConsumingAudioStreams() Calling",logType:"INFO",attributes:{peerId:F}}),H.next=13;break;case 9:H.prev=9,H.t0=H.catch(3),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error stopConsumingMicStreams() failed",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.error("stopConsumingMicStreams() | failed:%o",H.t0);case 13:case"end":return H.stop()}},X,this,[[3,9]])})),function(X){return ea.apply(this,arguments)})},{key:"stopConsumingWebcamStreams",value:(Sc=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return Pe.debug("stopConsumingWebcamStreams()"),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"stopConsumingWebcamStreams() Calling",logType:"INFO",attributes:{peerId:F}}),H.prev=2,H.next=5,this._protoo.request("stopConsumingVideoStreams",{peerId:F});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error stopConsumingWebcamStreams() failed",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.error("stopConsumingWebcamStreams() | failed:%o",H.t0);case 11:case"end":return H.stop()}},X,this,[[2,7]])})),function(X){return Sc.apply(this,arguments)})},{key:"changeMode",value:(un=(0,h.A)(s().mark(function X(F){var U,z,H,re,se,Ie,Re,wt,qe,yt,ae,st,Je,lt,ye,Ge,ir,er,ar,or,rr,pr,Gt,Wt,xr,tr,ur,Ar,nn,fn=this;return s().wrap(function(cr){for(;;)switch(cr.prev=cr.next){case 0:if(z=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"changeMode() Calling with mode : ".concat(F)}),H=this._mode,cr.prev=2,H!==F){cr.next=7;break}throw(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:z,status:2,message:"changeMode() Ending"}),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"You are already in ".concat(F," mode"),logType:"INFO"}),new Error("You are already in ".concat(F," mode"));case 7:if(this._mode=F,F!==De.n.CONFERENCE){cr.next=39;break}return this._consume=!0,this._produce=!0,this._mediasoupDevice=new S.Device({handlerName:this._handlerName}),cr.next=14,this._protoo.request("getRouterRtpCapabilities");case 14:return wt=cr.sent,this._deviceInfo.sdkType!="react-native"?navigator.userAgent.indexOf("Firefox")&&(wt.headerExtensions=(qe=wt.headerExtensions)===null||qe===void 0?void 0:qe.filter(function(sn){return sn.uri!="urn:3gpp:video-orientation"})):wt.headerExtensions=(yt=wt.headerExtensions)===null||yt===void 0?void 0:yt.filter(function(sn){return sn.uri!="urn:3gpp:video-orientation"}),cr.next=18,this._mediasoupDevice.load({routerRtpCapabilities:wt});case 18:if(!this._produce){cr.next=23;break}return cr.next=21,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 21:ae=cr.sent,this.createProducerTransport(ae,z);case 23:if(!this._consume){cr.next=30;break}return cr.next=26,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 26:st=cr.sent,Je=st.id,lt=st.iceParameters,ye=st.iceCandidates,Ge=st.dtlsParameters,ir=st.sctpParameters,this._recvTransport=this._mediasoupDevice.createRecvTransport({id:Je,iceParameters:lt,iceCandidates:ye,dtlsParameters:Ge,sctpParameters:ir,iceServers:this._iceServers}),this._recvTransport.on("connect",function(sn,Ur,wn){var bn=sn.dtlsParameters;fn._protoo.request("connectWebRtcTransport",{transportId:fn._recvTransport.id,dtlsParameters:bn}).then(Ur).catch(wn)});case 30:return(Ie=this._openTelemetry)===null||Ie===void 0||Ie.traceAutoComplete({spanName:"Sending changeMode request to server",span:z,status:1}),cr.next=33,this._protoo.request("changeMode",{mode:F});case 33:this._produce&&(ke.dispatch(ge({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled&&this.enableMic(this.customMicrophoneAudioTrack),er=j(),this._webcamEnabled&&(!er||er.webcamEnabled||this._externalVideo)&&this.enableWebcam(this.customCameraVideoTrack,z),this.enableChatDataProducer()),window.SHOW_INFO&&(ar=ke.getState(),or=ar.me,ke.dispatch(de(or.id))),(Re=this._openTelemetry)===null||Re===void 0||Re.traceAutoComplete({spanName:"Emitting PEER_MODE_CHANGED for Peer : ".concat(this._peerId," "),span:z,status:1}),this._eventEmitter.emit("PEER_MODE_CHANGED",{peerId:this._peerId,mode:"CONFERENCE"}),cr.next=53;break;case 39:if(F!==De.n.VIEWER){cr.next=53;break}return(rr=this._openTelemetry)===null||rr===void 0||rr.traceAutoComplete({spanName:"Sending changeMode request to server",span:z,status:1}),cr.next=43,this._protoo.request("changeMode",{mode:F});case 43:this._consume=!1,this._produce=!1,this._dataConsumers.clear(),ur=(pr=this._openTelemetry)===null||pr===void 0?void 0:pr.trace({spanName:"Closing Trasnport",span:z}),(Gt=this._sendTransport)===null||Gt===void 0||Gt.close(),this._sendTransport=null,(Wt=this._recvTransport)===null||Wt===void 0||Wt.close(),this._recvTransport=null,(xr=this._openTelemetry)===null||xr===void 0||xr.completeSpan({span:ur,status:1,message:"Closed Trasnport"}),(tr=this._openTelemetry)===null||tr===void 0||tr.completeSpan({span:ur,status:1,message:"changeMode() Ending"});case 53:cr.next=59;break;case 55:cr.prev=55,cr.t0=cr.catch(2),(Ar=this._videosdkLogs)===null||Ar===void 0||Ar.pushLogs({logText:"Error changeMode(".concat(F,") | failed"),logType:"ERROR",attributes:{error:cr.t0.message}}),(nn=this._openTelemetry)===null||nn===void 0||nn.completeSpan({span:z,status:2,message:"changeMode(".concat(F,") | failed")});case 59:case"end":return cr.stop()}},X,this,[[2,55]])})),function(X){return un.apply(this,arguments)})},{key:"enablePeerWebcam",value:(Bo=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return(U=this._openTelemetry)===null||U===void 0||U.traceAutoComplete({spanName:"Enabling peer ".concat(F," Webcam"),status:1}),Pe.debug("enablePeerWebcam()"),H.prev=2,H.next=5,this._protoo.request("enablePeerWebcam",{peerId:F});case 5:H.next=11;break;case 7:H.prev=7,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error enablePeerWebcam | failed",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.error("enablePeerWebcam() | failed:%o",H.t0);case 11:case"end":return H.stop()}},X,this,[[2,7]])})),function(X){return Bo.apply(this,arguments)})},{key:"disablePeerWebcam",value:(lr=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return(U=this._openTelemetry)===null||U===void 0||U.traceAutoComplete({spanName:"Disabling peer ".concat(F," Webcam"),status:1}),Pe.debug("disablePeerWebcam()"),H.prev=2,H.next=5,this._protoo.request("disablePeerWebcam",{peerId:F});case 5:H.next=10;break;case 7:H.prev=7,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error disablePeerWebcam | failed",logType:"ERROR",attributes:{error:H.t0.message}});case 10:case"end":return H.stop()}},X,this,[[2,7]])})),function(X){return lr.apply(this,arguments)})},{key:"getMicStats",value:function(X){var F=this;if(this._micProducer){var U=0;X.onStatsCollected=function(z){var H;F._stats.producerStats||(F._stats.producerStats={}),F._stats.producerStats.audio||(F._stats.producerStats.audio=[]),F._micProducer&&(F._latestStats[(H=F._micProducer)===null||H===void 0?void 0:H.id]=[]),z.audio.forEach(function(re){var se;F._micProducer&&F._latestStats[(se=F._micProducer)===null||se===void 0?void 0:se.id].push(re)}),U%5==0&&F._micProducer!=null&&F._stats.producerStats.audio.push(Ht({timestamp:new Date},F._latestStats[F._micProducer.id]?F._latestStats[F._micProducer.id][0]:{})),U++}}}},{key:"enableMic",value:(Ii=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Re,wt,qe,yt,ae,st,Je,lt,ye,Ge,ir,er,ar,or,rr,pr,Gt,Wt,xr,tr,ur,Ar,nn,fn,cr,sn,Ur,wn,bn,Ir,jn,jt,gn,Lt,hr,qr,an,on,Xr,bi,Ai,mi,zn,ei,qi,Li,rn,Ni,Bn,ti,Pn,Si,ji,ri,ni,ii,Sn,Hn,si,Tn,Wn,Lr,Fn,Nr,_r=this,mt=arguments;return s().wrap(function(Ye){for(;;)switch(Ye.prev=Ye.next){case 0:if(se=mt.length>0&&mt[0]!==void 0?mt[0]:void 0,Ie=mt.length>1&&mt[1]!==void 0?mt[1]:void 0,Re=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"enableMic() Calling ".concat(se?"With Custom Audio Track":"Without Custom Audio Track "),attributes:{customAudioConfig:se?JSON.stringify(se):"Not Specify Custom Track"},span:Ie||null}),Pe.debug("enableMic()"),this._micEnabled=!0,!this._micProducer){Ye.next=27;break}if(yt=(wt=this._openTelemetry)===null||wt===void 0?void 0:wt.trace({spanName:"Mic Producer found",span:Re}),se&&((ae=this._openTelemetry)===null||ae===void 0||ae.traceAutoComplete({spanName:"Stopping customAudioTrack",span:Re,status:1}),se.getTracks().forEach(function(Bt){Bt.stop()})),(qe=this._openTelemetry)===null||qe===void 0||qe.completeSpan({span:yt,status:1,message:"Resuming Mic Producer"}),this._micProducer.resume(),st=this._micProducer,!this._sendTransport){Ye.next=18;break}return Ye.next=14,this._sendTransport.produce({track:this._micProducer.track,encodings:this._micProducer._appData.encodings,codecOptions:this._micProducer._appData.codecOptions});case 14:this._micProducer=Ye.sent,this._micProducer?(lt=we({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:st._appData.encodings,codecOptions:st._appData.codecOptions,instance:this._micProducer}),this._micProducer.track.getConstraints().deviceId&&(this._mic.device=this._mics.get(this._micProducer.track.getConstraints().deviceId)),ke.dispatch(lt),this._eventEmitter.emit(lt.type,lt.payload),(Je=this._openTelemetry)===null||Je===void 0||Je.completeSpan({span:Re,status:1,message:"Enable Mic Successful"})):(ye=this._openTelemetry)===null||ye===void 0||ye.completeSpan({span:Re,status:2,message:"Error in enableMic() :: micProducer null"}),Ye.next=21;break;case 18:return(Ge=this._videosdkLogs)===null||Ge===void 0||Ge.pushLogs({logText:Ue.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(Ue.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),Ye.abrupt("return");case 21:return this._micProducer.observer.on("pause",function(){var Bt=_r._metrics.getProbe("mic_producer");Bt==null||Bt.stop(),_r._latestStats[_r._micProducer.id]=[],_r._metrics.removeExistingProbe(Bt)}),this._micProducer.observer.on("close",function(){var Bt=_r._metrics.getProbe("mic_producer");Bt==null||Bt.stop(),_r._latestStats[_r._micProducer.id]=[],_r._metrics.removeExistingProbe(Bt)}),ir=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"}),this.getMicStats(ir),ir.start(),Ye.abrupt("return");case 27:if(!this._mediasoupDevice){Ye.next=36;break}if(this._mediasoupDevice.canProduce("audio")){Ye.next=34;break}return or=this._deviceInfo.sdkType=="react-native"?Ue.q.ERROR_RN_MIC_ACCESS_UNAVAILABLE.message:Ue.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message,(er=this._videosdkLogs)===null||er===void 0||er.pushLogs({logText:or,attributes:{error:"Error in enableMic() :: Microphone access unavailable"},logType:"ERROR",dashboardLog:!0}),Pe.error("enableMic() | cannot produce audio"),(ar=this._openTelemetry)===null||ar===void 0||ar.completeSpan({span:Re,status:2,message:"Error in enableMic() :: ".concat(or)}),Ye.abrupt("return");case 34:Ye.next=39;break;case 36:return(rr=this._videosdkLogs)===null||rr===void 0||rr.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(pr=this._openTelemetry)===null||pr===void 0||pr.completeSpan({span:Re,status:2,message:"Error in enableMic() :: mediasoupDevice is undefined"}),Ye.abrupt("return");case 39:if(Ye.prev=39,this._externalVideo){Ye.next=106;break}return Pe.debug("enableMic() | calling getUserMedia()"),Ye.next=44,this._updateMics(Re);case 44:if(this._mic.device){Ye.next=47;break}throw new Error("Whoops! No Microphone Found: We couldn't find your microphone. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. Also, ensure you're on a secure website (https://).");case 47:try{se&&(Gt=se.getAudioTracks()[0]).readyState=="ended"&&(Gt=null,cr=Ue.q.ERROR_CUSTOM_AUDIO_TRACK_ENDED,(fn=this._videosdkLogs)===null||fn===void 0||fn.pushLogs({logText:cr.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(cr))}catch(Bt){Ur=Ue.q.ERROR_INVALID_CUSTOM_AUDIO_TRACK,(sn=this._videosdkLogs)===null||sn===void 0||sn.pushLogs({logText:Ur.message,logType:"INFO",attributes:{error:"In enableMic() :: Invalid Custom Track Passed"}}),this._emitError(Ur),console.log("Invalid Custom Audio Track Passed. Reverting to default Error: ".concat(Bt))}if(Gt){Ye.next=104;break}return Ir=(wn=this._openTelemetry)===null||wn===void 0?void 0:wn.trace({spanName:"Creating Track",span:Re}),Ye.prev=50,Ye.next=53,navigator.mediaDevices.getUserMedia({audio:{deviceId:{ideal:this._mic.device.deviceId},channelCount:1,noiseSuppression:!0,echoCancellation:!0,googEchoCancellation:!0,googEchoCancellation2:!0,googAutoGainControl:!0,googAutoGainControl2:!0,googNoiseSuppression:!0,googNoiseSuppression2:!0,googHighpassFilter:!0}});case 53:jn=Ye.sent,Ye.next=102;break;case 56:if(Ye.prev=56,Ye.t0=Ye.catch(50),(jt=this._openTelemetry)===null||jt===void 0||jt.completeSpan({message:"Error in enableMic() :: ".concat(Ye.t0.message),span:Ir,status:2}),Ye.t0.name!=="SecurityError"){Ye.next=67;break}hr=Ue.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED,qr=hr.message,this._emitError(hr),(gn=this._videosdkLogs)===null||gn===void 0||gn.pushLogs({logText:qr,logType:"ERROR",attributes:{error:"Error in enableMic() :: Microphone Permission Denied or Dismissed"},dashboardLog:!0}),(Lt=this._openTelemetry)===null||Lt===void 0||Lt.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(qr),span:Re,status:2}),Ye.next=101;break;case 67:if(Ye.t0.name!=="DOMException"){Ye.next=75;break}Xr=Ue.q.ERROR_RN_MIC_NOT_FOUND,bi=Xr.message,this._emitError(Xr),(an=this._videosdkLogs)===null||an===void 0||an.pushLogs({logText:bi,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(on=this._openTelemetry)===null||on===void 0||on.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(bi),span:Re,status:2}),Ye.next=101;break;case 75:if(!(Ye.t0 instanceof DOMException)){Ye.next=98;break}Ye.t1=Ye.t0.name,Ye.next=Ye.t1==="NotAllowedError"?79:Ye.t1==="NotReadableError"?82:Ye.t1==="NotFoundError"?85:92;break;case 79:return Ai=this.handleNotAllowedError(Ye.t0,this._openTelemetry,this._videosdkLogs,Re,"audio"),this._emitError(Ai),Ye.abrupt("break",96);case 82:return mi=this.handleNotReadableError(Ye.t0,this._openTelemetry,this._videosdkLogs,Re,"audio"),this._emitError(mi),Ye.abrupt("break",96);case 85:return zn=Ue.q.ERROR_MICROPHONE_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(zn=Ue.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS),ei=zn.message,this._emitError(zn),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:ei,logType:"ERROR",attributes:{error:"Error in enableMic() :: No Microphone Device Found"},dashboardLog:!0}),(z=this._openTelemetry)===null||z===void 0||z.completeSpan({message:"Error in enableMic() :: occurred in creating audio track, ".concat(ei),span:Re,status:2}),Ye.abrupt("break",96);case 92:return qi="An error occurred in creating audio track, ".concat(Ye.t0.message),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:Ye.t0.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(qi)},dashboardLog:!0}),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({message:"Error in enableMic() :: ".concat(qi),span:Re,status:2}),Ye.abrupt("break",96);case 96:Ye.next=101;break;case 98:Ni="An error occurred in creating audio track, ".concat(Ye.t0.message),(Li=this._videosdkLogs)===null||Li===void 0||Li.pushLogs({logText:Ye.t0.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Ni)},dashboardLog:!0}),(rn=this._openTelemetry)===null||rn===void 0||rn.completeSpan({message:"Error in enableMic() :: ".concat(Ni),span:Re,status:2});case 101:return Ye.abrupt("return");case 102:Gt=jn.getAudioTracks()[0],(bn=this._openTelemetry)===null||bn===void 0||bn.completeSpan({message:"Audio Track Generated",span:Ir,status:1});case 104:Ye.next=110;break;case 106:return Ye.next=108,this._getExternalVideoStream();case 108:Bn=Ye.sent,Gt=Bn.getAudioTracks()[0].clone();case 110:if(Wt=(xr=this._openTelemetry)===null||xr===void 0?void 0:xr.trace({spanName:"Generating Producer Configuration",span:Re}),ti={opusStereo:1,opusDtx:1},se&&(Pn=se.encoderConfig?ot.$.audioProfiles[se.encoderConfig]:ot.$.audioProfiles.speech_standard,ti={opusStereo:Pn.stereo?1:0,opusFec:Pn.fec?1:0,opusDtx:Pn.dtx?1:0,opusMaxPlaybackRate:Pn.maxPlaybackRate,opusPtime:Pn.packetTime}),ji={encodings:Si=[{networkPriority:"high"}],codecOptions:ti},(tr=this._openTelemetry)===null||tr===void 0||tr.traceAutoComplete({spanName:"Generated AppData",span:Wt,attributes:{appData:JSON.stringify(ji)},status:1}),(ur=this._openTelemetry)===null||ur===void 0||ur.completeSpan({span:Wt,status:1,message:"Producer Configuration Generated"}),Wt=(Ar=this._openTelemetry)===null||Ar===void 0?void 0:Ar.trace({spanName:"Creating Mic Producer",span:Re}),(nn=Gt)===null||nn===void 0||nn.addEventListener("ended",function(){console.log("Track Ended Error");try{var Bt,Jr,Vn=_r._deviceInfo.sdkType=="react-native"?Ue.q.ERROR_RN_MIC_TRACK_ENDED:Ue.q.ERROR_MICROPHONE_TRACK_ENDED;(Bt=_r._videosdkLogs)===null||Bt===void 0||Bt.pushLogs({logText:Vn.message,logType:"ERROR",attributes:{error:"Error Track Ended :: ".concat(Vn.message)},dashboardLog:!0}),(Jr=_r._openTelemetry)===null||Jr===void 0||Jr.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:Re,message:Vn.message,status:2}),ke.dispatch(Ae({type:"error",text:"Microphone disconnected!"})),_r.disableMic(!0,Re).catch(function(){})}catch(gi){console.error(gi)}}),!this._sendTransport){Ye.next=126;break}return Ye.next=123,this._sendTransport.produce({track:Gt,encodings:Si,codecOptions:ti,appData:ji});case 123:this._micProducer=Ye.sent,Ye.next=129;break;case 126:return(ri=this._videosdkLogs)===null||ri===void 0||ri.pushLogs({logText:Ue.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableMic() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(Ue.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),Ye.abrupt("return");case 129:this._micProducer?(Gt.getConstraints().deviceId&&(this._mic.device=this._mics.get(Gt.getConstraints().deviceId)),Sn=we({id:this._micProducer.id,paused:this._micProducer.paused,track:this._micProducer.track,rtpParameters:this._micProducer.rtpParameters,codec:this._micProducer.rtpParameters.codecs[0].mimeType.split("/")[1],encodings:Si,codecOptions:ti,instance:this._micProducer}),ke.dispatch(Sn),this._eventEmitter.emit(Sn.type,Sn.payload),(Hn=this._metrics.addNewProbe(this._micProducer,{name:"mic_producer"})).start(),this.getMicStats(Hn),this._micProducer.on("transportclose",function(){var Bt,Jr=be(_r._micProducer.id);ke.dispatch(Jr),_r._eventEmitter.emit(Jr.type,Jr.payload),(Bt=_r._micProducer)===null||Bt===void 0||Bt.close(),_r._micProducer=null}),this._micProducer.observer.on("pause",function(){var Bt=_r._metrics.getProbe("mic_producer");Bt==null||Bt.stop(),_r._latestStats[_r._micProducer.id]=[],_r._metrics.removeExistingProbe(Bt)}),this._micProducer.observer.on("close",function(){var Bt=_r._metrics.getProbe("mic_producer");Bt==null||Bt.stop(),_r._latestStats[_r._micProducer.id]=[],_r._metrics.removeExistingProbe(Bt)}),this._micProducer.on("trackended",function(){var Bt,Jr,Vn=_r._deviceInfo.sdkType=="react-native"?Ue.q.ERROR_RN_MIC_TRACK_ENDED:Ue.q.ERROR_MICROPHONE_TRACK_ENDED;(Bt=_r._videosdkLogs)===null||Bt===void 0||Bt.pushLogs({logText:Vn.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Vn.message)},dashboardLog:!0}),(Jr=_r._openTelemetry)===null||Jr===void 0||Jr.traceAutoComplete({spanName:"this._micProducer trackended or Microphone disconnected!",span:Re,message:Vn.message,status:2}),ke.dispatch(Ae({type:"error",text:"Microphone disconnected!"})),_r.disableMic(!0,Re).catch(function(){})}),(ni=this._openTelemetry)===null||ni===void 0||ni.completeSpan({span:Wt,status:1,message:"Mic Producer Created"}),(ii=this._openTelemetry)===null||ii===void 0||ii.completeSpan({span:Re,status:1,message:"Enable Mic Successful"})):((si=this._videosdkLogs)===null||si===void 0||si.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the mic. Please try again.",logType:"ERROR",attributes:{error:"Error in enableMic(): Something went wrong."},dashboardLog:!0}),(Tn=this._openTelemetry)===null||Tn===void 0||Tn.completeSpan({span:Wt,status:2,message:"Error in enableMic() :: micProducer null"}),(Wn=this._openTelemetry)===null||Wn===void 0||Wn.completeSpan({span:Re,status:2,message:"Error in enableMic() :: micProducer null"})),Ye.next=142;break;case 132:return Ye.prev=132,Ye.t2=Ye.catch(39),(Lr=this._openTelemetry)===null||Lr===void 0||Lr.completeSpan({span:Wt,status:2,message:"Error in enableMic() :: occurred in creating mic producer, ".concat(Ye.t2.message)}),(Fn=this._openTelemetry)===null||Fn===void 0||Fn.completeSpan({span:Re,status:2,message:"Error in enableMic :: ".concat(Ye.t2.message)}),(Nr=this._videosdkLogs)===null||Nr===void 0||Nr.pushLogs({logText:Ye.t2.message,logType:"ERROR",attributes:{error:"Error in enableMic() :: ".concat(Ye.t2.message)},dashboardLog:!0}),Pe.error("enableMic() | failed:%o",Ye.t2),ke.dispatch(Ae({type:"error",text:"Error enabling microphone: ".concat(Ye.t2)})),Ye.next=141,this._protoo.request("produceError",{mediaType:"audio",message:Ye.t2.message});case 141:Gt&&Gt.stop();case 142:case"end":return Ye.stop()}},X,this,[[39,132],[50,56]])})),function(){return Ii.apply(this,arguments)})},{key:"disableMic",value:(wd=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Re,wt,qe,yt,ae,st,Je,lt,ye,Ge,ir,er,ar,or,rr,pr,Gt,Wt,xr=arguments;return s().wrap(function(tr){for(;;)switch(tr.prev=tr.next){case 0:if(z=xr.length>0&&xr[0]!==void 0&&xr[0],H=xr.length>1&&xr[1]!==void 0?xr[1]:void 0,Pe.debug("disableMic()"),re=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"disableMic() Calling",status:1,span:H||null}),this._micProducer){tr.next=8;break}return(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:re,status:2,message:"Error in disableMic() :: Mic Producer Not found"}),(Ie=this._videosdkLogs)===null||Ie===void 0||Ie.pushLogs({logText:"Attempted to call disableMic() multiple times",attributes:{error:"Error in disableMic() :: Microphone is already disabled"},logType:"ERROR",dashboardLog:!0}),tr.abrupt("return");case 8:if(Re=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"Closing Mic Producer",span:re,status:1}),this._micEnabled=!1,!this._micProducer||z){tr.next=32;break}return ae=(wt=this._openTelemetry)===null||wt===void 0?void 0:wt.trace({spanName:"Pausing Mic Producer",span:Re,status:1}),this._micProducer.pause(),st=be(this._micProducer.id),(qe=this._openTelemetry)===null||qe===void 0||qe.completeSpan({span:ae,status:1,message:"Pause Mic Successfully"}),ke.dispatch(st),this._eventEmitter.emit(st.type,st.payload),tr.prev=17,tr.next=20,this._protoo.request("closeProducer",{producerId:this._micProducer.id});case 20:(Je=this._openTelemetry)===null||Je===void 0||Je.completeSpan({span:Re,status:1,message:"Requested Server to Close Producer"}),tr.next=30;break;case 23:tr.prev=23,tr.t0=tr.catch(17),ke.dispatch(Ae({type:"error",text:"Error closing server-side mic Producer: ".concat(tr.t0)})),ir="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(z),(lt=this._openTelemetry)===null||lt===void 0||lt.completeSpan({span:Re,status:2,message:"Error in disableMic() :: ".concat(tr.t0.message)}),(ye=this._openTelemetry)===null||ye===void 0||ye.completeSpan({span:re,status:2,message:ir}),(Ge=this._videosdkLogs)===null||Ge===void 0||Ge.pushLogs({logText:ir,logType:"ERROR",attributes:{error:tr.t0.message},dashboardLog:!0});case 30:return(yt=this._openTelemetry)===null||yt===void 0||yt.completeSpan({span:re,status:1,message:"Mic Disabled Successfully"}),tr.abrupt("return");case 32:return this._micProducer.close(),er=be(this._micProducer.id),ke.dispatch(er),this._eventEmitter.emit(er.type,er.payload),tr.prev=36,tr.next=39,this._protoo.request("closeProducer",{producerId:this._micProducer.id});case 39:(ar=this._openTelemetry)===null||ar===void 0||ar.completeSpan({span:Re,status:1,message:"Requested Server to Close Producer"}),(or=this._openTelemetry)===null||or===void 0||or.completeSpan({span:re,status:1,message:"Mic Disabled Successfully"}),tr.next=50;break;case 43:tr.prev=43,tr.t1=tr.catch(36),ke.dispatch(Ae({type:"error",text:"Error closing server-side mic Producer: ".concat(tr.t1)})),Wt="Error in disableMic() :: Failed to close server-side microphone producer. closeProducer status: ".concat(z),(rr=this._openTelemetry)===null||rr===void 0||rr.completeSpan({span:Re,status:2,message:"Error in disableMic() :: ".concat(tr.t1.message)}),(pr=this._openTelemetry)===null||pr===void 0||pr.completeSpan({span:re,status:2,message:Wt}),(Gt=this._videosdkLogs)===null||Gt===void 0||Gt.pushLogs({logText:Wt,logType:"ERROR",attributes:{error:tr.t1.message},dashboardLog:!0});case 50:this._micProducer=null;case 51:case"end":return tr.stop()}},X,this,[[17,23],[36,43]])})),function(){return wd.apply(this,arguments)})},{key:"muteMic",value:(Di=(0,h.A)(s().mark(function X(){var F;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return Pe.debug("muteMic()"),this._micEnabled=!1,this._micProducer.pause(),U.prev=3,U.next=6,this._protoo.request("pauseProducer",{producerId:this._micProducer.id});case 6:ke.dispatch({type:"SET_PRODUCER_PAUSED",payload:{producerId:this._micProducer.id}}),U.next=14;break;case 9:U.prev=9,U.t0=U.catch(3),Pe.error("muteMic() | failed: %o",U.t0),(F=this._videosdkLogs)===null||F===void 0||F.pushLogs({logText:"Error pausing server-side mic Producer",logType:"ERROR",attributes:{error:U.t0.message}}),ke.dispatch(Ae({type:"error",text:"Error pausing server-side mic Producer: ".concat(U.t0)}));case 14:case"end":return U.stop()}},X,this,[[3,9]])})),function(){return Di.apply(this,arguments)})},{key:"unmuteMic",value:(ds=(0,h.A)(s().mark(function X(){var F;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return Pe.debug("unmuteMic()"),this._micEnabled=!0,this._micProducer.resume(),U.prev=3,U.next=6,this._protoo.request("resumeProducer",{producerId:this._micProducer.id});case 6:ke.dispatch({type:"SET_PRODUCER_RESUMED",payload:{producerId:this._micProducer.id}}),U.next=14;break;case 9:U.prev=9,U.t0=U.catch(3),Pe.error("unmuteMic() | failed: %o",U.t0),(F=this._videosdkLogs)===null||F===void 0||F.pushLogs({logText:"Error resuming server-side mic Producer",logType:"ERROR",attributes:{error:U.t0.message}}),ke.dispatch(Ae({type:"error",text:"Error resuming server-side mic Producer: ".concat(U.t0)}));case 14:case"end":return U.stop()}},X,this,[[3,9]])})),function(){return ds.apply(this,arguments)})},{key:"enableWebcam",value:(Dl=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Re,wt,qe,yt,ae,st,Je,lt,ye,Ge,ir,er,ar,or,rr,pr,Gt,Wt,xr,tr,ur,Ar,nn,fn,cr,sn,Ur,wn,bn,Ir,jn,jt,gn,Lt,hr,qr,an,on,Xr,bi,Ai,mi,zn,ei,qi,Li,rn,Ni,Bn,ti,Pn,Si,ji,ri,ni,ii,Sn,Hn,si,Tn,Wn,Lr,Fn,Nr=this,_r=arguments;return s().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:if(se=_r.length>0&&_r[0]!==void 0?_r[0]:void 0,Ie=_r.length>1&&_r[1]!==void 0?_r[1]:void 0,Re=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"enableWebcam() Calling ".concat(se?"With Custom Video Track":"Without Custom Video Track "),attributes:{customVideoConfig:se?JSON.stringify(se):"Not Specify Custom Track"},span:Ie||null}),Pe.debug("enableWebcam()"),this._webcamEnabled=!0,!this._webcamProducer){mt.next=9;break}return(wt=this._openTelemetry)===null||wt===void 0||wt.completeSpan({span:Re,status:2,message:"Error in enableWebcam() :: Webcam Producer found"}),(qe=this._videosdkLogs)===null||qe===void 0||qe.pushLogs({logText:"Attempted to call enableWebcam() multiple times",attributes:{error:"Error in enableWebcam() :: Webcam is already enabled"},logType:"ERROR",dashboardLog:!0}),mt.abrupt("return");case 9:if(!this._mediasoupDevice){mt.next=18;break}if(this._mediasoupDevice.canProduce("video")){mt.next=16;break}return st=this._deviceInfo.sdkType=="react-native"?Ue.q.ERROR_RN_CAMERA_ACCESS_UNAVAILABLE.message:Ue.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message,(yt=this._openTelemetry)===null||yt===void 0||yt.completeSpan({span:Re,status:2,message:"Error in enableWebcam() :: ".concat(st)}),(ae=this._videosdkLogs)===null||ae===void 0||ae.pushLogs({logText:st,attributes:{error:"Error in enableWebcam() :: Camera access unavailable"},logType:"ERROR",dashboardLog:!0}),Pe.error("enableWebcam() | cannot produce video"),mt.abrupt("return");case 16:mt.next=21;break;case 18:return(Je=this._videosdkLogs)===null||Je===void 0||Je.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."}}),(lt=this._openTelemetry)===null||lt===void 0||lt.completeSpan({span:Re,status:2,message:"Error in enableWebcam() :: mediasoupDevice is undefined"}),mt.abrupt("return");case 21:if(ke.dispatch(St(!0)),ir=this._webcam.resolution,mt.prev=23,this._externalVideo){mt.next=100;break}return mt.next=27,this._updateWebcams(Re);case 27:if(Ge=this._webcam.device){mt.next=31;break}throw new Error("Whoops! No Webcam Found: We couldn't find your camera. Is it plugged in and turned on? If so, try restarting your computer or checking your device settings. If you need help, check out troubleshooter at https://test.8x8.vc/. Also, ensure you're on a secure website (https://).");case 31:Pe.debug("enableWebcam() | calling getUserMedia()");try{se&&(ye=se.getVideoTracks()[0]).readyState=="ended"&&(ye=null,Gt=Ue.q.ERROR_CUSTOM_VIDEO_TRACK_ENDED,(pr=this._videosdkLogs)===null||pr===void 0||pr.pushLogs({logText:Gt.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"},dashboardLog:!0}),this._emitError(Gt))}catch(Ye){xr=Ue.q.ERROR_INVALID_CUSTOM_VIDEO_TRACK,(Wt=this._videosdkLogs)===null||Wt===void 0||Wt.pushLogs({logText:xr.message,logType:"INFO",attributes:{error:"In enableWebcam() :: Invalid Custom Track Passed"}}),this._emitError(xr),console.log("Invalid Custom Video Track Passed. Reverting to default Error: ".concat(Ye))}if(ye){mt.next=98;break}if(ur=(tr=this._openTelemetry)===null||tr===void 0?void 0:tr.trace({spanName:"Creating Track",span:Re}),Ar=null,mt.prev=36,this._webcam.resolution!="hd"){mt.next=44;break}return mt.next=40,this.createCameraVideoTrack({cameraId:Ge.deviceId,encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast,facingMode:Ge.facing});case 40:se=mt.sent,Ar=JSON.stringify({encoderConfig:"h720p_w1280p",multiStream:this._useSimulcast}),mt.next=48;break;case 44:return mt.next=46,this.createCameraVideoTrack({cameraId:Ge.deviceId,encoderConfig:"h540p_w960p",multiStream:this._useSimulcast,facingMode:Ge.facing});case 46:se=mt.sent,Ar=JSON.stringify({encoderConfig:"h540p_w960p",multiStream:this._useSimulcast});case 48:ye=se.getVideoTracks()[0],(nn=this._openTelemetry)===null||nn===void 0||nn.completeSpan({message:"Video Track Generated",span:ur,attributes:{customVideoTrackConfig:Ar},status:1}),mt.next=98;break;case 52:if(mt.prev=52,mt.t0=mt.catch(36),(fn=this._openTelemetry)===null||fn===void 0||fn.completeSpan({message:"Error in enableWebcam() :: ".concat(mt.t0.message),span:ur,status:2}),mt.t0.name!=="SecurityError"){mt.next=63;break}Ur=Ue.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED,wn=Ur.message,this._emitError(Ur),(cr=this._videosdkLogs)===null||cr===void 0||cr.pushLogs({logText:wn,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: Camera Permission Denied or Dismissed"},dashboardLog:!0}),(sn=this._openTelemetry)===null||sn===void 0||sn.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(wn),span:enableMicSpan,status:2}),mt.next=97;break;case 63:if(mt.t0.name!=="DOMException"){mt.next=71;break}jn=Ue.q.ERROR_RN_CAMERA_NOT_FOUND,jt=jn.message,this._emitError(jn),(bn=this._videosdkLogs)===null||bn===void 0||bn.pushLogs({logText:jt,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Camra Device Found"},dashboardLog:!0}),(Ir=this._openTelemetry)===null||Ir===void 0||Ir.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(jt),span:enableMicSpan,status:2}),mt.next=97;break;case 71:if(!(mt.t0 instanceof DOMException)){mt.next=94;break}mt.t1=mt.t0.name,mt.next=mt.t1==="NotAllowedError"?75:mt.t1==="NotReadableError"?78:mt.t1==="NotFoundError"?81:88;break;case 75:return gn=this.handleNotAllowedError(mt.t0,this._openTelemetry,this._videosdkLogs,Re,"video"),this._emitError(gn),mt.abrupt("break",92);case 78:return Lt=this.handleNotReadableError(mt.t0,this._openTelemetry,this._videosdkLogs,Re,"video"),this._emitError(Lt),mt.abrupt("break",92);case 81:return hr=Ue.q.ERROR_CAMERA_NOT_FOUND,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(hr=Ue.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS),qr=hr.message,this._emitError(hr),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:qr,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: No Webcam Device Found"},dashboardLog:!0}),(z=this._openTelemetry)===null||z===void 0||z.completeSpan({message:"Error in enableWebcam() :: occurred in creating video track, ".concat(qr),span:Re,status:2}),mt.abrupt("break",92);case 88:return an="An error occurred in creating video track, ".concat(mt.t0.message),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:mt.t0.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(an)},dashboardLog:!0}),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({message:"Error in enableWebcam() :: ".concat(an),span:Re,status:2}),mt.abrupt("break",92);case 92:mt.next=97;break;case 94:bi="An error occurred in creating video track, ".concat(mt.t0.message),(on=this._videosdkLogs)===null||on===void 0||on.pushLogs({logText:mt.t0.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(bi)},dashboardLog:!0}),(Xr=this._openTelemetry)===null||Xr===void 0||Xr.completeSpan({message:"Error in enableWebcam() :: ".concat(bi),span:Re,status:2});case 97:return mt.abrupt("return");case 98:mt.next=105;break;case 100:return Ge={label:"external video"},mt.next=103,this._getExternalVideoStream();case 103:Ai=mt.sent,ye=Ai.getVideoTracks()[0].clone();case 105:if(mi=(er=this._openTelemetry)===null||er===void 0?void 0:er.trace({spanName:"Generating Producer Configuration",span:Re}),qi={videoGoogleStartBitrate:1e3},!this._forceH264){mt.next=114;break}if(ei=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Ye){return Ye.mimeType.toLowerCase()==="video/h264"})){mt.next=112;break}throw new Error("The desired H.264 codec and configuration are not supported");case 112:mt.next=119;break;case 114:if(!this._forceVP9){mt.next=119;break}if(ei=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Ye){return Ye.mimeType.toLowerCase()==="video/vp9"})){mt.next=119;break}throw new Error("The desired VP9 codec and configuration are not supported");case 119:ye?(Li=ye.getConstraints(),rn=this._deviceInfo.sdkType=="react-native"&&this._deviceInfo.platform=="ios",zn=At(!1,Li.width,Li.height,{simulcast:se.multiStream},rn)):this._useSimulcast&&(Ni=this._mediasoupDevice.rtpCapabilities.codecs.find(function(Ye){return Ye.kind==="video"}),zn=this._forceVP9&&ei||Ni.mimeType.toLowerCase()==="video/vp9"?en:Zr[this._webcam.resolution]),Bn={};try{Bn={encodings:zn,width:se?(ti=ye)===null||ti===void 0?void 0:ti.getConstraints().width:kr[ir].width.ideal,height:se?(Pn=ye)===null||Pn===void 0?void 0:Pn.getConstraints().height:kr[ir].height.ideal}}catch(Ye){(Si=this._videosdkLogs)===null||Si===void 0||Si.pushLogs({logText:Ye.message,logType:"INFO",attributes:{error:"In enableWebcam() :: ".concat(Ye.message)},dashboardLog:!0}),console.log(Ye)}if((ar=this._openTelemetry)===null||ar===void 0||ar.traceAutoComplete({spanName:"Track Generated with height ".concat(Bn.height," and width ").concat(Bn.width," with multiStream ").concat(this._useSimulcast),attributes:{appData:JSON.stringify(Bn)},span:Re,status:1}),(or=this._openTelemetry)===null||or===void 0||or.completeSpan({span:mi,status:1,message:"Producer Configuration Generated"}),mi=(rr=this._openTelemetry)===null||rr===void 0?void 0:rr.trace({spanName:"Creating Webcam Producer",span:Re}),!this._sendTransport){mt.next=131;break}return mt.next=128,this._sendTransport.produce({track:ye,encodings:zn,codecOptions:qi,codec:ei,appData:Bn});case 128:this._webcamProducer=mt.sent,mt.next=134;break;case 131:return(ji=this._videosdkLogs)===null||ji===void 0||ji.pushLogs({logText:Ue.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED.message,attributes:{error:"Error in enableWebcam() :: Transport is not setup"},logType:"ERROR",dashboardLog:!0}),this._emitError(Ue.q.ERROR_ACTION_PERFORMED_BEFORE_MEETING_JOINED),mt.abrupt("return");case 134:ye.getConstraints().deviceId&&(this._webcam.device=this._webcams.get(ye.getConstraints().deviceId)),this._webcamProducer?(ii=we({id:this._webcamProducer.id,deviceLabel:Ge.label,type:this._getWebcamType(Ge),paused:this._webcamProducer.paused,track:this._webcamProducer.track,rtpParameters:this._webcamProducer.rtpParameters,codec:this._webcamProducer.rtpParameters.codecs[0].mimeType.split("/")[1],instance:this._webcamProducer}),ke.dispatch(ii),this._eventEmitter.emit(ii.type,ii.payload),Sn=0,(Hn=this._metrics.addNewProbe(this._webcamProducer,"producer")).onStatsCollected=function(Ye){try{var Bt;Nr._stats.producerStats||(Nr._stats.producerStats={}),Nr._stats.producerStats.video||(Nr._stats.producerStats.video=[]),Nr._webcamProducer&&(Nr._latestStats[(Bt=Nr._webcamProducer)===null||Bt===void 0?void 0:Bt.id]=[]),Ye.video.forEach(function(Vn){var gi;Nr._latestStats[(gi=Nr._webcamProducer)===null||gi===void 0?void 0:gi.id].push(Vn)}),Sn%5==0&&Nr._webcamProducer!=null&&Nr._stats.producerStats.video.push({timestamp:new Date,stats:Nr._latestStats[Nr._webcamProducer.id]}),Sn++}catch(Vn){var Jr;(Jr=Nr._videosdkLogs)===null||Jr===void 0||Jr.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:Vn.message}}),console.log("PRODUCER ERROR",Vn)}},Hn.start(),this._webcamProducer.observer.on("close",function(){Hn.stop(),Nr._metrics.removeExistingProbe(Hn)}),this._webcamProducer.on("transportclose",function(){var Ye,Bt=be(Nr._webcamProducer.id);ke.dispatch(Bt),Nr._eventEmitter.emit(Bt.type,Bt.payload),(Ye=Nr._webcamProducer)===null||Ye===void 0||Ye.close(),Nr._webcamProducer=null}),this._webcamProducer.on("trackended",function(){var Ye,Bt,Jr=Nr._deviceInfo.sdkType=="react-native"?Ue.q.ERROR_RN_CAMERA_TRACK_ENDED:Ue.q.ERROR_WEBCAM_TRACK_ENDED;(Ye=Nr._videosdkLogs)===null||Ye===void 0||Ye.pushLogs({logText:Jr.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(Jr.message)},dashboardLog:!0}),(Bt=Nr._openTelemetry)===null||Bt===void 0||Bt.traceAutoComplete({spanName:"this._webcamProducer trackended or Webcam disconnected!",span:Re,message:Jr.message,status:2}),ke.dispatch(Ae({type:"error",text:"Webcam disconnected!"})),Nr.disableWebcam(Re).catch(function(){})}),(ri=this._openTelemetry)===null||ri===void 0||ri.completeSpan({span:mi,status:1,message:"Webcam Producer Created"}),(ni=this._openTelemetry)===null||ni===void 0||ni.completeSpan({span:Re,status:1,message:"Enable Webcam Successful"})):((si=this._videosdkLogs)===null||si===void 0||si.pushLogs({logText:"Oops! Something went wrong, and we're unable to enable the webcam. Please try again.",logType:"ERROR",attributes:{error:"Error in enableWebcam(): Something went wrong."},dashboardLog:!0}),(Tn=this._openTelemetry)===null||Tn===void 0||Tn.completeSpan({span:mi,status:2,message:"Error in enableWebcam() :: webcamProducer null"}),(Wn=this._openTelemetry)===null||Wn===void 0||Wn.completeSpan({span:Re,status:2,message:"Error in enableWebcam() :: webcamProducer null"})),mt.next=146;break;case 138:return mt.prev=138,mt.t2=mt.catch(23),(Lr=this._videosdkLogs)===null||Lr===void 0||Lr.pushLogs({logText:mt.t2.message,logType:"ERROR",attributes:{error:"Error in enableWebcam() :: ".concat(mt.t2.message)},dashboardLog:!0}),(Fn=this._openTelemetry)===null||Fn===void 0||Fn.completeSpan({span:Re,status:2,message:"Error in enableWebcam() :: ".concat(mt.t2.message)}),ke.dispatch(Ae({type:"error",text:"Error enabling webcam: ".concat(mt.t2)})),mt.next=145,this._protoo.request("produceError",{mediaType:"video",message:mt.t2.message});case 145:ye&&ye.stop();case 146:ke.dispatch(St(!1));case 147:case"end":return mt.stop()}},X,this,[[23,138],[36,52]])})),function(){return Dl.apply(this,arguments)})},{key:"handleNotAllowedError",value:function(X,F,U,z,H){var re={};return re=X.message==="Permission denied"||X.message==="Permission dismissed"?H==="video"?Ue.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:Ue.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:X.message.includes("The request is not allowed by the user agent")?H==="video"?Ue.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:Ue.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:X.message==="Permission denied by system"?H==="video"?Ue.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:Ue.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:H==="video"?Ue.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:Ue.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED,U.pushLogs({logText:re.message,logType:"ERROR",attributes:{error:"Error in ".concat(H==="video"?"enableWebcam()":"enableMic()"," :: ").concat(X.message)},dashboardLog:!0}),F.completeSpan({message:H==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(re.message):"Error in enableMic() :: occurred in creating audio track, ".concat(re.message),span:z,status:2}),re}},{key:"handleNotReadableError",value:function(X,F,U,z,H){var re={};return re=X.message==="Device in use"?H==="video"?Ue.q.ERROR_CAMERA_IN_USE:Ue.q.ERROR_MICROPHONE_IN_USE:H==="video"?Ue.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:Ue.q.ERROR_MICROPHONE_IN_USE,U.pushLogs({logText:re.message,logType:"ERROR",attributes:{error:"Error in ".concat(H==="video"?"enableWebcam()":"enableMic()"," :: ").concat(X.message)},dashboardLog:!0}),F.completeSpan({message:H==="video"?"Error in enableWebcam() :: occurred in creating video track, ".concat(re.message):"Error in enableMic() :: occurred in creating audio track, ".concat(re.message),span:z,status:2}),re}},{key:"createCameraVideoTrack",value:(Zs=(0,h.A)(s().mark(function X(F){var U,z,H,re,se,Ie,Re,wt,qe,yt,ae,st,Je;return s().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:return U=F.cameraId,z=U===void 0?void 0:U,H=F.encoderConfig,re=H===void 0?void 0:H,se=F.facingMode,Ie=se===void 0?void 0:se,Re=F.optimizationMode,wt=Re===void 0?void 0:Re,qe=F.multiStream,yt=qe===void 0||qe,ae=re?ot.$.videoProfiles[re]:ot.$.videoProfiles.h360p_w640p,st={video:{deviceId:z||void 0,facingMode:Ie||void 0,width:ae.width,height:ae.height,frameRate:ae.frameRate}},lt.next=5,(0,$e.lp)(st);case 5:return Je=lt.sent,wt&&(Je.contentHint=wt),Je.encoderConfig=re||"h360p_w640p",Je.contentHint=wt||"",Je.multiStream=yt,Je.cameraId=z,lt.abrupt("return",Je);case 12:case"end":return lt.stop()}},X)})),function(X){return Zs.apply(this,arguments)})},{key:"disableWebcam",value:(_d=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Re,wt,qe,yt,ae,st,Je=arguments;return s().wrap(function(lt){for(;;)switch(lt.prev=lt.next){case 0:if(z=Je.length>0&&Je[0]!==void 0?Je[0]:void 0,H=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"disableWebcam() Calling",status:1,span:z||null}),Pe.debug("disableWebcam()"),this._webcamEnabled=!1,this._webcamProducer){lt.next=8;break}return(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:H,status:2,message:"Error in disableWebcam() :: Webcam Producer Not found"}),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Attempted to call disableWebcam() multiple times",attributes:{error:"Error in disableWebcam() :: Webcam is already disabled"},logType:"ERROR",dashboardLog:!0}),lt.abrupt("return");case 8:return Ie=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"Closing Webcam Producer",span:H,status:1}),this._webcamProducer.close(),Re=be(this._webcamProducer.id),ke.dispatch(Re),this._eventEmitter.emit(Re.type,Re.payload),lt.prev=13,lt.next=16,this._protoo.request("closeProducer",{producerId:this._webcamProducer.id});case 16:(wt=this._openTelemetry)===null||wt===void 0||wt.completeSpan({span:Ie,status:1,message:"Requested Server to Close Producer"}),this._webcamProducer=null,(qe=this._openTelemetry)===null||qe===void 0||qe.completeSpan({span:H,status:1,message:"Webcam Disabled Successfully"}),lt.next=27;break;case 21:lt.prev=21,lt.t0=lt.catch(13),(yt=this._videosdkLogs)===null||yt===void 0||yt.pushLogs({logText:"Error in disableWebcam() :: Failed to close server-side webcam producer",logType:"ERROR",attributes:{error:lt.t0.message},dashboardLog:!0}),(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:Ie,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(lt.t0)}),(st=this._openTelemetry)===null||st===void 0||st.completeSpan({span:H,status:2,message:"Error in disableWebcam() :: closing server-side webcam Producer: ".concat(lt.t0)}),ke.dispatch(Ae({type:"error",text:"Error closing server-side webcam Producer: ".concat(lt.t0)}));case 27:case"end":return lt.stop()}},X,this,[[13,21]])})),function(){return _d.apply(this,arguments)})},{key:"getMics",value:(yd=(0,h.A)(s().mark(function X(){var F,U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return F=[],z.prev=1,z.next=4,this._updateMics();case 4:this._mics.forEach(function(H,re){F.push({deviceId:re,label:H.label})}),z.next=11;break;case 7:z.prev=7,z.t0=z.catch(1),Pe.error("getMics() | Error",z.t0),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:z.t0.message,logType:"ERROR",attributes:{error:"Error in getMics() :: Not able to get Mic List"},dashboardLog:!0});case 11:return z.abrupt("return",F);case 12:case"end":return z.stop()}},X,this,[[1,7]])})),function(){return yd.apply(this,arguments)})},{key:"changeMic",value:(vd=(0,h.A)(s().mark(function X(F){var U,z,H,re,se,Ie,Re,wt,qe,yt,ae,st,Je,lt;return s().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(z=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"changeMic() Calling"}),ye.prev=1,(0,_.A)(F)!="object"){ye.next=9;break}return ye.next=5,this.disableMic(!0,z);case 5:return ye.next=7,this.enableMic(F,z);case 7:ye.next=27;break;case 9:return Ie=F,ye.next=12,this._updateMics();case 12:if(Re=Array.from(this._mics.keys()),wt=Re.length,qe=this._mic.device?this._mic.device.deviceId:void 0,Ie!=null&&Ie!=null?yt=Re.indexOf(Ie):(yt=Re.indexOf(qe))<wt-1?yt++:yt=0,this._mic.device=this._mics.get(Re[yt]),ae=(H=this._openTelemetry)===null||H===void 0?void 0:H.trace({spanName:"Getting Selected Mic",span:z,attributes:{selectedWebcam:this._mic.device?JSON.stringify(this._mic.device):"No Mic devices"}}),this._mic.device){ye.next=21;break}throw(st=this._videosdkLogs)===null||st===void 0||st.pushLogs({logText:"Error changeMic : No mic Found",logType:"ERROR"}),new Error("No mic Found");case 21:return ye.next=23,this.disableMic(!0,z);case 23:return ye.next=25,this.enableMic(void 0,z);case 25:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:ae,status:1,message:"Done"}),(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:z,status:1,message:"changeMic() Ending"});case 27:ye.next=33;break;case 29:ye.prev=29,ye.t0=ye.catch(1),(Je=this._openTelemetry)===null||Je===void 0||Je.completeSpan({span:z,status:2,message:"changeMic() | Error ".concat(ye.t0)}),(lt=this._videosdkLogs)===null||lt===void 0||lt.pushLogs({logText:"Error changeMic() | Error",logType:"ERROR",attributes:{error:ye.t0.message}});case 33:case"end":return ye.stop()}},X,this,[[1,29]])})),function(X){return vd.apply(this,arguments)})},{key:"getWebcams",value:(gd=(0,h.A)(s().mark(function X(){var F,U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return F=[],z.prev=1,z.next=4,this._updateWebcams();case 4:this._webcams.forEach(function(H,re){F.push({deviceId:re,label:H.label,facingMode:H.facing||"environment"})}),z.next=11;break;case 7:z.prev=7,z.t0=z.catch(1),Pe.error("getWebcams() | failed %o",z.t0),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:z.t0.message,logType:"ERROR",attributes:{error:"Error in getWebcams() :: Not able to get Webcam List"},dashboardLog:!0});case 11:return z.abrupt("return",F);case 12:case"end":return z.stop()}},X,this,[[1,7]])})),function(){return gd.apply(this,arguments)})},{key:"replaceWebcamStream",value:(md=(0,h.A)(s().mark(function X(F){var U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!this._webcamProducer){z.next=7;break}return U=F.getVideoTracks()[0],z.next=4,this._webcamProducer.replaceTrack({track:U});case 4:this._eventEmitter.emit("UPDATE_PRODUCER",{producer:this._webcamProducer}),z.next=11;break;case 7:return z.next=9,this.disableWebcam();case 9:return z.next=11,this.enableWebcam(F);case 11:case"end":return z.stop()}},X,this)})),function(X){return md.apply(this,arguments)})},{key:"changeWebcam",value:(Ol=(0,h.A)(s().mark(function X(F){var U,z,H,re,se,Ie,Re,wt,qe,yt,ae,st,Je,lt;return s().wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:if(z=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"changeWebcam() Calling"}),ke.dispatch(St(!0)),(0,_.A)(F)!=="object"){ye.next=17;break}return ye.prev=3,ye.next=6,this.disableWebcam(z);case 6:return ye.next=8,this.enableWebcam(F,z);case 8:ye.next=15;break;case 10:ye.prev=10,ye.t0=ye.catch(3),Pe.error("changeWebcam() | failed: %o",ye.t0),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(F),error:ye.t0.message}}),ke.dispatch(Ae({type:"error",text:"Could not change webcam: ".concat(ye.t0)}));case 15:ye.next=46;break;case 17:return ye.prev=17,ye.next=20,this._updateWebcams(z);case 20:if(Re=Array.from(this._webcams.keys()),wt=Re.length,qe=this._webcam.device?this._webcam.device.deviceId:void 0,F!=null&&F!=null?yt=Re.indexOf(F):(yt=Re.indexOf(qe))<wt-1?yt++:yt=0,this._webcam.device=this._webcams.get(Re[yt]),Pe.debug("changeWebcam() | new selected webcam [device:%o]",this._webcam.device),this._webcam.resolution=this._webcam.resolution||"hd",ae=(re=this._openTelemetry)===null||re===void 0?void 0:re.trace({spanName:"Getting Selected Webcam",span:z,attributes:{selectedWebcam:this._webcam.device?JSON.stringify(this._webcam.device):"No webcam devices"}}),this._webcam.device){ye.next=31;break}throw(st=this._videosdkLogs)===null||st===void 0||st.pushLogs({logText:"Error changeWebcam : No webcam Found",logType:"ERROR"}),new Error("no webcam devices");case 31:return ye.next=33,this.disableWebcam(z);case 33:return ye.next=35,this.enableWebcam(void 0,z);case 35:return(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:ae,status:1,message:"Done"}),(Ie=this._openTelemetry)===null||Ie===void 0||Ie.completeSpan({span:z,status:1,message:"changeWebcam() Ending"}),ye.abrupt("return");case 40:ye.prev=40,ye.t1=ye.catch(17),Pe.error("changeWebcam() | failed: %o",ye.t1),(Je=this._videosdkLogs)===null||Je===void 0||Je.pushLogs({logText:"Error Could not change webcam",logType:"ERROR",attributes:{object:JSON.stringify(F),error:ye.t1.message}}),(lt=this._openTelemetry)===null||lt===void 0||lt.completeSpan({span:z,status:2,message:"Could not change webcam ".concat(ye.t1)}),ke.dispatch(Ae({type:"error",text:"Could not change webcam: ".concat(ye.t1)}));case 46:ke.dispatch(St(!1));case 47:case"end":return ye.stop()}},X,this,[[3,10],[17,40]])})),function(X){return Ol.apply(this,arguments)})},{key:"changeWebcamResolution",value:(fd=(0,h.A)(s().mark(function X(){var F,U,z,H;return s().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:Pe.debug("changeWebcamResolution()"),ke.dispatch(St(!0)),re.prev=2,re.t0=this._webcam.resolution,re.next=re.t0==="qvga"?6:re.t0==="vga"?8:re.t0==="hd"?10:12;break;case 6:return this._webcam.resolution="vga",re.abrupt("break",13);case 8:return this._webcam.resolution="hd",re.abrupt("break",13);case 10:return this._webcam.resolution="qvga",re.abrupt("break",13);case 12:this._webcam.resolution="hd";case 13:return Pe.debug("changeWebcamResolution() | calling getUserMedia()"),re.prev=14,re.next=17,navigator.mediaDevices.getUserMedia({video:Ht({deviceId:{exact:this._webcam.device.deviceId}},kr[this._webcam.resolution])});case 17:F=re.sent,re.next=25;break;case 20:return re.prev=20,re.t1=re.catch(14),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error in getUserMedia for changeWebcamResolution",logType:"ERROR",attributes:{error:JSON.stringify(re.t1)}}),re.t1.message==="Permission denied"||re.t1.name==="NotAllowedError"?this._emitError(Ue.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED):this._emitError(Ue.q.ERROR_GET_VIDEO_MEDIA),re.abrupt("return");case 25:return z=F.getVideoTracks()[0],re.next=28,this._webcamProducer.replaceTrack({track:z});case 28:ke.dispatch(ht(this._webcamProducer.id,z)),re.next=36;break;case 31:re.prev=31,re.t2=re.catch(2),Pe.error("changeWebcamResolution() | failed: %o",re.t2),(H=this._videosdkLogs)===null||H===void 0||H.pushLogs({logText:"Error Could not change webcam resolution",logType:"ERROR",attributes:{error:re.t2.message}}),ke.dispatch(Ae({type:"error",text:"Could not change webcam resolution: ".concat(re.t2)}));case 36:ke.dispatch(St(!1));case 37:case"end":return re.stop()}},X,this,[[2,31],[14,20]])})),function(){return fd.apply(this,arguments)})},{key:"enableShare",value:(jo=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Re,wt,qe,yt,ae,st,Je,lt,ye,Ge,ir,er,ar,or,rr,pr,Gt,Wt,xr,tr,ur,Ar,nn,fn,cr,sn,Ur,wn,bn,Ir,jn,jt=this,gn=arguments;return s().wrap(function(Lt){for(;;)switch(Lt.prev=Lt.next){case 0:if(U=gn.length>0&&gn[0]!==void 0?gn[0]:void 0,z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"enableShare() Calling ".concat(U?"With Custom Video Track":"Without Custom Video Track "),attributes:{customShareConfig:U?JSON.stringify(U):"Not Specify Custom Track"}}),Pe.debug("enableShare()"),!this._shareProducer){Lt.next=6;break}return(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:z,status:2,message:"Screen Share Producer found"}),Lt.abrupt("return");case 6:if(this._mediasoupDevice.canProduce("video")){Lt.next=10;break}return(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:z,status:2,message:"enableShare() | cannot produce video"}),Pe.error("enableShare() | cannot produce video"),Lt.abrupt("return");case 10:if(ke.dispatch(Pr(!0)),Lt.prev=11,Pe.debug("enableShare() | calling getUserMedia()"),Je=(Re=this._openTelemetry)===null||Re===void 0?void 0:Re.trace({spanName:"Creating Track",span:z}),!U||!U.active){Lt.next=19;break}se=U.getVideoTracks()[0],Ie=U.getAudioTracks()[0],Lt.next=38;break;case 19:return Lt.prev=19,Lt.next=22,navigator.mediaDevices.getDisplayMedia({audio:!0,video:{width:{max:1920},height:{max:1080},frameRate:{max:10}}});case 22:ye=Lt.sent,Lt.next=31;break;case 25:return Lt.prev=25,Lt.t0=Lt.catch(19),(Ge=this._videosdkLogs)===null||Ge===void 0||Ge.pushLogs({logText:"Error in getDisplayMedia for screen share",logType:"ERROR",attributes:{error:JSON.stringify(Lt.t0)}}),(ir=this._openTelemetry)===null||ir===void 0||ir.completeSpan({span:z,status:2,message:"Error in getDisplayMedia for screen share ".concat(Lt.t0)}),Lt.t0.message==="Permission denied"||Lt.t0.name==="NotAllowedError"?this._emitError(Ue.q.ERROR_GET_DISPLAY_MEDIA_PERMISSION_DENIED):this._emitError(Ue.q.ERROR_GET_DISPLAY_MEDIA),Lt.abrupt("return");case 31:if(ye){Lt.next=35;break}return ke.dispatch(Pr(!0)),(er=this._openTelemetry)===null||er===void 0||er.completeSpan({span:z,status:2,message:"Stream not found"}),Lt.abrupt("return");case 35:se=ye.getVideoTracks()[0],Ie=ye.getAudioTracks()[0],(lt=this._openTelemetry)===null||lt===void 0||lt.completeSpan({message:"Track Generated with height ".concat(se.getSettings().height," and width ").concat(se.getSettings().width),span:Je,status:1});case 38:if(ar=(wt=this._openTelemetry)===null||wt===void 0?void 0:wt.trace({spanName:"Generating Producer Configuration",span:z}),pr={videoGoogleStartBitrate:1e3},!this._forceH264){Lt.next=47;break}if(rr=this._mediasoupDevice.rtpCapabilities.codecs.find(function(hr){return hr.mimeType.toLowerCase()==="video/h264"})){Lt.next=45;break}throw(Gt=this._videosdkLogs)===null||Gt===void 0||Gt.pushLogs({logText:"Error EnableShare : desired H264 codec+configuration is not supported",logType:"ERROR"}),new Error("desired H264 codec+configuration is not supported");case 45:Lt.next=52;break;case 47:if(!this._forceVP9){Lt.next=52;break}if(rr=this._mediasoupDevice.rtpCapabilities.codecs.find(function(hr){return hr.mimeType.toLowerCase()==="video/vp9"})){Lt.next=52;break}throw(Wt=this._videosdkLogs)===null||Wt===void 0||Wt.pushLogs({logText:"Error EnableShare :desired VP9 codec+configuration is not supported",logType:"ERROR"}),new Error("desired VP9 codec+configuration is not supported");case 52:return this._useSharingSimulcast&&(xr=this._mediasoupDevice.rtpCapabilities.codecs.find(function(hr){return hr.kind==="video"}),or=this._forceVP9&&rr||xr.mimeType.toLowerCase()==="video/vp9"?Ti:us.map(function(hr){return Ht(Ht({},hr),{},{dtx:!0})})),(qe=this._openTelemetry)===null||qe===void 0||qe.completeSpan({span:ar,status:1,message:"Producer Configuration Generated"}),ar=(yt=this._openTelemetry)===null||yt===void 0?void 0:yt.trace({spanName:"Creating Share Producer",span:z}),Lt.next=57,this._sendTransport.produce({track:se,encodings:or,codecOptions:pr,codec:rr,appData:{share:!0}});case 57:if(this._shareProducer=Lt.sent,tr=we({id:this._shareProducer.id,type:"share",paused:this._shareProducer.paused,track:this._shareProducer.track,rtpParameters:this._shareProducer.rtpParameters,codec:this._shareProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0},instance:this._shareProducer}),ke.dispatch(tr),this._eventEmitter.emit(tr.type,tr.payload),this._shareProducer.on("transportclose",function(){var hr,qr=be(jt._shareProducer.id);ke.dispatch(qr),jt._eventEmitter.emit(qr.type,qr.payload),(hr=jt._shareProducer)===null||hr===void 0||hr.close(),jt._shareProducer=null}),this._shareProducer.on("trackended",function(){var hr;(hr=jt._openTelemetry)===null||hr===void 0||hr.traceAutoComplete({spanName:"this._shareProducer trackended or Share disconnected!",span:z,status:2}),ke.dispatch(Ae({type:"error",text:"Share disconnected!"})),jt.disableShare().catch(function(){})}),(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:ar,status:1,message:"Share Producer Created"}),!Ie){Lt.next=84;break}return Lt.prev=65,nn={opusStereo:1,opusDtx:1},ar=(ur=this._openTelemetry)===null||ur===void 0?void 0:ur.trace({spanName:"Creating Share Audio Producer",span:z}),Lt.next=70,this._sendTransport.produce({track:Ie,codecOptions:nn,appData:{share:!0}});case 70:this._shareAudioProducer=Lt.sent,fn=we({id:this._shareAudioProducer.id,type:"share",paused:this._shareAudioProducer.paused,track:this._shareAudioProducer.track,rtpParameters:this._shareAudioProducer.rtpParameters,codec:this._shareAudioProducer.rtpParameters.codecs[0].mimeType.split("/")[1],appData:{share:!0},instance:this._shareAudioProducer}),ke.dispatch(fn),this._eventEmitter.emit(fn.type,fn.payload),this._shareAudioProducer.on("transportclose",function(){var hr,qr=be(jt._shareAudioProducer.id);ke.dispatch(qr),jt._eventEmitter.emit(qr.type,qr.payload),(hr=jt._shareAudioProducer)===null||hr===void 0||hr.close(),jt._shareAudioProducer=null}),this._shareAudioProducer.on("trackended",function(){var hr;(hr=jt._openTelemetry)===null||hr===void 0||hr.traceAutoComplete({spanName:"this._shareAudioProducer trackended",span:z,status:2}),ke.dispatch(Ae({type:"error",text:"Share disconnected!"}))}),(Ar=this._openTelemetry)===null||Ar===void 0||Ar.completeSpan({span:ar,status:1,message:"Share Audio Producer Created"}),Lt.next=84;break;case 79:return Lt.prev=79,Lt.t1=Lt.catch(65),Lt.next=83,this._protoo.request("produceError",{mediaType:"shareAudio",message:Lt.t1.message});case 83:(cr=this._videosdkLogs)===null||cr===void 0||cr.pushLogs({logText:"Error in shareAudio produceError",logType:"ERROR",attributes:{error:Lt.t1.message}});case 84:(st=this._openTelemetry)===null||st===void 0||st.completeSpan({span:z,status:1,message:"Enable Share Successful"}),Lt.next=98;break;case 87:return Lt.prev=87,Lt.t2=Lt.catch(11),Pe.error("enableShare() | failed:%o",Lt.t2),(sn=this._openTelemetry)===null||sn===void 0||sn.completeSpan({span:z,status:2,attributes:{error:Lt.t2.message},message:"Error in enableShare video produceError"}),console.log("screen share catch",Lt.t2.message),(Ur=this._videosdkLogs)===null||Ur===void 0||Ur.pushLogs({logText:"Error in enableShare video produceError",logType:"ERROR",attributes:{error:Lt.t2.message}}),Lt.t2.name!=="NotAllowedError"&&ke.dispatch(Ae({type:"error",text:"Error sharing: ".concat(Lt.t2)})),Lt.next=96,this._protoo.request("produceError",{mediaType:"share",message:Lt.t2.message});case 96:se&&se.stop(),Ie&&Ie.stop();case 98:ke.dispatch(Pr(!1)),this._shareProducer&&(wn=0,(bn=this._metrics.addNewProbe(this._shareProducer,"share_producer")).onStatsCollected=function(hr){try{var qr;jt._stats.producerStats||(jt._stats.producerStats={}),jt._stats.producerStats.share||(jt._stats.producerStats.share=[]),jt._shareProducer&&(jt._latestStats[(qr=jt._shareProducer)===null||qr===void 0?void 0:qr.id]=[]),hr.video.forEach(function(on){var Xr;jt._shareProducer&&jt._latestStats[(Xr=jt._shareProducer)===null||Xr===void 0?void 0:Xr.id].push(on)}),wn%5==0&&jt._shareProducer!=null&&jt._stats.producerStats.share.push({timestamp:new Date,stats:jt._latestStats[jt._shareProducer.id]}),wn++}catch(on){var an;(an=jt._videosdkLogs)===null||an===void 0||an.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:on.message}}),console.log("PRODUCER ERROR",on)}},bn.start(),this._shareProducer.observer.on("close",function(){bn.stop(),jt._metrics.removeExistingProbe(bn)})),this._shareAudioProducer&&(Ir=0,(jn=this._metrics.addNewProbe(this._shareAudioProducer,"share_audio_producer")).onStatsCollected=function(hr){try{var qr;jt._stats.producerStats||(jt._stats.producerStats={}),jt._stats.producerStats.shareAudio||(jt._stats.producerStats.shareAudio=[]),jt._shareAudioProducer&&(jt._latestStats[(qr=jt._shareAudioProducer)===null||qr===void 0?void 0:qr.id]=[]),hr.audio.forEach(function(on){var Xr;jt._shareAudioProducer&&jt._latestStats[(Xr=jt._shareAudioProducer)===null||Xr===void 0?void 0:Xr.id].push(on)}),Ir%5==0&&jt._shareAudioProducer!=null&&jt._stats.producerStats.shareAudio.push(Ht({timestamp:new Date},jt._latestStats[jt._shareAudioProducer.id]?jt._latestStats[jt._shareAudioProducer.id][0]:{})),Ir++}catch(on){var an;(an=jt._videosdkLogs)===null||an===void 0||an.pushLogs({logText:"Error PRODUCER Stats ERROR",logType:"ERROR",attributes:{error:on.message}}),console.log("PRODUCER ERROR",on)}},jn.start(),this._shareAudioProducer.observer.on("close",function(){jn.stop(),jt._metrics.removeExistingProbe(jn)}));case 101:case"end":return Lt.stop()}},X,this,[[11,87],[19,25],[65,79]])})),function(){return jo.apply(this,arguments)})},{key:"disableShare",value:(hd=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Re,wt,qe,yt,ae,st;return s().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:if(Pe.debug("disableShare()"),H=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"disableShare() Calling",status:1}),this._shareProducer){Je.next=5;break}return(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:H,status:2,message:"Share Producer Not found"}),Je.abrupt("return");case 5:return se=(U=this._openTelemetry)===null||U===void 0?void 0:U.trace({spanName:"Closing Share Producer",span:H,status:1}),this._shareProducer.close(),Ie=be(this._shareProducer.id),ke.dispatch(Ie),this._eventEmitter.emit(Ie.type,Ie.payload),this._shareAudioProducer&&(qe=(Re=this._openTelemetry)===null||Re===void 0?void 0:Re.trace({spanName:"Closing Share Audio Producer",span:H,status:1}),this._shareAudioProducer.close(),Ie=be(this._shareAudioProducer.id),ke.dispatch(Ie),this._eventEmitter.emit(Ie.type,Ie.payload),(wt=this._openTelemetry)===null||wt===void 0||wt.completeSpan({span:qe,status:1,message:"Closed Share Audio Producer"})),Je.prev=11,Je.next=14,this._protoo.request("closeProducer",{producerId:this._shareProducer.id});case 14:if(!this._shareAudioProducer){Je.next=17;break}return Je.next=17,this._protoo.request("closeProducer",{producerId:this._shareAudioProducer.id});case 17:(yt=this._openTelemetry)===null||yt===void 0||yt.completeSpan({span:se,status:1,message:"Requested Server to Close Producer"}),Je.next=25;break;case 20:Je.prev=20,Je.t0=Je.catch(11),ke.dispatch(Ae({type:"error",text:"Error closing server-side share Producer: ".concat(Je.t0)})),(ae=this._openTelemetry)===null||ae===void 0||ae.completeSpan({span:H,status:2,message:"Error closing server-side share Producer ".concat(Je.t0)}),(st=this._videosdkLogs)===null||st===void 0||st.pushLogs({logText:"Error closing server-side share Producer",logType:"ERROR",attributes:{error:Je.t0.message}});case 25:this._shareProducer=null,this._shareAudioProducer=null,(z=this._openTelemetry)===null||z===void 0||z.completeSpan({span:H,status:1,message:"Screen Share Disabled Successfully"});case 28:case"end":return Je.stop()}},X,this,[[11,20]])})),function(){return hd.apply(this,arguments)})},{key:"enableAudioOnly",value:(wi=(0,h.A)(s().mark(function X(){var F,U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:Pe.debug("enableAudioOnly()"),ke.dispatch(fe(!0)),this.disableWebcam(),F=nt(this._consumers.values()),H.prev=4,F.s();case 6:if((U=F.n()).done){H.next=13;break}if((z=U.value).kind==="video"){H.next=10;break}return H.abrupt("continue",11);case 10:this._pauseConsumer(z);case 11:H.next=6;break;case 13:H.next=18;break;case 15:H.prev=15,H.t0=H.catch(4),F.e(H.t0);case 18:return H.prev=18,F.f(),H.finish(18);case 21:ke.dispatch(Me(!0)),ke.dispatch(fe(!1));case 23:case"end":return H.stop()}},X,this,[[4,15,18,21]])})),function(){return wi.apply(this,arguments)})},{key:"disableAudioOnly",value:(xl=(0,h.A)(s().mark(function X(){var F,U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:Pe.debug("disableAudioOnly()"),ke.dispatch(fe(!0)),!this._webcamProducer&&this._produce&&(j()||{}).webcamEnabled&&this.enableWebcam(),F=nt(this._consumers.values()),H.prev=4,F.s();case 6:if((U=F.n()).done){H.next=13;break}if((z=U.value).kind==="video"){H.next=10;break}return H.abrupt("continue",11);case 10:this._resumeConsumer(z);case 11:H.next=6;break;case 13:H.next=18;break;case 15:H.prev=15,H.t0=H.catch(4),F.e(H.t0);case 18:return H.prev=18,F.f(),H.finish(18);case 21:ke.dispatch(Me(!1)),ke.dispatch(fe(!1));case 23:case"end":return H.stop()}},X,this,[[4,15,18,21]])})),function(){return xl.apply(this,arguments)})},{key:"muteAudio",value:(bc=(0,h.A)(s().mark(function X(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:Pe.debug("muteAudio()"),ke.dispatch(oe(!0));case 2:case"end":return F.stop()}},X)})),function(){return bc.apply(this,arguments)})},{key:"unmuteAudio",value:(wc=(0,h.A)(s().mark(function X(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:Pe.debug("unmuteAudio()"),ke.dispatch(oe(!1));case 2:case"end":return F.stop()}},X)})),function(){return wc.apply(this,arguments)})},{key:"handleRemoteRestartIce",value:(ao=(0,h.A)(s().mark(function X(F){var U,z,H,re,se,Ie,Re,wt;return s().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return H=F.iceParameters,re=F.transportId,se=F.internalSpan,re===((U=this._sendTransport)===null||U===void 0?void 0:U.id)&&this._sendTransport.restartIce({iceParameters:H}),re===((z=this._recvTransport)===null||z===void 0?void 0:z.id)&&this._recvTransport.restartIce({iceParameters:H}),qe.prev=3,qe.next=6,this._protoo.request("iceRestarted",{transportId:re});case 6:(Ie=this._openTelemetry)===null||Ie===void 0||Ie.completeSpan({span:se,status:1,message:"iceRestarted"}),qe.next=14;break;case 9:qe.prev=9,qe.t0=qe.catch(3),(Re=this._openTelemetry)===null||Re===void 0||Re.completeSpan({span:se,status:2,message:"handleRemoteRestartIce() ICE restart failed ".concat(qe.t0)}),(wt=this._videosdkLogs)===null||wt===void 0||wt.pushLogs({logText:"Error handleRemoteRestartIce() ICE restart failed",logType:"ERROR",attributes:{error:qe.t0.message}}),ke.dispatch(Ae({type:"error",text:"ICE restart failed: ".concat(qe.t0)}));case 14:case"end":return qe.stop()}},X,this,[[3,9]])})),function(X){return ao.apply(this,arguments)})},{key:"restartIce",value:(Tl=(0,h.A)(s().mark(function X(){var F,U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(Pe.debug("restartIce()"),ke.dispatch(ve(!0)),H.prev=2,!this._sendTransport){H.next=9;break}return H.next=6,this._protoo.request("restartIce",{transportId:this._sendTransport.id});case 6:return F=H.sent,H.next=9,this._sendTransport.restartIce({iceParameters:F});case 9:if(!this._recvTransport){H.next=15;break}return H.next=12,this._protoo.request("restartIce",{transportId:this._recvTransport.id});case 12:return U=H.sent,H.next=15,this._recvTransport.restartIce({iceParameters:U});case 15:ke.dispatch(Ae({text:"ICE restarted"})),H.next=23;break;case 18:H.prev=18,H.t0=H.catch(2),Pe.error("restartIce() | failed:%o",H.t0),ke.dispatch(Ae({type:"error",text:"ICE restart failed: ".concat(H.t0)})),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error restartIce() ICE restart failed",logType:"ERROR",attributes:{error:H.t0.message}});case 23:ke.dispatch(ve(!1));case 24:case"end":return H.stop()}},X,this,[[2,18]])})),function(){return Tl.apply(this,arguments)})},{key:"setMaxSendingSpatialLayer",value:(No=(0,h.A)(s().mark(function X(F){var U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Pe.debug("setMaxSendingSpatialLayer() [spatialLayer:%s]",F),z.prev=1,!this._webcamProducer){z.next=7;break}return z.next=5,this._webcamProducer.setMaxSpatialLayer(F);case 5:z.next=10;break;case 7:if(!this._shareProducer){z.next=10;break}return z.next=10,this._shareProducer.setMaxSpatialLayer(F);case 10:z.next=17;break;case 12:z.prev=12,z.t0=z.catch(1),Pe.error("setMaxSendingSpatialLayer() | failed:%o",z.t0),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error setting max sending video spatial layer",logType:"ERROR",attributes:{error:z.t0.message}}),ke.dispatch(Ae({type:"error",text:"Error setting max sending video spatial layer: ".concat(z.t0)}));case 17:case"end":return z.stop()}},X,this,[[1,12]])})),function(X){return No.apply(this,arguments)})},{key:"setWebcamQuality",value:(xa=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(this._webcamProducer){H.next=2;break}return H.abrupt("return");case 2:if(U=this._webcam.resolution,z=Cr[U][F].s,this._webcamProducer.maxSpatialLayer!=z){H.next=6;break}return H.abrupt("return");case 6:return H.next=8,this._webcamProducer.setMaxSpatialLayer(z);case 8:case"end":return H.stop()}},X,this)})),function(X){return xa.apply(this,arguments)})},{key:"setConsumerQuality",value:(zs=(0,h.A)(s().mark(function X(F,U){var z,H,re,se,Ie,Re,wt;return s().wrap(function(qe){for(;;)switch(qe.prev=qe.next){case 0:return se=this._webcam.resolution,Ie=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:'Setting "'.concat(U,'" Quality')}),Re=Cr[se][U].s,wt=Cr[se][U].t,(H=this._openTelemetry)===null||H===void 0||H.traceAutoComplete({spanName:"Getting spatial & temporal layers",span:Ie,attributes:{spatialLayers:JSON.parse(Re),temporalLayers:JSON.parse(wt)},status:1}),qe.next=7,this.setConsumerPreferredLayers(F,Re,wt);case 7:(re=this._openTelemetry)===null||re===void 0||re.completeSpan({message:"Done",span:Ie,status:1});case 8:case"end":return qe.stop()}},X,this)})),function(X,F){return zs.apply(this,arguments)})},{key:"setViewPort",value:(Cn=(0,h.A)(s().mark(function X(F,U,z){var H,re,se,Ie;return s().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(this._consumers.get(F.id)){Re.next=2;break}return Re.abrupt("return");case 2:if(H=rt(this._consumers.get(F.id),U,z),re=H.consumerId,se=H.newPreferredSpatialLayer,Ie=H.newPreferredTemporalLayer,!re){Re.next=6;break}return Re.next=6,this.setConsumerPreferredLayers(re,se,Ie);case 6:case"end":return Re.stop()}},X,this)})),function(X,F,U){return Cn.apply(this,arguments)})},{key:"setConsumerPreferredLayers",value:(Xn=(0,h.A)(s().mark(function X(F,U,z){var H,re;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return Pe.debug("setConsumerPreferredLayers() [consumerId:%s, spatialLayer:%s, temporalLayer:%s]",F,U,z),se.prev=1,(H=this._consumers.get(F)).spatialLayers>1&&(H.preferredSpatialLayer=U,H.preferredTemporalLayer=z),se.next=6,this._protoo.request("setConsumerPreferredLayers",{consumerId:F,spatialLayer:U,temporalLayer:z});case 6:ke.dispatch(Zt(F,U,z)),se.next=14;break;case 9:se.prev=9,se.t0=se.catch(1),Pe.error("setConsumerPreferredLayers() | failed:%o",se.t0),(re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Error setting Consumer preferred layers:",logType:"ERROR",attributes:{error:se.t0.message}}),ke.dispatch(Ae({type:"error",text:"Error setting Consumer preferred layers: ".concat(se.t0)}));case 14:case"end":return se.stop()}},X,this,[[1,9]])})),function(X,F,U){return Xn.apply(this,arguments)})},{key:"setConsumerPriority",value:(vt=(0,h.A)(s().mark(function X(F,U){var z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return Pe.debug("setConsumerPriority() [consumerId:%s, priority:%d]",F,U),H.prev=1,H.next=4,this._protoo.request("setConsumerPriority",{consumerId:F,priority:U});case 4:ke.dispatch(sr(F,U)),H.next=12;break;case 7:H.prev=7,H.t0=H.catch(1),Pe.error("setConsumerPriority() | failed:%o",H.t0),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error setting Consumer priority",logType:"ERROR",attributes:{error:H.t0.message}}),ke.dispatch(Ae({type:"error",text:"Error setting Consumer priority: ".concat(H.t0)}));case 12:case"end":return H.stop()}},X,this,[[1,7]])})),function(X,F){return vt.apply(this,arguments)})},{key:"requestConsumerKeyFrame",value:(it=(0,h.A)(s().mark(function X(F){var U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return Pe.debug("requestConsumerKeyFrame() [consumerId:%s]",F),z.prev=1,z.next=4,this._protoo.request("requestConsumerKeyFrame",{consumerId:F});case 4:ke.dispatch(Ae({text:"Keyframe requested for video consumer"})),z.next=12;break;case 7:z.prev=7,z.t0=z.catch(1),Pe.error("requestConsumerKeyFrame() | failed:%o",z.t0),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error requesting key frame for Consumer",logType:"ERROR",attributes:{error:z.t0.message}}),ke.dispatch(Ae({type:"error",text:"Error requesting key frame for Consumer: ".concat(z.t0)}));case 12:case"end":return z.stop()}},X,this,[[1,7]])})),function(X){return it.apply(this,arguments)})},{key:"enableChatDataProducer",value:(Y=(0,h.A)(s().mark(function X(){var F,U=this;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Pe.debug("enableChatDataProducer()"),this._useDataChannel){z.next=3;break}return z.abrupt("return");case 3:return z.prev=3,z.next=6,this._sendTransport.produceData({ordered:!1,maxRetransmits:1,label:"chat",priority:"medium",appData:{info:"my-chat-DataProducer"}});case 6:this._chatDataProducer=z.sent,ke.dispatch(Jt({id:this._chatDataProducer.id,sctpStreamParameters:this._chatDataProducer.sctpStreamParameters,label:this._chatDataProducer.label,protocol:this._chatDataProducer.protocol})),this._chatDataProducer.on("transportclose",function(){U._chatDataProducer=null}),this._chatDataProducer.on("open",function(){Pe.debug('chat DataProducer "open" event')}),this._chatDataProducer.on("close",function(){Pe.error('chat DataProducer "close" event'),U._chatDataProducer=null,ke.dispatch(Ae({type:"error",text:"Chat DataProducer closed"}))}),this._chatDataProducer.on("error",function(H){Pe.error('chat DataProducer "error" event:%o',H),ke.dispatch(Ae({type:"error",text:"Chat DataProducer error: ".concat(H)}))}),this._chatDataProducer.on("bufferedamountlow",function(){Pe.debug('chat DataProducer "bufferedamountlow" event')}),z.next=21;break;case 15:throw z.prev=15,z.t0=z.catch(3),Pe.error("enableChatDataProducer() | failed:%o",z.t0),(F=this._videosdkLogs)===null||F===void 0||F.pushLogs({logText:"Error enabling chat DataProducer",logType:"ERROR",attributes:{error:z.t0.message}}),ke.dispatch(Ae({type:"error",text:"Error enabling chat DataProducer: ".concat(z.t0)})),z.t0;case 21:case"end":return z.stop()}},X,this,[[3,15]])})),function(){return Y.apply(this,arguments)})},{key:"enableBotDataProducer",value:(Dt=(0,h.A)(s().mark(function X(){var F,U=this;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(Pe.debug("enableBotDataProducer()"),this._useDataChannel){z.next=3;break}return z.abrupt("return");case 3:return z.prev=3,z.next=6,this._sendTransport.produceData({ordered:!1,maxPacketLifeTime:2e3,label:"bot",priority:"medium",appData:{info:"my-bot-DataProducer"}});case 6:this._botDataProducer=z.sent,ke.dispatch(Jt({id:this._botDataProducer.id,sctpStreamParameters:this._botDataProducer.sctpStreamParameters,label:this._botDataProducer.label,protocol:this._botDataProducer.protocol})),this._botDataProducer.on("transportclose",function(){U._botDataProducer=null}),this._botDataProducer.on("open",function(){Pe.debug('bot DataProducer "open" event')}),this._botDataProducer.on("close",function(){Pe.error('bot DataProducer "close" event'),U._botDataProducer=null,ke.dispatch(Ae({type:"error",text:"Bot DataProducer closed"}))}),this._botDataProducer.on("error",function(H){Pe.error('bot DataProducer "error" event:%o',H),ke.dispatch(Ae({type:"error",text:"Bot DataProducer error: ".concat(H)}))}),this._botDataProducer.on("bufferedamountlow",function(){Pe.debug('bot DataProducer "bufferedamountlow" event')}),z.next=21;break;case 15:throw z.prev=15,z.t0=z.catch(3),Pe.error("enableBotDataProducer() | failed:%o",z.t0),(F=this._videosdkLogs)===null||F===void 0||F.pushLogs({logText:"Error enabling bot DataProducer",logType:"ERROR",attributes:{error:z.t0.message}}),ke.dispatch(Ae({type:"error",text:"Error enabling bot DataProducer: ".concat(z.t0)})),z.t0;case 21:case"end":return z.stop()}},X,this,[[3,15]])})),function(){return Dt.apply(this,arguments)})},{key:"sendChatMessage",value:(Ta=(0,h.A)(s().mark(function X(F){return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Pe.debug('sendChatMessage() [text:"%s]',F),this._chatDataProducer){U.next=4;break}return ke.dispatch(Ae({type:"error",text:"No chat DataProducer"})),U.abrupt("return");case 4:try{this._chatDataProducer.send(F)}catch(z){Pe.error("chat DataProducer.send() failed:%o",z),ke.dispatch(Ae({type:"error",text:"chat DataProducer.send() failed: ".concat(z)}))}case 5:case"end":return U.stop()}},X,this)})),function(X){return Ta.apply(this,arguments)})},{key:"sendBotMessage",value:(Cs=(0,h.A)(s().mark(function X(F){return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Pe.debug('sendBotMessage() [text:"%s]',F),this._botDataProducer){U.next=4;break}return ke.dispatch(Ae({type:"error",text:"No bot DataProducer"})),U.abrupt("return");case 4:try{this._botDataProducer.send(F)}catch(z){Pe.error("bot DataProducer.send() failed:%o",z),ke.dispatch(Ae({type:"error",text:"bot DataProducer.send() failed: ".concat(z)}))}case 5:case"end":return U.stop()}},X,this)})),function(X){return Cs.apply(this,arguments)})},{key:"changeDisplayName",value:(Pa=(0,h.A)(s().mark(function X(F){return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return Pe.debug('changeDisplayName() [displayName:"%s"]',F),L({displayName:F}),U.prev=2,U.next=5,this._protoo.request("changeDisplayName",{displayName:F});case 5:this._displayName=F,ke.dispatch(_e(F)),ke.dispatch(Ae({text:"Display name changed"})),U.next=15;break;case 10:U.prev=10,U.t0=U.catch(2),Pe.error("changeDisplayName() | failed: %o",U.t0),ke.dispatch(Ae({type:"error",text:"Could not change display name: ".concat(U.t0)})),ke.dispatch(_e());case 15:case"end":return U.stop()}},X,this,[[2,10]])})),function(X){return Pa.apply(this,arguments)})},{key:"openConnection",value:(Ca=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return U=F.roomId,z=F.payload,H.next=3,this._protoo.request("openConnection",{roomId:U,payload:z}).catch(function(re){throw new Error(re)});case 3:case"end":return H.stop()}},X,this)})),function(X){return Ca.apply(this,arguments)})},{key:"closeConnection",value:(so=(0,h.A)(s().mark(function X(F){return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,this._protoo.request("closeConnection",{roomId:F});case 2:case"end":return U.stop()}},X,this)})),function(X){return so.apply(this,arguments)})},{key:"switchTo",value:(io=(0,h.A)(s().mark(function X(F){var U,z,H;return s().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return U=F.roomId,z=F.peerIds,H=F.payload,re.next=3,this._protoo.request("requestSwitchRoom",{roomId:U,peerIds:z,payload:H});case 3:case"end":return re.stop()}},X,this)})),function(X){return io.apply(this,arguments)})},{key:"switchPeerRoom",value:(no=(0,h.A)(s().mark(function X(F){var U,z,H,re;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return U=F.peerId,z=F.roomId,H=F.payload,re=F.token,se.next=3,this._protoo.request("switchPeerRoom",{roomId:z,peerId:U,payload:H,token:re});case 3:case"end":return se.stop()}},X,this)})),function(X){return no.apply(this,arguments)})},{key:"connectionSwitchPeerRoom",value:(ro=(0,h.A)(s().mark(function X(F){var U,z,H,re,se;return s().wrap(function(Ie){for(;;)switch(Ie.prev=Ie.next){case 0:return U=F.roomId,z=F.connectionRoomId,H=F.peerId,re=F.payload,se=F.token,Ie.next=3,this._protoo.request("connectionSwitchPeerRoom",{roomId:U,connectionRoomId:z,peerId:H,payload:re,token:se});case 3:case"end":return Ie.stop()}},X,this)})),function(X){return ro.apply(this,arguments)})},{key:"connectionSendChatMessage",value:(to=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return U=F.roomId,z=F.message,H.next=3,this._protoo.request("connectionSendChatMessage",{roomId:U,message:z});case 3:case"end":return H.stop()}},X,this)})),function(X){return to.apply(this,arguments)})},{key:"connectionEndMeeting",value:(eo=(0,h.A)(s().mark(function X(F){var U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return U=F.roomId,z.next=3,this._protoo.request("connectionCloseRoom",{roomId:U});case 3:case"end":return z.stop()}},X,this)})),function(X){return eo.apply(this,arguments)})},{key:"pubsubPublish",value:(Za=(0,h.A)(s().mark(function X(F,U,z,H){var re,se,Ie,Re,wt,qe;return s().wrap(function(yt){for(;;)switch(yt.prev=yt.next){case 0:if(yt.prev=0,z!=null&&z.sendOnly){if(re=z.sendOnly,se=[],re){Ie=nt(re);try{for(Ie.s();!(Re=Ie.n()).done;)(wt=Re.value)&&se.push(wt.toString())}catch(ae){Ie.e(ae)}finally{Ie.f()}}z.sendOnly=se}return yt.next=4,this._protoo.request("pubsubPublish",{topic:F,message:U,options:z,payload:H});case 4:yt.next=10;break;case 6:yt.prev=6,yt.t0=yt.catch(0),(qe=this._videosdkLogs)===null||qe===void 0||qe.pushLogs({logText:"Error pubsubPublish() | failed",logType:"ERROR",attributes:{error:yt.t0.message}}),Pe.error("pubsubPublish() | failed: %o",yt.t0);case 10:case"end":return yt.stop()}},X,this,[[0,6]])})),function(X,F,U,z){return Za.apply(this,arguments)})},{key:"pubsubSubscribe",value:(Xa=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!this._closed){H.next=2;break}return H.abrupt("return");case 2:return H.prev=2,H.next=5,this._protoo.request("pubsubSubscribe",{topic:F});case 5:return U=H.sent,H.abrupt("return",U);case 9:H.prev=9,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error pubsubSubscribe() | failed",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.error("pubsubSubscribe() | failed: %o",H.t0);case 13:case"end":return H.stop()}},X,this,[[2,9]])})),function(X){return Xa.apply(this,arguments)})},{key:"pubsubUnsubscribe",value:(Ya=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(!this._closed){H.next=2;break}return H.abrupt("return");case 2:return H.prev=2,H.next=5,this._protoo.request("pubsubUnsubscribe",{topic:F});case 5:(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Pubsub Unsubscribing Successfully for topic ".concat(F),logType:"INFO"}),H.next=12;break;case 8:H.prev=8,H.t0=H.catch(2),(z=this._videosdkLogs)===null||z===void 0||z.pushLogs({logText:"Error pubsubUnsubscribe() | failed",logType:"ERROR",attributes:{error:H.t0.message}}),Pe.error("pubsubUnsubscribe() | failed: %o",H.t0);case 12:case"end":return H.stop()}},X,this,[[2,8]])})),function(X){return Ya.apply(this,arguments)})},{key:"closeRoom",value:(Qa=(0,h.A)(s().mark(function X(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.next=2,this._protoo.request("closeRoom",{});case 2:case"end":return F.stop()}},X,this)})),function(){return Qa.apply(this,arguments)})},{key:"removePeer",value:(Ja=(0,h.A)(s().mark(function X(F){var U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if((U=this._openTelemetry)===null||U===void 0||U.traceAutoComplete({spanName:"Removing peer ".concat(F),status:1}),F!=null){z.next=3;break}return z.abrupt("return");case 3:return z.next=5,this._protoo.request("removePeer",{peerId:F});case 5:case"end":return z.stop()}},X,this)})),function(X){return Ja.apply(this,arguments)})},{key:"startPingPong",value:(Ga=(0,h.A)(s().mark(function X(){var F=this;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:this._pingWebsocketInterval!=null&&clearInterval(this._pingWebsocketInterval),this._pingWebsocketInterval=setInterval(function(){F.pingWebSocket()},2e3);case 2:case"end":return U.stop()}},X,this)})),function(){return Ga.apply(this,arguments)})},{key:"pingWebSocket",value:(Ka=(0,h.A)(s().mark(function X(){var F,U=this;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!this._closed){z.next=2;break}return z.abrupt("return");case 2:F=!1,this._protoo.request("ping").then(function(H){H&&(F=!0)}).catch(function(H){}),setTimeout(function(){F?(!U._isWebsocketAlive||U._pingWebsocketFailedCounter>1?(U._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"CONNECTED"}),U._isWebsocketAlive=!0,U._pingWebsocketFailedCounter=0,U.restartIce()):U._transportState!="failed"&&U._transportState!="disconnected"||(console.log("Calling Restart Ice based on transport state",U._transportState),U.restartIce()),U._pingWebsocketFailedCounter=0):(U._isWebsocketAlive&&U._pingWebsocketFailedCounter>1&&(U._eventEmitter.emit("MEETING_STATE_CHANGED",{state:"DISCONNECTED"}),U._isWebsocketAlive=!1,U.startInternetPingPong()),U._pingWebsocketFailedCounter=U._pingWebsocketFailedCounter+1)},1e3);case 5:case"end":return z.stop()}},X,this)})),function(){return Ka.apply(this,arguments)})},{key:"startInternetPingPong",value:(qa=(0,h.A)(s().mark(function X(){var F=this;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:this._pingInternetInterval!=null&&clearInterval(this._pingInternetInterval),this._pingInternetInterval=setInterval(function(){F.pingInternet()},2e3);case 2:case"end":return U.stop()}},X,this)})),function(){return qa.apply(this,arguments)})},{key:"pingInternet",value:($a=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie=this;return s().wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(!this._closed){Re.next=2;break}return Re.abrupt("return");case 2:return(F=this._videosdkLogs)===null||F===void 0||F.pushLogs({logText:"pinging internet",logType:"INFO"}),U=new AbortController,z=U.signal,H=setTimeout(function(){U.abort()},1e3),Re.next=8,fetch("https://".concat(this._signalingBaseUrl,"/ping"),{method:"GET",signal:z}).then(function(wt){return clearTimeout(H),wt.text()}).catch(function(wt){var qe;return(qe=Ie._videosdkLogs)===null||qe===void 0||qe.pushLogs({logText:"Error pingInternet failed",logType:"ERROR",attributes:{error:wt.message}}),"failed"});case 8:if(Re.sent!="pong"){Re.next=19;break}if((re=this._videosdkLogs)===null||re===void 0||re.pushLogs({logText:"Pong",logType:"INFO"}),!(this._pingWebsocketFailedCounter>5&&this._pongInternetCounter>3)||this._isWebsocketAlive){Re.next=17;break}return this._pongInternetCounter=0,this.close({sendLeft:!1}),(se=this._videosdkLogs)===null||se===void 0||se.pushLogs({logText:"Re-join the meeting, after diconnect",logType:"INFO"}),Re.next=17,this.join();case 17:this._pongInternetCounter=this._pongInternetCounter+1,this._isWebsocketAlive&&(this._pongInternetCounter=0,this._pingInternetInterval!=null&&(clearInterval(this._pingInternetInterval),this._pingInternetInterval=null));case 19:case"end":return Re.stop()}},X,this)})),function(){return $a.apply(this,arguments)})},{key:"getSendTransportRemoteStats",value:(Xs=(0,h.A)(s().mark(function X(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(Pe.debug("getSendTransportRemoteStats()"),this._sendTransport){F.next=3;break}return F.abrupt("return");case 3:return F.abrupt("return",this._protoo.request("getTransportStats",{transportId:this._sendTransport.id}));case 4:case"end":return F.stop()}},X,this)})),function(){return Xs.apply(this,arguments)})},{key:"getRecvTransportRemoteStats",value:(ks=(0,h.A)(s().mark(function X(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(Pe.debug("getRecvTransportRemoteStats()"),this._recvTransport){F.next=3;break}return F.abrupt("return");case 3:return F.abrupt("return",this._protoo.request("getTransportStats",{transportId:this._recvTransport.id}));case 4:case"end":return F.stop()}},X,this)})),function(){return ks.apply(this,arguments)})},{key:"getAudioRemoteStats",value:($i=(0,h.A)(s().mark(function X(){var F;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Pe.debug("getAudioRemoteStats()"),F=this._micProducer){U.next=4;break}return U.abrupt("return");case 4:return U.abrupt("return",this._latestStats[F.id]);case 5:case"end":return U.stop()}},X,this)})),function(){return $i.apply(this,arguments)})},{key:"getVideoRemoteStats",value:(Es=(0,h.A)(s().mark(function X(){var F;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Pe.debug("getVideoRemoteStats()"),F=this._webcamProducer){U.next=4;break}return U.abrupt("return");case 4:return U.abrupt("return",this._latestStats[F.id]);case 5:case"end":return U.stop()}},X,this)})),function(){return Es.apply(this,arguments)})},{key:"getShareRemoteStats",value:(es=(0,h.A)(s().mark(function X(){var F;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Pe.debug("getVideoRemoteStats()"),F=this._shareProducer){U.next=4;break}return U.abrupt("return");case 4:return U.abrupt("return",this._latestStats[F.id]);case 5:case"end":return U.stop()}},X,this)})),function(){return es.apply(this,arguments)})},{key:"getShareAudioRemoteStats",value:(Oi=(0,h.A)(s().mark(function X(){var F;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(F=this._shareAudioProducer){U.next=3;break}return U.abrupt("return");case 3:return U.abrupt("return",this._latestStats[F.id]);case 4:case"end":return U.stop()}},X,this)})),function(){return Oi.apply(this,arguments)})},{key:"getConsumerRemoteStats",value:(xi=(0,h.A)(s().mark(function X(F){var U,z;return s().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:if(Pe.debug("getConsumerRemoteStats()"),U=this._consumers.get(F)){H.next=4;break}return H.abrupt("return");case 4:return this._latestStats[F]&&(this._latestStats[F][0].currentSpatialLayer=U.currentSpatialLayer,this._latestStats[F][0].currentTemporalLayer=U.currentTemporalLayer,this._latestStats[F][0].preferredSpatialLayer=U.preferredSpatialLayer,this._latestStats[F][0].preferredTemporalLayer=U.preferredTemporalLayer),z=U.track.id.replace(/[{}]/g,""),H.abrupt("return",this._latestStats[z]);case 7:case"end":return H.stop()}},X,this)})),function(X){return xi.apply(this,arguments)})},{key:"getChatDataProducerRemoteStats",value:(Yn=(0,h.A)(s().mark(function X(){var F;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Pe.debug("getChatDataProducerRemoteStats()"),F=this._chatDataProducer){U.next=4;break}return U.abrupt("return");case 4:return U.abrupt("return",this._protoo.request("getDataProducerStats",{dataProducerId:F.id}));case 5:case"end":return U.stop()}},X,this)})),function(){return Yn.apply(this,arguments)})},{key:"getBotDataProducerRemoteStats",value:(fi=(0,h.A)(s().mark(function X(){var F;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Pe.debug("getBotDataProducerRemoteStats()"),F=this._botDataProducer){U.next=4;break}return U.abrupt("return");case 4:return U.abrupt("return",this._protoo.request("getDataProducerStats",{dataProducerId:F.id}));case 5:case"end":return U.stop()}},X,this)})),function(){return fi.apply(this,arguments)})},{key:"getDataConsumerRemoteStats",value:(kn=(0,h.A)(s().mark(function X(F){return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Pe.debug("getDataConsumerRemoteStats()"),this._dataConsumers.get(F)){U.next=4;break}return U.abrupt("return");case 4:return U.abrupt("return",this._protoo.request("getDataConsumerStats",{dataConsumerId:F}));case 5:case"end":return U.stop()}},X,this)})),function(X){return kn.apply(this,arguments)})},{key:"getSendTransportLocalStats",value:(_n=(0,h.A)(s().mark(function X(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(Pe.debug("getSendTransportLocalStats()"),this._sendTransport){F.next=3;break}return F.abrupt("return");case 3:return F.abrupt("return",this._sendTransport.getStats());case 4:case"end":return F.stop()}},X,this)})),function(){return _n.apply(this,arguments)})},{key:"getRecvTransportLocalStats",value:(tn=(0,h.A)(s().mark(function X(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(Pe.debug("getRecvTransportLocalStats()"),this._recvTransport){F.next=3;break}return F.abrupt("return");case 3:return F.abrupt("return",this._recvTransport.getStats());case 4:case"end":return F.stop()}},X,this)})),function(){return tn.apply(this,arguments)})},{key:"getAudioLocalStats",value:($r=(0,h.A)(s().mark(function X(){return s().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:if(Pe.debug("getAudioLocalStats()"),this._micProducer){F.next=3;break}return F.abrupt("return");case 3:return F.abrupt("return",this._micProducer.getStats());case 4:case"end":return F.stop()}},X,this)})),function(){return $r.apply(this,arguments)})},{key:"getVideoLocalStats",value:(mr=(0,h.A)(s().mark(function X(){var F;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Pe.debug("getVideoLocalStats()"),F=this._webcamProducer||this._shareProducer){U.next=4;break}return U.abrupt("return");case 4:return U.abrupt("return",F.getStats());case 5:case"end":return U.stop()}},X,this)})),function(){return mr.apply(this,arguments)})},{key:"getConsumerLocalStats",value:(Yt=(0,h.A)(s().mark(function X(F){var U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(U=this._consumers.get(F)){z.next=3;break}return z.abrupt("return");case 3:return z.abrupt("return",U.getStats());case 4:case"end":return z.stop()}},X,this)})),function(X){return Yt.apply(this,arguments)})},{key:"applyNetworkThrottle",value:(yr=(0,h.A)(s().mark(function X(F){var U,z,H,re;return s().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return U=F.uplink,z=F.downlink,H=F.rtt,re=F.secret,Pe.debug("applyNetworkThrottle() [uplink:%s, downlink:%s, rtt:%s]",U,z,H),se.prev=2,se.next=5,this._protoo.request("applyNetworkThrottle",{uplink:U,downlink:z,rtt:H,secret:re});case 5:se.next=11;break;case 7:se.prev=7,se.t0=se.catch(2),Pe.error("applyNetworkThrottle() | failed:%o",se.t0),ke.dispatch(Ae({type:"error",text:"Error applying network throttle: ".concat(se.t0)}));case 11:case"end":return se.stop()}},X,this,[[2,7]])})),function(X){return yr.apply(this,arguments)})},{key:"resetNetworkThrottle",value:(Rt=(0,h.A)(s().mark(function X(F){var U,z,H;return s().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return U=F.silent,z=U!==void 0&&U,H=F.secret,Pe.debug("resetNetworkThrottle()"),re.prev=2,re.next=5,this._protoo.request("resetNetworkThrottle",{secret:H});case 5:re.next=10;break;case 7:re.prev=7,re.t0=re.catch(2),z||(Pe.error("resetNetworkThrottle() | failed:%o",re.t0),ke.dispatch(Ae({type:"error",text:"Error resetting network throttle: ".concat(re.t0)})));case 10:case"end":return re.stop()}},X,this,[[2,7]])})),function(X){return Rt.apply(this,arguments)})},{key:"createProducerTransport",value:(Kt=(0,h.A)(s().mark(function X(F,U){var z,H,re,se,Ie,Re,wt,qe,yt=this;return s().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:re=F.id,se=F.iceParameters,Ie=F.iceCandidates,Re=F.dtlsParameters,wt=F.sctpParameters,qe=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"Creating Send Transport",span:U||null}),this._sendTransport=this._mediasoupDevice.createSendTransport({id:re,iceParameters:se,iceCandidates:Ie,dtlsParameters:Re,sctpParameters:wt,iceServers:this._iceServers}),this._sendTransport.on("connect",function(st,Je,lt){var ye,Ge=st.dtlsParameters;(ye=yt._openTelemetry)===null||ye===void 0||ye.traceAutoComplete({spanName:"this._sendTransport `connect` Event : Transport is about to establish the ICE+DTLS connection",span:qe,status:1}),yt._protoo.request("connectWebRtcTransport",{transportId:yt._sendTransport.id,dtlsParameters:Ge}).then(Je).catch(lt)}),this._sendTransport.on("produce",function(){var st=(0,h.A)(s().mark(function Je(lt,ye,Ge){var ir,er,ar,or,rr,pr,Gt;return s().wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:return ir=lt.kind,er=lt.rtpParameters,ar=lt.appData,Wt.prev=1,(or=yt._openTelemetry)===null||or===void 0||or.traceAutoComplete({spanName:"this._sendTransport `produce` Event : Transmit information about a new producer ",span:qe,status:1}),Wt.next=5,yt._protoo.request("produce",{transportId:yt._sendTransport.id,kind:ir,rtpParameters:er,appData:ar});case 5:rr=Wt.sent,pr=rr.id,ye({id:pr}),Wt.next=14;break;case 10:Wt.prev=10,Wt.t0=Wt.catch(1),(Gt=yt._videosdkLogs)===null||Gt===void 0||Gt.pushLogs({logText:'Error this._sendTransport "produce" Event catch',logType:"ERROR",attributes:{error:Wt.t0.message}}),Ge(Wt.t0);case 14:case"end":return Wt.stop()}},Je,null,[[1,10]])}));return function(Je,lt,ye){return st.apply(this,arguments)}}()),this._sendTransport.on("producedata",function(){var st=(0,h.A)(s().mark(function Je(lt,ye,Ge){var ir,er,ar,or,rr,pr,Gt;return s().wrap(function(Wt){for(;;)switch(Wt.prev=Wt.next){case 0:return ir=lt.sctpStreamParameters,er=lt.label,ar=lt.protocol,or=lt.appData,Pe.debug('"producedata" event: [sctpStreamParameters:%o, appData:%o]',ir,or),Wt.prev=2,Wt.next=5,yt._protoo.request("produceData",{transportId:yt._sendTransport.id,sctpStreamParameters:ir,label:er,protocol:ar,appData:or});case 5:rr=Wt.sent,pr=rr.id,ye({id:pr}),Wt.next=14;break;case 10:Wt.prev=10,Wt.t0=Wt.catch(2),(Gt=yt._videosdkLogs)===null||Gt===void 0||Gt.pushLogs({logText:"Error producedata event catch",logType:"ERROR",attributes:{error:Wt.t0.message}}),Ge(Wt.t0);case 14:case"end":return Wt.stop()}},Je,null,[[2,10]])}));return function(Je,lt,ye){return st.apply(this,arguments)}}()),this._sendTransport.on("connectionstatechange",function(st){var Je;(Je=yt._openTelemetry)===null||Je===void 0||Je.traceAutoComplete({spanName:"_sendTransport Event connectionstatechange ".concat(st),span:qe,status:1}),st==="failed"&&yt.restartIce(),yt._transportState=st}),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:qe,status:1,message:"Send Transport Created Successfully"});case 8:case"end":return ae.stop()}},X,this)})),function(X,F){return Kt.apply(this,arguments)})},{key:"createConsumerTransport",value:(Vt=(0,h.A)(s().mark(function X(F,U){var z,H,re,se,Ie,Re,wt,qe,yt,ae,st=this;return s().wrap(function(Je){for(;;)switch(Je.prev=Je.next){case 0:re=F.id,se=F.iceParameters,Ie=F.iceCandidates,Re=F.dtlsParameters,wt=F.sctpParameters,qe=(z=this._openTelemetry)===null||z===void 0?void 0:z.trace({spanName:"Creating Recieve Transport",span:U||null}),this._recvTransport=this._mediasoupDevice.createRecvTransport({id:re,iceParameters:se,iceCandidates:Ie,dtlsParameters:Re,sctpParameters:wt,iceServers:this._iceServers}),this._recvTransport.on("connect",function(lt,ye,Ge){var ir,er=lt.dtlsParameters;(ir=st._openTelemetry)===null||ir===void 0||ir.traceAutoComplete({spanName:"this._recvTransport `connect` Event : Recieve Transport is about to establish the ICE+DTLS connection",span:qe,status:1}),st._protoo.request("connectWebRtcTransport",{transportId:st._recvTransport.id,dtlsParameters:er}).then(ye).catch(Ge)}),this._recvTransport.on("connectionstatechange",function(lt){var ye;(ye=st._openTelemetry)===null||ye===void 0||ye.traceAutoComplete({spanName:"_recvTransport Event connectionstatechange ".concat(lt),span:qe,status:1}),lt==="failed"&&st.restartIce(),st._transportState=lt}),yt=0,(ae=this._metrics.addNewProbe(this._recvTransport,"transport")).onStatsCollected=function(lt){try{var ye=function(er,ar,or){st._stats.consumerStats||(st._stats.consumerStats={});var rr=ar.appData.peerId;st._stats.consumerStats[rr]||(st._stats.consumerStats[rr]={}),st._stats.consumerStats[rr][or]||(st._stats.consumerStats[rr][or]=[]),st._latestStats[ar.track.id.replace(/[{}]/g,"")]=[er],yt%5==0&&st._stats.consumerStats[rr][or].push(er)},Ge=function(er){lt[er].forEach(function(ar){var or,rr=nt(st._consumers);try{for(rr.s();!(or=rr.n()).done;){var pr=(0,E.A)(or.value,2),Gt=(pr[0],pr[1]);if(Gt.track.id.replace(/[{}]/g,"")===ar.trackId){var Wt=Gt.appData.share?Gt.kind==="audio"?"shareAudio":"share":Gt.kind;ye(ar,Gt,Wt)}}}catch(xr){rr.e(xr)}finally{rr.f()}})};Ge("audio"),Ge("video"),yt++}catch(er){var ir;(ir=st._videosdkLogs)===null||ir===void 0||ir.pushLogs({logText:"Error CONSUMER Stats ERROR",logType:"ERROR",attributes:{error:er.message}}),console.log("CONSUMER CATCH",er)}},ae.start(),this._recvTransport.observer.on("close",function(){ae.stop(),st._metrics.removeExistingProbe(ae)}),(H=this._openTelemetry)===null||H===void 0||H.completeSpan({span:qe,status:1,message:"Recieve Transport Created Successfully"});case 11:case"end":return Je.stop()}},X,this)})),function(X,F){return Vt.apply(this,arguments)})},{key:"joinRoom",value:(ct=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Re,wt,qe,yt,ae,st,Je,lt,ye,Ge,ir,er,ar,or,rr,pr,Gt,Wt,xr,tr;return s().wrap(function(ur){for(;;)switch(ur.prev=ur.next){case 0:return Pe.debug("joinRoom()"),ur.prev=1,Ie=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"Loading Router Capabilities",span:this._joinSpan}),this._mediasoupDevice=new S.Device({handlerName:this._handlerName}),ur.next=6,this._protoo.request("getRouterRtpCapabilities");case 6:return Re=ur.sent,this._deviceInfo.sdkType!="react-native"?navigator.userAgent.indexOf("Firefox")&&(Re.headerExtensions=(wt=Re.headerExtensions)===null||wt===void 0?void 0:wt.filter(function(Ar){return Ar.uri!="urn:3gpp:video-orientation"})):Re.headerExtensions=(qe=Re.headerExtensions)===null||qe===void 0?void 0:qe.filter(function(Ar){return Ar.uri!="urn:3gpp:video-orientation"}),ur.next=10,this._mediasoupDevice.load({routerRtpCapabilities:Re});case 10:if((U=this._openTelemetry)===null||U===void 0||U.completeSpan({span:Ie,status:1,attributes:{routerRtpCapabilities:JSON.stringify(Re).toString()},message:"Router Capabilities Loaded"}),!this._produce){ur.next=16;break}return ur.next=14,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!0,consuming:!1,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 14:yt=ur.sent,this.createProducerTransport(yt,this._joinSpan);case 16:if(!this._consume){ur.next=21;break}return ur.next=19,this._protoo.request("createWebRtcTransport",{preferredProtocol:this._preferredProtocol,producing:!1,consuming:!0,sctpCapabilities:this._useDataChannel?this._mediasoupDevice.sctpCapabilities:void 0});case 19:ae=ur.sent,this.createConsumerTransport(ae,this._joinSpan);case 21:return ur.next=23,this._protoo.request("join",{displayName:this._displayName,device:this._device,secret:this._secret,rtpCapabilities:(z=this._mediasoupDevice)===null||z===void 0?void 0:z.rtpCapabilities,sctpCapabilities:(H=this._mediasoupDevice)===null||H===void 0?void 0:H.sctpCapabilities,deviceInfo:this._deviceInfo,debugMode:this._debugMode,autoConsume:this._autoConsume,metaData:this._metaData});case 23:st=ur.sent,Je=st.peers,lt=st.poll,ye=st.messages,ke.dispatch(Z("connected")),(re=this._openTelemetry)===null||re===void 0||re.traceAutoComplete({spanName:"Emitted `MEETING_JOINED` Event",span:this._joinSpan,status:1}),this._eventEmitter.emit("MEETING_JOINED",{peers:Je,poll:lt,messages:ye,baseUrl:this._baseUrl}),ke.dispatch({type:"REMOVE_ALL_NOTIFICATIONS"}),ke.dispatch(Ae({text:"You are in the room!",timeout:3e3})),Ge=nt(Je);try{for(Ge.s();!(ir=Ge.n()).done;)er=ir.value,ar=Qt(Ht(Ht({},er),{},{consumers:[],dataConsumers:[]})),ke.dispatch(ar),this._eventEmitter.emit(ar.type,ar.payload)}catch(Ar){Ge.e(Ar)}finally{Ge.f()}this._produce&&(ke.dispatch(ge({canSendMic:this._mediasoupDevice.canProduce("audio"),canSendWebcam:this._mediasoupDevice.canProduce("video")})),this._micEnabled?this.enableMic(this.customMicrophoneAudioTrack,this._joinSpan):this.customMicrophoneAudioTrack&&((or=this._openTelemetry)===null||or===void 0||or.traceAutoComplete({spanName:"Disposing Audio Track",span:this._joinSpan,status:2}),this.customMicrophoneAudioTrack.getTracks().forEach(function(Ar){Ar.stop()})),rr=j(),this._webcamEnabled&&(!rr||rr.webcamEnabled||this._externalVideo)?this.enableWebcam(this.customCameraVideoTrack,this._joinSpan):this.customCameraVideoTrack&&((pr=this._openTelemetry)===null||pr===void 0||pr.traceAutoComplete({spanName:"Disposing Video Track",span:this._joinSpan,status:2}),this.customCameraVideoTrack.getTracks().forEach(function(Ar){Ar.stop()})),this.enableChatDataProducer()),window.SHOW_INFO&&(Gt=ke.getState(),Wt=Gt.me,ke.dispatch(de(Wt.id))),(se=this._openTelemetry)===null||se===void 0||se.completeSpan({span:this._joinSpan,status:1,message:"Room Joined"}),ur.next=46;break;case 39:ur.prev=39,ur.t0=ur.catch(1),Pe.error("joinRoom() failed:%o",ur.t0),(xr=this._videosdkLogs)===null||xr===void 0||xr.pushLogs({logText:"Error Could not join the room",logType:"ERROR",attributes:{error:ur.t0.message}}),(tr=this._openTelemetry)===null||tr===void 0||tr.completeSpan({span:this._joinSpan,status:2,message:"Could not join the room ".concat(ur.t0)}),ke.dispatch(Ae({type:"error",text:"Could not join the room: ".concat(ur.t0)})),this.close({sendLeft:!0});case 46:case"end":return ur.stop()}},X,this,[[1,39]])})),function(){return ct.apply(this,arguments)})},{key:"_updateMics",value:(qt=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Re,wt,qe,yt,ae,st,Je,lt,ye=arguments;return s().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return U=ye.length>0&&ye[0]!==void 0?ye[0]:void 0,this._mics=new Map,Pe.debug("_updateMics() |"),z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"_updateMics() Calling for Getting System Mic list",span:U||null}),Ge.prev=4,Ge.next=7,navigator.mediaDevices.enumerateDevices();case 7:se=Ge.sent,(H=this._openTelemetry)===null||H===void 0||H.traceAutoComplete({spanName:"Getting System Mic list",span:z,status:1,attributes:{systemDevice:se?JSON.stringify(se):"Device not found"}}),Ie=nt(se);try{for(Ie.s();!(Re=Ie.n()).done;)(wt=Re.value).kind=="audioinput"&&this._mics.set(wt.deviceId,wt)}catch(ir){Ie.e(ir)}finally{Ie.f()}qe=Array.from(this._mics.values()),yt=qe.length,ae=this._mic.device?this._mic.device.deviceId:void 0,yt===0?this._mic.device=null:this._mics.has(ae)||(this._mic.device=qe[0]),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:z,status:1,message:"Update Mic"}),Ge.next=30;break;case 18:if(Ge.prev=18,Ge.t0=Ge.catch(4),!(Ge.t0 instanceof TypeError)){Ge.next=30;break}if(Ge.t0.name!=="TypeError"){Ge.next=28;break}throw Je=Ue.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,this._emitError(Je),(st=this._openTelemetry)===null||st===void 0||st.completeSpan({span:z,status:2,message:"Error in updateMics() :: ".concat(Je.message)}),new Error(Je.message);case 28:throw(lt=this._openTelemetry)===null||lt===void 0||lt.completeSpan({span:z,status:2,message:"Error in updateMics() :: ".concat(Ge.t0.message)}),new Error(Ge.t0.message);case 30:case"end":return Ge.stop()}},X,this,[[4,18]])})),function(){return qt.apply(this,arguments)})},{key:"_updateWebcams",value:(pt=(0,h.A)(s().mark(function X(){var F,U,z,H,re,se,Ie,Re,wt,qe,yt,ae,st,Je,lt,ye=arguments;return s().wrap(function(Ge){for(;;)switch(Ge.prev=Ge.next){case 0:return U=ye.length>0&&ye[0]!==void 0?ye[0]:void 0,Pe.debug("_updateWebcams()"),this._webcams=new Map,Pe.debug("_updateWebcams() | calling enumerateDevices()"),z=(F=this._openTelemetry)===null||F===void 0?void 0:F.trace({spanName:"_updateWebcams() Calling for Getting System Webcam list",span:U||null}),Ge.prev=5,Ge.next=8,navigator.mediaDevices.enumerateDevices();case 8:se=Ge.sent,(H=this._openTelemetry)===null||H===void 0||H.traceAutoComplete({spanName:"Getting System Webcam list",span:z,status:1,attributes:{systemDevice:se?JSON.stringify(se):"Device not found"}}),Ie=nt(se),Ge.prev=11,Ie.s();case 13:if((Re=Ie.n()).done){Ge.next=20;break}if((wt=Re.value).kind==="videoinput"){Ge.next=17;break}return Ge.abrupt("continue",18);case 17:this._webcams.set(wt.deviceId,wt);case 18:Ge.next=13;break;case 20:Ge.next=25;break;case 22:Ge.prev=22,Ge.t0=Ge.catch(11),Ie.e(Ge.t0);case 25:return Ge.prev=25,Ie.f(),Ge.finish(25);case 28:qe=Array.from(this._webcams.values()),yt=qe.length,(ae=this._webcam.device?this._webcam.device.deviceId:void 0)&&(this._defaultCameraIndex=ae),Pe.debug("_updateWebcams() [webcams:%o]",qe),yt===0?this._webcam.device=null:this._webcams.has(ae)||(this._webcam.device=qe[this._defaultCameraIndex]),(re=this._openTelemetry)===null||re===void 0||re.completeSpan({span:z,status:1,message:"Update Webcam"}),ke.dispatch({type:"SET_CAN_CHANGE_WEBCAM",payload:this._webcams.size>1}),Ge.next=50;break;case 38:if(Ge.prev=38,Ge.t1=Ge.catch(5),!(Ge.t1 instanceof TypeError)){Ge.next=50;break}if(Ge.t1.name!=="TypeError"){Ge.next=48;break}throw Je=Ue.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,this._emitError(Je),(st=this._openTelemetry)===null||st===void 0||st.completeSpan({span:z,status:2,message:"Error in updateWebcams() :: ".concat(Je.message)}),new Error(Je.message);case 48:throw(lt=this._openTelemetry)===null||lt===void 0||lt.completeSpan({span:z,status:2,message:"Error in updateWebcams() :: ".concat(Ge.t1.message)}),new Error(Ge.t1.message);case 50:case"end":return Ge.stop()}},X,this,[[5,38],[11,22,25,28]])})),function(){return pt.apply(this,arguments)})},{key:"_getWebcamType",value:function(X){return/(back|rear)/i.test(X.label)?(Pe.debug("_getWebcamType() | it seems to be a back camera"),"back"):(Pe.debug("_getWebcamType() | it seems to be a front camera"),"front")}},{key:"_pauseConsumer",value:(He=(0,h.A)(s().mark(function X(F){var U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(!F.paused){z.next=2;break}return z.abrupt("return");case 2:return z.prev=2,z.next=5,this._protoo.request("pauseConsumer",{consumerId:F.id});case 5:F.pause(),ke.dispatch(Mr(F.id,"local")),z.next=14;break;case 9:z.prev=9,z.t0=z.catch(2),Pe.error("_pauseConsumer() | failed:%o",z.t0),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error pausing Consumer",logType:"ERROR",attributes:{error:z.t0.message}}),ke.dispatch(Ae({type:"error",text:"Error pausing Consumer: ".concat(z.t0)}));case 14:case"end":return z.stop()}},X,this,[[2,9]])})),function(X){return He.apply(this,arguments)})},{key:"_resumeConsumer",value:(Fe=(0,h.A)(s().mark(function X(F){var U;return s().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:if(F.paused){z.next=2;break}return z.abrupt("return");case 2:return z.prev=2,z.next=5,this._protoo.request("resumeConsumer",{consumerId:F.id});case 5:F.resume(),ke.dispatch(Br(F.id,"local")),z.next=14;break;case 9:z.prev=9,z.t0=z.catch(2),Pe.error("_resumeConsumer() | failed:%o",z.t0),(U=this._videosdkLogs)===null||U===void 0||U.pushLogs({logText:"Error resuming Consumer",logType:"ERROR",attributes:{error:z.t0.message}}),ke.dispatch(Ae({type:"error",text:"Error resuming Consumer: ".concat(z.t0)}));case 14:case"end":return z.stop()}},X,this,[[2,9]])})),function(X){return Fe.apply(this,arguments)})},{key:"_getExternalVideoStream",value:(Se=(0,h.A)(s().mark(function X(){var F=this;return s().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(!this._externalVideoStream){U.next=2;break}return U.abrupt("return",this._externalVideoStream);case 2:if(!(this._externalVideo.readyState<3)){U.next=5;break}return U.next=5,new Promise(function(z){return F._externalVideo.addEventListener("canplay",z)});case 5:if(!this._externalVideo.captureStream){U.next=9;break}this._externalVideoStream=this._externalVideo.captureStream(),U.next=14;break;case 9:if(!this._externalVideo.mozCaptureStream){U.next=13;break}this._externalVideoStream=this._externalVideo.mozCaptureStream(),U.next=14;break;case 13:throw new Error("video.captureStream() not supported");case 14:return U.abrupt("return",this._externalVideoStream);case 15:case"end":return U.stop()}},X,this)})),function(){return Se.apply(this,arguments)})},{key:"_emitError",value:function(X){this._eventEmitter.emit("ERROR",X)}}],[{key:"init",value:function(X){ke=X.store}}]);var Se,Fe,He,pt,qt,ct,Vt,Kt,Rt,yr,Yt,mr,$r,tn,_n,kn,fi,Yn,xi,Oi,es,Es,$i,ks,Xs,$a,qa,Ka,Ga,Ja,Qa,Ya,Xa,Za,eo,to,ro,no,io,so,Ca,Pa,Cs,Ta,Dt,Y,it,vt,Xn,Cn,zs,xa,No,Tl,ao,wc,bc,xl,wi,hd,jo,fd,Ol,md,gd,vd,yd,_d,Zs,Dl,ds,Di,wd,Ii,lr,Bo,un,Sc,ea,Dr,Fo,Il,Rc,Ec,Nn,Mi,ta,Ml,kc,Al,he,Ft,Ll,nr,Nl,Ut,Zn,Uo,jl,Bl,bd,Sd,Rd,Ed,kd,Cd}()},4973:(C,p,o)=>{o.d(p,{Zu:()=>k,lp:()=>w});var E=o(467),_=o(4756),h=o.n(_),w=(o(9027),function(){var f=(0,E.A)(h().mark(function g(s){return h().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(S){var T=navigator.webkitGetUserMedia||navigator.mozGetUserMedia;return T?new Promise(function(x,O){T.call(navigator,S,x,O)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}),b.next=4,navigator.mediaDevices.getUserMedia(s);case 4:return b.abrupt("return",b.sent);case 5:case"end":return b.stop()}},g)}));return function(g){return f.apply(this,arguments)}}()),k=function(){var f=(0,E.A)(h().mark(function g(s){return h().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:return navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getDisplayMedia===void 0&&(navigator.mediaDevices.getDisplayMedia=function(S){var T=navigator.webkitGetDisplayMedia||navigator.mozGetDisplayMedia;return T?new Promise(function(x,O){T.call(navigator,S,x,O)}):Promise.reject(new Error("getDisplayMedia is not implemented in this browser"))}),b.next=4,navigator.mediaDevices.getDisplayMedia(s);case 4:return b.abrupt("return",b.sent);case 5:case"end":return b.stop()}},g)}));return function(g){return f.apply(this,arguments)}}()},6880:function(C){C.exports=function(p){var o={};function E(_){if(o[_])return o[_].exports;var h=o[_]={i:_,l:!1,exports:{}};return p[_].call(h.exports,h,h.exports,E),h.l=!0,h.exports}return E.m=p,E.c=o,E.d=function(_,h,w){E.o(_,h)||Object.defineProperty(_,h,{enumerable:!0,get:w})},E.r=function(_){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(_,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(_,"__esModule",{value:!0})},E.t=function(_,h){if(1&h&&(_=E(_)),8&h||4&h&&typeof _=="object"&&_&&_.__esModule)return _;var w=Object.create(null);if(E.r(w),Object.defineProperty(w,"default",{enumerable:!0,value:_}),2&h&&typeof _!="string")for(var k in _)E.d(w,k,(function(f){return _[f]}).bind(null,k));return w},E.n=function(_){var h=_&&_.__esModule?function(){return _.default}:function(){return _};return E.d(h,"a",h),h},E.o=function(_,h){return Object.prototype.hasOwnProperty.call(_,h)},E.p="",E(E.s=90)}({17:function(p,o,E){o.__esModule=!0,o.default=void 0;var _=E(18),h=function(){function w(){}return w.getFirstMatch=function(k,f){var g=f.match(k);return g&&g.length>0&&g[1]||""},w.getSecondMatch=function(k,f){var g=f.match(k);return g&&g.length>1&&g[2]||""},w.matchAndReturnConst=function(k,f,g){if(k.test(f))return g},w.getWindowsVersionName=function(k){switch(k){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},w.getMacOSVersionName=function(k){var f=k.split(".").splice(0,2).map(function(g){return parseInt(g,10)||0});if(f.push(0),f[0]===10)switch(f[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},w.getAndroidVersionName=function(k){var f=k.split(".").splice(0,2).map(function(g){return parseInt(g,10)||0});if(f.push(0),!(f[0]===1&&f[1]<5))return f[0]===1&&f[1]<6?"Cupcake":f[0]===1&&f[1]>=6?"Donut":f[0]===2&&f[1]<2?"Eclair":f[0]===2&&f[1]===2?"Froyo":f[0]===2&&f[1]>2?"Gingerbread":f[0]===3?"Honeycomb":f[0]===4&&f[1]<1?"Ice Cream Sandwich":f[0]===4&&f[1]<4?"Jelly Bean":f[0]===4&&f[1]>=4?"KitKat":f[0]===5?"Lollipop":f[0]===6?"Marshmallow":f[0]===7?"Nougat":f[0]===8?"Oreo":f[0]===9?"Pie":void 0},w.getVersionPrecision=function(k){return k.split(".").length},w.compareVersions=function(k,f,g){g===void 0&&(g=!1);var s=w.getVersionPrecision(k),b=w.getVersionPrecision(f),S=Math.max(s,b),T=0,x=w.map([k,f],function(O){var P=S-w.getVersionPrecision(O),R=O+new Array(P+1).join(".0");return w.map(R.split("."),function(I){return new Array(20-I.length).join("0")+I}).reverse()});for(g&&(T=S-Math.min(s,b)),S-=1;S>=T;){if(x[0][S]>x[1][S])return 1;if(x[0][S]===x[1][S]){if(S===T)return 0;S-=1}else if(x[0][S]<x[1][S])return-1}},w.map=function(k,f){var g,s=[];if(Array.prototype.map)return Array.prototype.map.call(k,f);for(g=0;g<k.length;g+=1)s.push(f(k[g]));return s},w.find=function(k,f){var g,s;if(Array.prototype.find)return Array.prototype.find.call(k,f);for(g=0,s=k.length;g<s;g+=1){var b=k[g];if(f(b,g))return b}},w.assign=function(k){for(var f,g,s=k,b=arguments.length,S=new Array(b>1?b-1:0),T=1;T<b;T++)S[T-1]=arguments[T];if(Object.assign)return Object.assign.apply(Object,[k].concat(S));var x=function(){var O=S[f];typeof O=="object"&&O!==null&&Object.keys(O).forEach(function(P){s[P]=O[P]})};for(f=0,g=S.length;f<g;f+=1)x();return k},w.getBrowserAlias=function(k){return _.BROWSER_ALIASES_MAP[k]},w.getBrowserTypeByAlias=function(k){return _.BROWSER_MAP[k]||""},w}();o.default=h,p.exports=o.default},18:function(p,o,E){o.__esModule=!0,o.ENGINE_MAP=o.OS_MAP=o.PLATFORMS_MAP=o.BROWSER_MAP=o.BROWSER_ALIASES_MAP=void 0,o.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},o.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},o.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},o.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},o.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(p,o,E){o.__esModule=!0,o.default=void 0;var _,h=(_=E(91))&&_.__esModule?_:{default:_},w=E(18);function k(g,s){for(var b=0;b<s.length;b++){var S=s[b];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(g,S.key,S)}}var f=function(){function g(){}var s,b,S;return g.getParser=function(T,x){if(x===void 0&&(x=!1),typeof T!="string")throw new Error("UserAgent should be a string");return new h.default(T,x)},g.parse=function(T){return new h.default(T).getResult()},s=g,S=[{key:"BROWSER_MAP",get:function(){return w.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return w.ENGINE_MAP}},{key:"OS_MAP",get:function(){return w.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return w.PLATFORMS_MAP}}],(b=null)&&k(s.prototype,b),S&&k(s,S),g}();o.default=f,p.exports=o.default},91:function(p,o,E){o.__esModule=!0,o.default=void 0;var _=g(E(92)),h=g(E(93)),w=g(E(94)),k=g(E(95)),f=g(E(17));function g(b){return b&&b.__esModule?b:{default:b}}var s=function(){function b(T,x){if(x===void 0&&(x=!1),T==null||T==="")throw new Error("UserAgent parameter can't be empty");this._ua=T,this.parsedResult={},x!==!0&&this.parse()}var S=b.prototype;return S.getUA=function(){return this._ua},S.test=function(T){return T.test(this._ua)},S.parseBrowser=function(){var T=this;this.parsedResult.browser={};var x=f.default.find(_.default,function(O){if(typeof O.test=="function")return O.test(T);if(O.test instanceof Array)return O.test.some(function(P){return T.test(P)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.browser=x.describe(this.getUA())),this.parsedResult.browser},S.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},S.getBrowserName=function(T){return T?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},S.getBrowserVersion=function(){return this.getBrowser().version},S.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},S.parseOS=function(){var T=this;this.parsedResult.os={};var x=f.default.find(h.default,function(O){if(typeof O.test=="function")return O.test(T);if(O.test instanceof Array)return O.test.some(function(P){return T.test(P)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.os=x.describe(this.getUA())),this.parsedResult.os},S.getOSName=function(T){var x=this.getOS().name;return T?String(x).toLowerCase()||"":x||""},S.getOSVersion=function(){return this.getOS().version},S.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},S.getPlatformType=function(T){T===void 0&&(T=!1);var x=this.getPlatform().type;return T?String(x).toLowerCase()||"":x||""},S.parsePlatform=function(){var T=this;this.parsedResult.platform={};var x=f.default.find(w.default,function(O){if(typeof O.test=="function")return O.test(T);if(O.test instanceof Array)return O.test.some(function(P){return T.test(P)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.platform=x.describe(this.getUA())),this.parsedResult.platform},S.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},S.getEngineName=function(T){return T?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},S.parseEngine=function(){var T=this;this.parsedResult.engine={};var x=f.default.find(k.default,function(O){if(typeof O.test=="function")return O.test(T);if(O.test instanceof Array)return O.test.some(function(P){return T.test(P)});throw new Error("Browser's test function is not valid")});return x&&(this.parsedResult.engine=x.describe(this.getUA())),this.parsedResult.engine},S.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},S.getResult=function(){return f.default.assign({},this.parsedResult)},S.satisfies=function(T){var x=this,O={},P=0,R={},I=0;if(Object.keys(T).forEach(function(N){var L=T[N];typeof L=="string"?(R[N]=L,I+=1):typeof L=="object"&&(O[N]=L,P+=1)}),P>0){var d=Object.keys(O),v=f.default.find(d,function(N){return x.isOS(N)});if(v){var c=this.satisfies(O[v]);if(c!==void 0)return c}var u=f.default.find(d,function(N){return x.isPlatform(N)});if(u){var l=this.satisfies(O[u]);if(l!==void 0)return l}}if(I>0){var m=Object.keys(R),D=f.default.find(m,function(N){return x.isBrowser(N,!0)});if(D!==void 0)return this.compareVersion(R[D])}},S.isBrowser=function(T,x){x===void 0&&(x=!1);var O=this.getBrowserName().toLowerCase(),P=T.toLowerCase(),R=f.default.getBrowserTypeByAlias(P);return x&&R&&(P=R.toLowerCase()),P===O},S.compareVersion=function(T){var x=[0],O=T,P=!1,R=this.getBrowserVersion();if(typeof R=="string")return T[0]===">"||T[0]==="<"?(O=T.substr(1),T[1]==="="?(P=!0,O=T.substr(2)):x=[],T[0]===">"?x.push(1):x.push(-1)):T[0]==="="?O=T.substr(1):T[0]==="~"&&(P=!0,O=T.substr(1)),x.indexOf(f.default.compareVersions(R,O,P))>-1},S.isOS=function(T){return this.getOSName(!0)===String(T).toLowerCase()},S.isPlatform=function(T){return this.getPlatformType(!0)===String(T).toLowerCase()},S.isEngine=function(T){return this.getEngineName(!0)===String(T).toLowerCase()},S.is=function(T,x){return x===void 0&&(x=!1),this.isBrowser(T,x)||this.isOS(T)||this.isPlatform(T)},S.some=function(T){var x=this;return T===void 0&&(T=[]),T.some(function(O){return x.is(O)})},b}();o.default=s,p.exports=o.default},92:function(p,o,E){o.__esModule=!0,o.default=void 0;var _,h=(_=E(17))&&_.__esModule?_:{default:_},w=/version\/(\d+(\.?_?\d+)+)/i,k=[{test:[/googlebot/i],describe:function(f){var g={name:"Googlebot"},s=h.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,f)||h.default.getFirstMatch(w,f);return s&&(g.version=s),g}},{test:[/opera/i],describe:function(f){var g={name:"Opera"},s=h.default.getFirstMatch(w,f)||h.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/opr\/|opios/i],describe:function(f){var g={name:"Opera"},s=h.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,f)||h.default.getFirstMatch(w,f);return s&&(g.version=s),g}},{test:[/SamsungBrowser/i],describe:function(f){var g={name:"Samsung Internet for Android"},s=h.default.getFirstMatch(w,f)||h.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/Whale/i],describe:function(f){var g={name:"NAVER Whale Browser"},s=h.default.getFirstMatch(w,f)||h.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/MZBrowser/i],describe:function(f){var g={name:"MZ Browser"},s=h.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,f)||h.default.getFirstMatch(w,f);return s&&(g.version=s),g}},{test:[/focus/i],describe:function(f){var g={name:"Focus"},s=h.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,f)||h.default.getFirstMatch(w,f);return s&&(g.version=s),g}},{test:[/swing/i],describe:function(f){var g={name:"Swing"},s=h.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,f)||h.default.getFirstMatch(w,f);return s&&(g.version=s),g}},{test:[/coast/i],describe:function(f){var g={name:"Opera Coast"},s=h.default.getFirstMatch(w,f)||h.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(f){var g={name:"Opera Touch"},s=h.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,f)||h.default.getFirstMatch(w,f);return s&&(g.version=s),g}},{test:[/yabrowser/i],describe:function(f){var g={name:"Yandex Browser"},s=h.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,f)||h.default.getFirstMatch(w,f);return s&&(g.version=s),g}},{test:[/ucbrowser/i],describe:function(f){var g={name:"UC Browser"},s=h.default.getFirstMatch(w,f)||h.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/Maxthon|mxios/i],describe:function(f){var g={name:"Maxthon"},s=h.default.getFirstMatch(w,f)||h.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/epiphany/i],describe:function(f){var g={name:"Epiphany"},s=h.default.getFirstMatch(w,f)||h.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/puffin/i],describe:function(f){var g={name:"Puffin"},s=h.default.getFirstMatch(w,f)||h.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/sleipnir/i],describe:function(f){var g={name:"Sleipnir"},s=h.default.getFirstMatch(w,f)||h.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/k-meleon/i],describe:function(f){var g={name:"K-Meleon"},s=h.default.getFirstMatch(w,f)||h.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/micromessenger/i],describe:function(f){var g={name:"WeChat"},s=h.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,f)||h.default.getFirstMatch(w,f);return s&&(g.version=s),g}},{test:[/qqbrowser/i],describe:function(f){var g={name:/qqbrowserlite/i.test(f)?"QQ Browser Lite":"QQ Browser"},s=h.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,f)||h.default.getFirstMatch(w,f);return s&&(g.version=s),g}},{test:[/msie|trident/i],describe:function(f){var g={name:"Internet Explorer"},s=h.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/\sedg\//i],describe:function(f){var g={name:"Microsoft Edge"},s=h.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/edg([ea]|ios)/i],describe:function(f){var g={name:"Microsoft Edge"},s=h.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/vivaldi/i],describe:function(f){var g={name:"Vivaldi"},s=h.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/seamonkey/i],describe:function(f){var g={name:"SeaMonkey"},s=h.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/sailfish/i],describe:function(f){var g={name:"Sailfish"},s=h.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,f);return s&&(g.version=s),g}},{test:[/silk/i],describe:function(f){var g={name:"Amazon Silk"},s=h.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/phantom/i],describe:function(f){var g={name:"PhantomJS"},s=h.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/slimerjs/i],describe:function(f){var g={name:"SlimerJS"},s=h.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(f){var g={name:"BlackBerry"},s=h.default.getFirstMatch(w,f)||h.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/(web|hpw)[o0]s/i],describe:function(f){var g={name:"WebOS Browser"},s=h.default.getFirstMatch(w,f)||h.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/bada/i],describe:function(f){var g={name:"Bada"},s=h.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/tizen/i],describe:function(f){var g={name:"Tizen"},s=h.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,f)||h.default.getFirstMatch(w,f);return s&&(g.version=s),g}},{test:[/qupzilla/i],describe:function(f){var g={name:"QupZilla"},s=h.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,f)||h.default.getFirstMatch(w,f);return s&&(g.version=s),g}},{test:[/firefox|iceweasel|fxios/i],describe:function(f){var g={name:"Firefox"},s=h.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/electron/i],describe:function(f){var g={name:"Electron"},s=h.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/MiuiBrowser/i],describe:function(f){var g={name:"Miui"},s=h.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/chromium/i],describe:function(f){var g={name:"Chromium"},s=h.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,f)||h.default.getFirstMatch(w,f);return s&&(g.version=s),g}},{test:[/chrome|crios|crmo/i],describe:function(f){var g={name:"Chrome"},s=h.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/GSA/i],describe:function(f){var g={name:"Google Search"},s=h.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:function(f){var g=!f.test(/like android/i),s=f.test(/android/i);return g&&s},describe:function(f){var g={name:"Android Browser"},s=h.default.getFirstMatch(w,f);return s&&(g.version=s),g}},{test:[/playstation 4/i],describe:function(f){var g={name:"PlayStation 4"},s=h.default.getFirstMatch(w,f);return s&&(g.version=s),g}},{test:[/safari|applewebkit/i],describe:function(f){var g={name:"Safari"},s=h.default.getFirstMatch(w,f);return s&&(g.version=s),g}},{test:[/.*/i],describe:function(f){var g=f.search("\\(")!==-1?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:h.default.getFirstMatch(g,f),version:h.default.getSecondMatch(g,f)}}}];o.default=k,p.exports=o.default},93:function(p,o,E){o.__esModule=!0,o.default=void 0;var _,h=(_=E(17))&&_.__esModule?_:{default:_},w=E(18),k=[{test:[/Roku\/DVP/],describe:function(f){var g=h.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,f);return{name:w.OS_MAP.Roku,version:g}}},{test:[/windows phone/i],describe:function(f){var g=h.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,f);return{name:w.OS_MAP.WindowsPhone,version:g}}},{test:[/windows /i],describe:function(f){var g=h.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,f),s=h.default.getWindowsVersionName(g);return{name:w.OS_MAP.Windows,version:g,versionName:s}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(f){var g={name:w.OS_MAP.iOS},s=h.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,f);return s&&(g.version=s),g}},{test:[/macintosh/i],describe:function(f){var g=h.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,f).replace(/[_\s]/g,"."),s=h.default.getMacOSVersionName(g),b={name:w.OS_MAP.MacOS,version:g};return s&&(b.versionName=s),b}},{test:[/(ipod|iphone|ipad)/i],describe:function(f){var g=h.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,f).replace(/[_\s]/g,".");return{name:w.OS_MAP.iOS,version:g}}},{test:function(f){var g=!f.test(/like android/i),s=f.test(/android/i);return g&&s},describe:function(f){var g=h.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,f),s=h.default.getAndroidVersionName(g),b={name:w.OS_MAP.Android,version:g};return s&&(b.versionName=s),b}},{test:[/(web|hpw)[o0]s/i],describe:function(f){var g=h.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,f),s={name:w.OS_MAP.WebOS};return g&&g.length&&(s.version=g),s}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(f){var g=h.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,f)||h.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,f)||h.default.getFirstMatch(/\bbb(\d+)/i,f);return{name:w.OS_MAP.BlackBerry,version:g}}},{test:[/bada/i],describe:function(f){var g=h.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,f);return{name:w.OS_MAP.Bada,version:g}}},{test:[/tizen/i],describe:function(f){var g=h.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,f);return{name:w.OS_MAP.Tizen,version:g}}},{test:[/linux/i],describe:function(){return{name:w.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:w.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(f){var g=h.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,f);return{name:w.OS_MAP.PlayStation4,version:g}}}];o.default=k,p.exports=o.default},94:function(p,o,E){o.__esModule=!0,o.default=void 0;var _,h=(_=E(17))&&_.__esModule?_:{default:_},w=E(18),k=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(f){var g=h.default.getFirstMatch(/(can-l01)/i,f)&&"Nova",s={type:w.PLATFORMS_MAP.mobile,vendor:"Huawei"};return g&&(s.model=g),s}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:w.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:w.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:w.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:w.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:w.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:w.PLATFORMS_MAP.tablet}}},{test:function(f){var g=f.test(/ipod|iphone/i),s=f.test(/like (ipod|iphone)/i);return g&&!s},describe:function(f){var g=h.default.getFirstMatch(/(ipod|iphone)/i,f);return{type:w.PLATFORMS_MAP.mobile,vendor:"Apple",model:g}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:w.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:w.PLATFORMS_MAP.mobile}}},{test:function(f){return f.getBrowserName(!0)==="blackberry"},describe:function(){return{type:w.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(f){return f.getBrowserName(!0)==="bada"},describe:function(){return{type:w.PLATFORMS_MAP.mobile}}},{test:function(f){return f.getBrowserName()==="windows phone"},describe:function(){return{type:w.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(f){var g=Number(String(f.getOSVersion()).split(".")[0]);return f.getOSName(!0)==="android"&&g>=3},describe:function(){return{type:w.PLATFORMS_MAP.tablet}}},{test:function(f){return f.getOSName(!0)==="android"},describe:function(){return{type:w.PLATFORMS_MAP.mobile}}},{test:function(f){return f.getOSName(!0)==="macos"},describe:function(){return{type:w.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(f){return f.getOSName(!0)==="windows"},describe:function(){return{type:w.PLATFORMS_MAP.desktop}}},{test:function(f){return f.getOSName(!0)==="linux"},describe:function(){return{type:w.PLATFORMS_MAP.desktop}}},{test:function(f){return f.getOSName(!0)==="playstation 4"},describe:function(){return{type:w.PLATFORMS_MAP.tv}}},{test:function(f){return f.getOSName(!0)==="roku"},describe:function(){return{type:w.PLATFORMS_MAP.tv}}}];o.default=k,p.exports=o.default},95:function(p,o,E){o.__esModule=!0,o.default=void 0;var _,h=(_=E(17))&&_.__esModule?_:{default:_},w=E(18),k=[{test:function(f){return f.getBrowserName(!0)==="microsoft edge"},describe:function(f){if(/\sedg\//i.test(f))return{name:w.ENGINE_MAP.Blink};var g=h.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,f);return{name:w.ENGINE_MAP.EdgeHTML,version:g}}},{test:[/trident/i],describe:function(f){var g={name:w.ENGINE_MAP.Trident},s=h.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:function(f){return f.test(/presto/i)},describe:function(f){var g={name:w.ENGINE_MAP.Presto},s=h.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:function(f){var g=f.test(/gecko/i),s=f.test(/like gecko/i);return g&&!s},describe:function(f){var g={name:w.ENGINE_MAP.Gecko},s=h.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:w.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(f){var g={name:w.ENGINE_MAP.WebKit},s=h.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,f);return s&&(g.version=s),g}}];o.default=k,p.exports=o.default}})},955:function(C,p,o){var E;C.exports=(E=o(9021),o(754),o(4636),o(9506),o(7165),function(){var _=E,h=_.lib.BlockCipher,w=_.algo,k=[],f=[],g=[],s=[],b=[],S=[],T=[],x=[],O=[],P=[];(function(){for(var d=[],v=0;v<256;v++)d[v]=v<128?v<<1:v<<1^283;var c=0,u=0;for(v=0;v<256;v++){var l=u^u<<1^u<<2^u<<3^u<<4;l=l>>>8^255&l^99,k[c]=l,f[l]=c;var m=d[c],D=d[m],N=d[D],L=257*d[l]^16843008*l;g[c]=L<<24|L>>>8,s[c]=L<<16|L>>>16,b[c]=L<<8|L>>>24,S[c]=L,L=16843009*N^65537*D^257*m^16843008*c,T[l]=L<<24|L>>>8,x[l]=L<<16|L>>>16,O[l]=L<<8|L>>>24,P[l]=L,c?(c=m^d[d[d[N^m]]],u^=d[d[u]]):c=u=1}})();var R=[0,1,2,4,8,16,32,64,128,27,54],I=w.AES=h.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var d=this._keyPriorReset=this._key,v=d.words,c=d.sigBytes/4,u=4*((this._nRounds=c+6)+1),l=this._keySchedule=[],m=0;m<u;m++)m<c?l[m]=v[m]:(L=l[m-1],m%c?c>6&&m%c==4&&(L=k[L>>>24]<<24|k[L>>>16&255]<<16|k[L>>>8&255]<<8|k[255&L]):(L=k[(L=L<<8|L>>>24)>>>24]<<24|k[L>>>16&255]<<16|k[L>>>8&255]<<8|k[255&L],L^=R[m/c|0]<<24),l[m]=l[m-c]^L);for(var D=this._invKeySchedule=[],N=0;N<u;N++){if(m=u-N,N%4)var L=l[m];else L=l[m-4];D[N]=N<4||m<=4?L:T[k[L>>>24]]^x[k[L>>>16&255]]^O[k[L>>>8&255]]^P[k[255&L]]}}},encryptBlock:function(d,v){this._doCryptBlock(d,v,this._keySchedule,g,s,b,S,k)},decryptBlock:function(d,v){var c=d[v+1];d[v+1]=d[v+3],d[v+3]=c,this._doCryptBlock(d,v,this._invKeySchedule,T,x,O,P,f),c=d[v+1],d[v+1]=d[v+3],d[v+3]=c},_doCryptBlock:function(d,v,c,u,l,m,D,N){for(var L=this._nRounds,j=d[v]^c[0],W=d[v+1]^c[1],$=d[v+2]^c[2],Z=d[v+3]^c[3],ne=4,de=1;de<L;de++){var ge=u[j>>>24]^l[W>>>16&255]^m[$>>>8&255]^D[255&Z]^c[ne++],_e=u[W>>>24]^l[$>>>16&255]^m[Z>>>8&255]^D[255&j]^c[ne++],Me=u[$>>>24]^l[Z>>>16&255]^m[j>>>8&255]^D[255&W]^c[ne++],fe=u[Z>>>24]^l[j>>>16&255]^m[W>>>8&255]^D[255&$]^c[ne++];j=ge,W=_e,$=Me,Z=fe}ge=(N[j>>>24]<<24|N[W>>>16&255]<<16|N[$>>>8&255]<<8|N[255&Z])^c[ne++],_e=(N[W>>>24]<<24|N[$>>>16&255]<<16|N[Z>>>8&255]<<8|N[255&j])^c[ne++],Me=(N[$>>>24]<<24|N[Z>>>16&255]<<16|N[j>>>8&255]<<8|N[255&W])^c[ne++],fe=(N[Z>>>24]<<24|N[j>>>16&255]<<16|N[W>>>8&255]<<8|N[255&$])^c[ne++],d[v]=ge,d[v+1]=_e,d[v+2]=Me,d[v+3]=fe},keySize:8});_.AES=h._createHelper(I)}(),E.AES)},3128:function(C,p,o){var E;C.exports=(E=o(9021),o(754),o(4636),o(9506),o(7165),function(){var _=E,h=_.lib.BlockCipher,w=_.algo;const k=16,f=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],g=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var s={pbox:[],sbox:[]};function b(P,R){let I=R>>24&255,d=R>>16&255,v=R>>8&255,c=255&R,u=P.sbox[0][I]+P.sbox[1][d];return u^=P.sbox[2][v],u+=P.sbox[3][c],u}function S(P,R,I){let d,v=R,c=I;for(let u=0;u<k;++u)v^=P.pbox[u],c=b(P,v)^c,d=v,v=c,c=d;return d=v,v=c,c=d,c^=P.pbox[k],v^=P.pbox[k+1],{left:v,right:c}}function T(P,R,I){let d,v=R,c=I;for(let u=k+1;u>1;--u)v^=P.pbox[u],c=b(P,v)^c,d=v,v=c,c=d;return d=v,v=c,c=d,c^=P.pbox[1],v^=P.pbox[0],{left:v,right:c}}function x(P,R,I){for(let l=0;l<4;l++){P.sbox[l]=[];for(let m=0;m<256;m++)P.sbox[l][m]=g[l][m]}let d=0;for(let l=0;l<k+2;l++)P.pbox[l]=f[l]^R[d],d++,d>=I&&(d=0);let v=0,c=0,u=0;for(let l=0;l<k+2;l+=2)u=S(P,v,c),v=u.left,c=u.right,P.pbox[l]=v,P.pbox[l+1]=c;for(let l=0;l<4;l++)for(let m=0;m<256;m+=2)u=S(P,v,c),v=u.left,c=u.right,P.sbox[l][m]=v,P.sbox[l][m+1]=c;return!0}var O=w.Blowfish=h.extend({_doReset:function(){if(this._keyPriorReset!==this._key){var P=this._keyPriorReset=this._key,R=P.words,I=P.sigBytes/4;x(s,R,I)}},encryptBlock:function(P,R){var I=S(s,P[R],P[R+1]);P[R]=I.left,P[R+1]=I.right},decryptBlock:function(P,R){var I=T(s,P[R],P[R+1]);P[R]=I.left,P[R+1]=I.right},blockSize:2,keySize:4,ivSize:2});_.Blowfish=h._createHelper(O)}(),E.Blowfish)},7165:function(C,p,o){var E;C.exports=(E=o(9021),o(9506),void(E.lib.Cipher||function(_){var h=E,w=h.lib,k=w.Base,f=w.WordArray,g=w.BufferedBlockAlgorithm,s=h.enc,b=(s.Utf8,s.Base64),S=h.algo.EvpKDF,T=w.Cipher=g.extend({cfg:k.extend(),createEncryptor:function(l,m){return this.create(this._ENC_XFORM_MODE,l,m)},createDecryptor:function(l,m){return this.create(this._DEC_XFORM_MODE,l,m)},init:function(l,m,D){this.cfg=this.cfg.extend(D),this._xformMode=l,this._key=m,this.reset()},reset:function(){g.reset.call(this),this._doReset()},process:function(l){return this._append(l),this._process()},finalize:function(l){return l&&this._append(l),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function l(m){return typeof m=="string"?u:v}return function(m){return{encrypt:function(D,N,L){return l(N).encrypt(m,D,N,L)},decrypt:function(D,N,L){return l(N).decrypt(m,D,N,L)}}}}()}),x=(w.StreamCipher=T.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),h.mode={}),O=w.BlockCipherMode=k.extend({createEncryptor:function(l,m){return this.Encryptor.create(l,m)},createDecryptor:function(l,m){return this.Decryptor.create(l,m)},init:function(l,m){this._cipher=l,this._iv=m}}),P=x.CBC=function(){var l=O.extend();function m(D,N,L){var j,W=this._iv;W?(j=W,this._iv=_):j=this._prevBlock;for(var $=0;$<L;$++)D[N+$]^=j[$]}return l.Encryptor=l.extend({processBlock:function(D,N){var L=this._cipher,j=L.blockSize;m.call(this,D,N,j),L.encryptBlock(D,N),this._prevBlock=D.slice(N,N+j)}}),l.Decryptor=l.extend({processBlock:function(D,N){var L=this._cipher,j=L.blockSize,W=D.slice(N,N+j);L.decryptBlock(D,N),m.call(this,D,N,j),this._prevBlock=W}}),l}(),R=(h.pad={}).Pkcs7={pad:function(l,m){for(var D=4*m,N=D-l.sigBytes%D,L=N<<24|N<<16|N<<8|N,j=[],W=0;W<N;W+=4)j.push(L);var $=f.create(j,N);l.concat($)},unpad:function(l){var m=255&l.words[l.sigBytes-1>>>2];l.sigBytes-=m}},I=(w.BlockCipher=T.extend({cfg:T.cfg.extend({mode:P,padding:R}),reset:function(){var l;T.reset.call(this);var m=this.cfg,D=m.iv,N=m.mode;this._xformMode==this._ENC_XFORM_MODE?l=N.createEncryptor:(l=N.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==l?this._mode.init(this,D&&D.words):(this._mode=l.call(N,this,D&&D.words),this._mode.__creator=l)},_doProcessBlock:function(l,m){this._mode.processBlock(l,m)},_doFinalize:function(){var l,m=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(m.pad(this._data,this.blockSize),l=this._process(!0)):(l=this._process(!0),m.unpad(l)),l},blockSize:4}),w.CipherParams=k.extend({init:function(l){this.mixIn(l)},toString:function(l){return(l||this.formatter).stringify(this)}})),d=(h.format={}).OpenSSL={stringify:function(l){var m=l.ciphertext,D=l.salt;return(D?f.create([1398893684,1701076831]).concat(D).concat(m):m).toString(b)},parse:function(l){var m,D=b.parse(l),N=D.words;return N[0]==1398893684&&N[1]==1701076831&&(m=f.create(N.slice(2,4)),N.splice(0,4),D.sigBytes-=16),I.create({ciphertext:D,salt:m})}},v=w.SerializableCipher=k.extend({cfg:k.extend({format:d}),encrypt:function(l,m,D,N){N=this.cfg.extend(N);var L=l.createEncryptor(D,N),j=L.finalize(m),W=L.cfg;return I.create({ciphertext:j,key:D,iv:W.iv,algorithm:l,mode:W.mode,padding:W.padding,blockSize:l.blockSize,formatter:N.format})},decrypt:function(l,m,D,N){return N=this.cfg.extend(N),m=this._parse(m,N.format),l.createDecryptor(D,N).finalize(m.ciphertext)},_parse:function(l,m){return typeof l=="string"?m.parse(l,this):l}}),c=(h.kdf={}).OpenSSL={execute:function(l,m,D,N,L){if(N||(N=f.random(8)),L)j=S.create({keySize:m+D,hasher:L}).compute(l,N);else var j=S.create({keySize:m+D}).compute(l,N);var W=f.create(j.words.slice(m),4*D);return j.sigBytes=4*m,I.create({key:j,iv:W,salt:N})}},u=w.PasswordBasedCipher=v.extend({cfg:v.cfg.extend({kdf:c}),encrypt:function(l,m,D,N){var L=(N=this.cfg.extend(N)).kdf.execute(D,l.keySize,l.ivSize,N.salt,N.hasher);N.iv=L.iv;var j=v.encrypt.call(this,l,m,L.key,N);return j.mixIn(L),j},decrypt:function(l,m,D,N){N=this.cfg.extend(N),m=this._parse(m,N.format);var L=N.kdf.execute(D,l.keySize,l.ivSize,m.salt,N.hasher);return N.iv=L.iv,v.decrypt.call(this,l,m,L.key,N)}})}()))},9021:function(C,p,o){var E;C.exports=(E=E||function(_,h){var w;if(typeof window<"u"&&window.crypto&&(w=window.crypto),typeof self<"u"&&self.crypto&&(w=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(w=globalThis.crypto),!w&&typeof window<"u"&&window.msCrypto&&(w=window.msCrypto),!w&&o.g!==void 0&&o.g.crypto&&(w=o.g.crypto),!w)try{w=o(477)}catch{}var k=function(){if(w){if(typeof w.getRandomValues=="function")try{return w.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof w.randomBytes=="function")try{return w.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},f=Object.create||function(){function d(){}return function(v){var c;return d.prototype=v,c=new d,d.prototype=null,c}}(),g={},s=g.lib={},b=s.Base={extend:function(d){var v=f(this);return d&&v.mixIn(d),v.hasOwnProperty("init")&&this.init!==v.init||(v.init=function(){v.$super.init.apply(this,arguments)}),v.init.prototype=v,v.$super=this,v},create:function(){var d=this.extend();return d.init.apply(d,arguments),d},init:function(){},mixIn:function(d){for(var v in d)d.hasOwnProperty(v)&&(this[v]=d[v]);d.hasOwnProperty("toString")&&(this.toString=d.toString)},clone:function(){return this.init.prototype.extend(this)}},S=s.WordArray=b.extend({init:function(d,v){d=this.words=d||[],this.sigBytes=v!=h?v:4*d.length},toString:function(d){return(d||x).stringify(this)},concat:function(d){var v=this.words,c=d.words,u=this.sigBytes,l=d.sigBytes;if(this.clamp(),u%4)for(var m=0;m<l;m++){var D=c[m>>>2]>>>24-m%4*8&255;v[u+m>>>2]|=D<<24-(u+m)%4*8}else for(var N=0;N<l;N+=4)v[u+N>>>2]=c[N>>>2];return this.sigBytes+=l,this},clamp:function(){var d=this.words,v=this.sigBytes;d[v>>>2]&=4294967295<<32-v%4*8,d.length=_.ceil(v/4)},clone:function(){var d=b.clone.call(this);return d.words=this.words.slice(0),d},random:function(d){for(var v=[],c=0;c<d;c+=4)v.push(k());return new S.init(v,d)}}),T=g.enc={},x=T.Hex={stringify:function(d){for(var v=d.words,c=d.sigBytes,u=[],l=0;l<c;l++){var m=v[l>>>2]>>>24-l%4*8&255;u.push((m>>>4).toString(16)),u.push((15&m).toString(16))}return u.join("")},parse:function(d){for(var v=d.length,c=[],u=0;u<v;u+=2)c[u>>>3]|=parseInt(d.substr(u,2),16)<<24-u%8*4;return new S.init(c,v/2)}},O=T.Latin1={stringify:function(d){for(var v=d.words,c=d.sigBytes,u=[],l=0;l<c;l++){var m=v[l>>>2]>>>24-l%4*8&255;u.push(String.fromCharCode(m))}return u.join("")},parse:function(d){for(var v=d.length,c=[],u=0;u<v;u++)c[u>>>2]|=(255&d.charCodeAt(u))<<24-u%4*8;return new S.init(c,v)}},P=T.Utf8={stringify:function(d){try{return decodeURIComponent(escape(O.stringify(d)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(d){return O.parse(unescape(encodeURIComponent(d)))}},R=s.BufferedBlockAlgorithm=b.extend({reset:function(){this._data=new S.init,this._nDataBytes=0},_append:function(d){typeof d=="string"&&(d=P.parse(d)),this._data.concat(d),this._nDataBytes+=d.sigBytes},_process:function(d){var v,c=this._data,u=c.words,l=c.sigBytes,m=this.blockSize,D=l/(4*m),N=(D=d?_.ceil(D):_.max((0|D)-this._minBufferSize,0))*m,L=_.min(4*N,l);if(N){for(var j=0;j<N;j+=m)this._doProcessBlock(u,j);v=u.splice(0,N),c.sigBytes-=L}return new S.init(v,L)},clone:function(){var d=b.clone.call(this);return d._data=this._data.clone(),d},_minBufferSize:0}),I=(s.Hasher=R.extend({cfg:b.extend(),init:function(d){this.cfg=this.cfg.extend(d),this.reset()},reset:function(){R.reset.call(this),this._doReset()},update:function(d){return this._append(d),this._process(),this},finalize:function(d){return d&&this._append(d),this._doFinalize()},blockSize:16,_createHelper:function(d){return function(v,c){return new d.init(c).finalize(v)}},_createHmacHelper:function(d){return function(v,c){return new I.HMAC.init(d,c).finalize(v)}}}),g.algo={});return g}(Math),E)},754:function(C,p,o){var E;C.exports=(E=o(9021),function(){var _=E,h=_.lib.WordArray;function w(k,f,g){for(var s=[],b=0,S=0;S<f;S++)if(S%4){var T=g[k.charCodeAt(S-1)]<<S%4*2|g[k.charCodeAt(S)]>>>6-S%4*2;s[b>>>2]|=T<<24-b%4*8,b++}return h.create(s,b)}_.enc.Base64={stringify:function(k){var f=k.words,g=k.sigBytes,s=this._map;k.clamp();for(var b=[],S=0;S<g;S+=3)for(var T=(f[S>>>2]>>>24-S%4*8&255)<<16|(f[S+1>>>2]>>>24-(S+1)%4*8&255)<<8|f[S+2>>>2]>>>24-(S+2)%4*8&255,x=0;x<4&&S+.75*x<g;x++)b.push(s.charAt(T>>>6*(3-x)&63));var O=s.charAt(64);if(O)for(;b.length%4;)b.push(O);return b.join("")},parse:function(k){var f=k.length,g=this._map,s=this._reverseMap;if(!s){s=this._reverseMap=[];for(var b=0;b<g.length;b++)s[g.charCodeAt(b)]=b}var S=g.charAt(64);if(S){var T=k.indexOf(S);T!==-1&&(f=T)}return w(k,f,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),E.enc.Base64)},4725:function(C,p,o){var E;C.exports=(E=o(9021),function(){var _=E,h=_.lib.WordArray;function w(k,f,g){for(var s=[],b=0,S=0;S<f;S++)if(S%4){var T=g[k.charCodeAt(S-1)]<<S%4*2|g[k.charCodeAt(S)]>>>6-S%4*2;s[b>>>2]|=T<<24-b%4*8,b++}return h.create(s,b)}_.enc.Base64url={stringify:function(k,f){f===void 0&&(f=!0);var g=k.words,s=k.sigBytes,b=f?this._safe_map:this._map;k.clamp();for(var S=[],T=0;T<s;T+=3)for(var x=(g[T>>>2]>>>24-T%4*8&255)<<16|(g[T+1>>>2]>>>24-(T+1)%4*8&255)<<8|g[T+2>>>2]>>>24-(T+2)%4*8&255,O=0;O<4&&T+.75*O<s;O++)S.push(b.charAt(x>>>6*(3-O)&63));var P=b.charAt(64);if(P)for(;S.length%4;)S.push(P);return S.join("")},parse:function(k,f){f===void 0&&(f=!0);var g=k.length,s=f?this._safe_map:this._map,b=this._reverseMap;if(!b){b=this._reverseMap=[];for(var S=0;S<s.length;S++)b[s.charCodeAt(S)]=S}var T=s.charAt(64);if(T){var x=k.indexOf(T);x!==-1&&(g=x)}return w(k,g,b)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"}}(),E.enc.Base64url)},5503:function(C,p,o){var E;C.exports=(E=o(9021),function(){var _=E,h=_.lib.WordArray,w=_.enc;function k(f){return f<<8&4278255360|f>>>8&16711935}w.Utf16=w.Utf16BE={stringify:function(f){for(var g=f.words,s=f.sigBytes,b=[],S=0;S<s;S+=2){var T=g[S>>>2]>>>16-S%4*8&65535;b.push(String.fromCharCode(T))}return b.join("")},parse:function(f){for(var g=f.length,s=[],b=0;b<g;b++)s[b>>>1]|=f.charCodeAt(b)<<16-b%2*16;return h.create(s,2*g)}},w.Utf16LE={stringify:function(f){for(var g=f.words,s=f.sigBytes,b=[],S=0;S<s;S+=2){var T=k(g[S>>>2]>>>16-S%4*8&65535);b.push(String.fromCharCode(T))}return b.join("")},parse:function(f){for(var g=f.length,s=[],b=0;b<g;b++)s[b>>>1]|=k(f.charCodeAt(b)<<16-b%2*16);return h.create(s,2*g)}}}(),E.enc.Utf16)},9506:function(C,p,o){var E,_,h,w,k,f,g,s;C.exports=(s=o(9021),o(5471),o(1025),_=(E=s).lib,h=_.Base,w=_.WordArray,k=E.algo,f=k.MD5,g=k.EvpKDF=h.extend({cfg:h.extend({keySize:4,hasher:f,iterations:1}),init:function(b){this.cfg=this.cfg.extend(b)},compute:function(b,S){for(var T,x=this.cfg,O=x.hasher.create(),P=w.create(),R=P.words,I=x.keySize,d=x.iterations;R.length<I;){T&&O.update(T),T=O.update(b).finalize(S),O.reset();for(var v=1;v<d;v++)T=O.finalize(T),O.reset();P.concat(T)}return P.sigBytes=4*I,P}}),E.EvpKDF=function(b,S,T){return g.create(T).compute(b,S)},s.EvpKDF)},25:function(C,p,o){var E,_,h,w;C.exports=(w=o(9021),o(7165),_=(E=w).lib.CipherParams,h=E.enc.Hex,E.format.Hex={stringify:function(k){return k.ciphertext.toString(h)},parse:function(k){var f=h.parse(k);return _.create({ciphertext:f})}},w.format.Hex)},1025:function(C,p,o){var E,_,h,w;C.exports=(E=o(9021),h=(_=E).lib.Base,w=_.enc.Utf8,void(_.algo.HMAC=h.extend({init:function(k,f){k=this._hasher=new k.init,typeof f=="string"&&(f=w.parse(f));var g=k.blockSize,s=4*g;f.sigBytes>s&&(f=k.finalize(f)),f.clamp();for(var b=this._oKey=f.clone(),S=this._iKey=f.clone(),T=b.words,x=S.words,O=0;O<g;O++)T[O]^=1549556828,x[O]^=909522486;b.sigBytes=S.sigBytes=s,this.reset()},reset:function(){var k=this._hasher;k.reset(),k.update(this._iKey)},update:function(k){return this._hasher.update(k),this},finalize:function(k){var f=this._hasher,g=f.finalize(k);return f.reset(),f.finalize(this._oKey.clone().concat(g))}})))},1396:function(C,p,o){var E;C.exports=(E=o(9021),o(3240),o(6440),o(5503),o(754),o(4725),o(4636),o(5471),o(3009),o(6308),o(1380),o(9557),o(5953),o(8056),o(1025),o(19),o(9506),o(7165),o(2169),o(6939),o(6372),o(3797),o(8454),o(2073),o(4905),o(482),o(2155),o(8124),o(25),o(955),o(7628),o(7193),o(6298),o(2696),o(3128),E)},6440:function(C,p,o){var E;C.exports=(E=o(9021),function(){if(typeof ArrayBuffer=="function"){var _=E.lib.WordArray,h=_.init,w=_.init=function(k){if(k instanceof ArrayBuffer&&(k=new Uint8Array(k)),(k instanceof Int8Array||typeof Uint8ClampedArray<"u"&&k instanceof Uint8ClampedArray||k instanceof Int16Array||k instanceof Uint16Array||k instanceof Int32Array||k instanceof Uint32Array||k instanceof Float32Array||k instanceof Float64Array)&&(k=new Uint8Array(k.buffer,k.byteOffset,k.byteLength)),k instanceof Uint8Array){for(var f=k.byteLength,g=[],s=0;s<f;s++)g[s>>>2]|=k[s]<<24-s%4*8;h.call(this,g,f)}else h.apply(this,arguments)};w.prototype=_}}(),E.lib.WordArray)},4636:function(C,p,o){var E;C.exports=(E=o(9021),function(_){var h=E,w=h.lib,k=w.WordArray,f=w.Hasher,g=h.algo,s=[];(function(){for(var P=0;P<64;P++)s[P]=4294967296*_.abs(_.sin(P+1))|0})();var b=g.MD5=f.extend({_doReset:function(){this._hash=new k.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(P,R){for(var I=0;I<16;I++){var d=R+I,v=P[d];P[d]=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8)}var c=this._hash.words,u=P[R+0],l=P[R+1],m=P[R+2],D=P[R+3],N=P[R+4],L=P[R+5],j=P[R+6],W=P[R+7],$=P[R+8],Z=P[R+9],ne=P[R+10],de=P[R+11],ge=P[R+12],_e=P[R+13],Me=P[R+14],fe=P[R+15],oe=c[0],ve=c[1],we=c[2],be=c[3];oe=S(oe,ve,we,be,u,7,s[0]),be=S(be,oe,ve,we,l,12,s[1]),we=S(we,be,oe,ve,m,17,s[2]),ve=S(ve,we,be,oe,D,22,s[3]),oe=S(oe,ve,we,be,N,7,s[4]),be=S(be,oe,ve,we,L,12,s[5]),we=S(we,be,oe,ve,j,17,s[6]),ve=S(ve,we,be,oe,W,22,s[7]),oe=S(oe,ve,we,be,$,7,s[8]),be=S(be,oe,ve,we,Z,12,s[9]),we=S(we,be,oe,ve,ne,17,s[10]),ve=S(ve,we,be,oe,de,22,s[11]),oe=S(oe,ve,we,be,ge,7,s[12]),be=S(be,oe,ve,we,_e,12,s[13]),we=S(we,be,oe,ve,Me,17,s[14]),oe=T(oe,ve=S(ve,we,be,oe,fe,22,s[15]),we,be,l,5,s[16]),be=T(be,oe,ve,we,j,9,s[17]),we=T(we,be,oe,ve,de,14,s[18]),ve=T(ve,we,be,oe,u,20,s[19]),oe=T(oe,ve,we,be,L,5,s[20]),be=T(be,oe,ve,we,ne,9,s[21]),we=T(we,be,oe,ve,fe,14,s[22]),ve=T(ve,we,be,oe,N,20,s[23]),oe=T(oe,ve,we,be,Z,5,s[24]),be=T(be,oe,ve,we,Me,9,s[25]),we=T(we,be,oe,ve,D,14,s[26]),ve=T(ve,we,be,oe,$,20,s[27]),oe=T(oe,ve,we,be,_e,5,s[28]),be=T(be,oe,ve,we,m,9,s[29]),we=T(we,be,oe,ve,W,14,s[30]),oe=x(oe,ve=T(ve,we,be,oe,ge,20,s[31]),we,be,L,4,s[32]),be=x(be,oe,ve,we,$,11,s[33]),we=x(we,be,oe,ve,de,16,s[34]),ve=x(ve,we,be,oe,Me,23,s[35]),oe=x(oe,ve,we,be,l,4,s[36]),be=x(be,oe,ve,we,N,11,s[37]),we=x(we,be,oe,ve,W,16,s[38]),ve=x(ve,we,be,oe,ne,23,s[39]),oe=x(oe,ve,we,be,_e,4,s[40]),be=x(be,oe,ve,we,u,11,s[41]),we=x(we,be,oe,ve,D,16,s[42]),ve=x(ve,we,be,oe,j,23,s[43]),oe=x(oe,ve,we,be,Z,4,s[44]),be=x(be,oe,ve,we,ge,11,s[45]),we=x(we,be,oe,ve,fe,16,s[46]),oe=O(oe,ve=x(ve,we,be,oe,m,23,s[47]),we,be,u,6,s[48]),be=O(be,oe,ve,we,W,10,s[49]),we=O(we,be,oe,ve,Me,15,s[50]),ve=O(ve,we,be,oe,L,21,s[51]),oe=O(oe,ve,we,be,ge,6,s[52]),be=O(be,oe,ve,we,D,10,s[53]),we=O(we,be,oe,ve,ne,15,s[54]),ve=O(ve,we,be,oe,l,21,s[55]),oe=O(oe,ve,we,be,$,6,s[56]),be=O(be,oe,ve,we,fe,10,s[57]),we=O(we,be,oe,ve,j,15,s[58]),ve=O(ve,we,be,oe,_e,21,s[59]),oe=O(oe,ve,we,be,N,6,s[60]),be=O(be,oe,ve,we,de,10,s[61]),we=O(we,be,oe,ve,m,15,s[62]),ve=O(ve,we,be,oe,Z,21,s[63]),c[0]=c[0]+oe|0,c[1]=c[1]+ve|0,c[2]=c[2]+we|0,c[3]=c[3]+be|0},_doFinalize:function(){var P=this._data,R=P.words,I=8*this._nDataBytes,d=8*P.sigBytes;R[d>>>5]|=128<<24-d%32;var v=_.floor(I/4294967296),c=I;R[15+(d+64>>>9<<4)]=16711935&(v<<8|v>>>24)|4278255360&(v<<24|v>>>8),R[14+(d+64>>>9<<4)]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),P.sigBytes=4*(R.length+1),this._process();for(var u=this._hash,l=u.words,m=0;m<4;m++){var D=l[m];l[m]=16711935&(D<<8|D>>>24)|4278255360&(D<<24|D>>>8)}return u},clone:function(){var P=f.clone.call(this);return P._hash=this._hash.clone(),P}});function S(P,R,I,d,v,c,u){var l=P+(R&I|~R&d)+v+u;return(l<<c|l>>>32-c)+R}function T(P,R,I,d,v,c,u){var l=P+(R&d|I&~d)+v+u;return(l<<c|l>>>32-c)+R}function x(P,R,I,d,v,c,u){var l=P+(R^I^d)+v+u;return(l<<c|l>>>32-c)+R}function O(P,R,I,d,v,c,u){var l=P+(I^(R|~d))+v+u;return(l<<c|l>>>32-c)+R}h.MD5=f._createHelper(b),h.HmacMD5=f._createHmacHelper(b)}(Math),E.MD5)},2169:function(C,p,o){var E;C.exports=(E=o(9021),o(7165),E.mode.CFB=function(){var _=E.lib.BlockCipherMode.extend();function h(w,k,f,g){var s,b=this._iv;b?(s=b.slice(0),this._iv=void 0):s=this._prevBlock,g.encryptBlock(s,0);for(var S=0;S<f;S++)w[k+S]^=s[S]}return _.Encryptor=_.extend({processBlock:function(w,k){var f=this._cipher,g=f.blockSize;h.call(this,w,k,g,f),this._prevBlock=w.slice(k,k+g)}}),_.Decryptor=_.extend({processBlock:function(w,k){var f=this._cipher,g=f.blockSize,s=w.slice(k,k+g);h.call(this,w,k,g,f),this._prevBlock=s}}),_}(),E.mode.CFB)},6372:function(C,p,o){var E;C.exports=(E=o(9021),o(7165),E.mode.CTRGladman=function(){var _=E.lib.BlockCipherMode.extend();function h(f){if(255&~(f>>24))f+=16777216;else{var g=f>>16&255,s=f>>8&255,b=255&f;g===255?(g=0,s===255?(s=0,b===255?b=0:++b):++s):++g,f=0,f+=g<<16,f+=s<<8,f+=b}return f}function w(f){return(f[0]=h(f[0]))===0&&(f[1]=h(f[1])),f}var k=_.Encryptor=_.extend({processBlock:function(f,g){var s=this._cipher,b=s.blockSize,S=this._iv,T=this._counter;S&&(T=this._counter=S.slice(0),this._iv=void 0),w(T);var x=T.slice(0);s.encryptBlock(x,0);for(var O=0;O<b;O++)f[g+O]^=x[O]}});return _.Decryptor=k,_}(),E.mode.CTRGladman)},6939:function(C,p,o){var E,_,h;C.exports=(h=o(9021),o(7165),h.mode.CTR=(E=h.lib.BlockCipherMode.extend(),_=E.Encryptor=E.extend({processBlock:function(w,k){var f=this._cipher,g=f.blockSize,s=this._iv,b=this._counter;s&&(b=this._counter=s.slice(0),this._iv=void 0);var S=b.slice(0);f.encryptBlock(S,0),b[g-1]=b[g-1]+1|0;for(var T=0;T<g;T++)w[k+T]^=S[T]}}),E.Decryptor=_,E),h.mode.CTR)},8454:function(C,p,o){var E,_;C.exports=(_=o(9021),o(7165),_.mode.ECB=((E=_.lib.BlockCipherMode.extend()).Encryptor=E.extend({processBlock:function(h,w){this._cipher.encryptBlock(h,w)}}),E.Decryptor=E.extend({processBlock:function(h,w){this._cipher.decryptBlock(h,w)}}),E),_.mode.ECB)},3797:function(C,p,o){var E,_,h;C.exports=(h=o(9021),o(7165),h.mode.OFB=(E=h.lib.BlockCipherMode.extend(),_=E.Encryptor=E.extend({processBlock:function(w,k){var f=this._cipher,g=f.blockSize,s=this._iv,b=this._keystream;s&&(b=this._keystream=s.slice(0),this._iv=void 0),f.encryptBlock(b,0);for(var S=0;S<g;S++)w[k+S]^=b[S]}}),E.Decryptor=_,E),h.mode.OFB)},2073:function(C,p,o){var E;C.exports=(E=o(9021),o(7165),E.pad.AnsiX923={pad:function(_,h){var w=_.sigBytes,k=4*h,f=k-w%k,g=w+f-1;_.clamp(),_.words[g>>>2]|=f<<24-g%4*8,_.sigBytes+=f},unpad:function(_){var h=255&_.words[_.sigBytes-1>>>2];_.sigBytes-=h}},E.pad.Ansix923)},4905:function(C,p,o){var E;C.exports=(E=o(9021),o(7165),E.pad.Iso10126={pad:function(_,h){var w=4*h,k=w-_.sigBytes%w;_.concat(E.lib.WordArray.random(k-1)).concat(E.lib.WordArray.create([k<<24],1))},unpad:function(_){var h=255&_.words[_.sigBytes-1>>>2];_.sigBytes-=h}},E.pad.Iso10126)},482:function(C,p,o){var E;C.exports=(E=o(9021),o(7165),E.pad.Iso97971={pad:function(_,h){_.concat(E.lib.WordArray.create([2147483648],1)),E.pad.ZeroPadding.pad(_,h)},unpad:function(_){E.pad.ZeroPadding.unpad(_),_.sigBytes--}},E.pad.Iso97971)},8124:function(C,p,o){var E;C.exports=(E=o(9021),o(7165),E.pad.NoPadding={pad:function(){},unpad:function(){}},E.pad.NoPadding)},2155:function(C,p,o){var E;C.exports=(E=o(9021),o(7165),E.pad.ZeroPadding={pad:function(_,h){var w=4*h;_.clamp(),_.sigBytes+=w-(_.sigBytes%w||w)},unpad:function(_){var h=_.words,w=_.sigBytes-1;for(w=_.sigBytes-1;w>=0;w--)if(h[w>>>2]>>>24-w%4*8&255){_.sigBytes=w+1;break}}},E.pad.ZeroPadding)},19:function(C,p,o){var E,_,h,w,k,f,g,s,b;C.exports=(b=o(9021),o(3009),o(1025),_=(E=b).lib,h=_.Base,w=_.WordArray,k=E.algo,f=k.SHA256,g=k.HMAC,s=k.PBKDF2=h.extend({cfg:h.extend({keySize:4,hasher:f,iterations:25e4}),init:function(S){this.cfg=this.cfg.extend(S)},compute:function(S,T){for(var x=this.cfg,O=g.create(x.hasher,S),P=w.create(),R=w.create([1]),I=P.words,d=R.words,v=x.keySize,c=x.iterations;I.length<v;){var u=O.update(T).finalize(R);O.reset();for(var l=u.words,m=l.length,D=u,N=1;N<c;N++){D=O.finalize(D),O.reset();for(var L=D.words,j=0;j<m;j++)l[j]^=L[j]}P.concat(u),d[0]++}return P.sigBytes=4*v,P}}),E.PBKDF2=function(S,T,x){return s.create(x).compute(S,T)},b.PBKDF2)},2696:function(C,p,o){var E;C.exports=(E=o(9021),o(754),o(4636),o(9506),o(7165),function(){var _=E,h=_.lib.StreamCipher,w=_.algo,k=[],f=[],g=[],s=w.RabbitLegacy=h.extend({_doReset:function(){var S=this._key.words,T=this.cfg.iv,x=this._X=[S[0],S[3]<<16|S[2]>>>16,S[1],S[0]<<16|S[3]>>>16,S[2],S[1]<<16|S[0]>>>16,S[3],S[2]<<16|S[1]>>>16],O=this._C=[S[2]<<16|S[2]>>>16,4294901760&S[0]|65535&S[1],S[3]<<16|S[3]>>>16,4294901760&S[1]|65535&S[2],S[0]<<16|S[0]>>>16,4294901760&S[2]|65535&S[3],S[1]<<16|S[1]>>>16,4294901760&S[3]|65535&S[0]];this._b=0;for(var P=0;P<4;P++)b.call(this);for(P=0;P<8;P++)O[P]^=x[P+4&7];if(T){var R=T.words,I=R[0],d=R[1],v=16711935&(I<<8|I>>>24)|4278255360&(I<<24|I>>>8),c=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),u=v>>>16|4294901760&c,l=c<<16|65535&v;for(O[0]^=v,O[1]^=u,O[2]^=c,O[3]^=l,O[4]^=v,O[5]^=u,O[6]^=c,O[7]^=l,P=0;P<4;P++)b.call(this)}},_doProcessBlock:function(S,T){var x=this._X;b.call(this),k[0]=x[0]^x[5]>>>16^x[3]<<16,k[1]=x[2]^x[7]>>>16^x[5]<<16,k[2]=x[4]^x[1]>>>16^x[7]<<16,k[3]=x[6]^x[3]>>>16^x[1]<<16;for(var O=0;O<4;O++)k[O]=16711935&(k[O]<<8|k[O]>>>24)|4278255360&(k[O]<<24|k[O]>>>8),S[T+O]^=k[O]},blockSize:4,ivSize:2});function b(){for(var S=this._X,T=this._C,x=0;x<8;x++)f[x]=T[x];for(T[0]=T[0]+1295307597+this._b|0,T[1]=T[1]+3545052371+(T[0]>>>0<f[0]>>>0?1:0)|0,T[2]=T[2]+886263092+(T[1]>>>0<f[1]>>>0?1:0)|0,T[3]=T[3]+1295307597+(T[2]>>>0<f[2]>>>0?1:0)|0,T[4]=T[4]+3545052371+(T[3]>>>0<f[3]>>>0?1:0)|0,T[5]=T[5]+886263092+(T[4]>>>0<f[4]>>>0?1:0)|0,T[6]=T[6]+1295307597+(T[5]>>>0<f[5]>>>0?1:0)|0,T[7]=T[7]+3545052371+(T[6]>>>0<f[6]>>>0?1:0)|0,this._b=T[7]>>>0<f[7]>>>0?1:0,x=0;x<8;x++){var O=S[x]+T[x],P=65535&O,R=O>>>16,I=((P*P>>>17)+P*R>>>15)+R*R,d=((4294901760&O)*O|0)+((65535&O)*O|0);g[x]=I^d}S[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0,S[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0,S[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0,S[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0,S[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0,S[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0,S[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0,S[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}_.RabbitLegacy=h._createHelper(s)}(),E.RabbitLegacy)},6298:function(C,p,o){var E;C.exports=(E=o(9021),o(754),o(4636),o(9506),o(7165),function(){var _=E,h=_.lib.StreamCipher,w=_.algo,k=[],f=[],g=[],s=w.Rabbit=h.extend({_doReset:function(){for(var S=this._key.words,T=this.cfg.iv,x=0;x<4;x++)S[x]=16711935&(S[x]<<8|S[x]>>>24)|4278255360&(S[x]<<24|S[x]>>>8);var O=this._X=[S[0],S[3]<<16|S[2]>>>16,S[1],S[0]<<16|S[3]>>>16,S[2],S[1]<<16|S[0]>>>16,S[3],S[2]<<16|S[1]>>>16],P=this._C=[S[2]<<16|S[2]>>>16,4294901760&S[0]|65535&S[1],S[3]<<16|S[3]>>>16,4294901760&S[1]|65535&S[2],S[0]<<16|S[0]>>>16,4294901760&S[2]|65535&S[3],S[1]<<16|S[1]>>>16,4294901760&S[3]|65535&S[0]];for(this._b=0,x=0;x<4;x++)b.call(this);for(x=0;x<8;x++)P[x]^=O[x+4&7];if(T){var R=T.words,I=R[0],d=R[1],v=16711935&(I<<8|I>>>24)|4278255360&(I<<24|I>>>8),c=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),u=v>>>16|4294901760&c,l=c<<16|65535&v;for(P[0]^=v,P[1]^=u,P[2]^=c,P[3]^=l,P[4]^=v,P[5]^=u,P[6]^=c,P[7]^=l,x=0;x<4;x++)b.call(this)}},_doProcessBlock:function(S,T){var x=this._X;b.call(this),k[0]=x[0]^x[5]>>>16^x[3]<<16,k[1]=x[2]^x[7]>>>16^x[5]<<16,k[2]=x[4]^x[1]>>>16^x[7]<<16,k[3]=x[6]^x[3]>>>16^x[1]<<16;for(var O=0;O<4;O++)k[O]=16711935&(k[O]<<8|k[O]>>>24)|4278255360&(k[O]<<24|k[O]>>>8),S[T+O]^=k[O]},blockSize:4,ivSize:2});function b(){for(var S=this._X,T=this._C,x=0;x<8;x++)f[x]=T[x];for(T[0]=T[0]+1295307597+this._b|0,T[1]=T[1]+3545052371+(T[0]>>>0<f[0]>>>0?1:0)|0,T[2]=T[2]+886263092+(T[1]>>>0<f[1]>>>0?1:0)|0,T[3]=T[3]+1295307597+(T[2]>>>0<f[2]>>>0?1:0)|0,T[4]=T[4]+3545052371+(T[3]>>>0<f[3]>>>0?1:0)|0,T[5]=T[5]+886263092+(T[4]>>>0<f[4]>>>0?1:0)|0,T[6]=T[6]+1295307597+(T[5]>>>0<f[5]>>>0?1:0)|0,T[7]=T[7]+3545052371+(T[6]>>>0<f[6]>>>0?1:0)|0,this._b=T[7]>>>0<f[7]>>>0?1:0,x=0;x<8;x++){var O=S[x]+T[x],P=65535&O,R=O>>>16,I=((P*P>>>17)+P*R>>>15)+R*R,d=((4294901760&O)*O|0)+((65535&O)*O|0);g[x]=I^d}S[0]=g[0]+(g[7]<<16|g[7]>>>16)+(g[6]<<16|g[6]>>>16)|0,S[1]=g[1]+(g[0]<<8|g[0]>>>24)+g[7]|0,S[2]=g[2]+(g[1]<<16|g[1]>>>16)+(g[0]<<16|g[0]>>>16)|0,S[3]=g[3]+(g[2]<<8|g[2]>>>24)+g[1]|0,S[4]=g[4]+(g[3]<<16|g[3]>>>16)+(g[2]<<16|g[2]>>>16)|0,S[5]=g[5]+(g[4]<<8|g[4]>>>24)+g[3]|0,S[6]=g[6]+(g[5]<<16|g[5]>>>16)+(g[4]<<16|g[4]>>>16)|0,S[7]=g[7]+(g[6]<<8|g[6]>>>24)+g[5]|0}_.Rabbit=h._createHelper(s)}(),E.Rabbit)},7193:function(C,p,o){var E;C.exports=(E=o(9021),o(754),o(4636),o(9506),o(7165),function(){var _=E,h=_.lib.StreamCipher,w=_.algo,k=w.RC4=h.extend({_doReset:function(){for(var s=this._key,b=s.words,S=s.sigBytes,T=this._S=[],x=0;x<256;x++)T[x]=x;x=0;for(var O=0;x<256;x++){var P=x%S,R=b[P>>>2]>>>24-P%4*8&255;O=(O+T[x]+R)%256;var I=T[x];T[x]=T[O],T[O]=I}this._i=this._j=0},_doProcessBlock:function(s,b){s[b]^=f.call(this)},keySize:8,ivSize:0});function f(){for(var s=this._S,b=this._i,S=this._j,T=0,x=0;x<4;x++){S=(S+s[b=(b+1)%256])%256;var O=s[b];s[b]=s[S],s[S]=O,T|=s[(s[b]+s[S])%256]<<24-8*x}return this._i=b,this._j=S,T}_.RC4=h._createHelper(k);var g=w.RC4Drop=k.extend({cfg:k.cfg.extend({drop:192}),_doReset:function(){k._doReset.call(this);for(var s=this.cfg.drop;s>0;s--)f.call(this)}});_.RC4Drop=h._createHelper(g)}(),E.RC4)},8056:function(C,p,o){var E;C.exports=(E=o(9021),function(){var _=E,h=_.lib,w=h.WordArray,k=h.Hasher,f=_.algo,g=w.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),s=w.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),b=w.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),S=w.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),T=w.create([0,1518500249,1859775393,2400959708,2840853838]),x=w.create([1352829926,1548603684,1836072691,2053994217,0]),O=f.RIPEMD160=k.extend({_doReset:function(){this._hash=w.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(u,l){for(var m=0;m<16;m++){var D=l+m,N=u[D];u[D]=16711935&(N<<8|N>>>24)|4278255360&(N<<24|N>>>8)}var L,j,W,$,Z,ne,de,ge,_e,Me,fe,oe=this._hash.words,ve=T.words,we=x.words,be=g.words,ht=s.words,xt=b.words,Jt=S.words;for(ne=L=oe[0],de=j=oe[1],ge=W=oe[2],_e=$=oe[3],Me=Z=oe[4],m=0;m<80;m+=1)fe=L+u[l+be[m]]|0,fe+=m<16?P(j,W,$)+ve[0]:m<32?R(j,W,$)+ve[1]:m<48?I(j,W,$)+ve[2]:m<64?d(j,W,$)+ve[3]:v(j,W,$)+ve[4],fe=(fe=c(fe|=0,xt[m]))+Z|0,L=Z,Z=$,$=c(W,10),W=j,j=fe,fe=ne+u[l+ht[m]]|0,fe+=m<16?v(de,ge,_e)+we[0]:m<32?d(de,ge,_e)+we[1]:m<48?I(de,ge,_e)+we[2]:m<64?R(de,ge,_e)+we[3]:P(de,ge,_e)+we[4],fe=(fe=c(fe|=0,Jt[m]))+Me|0,ne=Me,Me=_e,_e=c(ge,10),ge=de,de=fe;fe=oe[1]+W+_e|0,oe[1]=oe[2]+$+Me|0,oe[2]=oe[3]+Z+ne|0,oe[3]=oe[4]+L+de|0,oe[4]=oe[0]+j+ge|0,oe[0]=fe},_doFinalize:function(){var u=this._data,l=u.words,m=8*this._nDataBytes,D=8*u.sigBytes;l[D>>>5]|=128<<24-D%32,l[14+(D+64>>>9<<4)]=16711935&(m<<8|m>>>24)|4278255360&(m<<24|m>>>8),u.sigBytes=4*(l.length+1),this._process();for(var N=this._hash,L=N.words,j=0;j<5;j++){var W=L[j];L[j]=16711935&(W<<8|W>>>24)|4278255360&(W<<24|W>>>8)}return N},clone:function(){var u=k.clone.call(this);return u._hash=this._hash.clone(),u}});function P(u,l,m){return u^l^m}function R(u,l,m){return u&l|~u&m}function I(u,l,m){return(u|~l)^m}function d(u,l,m){return u&m|l&~m}function v(u,l,m){return u^(l|~m)}function c(u,l){return u<<l|u>>>32-l}_.RIPEMD160=k._createHelper(O),_.HmacRIPEMD160=k._createHmacHelper(O)}(),E.RIPEMD160)},5471:function(C,p,o){var E,_,h,w,k,f,g,s;C.exports=(s=o(9021),_=(E=s).lib,h=_.WordArray,w=_.Hasher,k=E.algo,f=[],g=k.SHA1=w.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(b,S){for(var T=this._hash.words,x=T[0],O=T[1],P=T[2],R=T[3],I=T[4],d=0;d<80;d++){if(d<16)f[d]=0|b[S+d];else{var v=f[d-3]^f[d-8]^f[d-14]^f[d-16];f[d]=v<<1|v>>>31}var c=(x<<5|x>>>27)+I+f[d];c+=d<20?1518500249+(O&P|~O&R):d<40?1859775393+(O^P^R):d<60?(O&P|O&R|P&R)-1894007588:(O^P^R)-899497514,I=R,R=P,P=O<<30|O>>>2,O=x,x=c}T[0]=T[0]+x|0,T[1]=T[1]+O|0,T[2]=T[2]+P|0,T[3]=T[3]+R|0,T[4]=T[4]+I|0},_doFinalize:function(){var b=this._data,S=b.words,T=8*this._nDataBytes,x=8*b.sigBytes;return S[x>>>5]|=128<<24-x%32,S[14+(x+64>>>9<<4)]=Math.floor(T/4294967296),S[15+(x+64>>>9<<4)]=T,b.sigBytes=4*S.length,this._process(),this._hash},clone:function(){var b=w.clone.call(this);return b._hash=this._hash.clone(),b}}),E.SHA1=w._createHelper(g),E.HmacSHA1=w._createHmacHelper(g),s.SHA1)},6308:function(C,p,o){var E,_,h,w,k,f;C.exports=(f=o(9021),o(3009),_=(E=f).lib.WordArray,h=E.algo,w=h.SHA256,k=h.SHA224=w.extend({_doReset:function(){this._hash=new _.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var g=w._doFinalize.call(this);return g.sigBytes-=4,g}}),E.SHA224=w._createHelper(k),E.HmacSHA224=w._createHmacHelper(k),f.SHA224)},3009:function(C,p,o){var E;C.exports=(E=o(9021),function(_){var h=E,w=h.lib,k=w.WordArray,f=w.Hasher,g=h.algo,s=[],b=[];(function(){function x(I){for(var d=_.sqrt(I),v=2;v<=d;v++)if(!(I%v))return!1;return!0}function O(I){return 4294967296*(I-(0|I))|0}for(var P=2,R=0;R<64;)x(P)&&(R<8&&(s[R]=O(_.pow(P,.5))),b[R]=O(_.pow(P,.3333333333333333)),R++),P++})();var S=[],T=g.SHA256=f.extend({_doReset:function(){this._hash=new k.init(s.slice(0))},_doProcessBlock:function(x,O){for(var P=this._hash.words,R=P[0],I=P[1],d=P[2],v=P[3],c=P[4],u=P[5],l=P[6],m=P[7],D=0;D<64;D++){if(D<16)S[D]=0|x[O+D];else{var N=S[D-15],L=(N<<25|N>>>7)^(N<<14|N>>>18)^N>>>3,j=S[D-2],W=(j<<15|j>>>17)^(j<<13|j>>>19)^j>>>10;S[D]=L+S[D-7]+W+S[D-16]}var $=R&I^R&d^I&d,Z=(R<<30|R>>>2)^(R<<19|R>>>13)^(R<<10|R>>>22),ne=m+((c<<26|c>>>6)^(c<<21|c>>>11)^(c<<7|c>>>25))+(c&u^~c&l)+b[D]+S[D];m=l,l=u,u=c,c=v+ne|0,v=d,d=I,I=R,R=ne+(Z+$)|0}P[0]=P[0]+R|0,P[1]=P[1]+I|0,P[2]=P[2]+d|0,P[3]=P[3]+v|0,P[4]=P[4]+c|0,P[5]=P[5]+u|0,P[6]=P[6]+l|0,P[7]=P[7]+m|0},_doFinalize:function(){var x=this._data,O=x.words,P=8*this._nDataBytes,R=8*x.sigBytes;return O[R>>>5]|=128<<24-R%32,O[14+(R+64>>>9<<4)]=_.floor(P/4294967296),O[15+(R+64>>>9<<4)]=P,x.sigBytes=4*O.length,this._process(),this._hash},clone:function(){var x=f.clone.call(this);return x._hash=this._hash.clone(),x}});h.SHA256=f._createHelper(T),h.HmacSHA256=f._createHmacHelper(T)}(Math),E.SHA256)},5953:function(C,p,o){var E;C.exports=(E=o(9021),o(3240),function(_){var h=E,w=h.lib,k=w.WordArray,f=w.Hasher,g=h.x64.Word,s=h.algo,b=[],S=[],T=[];(function(){for(var P=1,R=0,I=0;I<24;I++){b[P+5*R]=(I+1)*(I+2)/2%64;var d=(2*P+3*R)%5;P=R%5,R=d}for(P=0;P<5;P++)for(R=0;R<5;R++)S[P+5*R]=R+(2*P+3*R)%5*5;for(var v=1,c=0;c<24;c++){for(var u=0,l=0,m=0;m<7;m++){if(1&v){var D=(1<<m)-1;D<32?l^=1<<D:u^=1<<D-32}128&v?v=v<<1^113:v<<=1}T[c]=g.create(u,l)}})();var x=[];(function(){for(var P=0;P<25;P++)x[P]=g.create()})();var O=s.SHA3=f.extend({cfg:f.cfg.extend({outputLength:512}),_doReset:function(){for(var P=this._state=[],R=0;R<25;R++)P[R]=new g.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(P,R){for(var I=this._state,d=this.blockSize/2,v=0;v<d;v++){var c=P[R+2*v],u=P[R+2*v+1];c=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8),u=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),(we=I[v]).high^=u,we.low^=c}for(var l=0;l<24;l++){for(var m=0;m<5;m++){for(var D=0,N=0,L=0;L<5;L++)D^=(we=I[m+5*L]).high,N^=we.low;var j=x[m];j.high=D,j.low=N}for(m=0;m<5;m++){var W=x[(m+4)%5],$=x[(m+1)%5],Z=$.high,ne=$.low;for(D=W.high^(Z<<1|ne>>>31),N=W.low^(ne<<1|Z>>>31),L=0;L<5;L++)(we=I[m+5*L]).high^=D,we.low^=N}for(var de=1;de<25;de++){var ge=(we=I[de]).high,_e=we.low,Me=b[de];Me<32?(D=ge<<Me|_e>>>32-Me,N=_e<<Me|ge>>>32-Me):(D=_e<<Me-32|ge>>>64-Me,N=ge<<Me-32|_e>>>64-Me);var fe=x[S[de]];fe.high=D,fe.low=N}var oe=x[0],ve=I[0];for(oe.high=ve.high,oe.low=ve.low,m=0;m<5;m++)for(L=0;L<5;L++){var we=I[de=m+5*L],be=x[de],ht=x[(m+1)%5+5*L],xt=x[(m+2)%5+5*L];we.high=be.high^~ht.high&xt.high,we.low=be.low^~ht.low&xt.low}we=I[0];var Jt=T[l];we.high^=Jt.high,we.low^=Jt.low}},_doFinalize:function(){var P=this._data,R=P.words,I=(this._nDataBytes,8*P.sigBytes),d=32*this.blockSize;R[I>>>5]|=1<<24-I%32,R[(_.ceil((I+1)/d)*d>>>5)-1]|=128,P.sigBytes=4*R.length,this._process();for(var v=this._state,c=this.cfg.outputLength/8,u=c/8,l=[],m=0;m<u;m++){var D=v[m],N=D.high,L=D.low;N=16711935&(N<<8|N>>>24)|4278255360&(N<<24|N>>>8),L=16711935&(L<<8|L>>>24)|4278255360&(L<<24|L>>>8),l.push(L),l.push(N)}return new k.init(l,c)},clone:function(){for(var P=f.clone.call(this),R=P._state=this._state.slice(0),I=0;I<25;I++)R[I]=R[I].clone();return P}});h.SHA3=f._createHelper(O),h.HmacSHA3=f._createHmacHelper(O)}(Math),E.SHA3)},9557:function(C,p,o){var E,_,h,w,k,f,g,s;C.exports=(s=o(9021),o(3240),o(1380),_=(E=s).x64,h=_.Word,w=_.WordArray,k=E.algo,f=k.SHA512,g=k.SHA384=f.extend({_doReset:function(){this._hash=new w.init([new h.init(3418070365,3238371032),new h.init(1654270250,914150663),new h.init(2438529370,812702999),new h.init(355462360,4144912697),new h.init(1731405415,4290775857),new h.init(2394180231,1750603025),new h.init(3675008525,1694076839),new h.init(1203062813,3204075428)])},_doFinalize:function(){var b=f._doFinalize.call(this);return b.sigBytes-=16,b}}),E.SHA384=f._createHelper(g),E.HmacSHA384=f._createHmacHelper(g),s.SHA384)},1380:function(C,p,o){var E;C.exports=(E=o(9021),o(3240),function(){var _=E,h=_.lib.Hasher,w=_.x64,k=w.Word,f=w.WordArray,g=_.algo;function s(){return k.create.apply(k,arguments)}var b=[s(1116352408,3609767458),s(1899447441,602891725),s(3049323471,3964484399),s(3921009573,2173295548),s(961987163,4081628472),s(1508970993,3053834265),s(2453635748,2937671579),s(2870763221,3664609560),s(3624381080,2734883394),s(310598401,1164996542),s(607225278,1323610764),s(1426881987,3590304994),s(1925078388,4068182383),s(2162078206,991336113),s(2614888103,633803317),s(3248222580,3479774868),s(3835390401,2666613458),s(4022224774,944711139),s(264347078,2341262773),s(604807628,2007800933),s(770255983,1495990901),s(1249150122,1856431235),s(1555081692,3175218132),s(1996064986,2198950837),s(2554220882,3999719339),s(2821834349,766784016),s(2952996808,2566594879),s(3210313671,3203337956),s(3336571891,1034457026),s(3584528711,2466948901),s(113926993,3758326383),s(338241895,168717936),s(666307205,1188179964),s(773529912,1546045734),s(1294757372,1522805485),s(1396182291,2643833823),s(1695183700,2343527390),s(1986661051,1014477480),s(2177026350,1206759142),s(2456956037,344077627),s(2730485921,1290863460),s(2820302411,3158454273),s(3259730800,3505952657),s(3345764771,106217008),s(3516065817,3606008344),s(3600352804,1432725776),s(4094571909,1467031594),s(275423344,851169720),s(430227734,3100823752),s(506948616,1363258195),s(659060556,3750685593),s(883997877,3785050280),s(958139571,3318307427),s(1322822218,3812723403),s(1537002063,2003034995),s(1747873779,3602036899),s(1955562222,1575990012),s(2024104815,1125592928),s(2227730452,2716904306),s(2361852424,442776044),s(2428436474,593698344),s(2756734187,3733110249),s(3204031479,2999351573),s(3329325298,3815920427),s(3391569614,3928383900),s(3515267271,566280711),s(3940187606,3454069534),s(4118630271,4000239992),s(116418474,1914138554),s(174292421,2731055270),s(289380356,3203993006),s(460393269,320620315),s(685471733,587496836),s(852142971,1086792851),s(1017036298,365543100),s(1126000580,2618297676),s(1288033470,3409855158),s(1501505948,4234509866),s(1607167915,987167468),s(1816402316,1246189591)],S=[];(function(){for(var x=0;x<80;x++)S[x]=s()})();var T=g.SHA512=h.extend({_doReset:function(){this._hash=new f.init([new k.init(1779033703,4089235720),new k.init(3144134277,2227873595),new k.init(1013904242,4271175723),new k.init(2773480762,1595750129),new k.init(1359893119,2917565137),new k.init(2600822924,725511199),new k.init(528734635,4215389547),new k.init(1541459225,327033209)])},_doProcessBlock:function(x,O){for(var P=this._hash.words,R=P[0],I=P[1],d=P[2],v=P[3],c=P[4],u=P[5],l=P[6],m=P[7],D=R.high,N=R.low,L=I.high,j=I.low,W=d.high,$=d.low,Z=v.high,ne=v.low,de=c.high,ge=c.low,_e=u.high,Me=u.low,fe=l.high,oe=l.low,ve=m.high,we=m.low,be=D,ht=N,xt=L,Jt=j,St=W,Pr=$,Qt=Z,It=ne,jr=de,Nt=ge,Xt=_e,Mr=Me,Br=fe,Fr=oe,Zt=ve,sr=we,Ve=0;Ve<80;Ve++){var Rr,wr,Ae=S[Ve];if(Ve<16)wr=Ae.high=0|x[O+2*Ve],Rr=Ae.low=0|x[O+2*Ve+1];else{var Ot=S[Ve-15],ot=Ot.high,vr=Ot.low,br=(ot>>>1|vr<<31)^(ot>>>8|vr<<24)^ot>>>7,Vr=(vr>>>1|ot<<31)^(vr>>>8|ot<<24)^(vr>>>7|ot<<25),di=S[Ve-2],Mt=di.high,pi=di.low,Pi=(Mt>>>19|pi<<13)^(Mt<<3|pi>>>29)^Mt>>>6,hi=(pi>>>19|Mt<<13)^(pi<<3|Mt>>>29)^(pi>>>6|Mt<<26),ls=S[Ve-7],Wi=ls.high,At=ls.low,We=S[Ve-16],ut=We.high,rt=We.low;wr=(wr=(wr=br+Wi+((Rr=Vr+At)>>>0<Vr>>>0?1:0))+Pi+((Rr+=hi)>>>0<hi>>>0?1:0))+ut+((Rr+=rt)>>>0<rt>>>0?1:0),Ae.high=wr,Ae.low=Rr}var Ue,Er=jr&Xt^~jr&Br,De=Nt&Mr^~Nt&Fr,dr=be&xt^be&St^xt&St,Tr=ht&Jt^ht&Pr^Jt&Pr,Sr=(be>>>28|ht<<4)^(be<<30|ht>>>2)^(be<<25|ht>>>7),Gr=(ht>>>28|be<<4)^(ht<<30|be>>>2)^(ht<<25|be>>>7),ie=(jr>>>14|Nt<<18)^(jr>>>18|Nt<<14)^(jr<<23|Nt>>>9),G=(Nt>>>14|jr<<18)^(Nt>>>18|jr<<14)^(Nt<<23|jr>>>9),ue=b[Ve],Ee=ue.high,Ne=ue.low,dt=Zt+ie+((Ue=sr+G)>>>0<sr>>>0?1:0),Tt=Gr+Tr;Zt=Br,sr=Fr,Br=Xt,Fr=Mr,Xt=jr,Mr=Nt,jr=Qt+(dt=(dt=(dt=dt+Er+((Ue+=De)>>>0<De>>>0?1:0))+Ee+((Ue+=Ne)>>>0<Ne>>>0?1:0))+wr+((Ue+=Rr)>>>0<Rr>>>0?1:0))+((Nt=It+Ue|0)>>>0<It>>>0?1:0)|0,Qt=St,It=Pr,St=xt,Pr=Jt,xt=be,Jt=ht,be=dt+(Sr+dr+(Tt>>>0<Gr>>>0?1:0))+((ht=Ue+Tt|0)>>>0<Ue>>>0?1:0)|0}N=R.low=N+ht,R.high=D+be+(N>>>0<ht>>>0?1:0),j=I.low=j+Jt,I.high=L+xt+(j>>>0<Jt>>>0?1:0),$=d.low=$+Pr,d.high=W+St+($>>>0<Pr>>>0?1:0),ne=v.low=ne+It,v.high=Z+Qt+(ne>>>0<It>>>0?1:0),ge=c.low=ge+Nt,c.high=de+jr+(ge>>>0<Nt>>>0?1:0),Me=u.low=Me+Mr,u.high=_e+Xt+(Me>>>0<Mr>>>0?1:0),oe=l.low=oe+Fr,l.high=fe+Br+(oe>>>0<Fr>>>0?1:0),we=m.low=we+sr,m.high=ve+Zt+(we>>>0<sr>>>0?1:0)},_doFinalize:function(){var x=this._data,O=x.words,P=8*this._nDataBytes,R=8*x.sigBytes;return O[R>>>5]|=128<<24-R%32,O[30+(R+128>>>10<<5)]=Math.floor(P/4294967296),O[31+(R+128>>>10<<5)]=P,x.sigBytes=4*O.length,this._process(),this._hash.toX32()},clone:function(){var x=h.clone.call(this);return x._hash=this._hash.clone(),x},blockSize:32});_.SHA512=h._createHelper(T),_.HmacSHA512=h._createHmacHelper(T)}(),E.SHA512)},7628:function(C,p,o){var E;C.exports=(E=o(9021),o(754),o(4636),o(9506),o(7165),function(){var _=E,h=_.lib,w=h.WordArray,k=h.BlockCipher,f=_.algo,g=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],s=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],b=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],S=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],T=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],x=f.DES=k.extend({_doReset:function(){for(var I=this._key.words,d=[],v=0;v<56;v++){var c=g[v]-1;d[v]=I[c>>>5]>>>31-c%32&1}for(var u=this._subKeys=[],l=0;l<16;l++){var m=u[l]=[],D=b[l];for(v=0;v<24;v++)m[v/6|0]|=d[(s[v]-1+D)%28]<<31-v%6,m[4+(v/6|0)]|=d[28+(s[v+24]-1+D)%28]<<31-v%6;for(m[0]=m[0]<<1|m[0]>>>31,v=1;v<7;v++)m[v]=m[v]>>>4*(v-1)+3;m[7]=m[7]<<5|m[7]>>>27}var N=this._invSubKeys=[];for(v=0;v<16;v++)N[v]=u[15-v]},encryptBlock:function(I,d){this._doCryptBlock(I,d,this._subKeys)},decryptBlock:function(I,d){this._doCryptBlock(I,d,this._invSubKeys)},_doCryptBlock:function(I,d,v){this._lBlock=I[d],this._rBlock=I[d+1],O.call(this,4,252645135),O.call(this,16,65535),P.call(this,2,858993459),P.call(this,8,16711935),O.call(this,1,1431655765);for(var c=0;c<16;c++){for(var u=v[c],l=this._lBlock,m=this._rBlock,D=0,N=0;N<8;N++)D|=S[N][((m^u[N])&T[N])>>>0];this._lBlock=m,this._rBlock=l^D}var L=this._lBlock;this._lBlock=this._rBlock,this._rBlock=L,O.call(this,1,1431655765),P.call(this,8,16711935),P.call(this,2,858993459),O.call(this,16,65535),O.call(this,4,252645135),I[d]=this._lBlock,I[d+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function O(I,d){var v=(this._lBlock>>>I^this._rBlock)&d;this._rBlock^=v,this._lBlock^=v<<I}function P(I,d){var v=(this._rBlock>>>I^this._lBlock)&d;this._lBlock^=v,this._rBlock^=v<<I}_.DES=k._createHelper(x);var R=f.TripleDES=k.extend({_doReset:function(){var I=this._key.words;if(I.length!==2&&I.length!==4&&I.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var d=I.slice(0,2),v=I.length<4?I.slice(0,2):I.slice(2,4),c=I.length<6?I.slice(0,2):I.slice(4,6);this._des1=x.createEncryptor(w.create(d)),this._des2=x.createEncryptor(w.create(v)),this._des3=x.createEncryptor(w.create(c))},encryptBlock:function(I,d){this._des1.encryptBlock(I,d),this._des2.decryptBlock(I,d),this._des3.encryptBlock(I,d)},decryptBlock:function(I,d){this._des3.decryptBlock(I,d),this._des2.encryptBlock(I,d),this._des1.decryptBlock(I,d)},keySize:6,ivSize:2,blockSize:2});_.TripleDES=k._createHelper(R)}(),E.TripleDES)},3240:function(C,p,o){var E;C.exports=(E=o(9021),function(_){var h=E,w=h.lib,k=w.Base,f=w.WordArray,g=h.x64={};g.Word=k.extend({init:function(s,b){this.high=s,this.low=b}}),g.WordArray=k.extend({init:function(s,b){s=this.words=s||[],this.sigBytes=b!=_?b:8*s.length},toX32:function(){for(var s=this.words,b=s.length,S=[],T=0;T<b;T++){var x=s[T];S.push(x.high),S.push(x.low)}return f.create(S,this.sigBytes)},clone:function(){for(var s=k.clone.call(this),b=s.words=this.words.slice(0),S=b.length,T=0;T<S;T++)b[T]=b[T].clone();return s}})}(),E)},7833:(C,p,o)=>{p.formatArgs=function(_){if(_[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+_[0]+(this.useColors?"%c ":" ")+"+"+C.exports.humanize(this.diff),!this.useColors)return;const h="color: "+this.color;_.splice(1,0,h,"color: inherit");let w=0,k=0;_[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(w++,f==="%c"&&(k=w))}),_.splice(k,0,h)},p.save=function(_){try{_?p.storage.setItem("debug",_):p.storage.removeItem("debug")}catch{}},p.load=function(){let _;try{_=p.storage.getItem("debug")}catch{}return!_&&typeof process<"u"&&"env"in process&&(_=r.DEBUG),_},p.useColors=function(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let _;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(_=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(_[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},p.storage=function(){try{return localStorage}catch{}}(),p.destroy=(()=>{let _=!1;return()=>{_||(_=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),p.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],p.log=console.debug||console.log||(()=>{}),C.exports=o(736)(p);const{formatters:E}=C.exports;E.j=function(_){try{return JSON.stringify(_)}catch(h){return"[UnexpectedJSONParseError]: "+h.message}}},736:(C,p,o)=>{C.exports=function(E){function _(k){let f,g,s,b=null;function S(...T){if(!S.enabled)return;const x=S,O=Number(new Date),P=O-(f||O);x.diff=P,x.prev=f,x.curr=O,f=O,T[0]=_.coerce(T[0]),typeof T[0]!="string"&&T.unshift("%O");let R=0;T[0]=T[0].replace(/%([a-zA-Z%])/g,(I,d)=>{if(I==="%%")return"%";R++;const v=_.formatters[d];if(typeof v=="function"){const c=T[R];I=v.call(x,c),T.splice(R,1),R--}return I}),_.formatArgs.call(x,T),(x.log||_.log).apply(x,T)}return S.namespace=k,S.useColors=_.useColors(),S.color=_.selectColor(k),S.extend=h,S.destroy=_.destroy,Object.defineProperty(S,"enabled",{enumerable:!0,configurable:!1,get:()=>b!==null?b:(g!==_.namespaces&&(g=_.namespaces,s=_.enabled(k)),s),set:T=>{b=T}}),typeof _.init=="function"&&_.init(S),S}function h(k,f){const g=_(this.namespace+(f===void 0?":":f)+k);return g.log=this.log,g}function w(k){return k.toString().substring(2,k.toString().length-2).replace(/\.\*\?$/,"*")}return _.debug=_,_.default=_,_.coerce=function(k){return k instanceof Error?k.stack||k.message:k},_.disable=function(){const k=[..._.names.map(w),..._.skips.map(w).map(f=>"-"+f)].join(",");return _.enable(""),k},_.enable=function(k){let f;_.save(k),_.namespaces=k,_.names=[],_.skips=[];const g=(typeof k=="string"?k:"").split(/[\s,]+/),s=g.length;for(f=0;f<s;f++)g[f]&&((k=g[f].replace(/\*/g,".*?"))[0]==="-"?_.skips.push(new RegExp("^"+k.slice(1)+"$")):_.names.push(new RegExp("^"+k+"$")))},_.enabled=function(k){if(k[k.length-1]==="*")return!0;let f,g;for(f=0,g=_.skips.length;f<g;f++)if(_.skips[f].test(k))return!1;for(f=0,g=_.names.length;f<g;f++)if(_.names[f].test(k))return!0;return!1},_.humanize=o(6585),_.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(E).forEach(k=>{_[k]=E[k]}),_.names=[],_.skips=[],_.formatters={},_.selectColor=function(k){let f=0;for(let g=0;g<k.length;g++)f=(f<<5)-f+k.charCodeAt(g),f|=0;return _.colors[Math.abs(f)%_.colors.length]},_.enable(_.load()),_}},4903:C=>{var p=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};C.exports=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return p()}try{return __global__||p()}finally{delete Object.prototype.__global__}}()},7007:C=>{var p,o=typeof Reflect=="object"?Reflect:null,E=o&&typeof o.apply=="function"?o.apply:function(P,R,I){return Function.prototype.apply.call(P,R,I)};p=o&&typeof o.ownKeys=="function"?o.ownKeys:Object.getOwnPropertySymbols?function(P){return Object.getOwnPropertyNames(P).concat(Object.getOwnPropertySymbols(P))}:function(P){return Object.getOwnPropertyNames(P)};var _=Number.isNaN||function(P){return P!=P};function h(){h.init.call(this)}C.exports=h,C.exports.once=function(P,R){return new Promise(function(I,d){function v(u){P.removeListener(R,c),d(u)}function c(){typeof P.removeListener=="function"&&P.removeListener("error",v),I([].slice.call(arguments))}O(P,R,c,{once:!0}),R!=="error"&&function(u,l,m){typeof u.on=="function"&&O(u,"error",l,m)}(P,v,{once:!0})})},h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var w=10;function k(P){if(typeof P!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof P)}function f(P){return P._maxListeners===void 0?h.defaultMaxListeners:P._maxListeners}function g(P,R,I,d){var v,c,u,l;if(k(I),(c=P._events)===void 0?(c=P._events=Object.create(null),P._eventsCount=0):(c.newListener!==void 0&&(P.emit("newListener",R,I.listener?I.listener:I),c=P._events),u=c[R]),u===void 0)u=c[R]=I,++P._eventsCount;else if(typeof u=="function"?u=c[R]=d?[I,u]:[u,I]:d?u.unshift(I):u.push(I),(v=f(P))>0&&u.length>v&&!u.warned){u.warned=!0;var m=new Error("Possible EventEmitter memory leak detected. "+u.length+" "+String(R)+" listeners added. Use emitter.setMaxListeners() to increase limit");m.name="MaxListenersExceededWarning",m.emitter=P,m.type=R,m.count=u.length,l=m,console&&console.warn&&console.warn(l)}return P}function s(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function b(P,R,I){var d={fired:!1,wrapFn:void 0,target:P,type:R,listener:I},v=s.bind(d);return v.listener=I,d.wrapFn=v,v}function S(P,R,I){var d=P._events;if(d===void 0)return[];var v=d[R];return v===void 0?[]:typeof v=="function"?I?[v.listener||v]:[v]:I?function(c){for(var u=new Array(c.length),l=0;l<u.length;++l)u[l]=c[l].listener||c[l];return u}(v):x(v,v.length)}function T(P){var R=this._events;if(R!==void 0){var I=R[P];if(typeof I=="function")return 1;if(I!==void 0)return I.length}return 0}function x(P,R){for(var I=new Array(R),d=0;d<R;++d)I[d]=P[d];return I}function O(P,R,I,d){if(typeof P.on=="function")d.once?P.once(R,I):P.on(R,I);else{if(typeof P.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof P);P.addEventListener(R,function v(c){d.once&&P.removeEventListener(R,v),I(c)})}}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return w},set:function(P){if(typeof P!="number"||P<0||_(P))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+P+".");w=P}}),h.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(P){if(typeof P!="number"||P<0||_(P))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+P+".");return this._maxListeners=P,this},h.prototype.getMaxListeners=function(){return f(this)},h.prototype.emit=function(P){for(var R=[],I=1;I<arguments.length;I++)R.push(arguments[I]);var d=P==="error",v=this._events;if(v!==void 0)d=d&&v.error===void 0;else if(!d)return!1;if(d){var c;if(R.length>0&&(c=R[0]),c instanceof Error)throw c;var u=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw u.context=c,u}var l=v[P];if(l===void 0)return!1;if(typeof l=="function")E(l,this,R);else{var m=l.length,D=x(l,m);for(I=0;I<m;++I)E(D[I],this,R)}return!0},h.prototype.addListener=function(P,R){return g(this,P,R,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(P,R){return g(this,P,R,!0)},h.prototype.once=function(P,R){return k(R),this.on(P,b(this,P,R)),this},h.prototype.prependOnceListener=function(P,R){return k(R),this.prependListener(P,b(this,P,R)),this},h.prototype.removeListener=function(P,R){var I,d,v,c,u;if(k(R),(d=this._events)===void 0)return this;if((I=d[P])===void 0)return this;if(I===R||I.listener===R)--this._eventsCount==0?this._events=Object.create(null):(delete d[P],d.removeListener&&this.emit("removeListener",P,I.listener||R));else if(typeof I!="function"){for(v=-1,c=I.length-1;c>=0;c--)if(I[c]===R||I[c].listener===R){u=I[c].listener,v=c;break}if(v<0)return this;v===0?I.shift():function(l,m){for(;m+1<l.length;m++)l[m]=l[m+1];l.pop()}(I,v),I.length===1&&(d[P]=I[0]),d.removeListener!==void 0&&this.emit("removeListener",P,u||R)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(P){var R,I,d;if((I=this._events)===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[P]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete I[P]),this;if(arguments.length===0){var v,c=Object.keys(I);for(d=0;d<c.length;++d)(v=c[d])!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(R=I[P])=="function")this.removeListener(P,R);else if(R!==void 0)for(d=R.length-1;d>=0;d--)this.removeListener(P,R[d]);return this},h.prototype.listeners=function(P){return S(this,P,!0)},h.prototype.rawListeners=function(P){return S(this,P,!1)},h.listenerCount=function(P,R){return typeof P.listenerCount=="function"?P.listenerCount(R):T.call(P,R)},h.prototype.listenerCount=T,h.prototype.eventNames=function(){return this._eventsCount>0?p(this._events):[]}},3582:function(C,p,o){var E=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(p,"__esModule",{value:!0}),p.Logger=void 0;const _=E(o(7833)),h="h264-profile-level-id";p.Logger=class{constructor(w){w?(this._debug=(0,_.default)(`${h}:${w}`),this._warn=(0,_.default)(`${h}:WARN:${w}`),this._error=(0,_.default)(`${h}:ERROR:${w}`)):(this._debug=(0,_.default)(h),this._warn=(0,_.default)(`${h}:WARN`),this._error=(0,_.default)(`${h}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},3200:(C,p,o)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.generateProfileLevelIdStringForAnswer=p.isSameProfile=p.parseSdpProfileLevelId=p.levelToString=p.profileToString=p.profileLevelIdToString=p.parseProfileLevelId=p.ProfileLevelId=p.Level=p.Profile=void 0;const E=new(o(3582)).Logger;var _,h;(function(P){P[P.ConstrainedBaseline=1]="ConstrainedBaseline",P[P.Baseline=2]="Baseline",P[P.Main=3]="Main",P[P.ConstrainedHigh=4]="ConstrainedHigh",P[P.High=5]="High",P[P.PredictiveHigh444=6]="PredictiveHigh444"})(_||(p.Profile=_={})),function(P){P[P.L1_b=0]="L1_b",P[P.L1=10]="L1",P[P.L1_1=11]="L1_1",P[P.L1_2=12]="L1_2",P[P.L1_3=13]="L1_3",P[P.L2=20]="L2",P[P.L2_1=21]="L2_1",P[P.L2_2=22]="L2_2",P[P.L3=30]="L3",P[P.L3_1=31]="L3_1",P[P.L3_2=32]="L3_2",P[P.L4=40]="L4",P[P.L4_1=41]="L4_1",P[P.L4_2=42]="L4_2",P[P.L5=50]="L5",P[P.L5_1=51]="L5_1",P[P.L5_2=52]="L5_2"}(h||(p.Level=h={}));class w{constructor(R,I){this.profile=R,this.level=I}}p.ProfileLevelId=w;const k=new w(_.ConstrainedBaseline,h.L3_1);class f{constructor(R){this.mask=~x("x",R),this.masked_value=x("1",R)}isMatch(R){return this.masked_value===(R&this.mask)}}class g{constructor(R,I,d){this.profile_idc=R,this.profile_iop=I,this.profile=d}}const s=[new g(66,new f("x1xx0000"),_.ConstrainedBaseline),new g(77,new f("1xxx0000"),_.ConstrainedBaseline),new g(88,new f("11xx0000"),_.ConstrainedBaseline),new g(66,new f("x0xx0000"),_.Baseline),new g(88,new f("10xx0000"),_.Baseline),new g(77,new f("0x0x0000"),_.Main),new g(100,new f("00000000"),_.High),new g(100,new f("00001100"),_.ConstrainedHigh),new g(244,new f("00000000"),_.PredictiveHigh444)];function b(P){if(typeof P!="string"||P.length!==6)return;const R=parseInt(P,16);if(R===0)return;const I=255&R,d=R>>8&255,v=R>>16&255;let c;switch(I){case h.L1_1:c=16&d?h.L1_b:h.L1_1;break;case h.L1:case h.L1_2:case h.L1_3:case h.L2:case h.L2_1:case h.L2_2:case h.L3:case h.L3_1:case h.L3_2:case h.L4:case h.L4_1:case h.L4_2:case h.L5:case h.L5_1:case h.L5_2:c=I;break;default:return void E.warn(`parseProfileLevelId() | unrecognized level_idc [str:${P}, level_idc:${I}]`)}for(const u of s)if(v===u.profile_idc&&u.profile_iop.isMatch(d))return new w(u.profile,c);E.warn(`parseProfileLevelId() | unrecognized profile_idc/profile_iop combination [str:${P}, profile_idc:${v}, profile_iop:${d}]`)}function S(P){if(P.level==h.L1_b)switch(P.profile){case _.ConstrainedBaseline:return"42f00b";case _.Baseline:return"42100b";case _.Main:return"4d100b";default:return void E.warn(`profileLevelIdToString() | Level 1_b not is allowed for profile ${P.profile}`)}let R;switch(P.profile){case _.ConstrainedBaseline:R="42e0";break;case _.Baseline:R="4200";break;case _.Main:R="4d00";break;case _.ConstrainedHigh:R="640c";break;case _.High:R="6400";break;case _.PredictiveHigh444:R="f400";break;default:return void E.warn(`profileLevelIdToString() | unrecognized profile ${P.profile}`)}let I=P.level.toString(16);return I.length===1&&(I=`0${I}`),`${R}${I}`}function T(P={}){const R=P["profile-level-id"];return R?b(R):k}function x(P,R){return+(R[0]===P)<<7|+(R[1]===P)<<6|+(R[2]===P)<<5|+(R[3]===P)<<4|+(R[4]===P)<<3|+(R[5]===P)<<2|+(R[6]===P)<<1|+(R[7]===P)}function O(P={}){const R=P["level-asymmetry-allowed"];return R===!0||R===1||R==="1"}p.parseProfileLevelId=b,p.profileLevelIdToString=S,p.profileToString=function(P){switch(P){case _.ConstrainedBaseline:return"ConstrainedBaseline";case _.Baseline:return"Baseline";case _.Main:return"Main";case _.ConstrainedHigh:return"ConstrainedHigh";case _.High:return"High";case _.PredictiveHigh444:return"PredictiveHigh444";default:return void E.warn(`profileToString() | unrecognized profile ${P}`)}},p.levelToString=function(P){switch(P){case h.L1_b:return"1b";case h.L1:return"1";case h.L1_1:return"1.1";case h.L1_2:return"1.2";case h.L1_3:return"1.3";case h.L2:return"2";case h.L2_1:return"2.1";case h.L2_2:return"2.2";case h.L3:return"3";case h.L3_1:return"3.1";case h.L3_2:return"3.2";case h.L4:return"4";case h.L4_1:return"4.1";case h.L4_2:return"4.2";case h.L5:return"5";case h.L5_1:return"5.1";case h.L5_2:return"5.2";default:return void E.warn(`levelToString() | unrecognized level ${P}`)}},p.parseSdpProfileLevelId=T,p.isSameProfile=function(P={},R={}){const I=T(P),d=T(R);return!!(I&&d&&I.profile===d.profile)},p.generateProfileLevelIdStringForAnswer=function(P={},R={}){if(!P["profile-level-id"]&&!R["profile-level-id"])return void E.warn("generateProfileLevelIdStringForAnswer() | profile-level-id missing in local and remote params");const I=T(P),d=T(R);if(!I)throw new TypeError("invalid local_profile_level_id");if(!d)throw new TypeError("invalid remote_profile_level_id");if(I.profile!==d.profile)throw new TypeError("H264 Profile mismatch");const v=O(P)&&O(R),c=I.level,u=d.level,l=function(L,j){return L===h.L1_b?j!==h.L1&&j!==h.L1_b:j===h.L1_b?L!==h.L1:L<j}(m=c,D=u)?m:D;var m,D;const N=v?c:l;return E.debug(`generateProfileLevelIdStringForAnswer() | result [profile:${I.profile}, level:${N}]`),S(new w(I.profile,N))}},328:(C,p,o)=>{o(8624),C.exports=self.fetch.bind(self)},2215:(C,p,o)=>{var E,_;(function(h){(_=typeof(E=h)=="function"?E.call(p,o,p,C):E)===void 0||(C.exports=_),C.exports=h()})(function(){function h(){for(var k=0,f={};k<arguments.length;k++){var g=arguments[k];for(var s in g)f[s]=g[s]}return f}function w(k){return k.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}return function k(f){function g(){}function s(S,T,x){if(typeof document<"u"){typeof(x=h({path:"/"},g.defaults,x)).expires=="number"&&(x.expires=new Date(1*new Date+864e5*x.expires)),x.expires=x.expires?x.expires.toUTCString():"";try{var O=JSON.stringify(T);/^[\{\[]/.test(O)&&(T=O)}catch{}T=f.write?f.write(T,S):encodeURIComponent(String(T)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),S=encodeURIComponent(String(S)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var P="";for(var R in x)x[R]&&(P+="; "+R,x[R]!==!0&&(P+="="+x[R].split(";")[0]));return document.cookie=S+"="+T+P}}function b(S,T){if(typeof document<"u"){for(var x={},O=document.cookie?document.cookie.split("; "):[],P=0;P<O.length;P++){var R=O[P].split("="),I=R.slice(1).join("=");T||I.charAt(0)!=='"'||(I=I.slice(1,-1));try{var d=w(R[0]);if(I=(f.read||f)(I,d)||w(I),T)try{I=JSON.parse(I)}catch{}if(x[d]=I,S===d)break}catch{}}return S?x[S]:x}}return g.set=s,g.get=function(S){return b(S,!1)},g.getJSON=function(S){return b(S,!0)},g.remove=function(S,T){s(S,"",h(T,{expires:-1}))},g.defaults={},g.withConverter=k,g}(function(){})})},7654:(C,p,o)=>{var E="__lodash_hash_undefined__",_="[object Function]",h="[object GeneratorFunction]",w=/^\[object .+?Constructor\]$/,k=typeof o.g=="object"&&o.g&&o.g.Object===Object&&o.g,f=typeof self=="object"&&self&&self.Object===Object&&self,g=k||f||Function("return this")(),s,b=Array.prototype,S=Function.prototype,T=Object.prototype,x=g["__core-js_shared__"],O=(s=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"",P=S.toString,R=T.hasOwnProperty,I=T.toString,d=RegExp("^"+P.call(R).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),v=b.splice,c=W(g,"Map"),u=W(Object,"create");function l(ne){var de=-1,ge=ne?ne.length:0;for(this.clear();++de<ge;){var _e=ne[de];this.set(_e[0],_e[1])}}function m(ne){var de=-1,ge=ne?ne.length:0;for(this.clear();++de<ge;){var _e=ne[de];this.set(_e[0],_e[1])}}function D(ne){var de=-1,ge=ne?ne.length:0;for(this.clear();++de<ge;){var _e=ne[de];this.set(_e[0],_e[1])}}function N(ne,de){for(var ge,_e,Me=ne.length;Me--;)if((ge=ne[Me][0])===(_e=de)||ge!=ge&&_e!=_e)return Me;return-1}function L(ne){if(!Z(ne)||(de=ne,O&&O in de))return!1;var de,ge=function(_e){var Me=Z(_e)?I.call(_e):"";return Me==_||Me==h}(ne)||function(_e){var Me=!1;if(_e!=null&&typeof _e.toString!="function")try{Me=!!(_e+"")}catch{}return Me}(ne)?d:w;return ge.test(function(_e){if(_e!=null){try{return P.call(_e)}catch{}try{return _e+""}catch{}}return""}(ne))}function j(ne,de){var ge,_e,Me=ne.__data__;return((_e=typeof(ge=de))=="string"||_e=="number"||_e=="symbol"||_e=="boolean"?ge!=="__proto__":ge===null)?Me[typeof de=="string"?"string":"hash"]:Me.map}function W(ne,de){var ge=function(_e,Me){return _e==null?void 0:_e[Me]}(ne,de);return L(ge)?ge:void 0}function $(ne,de){if(typeof ne!="function"||de&&typeof de!="function")throw new TypeError("Expected a function");var ge=function(){var _e=arguments,Me=de?de.apply(this,_e):_e[0],fe=ge.cache;if(fe.has(Me))return fe.get(Me);var oe=ne.apply(this,_e);return ge.cache=fe.set(Me,oe),oe};return ge.cache=new($.Cache||D),ge}function Z(ne){var de=typeof ne;return!!ne&&(de=="object"||de=="function")}l.prototype.clear=function(){this.__data__=u?u(null):{}},l.prototype.delete=function(ne){return this.has(ne)&&delete this.__data__[ne]},l.prototype.get=function(ne){var de=this.__data__;if(u){var ge=de[ne];return ge===E?void 0:ge}return R.call(de,ne)?de[ne]:void 0},l.prototype.has=function(ne){var de=this.__data__;return u?de[ne]!==void 0:R.call(de,ne)},l.prototype.set=function(ne,de){return this.__data__[ne]=u&&de===void 0?E:de,this},m.prototype.clear=function(){this.__data__=[]},m.prototype.delete=function(ne){var de=this.__data__,ge=N(de,ne);return!(ge<0)&&(ge==de.length-1?de.pop():v.call(de,ge,1),!0)},m.prototype.get=function(ne){var de=this.__data__,ge=N(de,ne);return ge<0?void 0:de[ge][1]},m.prototype.has=function(ne){return N(this.__data__,ne)>-1},m.prototype.set=function(ne,de){var ge=this.__data__,_e=N(ge,ne);return _e<0?ge.push([ne,de]):ge[_e][1]=de,this},D.prototype.clear=function(){this.__data__={hash:new l,map:new(c||m),string:new l}},D.prototype.delete=function(ne){return j(this,ne).delete(ne)},D.prototype.get=function(ne){return j(this,ne).get(ne)},D.prototype.has=function(ne){return j(this,ne).has(ne)},D.prototype.set=function(ne,de){return j(this,ne).set(ne,de),this},$.Cache=D,C.exports=$},3518:(C,p,o)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Consumer=void 0;const E=o(2994),_=o(2010),h=o(4893),w=new E.Logger("Consumer");class k extends _.EnhancedEventEmitter{constructor({id:g,localId:s,producerId:b,rtpReceiver:S,track:T,rtpParameters:x,appData:O}){super(),this._closed=!1,this._observer=new _.EnhancedEventEmitter,w.debug("constructor()"),this._id=g,this._localId=s,this._producerId=b,this._rtpReceiver=S,this._track=T,this._rtpParameters=x,this._paused=!T.enabled,this._appData=O||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get producerId(){return this._producerId}get closed(){return this._closed}get kind(){return this._track.kind}get rtpReceiver(){return this._rtpReceiver}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get appData(){return this._appData}set appData(g){this._appData=g}get observer(){return this._observer}close(){this._closed||(w.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(w.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new h.InvalidStateError("closed");return new Promise((g,s)=>{this.safeEmit("@getstats",g,s)})}pause(){w.debug("pause()"),this._closed?w.error("pause() | Consumer closed"):this._paused?w.debug("pause() | Consumer is already paused"):(this._paused=!0,this._track.enabled=!1,this.emit("@pause"),this._observer.safeEmit("pause"))}resume(){w.debug("resume()"),this._closed?w.error("resume() | Consumer closed"):this._paused?(this._paused=!1,this._track.enabled=!0,this.emit("@resume"),this._observer.safeEmit("resume")):w.debug("resume() | Consumer is already resumed")}onTrackEnded(){w.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){try{this._track.removeEventListener("ended",this.onTrackEnded),this._track.stop()}catch{}}}p.Consumer=k},9166:(C,p,o)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.DataConsumer=void 0;const E=o(2994),_=o(2010),h=new E.Logger("DataConsumer");class w extends _.EnhancedEventEmitter{constructor({id:f,dataProducerId:g,dataChannel:s,sctpStreamParameters:b,appData:S}){super(),this._closed=!1,this._observer=new _.EnhancedEventEmitter,h.debug("constructor()"),this._id=f,this._dataProducerId=g,this._dataChannel=s,this._sctpStreamParameters=b,this._appData=S||{},this.handleDataChannel()}get id(){return this._id}get dataProducerId(){return this._dataProducerId}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get binaryType(){return this._dataChannel.binaryType}set binaryType(f){this._dataChannel.binaryType=f}get appData(){return this._appData}set appData(f){this._appData=f}get observer(){return this._observer}close(){this._closed||(h.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(h.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(h.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",f=>{if(this._closed)return;let{error:g}=f;g||(g=new Error("unknown DataChannel error")),g.errorDetail==="sctp-failure"?h.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",g.sctpCauseCode,g.message):h.error('DataChannel "error" event: %o',g),this.safeEmit("error",g)}),this._dataChannel.addEventListener("close",()=>{this._closed||(h.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",f=>{this._closed||this.safeEmit("message",f.data)})}}p.DataConsumer=w},7504:(C,p,o)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.DataProducer=void 0;const E=o(2994),_=o(2010),h=o(4893),w=new E.Logger("DataProducer");class k extends _.EnhancedEventEmitter{constructor({id:g,dataChannel:s,sctpStreamParameters:b,appData:S}){super(),this._closed=!1,this._observer=new _.EnhancedEventEmitter,w.debug("constructor()"),this._id=g,this._dataChannel=s,this._sctpStreamParameters=b,this._appData=S||{},this.handleDataChannel()}get id(){return this._id}get closed(){return this._closed}get sctpStreamParameters(){return this._sctpStreamParameters}get readyState(){return this._dataChannel.readyState}get label(){return this._dataChannel.label}get protocol(){return this._dataChannel.protocol}get bufferedAmount(){return this._dataChannel.bufferedAmount}get bufferedAmountLowThreshold(){return this._dataChannel.bufferedAmountLowThreshold}set bufferedAmountLowThreshold(g){this._dataChannel.bufferedAmountLowThreshold=g}get appData(){return this._appData}set appData(g){this._appData=g}get observer(){return this._observer}close(){this._closed||(w.debug("close()"),this._closed=!0,this._dataChannel.close(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(w.debug("transportClosed()"),this._closed=!0,this._dataChannel.close(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}send(g){if(w.debug("send()"),this._closed)throw new h.InvalidStateError("closed");this._dataChannel.send(g)}handleDataChannel(){this._dataChannel.addEventListener("open",()=>{this._closed||(w.debug('DataChannel "open" event'),this.safeEmit("open"))}),this._dataChannel.addEventListener("error",g=>{if(this._closed)return;let{error:s}=g;s||(s=new Error("unknown DataChannel error")),s.errorDetail==="sctp-failure"?w.error("DataChannel SCTP error [sctpCauseCode:%s]: %s",s.sctpCauseCode,s.message):w.error('DataChannel "error" event: %o',s),this.safeEmit("error",s)}),this._dataChannel.addEventListener("close",()=>{this._closed||(w.warn('DataChannel "close" event'),this._closed=!0,this.emit("@close"),this.safeEmit("close"),this._observer.safeEmit("close"))}),this._dataChannel.addEventListener("message",()=>{this._closed||w.warn('DataChannel "message" event in a DataProducer, message discarded')}),this._dataChannel.addEventListener("bufferedamountlow",()=>{this._closed||this.safeEmit("bufferedamountlow")})}}p.DataProducer=k},6004:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(L,j,W,$){$===void 0&&($=W);var Z=Object.getOwnPropertyDescriptor(j,W);Z&&!("get"in Z?!j.__esModule:Z.writable||Z.configurable)||(Z={enumerable:!0,get:function(){return j[W]}}),Object.defineProperty(L,$,Z)}:function(L,j,W,$){$===void 0&&($=W),L[$]=j[W]}),_=this&&this.__setModuleDefault||(Object.create?function(L,j){Object.defineProperty(L,"default",{enumerable:!0,value:j})}:function(L,j){L.default=j}),h=this&&this.__importStar||function(L){if(L&&L.__esModule)return L;var j={};if(L!=null)for(var W in L)W!=="default"&&Object.prototype.hasOwnProperty.call(L,W)&&E(j,L,W);return _(j,L),j};Object.defineProperty(p,"__esModule",{value:!0}),p.Device=p.detectDevice=void 0;const w=o(7232),k=o(2994),f=o(2010),g=o(4893),s=h(o(1765)),b=h(o(8046)),S=o(5601),T=o(2183),x=o(11),O=o(5535),P=o(8155),R=o(7402),I=o(2292),d=o(1767),v=o(5765),c=o(9676),u=o(8633),l=o(4039),m=o(9352),D=new k.Logger("Device");function N(){var L,j,W,$;if(typeof navigator=="object"&&navigator.product==="ReactNative")return D.debug("detectDevice() | React-Native detected"),typeof RTCPeerConnection>"u"?void D.warn("detectDevice() | unsupported react-native-webrtc without RTCPeerConnection, forgot to call registerGlobals()?"):typeof RTCRtpTransceiver<"u"?(D.debug("detectDevice() | ReactNative UnifiedPlan handler chosen"),"ReactNativeUnifiedPlan"):(D.debug("detectDevice() | ReactNative PlanB handler chosen"),"ReactNative");if(typeof navigator!="object"||typeof navigator.userAgent!="string")D.warn("detectDevice() | unknown device");else{const Z=navigator.userAgent,ne=new w.UAParser(Z);D.debug("detectDevice() | browser detected [ua:%s, parsed:%o]",Z,ne.getResult());const de=ne.getBrowser(),ge=(L=de.name)==null?void 0:L.toLowerCase(),_e=parseInt(de.major??"0"),Me=ne.getEngine(),fe=(j=Me.name)==null?void 0:j.toLowerCase(),oe=ne.getOS(),ve=(W=oe.name)==null?void 0:W.toLowerCase(),we=parseFloat(oe.version??"0"),be=ne.getDevice(),ht=($=be.model)==null?void 0:$.toLowerCase(),xt=ve==="ios"||ht==="ipad",Jt=ge&&["chrome","chromium","mobile chrome","chrome webview","chrome headless"].includes(ge),St=ge&&["firefox","mobile firefox","mobile focus"].includes(ge),Pr=ge&&["safari","mobile safari"].includes(ge),Qt=ge&&["edge"].includes(ge);if((Jt||Qt)&&!xt&&_e>=111)return"Chrome111";if(Jt&&!xt&&_e>=74||Qt&&!xt&&_e>=88)return"Chrome74";if(Jt&&!xt&&_e>=70)return"Chrome70";if(Jt&&!xt&&_e>=67)return"Chrome67";if(Jt&&!xt&&_e>=55)return"Chrome55";if(St&&!xt&&_e>=120)return"Firefox120";if(St&&!xt&&_e>=60)return"Firefox60";if(St&&xt&&we>=14.3||Pr&&_e>=12&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(Pr&&_e>=11)return"Safari11";if(Qt&&!xt&&_e>=11&&_e<=18)return"Edge11";if(fe==="webkit"&&xt&&typeof RTCRtpTransceiver<"u"&&RTCRtpTransceiver.prototype.hasOwnProperty("currentDirection"))return"Safari12";if(fe==="blink"){const It=Z.match(/(?:(?:Chrome|Chromium))[ /](\w+)/i);if(It){const jr=Number(It[1]);return jr>=111?"Chrome111":jr>=74?"Chrome74":jr>=70?"Chrome70":jr>=67?"Chrome67":"Chrome55"}return"Chrome111"}D.warn("detectDevice() | browser not supported [name:%s, version:%s]",ge,_e)}}p.detectDevice=N,p.Device=class{constructor({handlerName:L,handlerFactory:j,Handler:W}={}){if(this._loaded=!1,this._observer=new f.EnhancedEventEmitter,D.debug("constructor()"),W){if(D.warn("constructor() | Handler option is DEPRECATED, use handlerName or handlerFactory instead"),typeof W!="string")throw new TypeError("non string Handler option no longer supported, use handlerFactory instead");L=W}if(L&&j)throw new TypeError("just one of handlerName or handlerInterface can be given");if(j)this._handlerFactory=j;else{if(L)D.debug("constructor() | handler given: %s",L);else{if(!(L=N()))throw new g.UnsupportedError("device not supported");D.debug("constructor() | detected handler: %s",L)}switch(L){case"Chrome111":this._handlerFactory=T.Chrome111.createFactory();break;case"Chrome74":this._handlerFactory=x.Chrome74.createFactory();break;case"Chrome70":this._handlerFactory=O.Chrome70.createFactory();break;case"Chrome67":this._handlerFactory=P.Chrome67.createFactory();break;case"Chrome55":this._handlerFactory=R.Chrome55.createFactory();break;case"Firefox120":this._handlerFactory=I.Firefox120.createFactory();break;case"Firefox60":this._handlerFactory=d.Firefox60.createFactory();break;case"Safari12":this._handlerFactory=v.Safari12.createFactory();break;case"Safari11":this._handlerFactory=c.Safari11.createFactory();break;case"Edge11":this._handlerFactory=u.Edge11.createFactory();break;case"ReactNativeUnifiedPlan":this._handlerFactory=l.ReactNativeUnifiedPlan.createFactory();break;case"ReactNative":this._handlerFactory=m.ReactNative.createFactory();break;default:throw new TypeError(`unknown handlerName "${L}"`)}}const $=this._handlerFactory();this._handlerName=$.name,$.close(),this._extendedRtpCapabilities=void 0,this._recvRtpCapabilities=void 0,this._canProduceByKind={audio:!1,video:!1},this._sctpCapabilities=void 0}get handlerName(){return this._handlerName}get loaded(){return this._loaded}get rtpCapabilities(){if(!this._loaded)throw new g.InvalidStateError("not loaded");return this._recvRtpCapabilities}get sctpCapabilities(){if(!this._loaded)throw new g.InvalidStateError("not loaded");return this._sctpCapabilities}get observer(){return this._observer}async load({routerRtpCapabilities:L}){let j;D.debug("load() [routerRtpCapabilities:%o]",L);try{if(this._loaded)throw new g.InvalidStateError("already loaded");const W=s.clone(L);b.validateRtpCapabilities(W),j=this._handlerFactory();const $=await j.getNativeRtpCapabilities();D.debug("load() | got native RTP capabilities:%o",$);const Z=s.clone($);b.validateRtpCapabilities(Z),this._extendedRtpCapabilities=b.getExtendedRtpCapabilities(Z,W),D.debug("load() | got extended RTP capabilities:%o",this._extendedRtpCapabilities),this._canProduceByKind.audio=b.canSend("audio",this._extendedRtpCapabilities),this._canProduceByKind.video=b.canSend("video",this._extendedRtpCapabilities),this._recvRtpCapabilities=b.getRecvRtpCapabilities(this._extendedRtpCapabilities),b.validateRtpCapabilities(this._recvRtpCapabilities),D.debug("load() | got receiving RTP capabilities:%o",this._recvRtpCapabilities),this._sctpCapabilities=await j.getNativeSctpCapabilities(),D.debug("load() | got native SCTP capabilities:%o",this._sctpCapabilities),b.validateSctpCapabilities(this._sctpCapabilities),D.debug("load() succeeded"),this._loaded=!0,j.close()}catch(W){throw j&&j.close(),W}}canProduce(L){if(!this._loaded)throw new g.InvalidStateError("not loaded");if(L!=="audio"&&L!=="video")throw new TypeError(`invalid kind "${L}"`);return this._canProduceByKind[L]}createSendTransport({id:L,iceParameters:j,iceCandidates:W,dtlsParameters:$,sctpParameters:Z,iceServers:ne,iceTransportPolicy:de,additionalSettings:ge,proprietaryConstraints:_e,appData:Me}){return D.debug("createSendTransport()"),this.createTransport({direction:"send",id:L,iceParameters:j,iceCandidates:W,dtlsParameters:$,sctpParameters:Z,iceServers:ne,iceTransportPolicy:de,additionalSettings:ge,proprietaryConstraints:_e,appData:Me})}createRecvTransport({id:L,iceParameters:j,iceCandidates:W,dtlsParameters:$,sctpParameters:Z,iceServers:ne,iceTransportPolicy:de,additionalSettings:ge,proprietaryConstraints:_e,appData:Me}){return D.debug("createRecvTransport()"),this.createTransport({direction:"recv",id:L,iceParameters:j,iceCandidates:W,dtlsParameters:$,sctpParameters:Z,iceServers:ne,iceTransportPolicy:de,additionalSettings:ge,proprietaryConstraints:_e,appData:Me})}createTransport({direction:L,id:j,iceParameters:W,iceCandidates:$,dtlsParameters:Z,sctpParameters:ne,iceServers:de,iceTransportPolicy:ge,additionalSettings:_e,proprietaryConstraints:Me,appData:fe}){if(!this._loaded)throw new g.InvalidStateError("not loaded");if(typeof j!="string")throw new TypeError("missing id");if(typeof W!="object")throw new TypeError("missing iceParameters");if(!Array.isArray($))throw new TypeError("missing iceCandidates");if(typeof Z!="object")throw new TypeError("missing dtlsParameters");if(ne&&typeof ne!="object")throw new TypeError("wrong sctpParameters");if(fe&&typeof fe!="object")throw new TypeError("if given, appData must be an object");const oe=new S.Transport({direction:L,id:j,iceParameters:W,iceCandidates:$,dtlsParameters:Z,sctpParameters:ne,iceServers:de,iceTransportPolicy:ge,additionalSettings:_e,proprietaryConstraints:Me,appData:fe,handlerFactory:this._handlerFactory,extendedRtpCapabilities:this._extendedRtpCapabilities,canProduceByKind:this._canProduceByKind});return this._observer.safeEmit("newtransport",oe),oe}}},2010:(C,p,o)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.EnhancedEventEmitter=void 0;const E=o(7007),_=new(o(2994)).Logger("EnhancedEventEmitter");class h extends E.EventEmitter{constructor(){super(),this.setMaxListeners(1/0)}emit(k,...f){return super.emit(k,...f)}safeEmit(k,...f){const g=super.listenerCount(k);try{return super.emit(k,...f)}catch(s){return _.error("safeEmit() | event listener threw an error [eventName:%s]:%o",k,s),!!g}}on(k,f){return super.on(k,f),this}off(k,f){return super.off(k,f),this}addListener(k,f){return super.on(k,f),this}prependListener(k,f){return super.prependListener(k,f),this}once(k,f){return super.once(k,f),this}prependOnceListener(k,f){return super.prependOnceListener(k,f),this}removeListener(k,f){return super.off(k,f),this}removeAllListeners(k){return super.removeAllListeners(k),this}listenerCount(k){return super.listenerCount(k)}listeners(k){return super.listeners(k)}rawListeners(k){return super.rawListeners(k)}}p.EnhancedEventEmitter=h},2994:function(C,p,o){var E=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}};Object.defineProperty(p,"__esModule",{value:!0}),p.Logger=void 0;const _=E(o(7833)),h="mediasoup-client";p.Logger=class{constructor(w){w?(this._debug=(0,_.default)(`${h}:${w}`),this._warn=(0,_.default)(`${h}:WARN:${w}`),this._error=(0,_.default)(`${h}:ERROR:${w}`)):(this._debug=(0,_.default)(h),this._warn=(0,_.default)(`${h}:WARN`),this._error=(0,_.default)(`${h}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},9792:(C,p,o)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.Producer=void 0;const E=o(2994),_=o(2010),h=o(4893),w=new E.Logger("Producer");class k extends _.EnhancedEventEmitter{constructor({id:g,localId:s,rtpSender:b,track:S,rtpParameters:T,stopTracks:x,disableTrackOnPause:O,zeroRtpOnPause:P,appData:R}){super(),this._closed=!1,this._observer=new _.EnhancedEventEmitter,w.debug("constructor()"),this._id=g,this._localId=s,this._rtpSender=b,this._track=S,this._kind=S.kind,this._rtpParameters=T,this._paused=!!O&&!S.enabled,this._maxSpatialLayer=void 0,this._stopTracks=x,this._disableTrackOnPause=O,this._zeroRtpOnPause=P,this._appData=R||{},this.onTrackEnded=this.onTrackEnded.bind(this),this.handleTrack()}get id(){return this._id}get localId(){return this._localId}get closed(){return this._closed}get kind(){return this._kind}get rtpSender(){return this._rtpSender}get track(){return this._track}get rtpParameters(){return this._rtpParameters}get paused(){return this._paused}get maxSpatialLayer(){return this._maxSpatialLayer}get appData(){return this._appData}set appData(g){this._appData=g}get observer(){return this._observer}close(){this._closed||(w.debug("close()"),this._closed=!0,this.destroyTrack(),this.emit("@close"),this._observer.safeEmit("close"))}transportClosed(){this._closed||(w.debug("transportClosed()"),this._closed=!0,this.destroyTrack(),this.safeEmit("transportclose"),this._observer.safeEmit("close"))}async getStats(){if(this._closed)throw new h.InvalidStateError("closed");return new Promise((g,s)=>{this.safeEmit("@getstats",g,s)})}pause(){w.debug("pause()"),this._closed?w.error("pause() | Producer closed"):(this._paused=!0,this._track&&this._disableTrackOnPause&&(this._track.enabled=!1),this._zeroRtpOnPause&&new Promise((g,s)=>{this.safeEmit("@pause",g,s)}).catch(()=>{}),this._observer.safeEmit("pause"))}resume(){w.debug("resume()"),this._closed?w.error("resume() | Producer closed"):(this._paused=!1,this._track&&this._disableTrackOnPause&&(this._track.enabled=!0),this._zeroRtpOnPause&&new Promise((g,s)=>{this.safeEmit("@resume",g,s)}).catch(()=>{}),this._observer.safeEmit("resume"))}async replaceTrack({track:g}){if(w.debug("replaceTrack() [track:%o]",g),this._closed){if(g&&this._stopTracks)try{g.stop()}catch{}throw new h.InvalidStateError("closed")}if(g&&g.readyState==="ended")throw new h.InvalidStateError("track ended");g!==this._track?(await new Promise((s,b)=>{this.safeEmit("@replacetrack",g,s,b)}),this.destroyTrack(),this._track=g,this._track&&this._disableTrackOnPause&&(this._paused?this._paused&&(this._track.enabled=!1):this._track.enabled=!0),this.handleTrack()):w.debug("replaceTrack() | same track, ignored")}async setMaxSpatialLayer(g){if(this._closed)throw new h.InvalidStateError("closed");if(this._kind!=="video")throw new h.UnsupportedError("not a video Producer");if(typeof g!="number")throw new TypeError("invalid spatialLayer");g!==this._maxSpatialLayer&&(await new Promise((s,b)=>{this.safeEmit("@setmaxspatiallayer",g,s,b)}).catch(()=>{}),this._maxSpatialLayer=g)}async setRtpEncodingParameters(g){if(this._closed)throw new h.InvalidStateError("closed");if(typeof g!="object")throw new TypeError("invalid params");await new Promise((s,b)=>{this.safeEmit("@setrtpencodingparameters",g,s,b)})}onTrackEnded(){w.debug('track "ended" event'),this.safeEmit("trackended"),this._observer.safeEmit("trackended")}handleTrack(){this._track&&this._track.addEventListener("ended",this.onTrackEnded)}destroyTrack(){if(this._track)try{this._track.removeEventListener("ended",this.onTrackEnded),this._stopTracks&&this._track.stop()}catch{}}}p.Producer=k},5370:(C,p)=>{Object.defineProperty(p,"__esModule",{value:!0})},4160:(C,p)=>{Object.defineProperty(p,"__esModule",{value:!0})},5601:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(c,u,l,m){m===void 0&&(m=l);var D=Object.getOwnPropertyDescriptor(u,l);D&&!("get"in D?!u.__esModule:D.writable||D.configurable)||(D={enumerable:!0,get:function(){return u[l]}}),Object.defineProperty(c,m,D)}:function(c,u,l,m){m===void 0&&(m=l),c[m]=u[l]}),_=this&&this.__setModuleDefault||(Object.create?function(c,u){Object.defineProperty(c,"default",{enumerable:!0,value:u})}:function(c,u){c.default=u}),h=this&&this.__importStar||function(c){if(c&&c.__esModule)return c;var u={};if(c!=null)for(var l in c)l!=="default"&&Object.prototype.hasOwnProperty.call(c,l)&&E(u,c,l);return _(u,c),u},w=this&&this.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(p,"__esModule",{value:!0}),p.Transport=void 0;const k=o(8876),f=w(o(9596)),g=o(2994),s=o(2010),b=o(4893),S=h(o(1765)),T=h(o(8046)),x=o(9792),O=o(3518),P=o(7504),R=o(9166),I=new g.Logger("Transport");class d{constructor(u){this.consumerOptions=u,this.promise=new Promise((l,m)=>{this.resolve=l,this.reject=m})}}class v extends s.EnhancedEventEmitter{constructor({direction:u,id:l,iceParameters:m,iceCandidates:D,dtlsParameters:N,sctpParameters:L,iceServers:j,iceTransportPolicy:W,additionalSettings:$,proprietaryConstraints:Z,appData:ne,handlerFactory:de,extendedRtpCapabilities:ge,canProduceByKind:_e}){super(),this._closed=!1,this._iceGatheringState="new",this._connectionState="new",this._producers=new Map,this._consumers=new Map,this._dataProducers=new Map,this._dataConsumers=new Map,this._probatorConsumerCreated=!1,this._awaitQueue=new k.AwaitQueue,this._pendingConsumerTasks=[],this._consumerCreationInProgress=!1,this._pendingPauseConsumers=new Map,this._consumerPauseInProgress=!1,this._pendingResumeConsumers=new Map,this._consumerResumeInProgress=!1,this._pendingCloseConsumers=new Map,this._consumerCloseInProgress=!1,this._observer=new s.EnhancedEventEmitter,I.debug("constructor() [id:%s, direction:%s]",l,u),this._id=l,this._direction=u,this._extendedRtpCapabilities=ge,this._canProduceByKind=_e,this._maxSctpMessageSize=L?L.maxMessageSize:null;const Me=S.clone($)||{};delete Me.iceServers,delete Me.iceTransportPolicy,delete Me.bundlePolicy,delete Me.rtcpMuxPolicy,delete Me.sdpSemantics,this._handler=de(),this._handler.run({direction:u,iceParameters:m,iceCandidates:D,dtlsParameters:N,sctpParameters:L,iceServers:j,iceTransportPolicy:W,additionalSettings:Me,proprietaryConstraints:Z,extendedRtpCapabilities:ge}),this._appData=ne||{},this.handleHandler()}get id(){return this._id}get closed(){return this._closed}get direction(){return this._direction}get handler(){return this._handler}get iceGatheringState(){return this._iceGatheringState}get connectionState(){return this._connectionState}get appData(){return this._appData}set appData(u){this._appData=u}get observer(){return this._observer}close(){if(!this._closed){I.debug("close()"),this._closed=!0,this._awaitQueue.stop(),this._handler.close(),this._connectionState="closed";for(const u of this._producers.values())u.transportClosed();this._producers.clear();for(const u of this._consumers.values())u.transportClosed();this._consumers.clear();for(const u of this._dataProducers.values())u.transportClosed();this._dataProducers.clear();for(const u of this._dataConsumers.values())u.transportClosed();this._dataConsumers.clear(),this._observer.safeEmit("close")}}async getStats(){if(this._closed)throw new b.InvalidStateError("closed");return this._handler.getTransportStats()}async restartIce({iceParameters:u}){if(I.debug("restartIce()"),this._closed)throw new b.InvalidStateError("closed");if(!u)throw new TypeError("missing iceParameters");return this._awaitQueue.push(async()=>await this._handler.restartIce(u),"transport.restartIce()")}async updateIceServers({iceServers:u}={}){if(I.debug("updateIceServers()"),this._closed)throw new b.InvalidStateError("closed");if(!Array.isArray(u))throw new TypeError("missing iceServers");return this._awaitQueue.push(async()=>this._handler.updateIceServers(u),"transport.updateIceServers()")}async produce({track:u,encodings:l,codecOptions:m,codec:D,stopTracks:N=!0,disableTrackOnPause:L=!0,zeroRtpOnPause:j=!1,appData:W={}}={}){if(I.debug("produce() [track:%o]",u),this._closed)throw new b.InvalidStateError("closed");if(!u)throw new TypeError("missing track");if(this._direction!=="send")throw new b.UnsupportedError("not a sending Transport");if(!this._canProduceByKind[u.kind])throw new b.UnsupportedError(`cannot produce ${u.kind}`);if(u.readyState==="ended")throw new b.InvalidStateError("track ended");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("produce")===0)throw new TypeError('no "produce" listener set into this transport');if(W&&typeof W!="object")throw new TypeError("if given, appData must be an object");return this._awaitQueue.push(async()=>{let $;if(l&&!Array.isArray(l))throw TypeError("encodings must be an array");l&&l.length===0?$=void 0:l&&($=l.map(ge=>{const _e={active:!0};return ge.active===!1&&(_e.active=!1),typeof ge.dtx=="boolean"&&(_e.dtx=ge.dtx),typeof ge.scalabilityMode=="string"&&(_e.scalabilityMode=ge.scalabilityMode),typeof ge.scaleResolutionDownBy=="number"&&(_e.scaleResolutionDownBy=ge.scaleResolutionDownBy),typeof ge.maxBitrate=="number"&&(_e.maxBitrate=ge.maxBitrate),typeof ge.maxFramerate=="number"&&(_e.maxFramerate=ge.maxFramerate),typeof ge.adaptivePtime=="boolean"&&(_e.adaptivePtime=ge.adaptivePtime),typeof ge.priority=="string"&&(_e.priority=ge.priority),typeof ge.networkPriority=="string"&&(_e.networkPriority=ge.networkPriority),_e}));const{localId:Z,rtpParameters:ne,rtpSender:de}=await this._handler.send({track:u,encodings:$,codecOptions:m,codec:D});try{T.validateRtpParameters(ne);const{id:ge}=await new Promise((Me,fe)=>{this.safeEmit("produce",{kind:u.kind,rtpParameters:ne,appData:W},Me,fe)}),_e=new x.Producer({id:ge,localId:Z,rtpSender:de,track:u,rtpParameters:ne,stopTracks:N,disableTrackOnPause:L,zeroRtpOnPause:j,appData:W});return this._producers.set(_e.id,_e),this.handleProducer(_e),this._observer.safeEmit("newproducer",_e),_e}catch(ge){throw this._handler.stopSending(Z).catch(()=>{}),ge}},"transport.produce()").catch($=>{if(N)try{u.stop()}catch{}throw $})}async consume({id:u,producerId:l,kind:m,rtpParameters:D,streamId:N,appData:L={}}){if(I.debug("consume()"),this._closed)throw new b.InvalidStateError("closed");if(this._direction!=="recv")throw new b.UnsupportedError("not a receiving Transport");if(typeof u!="string")throw new TypeError("missing id");if(typeof l!="string")throw new TypeError("missing producerId");if(m!=="audio"&&m!=="video")throw new TypeError(`invalid kind '${m}'`);if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(L&&typeof L!="object")throw new TypeError("if given, appData must be an object");const j=S.clone(D);if(!T.canReceive(j,this._extendedRtpCapabilities))throw new b.UnsupportedError("cannot consume this Producer");const W=new d({id:u,producerId:l,kind:m,rtpParameters:j,streamId:N,appData:L});return this._pendingConsumerTasks.push(W),(0,f.default)(()=>{this._closed||this._consumerCreationInProgress===!1&&this.createPendingConsumers()}),W.promise}async produceData({ordered:u=!0,maxPacketLifeTime:l,maxRetransmits:m,label:D="",protocol:N="",appData:L={}}={}){if(I.debug("produceData()"),this._closed)throw new b.InvalidStateError("closed");if(this._direction!=="send")throw new b.UnsupportedError("not a sending Transport");if(!this._maxSctpMessageSize)throw new b.UnsupportedError("SCTP not enabled by remote Transport");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(this.listenerCount("producedata")===0)throw new TypeError('no "producedata" listener set into this transport');if(L&&typeof L!="object")throw new TypeError("if given, appData must be an object");return(l||m)&&(u=!1),this._awaitQueue.push(async()=>{const{dataChannel:j,sctpStreamParameters:W}=await this._handler.sendDataChannel({ordered:u,maxPacketLifeTime:l,maxRetransmits:m,label:D,protocol:N});T.validateSctpStreamParameters(W);const{id:$}=await new Promise((ne,de)=>{this.safeEmit("producedata",{sctpStreamParameters:W,label:D,protocol:N,appData:L},ne,de)}),Z=new P.DataProducer({id:$,dataChannel:j,sctpStreamParameters:W,appData:L});return this._dataProducers.set(Z.id,Z),this.handleDataProducer(Z),this._observer.safeEmit("newdataproducer",Z),Z},"transport.produceData()")}async consumeData({id:u,dataProducerId:l,sctpStreamParameters:m,label:D="",protocol:N="",appData:L={}}){if(I.debug("consumeData()"),this._closed)throw new b.InvalidStateError("closed");if(this._direction!=="recv")throw new b.UnsupportedError("not a receiving Transport");if(!this._maxSctpMessageSize)throw new b.UnsupportedError("SCTP not enabled by remote Transport");if(typeof u!="string")throw new TypeError("missing id");if(typeof l!="string")throw new TypeError("missing dataProducerId");if(this.listenerCount("connect")===0&&this._connectionState==="new")throw new TypeError('no "connect" listener set into this transport');if(L&&typeof L!="object")throw new TypeError("if given, appData must be an object");const j=S.clone(m);return T.validateSctpStreamParameters(j),this._awaitQueue.push(async()=>{const{dataChannel:W}=await this._handler.receiveDataChannel({sctpStreamParameters:j,label:D,protocol:N}),$=new R.DataConsumer({id:u,dataProducerId:l,dataChannel:W,sctpStreamParameters:j,appData:L});return this._dataConsumers.set($.id,$),this.handleDataConsumer($),this._observer.safeEmit("newdataconsumer",$),$},"transport.consumeData()")}async createPendingConsumers(){this._consumerCreationInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingConsumerTasks.length===0)return void I.debug("createPendingConsumers() | there is no Consumer to be created");const u=[...this._pendingConsumerTasks];let l;this._pendingConsumerTasks=[];const m=[];for(const D of u){const{id:N,kind:L,rtpParameters:j,streamId:W}=D.consumerOptions;m.push({trackId:N,kind:L,rtpParameters:j,streamId:W})}try{const D=await this._handler.receive(m);for(let N=0;N<D.length;++N){const L=u[N],j=D[N],{id:W,producerId:$,kind:Z,rtpParameters:ne,appData:de}=L.consumerOptions,{localId:ge,rtpReceiver:_e,track:Me}=j,fe=new O.Consumer({id:W,localId:ge,producerId:$,rtpReceiver:_e,track:Me,rtpParameters:ne,appData:de});this._consumers.set(fe.id,fe),this.handleConsumer(fe),this._probatorConsumerCreated||l||Z!=="video"||(l=fe),this._observer.safeEmit("newconsumer",fe),L.resolve(fe)}}catch(D){for(const N of u)N.reject(D)}if(l)try{const D=T.generateProbatorRtpParameters(l.rtpParameters);await this._handler.receive([{trackId:"probator",kind:"video",rtpParameters:D}]),I.debug("createPendingConsumers() | Consumer for RTP probation created"),this._probatorConsumerCreated=!0}catch(D){I.error("createPendingConsumers() | failed to create Consumer for RTP probation:%o",D)}},"transport.createPendingConsumers()").then(()=>{this._consumerCreationInProgress=!1,this._pendingConsumerTasks.length>0&&this.createPendingConsumers()}).catch(()=>{})}pausePendingConsumers(){this._consumerPauseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingPauseConsumers.size===0)return void I.debug("pausePendingConsumers() | there is no Consumer to be paused");const u=Array.from(this._pendingPauseConsumers.values());this._pendingPauseConsumers.clear();try{const l=u.map(m=>m.localId);await this._handler.pauseReceiving(l)}catch(l){I.error("pausePendingConsumers() | failed to pause Consumers:",l)}},"transport.pausePendingConsumers").then(()=>{this._consumerPauseInProgress=!1,this._pendingPauseConsumers.size>0&&this.pausePendingConsumers()}).catch(()=>{})}resumePendingConsumers(){this._consumerResumeInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingResumeConsumers.size===0)return void I.debug("resumePendingConsumers() | there is no Consumer to be resumed");const u=Array.from(this._pendingResumeConsumers.values());this._pendingResumeConsumers.clear();try{const l=u.map(m=>m.localId);await this._handler.resumeReceiving(l)}catch(l){I.error("resumePendingConsumers() | failed to resume Consumers:",l)}},"transport.resumePendingConsumers").then(()=>{this._consumerResumeInProgress=!1,this._pendingResumeConsumers.size>0&&this.resumePendingConsumers()}).catch(()=>{})}closePendingConsumers(){this._consumerCloseInProgress=!0,this._awaitQueue.push(async()=>{if(this._pendingCloseConsumers.size===0)return void I.debug("closePendingConsumers() | there is no Consumer to be closed");const u=Array.from(this._pendingCloseConsumers.values());this._pendingCloseConsumers.clear();try{await this._handler.stopReceiving(u.map(l=>l.localId))}catch(l){I.error("closePendingConsumers() | failed to close Consumers:",l)}},"transport.closePendingConsumers").then(()=>{this._consumerCloseInProgress=!1,this._pendingCloseConsumers.size>0&&this.closePendingConsumers()}).catch(()=>{})}handleHandler(){const u=this._handler;u.on("@connect",({dtlsParameters:l},m,D)=>{this._closed?D(new b.InvalidStateError("closed")):this.safeEmit("connect",{dtlsParameters:l},m,D)}),u.on("@icegatheringstatechange",l=>{l!==this._iceGatheringState&&(I.debug("ICE gathering state changed to %s",l),this._iceGatheringState=l,this._closed||this.safeEmit("icegatheringstatechange",l))}),u.on("@connectionstatechange",l=>{l!==this._connectionState&&(I.debug("connection state changed to %s",l),this._connectionState=l,this._closed||this.safeEmit("connectionstatechange",l))})}handleProducer(u){u.on("@close",()=>{this._producers.delete(u.id),this._closed||this._awaitQueue.push(async()=>await this._handler.stopSending(u.localId),"producer @close event").catch(l=>I.warn("producer.close() failed:%o",l))}),u.on("@pause",(l,m)=>{this._awaitQueue.push(async()=>await this._handler.pauseSending(u.localId),"producer @pause event").then(l).catch(m)}),u.on("@resume",(l,m)=>{this._awaitQueue.push(async()=>await this._handler.resumeSending(u.localId),"producer @resume event").then(l).catch(m)}),u.on("@replacetrack",(l,m,D)=>{this._awaitQueue.push(async()=>await this._handler.replaceTrack(u.localId,l),"producer @replacetrack event").then(m).catch(D)}),u.on("@setmaxspatiallayer",(l,m,D)=>{this._awaitQueue.push(async()=>await this._handler.setMaxSpatialLayer(u.localId,l),"producer @setmaxspatiallayer event").then(m).catch(D)}),u.on("@setrtpencodingparameters",(l,m,D)=>{this._awaitQueue.push(async()=>await this._handler.setRtpEncodingParameters(u.localId,l),"producer @setrtpencodingparameters event").then(m).catch(D)}),u.on("@getstats",(l,m)=>{if(this._closed)return m(new b.InvalidStateError("closed"));this._handler.getSenderStats(u.localId).then(l).catch(m)})}handleConsumer(u){u.on("@close",()=>{this._consumers.delete(u.id),this._pendingPauseConsumers.delete(u.id),this._pendingResumeConsumers.delete(u.id),this._closed||(this._pendingCloseConsumers.set(u.id,u),this._consumerCloseInProgress===!1&&this.closePendingConsumers())}),u.on("@pause",()=>{this._pendingResumeConsumers.has(u.id)&&this._pendingResumeConsumers.delete(u.id),this._pendingPauseConsumers.set(u.id,u),(0,f.default)(()=>{this._closed||this._consumerPauseInProgress===!1&&this.pausePendingConsumers()})}),u.on("@resume",()=>{this._pendingPauseConsumers.has(u.id)&&this._pendingPauseConsumers.delete(u.id),this._pendingResumeConsumers.set(u.id,u),(0,f.default)(()=>{this._closed||this._consumerResumeInProgress===!1&&this.resumePendingConsumers()})}),u.on("@getstats",(l,m)=>{if(this._closed)return m(new b.InvalidStateError("closed"));this._handler.getReceiverStats(u.localId).then(l).catch(m)})}handleDataProducer(u){u.on("@close",()=>{this._dataProducers.delete(u.id)})}handleDataConsumer(u){u.on("@close",()=>{this._dataConsumers.delete(u.id)})}}p.Transport=v},4893:(C,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.InvalidStateError=p.UnsupportedError=void 0;class o extends Error{constructor(h){super(h),this.name="UnsupportedError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,o):this.stack=new Error(h).stack}}p.UnsupportedError=o;class E extends Error{constructor(h){super(h),this.name="InvalidStateError",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,E):this.stack=new Error(h).stack}}p.InvalidStateError=E},2183:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(v,c,u,l){l===void 0&&(l=u);var m=Object.getOwnPropertyDescriptor(c,u);m&&!("get"in m?!c.__esModule:m.writable||m.configurable)||(m={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(v,l,m)}:function(v,c,u,l){l===void 0&&(l=u),v[l]=c[u]}),_=this&&this.__setModuleDefault||(Object.create?function(v,c){Object.defineProperty(v,"default",{enumerable:!0,value:c})}:function(v,c){v.default=c}),h=this&&this.__importStar||function(v){if(v&&v.__esModule)return v;var c={};if(v!=null)for(var u in v)u!=="default"&&Object.prototype.hasOwnProperty.call(v,u)&&E(c,v,u);return _(c,v),c};Object.defineProperty(p,"__esModule",{value:!0}),p.Chrome111=void 0;const w=h(o(7363)),k=o(2994),f=h(o(1765)),g=h(o(8046)),s=h(o(5544)),b=h(o(5938)),S=h(o(4256)),T=o(4893),x=o(521),O=o(1305),P=o(3303),R=new k.Logger("Chrome111"),I={OS:1024,MIS:1024};class d extends x.HandlerInterface{static createFactory(){return()=>new d}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome111"}close(){if(R.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){R.debug("getNativeRtpCapabilities()");const c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{c.addTransceiver("audio"),c.addTransceiver("video");const u=await c.createOffer();try{c.close()}catch{}const l=w.parse(u.sdp),m=s.extractRtpCapabilities({sdpObject:l});return S.addNackSuppportForOpus(m),m}catch(u){try{c.close()}catch{}throw u}}async getNativeSctpCapabilities(){return R.debug("getNativeSctpCapabilities()"),{numStreams:I}}run({direction:c,iceParameters:u,iceCandidates:l,dtlsParameters:m,sctpParameters:D,iceServers:N,iceTransportPolicy:L,additionalSettings:j,proprietaryConstraints:W,extendedRtpCapabilities:$}){this.assertNotClosed(),R.debug("run()"),this._direction=c,this._remoteSdp=new O.RemoteSdp({iceParameters:u,iceCandidates:l,dtlsParameters:m,sctpParameters:D}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",$),video:g.getSendingRtpParameters("video",$)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",$),video:g.getSendingRemoteRtpParameters("video",$)},m.role&&m.role!=="auto"&&(this._forcedLocalDtlsRole=m.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:N||[],iceTransportPolicy:L||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...j},W),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(R.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(c){this.assertNotClosed(),R.debug("updateIceServers()");const u=this._pc.getConfiguration();u.iceServers=c,this._pc.setConfiguration(u)}async restartIce(c){if(this.assertNotClosed(),R.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),this._transportReady)if(this._direction==="send"){const u=await this._pc.createOffer({iceRestart:!0});R.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}else{const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,encodings:u,codecOptions:l,codec:m}){if(this.assertNotClosed(),this.assertSendDirection(),R.debug("send() [kind:%s, track.id:%s]",c.kind,c.id),u&&u.length>1){let ge=1;for(const _e of u){const Me=_e.scalabilityMode?(0,P.parse)(_e.scalabilityMode).temporalLayers:3;Me>ge&&(ge=Me)}u.forEach((_e,Me)=>{_e.rid=`r${Me}`,_e.scalabilityMode=`L1T${ge}`})}const D=f.clone(this._sendingRtpParametersByKind[c.kind]);D.codecs=g.reduceCodecs(D.codecs,m);const N=f.clone(this._sendingRemoteRtpParametersByKind[c.kind]);N.codecs=g.reduceCodecs(N.codecs,m);const L=this._remoteSdp.getNextMediaSectionIdx(),j=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream],sendEncodings:u}),W=await this._pc.createOffer();let $=w.parse(W.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$}),R.debug("send() | calling pc.setLocalDescription() [offer:%o]",W),await this._pc.setLocalDescription(W);const Z=j.mid;D.mid=Z,$=w.parse(this._pc.localDescription.sdp);const ne=$.media[L.idx];if(D.rtcp.cname=s.getCname({offerMediaObject:ne}),u)if(u.length===1){const ge=b.getRtpEncodings({offerMediaObject:ne});Object.assign(ge[0],u[0]),D.encodings=ge}else D.encodings=u;else D.encodings=b.getRtpEncodings({offerMediaObject:ne});this._remoteSdp.send({offerMediaObject:ne,reuseMid:L.reuseMid,offerRtpParameters:D,answerRtpParameters:N,codecOptions:l,extmapAllowMixed:!0});const de={type:"answer",sdp:this._remoteSdp.getSdp()};return R.debug("send() | calling pc.setRemoteDescription() [answer:%o]",de),await this._pc.setRemoteDescription(de),this._mapMidTransceiver.set(Z,j),{localId:Z,rtpParameters:D,rtpSender:j.sender}}async stopSending(c){if(this.assertSendDirection(),R.debug("stopSending() [localId:%s]",c),this._closed)return;const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");if(u.sender.replaceTrack(null),this._pc.removeTrack(u.sender),this._remoteSdp.closeMediaSection(u.mid))try{u.stop()}catch{}const l=await this._pc.createOffer();R.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),R.debug("pauseSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");u.direction="inactive",this._remoteSdp.pauseMediaSection(c);const l=await this._pc.createOffer();R.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),R.debug("resumeSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(this._remoteSdp.resumeSendingMediaSection(c),!u)throw new Error("associated RTCRtpTransceiver not found");u.direction="sendonly";const l=await this._pc.createOffer();R.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async replaceTrack(c,u){this.assertNotClosed(),this.assertSendDirection(),u?R.debug("replaceTrack() [localId:%s, track.id:%s]",c,u.id):R.debug("replaceTrack() [localId:%s, no track]",c);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");await l.sender.replaceTrack(u)}async setMaxSpatialLayer(c,u){this.assertNotClosed(),this.assertSendDirection(),R.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,u);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");const m=l.sender.getParameters();m.encodings.forEach((L,j)=>{L.active=j<=u}),await l.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(c,m.encodings);const D=await this._pc.createOffer();R.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const N={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async setRtpEncodingParameters(c,u){this.assertNotClosed(),this.assertSendDirection(),R.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,u);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");const m=l.sender.getParameters();m.encodings.forEach((L,j)=>{m.encodings[j]={...L,...u}}),await l.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(c,m.encodings);const D=await this._pc.createOffer();R.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const N={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");return u.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:u,maxRetransmits:l,label:m,protocol:D}){this.assertNotClosed(),this.assertSendDirection();const N={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:u,maxRetransmits:l,protocol:D};R.debug("sendDataChannel() [options:%o]",N);const L=this._pc.createDataChannel(m,N);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%I.MIS,!this._hasDataChannelMediaSection){const j=await this._pc.createOffer(),W=w.parse(j.sdp),$=W.media.find(ne=>ne.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:W}),R.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j),this._remoteSdp.sendSctpAssociation({offerMediaObject:$});const Z={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setRemoteDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:L,sctpStreamParameters:{streamId:N.id,ordered:N.ordered,maxPacketLifeTime:N.maxPacketLifeTime,maxRetransmits:N.maxRetransmits}}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const u=[],l=new Map;for(const L of c){const{trackId:j,kind:W,rtpParameters:$,streamId:Z}=L;R.debug("receive() [trackId:%s, kind:%s]",j,W);const ne=$.mid||String(this._mapMidTransceiver.size);l.set(j,ne),this._remoteSdp.receive({mid:ne,kind:W,offerRtpParameters:$,streamId:Z||$.rtcp.cname,trackId:j})}const m={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);let D=await this._pc.createAnswer();const N=w.parse(D.sdp);for(const L of c){const{trackId:j,rtpParameters:W}=L,$=l.get(j),Z=N.media.find(ne=>String(ne.mid)===$);s.applyCodecParameters({offerRtpParameters:W,answerMediaObject:Z})}D={type:"answer",sdp:w.write(N)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),R.debug("receive() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D);for(const L of c){const{trackId:j}=L,W=l.get(j),$=this._pc.getTransceivers().find(Z=>Z.mid===W);if(!$)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(W,$),u.push({localId:W,track:$.receiver.track,rtpReceiver:$.receiver})}return u}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const m of c){R.debug("stopReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(D.mid)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const m of c)this._mapMidTransceiver.delete(m)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const m of c){R.debug("pauseReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");D.direction="inactive",this._remoteSdp.pauseMediaSection(m)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const m of c){R.debug("resumeReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");D.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(m)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");return u.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:u,protocol:l}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:m,ordered:D,maxPacketLifeTime:N,maxRetransmits:L}=c,j={negotiated:!0,id:m,ordered:D,maxPacketLifeTime:N,maxRetransmits:L,protocol:l};R.debug("receiveDataChannel() [options:%o]",j);const W=this._pc.createDataChannel(u,j);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const $={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",$),await this._pc.setRemoteDescription($);const Z=await this._pc.createAnswer();if(!this._transportReady){const ne=w.parse(Z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:ne})}R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setLocalDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:W}}async setupTransport({localDtlsRole:c,localSdpObject:u}){u||(u=w.parse(this._pc.localDescription.sdp));const l=s.extractDtlsParameters({sdpObject:u});l.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((m,D)=>{this.safeEmit("@connect",{dtlsParameters:l},m,D)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new T.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.Chrome111=d},7402:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(I,d,v,c){c===void 0&&(c=v);var u=Object.getOwnPropertyDescriptor(d,v);u&&!("get"in u?!d.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:function(){return d[v]}}),Object.defineProperty(I,c,u)}:function(I,d,v,c){c===void 0&&(c=v),I[c]=d[v]}),_=this&&this.__setModuleDefault||(Object.create?function(I,d){Object.defineProperty(I,"default",{enumerable:!0,value:d})}:function(I,d){I.default=d}),h=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var d={};if(I!=null)for(var v in I)v!=="default"&&Object.prototype.hasOwnProperty.call(I,v)&&E(d,I,v);return _(d,I),d};Object.defineProperty(p,"__esModule",{value:!0}),p.Chrome55=void 0;const w=h(o(7363)),k=o(2994),f=o(4893),g=h(o(1765)),s=h(o(8046)),b=h(o(5544)),S=h(o(4496)),T=o(521),x=o(1305),O=new k.Logger("Chrome55"),P={OS:1024,MIS:1024};class R extends T.HandlerInterface{static createFactory(){return()=>new R}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome55"}close(){if(O.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){O.debug("getNativeRtpCapabilities()");const d=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const v=await d.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{d.close()}catch{}const c=w.parse(v.sdp);return b.extractRtpCapabilities({sdpObject:c})}catch(v){try{d.close()}catch{}throw v}}async getNativeSctpCapabilities(){return O.debug("getNativeSctpCapabilities()"),{numStreams:P}}run({direction:d,iceParameters:v,iceCandidates:c,dtlsParameters:u,sctpParameters:l,iceServers:m,iceTransportPolicy:D,additionalSettings:N,proprietaryConstraints:L,extendedRtpCapabilities:j}){O.debug("run()"),this._direction=d,this._remoteSdp=new x.RemoteSdp({iceParameters:v,iceCandidates:c,dtlsParameters:u,sctpParameters:l,planB:!0}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",j),video:s.getSendingRtpParameters("video",j)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",j),video:s.getSendingRemoteRtpParameters("video",j)},u.role&&u.role!=="auto"&&(this._forcedLocalDtlsRole=u.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:m||[],iceTransportPolicy:D||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...N},L),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(O.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(d){O.debug("updateIceServers()");const v=this._pc.getConfiguration();v.iceServers=d,this._pc.setConfiguration(v)}async restartIce(d){if(O.debug("restartIce()"),this._remoteSdp.updateIceParameters(d),this._transportReady)if(this._direction==="send"){const v=await this._pc.createOffer({iceRestart:!0});O.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const c={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}else{const v={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const c=await this._pc.createAnswer();O.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}}async getTransportStats(){return this._pc.getStats()}async send({track:d,encodings:v,codecOptions:c,codec:u}){this.assertSendDirection(),O.debug("send() [kind:%s, track.id:%s]",d.kind,d.id),u&&O.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(d),this._pc.addStream(this._sendStream);let l,m=await this._pc.createOffer(),D=w.parse(m.sdp);const N=g.clone(this._sendingRtpParametersByKind[d.kind]);N.codecs=s.reduceCodecs(N.codecs);const L=g.clone(this._sendingRemoteRtpParametersByKind[d.kind]);if(L.codecs=s.reduceCodecs(L.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:D}),d.kind==="video"&&v&&v.length>1&&(O.debug("send() | enabling simulcast"),D=w.parse(m.sdp),l=D.media.find($=>$.type==="video"),S.addLegacySimulcast({offerMediaObject:l,track:d,numStreams:v.length}),m={type:"offer",sdp:w.write(D)}),O.debug("send() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m),D=w.parse(this._pc.localDescription.sdp),l=D.media.find($=>$.type===d.kind),N.rtcp.cname=b.getCname({offerMediaObject:l}),N.encodings=S.getRtpEncodings({offerMediaObject:l,track:d}),v)for(let $=0;$<N.encodings.length;++$)v[$]&&Object.assign(N.encodings[$],v[$]);if(N.encodings.length>1&&N.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const $ of N.encodings)$.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:l,offerRtpParameters:N,answerRtpParameters:L,codecOptions:c});const j={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("send() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j);const W=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(W,d),{localId:W,rtpParameters:N}}async stopSending(d){this.assertSendDirection(),O.debug("stopSending() [localId:%s]",d);const v=this._mapSendLocalIdTrack.get(d);if(!v)throw new Error("track not found");this._mapSendLocalIdTrack.delete(d),this._sendStream.removeTrack(v),this._pc.addStream(this._sendStream);const c=await this._pc.createOffer();O.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",c);try{await this._pc.setLocalDescription(c)}catch(l){if(this._sendStream.getTracks().length===0)return void O.warn("stopSending() | ignoring expected error due no sending tracks: %s",l.toString());throw l}if(this._pc.signalingState==="stable")return;const u={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}async pauseSending(d){}async resumeSending(d){}async replaceTrack(d,v){throw new f.UnsupportedError("not implemented")}async setMaxSpatialLayer(d,v){throw new f.UnsupportedError(" not implemented")}async setRtpEncodingParameters(d,v){throw new f.UnsupportedError("not supported")}async getSenderStats(d){throw new f.UnsupportedError("not implemented")}async sendDataChannel({ordered:d,maxPacketLifeTime:v,maxRetransmits:c,label:u,protocol:l}){this.assertSendDirection();const m={negotiated:!0,id:this._nextSendSctpStreamId,ordered:d,maxPacketLifeTime:v,maxRetransmitTime:v,maxRetransmits:c,protocol:l};O.debug("sendDataChannel() [options:%o]",m);const D=this._pc.createDataChannel(u,m);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%P.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),L=w.parse(N.sdp),j=L.media.find($=>$.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:L}),O.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:j});const W={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",W),await this._pc.setRemoteDescription(W),this._hasDataChannelMediaSection=!0}return{dataChannel:D,sctpStreamParameters:{streamId:m.id,ordered:m.ordered,maxPacketLifeTime:m.maxPacketLifeTime,maxRetransmits:m.maxRetransmits}}}async receive(d){this.assertRecvDirection();const v=[];for(const m of d){const{trackId:D,kind:N,rtpParameters:L,streamId:j}=m;O.debug("receive() [trackId:%s, kind:%s]",D,N);const W=N;this._remoteSdp.receive({mid:W,kind:N,offerRtpParameters:L,streamId:j||L.rtcp.cname,trackId:D})}const c={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);let u=await this._pc.createAnswer();const l=w.parse(u.sdp);for(const m of d){const{kind:D,rtpParameters:N}=m,L=D,j=l.media.find(W=>String(W.mid)===L);b.applyCodecParameters({offerRtpParameters:N,answerMediaObject:j})}u={type:"answer",sdp:w.write(l)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:l}),O.debug("receive() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const m of d){const{kind:D,trackId:N,rtpParameters:L}=m,j=D,W=N,$=m.streamId||L.rtcp.cname,Z=this._pc.getRemoteStreams().find(ne=>ne.id===$).getTrackById(W);if(!Z)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(W,{mid:j,rtpParameters:L}),v.push({localId:W,track:Z})}return v}async stopReceiving(d){this.assertRecvDirection();for(const u of d){O.debug("stopReceiving() [localId:%s]",u);const{mid:l,rtpParameters:m}=this._mapRecvLocalIdInfo.get(u)||{};this._mapRecvLocalIdInfo.delete(u),this._remoteSdp.planBStopReceiving({mid:l,offerRtpParameters:m})}const v={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const c=await this._pc.createAnswer();O.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}async pauseReceiving(d){}async resumeReceiving(d){}async getReceiverStats(d){throw new f.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:d,label:v,protocol:c}){this.assertRecvDirection();const{streamId:u,ordered:l,maxPacketLifeTime:m,maxRetransmits:D}=d,N={negotiated:!0,id:u,ordered:l,maxPacketLifeTime:m,maxRetransmitTime:m,maxRetransmits:D,protocol:c};O.debug("receiveDataChannel() [options:%o]",N);const L=this._pc.createDataChannel(v,N);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const j={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",j),await this._pc.setRemoteDescription(j);const W=await this._pc.createAnswer();if(!this._transportReady){const $=w.parse(W.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$})}O.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",W),await this._pc.setLocalDescription(W),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:d,localSdpObject:v}){v||(v=w.parse(this._pc.localDescription.sdp));const c=b.extractDtlsParameters({sdpObject:v});c.role=d,this._remoteSdp.updateDtlsRole(d==="client"?"server":"client"),await new Promise((u,l)=>{this.safeEmit("@connect",{dtlsParameters:c},u,l)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.Chrome55=R},8155:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(R,I,d,v){v===void 0&&(v=d);var c=Object.getOwnPropertyDescriptor(I,d);c&&!("get"in c?!I.__esModule:c.writable||c.configurable)||(c={enumerable:!0,get:function(){return I[d]}}),Object.defineProperty(R,v,c)}:function(R,I,d,v){v===void 0&&(v=d),R[v]=I[d]}),_=this&&this.__setModuleDefault||(Object.create?function(R,I){Object.defineProperty(R,"default",{enumerable:!0,value:I})}:function(R,I){R.default=I}),h=this&&this.__importStar||function(R){if(R&&R.__esModule)return R;var I={};if(R!=null)for(var d in R)d!=="default"&&Object.prototype.hasOwnProperty.call(R,d)&&E(I,R,d);return _(I,R),I};Object.defineProperty(p,"__esModule",{value:!0}),p.Chrome67=void 0;const w=h(o(7363)),k=o(2994),f=h(o(1765)),g=h(o(8046)),s=h(o(5544)),b=h(o(4496)),S=o(521),T=o(1305),x=new k.Logger("Chrome67"),O={OS:1024,MIS:1024};class P extends S.HandlerInterface{static createFactory(){return()=>new P}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome67"}close(){if(x.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){x.debug("getNativeRtpCapabilities()");const I=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const d=await I.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{I.close()}catch{}const v=w.parse(d.sdp);return s.extractRtpCapabilities({sdpObject:v})}catch(d){try{I.close()}catch{}throw d}}async getNativeSctpCapabilities(){return x.debug("getNativeSctpCapabilities()"),{numStreams:O}}run({direction:I,iceParameters:d,iceCandidates:v,dtlsParameters:c,sctpParameters:u,iceServers:l,iceTransportPolicy:m,additionalSettings:D,proprietaryConstraints:N,extendedRtpCapabilities:L}){x.debug("run()"),this._direction=I,this._remoteSdp=new T.RemoteSdp({iceParameters:d,iceCandidates:v,dtlsParameters:c,sctpParameters:u,planB:!0}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",L),video:g.getSendingRtpParameters("video",L)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",L),video:g.getSendingRemoteRtpParameters("video",L)},c.role&&c.role!=="auto"&&(this._forcedLocalDtlsRole=c.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:l||[],iceTransportPolicy:m||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...D},N),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(x.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(I){x.debug("updateIceServers()");const d=this._pc.getConfiguration();d.iceServers=I,this._pc.setConfiguration(d)}async restartIce(I){if(x.debug("restartIce()"),this._remoteSdp.updateIceParameters(I),this._transportReady)if(this._direction==="send"){const d=await this._pc.createOffer({iceRestart:!0});x.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const v={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",v),await this._pc.setRemoteDescription(v)}else{const d={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const v=await this._pc.createAnswer();x.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",v),await this._pc.setLocalDescription(v)}}async getTransportStats(){return this._pc.getStats()}async send({track:I,encodings:d,codecOptions:v,codec:c}){this.assertSendDirection(),x.debug("send() [kind:%s, track.id:%s]",I.kind,I.id),c&&x.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(I),this._pc.addTrack(I,this._sendStream);let u,l=await this._pc.createOffer(),m=w.parse(l.sdp);const D=f.clone(this._sendingRtpParametersByKind[I.kind]);D.codecs=g.reduceCodecs(D.codecs);const N=f.clone(this._sendingRemoteRtpParametersByKind[I.kind]);if(N.codecs=g.reduceCodecs(N.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:m}),I.kind==="video"&&d&&d.length>1&&(x.debug("send() | enabling simulcast"),m=w.parse(l.sdp),u=m.media.find($=>$.type==="video"),b.addLegacySimulcast({offerMediaObject:u,track:I,numStreams:d.length}),l={type:"offer",sdp:w.write(m)}),x.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),m=w.parse(this._pc.localDescription.sdp),u=m.media.find($=>$.type===I.kind),D.rtcp.cname=s.getCname({offerMediaObject:u}),D.encodings=b.getRtpEncodings({offerMediaObject:u,track:I}),d)for(let $=0;$<D.encodings.length;++$)d[$]&&Object.assign(D.encodings[$],d[$]);if(D.encodings.length>1&&D.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const $ of D.encodings)$.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:u,offerRtpParameters:D,answerRtpParameters:N,codecOptions:v});const L={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("send() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L);const j=String(this._nextSendLocalId);this._nextSendLocalId++;const W=this._pc.getSenders().find($=>$.track===I);return this._mapSendLocalIdRtpSender.set(j,W),{localId:j,rtpParameters:D,rtpSender:W}}async stopSending(I){this.assertSendDirection(),x.debug("stopSending() [localId:%s]",I);const d=this._mapSendLocalIdRtpSender.get(I);if(!d)throw new Error("associated RTCRtpSender not found");this._pc.removeTrack(d),d.track&&this._sendStream.removeTrack(d.track),this._mapSendLocalIdRtpSender.delete(I);const v=await this._pc.createOffer();x.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",v);try{await this._pc.setLocalDescription(v)}catch(u){if(this._sendStream.getTracks().length===0)return void x.warn("stopSending() | ignoring expected error due no sending tracks: %s",u.toString());throw u}if(this._pc.signalingState==="stable")return;const c={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async pauseSending(I){}async resumeSending(I){}async replaceTrack(I,d){this.assertSendDirection(),d?x.debug("replaceTrack() [localId:%s, track.id:%s]",I,d.id):x.debug("replaceTrack() [localId:%s, no track]",I);const v=this._mapSendLocalIdRtpSender.get(I);if(!v)throw new Error("associated RTCRtpSender not found");const c=v.track;await v.replaceTrack(d),c&&this._sendStream.removeTrack(c),d&&this._sendStream.addTrack(d)}async setMaxSpatialLayer(I,d){this.assertSendDirection(),x.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",I,d);const v=this._mapSendLocalIdRtpSender.get(I);if(!v)throw new Error("associated RTCRtpSender not found");const c=v.getParameters();c.encodings.forEach((u,l)=>{u.active=l<=d}),await v.setParameters(c)}async setRtpEncodingParameters(I,d){this.assertSendDirection(),x.debug("setRtpEncodingParameters() [localId:%s, params:%o]",I,d);const v=this._mapSendLocalIdRtpSender.get(I);if(!v)throw new Error("associated RTCRtpSender not found");const c=v.getParameters();c.encodings.forEach((u,l)=>{c.encodings[l]={...u,...d}}),await v.setParameters(c)}async getSenderStats(I){this.assertSendDirection();const d=this._mapSendLocalIdRtpSender.get(I);if(!d)throw new Error("associated RTCRtpSender not found");return d.getStats()}async sendDataChannel({ordered:I,maxPacketLifeTime:d,maxRetransmits:v,label:c,protocol:u}){this.assertSendDirection();const l={negotiated:!0,id:this._nextSendSctpStreamId,ordered:I,maxPacketLifeTime:d,maxRetransmitTime:d,maxRetransmits:v,protocol:u};x.debug("sendDataChannel() [options:%o]",l);const m=this._pc.createDataChannel(c,l);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%O.MIS,!this._hasDataChannelMediaSection){const D=await this._pc.createOffer(),N=w.parse(D.sdp),L=N.media.find(W=>W.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),x.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D),this._remoteSdp.sendSctpAssociation({offerMediaObject:L});const j={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j),this._hasDataChannelMediaSection=!0}return{dataChannel:m,sctpStreamParameters:{streamId:l.id,ordered:l.ordered,maxPacketLifeTime:l.maxPacketLifeTime,maxRetransmits:l.maxRetransmits}}}async receive(I){this.assertRecvDirection();const d=[];for(const l of I){const{trackId:m,kind:D,rtpParameters:N,streamId:L}=l;x.debug("receive() [trackId:%s, kind:%s]",m,D);const j=D;this._remoteSdp.receive({mid:j,kind:D,offerRtpParameters:N,streamId:L||N.rtcp.cname,trackId:m})}const v={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);let c=await this._pc.createAnswer();const u=w.parse(c.sdp);for(const l of I){const{kind:m,rtpParameters:D}=l,N=m,L=u.media.find(j=>String(j.mid)===N);s.applyCodecParameters({offerRtpParameters:D,answerMediaObject:L})}c={type:"answer",sdp:w.write(u)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),x.debug("receive() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c);for(const l of I){const{kind:m,trackId:D,rtpParameters:N}=l,L=D,j=m,W=this._pc.getReceivers().find($=>$.track&&$.track.id===L);if(!W)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(L,{mid:j,rtpParameters:N,rtpReceiver:W}),d.push({localId:L,track:W.track,rtpReceiver:W})}return d}async stopReceiving(I){this.assertRecvDirection();for(const c of I){x.debug("stopReceiving() [localId:%s]",c);const{mid:u,rtpParameters:l}=this._mapRecvLocalIdInfo.get(c)||{};this._mapRecvLocalIdInfo.delete(c),this._remoteSdp.planBStopReceiving({mid:u,offerRtpParameters:l})}const d={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const v=await this._pc.createAnswer();x.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",v),await this._pc.setLocalDescription(v)}async pauseReceiving(I){}async resumeReceiving(I){}async getReceiverStats(I){this.assertRecvDirection();const{rtpReceiver:d}=this._mapRecvLocalIdInfo.get(I)||{};if(!d)throw new Error("associated RTCRtpReceiver not found");return d.getStats()}async receiveDataChannel({sctpStreamParameters:I,label:d,protocol:v}){this.assertRecvDirection();const{streamId:c,ordered:u,maxPacketLifeTime:l,maxRetransmits:m}=I,D={negotiated:!0,id:c,ordered:u,maxPacketLifeTime:l,maxRetransmitTime:l,maxRetransmits:m,protocol:v};x.debug("receiveDataChannel() [options:%o]",D);const N=this._pc.createDataChannel(d,D);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const L={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",L),await this._pc.setRemoteDescription(L);const j=await this._pc.createAnswer();if(!this._transportReady){const W=w.parse(j.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:W})}x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setLocalDescription(j),this._hasDataChannelMediaSection=!0}return{dataChannel:N}}async setupTransport({localDtlsRole:I,localSdpObject:d}){d||(d=w.parse(this._pc.localDescription.sdp));const v=s.extractDtlsParameters({sdpObject:d});v.role=I,this._remoteSdp.updateDtlsRole(I==="client"?"server":"client"),await new Promise((c,u)=>{this.safeEmit("@connect",{dtlsParameters:v},c,u)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.Chrome67=P},5535:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(I,d,v,c){c===void 0&&(c=v);var u=Object.getOwnPropertyDescriptor(d,v);u&&!("get"in u?!d.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:function(){return d[v]}}),Object.defineProperty(I,c,u)}:function(I,d,v,c){c===void 0&&(c=v),I[c]=d[v]}),_=this&&this.__setModuleDefault||(Object.create?function(I,d){Object.defineProperty(I,"default",{enumerable:!0,value:d})}:function(I,d){I.default=d}),h=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var d={};if(I!=null)for(var v in I)v!=="default"&&Object.prototype.hasOwnProperty.call(I,v)&&E(d,I,v);return _(d,I),d};Object.defineProperty(p,"__esModule",{value:!0}),p.Chrome70=void 0;const w=h(o(7363)),k=o(2994),f=h(o(1765)),g=h(o(8046)),s=h(o(5544)),b=h(o(5938)),S=o(521),T=o(1305),x=o(3303),O=new k.Logger("Chrome70"),P={OS:1024,MIS:1024};class R extends S.HandlerInterface{static createFactory(){return()=>new R}constructor(){super(),this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome70"}close(){if(O.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){O.debug("getNativeRtpCapabilities()");const d=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{d.addTransceiver("audio"),d.addTransceiver("video");const v=await d.createOffer();try{d.close()}catch{}const c=w.parse(v.sdp);return s.extractRtpCapabilities({sdpObject:c})}catch(v){try{d.close()}catch{}throw v}}async getNativeSctpCapabilities(){return O.debug("getNativeSctpCapabilities()"),{numStreams:P}}run({direction:d,iceParameters:v,iceCandidates:c,dtlsParameters:u,sctpParameters:l,iceServers:m,iceTransportPolicy:D,additionalSettings:N,proprietaryConstraints:L,extendedRtpCapabilities:j}){O.debug("run()"),this._direction=d,this._remoteSdp=new T.RemoteSdp({iceParameters:v,iceCandidates:c,dtlsParameters:u,sctpParameters:l}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",j),video:g.getSendingRtpParameters("video",j)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",j),video:g.getSendingRemoteRtpParameters("video",j)},u.role&&u.role!=="auto"&&(this._forcedLocalDtlsRole=u.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:m||[],iceTransportPolicy:D||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...N},L),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(O.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(d){O.debug("updateIceServers()");const v=this._pc.getConfiguration();v.iceServers=d,this._pc.setConfiguration(v)}async restartIce(d){if(O.debug("restartIce()"),this._remoteSdp.updateIceParameters(d),this._transportReady)if(this._direction==="send"){const v=await this._pc.createOffer({iceRestart:!0});O.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const c={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}else{const v={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const c=await this._pc.createAnswer();O.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}}async getTransportStats(){return this._pc.getStats()}async send({track:d,encodings:v,codecOptions:c,codec:u}){this.assertSendDirection(),O.debug("send() [kind:%s, track.id:%s]",d.kind,d.id);const l=f.clone(this._sendingRtpParametersByKind[d.kind]);l.codecs=g.reduceCodecs(l.codecs,u);const m=f.clone(this._sendingRemoteRtpParametersByKind[d.kind]);m.codecs=g.reduceCodecs(m.codecs,u);const D=this._remoteSdp.getNextMediaSectionIdx(),N=this._pc.addTransceiver(d,{direction:"sendonly",streams:[this._sendStream]});let L,j=await this._pc.createOffer(),W=w.parse(j.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:W}),v&&v.length>1&&(O.debug("send() | enabling legacy simulcast"),W=w.parse(j.sdp),L=W.media[D.idx],b.addLegacySimulcast({offerMediaObject:L,numStreams:v.length}),j={type:"offer",sdp:w.write(W)});let $=!1;const Z=(0,x.parse)((v||[{}])[0].scalabilityMode);if(v&&v.length===1&&Z.spatialLayers>1&&l.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(O.debug("send() | enabling legacy simulcast for VP9 SVC"),$=!0,W=w.parse(j.sdp),L=W.media[D.idx],b.addLegacySimulcast({offerMediaObject:L,numStreams:Z.spatialLayers}),j={type:"offer",sdp:w.write(W)}),O.debug("send() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j),v){O.debug("send() | applying given encodings");const ge=N.sender.getParameters();for(let _e=0;_e<(ge.encodings||[]).length;++_e){const Me=ge.encodings[_e],fe=v[_e];if(!fe)break;ge.encodings[_e]=Object.assign(Me,fe)}await N.sender.setParameters(ge)}const ne=N.mid;if(l.mid=ne,W=w.parse(this._pc.localDescription.sdp),L=W.media[D.idx],l.rtcp.cname=s.getCname({offerMediaObject:L}),l.encodings=b.getRtpEncodings({offerMediaObject:L}),v)for(let ge=0;ge<l.encodings.length;++ge)v[ge]&&Object.assign(l.encodings[ge],v[ge]);if($&&(l.encodings=[l.encodings[0]]),l.encodings.length>1&&(l.codecs[0].mimeType.toLowerCase()==="video/vp8"||l.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const ge of l.encodings)ge.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:L,reuseMid:D.reuseMid,offerRtpParameters:l,answerRtpParameters:m,codecOptions:c});const de={type:"answer",sdp:this._remoteSdp.getSdp()};return O.debug("send() | calling pc.setRemoteDescription() [answer:%o]",de),await this._pc.setRemoteDescription(de),this._mapMidTransceiver.set(ne,N),{localId:ne,rtpParameters:l,rtpSender:N.sender}}async stopSending(d){this.assertSendDirection(),O.debug("stopSending() [localId:%s]",d);const v=this._mapMidTransceiver.get(d);if(!v)throw new Error("associated RTCRtpTransceiver not found");if(v.sender.replaceTrack(null),this._pc.removeTrack(v.sender),this._remoteSdp.closeMediaSection(v.mid))try{v.stop()}catch{}const c=await this._pc.createOffer();O.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const u={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u),this._mapMidTransceiver.delete(d)}async pauseSending(d){}async resumeSending(d){}async replaceTrack(d,v){this.assertSendDirection(),v?O.debug("replaceTrack() [localId:%s, track.id:%s]",d,v.id):O.debug("replaceTrack() [localId:%s, no track]",d);const c=this._mapMidTransceiver.get(d);if(!c)throw new Error("associated RTCRtpTransceiver not found");await c.sender.replaceTrack(v)}async setMaxSpatialLayer(d,v){this.assertSendDirection(),O.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",d,v);const c=this._mapMidTransceiver.get(d);if(!c)throw new Error("associated RTCRtpTransceiver not found");const u=c.sender.getParameters();u.encodings.forEach((D,N)=>{D.active=N<=v}),await c.sender.setParameters(u),this._remoteSdp.muxMediaSectionSimulcast(d,u.encodings);const l=await this._pc.createOffer();O.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async setRtpEncodingParameters(d,v){this.assertSendDirection(),O.debug("setRtpEncodingParameters() [localId:%s, params:%o]",d,v);const c=this._mapMidTransceiver.get(d);if(!c)throw new Error("associated RTCRtpTransceiver not found");const u=c.sender.getParameters();u.encodings.forEach((D,N)=>{u.encodings[N]={...D,...v}}),await c.sender.setParameters(u),this._remoteSdp.muxMediaSectionSimulcast(d,u.encodings);const l=await this._pc.createOffer();O.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async getSenderStats(d){this.assertSendDirection();const v=this._mapMidTransceiver.get(d);if(!v)throw new Error("associated RTCRtpTransceiver not found");return v.sender.getStats()}async sendDataChannel({ordered:d,maxPacketLifeTime:v,maxRetransmits:c,label:u,protocol:l}){this.assertSendDirection();const m={negotiated:!0,id:this._nextSendSctpStreamId,ordered:d,maxPacketLifeTime:v,maxRetransmitTime:v,maxRetransmits:c,protocol:l};O.debug("sendDataChannel() [options:%o]",m);const D=this._pc.createDataChannel(u,m);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%P.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),L=w.parse(N.sdp),j=L.media.find($=>$.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:L}),O.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:j});const W={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",W),await this._pc.setRemoteDescription(W),this._hasDataChannelMediaSection=!0}return{dataChannel:D,sctpStreamParameters:{streamId:m.id,ordered:m.ordered,maxPacketLifeTime:m.maxPacketLifeTime,maxRetransmits:m.maxRetransmits}}}async receive(d){this.assertRecvDirection();const v=[],c=new Map;for(const D of d){const{trackId:N,kind:L,rtpParameters:j,streamId:W}=D;O.debug("receive() [trackId:%s, kind:%s]",N,L);const $=j.mid||String(this._mapMidTransceiver.size);c.set(N,$),this._remoteSdp.receive({mid:$,kind:L,offerRtpParameters:j,streamId:W||j.rtcp.cname,trackId:N})}const u={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let l=await this._pc.createAnswer();const m=w.parse(l.sdp);for(const D of d){const{trackId:N,rtpParameters:L}=D,j=c.get(N),W=m.media.find($=>String($.mid)===j);s.applyCodecParameters({offerRtpParameters:L,answerMediaObject:W})}l={type:"answer",sdp:w.write(m)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:m}),O.debug("receive() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const D of d){const{trackId:N}=D,L=c.get(N),j=this._pc.getTransceivers().find(W=>W.mid===L);if(!j)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(L,j),v.push({localId:L,track:j.receiver.track,rtpReceiver:j.receiver})}return v}async stopReceiving(d){this.assertRecvDirection();for(const u of d){O.debug("stopReceiving() [localId:%s]",u);const l=this._mapMidTransceiver.get(u);if(!l)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(l.mid)}const v={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const c=await this._pc.createAnswer();O.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c);for(const u of d)this._mapMidTransceiver.delete(u)}async pauseReceiving(d){}async resumeReceiving(d){}async getReceiverStats(d){this.assertRecvDirection();const v=this._mapMidTransceiver.get(d);if(!v)throw new Error("associated RTCRtpTransceiver not found");return v.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:d,label:v,protocol:c}){this.assertRecvDirection();const{streamId:u,ordered:l,maxPacketLifeTime:m,maxRetransmits:D}=d,N={negotiated:!0,id:u,ordered:l,maxPacketLifeTime:m,maxRetransmitTime:m,maxRetransmits:D,protocol:c};O.debug("receiveDataChannel() [options:%o]",N);const L=this._pc.createDataChannel(v,N);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const j={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",j),await this._pc.setRemoteDescription(j);const W=await this._pc.createAnswer();if(!this._transportReady){const $=w.parse(W.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$})}O.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",W),await this._pc.setLocalDescription(W),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:d,localSdpObject:v}){v||(v=w.parse(this._pc.localDescription.sdp));const c=s.extractDtlsParameters({sdpObject:v});c.role=d,this._remoteSdp.updateDtlsRole(d==="client"?"server":"client"),await new Promise((u,l)=>{this.safeEmit("@connect",{dtlsParameters:c},u,l)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.Chrome70=R},11:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(v,c,u,l){l===void 0&&(l=u);var m=Object.getOwnPropertyDescriptor(c,u);m&&!("get"in m?!c.__esModule:m.writable||m.configurable)||(m={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(v,l,m)}:function(v,c,u,l){l===void 0&&(l=u),v[l]=c[u]}),_=this&&this.__setModuleDefault||(Object.create?function(v,c){Object.defineProperty(v,"default",{enumerable:!0,value:c})}:function(v,c){v.default=c}),h=this&&this.__importStar||function(v){if(v&&v.__esModule)return v;var c={};if(v!=null)for(var u in v)u!=="default"&&Object.prototype.hasOwnProperty.call(v,u)&&E(c,v,u);return _(c,v),c};Object.defineProperty(p,"__esModule",{value:!0}),p.Chrome74=void 0;const w=h(o(7363)),k=o(2994),f=h(o(1765)),g=h(o(8046)),s=h(o(5544)),b=h(o(5938)),S=h(o(4256)),T=o(4893),x=o(521),O=o(1305),P=o(3303),R=new k.Logger("Chrome74"),I={OS:1024,MIS:1024};class d extends x.HandlerInterface{static createFactory(){return()=>new d}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Chrome74"}close(){if(R.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){R.debug("getNativeRtpCapabilities()");const c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{c.addTransceiver("audio"),c.addTransceiver("video");const u=await c.createOffer();try{c.close()}catch{}const l=w.parse(u.sdp),m=s.extractRtpCapabilities({sdpObject:l});return S.addNackSuppportForOpus(m),m}catch(u){try{c.close()}catch{}throw u}}async getNativeSctpCapabilities(){return R.debug("getNativeSctpCapabilities()"),{numStreams:I}}run({direction:c,iceParameters:u,iceCandidates:l,dtlsParameters:m,sctpParameters:D,iceServers:N,iceTransportPolicy:L,additionalSettings:j,proprietaryConstraints:W,extendedRtpCapabilities:$}){R.debug("run()"),this._direction=c,this._remoteSdp=new O.RemoteSdp({iceParameters:u,iceCandidates:l,dtlsParameters:m,sctpParameters:D}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",$),video:g.getSendingRtpParameters("video",$)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",$),video:g.getSendingRemoteRtpParameters("video",$)},m.role&&m.role!=="auto"&&(this._forcedLocalDtlsRole=m.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:N||[],iceTransportPolicy:L||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...j},W),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):(R.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.addEventListener("iceconnectionstatechange",()=>{switch(this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}))}async updateIceServers(c){this.assertNotClosed(),R.debug("updateIceServers()");const u=this._pc.getConfiguration();u.iceServers=c,this._pc.setConfiguration(u)}async restartIce(c){if(this.assertNotClosed(),R.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),this._transportReady)if(this._direction==="send"){const u=await this._pc.createOffer({iceRestart:!0});R.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}else{const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,encodings:u,codecOptions:l,codec:m}){this.assertNotClosed(),this.assertSendDirection(),R.debug("send() [kind:%s, track.id:%s]",c.kind,c.id),u&&u.length>1&&u.forEach((Me,fe)=>{Me.rid=`r${fe}`});const D=f.clone(this._sendingRtpParametersByKind[c.kind]);D.codecs=g.reduceCodecs(D.codecs,m);const N=f.clone(this._sendingRemoteRtpParametersByKind[c.kind]);N.codecs=g.reduceCodecs(N.codecs,m);const L=this._remoteSdp.getNextMediaSectionIdx(),j=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream],sendEncodings:u});let W,$=await this._pc.createOffer(),Z=w.parse($.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Z});let ne=!1;const de=(0,P.parse)((u||[{}])[0].scalabilityMode);u&&u.length===1&&de.spatialLayers>1&&D.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(R.debug("send() | enabling legacy simulcast for VP9 SVC"),ne=!0,Z=w.parse($.sdp),W=Z.media[L.idx],b.addLegacySimulcast({offerMediaObject:W,numStreams:de.spatialLayers}),$={type:"offer",sdp:w.write(Z)}),R.debug("send() | calling pc.setLocalDescription() [offer:%o]",$),await this._pc.setLocalDescription($);const ge=j.mid;if(D.mid=ge,Z=w.parse(this._pc.localDescription.sdp),W=Z.media[L.idx],D.rtcp.cname=s.getCname({offerMediaObject:W}),u)if(u.length===1){let Me=b.getRtpEncodings({offerMediaObject:W});Object.assign(Me[0],u[0]),ne&&(Me=[Me[0]]),D.encodings=Me}else D.encodings=u;else D.encodings=b.getRtpEncodings({offerMediaObject:W});if(D.encodings.length>1&&(D.codecs[0].mimeType.toLowerCase()==="video/vp8"||D.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Me of D.encodings)Me.scalabilityMode?Me.scalabilityMode=`L1T${de.temporalLayers}`:Me.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:W,reuseMid:L.reuseMid,offerRtpParameters:D,answerRtpParameters:N,codecOptions:l,extmapAllowMixed:!0});const _e={type:"answer",sdp:this._remoteSdp.getSdp()};return R.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_e),await this._pc.setRemoteDescription(_e),this._mapMidTransceiver.set(ge,j),{localId:ge,rtpParameters:D,rtpSender:j.sender}}async stopSending(c){if(this.assertSendDirection(),R.debug("stopSending() [localId:%s]",c),this._closed)return;const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");if(u.sender.replaceTrack(null),this._pc.removeTrack(u.sender),this._remoteSdp.closeMediaSection(u.mid))try{u.stop()}catch{}const l=await this._pc.createOffer();R.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),R.debug("pauseSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");u.direction="inactive",this._remoteSdp.pauseMediaSection(c);const l=await this._pc.createOffer();R.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),R.debug("resumeSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(this._remoteSdp.resumeSendingMediaSection(c),!u)throw new Error("associated RTCRtpTransceiver not found");u.direction="sendonly";const l=await this._pc.createOffer();R.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async replaceTrack(c,u){this.assertNotClosed(),this.assertSendDirection(),u?R.debug("replaceTrack() [localId:%s, track.id:%s]",c,u.id):R.debug("replaceTrack() [localId:%s, no track]",c);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");await l.sender.replaceTrack(u)}async setMaxSpatialLayer(c,u){this.assertNotClosed(),this.assertSendDirection(),R.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,u);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");const m=l.sender.getParameters();m.encodings.forEach((L,j)=>{L.active=j<=u}),await l.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(c,m.encodings);const D=await this._pc.createOffer();R.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const N={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async setRtpEncodingParameters(c,u){this.assertNotClosed(),this.assertSendDirection(),R.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,u);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");const m=l.sender.getParameters();m.encodings.forEach((L,j)=>{m.encodings[j]={...L,...u}}),await l.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(c,m.encodings);const D=await this._pc.createOffer();R.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const N={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");return u.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:u,maxRetransmits:l,label:m,protocol:D}){this.assertNotClosed(),this.assertSendDirection();const N={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:u,maxRetransmits:l,protocol:D};R.debug("sendDataChannel() [options:%o]",N);const L=this._pc.createDataChannel(m,N);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%I.MIS,!this._hasDataChannelMediaSection){const j=await this._pc.createOffer(),W=w.parse(j.sdp),$=W.media.find(ne=>ne.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:W}),R.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j),this._remoteSdp.sendSctpAssociation({offerMediaObject:$});const Z={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setRemoteDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:L,sctpStreamParameters:{streamId:N.id,ordered:N.ordered,maxPacketLifeTime:N.maxPacketLifeTime,maxRetransmits:N.maxRetransmits}}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const u=[],l=new Map;for(const L of c){const{trackId:j,kind:W,rtpParameters:$,streamId:Z}=L;R.debug("receive() [trackId:%s, kind:%s]",j,W);const ne=$.mid||String(this._mapMidTransceiver.size);l.set(j,ne),this._remoteSdp.receive({mid:ne,kind:W,offerRtpParameters:$,streamId:Z||$.rtcp.cname,trackId:j})}const m={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);let D=await this._pc.createAnswer();const N=w.parse(D.sdp);for(const L of c){const{trackId:j,rtpParameters:W}=L,$=l.get(j),Z=N.media.find(ne=>String(ne.mid)===$);s.applyCodecParameters({offerRtpParameters:W,answerMediaObject:Z})}D={type:"answer",sdp:w.write(N)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),R.debug("receive() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D);for(const L of c){const{trackId:j}=L,W=l.get(j),$=this._pc.getTransceivers().find(Z=>Z.mid===W);if(!$)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(W,$),u.push({localId:W,track:$.receiver.track,rtpReceiver:$.receiver})}return u}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const m of c){R.debug("stopReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(D.mid)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const m of c)this._mapMidTransceiver.delete(m)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const m of c){R.debug("pauseReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");D.direction="inactive",this._remoteSdp.pauseMediaSection(m)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const m of c){R.debug("resumeReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");D.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(m)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");return u.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:u,protocol:l}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:m,ordered:D,maxPacketLifeTime:N,maxRetransmits:L}=c,j={negotiated:!0,id:m,ordered:D,maxPacketLifeTime:N,maxRetransmits:L,protocol:l};R.debug("receiveDataChannel() [options:%o]",j);const W=this._pc.createDataChannel(u,j);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const $={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",$),await this._pc.setRemoteDescription($);const Z=await this._pc.createAnswer();if(!this._transportReady){const ne=w.parse(Z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:ne})}R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setLocalDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:W}}async setupTransport({localDtlsRole:c,localSdpObject:u}){u||(u=w.parse(this._pc.localDescription.sdp));const l=s.extractDtlsParameters({sdpObject:u});l.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((m,D)=>{this.safeEmit("@connect",{dtlsParameters:l},m,D)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new T.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.Chrome74=d},8633:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(x,O,P,R){R===void 0&&(R=P);var I=Object.getOwnPropertyDescriptor(O,P);I&&!("get"in I?!O.__esModule:I.writable||I.configurable)||(I={enumerable:!0,get:function(){return O[P]}}),Object.defineProperty(x,R,I)}:function(x,O,P,R){R===void 0&&(R=P),x[R]=O[P]}),_=this&&this.__setModuleDefault||(Object.create?function(x,O){Object.defineProperty(x,"default",{enumerable:!0,value:O})}:function(x,O){x.default=O}),h=this&&this.__importStar||function(x){if(x&&x.__esModule)return x;var O={};if(x!=null)for(var P in x)P!=="default"&&Object.prototype.hasOwnProperty.call(x,P)&&E(O,x,P);return _(O,x),O};Object.defineProperty(p,"__esModule",{value:!0}),p.Edge11=void 0;const w=o(2994),k=o(4893),f=h(o(1765)),g=h(o(8046)),s=h(o(8751)),b=o(521),S=new w.Logger("Edge11");class T extends b.HandlerInterface{static createFactory(){return()=>new T}constructor(){super(),this._rtpSenders=new Map,this._rtpReceivers=new Map,this._nextSendLocalId=0,this._transportReady=!1}get name(){return"Edge11"}close(){S.debug("close()");try{this._iceGatherer.close()}catch{}try{this._iceTransport.stop()}catch{}try{this._dtlsTransport.stop()}catch{}for(const O of this._rtpSenders.values())try{O.stop()}catch{}for(const O of this._rtpReceivers.values())try{O.stop()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){return S.debug("getNativeRtpCapabilities()"),s.getCapabilities()}async getNativeSctpCapabilities(){return S.debug("getNativeSctpCapabilities()"),{numStreams:{OS:0,MIS:0}}}run({direction:O,iceParameters:P,iceCandidates:R,dtlsParameters:I,sctpParameters:d,iceServers:v,iceTransportPolicy:c,additionalSettings:u,proprietaryConstraints:l,extendedRtpCapabilities:m}){S.debug("run()"),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",m),video:g.getSendingRtpParameters("video",m)},this._remoteIceParameters=P,this._remoteIceCandidates=R,this._remoteDtlsParameters=I,this._cname=`CNAME-${f.generateRandomNumber()}`,this.setIceGatherer({iceServers:v,iceTransportPolicy:c}),this.setIceTransport(),this.setDtlsTransport()}async updateIceServers(O){throw new k.UnsupportedError("not supported")}async restartIce(O){if(S.debug("restartIce()"),this._remoteIceParameters=O,this._transportReady){S.debug("restartIce() | calling iceTransport.start()"),this._iceTransport.start(this._iceGatherer,O,"controlling");for(const P of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(P);this._iceTransport.addRemoteCandidate({})}}async getTransportStats(){return this._iceTransport.getStats()}async send({track:O,encodings:P,codecOptions:R,codec:I}){S.debug("send() [kind:%s, track.id:%s]",O.kind,O.id),this._transportReady||await this.setupTransport({localDtlsRole:"server"}),S.debug("send() | calling new RTCRtpSender()");const d=new RTCRtpSender(O,this._dtlsTransport),v=f.clone(this._sendingRtpParametersByKind[O.kind]);v.codecs=g.reduceCodecs(v.codecs,I);const c=v.codecs.some(m=>/.+\/rtx$/i.test(m.mimeType));P||(P=[{}]);for(const m of P)m.ssrc=f.generateRandomNumber(),c&&(m.rtx={ssrc:f.generateRandomNumber()});v.encodings=P,v.rtcp={cname:this._cname,reducedSize:!0,mux:!0};const u=s.mangleRtpParameters(v);S.debug("send() | calling rtpSender.send() [params:%o]",u),await d.send(u);const l=String(this._nextSendLocalId);return this._nextSendLocalId++,this._rtpSenders.set(l,d),{localId:l,rtpParameters:v,rtpSender:d}}async stopSending(O){S.debug("stopSending() [localId:%s]",O);const P=this._rtpSenders.get(O);if(!P)throw new Error("RTCRtpSender not found");this._rtpSenders.delete(O);try{S.debug("stopSending() | calling rtpSender.stop()"),P.stop()}catch(R){throw S.warn("stopSending() | rtpSender.stop() failed:%o",R),R}}async pauseSending(O){}async resumeSending(O){}async replaceTrack(O,P){P?S.debug("replaceTrack() [localId:%s, track.id:%s]",O,P.id):S.debug("replaceTrack() [localId:%s, no track]",O);const R=this._rtpSenders.get(O);if(!R)throw new Error("RTCRtpSender not found");R.setTrack(P)}async setMaxSpatialLayer(O,P){S.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",O,P);const R=this._rtpSenders.get(O);if(!R)throw new Error("RTCRtpSender not found");const I=R.getParameters();I.encodings.forEach((d,v)=>{d.active=v<=P}),await R.setParameters(I)}async setRtpEncodingParameters(O,P){S.debug("setRtpEncodingParameters() [localId:%s, params:%o]",O,P);const R=this._rtpSenders.get(O);if(!R)throw new Error("RTCRtpSender not found");const I=R.getParameters();I.encodings.forEach((d,v)=>{I.encodings[v]={...d,...P}}),await R.setParameters(I)}async getSenderStats(O){const P=this._rtpSenders.get(O);if(!P)throw new Error("RTCRtpSender not found");return P.getStats()}async sendDataChannel(O){throw new k.UnsupportedError("not implemented")}async receive(O){const P=[];for(const R of O){const{trackId:I,kind:d}=R;S.debug("receive() [trackId:%s, kind:%s]",I,d)}this._transportReady||await this.setupTransport({localDtlsRole:"server"});for(const R of O){const{trackId:I,kind:d,rtpParameters:v}=R;S.debug("receive() | calling new RTCRtpReceiver()");const c=new RTCRtpReceiver(this._dtlsTransport,d);c.addEventListener("error",m=>{S.error('rtpReceiver "error" event [event:%o]',m)});const u=s.mangleRtpParameters(v);S.debug("receive() | calling rtpReceiver.receive() [params:%o]",u),await c.receive(u);const l=I;this._rtpReceivers.set(l,c),P.push({localId:l,track:c.track,rtpReceiver:c})}return P}async stopReceiving(O){for(const P of O){S.debug("stopReceiving() [localId:%s]",P);const R=this._rtpReceivers.get(P);if(!R)throw new Error("RTCRtpReceiver not found");this._rtpReceivers.delete(P);try{S.debug("stopReceiving() | calling rtpReceiver.stop()"),R.stop()}catch(I){S.warn("stopReceiving() | rtpReceiver.stop() failed:%o",I)}}}async pauseReceiving(O){}async resumeReceiving(O){}async getReceiverStats(O){const P=this._rtpReceivers.get(O);if(!P)throw new Error("RTCRtpReceiver not found");return P.getStats()}async receiveDataChannel(O){throw new k.UnsupportedError("not implemented")}setIceGatherer({iceServers:O,iceTransportPolicy:P}){const R=new RTCIceGatherer({iceServers:O||[],gatherPolicy:P||"all"});R.addEventListener("error",I=>{S.error('iceGatherer "error" event [event:%o]',I)});try{R.gather()}catch(I){S.debug("setIceGatherer() | iceGatherer.gather() failed: %s",I.toString())}this._iceGatherer=R}setIceTransport(){const O=new RTCIceTransport(this._iceGatherer);O.addEventListener("statechange",()=>{switch(O.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),O.addEventListener("icestatechange",()=>{switch(O.state){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}}),O.addEventListener("candidatepairchange",P=>{S.debug('iceTransport "candidatepairchange" event [pair:%o]',P.pair)}),this._iceTransport=O}setDtlsTransport(){const O=new RTCDtlsTransport(this._iceTransport);O.addEventListener("statechange",()=>{S.debug('dtlsTransport "statechange" event [state:%s]',O.state)}),O.addEventListener("dtlsstatechange",()=>{S.debug('dtlsTransport "dtlsstatechange" event [state:%s]',O.state),O.state==="closed"&&this.emit("@connectionstatechange","closed")}),O.addEventListener("error",P=>{S.error('dtlsTransport "error" event [event:%o]',P)}),this._dtlsTransport=O}async setupTransport({localDtlsRole:O}){S.debug("setupTransport()");const P=this._dtlsTransport.getLocalParameters();P.role=O,await new Promise((R,I)=>{this.safeEmit("@connect",{dtlsParameters:P},R,I)}),this._iceTransport.start(this._iceGatherer,this._remoteIceParameters,"controlling");for(const R of this._remoteIceCandidates)this._iceTransport.addRemoteCandidate(R);this._iceTransport.addRemoteCandidate({}),this._remoteDtlsParameters.fingerprints=this._remoteDtlsParameters.fingerprints.filter(R=>R.algorithm==="sha-256"||R.algorithm==="sha-384"||R.algorithm==="sha-512"),this._dtlsTransport.start(this._remoteDtlsParameters),this._transportReady=!0}}p.Edge11=T},2292:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(d,v,c,u){u===void 0&&(u=c);var l=Object.getOwnPropertyDescriptor(v,c);l&&!("get"in l?!v.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return v[c]}}),Object.defineProperty(d,u,l)}:function(d,v,c,u){u===void 0&&(u=c),d[u]=v[c]}),_=this&&this.__setModuleDefault||(Object.create?function(d,v){Object.defineProperty(d,"default",{enumerable:!0,value:v})}:function(d,v){d.default=v}),h=this&&this.__importStar||function(d){if(d&&d.__esModule)return d;var v={};if(d!=null)for(var c in d)c!=="default"&&Object.prototype.hasOwnProperty.call(d,c)&&E(v,d,c);return _(v,d),v};Object.defineProperty(p,"__esModule",{value:!0}),p.Firefox120=void 0;const w=h(o(7363)),k=o(2994),f=o(4893),g=h(o(1765)),s=h(o(8046)),b=h(o(5544)),S=h(o(5938)),T=o(521),x=o(1305),O=o(3303),P=new k.Logger("Firefox120"),R={OS:16,MIS:2048};class I extends T.HandlerInterface{static createFactory(){return()=>new I}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox120"}close(){if(P.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){P.debug("getNativeRtpCapabilities()");const v=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),c=document.createElement("canvas");c.getContext("2d");const u=c.captureStream().getVideoTracks()[0];try{v.addTransceiver("audio",{direction:"sendrecv"}),v.addTransceiver(u,{direction:"sendrecv",sendEncodings:[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}]});const l=await v.createOffer();try{c.remove()}catch{}try{u.stop()}catch{}try{v.close()}catch{}const m=w.parse(l.sdp);return b.extractRtpCapabilities({sdpObject:m})}catch(l){try{c.remove()}catch{}try{u.stop()}catch{}try{v.close()}catch{}throw l}}async getNativeSctpCapabilities(){return P.debug("getNativeSctpCapabilities()"),{numStreams:R}}run({direction:v,iceParameters:c,iceCandidates:u,dtlsParameters:l,sctpParameters:m,iceServers:D,iceTransportPolicy:N,additionalSettings:L,proprietaryConstraints:j,extendedRtpCapabilities:W}){this.assertNotClosed(),P.debug("run()"),this._direction=v,this._remoteSdp=new x.RemoteSdp({iceParameters:c,iceCandidates:u,dtlsParameters:l,sctpParameters:m}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",W),video:s.getSendingRtpParameters("video",W)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",W),video:s.getSendingRemoteRtpParameters("video",W)},this._pc=new RTCPeerConnection({iceServers:D||[],iceTransportPolicy:N||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...L},j),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(P.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(v){throw this.assertNotClosed(),new f.UnsupportedError("not supported")}async restartIce(v){if(this.assertNotClosed(),P.debug("restartIce()"),this._remoteSdp.updateIceParameters(v),this._transportReady)if(this._direction==="send"){const c=await this._pc.createOffer({iceRestart:!0});P.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const u={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}else{const c={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const u=await this._pc.createAnswer();P.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:v,encodings:c,codecOptions:u,codec:l}){this.assertNotClosed(),this.assertSendDirection(),P.debug("send() [kind:%s, track.id:%s]",v.kind,v.id),c&&c.length>1&&c.forEach((de,ge)=>{de.rid=`r${ge}`});const m=g.clone(this._sendingRtpParametersByKind[v.kind]);m.codecs=s.reduceCodecs(m.codecs,l);const D=g.clone(this._sendingRemoteRtpParametersByKind[v.kind]);D.codecs=s.reduceCodecs(D.codecs,l);const N=this._pc.addTransceiver(v,{direction:"sendonly",streams:[this._sendStream],sendEncodings:c}),L=await this._pc.createOffer();let j=w.parse(L.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:j});const W=(0,O.parse)((c||[{}])[0].scalabilityMode);P.debug("send() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L);const $=N.mid;m.mid=$,j=w.parse(this._pc.localDescription.sdp);const Z=j.media[j.media.length-1];if(m.rtcp.cname=b.getCname({offerMediaObject:Z}),c)if(c.length===1){const de=S.getRtpEncodings({offerMediaObject:Z});Object.assign(de[0],c[0]),m.encodings=de}else m.encodings=c;else m.encodings=S.getRtpEncodings({offerMediaObject:Z});if(m.encodings.length>1&&(m.codecs[0].mimeType.toLowerCase()==="video/vp8"||m.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const de of m.encodings)de.scalabilityMode?de.scalabilityMode=`L1T${W.temporalLayers}`:de.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Z,offerRtpParameters:m,answerRtpParameters:D,codecOptions:u,extmapAllowMixed:!0});const ne={type:"answer",sdp:this._remoteSdp.getSdp()};return P.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ne),await this._pc.setRemoteDescription(ne),this._mapMidTransceiver.set($,N),{localId:$,rtpParameters:m,rtpSender:N.sender}}async stopSending(v){if(this.assertSendDirection(),P.debug("stopSending() [localId:%s]",v),this._closed)return;const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated transceiver not found");c.sender.replaceTrack(null),this._pc.removeTrack(c.sender),this._remoteSdp.disableMediaSection(c.mid);const u=await this._pc.createOffer();P.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l),this._mapMidTransceiver.delete(v)}async pauseSending(v){this.assertNotClosed(),this.assertSendDirection(),P.debug("pauseSending() [localId:%s]",v);const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated RTCRtpTransceiver not found");c.direction="inactive",this._remoteSdp.pauseMediaSection(v);const u=await this._pc.createOffer();P.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}async resumeSending(v){this.assertNotClosed(),this.assertSendDirection(),P.debug("resumeSending() [localId:%s]",v);const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated RTCRtpTransceiver not found");c.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(v);const u=await this._pc.createOffer();P.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}async replaceTrack(v,c){this.assertNotClosed(),this.assertSendDirection(),c?P.debug("replaceTrack() [localId:%s, track.id:%s]",v,c.id):P.debug("replaceTrack() [localId:%s, no track]",v);const u=this._mapMidTransceiver.get(v);if(!u)throw new Error("associated RTCRtpTransceiver not found");await u.sender.replaceTrack(c)}async setMaxSpatialLayer(v,c){this.assertNotClosed(),this.assertSendDirection(),P.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",v,c);const u=this._mapMidTransceiver.get(v);if(!u)throw new Error("associated transceiver not found");const l=u.sender.getParameters();l.encodings.forEach((N,L)=>{N.active=L<=c}),await u.sender.setParameters(l),this._remoteSdp.muxMediaSectionSimulcast(v,l.encodings);const m=await this._pc.createOffer();P.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const D={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async setRtpEncodingParameters(v,c){this.assertNotClosed(),this.assertSendDirection(),P.debug("setRtpEncodingParameters() [localId:%s, params:%o]",v,c);const u=this._mapMidTransceiver.get(v);if(!u)throw new Error("associated RTCRtpTransceiver not found");const l=u.sender.getParameters();l.encodings.forEach((N,L)=>{l.encodings[L]={...N,...c}}),await u.sender.setParameters(l),this._remoteSdp.muxMediaSectionSimulcast(v,l.encodings);const m=await this._pc.createOffer();P.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const D={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async getSenderStats(v){this.assertNotClosed(),this.assertSendDirection();const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated RTCRtpTransceiver not found");return c.sender.getStats()}async sendDataChannel({ordered:v,maxPacketLifeTime:c,maxRetransmits:u,label:l,protocol:m}){this.assertNotClosed(),this.assertSendDirection();const D={negotiated:!0,id:this._nextSendSctpStreamId,ordered:v,maxPacketLifeTime:c,maxRetransmits:u,protocol:m};P.debug("sendDataChannel() [options:%o]",D);const N=this._pc.createDataChannel(l,D);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%R.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),j=w.parse(L.sdp),W=j.media.find(Z=>Z.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:j}),P.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:W});const $={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setRemoteDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:N,sctpStreamParameters:{streamId:D.id,ordered:D.ordered,maxPacketLifeTime:D.maxPacketLifeTime,maxRetransmits:D.maxRetransmits}}}async receive(v){this.assertNotClosed(),this.assertRecvDirection();const c=[],u=new Map;for(const N of v){const{trackId:L,kind:j,rtpParameters:W,streamId:$}=N;P.debug("receive() [trackId:%s, kind:%s]",L,j);const Z=W.mid||String(this._mapMidTransceiver.size);u.set(L,Z),this._remoteSdp.receive({mid:Z,kind:j,offerRtpParameters:W,streamId:$||W.rtcp.cname,trackId:L})}const l={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);let m=await this._pc.createAnswer();const D=w.parse(m.sdp);for(const N of v){const{trackId:L,rtpParameters:j}=N,W=u.get(L),$=D.media.find(Z=>String(Z.mid)===W);b.applyCodecParameters({offerRtpParameters:j,answerMediaObject:$}),m={type:"answer",sdp:w.write(D)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:D}),P.debug("receive() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m);for(const N of v){const{trackId:L}=N,j=u.get(L),W=this._pc.getTransceivers().find($=>$.mid===j);if(!W)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(j,W),c.push({localId:j,track:W.receiver.track,rtpReceiver:W.receiver})}return c}async stopReceiving(v){if(this.assertRecvDirection(),this._closed)return;for(const l of v){P.debug("stopReceiving() [localId:%s]",l);const m=this._mapMidTransceiver.get(l);if(!m)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(m.mid)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const u=await this._pc.createAnswer();P.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const l of v)this._mapMidTransceiver.delete(l)}async pauseReceiving(v){this.assertNotClosed(),this.assertRecvDirection();for(const l of v){P.debug("pauseReceiving() [localId:%s]",l);const m=this._mapMidTransceiver.get(l);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="inactive",this._remoteSdp.pauseMediaSection(l)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const u=await this._pc.createAnswer();P.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async resumeReceiving(v){this.assertNotClosed(),this.assertRecvDirection();for(const l of v){P.debug("resumeReceiving() [localId:%s]",l);const m=this._mapMidTransceiver.get(l);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(l)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const u=await this._pc.createAnswer();P.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async getReceiverStats(v){this.assertRecvDirection();const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated RTCRtpTransceiver not found");return c.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:v,label:c,protocol:u}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:l,ordered:m,maxPacketLifeTime:D,maxRetransmits:N}=v,L={negotiated:!0,id:l,ordered:m,maxPacketLifeTime:D,maxRetransmits:N,protocol:u};P.debug("receiveDataChannel() [options:%o]",L);const j=this._pc.createDataChannel(c,L);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const W={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",W),await this._pc.setRemoteDescription(W);const $=await this._pc.createAnswer();if(!this._transportReady){const Z=w.parse($.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:Z})}P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setLocalDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:j}}async setupTransport({localDtlsRole:v,localSdpObject:c}){c||(c=w.parse(this._pc.localDescription.sdp));const u=b.extractDtlsParameters({sdpObject:c});u.role=v,this._remoteSdp.updateDtlsRole(v==="client"?"server":"client"),await new Promise((l,m)=>{this.safeEmit("@connect",{dtlsParameters:u},l,m)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new f.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.Firefox120=I},1767:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(d,v,c,u){u===void 0&&(u=c);var l=Object.getOwnPropertyDescriptor(v,c);l&&!("get"in l?!v.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return v[c]}}),Object.defineProperty(d,u,l)}:function(d,v,c,u){u===void 0&&(u=c),d[u]=v[c]}),_=this&&this.__setModuleDefault||(Object.create?function(d,v){Object.defineProperty(d,"default",{enumerable:!0,value:v})}:function(d,v){d.default=v}),h=this&&this.__importStar||function(d){if(d&&d.__esModule)return d;var v={};if(d!=null)for(var c in d)c!=="default"&&Object.prototype.hasOwnProperty.call(d,c)&&E(v,d,c);return _(v,d),v};Object.defineProperty(p,"__esModule",{value:!0}),p.Firefox60=void 0;const w=h(o(7363)),k=o(2994),f=o(4893),g=h(o(1765)),s=h(o(8046)),b=h(o(5544)),S=h(o(5938)),T=o(521),x=o(1305),O=o(3303),P=new k.Logger("Firefox60"),R={OS:16,MIS:2048};class I extends T.HandlerInterface{static createFactory(){return()=>new I}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Firefox60"}close(){if(P.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){P.debug("getNativeRtpCapabilities()");const v=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"}),c=document.createElement("canvas");c.getContext("2d");const u=c.captureStream().getVideoTracks()[0];try{v.addTransceiver("audio",{direction:"sendrecv"});const l=v.addTransceiver(u,{direction:"sendrecv"}),m=l.sender.getParameters(),D=[{rid:"r0",maxBitrate:1e5},{rid:"r1",maxBitrate:5e5}];m.encodings=D,await l.sender.setParameters(m);const N=await v.createOffer();try{c.remove()}catch{}try{u.stop()}catch{}try{v.close()}catch{}const L=w.parse(N.sdp);return b.extractRtpCapabilities({sdpObject:L})}catch(l){try{c.remove()}catch{}try{u.stop()}catch{}try{v.close()}catch{}throw l}}async getNativeSctpCapabilities(){return P.debug("getNativeSctpCapabilities()"),{numStreams:R}}run({direction:v,iceParameters:c,iceCandidates:u,dtlsParameters:l,sctpParameters:m,iceServers:D,iceTransportPolicy:N,additionalSettings:L,proprietaryConstraints:j,extendedRtpCapabilities:W}){this.assertNotClosed(),P.debug("run()"),this._direction=v,this._remoteSdp=new x.RemoteSdp({iceParameters:c,iceCandidates:u,dtlsParameters:l,sctpParameters:m}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",W),video:s.getSendingRtpParameters("video",W)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",W),video:s.getSendingRemoteRtpParameters("video",W)},this._pc=new RTCPeerConnection({iceServers:D||[],iceTransportPolicy:N||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...L},j),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(P.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(v){throw this.assertNotClosed(),new f.UnsupportedError("not supported")}async restartIce(v){if(this.assertNotClosed(),P.debug("restartIce()"),this._remoteSdp.updateIceParameters(v),this._transportReady)if(this._direction==="send"){const c=await this._pc.createOffer({iceRestart:!0});P.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",c),await this._pc.setLocalDescription(c);const u={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}else{const c={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const u=await this._pc.createAnswer();P.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:v,encodings:c,codecOptions:u,codec:l}){this.assertNotClosed(),this.assertSendDirection(),P.debug("send() [kind:%s, track.id:%s]",v.kind,v.id),c&&(c=g.clone(c)).length>1&&(c.forEach((de,ge)=>{de.rid=`r${ge}`}),c.reverse());const m=g.clone(this._sendingRtpParametersByKind[v.kind]);m.codecs=s.reduceCodecs(m.codecs,l);const D=g.clone(this._sendingRemoteRtpParametersByKind[v.kind]);D.codecs=s.reduceCodecs(D.codecs,l);const N=this._pc.addTransceiver(v,{direction:"sendonly",streams:[this._sendStream]});if(c){const de=N.sender.getParameters();de.encodings=c,await N.sender.setParameters(de)}const L=await this._pc.createOffer();let j=w.parse(L.sdp);this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:j});const W=(0,O.parse)((c||[{}])[0].scalabilityMode);P.debug("send() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L);const $=N.mid;m.mid=$,j=w.parse(this._pc.localDescription.sdp);const Z=j.media[j.media.length-1];if(m.rtcp.cname=b.getCname({offerMediaObject:Z}),c)if(c.length===1){const de=S.getRtpEncodings({offerMediaObject:Z});Object.assign(de[0],c[0]),m.encodings=de}else m.encodings=c.reverse();else m.encodings=S.getRtpEncodings({offerMediaObject:Z});if(m.encodings.length>1&&(m.codecs[0].mimeType.toLowerCase()==="video/vp8"||m.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const de of m.encodings)de.scalabilityMode?de.scalabilityMode=`L1T${W.temporalLayers}`:de.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:Z,offerRtpParameters:m,answerRtpParameters:D,codecOptions:u,extmapAllowMixed:!0});const ne={type:"answer",sdp:this._remoteSdp.getSdp()};return P.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ne),await this._pc.setRemoteDescription(ne),this._mapMidTransceiver.set($,N),{localId:$,rtpParameters:m,rtpSender:N.sender}}async stopSending(v){if(this.assertSendDirection(),P.debug("stopSending() [localId:%s]",v),this._closed)return;const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated transceiver not found");c.sender.replaceTrack(null),this._pc.removeTrack(c.sender),this._remoteSdp.disableMediaSection(c.mid);const u=await this._pc.createOffer();P.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l),this._mapMidTransceiver.delete(v)}async pauseSending(v){this.assertNotClosed(),this.assertSendDirection(),P.debug("pauseSending() [localId:%s]",v);const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated RTCRtpTransceiver not found");c.direction="inactive",this._remoteSdp.pauseMediaSection(v);const u=await this._pc.createOffer();P.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}async resumeSending(v){this.assertNotClosed(),this.assertSendDirection(),P.debug("resumeSending() [localId:%s]",v);const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated RTCRtpTransceiver not found");c.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(v);const u=await this._pc.createOffer();P.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}async replaceTrack(v,c){this.assertNotClosed(),this.assertSendDirection(),c?P.debug("replaceTrack() [localId:%s, track.id:%s]",v,c.id):P.debug("replaceTrack() [localId:%s, no track]",v);const u=this._mapMidTransceiver.get(v);if(!u)throw new Error("associated RTCRtpTransceiver not found");await u.sender.replaceTrack(c)}async setMaxSpatialLayer(v,c){this.assertNotClosed(),this.assertSendDirection(),P.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",v,c);const u=this._mapMidTransceiver.get(v);if(!u)throw new Error("associated transceiver not found");const l=u.sender.getParameters();c=l.encodings.length-1-c,l.encodings.forEach((N,L)=>{N.active=L>=c}),await u.sender.setParameters(l),this._remoteSdp.muxMediaSectionSimulcast(v,l.encodings);const m=await this._pc.createOffer();P.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const D={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async setRtpEncodingParameters(v,c){this.assertNotClosed(),this.assertSendDirection(),P.debug("setRtpEncodingParameters() [localId:%s, params:%o]",v,c);const u=this._mapMidTransceiver.get(v);if(!u)throw new Error("associated RTCRtpTransceiver not found");const l=u.sender.getParameters();l.encodings.forEach((N,L)=>{l.encodings[L]={...N,...c}}),await u.sender.setParameters(l),this._remoteSdp.muxMediaSectionSimulcast(v,l.encodings);const m=await this._pc.createOffer();P.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m);const D={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",D),await this._pc.setRemoteDescription(D)}async getSenderStats(v){this.assertNotClosed(),this.assertSendDirection();const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated RTCRtpTransceiver not found");return c.sender.getStats()}async sendDataChannel({ordered:v,maxPacketLifeTime:c,maxRetransmits:u,label:l,protocol:m}){this.assertNotClosed(),this.assertSendDirection();const D={negotiated:!0,id:this._nextSendSctpStreamId,ordered:v,maxPacketLifeTime:c,maxRetransmits:u,protocol:m};P.debug("sendDataChannel() [options:%o]",D);const N=this._pc.createDataChannel(l,D);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%R.MIS,!this._hasDataChannelMediaSection){const L=await this._pc.createOffer(),j=w.parse(L.sdp),W=j.media.find(Z=>Z.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:j}),P.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",L),await this._pc.setLocalDescription(L),this._remoteSdp.sendSctpAssociation({offerMediaObject:W});const $={type:"answer",sdp:this._remoteSdp.getSdp()};P.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setRemoteDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:N,sctpStreamParameters:{streamId:D.id,ordered:D.ordered,maxPacketLifeTime:D.maxPacketLifeTime,maxRetransmits:D.maxRetransmits}}}async receive(v){this.assertNotClosed(),this.assertRecvDirection();const c=[],u=new Map;for(const N of v){const{trackId:L,kind:j,rtpParameters:W,streamId:$}=N;P.debug("receive() [trackId:%s, kind:%s]",L,j);const Z=W.mid||String(this._mapMidTransceiver.size);u.set(L,Z),this._remoteSdp.receive({mid:Z,kind:j,offerRtpParameters:W,streamId:$||W.rtcp.cname,trackId:L})}const l={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",l),await this._pc.setRemoteDescription(l);let m=await this._pc.createAnswer();const D=w.parse(m.sdp);for(const N of v){const{trackId:L,rtpParameters:j}=N,W=u.get(L),$=D.media.find(Z=>String(Z.mid)===W);b.applyCodecParameters({offerRtpParameters:j,answerMediaObject:$}),m={type:"answer",sdp:w.write(D)}}this._transportReady||await this.setupTransport({localDtlsRole:"client",localSdpObject:D}),P.debug("receive() | calling pc.setLocalDescription() [answer:%o]",m),await this._pc.setLocalDescription(m);for(const N of v){const{trackId:L}=N,j=u.get(L),W=this._pc.getTransceivers().find($=>$.mid===j);if(!W)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(j,W),c.push({localId:j,track:W.receiver.track,rtpReceiver:W.receiver})}return c}async stopReceiving(v){if(this.assertRecvDirection(),this._closed)return;for(const l of v){P.debug("stopReceiving() [localId:%s]",l);const m=this._mapMidTransceiver.get(l);if(!m)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(m.mid)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const u=await this._pc.createAnswer();P.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u);for(const l of v)this._mapMidTransceiver.delete(l)}async pauseReceiving(v){this.assertNotClosed(),this.assertRecvDirection();for(const l of v){P.debug("pauseReceiving() [localId:%s]",l);const m=this._mapMidTransceiver.get(l);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="inactive",this._remoteSdp.pauseMediaSection(l)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const u=await this._pc.createAnswer();P.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async resumeReceiving(v){this.assertNotClosed(),this.assertRecvDirection();for(const l of v){P.debug("resumeReceiving() [localId:%s]",l);const m=this._mapMidTransceiver.get(l);if(!m)throw new Error("associated RTCRtpTransceiver not found");m.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(l)}const c={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",c),await this._pc.setRemoteDescription(c);const u=await this._pc.createAnswer();P.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",u),await this._pc.setLocalDescription(u)}async getReceiverStats(v){this.assertRecvDirection();const c=this._mapMidTransceiver.get(v);if(!c)throw new Error("associated RTCRtpTransceiver not found");return c.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:v,label:c,protocol:u}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:l,ordered:m,maxPacketLifeTime:D,maxRetransmits:N}=v,L={negotiated:!0,id:l,ordered:m,maxPacketLifeTime:D,maxRetransmits:N,protocol:u};P.debug("receiveDataChannel() [options:%o]",L);const j=this._pc.createDataChannel(c,L);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const W={type:"offer",sdp:this._remoteSdp.getSdp()};P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",W),await this._pc.setRemoteDescription(W);const $=await this._pc.createAnswer();if(!this._transportReady){const Z=w.parse($.sdp);await this.setupTransport({localDtlsRole:"client",localSdpObject:Z})}P.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",$),await this._pc.setLocalDescription($),this._hasDataChannelMediaSection=!0}return{dataChannel:j}}async setupTransport({localDtlsRole:v,localSdpObject:c}){c||(c=w.parse(this._pc.localDescription.sdp));const u=b.extractDtlsParameters({sdpObject:c});u.role=v,this._remoteSdp.updateDtlsRole(v==="client"?"server":"client"),await new Promise((l,m)=>{this.safeEmit("@connect",{dtlsParameters:u},l,m)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new f.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.Firefox60=I},521:(C,p,o)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.HandlerInterface=void 0;const E=o(2010);class _ extends E.EnhancedEventEmitter{constructor(){super()}}p.HandlerInterface=_},9352:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(I,d,v,c){c===void 0&&(c=v);var u=Object.getOwnPropertyDescriptor(d,v);u&&!("get"in u?!d.__esModule:u.writable||u.configurable)||(u={enumerable:!0,get:function(){return d[v]}}),Object.defineProperty(I,c,u)}:function(I,d,v,c){c===void 0&&(c=v),I[c]=d[v]}),_=this&&this.__setModuleDefault||(Object.create?function(I,d){Object.defineProperty(I,"default",{enumerable:!0,value:d})}:function(I,d){I.default=d}),h=this&&this.__importStar||function(I){if(I&&I.__esModule)return I;var d={};if(I!=null)for(var v in I)v!=="default"&&Object.prototype.hasOwnProperty.call(I,v)&&E(d,I,v);return _(d,I),d};Object.defineProperty(p,"__esModule",{value:!0}),p.ReactNative=void 0;const w=h(o(7363)),k=o(2994),f=o(4893),g=h(o(1765)),s=h(o(8046)),b=h(o(5544)),S=h(o(4496)),T=o(521),x=o(1305),O=new k.Logger("ReactNative"),P={OS:1024,MIS:1024};class R extends T.HandlerInterface{static createFactory(){return()=>new R}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdTrack=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNative"}close(){if(O.debug("close()"),this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){O.debug("getNativeRtpCapabilities()");const d=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const v=await d.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{d.close()}catch{}const c=w.parse(v.sdp);return b.extractRtpCapabilities({sdpObject:c})}catch(v){try{d.close()}catch{}throw v}}async getNativeSctpCapabilities(){return O.debug("getNativeSctpCapabilities()"),{numStreams:P}}run({direction:d,iceParameters:v,iceCandidates:c,dtlsParameters:u,sctpParameters:l,iceServers:m,iceTransportPolicy:D,additionalSettings:N,proprietaryConstraints:L,extendedRtpCapabilities:j}){O.debug("run()"),this._direction=d,this._remoteSdp=new x.RemoteSdp({iceParameters:v,iceCandidates:c,dtlsParameters:u,sctpParameters:l,planB:!0}),this._sendingRtpParametersByKind={audio:s.getSendingRtpParameters("audio",j),video:s.getSendingRtpParameters("video",j)},this._sendingRemoteRtpParametersByKind={audio:s.getSendingRemoteRtpParameters("audio",j),video:s.getSendingRemoteRtpParameters("video",j)},u.role&&u.role!=="auto"&&(this._forcedLocalDtlsRole=u.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:m||[],iceTransportPolicy:D||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b",...N},L),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(O.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(d){O.debug("updateIceServers()");const v=this._pc.getConfiguration();v.iceServers=d,this._pc.setConfiguration(v)}async restartIce(d){if(O.debug("restartIce()"),this._remoteSdp.updateIceParameters(d),this._transportReady)if(this._direction==="send"){const v=await this._pc.createOffer({iceRestart:!0});O.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",v),await this._pc.setLocalDescription(v);const c={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}else{const v={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const c=await this._pc.createAnswer();O.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}}async getTransportStats(){return this._pc.getStats()}async send({track:d,encodings:v,codecOptions:c,codec:u}){this.assertSendDirection(),O.debug("send() [kind:%s, track.id:%s]",d.kind,d.id),u&&O.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(d),this._pc.addStream(this._sendStream);let l,m=await this._pc.createOffer(),D=w.parse(m.sdp);const N=g.clone(this._sendingRtpParametersByKind[d.kind]);N.codecs=s.reduceCodecs(N.codecs);const L=g.clone(this._sendingRemoteRtpParametersByKind[d.kind]);if(L.codecs=s.reduceCodecs(L.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:D}),d.kind==="video"&&v&&v.length>1&&(O.debug("send() | enabling simulcast"),D=w.parse(m.sdp),l=D.media.find($=>$.type==="video"),S.addLegacySimulcast({offerMediaObject:l,track:d,numStreams:v.length}),m={type:"offer",sdp:w.write(D)}),O.debug("send() | calling pc.setLocalDescription() [offer:%o]",m),await this._pc.setLocalDescription(m),D=w.parse(this._pc.localDescription.sdp),l=D.media.find($=>$.type===d.kind),N.rtcp.cname=b.getCname({offerMediaObject:l}),N.encodings=S.getRtpEncodings({offerMediaObject:l,track:d}),v)for(let $=0;$<N.encodings.length;++$)v[$]&&Object.assign(N.encodings[$],v[$]);if(N.encodings.length>1&&(N.codecs[0].mimeType.toLowerCase()==="video/vp8"||N.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const $ of N.encodings)$.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:l,offerRtpParameters:N,answerRtpParameters:L,codecOptions:c});const j={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("send() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j);const W=String(this._nextSendLocalId);return this._nextSendLocalId++,this._mapSendLocalIdTrack.set(W,d),{localId:W,rtpParameters:N}}async stopSending(d){this.assertSendDirection(),O.debug("stopSending() [localId:%s]",d);const v=this._mapSendLocalIdTrack.get(d);if(!v)throw new Error("track not found");this._mapSendLocalIdTrack.delete(d),this._sendStream.removeTrack(v),this._pc.addStream(this._sendStream);const c=await this._pc.createOffer();O.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",c);try{await this._pc.setLocalDescription(c)}catch(l){if(this._sendStream.getTracks().length===0)return void O.warn("stopSending() | ignoring expected error due no sending tracks: %s",l.toString());throw l}if(this._pc.signalingState==="stable")return;const u={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",u),await this._pc.setRemoteDescription(u)}async pauseSending(d){}async resumeSending(d){}async replaceTrack(d,v){throw new f.UnsupportedError("not implemented")}async setMaxSpatialLayer(d,v){throw new f.UnsupportedError("not implemented")}async setRtpEncodingParameters(d,v){throw new f.UnsupportedError("not implemented")}async getSenderStats(d){throw new f.UnsupportedError("not implemented")}async sendDataChannel({ordered:d,maxPacketLifeTime:v,maxRetransmits:c,label:u,protocol:l}){this.assertSendDirection();const m={negotiated:!0,id:this._nextSendSctpStreamId,ordered:d,maxPacketLifeTime:v,maxRetransmitTime:v,maxRetransmits:c,protocol:l};O.debug("sendDataChannel() [options:%o]",m);const D=this._pc.createDataChannel(u,m);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%P.MIS,!this._hasDataChannelMediaSection){const N=await this._pc.createOffer(),L=w.parse(N.sdp),j=L.media.find($=>$.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:L}),O.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",N),await this._pc.setLocalDescription(N),this._remoteSdp.sendSctpAssociation({offerMediaObject:j});const W={type:"answer",sdp:this._remoteSdp.getSdp()};O.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",W),await this._pc.setRemoteDescription(W),this._hasDataChannelMediaSection=!0}return{dataChannel:D,sctpStreamParameters:{streamId:m.id,ordered:m.ordered,maxPacketLifeTime:m.maxPacketLifeTime,maxRetransmits:m.maxRetransmits}}}async receive(d){this.assertRecvDirection();const v=[],c=new Map;for(const D of d){const{trackId:N,kind:L,rtpParameters:j}=D;O.debug("receive() [trackId:%s, kind:%s]",N,L);const W=L;let $=D.streamId||j.rtcp.cname;O.debug("receive() | forcing a random remote streamId to avoid well known bug in react-native-webrtc"),$+=`-hack-${g.generateRandomNumber()}`,c.set(N,$),this._remoteSdp.receive({mid:W,kind:L,offerRtpParameters:j,streamId:$,trackId:N})}const u={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);let l=await this._pc.createAnswer();const m=w.parse(l.sdp);for(const D of d){const{kind:N,rtpParameters:L}=D,j=N,W=m.media.find($=>String($.mid)===j);b.applyCodecParameters({offerRtpParameters:L,answerMediaObject:W})}l={type:"answer",sdp:w.write(m)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:m}),O.debug("receive() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const D of d){const{kind:N,trackId:L,rtpParameters:j}=D,W=L,$=N,Z=c.get(L),ne=this._pc.getRemoteStreams().find(de=>de.id===Z).getTrackById(W);if(!ne)throw new Error("remote track not found");this._mapRecvLocalIdInfo.set(W,{mid:$,rtpParameters:j}),v.push({localId:W,track:ne})}return v}async stopReceiving(d){this.assertRecvDirection();for(const u of d){O.debug("stopReceiving() [localId:%s]",u);const{mid:l,rtpParameters:m}=this._mapRecvLocalIdInfo.get(u)||{};this._mapRecvLocalIdInfo.delete(u),this._remoteSdp.planBStopReceiving({mid:l,offerRtpParameters:m})}const v={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);const c=await this._pc.createAnswer();O.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c)}async pauseReceiving(d){}async resumeReceiving(d){}async getReceiverStats(d){throw new f.UnsupportedError("not implemented")}async receiveDataChannel({sctpStreamParameters:d,label:v,protocol:c}){this.assertRecvDirection();const{streamId:u,ordered:l,maxPacketLifeTime:m,maxRetransmits:D}=d,N={negotiated:!0,id:u,ordered:l,maxPacketLifeTime:m,maxRetransmitTime:m,maxRetransmits:D,protocol:c};O.debug("receiveDataChannel() [options:%o]",N);const L=this._pc.createDataChannel(v,N);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const j={type:"offer",sdp:this._remoteSdp.getSdp()};O.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",j),await this._pc.setRemoteDescription(j);const W=await this._pc.createAnswer();if(!this._transportReady){const $=w.parse(W.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:$})}O.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",W),await this._pc.setLocalDescription(W),this._hasDataChannelMediaSection=!0}return{dataChannel:L}}async setupTransport({localDtlsRole:d,localSdpObject:v}){v||(v=w.parse(this._pc.localDescription.sdp));const c=b.extractDtlsParameters({sdpObject:v});c.role=d,this._remoteSdp.updateDtlsRole(d==="client"?"server":"client"),await new Promise((u,l)=>{this.safeEmit("@connect",{dtlsParameters:c},u,l)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.ReactNative=R},4039:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(v,c,u,l){l===void 0&&(l=u);var m=Object.getOwnPropertyDescriptor(c,u);m&&!("get"in m?!c.__esModule:m.writable||m.configurable)||(m={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(v,l,m)}:function(v,c,u,l){l===void 0&&(l=u),v[l]=c[u]}),_=this&&this.__setModuleDefault||(Object.create?function(v,c){Object.defineProperty(v,"default",{enumerable:!0,value:c})}:function(v,c){v.default=c}),h=this&&this.__importStar||function(v){if(v&&v.__esModule)return v;var c={};if(v!=null)for(var u in v)u!=="default"&&Object.prototype.hasOwnProperty.call(v,u)&&E(c,v,u);return _(c,v),c};Object.defineProperty(p,"__esModule",{value:!0}),p.ReactNativeUnifiedPlan=void 0;const w=h(o(7363)),k=o(2994),f=h(o(1765)),g=h(o(8046)),s=h(o(5544)),b=h(o(5938)),S=h(o(4256)),T=o(4893),x=o(521),O=o(1305),P=o(3303),R=new k.Logger("ReactNativeUnifiedPlan"),I={OS:1024,MIS:1024};class d extends x.HandlerInterface{static createFactory(){return()=>new d}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"ReactNativeUnifiedPlan"}close(){if(R.debug("close()"),!this._closed){if(this._closed=!0,this._sendStream.release(!1),this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){R.debug("getNativeRtpCapabilities()");const c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan"});try{c.addTransceiver("audio"),c.addTransceiver("video");const u=await c.createOffer();try{c.close()}catch{}const l=w.parse(u.sdp),m=s.extractRtpCapabilities({sdpObject:l});return S.addNackSuppportForOpus(m),m}catch(u){try{c.close()}catch{}throw u}}async getNativeSctpCapabilities(){return R.debug("getNativeSctpCapabilities()"),{numStreams:I}}run({direction:c,iceParameters:u,iceCandidates:l,dtlsParameters:m,sctpParameters:D,iceServers:N,iceTransportPolicy:L,additionalSettings:j,proprietaryConstraints:W,extendedRtpCapabilities:$}){this.assertNotClosed(),R.debug("run()"),this._direction=c,this._remoteSdp=new O.RemoteSdp({iceParameters:u,iceCandidates:l,dtlsParameters:m,sctpParameters:D}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",$),video:g.getSendingRtpParameters("video",$)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",$),video:g.getSendingRemoteRtpParameters("video",$)},m.role&&m.role!=="auto"&&(this._forcedLocalDtlsRole=m.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:N||[],iceTransportPolicy:L||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"unified-plan",...j},W),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(R.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(c){this.assertNotClosed(),R.debug("updateIceServers()");const u=this._pc.getConfiguration();u.iceServers=c,this._pc.setConfiguration(u)}async restartIce(c){if(this.assertNotClosed(),R.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),this._transportReady)if(this._direction==="send"){const u=await this._pc.createOffer({iceRestart:!0});R.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}else{const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,encodings:u,codecOptions:l,codec:m}){this.assertNotClosed(),this.assertSendDirection(),R.debug("send() [kind:%s, track.id:%s]",c.kind,c.id),u&&u.length>1&&u.forEach((Me,fe)=>{Me.rid=`r${fe}`});const D=f.clone(this._sendingRtpParametersByKind[c.kind]);D.codecs=g.reduceCodecs(D.codecs,m);const N=f.clone(this._sendingRemoteRtpParametersByKind[c.kind]);N.codecs=g.reduceCodecs(N.codecs,m);const L=this._remoteSdp.getNextMediaSectionIdx(),j=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream],sendEncodings:u});let W,$=await this._pc.createOffer(),Z=w.parse($.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Z});let ne=!1;const de=(0,P.parse)((u||[{}])[0].scalabilityMode);u&&u.length===1&&de.spatialLayers>1&&D.codecs[0].mimeType.toLowerCase()==="video/vp9"&&(R.debug("send() | enabling legacy simulcast for VP9 SVC"),ne=!0,Z=w.parse($.sdp),W=Z.media[L.idx],b.addLegacySimulcast({offerMediaObject:W,numStreams:de.spatialLayers}),$={type:"offer",sdp:w.write(Z)}),R.debug("send() | calling pc.setLocalDescription() [offer:%o]",$),await this._pc.setLocalDescription($);let ge=j.mid??void 0;if(ge||R.warn("send() | missing transceiver.mid (bug in react-native-webrtc, using a workaround"),D.mid=ge,Z=w.parse(this._pc.localDescription.sdp),W=Z.media[L.idx],D.rtcp.cname=s.getCname({offerMediaObject:W}),u)if(u.length===1){let Me=b.getRtpEncodings({offerMediaObject:W});Object.assign(Me[0],u[0]),ne&&(Me=[Me[0]]),D.encodings=Me}else D.encodings=u;else D.encodings=b.getRtpEncodings({offerMediaObject:W});if(D.encodings.length>1&&(D.codecs[0].mimeType.toLowerCase()==="video/vp8"||D.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const Me of D.encodings)Me.scalabilityMode?Me.scalabilityMode=`L1T${de.temporalLayers}`:Me.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:W,reuseMid:L.reuseMid,offerRtpParameters:D,answerRtpParameters:N,codecOptions:l,extmapAllowMixed:!0});const _e={type:"answer",sdp:this._remoteSdp.getSdp()};return R.debug("send() | calling pc.setRemoteDescription() [answer:%o]",_e),await this._pc.setRemoteDescription(_e),ge||(ge=j.mid,D.mid=ge),this._mapMidTransceiver.set(ge,j),{localId:ge,rtpParameters:D,rtpSender:j.sender}}async stopSending(c){if(this.assertSendDirection(),this._closed)return;R.debug("stopSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");if(u.sender.replaceTrack(null),this._pc.removeTrack(u.sender),this._remoteSdp.closeMediaSection(u.mid))try{u.stop()}catch{}const l=await this._pc.createOffer();R.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),R.debug("pauseSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");u.direction="inactive",this._remoteSdp.pauseMediaSection(c);const l=await this._pc.createOffer();R.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),R.debug("resumeSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(this._remoteSdp.resumeSendingMediaSection(c),!u)throw new Error("associated RTCRtpTransceiver not found");u.direction="sendonly";const l=await this._pc.createOffer();R.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async replaceTrack(c,u){this.assertNotClosed(),this.assertSendDirection(),u?R.debug("replaceTrack() [localId:%s, track.id:%s]",c,u.id):R.debug("replaceTrack() [localId:%s, no track]",c);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");await l.sender.replaceTrack(u)}async setMaxSpatialLayer(c,u){this.assertNotClosed(),this.assertSendDirection(),R.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,u);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");const m=l.sender.getParameters();m.encodings.forEach((L,j)=>{L.active=j<=u}),await l.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(c,m.encodings);const D=await this._pc.createOffer();R.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const N={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async setRtpEncodingParameters(c,u){this.assertNotClosed(),this.assertSendDirection(),R.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,u);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");const m=l.sender.getParameters();m.encodings.forEach((L,j)=>{m.encodings[j]={...L,...u}}),await l.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(c,m.encodings);const D=await this._pc.createOffer();R.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const N={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");return u.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:u,maxRetransmits:l,label:m,protocol:D}){this.assertNotClosed(),this.assertSendDirection();const N={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:u,maxRetransmits:l,protocol:D};R.debug("sendDataChannel() [options:%o]",N);const L=this._pc.createDataChannel(m,N);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%I.MIS,!this._hasDataChannelMediaSection){const j=await this._pc.createOffer(),W=w.parse(j.sdp),$=W.media.find(ne=>ne.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:W}),R.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j),this._remoteSdp.sendSctpAssociation({offerMediaObject:$});const Z={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setRemoteDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:L,sctpStreamParameters:{streamId:N.id,ordered:N.ordered,maxPacketLifeTime:N.maxPacketLifeTime,maxRetransmits:N.maxRetransmits}}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const u=[],l=new Map;for(const L of c){const{trackId:j,kind:W,rtpParameters:$,streamId:Z}=L;R.debug("receive() [trackId:%s, kind:%s]",j,W);const ne=$.mid||String(this._mapMidTransceiver.size);l.set(j,ne),this._remoteSdp.receive({mid:ne,kind:W,offerRtpParameters:$,streamId:Z||$.rtcp.cname,trackId:j})}const m={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);let D=await this._pc.createAnswer();const N=w.parse(D.sdp);for(const L of c){const{trackId:j,rtpParameters:W}=L,$=l.get(j),Z=N.media.find(ne=>String(ne.mid)===$);s.applyCodecParameters({offerRtpParameters:W,answerMediaObject:Z})}D={type:"answer",sdp:w.write(N)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),R.debug("receive() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D);for(const L of c){const{trackId:j}=L,W=l.get(j),$=this._pc.getTransceivers().find(Z=>Z.mid===W);if(!$)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(W,$),u.push({localId:W,track:$.receiver.track,rtpReceiver:$.receiver})}return u}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const m of c){R.debug("stopReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(D.mid)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const m of c)this._mapMidTransceiver.delete(m)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const m of c){R.debug("pauseReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");D.direction="inactive",this._remoteSdp.pauseMediaSection(m)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const m of c){R.debug("resumeReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");D.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(m)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");return u.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:u,protocol:l}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:m,ordered:D,maxPacketLifeTime:N,maxRetransmits:L}=c,j={negotiated:!0,id:m,ordered:D,maxPacketLifeTime:N,maxRetransmits:L,protocol:l};R.debug("receiveDataChannel() [options:%o]",j);const W=this._pc.createDataChannel(u,j);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const $={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",$),await this._pc.setRemoteDescription($);const Z=await this._pc.createAnswer();if(!this._transportReady){const ne=w.parse(Z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:ne})}R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setLocalDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:W}}async setupTransport({localDtlsRole:c,localSdpObject:u}){u||(u=w.parse(this._pc.localDescription.sdp));const l=s.extractDtlsParameters({sdpObject:u});l.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((m,D)=>{this.safeEmit("@connect",{dtlsParameters:l},m,D)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new T.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.ReactNativeUnifiedPlan=d},9676:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(R,I,d,v){v===void 0&&(v=d);var c=Object.getOwnPropertyDescriptor(I,d);c&&!("get"in c?!I.__esModule:c.writable||c.configurable)||(c={enumerable:!0,get:function(){return I[d]}}),Object.defineProperty(R,v,c)}:function(R,I,d,v){v===void 0&&(v=d),R[v]=I[d]}),_=this&&this.__setModuleDefault||(Object.create?function(R,I){Object.defineProperty(R,"default",{enumerable:!0,value:I})}:function(R,I){R.default=I}),h=this&&this.__importStar||function(R){if(R&&R.__esModule)return R;var I={};if(R!=null)for(var d in R)d!=="default"&&Object.prototype.hasOwnProperty.call(R,d)&&E(I,R,d);return _(I,R),I};Object.defineProperty(p,"__esModule",{value:!0}),p.Safari11=void 0;const w=h(o(7363)),k=o(2994),f=h(o(1765)),g=h(o(8046)),s=h(o(5544)),b=h(o(4496)),S=o(521),T=o(1305),x=new k.Logger("Safari11"),O={OS:1024,MIS:1024};class P extends S.HandlerInterface{static createFactory(){return()=>new P}constructor(){super(),this._sendStream=new MediaStream,this._mapSendLocalIdRtpSender=new Map,this._nextSendLocalId=0,this._mapRecvLocalIdInfo=new Map,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari11"}close(){if(x.debug("close()"),this._pc)try{this._pc.close()}catch{}this.emit("@close")}async getNativeRtpCapabilities(){x.debug("getNativeRtpCapabilities()");const I=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",sdpSemantics:"plan-b"});try{const d=await I.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0});try{I.close()}catch{}const v=w.parse(d.sdp);return s.extractRtpCapabilities({sdpObject:v})}catch(d){try{I.close()}catch{}throw d}}async getNativeSctpCapabilities(){return x.debug("getNativeSctpCapabilities()"),{numStreams:O}}run({direction:I,iceParameters:d,iceCandidates:v,dtlsParameters:c,sctpParameters:u,iceServers:l,iceTransportPolicy:m,additionalSettings:D,proprietaryConstraints:N,extendedRtpCapabilities:L}){x.debug("run()"),this._direction=I,this._remoteSdp=new T.RemoteSdp({iceParameters:d,iceCandidates:v,dtlsParameters:c,sctpParameters:u,planB:!0}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",L),video:g.getSendingRtpParameters("video",L)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",L),video:g.getSendingRemoteRtpParameters("video",L)},c.role&&c.role!=="auto"&&(this._forcedLocalDtlsRole=c.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:l||[],iceTransportPolicy:m||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...D},N),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(x.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(I){x.debug("updateIceServers()");const d=this._pc.getConfiguration();d.iceServers=I,this._pc.setConfiguration(d)}async restartIce(I){if(x.debug("restartIce()"),this._remoteSdp.updateIceParameters(I),this._transportReady)if(this._direction==="send"){const d=await this._pc.createOffer({iceRestart:!0});x.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",d),await this._pc.setLocalDescription(d);const v={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",v),await this._pc.setRemoteDescription(v)}else{const d={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const v=await this._pc.createAnswer();x.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",v),await this._pc.setLocalDescription(v)}}async getTransportStats(){return this._pc.getStats()}async send({track:I,encodings:d,codecOptions:v,codec:c}){this.assertSendDirection(),x.debug("send() [kind:%s, track.id:%s]",I.kind,I.id),c&&x.warn("send() | codec selection is not available in %s handler",this.name),this._sendStream.addTrack(I),this._pc.addTrack(I,this._sendStream);let u,l=await this._pc.createOffer(),m=w.parse(l.sdp);const D=f.clone(this._sendingRtpParametersByKind[I.kind]);D.codecs=g.reduceCodecs(D.codecs);const N=f.clone(this._sendingRemoteRtpParametersByKind[I.kind]);if(N.codecs=g.reduceCodecs(N.codecs),this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:m}),I.kind==="video"&&d&&d.length>1&&(x.debug("send() | enabling simulcast"),m=w.parse(l.sdp),u=m.media.find($=>$.type==="video"),b.addLegacySimulcast({offerMediaObject:u,track:I,numStreams:d.length}),l={type:"offer",sdp:w.write(m)}),x.debug("send() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l),m=w.parse(this._pc.localDescription.sdp),u=m.media.find($=>$.type===I.kind),D.rtcp.cname=s.getCname({offerMediaObject:u}),D.encodings=b.getRtpEncodings({offerMediaObject:u,track:I}),d)for(let $=0;$<D.encodings.length;++$)d[$]&&Object.assign(D.encodings[$],d[$]);if(D.encodings.length>1&&D.codecs[0].mimeType.toLowerCase()==="video/vp8")for(const $ of D.encodings)$.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:u,offerRtpParameters:D,answerRtpParameters:N,codecOptions:v});const L={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("send() | calling pc.setRemoteDescription() [answer:%o]",L),await this._pc.setRemoteDescription(L);const j=String(this._nextSendLocalId);this._nextSendLocalId++;const W=this._pc.getSenders().find($=>$.track===I);return this._mapSendLocalIdRtpSender.set(j,W),{localId:j,rtpParameters:D,rtpSender:W}}async stopSending(I){this.assertSendDirection();const d=this._mapSendLocalIdRtpSender.get(I);if(!d)throw new Error("associated RTCRtpSender not found");d.track&&this._sendStream.removeTrack(d.track),this._mapSendLocalIdRtpSender.delete(I);const v=await this._pc.createOffer();x.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",v);try{await this._pc.setLocalDescription(v)}catch(u){if(this._sendStream.getTracks().length===0)return void x.warn("stopSending() | ignoring expected error due no sending tracks: %s",u.toString());throw u}if(this._pc.signalingState==="stable")return;const c={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",c),await this._pc.setRemoteDescription(c)}async pauseSending(I){}async resumeSending(I){}async replaceTrack(I,d){this.assertSendDirection(),d?x.debug("replaceTrack() [localId:%s, track.id:%s]",I,d.id):x.debug("replaceTrack() [localId:%s, no track]",I);const v=this._mapSendLocalIdRtpSender.get(I);if(!v)throw new Error("associated RTCRtpSender not found");const c=v.track;await v.replaceTrack(d),c&&this._sendStream.removeTrack(c),d&&this._sendStream.addTrack(d)}async setMaxSpatialLayer(I,d){this.assertSendDirection(),x.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",I,d);const v=this._mapSendLocalIdRtpSender.get(I);if(!v)throw new Error("associated RTCRtpSender not found");const c=v.getParameters();c.encodings.forEach((u,l)=>{u.active=l<=d}),await v.setParameters(c)}async setRtpEncodingParameters(I,d){this.assertSendDirection(),x.debug("setRtpEncodingParameters() [localId:%s, params:%o]",I,d);const v=this._mapSendLocalIdRtpSender.get(I);if(!v)throw new Error("associated RTCRtpSender not found");const c=v.getParameters();c.encodings.forEach((u,l)=>{c.encodings[l]={...u,...d}}),await v.setParameters(c)}async getSenderStats(I){this.assertSendDirection();const d=this._mapSendLocalIdRtpSender.get(I);if(!d)throw new Error("associated RTCRtpSender not found");return d.getStats()}async sendDataChannel({ordered:I,maxPacketLifeTime:d,maxRetransmits:v,label:c,protocol:u}){this.assertSendDirection();const l={negotiated:!0,id:this._nextSendSctpStreamId,ordered:I,maxPacketLifeTime:d,maxRetransmits:v,protocol:u};x.debug("sendDataChannel() [options:%o]",l);const m=this._pc.createDataChannel(c,l);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%O.MIS,!this._hasDataChannelMediaSection){const D=await this._pc.createOffer(),N=w.parse(D.sdp),L=N.media.find(W=>W.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),x.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D),this._remoteSdp.sendSctpAssociation({offerMediaObject:L});const j={type:"answer",sdp:this._remoteSdp.getSdp()};x.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setRemoteDescription(j),this._hasDataChannelMediaSection=!0}return{dataChannel:m,sctpStreamParameters:{streamId:l.id,ordered:l.ordered,maxPacketLifeTime:l.maxPacketLifeTime,maxRetransmits:l.maxRetransmits}}}async receive(I){this.assertRecvDirection();const d=[];for(const l of I){const{trackId:m,kind:D,rtpParameters:N,streamId:L}=l;x.debug("receive() [trackId:%s, kind:%s]",m,D);const j=D;this._remoteSdp.receive({mid:j,kind:D,offerRtpParameters:N,streamId:L||N.rtcp.cname,trackId:m})}const v={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",v),await this._pc.setRemoteDescription(v);let c=await this._pc.createAnswer();const u=w.parse(c.sdp);for(const l of I){const{kind:m,rtpParameters:D}=l,N=m,L=u.media.find(j=>String(j.mid)===N);s.applyCodecParameters({offerRtpParameters:D,answerMediaObject:L})}c={type:"answer",sdp:w.write(u)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:u}),x.debug("receive() | calling pc.setLocalDescription() [answer:%o]",c),await this._pc.setLocalDescription(c);for(const l of I){const{kind:m,trackId:D,rtpParameters:N}=l,L=m,j=D,W=this._pc.getReceivers().find($=>$.track&&$.track.id===j);if(!W)throw new Error("new RTCRtpReceiver not");this._mapRecvLocalIdInfo.set(j,{mid:L,rtpParameters:N,rtpReceiver:W}),d.push({localId:j,track:W.track,rtpReceiver:W})}return d}async stopReceiving(I){this.assertRecvDirection();for(const c of I){x.debug("stopReceiving() [localId:%s]",c);const{mid:u,rtpParameters:l}=this._mapRecvLocalIdInfo.get(c)||{};this._mapRecvLocalIdInfo.delete(c),this._remoteSdp.planBStopReceiving({mid:u,offerRtpParameters:l})}const d={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",d),await this._pc.setRemoteDescription(d);const v=await this._pc.createAnswer();x.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",v),await this._pc.setLocalDescription(v)}async getReceiverStats(I){this.assertRecvDirection();const{rtpReceiver:d}=this._mapRecvLocalIdInfo.get(I)||{};if(!d)throw new Error("associated RTCRtpReceiver not found");return d.getStats()}async pauseReceiving(I){}async resumeReceiving(I){}async receiveDataChannel({sctpStreamParameters:I,label:d,protocol:v}){this.assertRecvDirection();const{streamId:c,ordered:u,maxPacketLifeTime:l,maxRetransmits:m}=I,D={negotiated:!0,id:c,ordered:u,maxPacketLifeTime:l,maxRetransmits:m,protocol:v};x.debug("receiveDataChannel() [options:%o]",D);const N=this._pc.createDataChannel(d,D);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation({oldDataChannelSpec:!0});const L={type:"offer",sdp:this._remoteSdp.getSdp()};x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",L),await this._pc.setRemoteDescription(L);const j=await this._pc.createAnswer();if(!this._transportReady){const W=w.parse(j.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:W})}x.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",j),await this._pc.setLocalDescription(j),this._hasDataChannelMediaSection=!0}return{dataChannel:N}}async setupTransport({localDtlsRole:I,localSdpObject:d}){d||(d=w.parse(this._pc.localDescription.sdp));const v=s.extractDtlsParameters({sdpObject:d});v.role=I,this._remoteSdp.updateDtlsRole(I==="client"?"server":"client"),await new Promise((c,u)=>{this.safeEmit("@connect",{dtlsParameters:v},c,u)}),this._transportReady=!0}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.Safari11=P},5765:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(v,c,u,l){l===void 0&&(l=u);var m=Object.getOwnPropertyDescriptor(c,u);m&&!("get"in m?!c.__esModule:m.writable||m.configurable)||(m={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(v,l,m)}:function(v,c,u,l){l===void 0&&(l=u),v[l]=c[u]}),_=this&&this.__setModuleDefault||(Object.create?function(v,c){Object.defineProperty(v,"default",{enumerable:!0,value:c})}:function(v,c){v.default=c}),h=this&&this.__importStar||function(v){if(v&&v.__esModule)return v;var c={};if(v!=null)for(var u in v)u!=="default"&&Object.prototype.hasOwnProperty.call(v,u)&&E(c,v,u);return _(c,v),c};Object.defineProperty(p,"__esModule",{value:!0}),p.Safari12=void 0;const w=h(o(7363)),k=o(2994),f=h(o(1765)),g=h(o(8046)),s=h(o(5544)),b=h(o(5938)),S=h(o(4256)),T=o(4893),x=o(521),O=o(1305),P=o(3303),R=new k.Logger("Safari12"),I={OS:1024,MIS:1024};class d extends x.HandlerInterface{static createFactory(){return()=>new d}constructor(){super(),this._closed=!1,this._mapMidTransceiver=new Map,this._sendStream=new MediaStream,this._hasDataChannelMediaSection=!1,this._nextSendSctpStreamId=0,this._transportReady=!1}get name(){return"Safari12"}close(){if(R.debug("close()"),!this._closed){if(this._closed=!0,this._pc)try{this._pc.close()}catch{}this.emit("@close")}}async getNativeRtpCapabilities(){R.debug("getNativeRtpCapabilities()");const c=new RTCPeerConnection({iceServers:[],iceTransportPolicy:"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require"});try{c.addTransceiver("audio"),c.addTransceiver("video");const u=await c.createOffer();try{c.close()}catch{}const l=w.parse(u.sdp),m=s.extractRtpCapabilities({sdpObject:l});return S.addNackSuppportForOpus(m),m}catch(u){try{c.close()}catch{}throw u}}async getNativeSctpCapabilities(){return R.debug("getNativeSctpCapabilities()"),{numStreams:I}}run({direction:c,iceParameters:u,iceCandidates:l,dtlsParameters:m,sctpParameters:D,iceServers:N,iceTransportPolicy:L,additionalSettings:j,proprietaryConstraints:W,extendedRtpCapabilities:$}){this.assertNotClosed(),R.debug("run()"),this._direction=c,this._remoteSdp=new O.RemoteSdp({iceParameters:u,iceCandidates:l,dtlsParameters:m,sctpParameters:D}),this._sendingRtpParametersByKind={audio:g.getSendingRtpParameters("audio",$),video:g.getSendingRtpParameters("video",$)},this._sendingRemoteRtpParametersByKind={audio:g.getSendingRemoteRtpParameters("audio",$),video:g.getSendingRemoteRtpParameters("video",$)},m.role&&m.role!=="auto"&&(this._forcedLocalDtlsRole=m.role==="server"?"client":"server"),this._pc=new RTCPeerConnection({iceServers:N||[],iceTransportPolicy:L||"all",bundlePolicy:"max-bundle",rtcpMuxPolicy:"require",...j},W),this._pc.addEventListener("icegatheringstatechange",()=>{this.emit("@icegatheringstatechange",this._pc.iceGatheringState)}),this._pc.connectionState?this._pc.addEventListener("connectionstatechange",()=>{this.emit("@connectionstatechange",this._pc.connectionState)}):this._pc.addEventListener("iceconnectionstatechange",()=>{switch(R.warn("run() | pc.connectionState not supported, using pc.iceConnectionState"),this._pc.iceConnectionState){case"checking":this.emit("@connectionstatechange","connecting");break;case"connected":case"completed":this.emit("@connectionstatechange","connected");break;case"failed":this.emit("@connectionstatechange","failed");break;case"disconnected":this.emit("@connectionstatechange","disconnected");break;case"closed":this.emit("@connectionstatechange","closed")}})}async updateIceServers(c){this.assertNotClosed(),R.debug("updateIceServers()");const u=this._pc.getConfiguration();u.iceServers=c,this._pc.setConfiguration(u)}async restartIce(c){if(this.assertNotClosed(),R.debug("restartIce()"),this._remoteSdp.updateIceParameters(c),this._transportReady)if(this._direction==="send"){const u=await this._pc.createOffer({iceRestart:!0});R.debug("restartIce() | calling pc.setLocalDescription() [offer:%o]",u),await this._pc.setLocalDescription(u);const l={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [answer:%o]",l),await this._pc.setRemoteDescription(l)}else{const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("restartIce() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("restartIce() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}}async getTransportStats(){return this.assertNotClosed(),this._pc.getStats()}async send({track:c,encodings:u,codecOptions:l,codec:m}){this.assertNotClosed(),this.assertSendDirection(),R.debug("send() [kind:%s, track.id:%s]",c.kind,c.id);const D=f.clone(this._sendingRtpParametersByKind[c.kind]);D.codecs=g.reduceCodecs(D.codecs,m);const N=f.clone(this._sendingRemoteRtpParametersByKind[c.kind]);N.codecs=g.reduceCodecs(N.codecs,m);const L=this._remoteSdp.getNextMediaSectionIdx(),j=this._pc.addTransceiver(c,{direction:"sendonly",streams:[this._sendStream]});let W,$=await this._pc.createOffer(),Z=w.parse($.sdp);this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:Z});const ne=(0,P.parse)((u||[{}])[0].scalabilityMode);u&&u.length>1&&(R.debug("send() | enabling legacy simulcast"),Z=w.parse($.sdp),W=Z.media[L.idx],b.addLegacySimulcast({offerMediaObject:W,numStreams:u.length}),$={type:"offer",sdp:w.write(Z)}),R.debug("send() | calling pc.setLocalDescription() [offer:%o]",$),await this._pc.setLocalDescription($);const de=j.mid;if(D.mid=de,Z=w.parse(this._pc.localDescription.sdp),W=Z.media[L.idx],D.rtcp.cname=s.getCname({offerMediaObject:W}),D.encodings=b.getRtpEncodings({offerMediaObject:W}),u)for(let _e=0;_e<D.encodings.length;++_e)u[_e]&&Object.assign(D.encodings[_e],u[_e]);if(D.encodings.length>1&&(D.codecs[0].mimeType.toLowerCase()==="video/vp8"||D.codecs[0].mimeType.toLowerCase()==="video/h264"))for(const _e of D.encodings)_e.scalabilityMode?_e.scalabilityMode=`L1T${ne.temporalLayers}`:_e.scalabilityMode="L1T3";this._remoteSdp.send({offerMediaObject:W,reuseMid:L.reuseMid,offerRtpParameters:D,answerRtpParameters:N,codecOptions:l});const ge={type:"answer",sdp:this._remoteSdp.getSdp()};return R.debug("send() | calling pc.setRemoteDescription() [answer:%o]",ge),await this._pc.setRemoteDescription(ge),this._mapMidTransceiver.set(de,j),{localId:de,rtpParameters:D,rtpSender:j.sender}}async stopSending(c){if(this.assertSendDirection(),this._closed)return;R.debug("stopSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");if(u.sender.replaceTrack(null),this._pc.removeTrack(u.sender),this._remoteSdp.closeMediaSection(u.mid))try{u.stop()}catch{}const l=await this._pc.createOffer();R.debug("stopSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("stopSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m),this._mapMidTransceiver.delete(c)}async pauseSending(c){this.assertNotClosed(),this.assertSendDirection(),R.debug("pauseSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");u.direction="inactive",this._remoteSdp.pauseMediaSection(c);const l=await this._pc.createOffer();R.debug("pauseSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("pauseSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async resumeSending(c){this.assertNotClosed(),this.assertSendDirection(),R.debug("resumeSending() [localId:%s]",c);const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");u.direction="sendonly",this._remoteSdp.resumeSendingMediaSection(c);const l=await this._pc.createOffer();R.debug("resumeSending() | calling pc.setLocalDescription() [offer:%o]",l),await this._pc.setLocalDescription(l);const m={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("resumeSending() | calling pc.setRemoteDescription() [answer:%o]",m),await this._pc.setRemoteDescription(m)}async replaceTrack(c,u){this.assertNotClosed(),this.assertSendDirection(),u?R.debug("replaceTrack() [localId:%s, track.id:%s]",c,u.id):R.debug("replaceTrack() [localId:%s, no track]",c);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");await l.sender.replaceTrack(u)}async setMaxSpatialLayer(c,u){this.assertNotClosed(),this.assertSendDirection(),R.debug("setMaxSpatialLayer() [localId:%s, spatialLayer:%s]",c,u);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");const m=l.sender.getParameters();m.encodings.forEach((L,j)=>{L.active=j<=u}),await l.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(c,m.encodings);const D=await this._pc.createOffer();R.debug("setMaxSpatialLayer() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const N={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setMaxSpatialLayer() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async setRtpEncodingParameters(c,u){this.assertNotClosed(),this.assertSendDirection(),R.debug("setRtpEncodingParameters() [localId:%s, params:%o]",c,u);const l=this._mapMidTransceiver.get(c);if(!l)throw new Error("associated RTCRtpTransceiver not found");const m=l.sender.getParameters();m.encodings.forEach((L,j)=>{m.encodings[j]={...L,...u}}),await l.sender.setParameters(m),this._remoteSdp.muxMediaSectionSimulcast(c,m.encodings);const D=await this._pc.createOffer();R.debug("setRtpEncodingParameters() | calling pc.setLocalDescription() [offer:%o]",D),await this._pc.setLocalDescription(D);const N={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("setRtpEncodingParameters() | calling pc.setRemoteDescription() [answer:%o]",N),await this._pc.setRemoteDescription(N)}async getSenderStats(c){this.assertNotClosed(),this.assertSendDirection();const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");return u.sender.getStats()}async sendDataChannel({ordered:c,maxPacketLifeTime:u,maxRetransmits:l,label:m,protocol:D}){this.assertNotClosed(),this.assertSendDirection();const N={negotiated:!0,id:this._nextSendSctpStreamId,ordered:c,maxPacketLifeTime:u,maxRetransmits:l,protocol:D};R.debug("sendDataChannel() [options:%o]",N);const L=this._pc.createDataChannel(m,N);if(this._nextSendSctpStreamId=++this._nextSendSctpStreamId%I.MIS,!this._hasDataChannelMediaSection){const j=await this._pc.createOffer(),W=w.parse(j.sdp),$=W.media.find(ne=>ne.type==="application");this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:W}),R.debug("sendDataChannel() | calling pc.setLocalDescription() [offer:%o]",j),await this._pc.setLocalDescription(j),this._remoteSdp.sendSctpAssociation({offerMediaObject:$});const Z={type:"answer",sdp:this._remoteSdp.getSdp()};R.debug("sendDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setRemoteDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:L,sctpStreamParameters:{streamId:N.id,ordered:N.ordered,maxPacketLifeTime:N.maxPacketLifeTime,maxRetransmits:N.maxRetransmits}}}async receive(c){this.assertNotClosed(),this.assertRecvDirection();const u=[],l=new Map;for(const L of c){const{trackId:j,kind:W,rtpParameters:$,streamId:Z}=L;R.debug("receive() [trackId:%s, kind:%s]",j,W);const ne=$.mid||String(this._mapMidTransceiver.size);l.set(j,ne),this._remoteSdp.receive({mid:ne,kind:W,offerRtpParameters:$,streamId:Z||$.rtcp.cname,trackId:j})}const m={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receive() | calling pc.setRemoteDescription() [offer:%o]",m),await this._pc.setRemoteDescription(m);let D=await this._pc.createAnswer();const N=w.parse(D.sdp);for(const L of c){const{trackId:j,rtpParameters:W}=L,$=l.get(j),Z=N.media.find(ne=>String(ne.mid)===$);s.applyCodecParameters({offerRtpParameters:W,answerMediaObject:Z})}D={type:"answer",sdp:w.write(N)},this._transportReady||await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:N}),R.debug("receive() | calling pc.setLocalDescription() [answer:%o]",D),await this._pc.setLocalDescription(D);for(const L of c){const{trackId:j}=L,W=l.get(j),$=this._pc.getTransceivers().find(Z=>Z.mid===W);if(!$)throw new Error("new RTCRtpTransceiver not found");this._mapMidTransceiver.set(W,$),u.push({localId:W,track:$.receiver.track,rtpReceiver:$.receiver})}return u}async stopReceiving(c){if(this.assertRecvDirection(),this._closed)return;for(const m of c){R.debug("stopReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");this._remoteSdp.closeMediaSection(D.mid)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("stopReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("stopReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l);for(const m of c)this._mapMidTransceiver.delete(m)}async pauseReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const m of c){R.debug("pauseReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");D.direction="inactive",this._remoteSdp.pauseMediaSection(m)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("pauseReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("pauseReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async resumeReceiving(c){this.assertNotClosed(),this.assertRecvDirection();for(const m of c){R.debug("resumeReceiving() [localId:%s]",m);const D=this._mapMidTransceiver.get(m);if(!D)throw new Error("associated RTCRtpTransceiver not found");D.direction="recvonly",this._remoteSdp.resumeReceivingMediaSection(m)}const u={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("resumeReceiving() | calling pc.setRemoteDescription() [offer:%o]",u),await this._pc.setRemoteDescription(u);const l=await this._pc.createAnswer();R.debug("resumeReceiving() | calling pc.setLocalDescription() [answer:%o]",l),await this._pc.setLocalDescription(l)}async getReceiverStats(c){this.assertNotClosed(),this.assertRecvDirection();const u=this._mapMidTransceiver.get(c);if(!u)throw new Error("associated RTCRtpTransceiver not found");return u.receiver.getStats()}async receiveDataChannel({sctpStreamParameters:c,label:u,protocol:l}){this.assertNotClosed(),this.assertRecvDirection();const{streamId:m,ordered:D,maxPacketLifeTime:N,maxRetransmits:L}=c,j={negotiated:!0,id:m,ordered:D,maxPacketLifeTime:N,maxRetransmits:L,protocol:l};R.debug("receiveDataChannel() [options:%o]",j);const W=this._pc.createDataChannel(u,j);if(!this._hasDataChannelMediaSection){this._remoteSdp.receiveSctpAssociation();const $={type:"offer",sdp:this._remoteSdp.getSdp()};R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [offer:%o]",$),await this._pc.setRemoteDescription($);const Z=await this._pc.createAnswer();if(!this._transportReady){const ne=w.parse(Z.sdp);await this.setupTransport({localDtlsRole:this._forcedLocalDtlsRole??"client",localSdpObject:ne})}R.debug("receiveDataChannel() | calling pc.setRemoteDescription() [answer:%o]",Z),await this._pc.setLocalDescription(Z),this._hasDataChannelMediaSection=!0}return{dataChannel:W}}async setupTransport({localDtlsRole:c,localSdpObject:u}){u||(u=w.parse(this._pc.localDescription.sdp));const l=s.extractDtlsParameters({sdpObject:u});l.role=c,this._remoteSdp.updateDtlsRole(c==="client"?"server":"client"),await new Promise((m,D)=>{this.safeEmit("@connect",{dtlsParameters:l},m,D)}),this._transportReady=!0}assertNotClosed(){if(this._closed)throw new T.InvalidStateError("method called in a closed handler")}assertSendDirection(){if(this._direction!=="send")throw new Error('method can just be called for handlers with "send" direction')}assertRecvDirection(){if(this._direction!=="recv")throw new Error('method can just be called for handlers with "recv" direction')}}p.Safari12=d},8751:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(k,f,g,s){s===void 0&&(s=g);var b=Object.getOwnPropertyDescriptor(f,g);b&&!("get"in b?!f.__esModule:b.writable||b.configurable)||(b={enumerable:!0,get:function(){return f[g]}}),Object.defineProperty(k,s,b)}:function(k,f,g,s){s===void 0&&(s=g),k[s]=f[g]}),_=this&&this.__setModuleDefault||(Object.create?function(k,f){Object.defineProperty(k,"default",{enumerable:!0,value:f})}:function(k,f){k.default=f}),h=this&&this.__importStar||function(k){if(k&&k.__esModule)return k;var f={};if(k!=null)for(var g in k)g!=="default"&&Object.prototype.hasOwnProperty.call(k,g)&&E(f,k,g);return _(f,k),f};Object.defineProperty(p,"__esModule",{value:!0}),p.mangleRtpParameters=p.getCapabilities=void 0;const w=h(o(1765));p.getCapabilities=function(){const k=RTCRtpReceiver.getCapabilities(),f=w.clone(k);for(const g of f.codecs??[]){if(g.channels=g.numChannels,delete g.numChannels,g.mimeType=g.mimeType||`${g.kind}/${g.name}`,g.parameters){const s=g.parameters;s.apt&&(s.apt=Number(s.apt)),s["packetization-mode"]&&(s["packetization-mode"]=Number(s["packetization-mode"]))}for(const s of g.rtcpFeedback||[])s.parameter||(s.parameter="")}return f},p.mangleRtpParameters=function(k){const f=w.clone(k);f.mid&&(f.muxId=f.mid,delete f.mid);for(const g of f.codecs)g.channels&&(g.numChannels=g.channels,delete g.channels),g.mimeType&&!g.name&&(g.name=g.mimeType.split("/")[1]),delete g.mimeType;return f}},4256:(C,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.addNackSuppportForOpus=void 0,p.addNackSuppportForOpus=function(o){var E;for(const _ of o.codecs||[])_.mimeType.toLowerCase()!=="audio/opus"&&_.mimeType.toLowerCase()!=="audio/multiopus"||(E=_.rtcpFeedback)!=null&&E.some(h=>h.type==="nack"&&!h.parameter)||(_.rtcpFeedback||(_.rtcpFeedback=[]),_.rtcpFeedback.push({type:"nack"}))}},3471:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(s,b,S,T){T===void 0&&(T=S);var x=Object.getOwnPropertyDescriptor(b,S);x&&!("get"in x?!b.__esModule:x.writable||x.configurable)||(x={enumerable:!0,get:function(){return b[S]}}),Object.defineProperty(s,T,x)}:function(s,b,S,T){T===void 0&&(T=S),s[T]=b[S]}),_=this&&this.__setModuleDefault||(Object.create?function(s,b){Object.defineProperty(s,"default",{enumerable:!0,value:b})}:function(s,b){s.default=b}),h=this&&this.__importStar||function(s){if(s&&s.__esModule)return s;var b={};if(s!=null)for(var S in s)S!=="default"&&Object.prototype.hasOwnProperty.call(s,S)&&E(b,s,S);return _(b,s),b};Object.defineProperty(p,"__esModule",{value:!0}),p.OfferMediaSection=p.AnswerMediaSection=p.MediaSection=void 0;const w=h(o(7363)),k=h(o(1765));class f{constructor({iceParameters:b,iceCandidates:S,dtlsParameters:T,planB:x=!1}){if(this._mediaObject={},this._planB=x,b&&this.setIceParameters(b),S){this._mediaObject.candidates=[];for(const O of S){const P={component:1};P.foundation=O.foundation,P.ip=O.address??O.ip,P.port=O.port,P.priority=O.priority,P.transport=O.protocol,P.type=O.type,O.tcpType&&(P.tcptype=O.tcpType),this._mediaObject.candidates.push(P)}this._mediaObject.endOfCandidates="end-of-candidates",this._mediaObject.iceOptions="renomination"}T&&this.setDtlsRole(T.role)}get mid(){return String(this._mediaObject.mid)}get closed(){return this._mediaObject.port===0}getObject(){return this._mediaObject}setIceParameters(b){this._mediaObject.iceUfrag=b.usernameFragment,this._mediaObject.icePwd=b.password}pause(){this._mediaObject.direction="inactive"}disable(){this.pause(),delete this._mediaObject.ext,delete this._mediaObject.ssrcs,delete this._mediaObject.ssrcGroups,delete this._mediaObject.simulcast,delete this._mediaObject.simulcast_03,delete this._mediaObject.rids,delete this._mediaObject.extmapAllowMixed}close(){this.disable(),this._mediaObject.port=0}}p.MediaSection=f,p.AnswerMediaSection=class extends f{constructor({iceParameters:s,iceCandidates:b,dtlsParameters:S,sctpParameters:T,plainRtpParameters:x,planB:O=!1,offerMediaObject:P,offerRtpParameters:R,answerRtpParameters:I,codecOptions:d,extmapAllowMixed:v=!1}){switch(super({iceParameters:s,iceCandidates:b,dtlsParameters:S,planB:O}),this._mediaObject.mid=String(P.mid),this._mediaObject.type=P.type,this._mediaObject.protocol=P.protocol,x?(this._mediaObject.connection={ip:x.ip,version:x.ipVersion},this._mediaObject.port=x.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.port=7),P.type){case"audio":case"video":this._mediaObject.direction="recvonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[];for(const c of I.codecs){const u={payload:c.payloadType,codec:g(c),rate:c.clockRate};c.channels>1&&(u.encoding=c.channels),this._mediaObject.rtp.push(u);const l=k.clone(c.parameters)??{};let m=k.clone(c.rtcpFeedback)??[];if(d){const{opusStereo:N,opusFec:L,opusDtx:j,opusMaxPlaybackRate:W,opusMaxAverageBitrate:$,opusPtime:Z,opusNack:ne,videoGoogleStartBitrate:de,videoGoogleMaxBitrate:ge,videoGoogleMinBitrate:_e}=d,Me=R.codecs.find(fe=>fe.payloadType===c.payloadType);switch(c.mimeType.toLowerCase()){case"audio/opus":case"audio/multiopus":N!==void 0&&(Me.parameters["sprop-stereo"]=N?1:0,l.stereo=N?1:0),L!==void 0&&(Me.parameters.useinbandfec=L?1:0,l.useinbandfec=L?1:0),j!==void 0&&(Me.parameters.usedtx=j?1:0,l.usedtx=j?1:0),W!==void 0&&(l.maxplaybackrate=W),$!==void 0&&(l.maxaveragebitrate=$),Z!==void 0&&(Me.parameters.ptime=Z,l.ptime=Z),ne||(Me.rtcpFeedback=Me.rtcpFeedback.filter(fe=>fe.type!=="nack"||fe.parameter),m=m.filter(fe=>fe.type!=="nack"||fe.parameter));break;case"video/vp8":case"video/vp9":case"video/h264":case"video/h265":de!==void 0&&(l["x-google-start-bitrate"]=de),ge!==void 0&&(l["x-google-max-bitrate"]=ge),_e!==void 0&&(l["x-google-min-bitrate"]=_e)}}const D={payload:c.payloadType,config:""};for(const N of Object.keys(l))D.config&&(D.config+=";"),D.config+=`${N}=${l[N]}`;D.config&&this._mediaObject.fmtp.push(D);for(const N of m)this._mediaObject.rtcpFb.push({payload:c.payloadType,type:N.type,subtype:N.parameter})}this._mediaObject.payloads=I.codecs.map(c=>c.payloadType).join(" "),this._mediaObject.ext=[];for(const c of I.headerExtensions)(P.ext||[]).some(u=>u.uri===c.uri)&&this._mediaObject.ext.push({uri:c.uri,value:c.id});if(v&&P.extmapAllowMixed==="extmap-allow-mixed"&&(this._mediaObject.extmapAllowMixed="extmap-allow-mixed"),P.simulcast){this._mediaObject.simulcast={dir1:"recv",list1:P.simulcast.list1},this._mediaObject.rids=[];for(const c of P.rids||[])c.direction==="send"&&this._mediaObject.rids.push({id:c.id,direction:"recv"})}else if(P.simulcast_03){this._mediaObject.simulcast_03={value:P.simulcast_03.value.replace(/send/g,"recv")},this._mediaObject.rids=[];for(const c of P.rids||[])c.direction==="send"&&this._mediaObject.rids.push({id:c.id,direction:"recv"})}this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize",this._planB&&this._mediaObject.type==="video"&&(this._mediaObject.xGoogleFlag="conference");break;case"application":typeof P.sctpPort=="number"?(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=T.port,this._mediaObject.maxMessageSize=T.maxMessageSize):P.sctpmap&&(this._mediaObject.payloads=T.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:T.port,maxMessageSize:T.maxMessageSize})}}setDtlsRole(s){switch(s){case"client":this._mediaObject.setup="active";break;case"server":this._mediaObject.setup="passive";break;case"auto":this._mediaObject.setup="actpass"}}resume(){this._mediaObject.direction="recvonly"}muxSimulcastStreams(s){var x;if(!this._mediaObject.simulcast||!this._mediaObject.simulcast.list1)return;const b={};for(const O of s)O.rid&&(b[O.rid]=O);const S=this._mediaObject.simulcast.list1,T=w.parseSimulcastStreamList(S);for(const O of T)for(const P of O)P.paused=!((x=b[P.scid])!=null&&x.active);this._mediaObject.simulcast.list1=T.map(O=>O.map(P=>`${P.paused?"~":""}${P.scid}`).join(",")).join(";")}};function g(s){const b=new RegExp("^(audio|video)/(.+)","i").exec(s.mimeType);if(!b)throw new TypeError("invalid codec.mimeType");return b[2]}p.OfferMediaSection=class extends f{constructor({iceParameters:s,iceCandidates:b,dtlsParameters:S,sctpParameters:T,plainRtpParameters:x,planB:O=!1,mid:P,kind:R,offerRtpParameters:I,streamId:d,trackId:v,oldDataChannelSpec:c=!1}){switch(super({iceParameters:s,iceCandidates:b,dtlsParameters:S,planB:O}),this._mediaObject.mid=String(P),this._mediaObject.type=R,x?(this._mediaObject.connection={ip:x.ip,version:x.ipVersion},this._mediaObject.protocol="RTP/AVP",this._mediaObject.port=x.port):(this._mediaObject.connection={ip:"127.0.0.1",version:4},this._mediaObject.protocol=T?"UDP/DTLS/SCTP":"UDP/TLS/RTP/SAVPF",this._mediaObject.port=7),R){case"audio":case"video":{this._mediaObject.direction="sendonly",this._mediaObject.rtp=[],this._mediaObject.rtcpFb=[],this._mediaObject.fmtp=[],this._planB||(this._mediaObject.msid=`${d||"-"} ${v}`);for(const D of I.codecs){const N={payload:D.payloadType,codec:g(D),rate:D.clockRate};D.channels>1&&(N.encoding=D.channels),this._mediaObject.rtp.push(N);const L={payload:D.payloadType,config:""};for(const j of Object.keys(D.parameters))L.config&&(L.config+=";"),L.config+=`${j}=${D.parameters[j]}`;L.config&&this._mediaObject.fmtp.push(L);for(const j of D.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:D.payloadType,type:j.type,subtype:j.parameter})}this._mediaObject.payloads=I.codecs.map(D=>D.payloadType).join(" "),this._mediaObject.ext=[];for(const D of I.headerExtensions)this._mediaObject.ext.push({uri:D.uri,value:D.id});this._mediaObject.rtcpMux="rtcp-mux",this._mediaObject.rtcpRsize="rtcp-rsize";const u=I.encodings[0],l=u.ssrc,m=u.rtx&&u.rtx.ssrc?u.rtx.ssrc:void 0;this._mediaObject.ssrcs=[],this._mediaObject.ssrcGroups=[],I.rtcp.cname&&this._mediaObject.ssrcs.push({id:l,attribute:"cname",value:I.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:l,attribute:"msid",value:`${d||"-"} ${v}`}),m&&(I.rtcp.cname&&this._mediaObject.ssrcs.push({id:m,attribute:"cname",value:I.rtcp.cname}),this._planB&&this._mediaObject.ssrcs.push({id:m,attribute:"msid",value:`${d||"-"} ${v}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${l} ${m}`}));break}case"application":c?(this._mediaObject.payloads=T.port,this._mediaObject.sctpmap={app:"webrtc-datachannel",sctpmapNumber:T.port,maxMessageSize:T.maxMessageSize}):(this._mediaObject.payloads="webrtc-datachannel",this._mediaObject.sctpPort=T.port,this._mediaObject.maxMessageSize=T.maxMessageSize)}}setDtlsRole(s){this._mediaObject.setup="actpass"}resume(){this._mediaObject.direction="sendonly"}planBReceive({offerRtpParameters:s,streamId:b,trackId:S}){const T=s.encodings[0],x=T.ssrc,O=T.rtx&&T.rtx.ssrc?T.rtx.ssrc:void 0,P=this._mediaObject.payloads.split(" ");for(const R of s.codecs){if(P.includes(String(R.payloadType)))continue;const I={payload:R.payloadType,codec:g(R),rate:R.clockRate};R.channels>1&&(I.encoding=R.channels),this._mediaObject.rtp.push(I);const d={payload:R.payloadType,config:""};for(const v of Object.keys(R.parameters))d.config&&(d.config+=";"),d.config+=`${v}=${R.parameters[v]}`;d.config&&this._mediaObject.fmtp.push(d);for(const v of R.rtcpFeedback)this._mediaObject.rtcpFb.push({payload:R.payloadType,type:v.type,subtype:v.parameter})}this._mediaObject.payloads+=` ${s.codecs.filter(R=>!this._mediaObject.payloads.includes(R.payloadType)).map(R=>R.payloadType).join(" ")}`,this._mediaObject.payloads=this._mediaObject.payloads.trim(),s.rtcp.cname&&this._mediaObject.ssrcs.push({id:x,attribute:"cname",value:s.rtcp.cname}),this._mediaObject.ssrcs.push({id:x,attribute:"msid",value:`${b||"-"} ${S}`}),O&&(s.rtcp.cname&&this._mediaObject.ssrcs.push({id:O,attribute:"cname",value:s.rtcp.cname}),this._mediaObject.ssrcs.push({id:O,attribute:"msid",value:`${b||"-"} ${S}`}),this._mediaObject.ssrcGroups.push({semantics:"FID",ssrcs:`${x} ${O}`}))}planBStopReceiving({offerRtpParameters:s}){const b=s.encodings[0],S=b.ssrc,T=b.rtx&&b.rtx.ssrc?b.rtx.ssrc:void 0;this._mediaObject.ssrcs=this._mediaObject.ssrcs.filter(x=>x.id!==S&&x.id!==T),T&&(this._mediaObject.ssrcGroups=this._mediaObject.ssrcGroups.filter(x=>x.ssrcs!==`${S} ${T}`))}}},1305:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(s,b,S,T){T===void 0&&(T=S);var x=Object.getOwnPropertyDescriptor(b,S);x&&!("get"in x?!b.__esModule:x.writable||x.configurable)||(x={enumerable:!0,get:function(){return b[S]}}),Object.defineProperty(s,T,x)}:function(s,b,S,T){T===void 0&&(T=S),s[T]=b[S]}),_=this&&this.__setModuleDefault||(Object.create?function(s,b){Object.defineProperty(s,"default",{enumerable:!0,value:b})}:function(s,b){s.default=b}),h=this&&this.__importStar||function(s){if(s&&s.__esModule)return s;var b={};if(s!=null)for(var S in s)S!=="default"&&Object.prototype.hasOwnProperty.call(s,S)&&E(b,s,S);return _(b,s),b};Object.defineProperty(p,"__esModule",{value:!0}),p.RemoteSdp=void 0;const w=h(o(7363)),k=o(2994),f=o(3471),g=new k.Logger("RemoteSdp");p.RemoteSdp=class{constructor({iceParameters:s,iceCandidates:b,dtlsParameters:S,sctpParameters:T,plainRtpParameters:x,planB:O=!1}){if(this._mediaSections=[],this._midToIndex=new Map,this._iceParameters=s,this._iceCandidates=b,this._dtlsParameters=S,this._sctpParameters=T,this._plainRtpParameters=x,this._planB=O,this._sdpObject={version:0,origin:{address:"0.0.0.0",ipVer:4,netType:"IN",sessionId:1e4,sessionVersion:0,username:"mediasoup-client"},name:"-",timing:{start:0,stop:0},media:[]},s&&s.iceLite&&(this._sdpObject.icelite="ice-lite"),S){this._sdpObject.msidSemantic={semantic:"WMS",token:"*"};const P=this._dtlsParameters.fingerprints.length;this._sdpObject.fingerprint={type:S.fingerprints[P-1].algorithm,hash:S.fingerprints[P-1].value},this._sdpObject.groups=[{type:"BUNDLE",mids:""}]}x&&(this._sdpObject.origin.address=x.ip,this._sdpObject.origin.ipVer=x.ipVersion)}updateIceParameters(s){g.debug("updateIceParameters() [iceParameters:%o]",s),this._iceParameters=s,this._sdpObject.icelite=s.iceLite?"ice-lite":void 0;for(const b of this._mediaSections)b.setIceParameters(s)}updateDtlsRole(s){g.debug("updateDtlsRole() [role:%s]",s),this._dtlsParameters.role=s;for(const b of this._mediaSections)b.setDtlsRole(s)}getNextMediaSectionIdx(){for(let s=0;s<this._mediaSections.length;++s){const b=this._mediaSections[s];if(b.closed)return{idx:s,reuseMid:b.mid}}return{idx:this._mediaSections.length}}send({offerMediaObject:s,reuseMid:b,offerRtpParameters:S,answerRtpParameters:T,codecOptions:x,extmapAllowMixed:O=!1}){const P=new f.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,offerMediaObject:s,offerRtpParameters:S,answerRtpParameters:T,codecOptions:x,extmapAllowMixed:O});b?this._replaceMediaSection(P,b):this._midToIndex.has(P.mid)?this._replaceMediaSection(P):this._addMediaSection(P)}receive({mid:s,kind:b,offerRtpParameters:S,streamId:T,trackId:x}){const O=this._midToIndex.get(s);let P;if(O!==void 0&&(P=this._mediaSections[O]),P)P.planBReceive({offerRtpParameters:S,streamId:T,trackId:x}),this._replaceMediaSection(P);else{P=new f.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,plainRtpParameters:this._plainRtpParameters,planB:this._planB,mid:s,kind:b,offerRtpParameters:S,streamId:T,trackId:x});const R=this._mediaSections.find(I=>I.closed);R?this._replaceMediaSection(P,R.mid):this._addMediaSection(P)}}pauseMediaSection(s){this._findMediaSection(s).pause()}resumeSendingMediaSection(s){this._findMediaSection(s).resume()}resumeReceivingMediaSection(s){this._findMediaSection(s).resume()}disableMediaSection(s){this._findMediaSection(s).disable()}closeMediaSection(s){const b=this._findMediaSection(s);return s===this._firstMid?(g.debug("closeMediaSection() | cannot close first media section, disabling it instead [mid:%s]",s),this.disableMediaSection(s),!1):(b.close(),this._regenerateBundleMids(),!0)}muxMediaSectionSimulcast(s,b){const S=this._findMediaSection(s);S.muxSimulcastStreams(b),this._replaceMediaSection(S)}planBStopReceiving({mid:s,offerRtpParameters:b}){const S=this._findMediaSection(s);S.planBStopReceiving({offerRtpParameters:b}),this._replaceMediaSection(S)}sendSctpAssociation({offerMediaObject:s}){const b=new f.AnswerMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,offerMediaObject:s});this._addMediaSection(b)}receiveSctpAssociation({oldDataChannelSpec:s=!1}={}){const b=new f.OfferMediaSection({iceParameters:this._iceParameters,iceCandidates:this._iceCandidates,dtlsParameters:this._dtlsParameters,sctpParameters:this._sctpParameters,plainRtpParameters:this._plainRtpParameters,mid:"datachannel",kind:"application",oldDataChannelSpec:s});this._addMediaSection(b)}getSdp(){return this._sdpObject.origin.sessionVersion++,w.write(this._sdpObject)}_addMediaSection(s){this._firstMid||(this._firstMid=s.mid),this._mediaSections.push(s),this._midToIndex.set(s.mid,this._mediaSections.length-1),this._sdpObject.media.push(s.getObject()),this._regenerateBundleMids()}_replaceMediaSection(s,b){if(typeof b=="string"){const S=this._midToIndex.get(b);if(S===void 0)throw new Error(`no media section found for reuseMid '${b}'`);const T=this._mediaSections[S];this._mediaSections[S]=s,this._midToIndex.delete(T.mid),this._midToIndex.set(s.mid,S),this._sdpObject.media[S]=s.getObject(),this._regenerateBundleMids()}else{const S=this._midToIndex.get(s.mid);if(S===void 0)throw new Error(`no media section found with mid '${s.mid}'`);this._mediaSections[S]=s,this._sdpObject.media[S]=s.getObject()}}_findMediaSection(s){const b=this._midToIndex.get(s);if(b===void 0)throw new Error(`no media section found with mid '${s}'`);return this._mediaSections[b]}_regenerateBundleMids(){this._dtlsParameters&&(this._sdpObject.groups[0].mids=this._mediaSections.filter(s=>!s.closed).map(s=>s.mid).join(" "))}}},5544:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(k,f,g,s){s===void 0&&(s=g);var b=Object.getOwnPropertyDescriptor(f,g);b&&!("get"in b?!f.__esModule:b.writable||b.configurable)||(b={enumerable:!0,get:function(){return f[g]}}),Object.defineProperty(k,s,b)}:function(k,f,g,s){s===void 0&&(s=g),k[s]=f[g]}),_=this&&this.__setModuleDefault||(Object.create?function(k,f){Object.defineProperty(k,"default",{enumerable:!0,value:f})}:function(k,f){k.default=f}),h=this&&this.__importStar||function(k){if(k&&k.__esModule)return k;var f={};if(k!=null)for(var g in k)g!=="default"&&Object.prototype.hasOwnProperty.call(k,g)&&E(f,k,g);return _(f,k),f};Object.defineProperty(p,"__esModule",{value:!0}),p.applyCodecParameters=p.getCname=p.extractDtlsParameters=p.extractRtpCapabilities=void 0;const w=h(o(7363));p.extractRtpCapabilities=function({sdpObject:k}){const f=new Map,g=[];let s=!1,b=!1;for(const S of k.media){const T=S.type;switch(T){case"audio":if(s)continue;s=!0;break;case"video":if(b)continue;b=!0;break;default:continue}for(const x of S.rtp){const O={kind:T,mimeType:`${T}/${x.codec}`,preferredPayloadType:x.payload,clockRate:x.rate,channels:x.encoding,parameters:{},rtcpFeedback:[]};f.set(O.preferredPayloadType,O)}for(const x of S.fmtp||[]){const O=w.parseParams(x.config),P=f.get(x.payload);P&&(O&&O.hasOwnProperty("profile-level-id")&&(O["profile-level-id"]=String(O["profile-level-id"])),P.parameters=O)}for(const x of S.rtcpFb||[]){const O={type:x.type,parameter:x.subtype};if(O.parameter||delete O.parameter,x.payload!=="*"){const P=f.get(x.payload);if(!P)continue;P.rtcpFeedback.push(O)}else for(const P of f.values())P.kind!==T||/.+\/rtx$/i.test(P.mimeType)||P.rtcpFeedback.push(O)}for(const x of S.ext||[]){if(x["encrypt-uri"])continue;const O={kind:T,uri:x.uri,preferredId:x.value};g.push(O)}}return{codecs:Array.from(f.values()),headerExtensions:g}},p.extractDtlsParameters=function({sdpObject:k}){let f,g=k.setup,s=k.fingerprint;if(!g||!s){const b=(k.media||[]).find(S=>S.port!==0);b&&(g??(g=b.setup),s??(s=b.fingerprint))}if(!g)throw new Error("no a=setup found at SDP session or media level");if(!s)throw new Error("no a=fingerprint found at SDP session or media level");switch(g){case"active":f="client";break;case"passive":f="server";break;case"actpass":f="auto"}return{role:f,fingerprints:[{algorithm:s.type,value:s.hash}]}},p.getCname=function({offerMediaObject:k}){const f=(k.ssrcs||[]).find(g=>g.attribute==="cname");return f?f.value:""},p.applyCodecParameters=function({offerRtpParameters:k,answerMediaObject:f}){for(const g of k.codecs){const s=g.mimeType.toLowerCase();if(s!=="audio/opus"||!(f.rtp||[]).find(T=>T.payload===g.payloadType))continue;f.fmtp=f.fmtp||[];let b=f.fmtp.find(T=>T.payload===g.payloadType);b||(b={payload:g.payloadType,config:""},f.fmtp.push(b));const S=w.parseParams(b.config);switch(s){case"audio/opus":{const T=g.parameters["sprop-stereo"];T!==void 0&&(S.stereo=T?1:0);break}}b.config="";for(const T of Object.keys(S))b.config&&(b.config+=";"),b.config+=`${T}=${S[T]}`}}},4496:(C,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.addLegacySimulcast=p.getRtpEncodings=void 0,p.getRtpEncodings=function({offerMediaObject:o,track:E}){const _=new Set;for(const k of o.ssrcs||[])if(k.attribute==="msid"&&k.value.split(" ")[1]===E.id){const f=k.id;_.add(f)}if(_.size===0)throw new Error(`a=ssrc line with msid information not found [track.id:${E.id}]`);const h=new Map;for(const k of o.ssrcGroups||[]){if(k.semantics!=="FID")continue;let[f,g]=k.ssrcs.split(/\s+/);f=Number(f),g=Number(g),_.has(f)&&(_.delete(f),_.delete(g),h.set(f,g))}for(const k of _)h.set(k,null);const w=[];for(const[k,f]of h){const g={ssrc:k};f&&(g.rtx={ssrc:f}),w.push(g)}return w},p.addLegacySimulcast=function({offerMediaObject:o,track:E,numStreams:_}){if(_<=1)throw new TypeError("numStreams must be greater than 1");let h,w,k;if(!(o.ssrcs||[]).find(S=>S.attribute!=="msid"?!1:S.value.split(" ")[1]===E.id&&(h=S.id,k=S.value.split(" ")[0],!0)))throw new Error(`a=ssrc line with msid information not found [track.id:${E.id}]`);(o.ssrcGroups||[]).some(S=>{if(S.semantics!=="FID")return!1;const T=S.ssrcs.split(/\s+/);return Number(T[0])===h&&(w=Number(T[1]),!0)});const f=o.ssrcs.find(S=>S.attribute==="cname"&&S.id===h);if(!f)throw new Error(`a=ssrc line with cname information not found [track.id:${E.id}]`);const g=f.value,s=[],b=[];for(let S=0;S<_;++S)s.push(h+S),w&&b.push(w+S);o.ssrcGroups=o.ssrcGroups||[],o.ssrcs=o.ssrcs||[],o.ssrcGroups.push({semantics:"SIM",ssrcs:s.join(" ")});for(let S=0;S<s.length;++S){const T=s[S];o.ssrcs.push({id:T,attribute:"cname",value:g}),o.ssrcs.push({id:T,attribute:"msid",value:`${k} ${E.id}`})}for(let S=0;S<b.length;++S){const T=s[S],x=b[S];o.ssrcs.push({id:x,attribute:"cname",value:g}),o.ssrcs.push({id:x,attribute:"msid",value:`${k} ${E.id}`}),o.ssrcGroups.push({semantics:"FID",ssrcs:`${T} ${x}`})}}},5938:(C,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.addLegacySimulcast=p.getRtpEncodings=void 0,p.getRtpEncodings=function({offerMediaObject:o}){const E=new Set;for(const w of o.ssrcs||[]){const k=w.id;E.add(k)}if(E.size===0)throw new Error("no a=ssrc lines found");const _=new Map;for(const w of o.ssrcGroups||[]){if(w.semantics!=="FID")continue;let[k,f]=w.ssrcs.split(/\s+/);k=Number(k),f=Number(f),E.has(k)&&(E.delete(k),E.delete(f),_.set(k,f))}for(const w of E)_.set(w,null);const h=[];for(const[w,k]of _){const f={ssrc:w};k&&(f.rtx={ssrc:k}),h.push(f)}return h},p.addLegacySimulcast=function({offerMediaObject:o,numStreams:E}){if(E<=1)throw new TypeError("numStreams must be greater than 1");const _=(o.ssrcs||[]).find(T=>T.attribute==="msid");if(!_)throw new Error("a=ssrc line with msid information not found");const[h,w]=_.value.split(" "),k=_.id;let f;(o.ssrcGroups||[]).some(T=>{if(T.semantics!=="FID")return!1;const x=T.ssrcs.split(/\s+/);return Number(x[0])===k&&(f=Number(x[1]),!0)});const g=o.ssrcs.find(T=>T.attribute==="cname");if(!g)throw new Error("a=ssrc line with cname information not found");const s=g.value,b=[],S=[];for(let T=0;T<E;++T)b.push(k+T),f&&S.push(f+T);o.ssrcGroups=[],o.ssrcs=[],o.ssrcGroups.push({semantics:"SIM",ssrcs:b.join(" ")});for(let T=0;T<b.length;++T){const x=b[T];o.ssrcs.push({id:x,attribute:"cname",value:s}),o.ssrcs.push({id:x,attribute:"msid",value:`${h} ${w}`})}for(let T=0;T<S.length;++T){const x=b[T],O=S[T];o.ssrcs.push({id:O,attribute:"cname",value:s}),o.ssrcs.push({id:O,attribute:"msid",value:`${h} ${w}`}),o.ssrcGroups.push({semantics:"FID",ssrcs:`${x} ${O}`})}}},76:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(b,S,T,x){x===void 0&&(x=T);var O=Object.getOwnPropertyDescriptor(S,T);O&&!("get"in O?!S.__esModule:O.writable||O.configurable)||(O={enumerable:!0,get:function(){return S[T]}}),Object.defineProperty(b,x,O)}:function(b,S,T,x){x===void 0&&(x=T),b[x]=S[T]}),_=this&&this.__setModuleDefault||(Object.create?function(b,S){Object.defineProperty(b,"default",{enumerable:!0,value:S})}:function(b,S){b.default=S}),h=this&&this.__importStar||function(b){if(b&&b.__esModule)return b;var S={};if(b!=null)for(var T in b)T!=="default"&&Object.prototype.hasOwnProperty.call(b,T)&&E(S,b,T);return _(S,b),S},w=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(p,"__esModule",{value:!0}),p.debug=p.parseScalabilityMode=p.detectDevice=p.Device=p.version=p.types=void 0;const k=w(o(7833));p.debug=k.default;const f=o(6004);Object.defineProperty(p,"Device",{enumerable:!0,get:function(){return f.Device}}),Object.defineProperty(p,"detectDevice",{enumerable:!0,get:function(){return f.detectDevice}});const g=h(o(8057));p.types=g,p.version="3.7.7";var s=o(3303);Object.defineProperty(p,"parseScalabilityMode",{enumerable:!0,get:function(){return s.parse}})},8046:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(d,v,c,u){u===void 0&&(u=c);var l=Object.getOwnPropertyDescriptor(v,c);l&&!("get"in l?!v.__esModule:l.writable||l.configurable)||(l={enumerable:!0,get:function(){return v[c]}}),Object.defineProperty(d,u,l)}:function(d,v,c,u){u===void 0&&(u=c),d[u]=v[c]}),_=this&&this.__setModuleDefault||(Object.create?function(d,v){Object.defineProperty(d,"default",{enumerable:!0,value:v})}:function(d,v){d.default=v}),h=this&&this.__importStar||function(d){if(d&&d.__esModule)return d;var v={};if(d!=null)for(var c in d)c!=="default"&&Object.prototype.hasOwnProperty.call(d,c)&&E(v,d,c);return _(v,d),v};Object.defineProperty(p,"__esModule",{value:!0}),p.canReceive=p.canSend=p.generateProbatorRtpParameters=p.reduceCodecs=p.getSendingRemoteRtpParameters=p.getSendingRtpParameters=p.getRecvRtpCapabilities=p.getExtendedRtpCapabilities=p.validateSctpCapabilities=p.validateSctpStreamParameters=p.validateRtpParameters=p.validateRtpCapabilities=void 0;const w=h(o(3200)),k=h(o(1765));function f(d){if(typeof d!="object")throw new TypeError("params is not an object");if(d.mid&&typeof d.mid!="string")throw new TypeError("params.mid is not a string");if(!Array.isArray(d.codecs))throw new TypeError("missing params.codecs");for(const v of d.codecs)S(v);if(d.headerExtensions&&!Array.isArray(d.headerExtensions))throw new TypeError("params.headerExtensions is not an array");d.headerExtensions||(d.headerExtensions=[]);for(const v of d.headerExtensions)T(v);if(d.encodings&&!Array.isArray(d.encodings))throw new TypeError("params.encodings is not an array");d.encodings||(d.encodings=[]);for(const v of d.encodings)x(v);if(d.rtcp&&typeof d.rtcp!="object")throw new TypeError("params.rtcp is not an object");d.rtcp||(d.rtcp={}),function(v){if(typeof v!="object")throw new TypeError("rtcp is not an object");if(v.cname&&typeof v.cname!="string")throw new TypeError("invalid rtcp.cname");v.reducedSize&&typeof v.reducedSize=="boolean"||(v.reducedSize=!0)}(d.rtcp)}function g(d){const v=new RegExp("^(audio|video)/(.+)","i");if(typeof d!="object")throw new TypeError("codec is not an object");if(!d.mimeType||typeof d.mimeType!="string")throw new TypeError("missing codec.mimeType");const c=v.exec(d.mimeType);if(!c)throw new TypeError("invalid codec.mimeType");if(d.kind=c[1].toLowerCase(),d.preferredPayloadType&&typeof d.preferredPayloadType!="number")throw new TypeError("invalid codec.preferredPayloadType");if(typeof d.clockRate!="number")throw new TypeError("missing codec.clockRate");d.kind==="audio"?typeof d.channels!="number"&&(d.channels=1):delete d.channels,d.parameters&&typeof d.parameters=="object"||(d.parameters={});for(const u of Object.keys(d.parameters)){let l=d.parameters[u];if(l===void 0&&(d.parameters[u]="",l=""),typeof l!="string"&&typeof l!="number")throw new TypeError(`invalid codec parameter [key:${u}s, value:${l}]`);if(u==="apt"&&typeof l!="number")throw new TypeError("invalid codec apt parameter")}d.rtcpFeedback&&Array.isArray(d.rtcpFeedback)||(d.rtcpFeedback=[]);for(const u of d.rtcpFeedback)s(u)}function s(d){if(typeof d!="object")throw new TypeError("fb is not an object");if(!d.type||typeof d.type!="string")throw new TypeError("missing fb.type");d.parameter&&typeof d.parameter=="string"||(d.parameter="")}function b(d){if(typeof d!="object")throw new TypeError("ext is not an object");if(d.kind!=="audio"&&d.kind!=="video")throw new TypeError("invalid ext.kind");if(!d.uri||typeof d.uri!="string")throw new TypeError("missing ext.uri");if(typeof d.preferredId!="number")throw new TypeError("missing ext.preferredId");if(d.preferredEncrypt&&typeof d.preferredEncrypt!="boolean")throw new TypeError("invalid ext.preferredEncrypt");if(d.preferredEncrypt||(d.preferredEncrypt=!1),d.direction&&typeof d.direction!="string")throw new TypeError("invalid ext.direction");d.direction||(d.direction="sendrecv")}function S(d){const v=new RegExp("^(audio|video)/(.+)","i");if(typeof d!="object")throw new TypeError("codec is not an object");if(!d.mimeType||typeof d.mimeType!="string")throw new TypeError("missing codec.mimeType");const c=v.exec(d.mimeType);if(!c)throw new TypeError("invalid codec.mimeType");if(typeof d.payloadType!="number")throw new TypeError("missing codec.payloadType");if(typeof d.clockRate!="number")throw new TypeError("missing codec.clockRate");c[1].toLowerCase()==="audio"?typeof d.channels!="number"&&(d.channels=1):delete d.channels,d.parameters&&typeof d.parameters=="object"||(d.parameters={});for(const u of Object.keys(d.parameters)){let l=d.parameters[u];if(l===void 0&&(d.parameters[u]="",l=""),typeof l!="string"&&typeof l!="number")throw new TypeError(`invalid codec parameter [key:${u}s, value:${l}]`);if(u==="apt"&&typeof l!="number")throw new TypeError("invalid codec apt parameter")}d.rtcpFeedback&&Array.isArray(d.rtcpFeedback)||(d.rtcpFeedback=[]);for(const u of d.rtcpFeedback)s(u)}function T(d){if(typeof d!="object")throw new TypeError("ext is not an object");if(!d.uri||typeof d.uri!="string")throw new TypeError("missing ext.uri");if(typeof d.id!="number")throw new TypeError("missing ext.id");if(d.encrypt&&typeof d.encrypt!="boolean")throw new TypeError("invalid ext.encrypt");d.encrypt||(d.encrypt=!1),d.parameters&&typeof d.parameters=="object"||(d.parameters={});for(const v of Object.keys(d.parameters)){let c=d.parameters[v];if(c===void 0&&(d.parameters[v]="",c=""),typeof c!="string"&&typeof c!="number")throw new TypeError("invalid header extension parameter")}}function x(d){if(typeof d!="object")throw new TypeError("encoding is not an object");if(d.ssrc&&typeof d.ssrc!="number")throw new TypeError("invalid encoding.ssrc");if(d.rid&&typeof d.rid!="string")throw new TypeError("invalid encoding.rid");if(d.rtx&&typeof d.rtx!="object")throw new TypeError("invalid encoding.rtx");if(d.rtx&&typeof d.rtx.ssrc!="number")throw new TypeError("missing encoding.rtx.ssrc");if(d.dtx&&typeof d.dtx=="boolean"||(d.dtx=!1),d.scalabilityMode&&typeof d.scalabilityMode!="string")throw new TypeError("invalid encoding.scalabilityMode")}function O(d){return!!d&&/.+\/rtx$/i.test(d.mimeType)}function P(d,v,{strict:c=!1,modify:u=!1}={}){const l=d.mimeType.toLowerCase();if(l!==v.mimeType.toLowerCase()||d.clockRate!==v.clockRate||d.channels!==v.channels)return!1;switch(l){case"video/h264":if(c){if((d.parameters["packetization-mode"]||0)!==(v.parameters["packetization-mode"]||0)||!w.isSameProfile(d.parameters,v.parameters))return!1;let m;try{m=w.generateProfileLevelIdStringForAnswer(d.parameters,v.parameters)}catch{return!1}u&&(m?(d.parameters["profile-level-id"]=m,v.parameters["profile-level-id"]=m):(delete d.parameters["profile-level-id"],delete v.parameters["profile-level-id"]))}break;case"video/vp9":if(c&&(d.parameters["profile-id"]||0)!==(v.parameters["profile-id"]||0))return!1}return!0}function R(d,v){return(!d.kind||!v.kind||d.kind===v.kind)&&d.uri===v.uri}function I(d,v){const c=[];for(const u of d.rtcpFeedback||[]){const l=(v.rtcpFeedback||[]).find(m=>m.type===u.type&&(m.parameter===u.parameter||!m.parameter&&!u.parameter));l&&c.push(l)}return c}p.validateRtpCapabilities=function(d){if(typeof d!="object")throw new TypeError("caps is not an object");if(d.codecs&&!Array.isArray(d.codecs))throw new TypeError("caps.codecs is not an array");d.codecs||(d.codecs=[]);for(const v of d.codecs)g(v);if(d.headerExtensions&&!Array.isArray(d.headerExtensions))throw new TypeError("caps.headerExtensions is not an array");d.headerExtensions||(d.headerExtensions=[]);for(const v of d.headerExtensions)b(v)},p.validateRtpParameters=f,p.validateSctpStreamParameters=function(d){if(typeof d!="object")throw new TypeError("params is not an object");if(typeof d.streamId!="number")throw new TypeError("missing params.streamId");let v=!1;if(typeof d.ordered=="boolean"?v=!0:d.ordered=!0,d.maxPacketLifeTime&&typeof d.maxPacketLifeTime!="number")throw new TypeError("invalid params.maxPacketLifeTime");if(d.maxRetransmits&&typeof d.maxRetransmits!="number")throw new TypeError("invalid params.maxRetransmits");if(d.maxPacketLifeTime&&d.maxRetransmits)throw new TypeError("cannot provide both maxPacketLifeTime and maxRetransmits");if(v&&d.ordered&&(d.maxPacketLifeTime||d.maxRetransmits))throw new TypeError("cannot be ordered with maxPacketLifeTime or maxRetransmits");if(v||!d.maxPacketLifeTime&&!d.maxRetransmits||(d.ordered=!1),d.label&&typeof d.label!="string")throw new TypeError("invalid params.label");if(d.protocol&&typeof d.protocol!="string")throw new TypeError("invalid params.protocol")},p.validateSctpCapabilities=function(d){if(typeof d!="object")throw new TypeError("caps is not an object");if(!d.numStreams||typeof d.numStreams!="object")throw new TypeError("missing caps.numStreams");(function(v){if(typeof v!="object")throw new TypeError("numStreams is not an object");if(typeof v.OS!="number")throw new TypeError("missing numStreams.OS");if(typeof v.MIS!="number")throw new TypeError("missing numStreams.MIS")})(d.numStreams)},p.getExtendedRtpCapabilities=function(d,v){const c={codecs:[],headerExtensions:[]};for(const u of v.codecs||[]){if(O(u))continue;const l=(d.codecs||[]).find(D=>P(D,u,{strict:!0,modify:!0}));if(!l)continue;const m={mimeType:l.mimeType,kind:l.kind,clockRate:l.clockRate,channels:l.channels,localPayloadType:l.preferredPayloadType,localRtxPayloadType:void 0,remotePayloadType:u.preferredPayloadType,remoteRtxPayloadType:void 0,localParameters:l.parameters,remoteParameters:u.parameters,rtcpFeedback:I(l,u)};c.codecs.push(m)}for(const u of c.codecs){const l=d.codecs.find(D=>O(D)&&D.parameters.apt===u.localPayloadType),m=v.codecs.find(D=>O(D)&&D.parameters.apt===u.remotePayloadType);l&&m&&(u.localRtxPayloadType=l.preferredPayloadType,u.remoteRtxPayloadType=m.preferredPayloadType)}for(const u of v.headerExtensions){const l=d.headerExtensions.find(D=>R(D,u));if(!l)continue;const m={kind:u.kind,uri:u.uri,sendId:l.preferredId,recvId:u.preferredId,encrypt:l.preferredEncrypt,direction:"sendrecv"};switch(u.direction){case"sendrecv":m.direction="sendrecv";break;case"recvonly":m.direction="sendonly";break;case"sendonly":m.direction="recvonly";break;case"inactive":m.direction="inactive"}c.headerExtensions.push(m)}return c},p.getRecvRtpCapabilities=function(d){const v={codecs:[],headerExtensions:[]};for(const c of d.codecs){const u={mimeType:c.mimeType,kind:c.kind,preferredPayloadType:c.remotePayloadType,clockRate:c.clockRate,channels:c.channels,parameters:c.localParameters,rtcpFeedback:c.rtcpFeedback};if(v.codecs.push(u),!c.remoteRtxPayloadType)continue;const l={mimeType:`${c.kind}/rtx`,kind:c.kind,preferredPayloadType:c.remoteRtxPayloadType,clockRate:c.clockRate,parameters:{apt:c.remotePayloadType},rtcpFeedback:[]};v.codecs.push(l)}for(const c of d.headerExtensions){if(c.direction!=="sendrecv"&&c.direction!=="recvonly")continue;const u={kind:c.kind,uri:c.uri,preferredId:c.recvId,preferredEncrypt:c.encrypt,direction:c.direction};v.headerExtensions.push(u)}return v},p.getSendingRtpParameters=function(d,v){const c={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const u of v.codecs){if(u.kind!==d)continue;const l={mimeType:u.mimeType,payloadType:u.localPayloadType,clockRate:u.clockRate,channels:u.channels,parameters:u.localParameters,rtcpFeedback:u.rtcpFeedback};if(c.codecs.push(l),u.localRtxPayloadType){const m={mimeType:`${u.kind}/rtx`,payloadType:u.localRtxPayloadType,clockRate:u.clockRate,parameters:{apt:u.localPayloadType},rtcpFeedback:[]};c.codecs.push(m)}}for(const u of v.headerExtensions){if(u.kind&&u.kind!==d||u.direction!=="sendrecv"&&u.direction!=="sendonly")continue;const l={uri:u.uri,id:u.sendId,encrypt:u.encrypt,parameters:{}};c.headerExtensions.push(l)}return c},p.getSendingRemoteRtpParameters=function(d,v){const c={mid:void 0,codecs:[],headerExtensions:[],encodings:[],rtcp:{}};for(const u of v.codecs){if(u.kind!==d)continue;const l={mimeType:u.mimeType,payloadType:u.localPayloadType,clockRate:u.clockRate,channels:u.channels,parameters:u.remoteParameters,rtcpFeedback:u.rtcpFeedback};if(c.codecs.push(l),u.localRtxPayloadType){const m={mimeType:`${u.kind}/rtx`,payloadType:u.localRtxPayloadType,clockRate:u.clockRate,parameters:{apt:u.localPayloadType},rtcpFeedback:[]};c.codecs.push(m)}}for(const u of v.headerExtensions){if(u.kind&&u.kind!==d||u.direction!=="sendrecv"&&u.direction!=="sendonly")continue;const l={uri:u.uri,id:u.sendId,encrypt:u.encrypt,parameters:{}};c.headerExtensions.push(l)}if(c.headerExtensions.some(u=>u.uri==="http://www.ietf.org/id/draft-holmer-rmcat-transport-wide-cc-extensions-01"))for(const u of c.codecs)u.rtcpFeedback=(u.rtcpFeedback||[]).filter(l=>l.type!=="goog-remb");else if(c.headerExtensions.some(u=>u.uri==="http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"))for(const u of c.codecs)u.rtcpFeedback=(u.rtcpFeedback||[]).filter(l=>l.type!=="transport-cc");else for(const u of c.codecs)u.rtcpFeedback=(u.rtcpFeedback||[]).filter(l=>l.type!=="transport-cc"&&l.type!=="goog-remb");return c},p.reduceCodecs=function(d,v){const c=[];if(v){for(let u=0;u<d.length;++u)if(P(d[u],v,{strict:!0})){c.push(d[u]),O(d[u+1])&&c.push(d[u+1]);break}if(c.length===0)throw new TypeError("no matching codec found")}else c.push(d[0]),O(d[1])&&c.push(d[1]);return c},p.generateProbatorRtpParameters=function(d){f(d=k.clone(d));const v={mid:"probator",codecs:[],headerExtensions:[],encodings:[{ssrc:1234}],rtcp:{cname:"probator"}};return v.codecs.push(d.codecs[0]),v.codecs[0].payloadType=127,v.headerExtensions=d.headerExtensions,v},p.canSend=function(d,v){return v.codecs.some(c=>c.kind===d)},p.canReceive=function(d,v){if(f(d),d.codecs.length===0)return!1;const c=d.codecs[0];return v.codecs.some(u=>u.remotePayloadType===c.payloadType)}},3303:(C,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.parse=void 0;const o=new RegExp("^[LS]([1-9]\\d{0,1})T([1-9]\\d{0,1})");p.parse=function(E){const _=o.exec(E||"");return _?{spatialLayers:Number(_[1]),temporalLayers:Number(_[2])}:{spatialLayers:1,temporalLayers:1}}},8057:function(C,p,o){var E=this&&this.__createBinding||(Object.create?function(h,w,k,f){f===void 0&&(f=k);var g=Object.getOwnPropertyDescriptor(w,k);g&&!("get"in g?!w.__esModule:g.writable||g.configurable)||(g={enumerable:!0,get:function(){return w[k]}}),Object.defineProperty(h,f,g)}:function(h,w,k,f){f===void 0&&(f=k),h[f]=w[k]}),_=this&&this.__exportStar||function(h,w){for(var k in h)k==="default"||Object.prototype.hasOwnProperty.call(w,k)||E(w,h,k)};Object.defineProperty(p,"__esModule",{value:!0}),_(o(6004),p),_(o(5601),p),_(o(9792),p),_(o(3518),p),_(o(7504),p),_(o(9166),p),_(o(5370),p),_(o(4160),p),_(o(521),p),_(o(4893),p)},1765:(C,p)=>{Object.defineProperty(p,"__esModule",{value:!0}),p.deepFreeze=p.generateRandomNumber=p.clone=void 0,p.clone=function(o){return o===void 0?void 0:Number.isNaN(o)?NaN:typeof structuredClone=="function"?structuredClone(o):JSON.parse(JSON.stringify(o))},p.generateRandomNumber=function(){return Math.round(1e7*Math.random())},p.deepFreeze=function o(E){const _=Reflect.ownKeys(E);for(const h of _){const w=E[h];(w&&typeof w=="object"||typeof w=="function")&&o(w)}return Object.freeze(E)}},6585:C=>{var p=1e3,o=60*p,E=60*o,_=24*E,h=7*_,w=365.25*_;function k(f,g,s,b){var S=g>=1.5*s;return Math.round(f/s)+" "+b+(S?"s":"")}C.exports=function(f,g){g=g||{};var s=typeof f;if(s==="string"&&f.length>0)return function(b){if(!((b=String(b)).length>100)){var S=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(b);if(S){var T=parseFloat(S[1]);switch((S[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return T*w;case"weeks":case"week":case"w":return T*h;case"days":case"day":case"d":return T*_;case"hours":case"hour":case"hrs":case"hr":case"h":return T*E;case"minutes":case"minute":case"mins":case"min":case"m":return T*o;case"seconds":case"second":case"secs":case"sec":case"s":return T*p;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return T;default:return}}}}(f);if(s==="number"&&isFinite(f))return g.long?function(b){var S=Math.abs(b);return S>=_?k(b,S,_,"day"):S>=E?k(b,S,E,"hour"):S>=o?k(b,S,o,"minute"):S>=p?k(b,S,p,"second"):b+" ms"}(f):function(b){var S=Math.abs(b);return S>=_?Math.round(b/_)+"d":S>=E?Math.round(b/E)+"h":S>=o?Math.round(b/o)+"m":S>=p?Math.round(b/p)+"s":b+"ms"}(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))}},4252:(C,p,o)=>{const{EventEmitter:E}=o(7007),_=o(3612);C.exports=class extends E{constructor(h){super(),this.setMaxListeners(1/0),this._logger=h||new _("EnhancedEventEmitter")}safeEmit(h,...w){try{this.emit(h,...w)}catch(k){this._logger.error("safeEmit() | event listener threw an error [event:%s]:%o",h,k)}}async safeEmitAsPromise(h,...w){return new Promise((k,f)=>{this.safeEmit(h,...w,k,f)})}}},3612:(C,p,o)=>{const E=o(7833),_="protoo-client";C.exports=class{constructor(h){h?(this._debug=E(`${_}:${h}`),this._warn=E(`${_}:WARN:${h}`),this._error=E(`${_}:ERROR:${h}`)):(this._debug=E(_),this._warn=E(`${_}:WARN`),this._error=E(`${_}:ERROR`)),this._debug.log=console.info.bind(console),this._warn.log=console.warn.bind(console),this._error.log=console.error.bind(console)}get debug(){return this._debug}get warn(){return this._warn}get error(){return this._error}}},3241:(C,p,o)=>{const E=o(3612),{generateRandomNumber:_}=o(9007),h=new E("Message");C.exports=class{static parse(w){let k;const f={};try{k=JSON.parse(w)}catch(g){return void h.error("parse() | invalid JSON: %s",g)}if(typeof k=="object"&&!Array.isArray(k)){if(k.request){if(f.request=!0,typeof k.method!="string")return void h.error("parse() | missing/invalid method field");if(typeof k.id!="number")return void h.error("parse() | missing/invalid id field");f.id=k.id,f.method=k.method,f.data=k.data||{}}else if(k.response){if(f.response=!0,typeof k.id!="number")return void h.error("parse() | missing/invalid id field");f.id=k.id,k.ok?(f.ok=!0,f.data=k.data||{}):(f.ok=!1,f.errorCode=k.errorCode,f.errorReason=k.errorReason)}else{if(!k.notification)return void h.error("parse() | missing request/response field");if(f.notification=!0,typeof k.method!="string")return void h.error("parse() | missing/invalid method field");f.method=k.method,f.data=k.data||{}}return f}h.error("parse() | not an object")}static createRequest(w,k){return{request:!0,id:_(),method:w,data:k||{}}}static createSuccessResponse(w,k){return{response:!0,id:w.id,ok:!0,data:k||{}}}static createErrorResponse(w,k,f){return{response:!0,id:w.id,ok:!1,errorCode:k,errorReason:f}}static createNotification(w,k){return{notification:!0,method:w,data:k||{}}}}},7204:(C,p,o)=>{const E=o(3612),_=o(4252),h=o(3241),w=new E("Peer");C.exports=class extends _{constructor(k){super(w),w.debug("constructor()"),this._closed=!1,this._transport=k,this._connected=!1,this._data={},this._sents=new Map,this._handleTransport()}get closed(){return this._closed}get connected(){return this._connected}get data(){return this._data}set data(k){throw new Error("cannot override data object")}close(){if(!this._closed){w.debug("close()"),this._closed=!0,this._connected=!1,this._transport.close();for(const k of this._sents.values())k.close();this.safeEmit("close")}}async request(k,f=void 0){const g=h.createRequest(k,f);return this._logger.debug("request() [method:%s, id:%s]",k,g.id),await this._transport.send(g),new Promise((s,b)=>{const S=1500*(15+.1*this._sents.size),T={id:g.id,method:g.method,resolve:x=>{this._sents.delete(g.id)&&(clearTimeout(T.timer),s(x))},reject:x=>{this._sents.delete(g.id)&&(clearTimeout(T.timer),b(x))},timer:setTimeout(()=>{this._sents.delete(g.id)&&b(new Error("request timeout"))},S),close:()=>{clearTimeout(T.timer),b(new Error("peer closed"))}};this._sents.set(g.id,T)})}async notify(k,f=void 0){const g=h.createNotification(k,f);this._logger.debug("notify() [method:%s]",k),await this._transport.send(g)}_handleTransport(){if(this._transport.closed)return this._closed=!0,void setTimeout(()=>{this._closed||(this._connected=!1,this.safeEmit("close"))});this._transport.on("open",()=>{this._closed||(w.debug('emit "open"'),this._connected=!0,this.safeEmit("open"))}),this._transport.on("disconnected",()=>{this._closed||(w.debug('emit "disconnected"'),this._connected=!1,this.safeEmit("disconnected"))}),this._transport.on("failed",k=>{this._closed||(w.debug('emit "failed" [currentAttempt:%s]',k),this._connected=!1,this.safeEmit("failed",k))}),this._transport.on("close",()=>{this._closed||(this._closed=!0,w.debug('emit "close"'),this._connected=!1,this.safeEmit("close"))}),this._transport.on("message",k=>{k.request?this._handleRequest(k):k.response?this._handleResponse(k):k.notification&&this._handleNotification(k)})}_handleRequest(k){try{this.emit("request",k,f=>{const g=h.createSuccessResponse(k,f);this._transport.send(g).catch(()=>{})},(f,g)=>{f instanceof Error?(g=f.message,f=500):typeof f=="number"&&g instanceof Error&&(g=g.message);const s=h.createErrorResponse(k,f,g);this._transport.send(s).catch(()=>{})})}catch(f){const g=h.createErrorResponse(k,500,String(f));this._transport.send(g).catch(()=>{})}}_handleResponse(k){const f=this._sents.get(k.id);if(f)if(k.ok)f.resolve(k.data);else{const g=new Error(k.errorReason);g.code=k.errorCode,f.reject(g)}else w.error("received response does not match any sent request [id:%s]",k.id)}_handleNotification(k){this.safeEmit("notification",k)}}},9566:(C,p,o)=>{o(7949);const E=o(7204),_=o(3545);p.xM=E,p.TJ=_},3545:(C,p,o)=>{const E=o(952).w3cwebsocket,_=o(5617),h=o(3612),w=o(4252),k=o(3241),f={retries:10,factor:2,minTimeout:1e3,maxTimeout:8e3},g=new h("WebSocketTransport");C.exports=class extends w{constructor(s,b){super(g),g.debug("constructor() [url:%s, options:%o]",s,b),this._closed=!1,this._url=s,this._options=b||{},this._ws=null,this._runWebSocket()}get closed(){return this._closed}close(){if(!this._closed){g.debug("close()"),this._closed=!0,this.safeEmit("close");try{this._ws.onopen=null,this._ws.onclose=null,this._ws.onerror=null,this._ws.onmessage=null,this._ws.close()}catch(s){g.error("close() | error closing the WebSocket: %o",s)}}}async send(s){if(this._closed)throw new Error("transport closed");try{this._ws.send(JSON.stringify(s))}catch(b){throw g.warn("send() failed:%o",b),b}}_runWebSocket(){const s=_.operation(this._options.retry||f);let b=!1;s.attempt(S=>{this._closed?s.stop():(g.debug("_runWebSocket() [currentAttempt:%s]",S),this._ws=new E(this._url,"protoo",this._options.origin,this._options.headers,this._options.requestOptions,this._options.clientConfig),this._ws.onopen=()=>{this._closed||(b=!0,this.safeEmit("open"))},this._ws.onclose=T=>{if(!this._closed){if(g.warn('WebSocket "close" event [wasClean:%s, code:%s, reason:"%s"]',T.wasClean,T.code,T.reason),T.code!==4e3){if(b)return s.stop(),this.safeEmit("disconnected"),this._closed?void 0:void this._runWebSocket();if(this.safeEmit("failed",S),this._closed||s.retry(!0))return}this._closed=!0,this.safeEmit("close")}},this._ws.onerror=()=>{this._closed||g.error('WebSocket "error" event')},this._ws.onmessage=T=>{if(this._closed)return;const x=k.parse(T.data);x&&(this.listenerCount("message")!==0?this.safeEmit("message",x):g.error('no listeners for WebSocket "message" event, ignoring received message'))})})}}},9007:(C,p)=>{p.generateRandomNumber=function(){return Math.round(1e7*Math.random())}},9596:(C,p,o)=>{let E;C.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:o.g):_=>(E||(E=Promise.resolve())).then(_).catch(h=>setTimeout(()=>{throw h},0))},2211:C=>{C.exports=function(p){var o,E,_="",h=(p=function(k){return k||(k={}),{length:k.length||8,numeric:typeof k.numeric!="boolean"||k.numeric,letters:typeof k.letters!="boolean"||k.letters,special:typeof k.special=="boolean"&&k.special,exclude:Array.isArray(k.exclude)?k.exclude:[]}}(p)).length,w=(p.exclude,function(k){var f="";k.numeric&&(f+="0123456789"),k.letters&&(f+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"),k.special&&(f+="!$%^&*()_+|~-=`{}[]:;<>?,./");for(var g=0;g<=k.exclude.length;g++)f=f.replace(k.exclude[g],"");return f}(p));for(o=1;o<=h;o++)_+=w.substring(E=Math.floor(Math.random()*w.length),E+1);return _}},5617:(C,p,o)=>{C.exports=o(8303)},8303:(C,p,o)=>{var E=o(3961);p.operation=function(_){var h=p.timeouts(_);return new E(h,{forever:_&&_.forever,unref:_&&_.unref,maxRetryTime:_&&_.maxRetryTime})},p.timeouts=function(_){if(_ instanceof Array)return[].concat(_);var h={retries:10,factor:2,minTimeout:1e3,maxTimeout:1/0,randomize:!1};for(var w in _)h[w]=_[w];if(h.minTimeout>h.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var k=[],f=0;f<h.retries;f++)k.push(this.createTimeout(f,h));return _&&_.forever&&!k.length&&k.push(this.createTimeout(f,h)),k.sort(function(g,s){return g-s}),k},p.createTimeout=function(_,h){var w=h.randomize?Math.random()+1:1,k=Math.round(w*h.minTimeout*Math.pow(h.factor,_));return k=Math.min(k,h.maxTimeout)},p.wrap=function(_,h,w){if(h instanceof Array&&(w=h,h=null),!w)for(var k in w=[],_)typeof _[k]=="function"&&w.push(k);for(var f=0;f<w.length;f++){var g=w[f],s=_[g];_[g]=(function(b){var S=p.operation(h),T=Array.prototype.slice.call(arguments,1),x=T.pop();T.push(function(O){S.retry(O)||(O&&(arguments[0]=S.mainError()),x.apply(this,arguments))}),S.attempt(function(){b.apply(_,T)})}).bind(_,s),_[g].options=h}}},3961:C=>{function p(o,E){typeof E=="boolean"&&(E={forever:E}),this._originalTimeouts=JSON.parse(JSON.stringify(o)),this._timeouts=o,this._options=E||{},this._maxRetryTime=E&&E.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}C.exports=p,p.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts},p.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timeouts=[],this._cachedTimeouts=null},p.prototype.retry=function(o){if(this._timeout&&clearTimeout(this._timeout),!o)return!1;var E=new Date().getTime();if(o&&E-this._operationStart>=this._maxRetryTime)return this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(o);var _=this._timeouts.shift();if(_===void 0){if(!this._cachedTimeouts)return!1;this._errors.splice(this._errors.length-1,this._errors.length),this._timeouts=this._cachedTimeouts.slice(0),_=this._timeouts.shift()}var h=this,w=setTimeout(function(){h._attempts++,h._operationTimeoutCb&&(h._timeout=setTimeout(function(){h._operationTimeoutCb(h._attempts)},h._operationTimeout),h._options.unref&&h._timeout.unref()),h._fn(h._attempts)},_);return this._options.unref&&w.unref(),!0},p.prototype.attempt=function(o,E){this._fn=o,E&&(E.timeout&&(this._operationTimeout=E.timeout),E.cb&&(this._operationTimeoutCb=E.cb));var _=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){_._operationTimeoutCb()},_._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},p.prototype.try=function(o){console.log("Using RetryOperation.try() is deprecated"),this.attempt(o)},p.prototype.start=function(o){console.log("Using RetryOperation.start() is deprecated"),this.attempt(o)},p.prototype.start=p.prototype.try,p.prototype.errors=function(){return this._errors},p.prototype.attempts=function(){return this._attempts},p.prototype.mainError=function(){if(this._errors.length===0)return null;for(var o={},E=null,_=0,h=0;h<this._errors.length;h++){var w=this._errors[h],k=w.message,f=(o[k]||0)+1;o[k]=f,f>=_&&(E=w,_=f)}return E}},5602:C=>{var p=C.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(o){return o.encoding?"rtpmap:%d %s/%s/%s":o.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(o){return o.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(o){return o.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(o){return"extmap:%d"+(o.direction?"/%s":"%v")+(o["encrypt-uri"]?" %s":"%v")+" %s"+(o.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(o){return o.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(o){var E="candidate:%s %d %s %d %s %d typ %s";return E+=o.raddr!=null?" raddr %s rport %d":"%v%v",E+=o.tcptype!=null?" tcptype %s":"%v",o.generation!=null&&(E+=" generation %d"),E+=o["network-id"]!=null?" network-id %d":"%v",E+=o["network-cost"]!=null?" network-cost %d":"%v"}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(o){var E="ssrc:%d";return o.attribute!=null&&(E+=" %s",o.value!=null&&(E+=":%s")),E}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(o){return o.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(o){return o.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(o){return"imageattr:%s %s %s"+(o.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(o){return"simulcast:%s %s"+(o.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(o){return"ts-refclk:%s"+(o.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(o){var E="mediaclk:";return E+=o.id!=null?"id=%s %s":"%v%s",E+=o.mediaClockValue!=null?"=%s":"",E+=o.rateNumerator!=null?" rate=%s":"",E+=o.rateDenominator!=null?"/%s":""}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};Object.keys(p).forEach(function(o){p[o].forEach(function(E){E.reg||(E.reg=/(.*)/),E.format||(E.format="%s")})})},7363:(C,p,o)=>{var E=o(5020),_=o(3804);p.write=_,p.parse=E.parse,p.parseParams=E.parseParams,p.parseFmtpConfig=E.parseFmtpConfig,p.parsePayloads=E.parsePayloads,p.parseRemoteCandidates=E.parseRemoteCandidates,p.parseImageAttributes=E.parseImageAttributes,p.parseSimulcastStreamList=E.parseSimulcastStreamList},5020:(C,p,o)=>{var E=function(f){return String(Number(f))===f?Number(f):f},_=function(f,g,s){var b=f.name&&f.names;f.push&&!g[f.push]?g[f.push]=[]:b&&!g[f.name]&&(g[f.name]={});var S=f.push?{}:b?g[f.name]:g;(function(T,x,O,P){if(P&&!O)x[P]=E(T[1]);else for(var R=0;R<O.length;R+=1)T[R+1]!=null&&(x[O[R]]=E(T[R+1]))})(s.match(f.reg),S,f.names,f.name),f.push&&g[f.push].push(S)},h=o(5602),w=RegExp.prototype.test.bind(/^([a-z])=(.*)/);p.parse=function(f){var g={},s=[],b=g;return f.split(/(\r\n|\r|\n)/).filter(w).forEach(function(S){var T=S[0],x=S.slice(2);T==="m"&&(s.push({rtp:[],fmtp:[]}),b=s[s.length-1]);for(var O=0;O<(h[T]||[]).length;O+=1){var P=h[T][O];if(P.reg.test(x))return _(P,b,x)}}),g.media=s,g};var k=function(f,g){var s=g.split(/=(.+)/,2);return s.length===2?f[s[0]]=E(s[1]):s.length===1&&g.length>1&&(f[s[0]]=void 0),f};p.parseParams=function(f){return f.split(/;\s?/).reduce(k,{})},p.parseFmtpConfig=p.parseParams,p.parsePayloads=function(f){return f.toString().split(" ").map(Number)},p.parseRemoteCandidates=function(f){for(var g=[],s=f.split(" ").map(E),b=0;b<s.length;b+=3)g.push({component:s[b],ip:s[b+1],port:s[b+2]});return g},p.parseImageAttributes=function(f){return f.split(" ").map(function(g){return g.substring(1,g.length-1).split(",").reduce(k,{})})},p.parseSimulcastStreamList=function(f){return f.split(";").map(function(g){return g.split(",").map(function(s){var b,S=!1;return s[0]!=="~"?b=E(s):(b=E(s.substring(1,s.length)),S=!0),{scid:b,paused:S}})})}},3804:(C,p,o)=>{var E=o(5602),_=/%[sdv%]/g,h=function(g){var s=1,b=arguments,S=b.length;return g.replace(_,function(T){if(s>=S)return T;var x=b[s];switch(s+=1,T){case"%%":return"%";case"%s":return String(x);case"%d":return Number(x);case"%v":return""}})},w=function(g,s,b){var S=[g+"="+(s.format instanceof Function?s.format(s.push?b:b[s.name]):s.format)];if(s.names)for(var T=0;T<s.names.length;T+=1){var x=s.names[T];s.name?S.push(b[s.name][x]):S.push(b[s.names[T]])}else S.push(b[s.name]);return h.apply(null,S)},k=["v","o","s","i","u","e","p","c","b","t","r","z","a"],f=["i","c","b","a"];C.exports=function(g,s){s=s||{},g.version==null&&(g.version=0),g.name==null&&(g.name=" "),g.media.forEach(function(x){x.payloads==null&&(x.payloads="")});var b=s.outerOrder||k,S=s.innerOrder||f,T=[];return b.forEach(function(x){E[x].forEach(function(O){O.name in g&&g[O.name]!=null?T.push(w(x,O,g)):O.push in g&&g[O.push]!=null&&g[O.push].forEach(function(P){T.push(w(x,O,P))})})}),g.media.forEach(function(x){T.push(w("m",E.m[0],x)),S.forEach(function(O){E[O].forEach(function(P){P.name in x&&x[P.name]!=null?T.push(w(O,P,x)):P.push in x&&x[P.push]!=null&&x[P.push].forEach(function(R){T.push(w(O,P,R))})})})}),T.join(`\r
`)+`\r
`}},7232:function(C,p,o){var E;(function(_,h){var w="function",k="undefined",f="object",g="string",s="major",b="model",S="name",T="type",x="vendor",O="version",P="architecture",R="console",I="mobile",d="tablet",v="smarttv",c="wearable",u="embedded",l="Amazon",m="Apple",D="ASUS",N="BlackBerry",L="Browser",j="Chrome",W="Firefox",$="Google",Z="Huawei",ne="LG",de="Microsoft",ge="Motorola",_e="Opera",Me="Samsung",fe="Sharp",oe="Sony",ve="Xiaomi",we="Zebra",be="Facebook",ht="Chromium OS",xt="Mac OS",Jt=function(Zt){for(var sr={},Ve=0;Ve<Zt.length;Ve++)sr[Zt[Ve].toUpperCase()]=Zt[Ve];return sr},St=function(Zt,sr){return typeof Zt===g&&Pr(sr).indexOf(Pr(Zt))!==-1},Pr=function(Zt){return Zt.toLowerCase()},Qt=function(Zt,sr){if(typeof Zt===g)return Zt=Zt.replace(/^\s\s*/,""),typeof sr===k?Zt:Zt.substring(0,500)},It=function(Zt,sr){for(var Ve,Rr,wr,Ae,Ot,ot,vr=0;vr<sr.length&&!Ot;){var br=sr[vr],Vr=sr[vr+1];for(Ve=Rr=0;Ve<br.length&&!Ot&&br[Ve];)if(Ot=br[Ve++].exec(Zt))for(wr=0;wr<Vr.length;wr++)ot=Ot[++Rr],typeof(Ae=Vr[wr])===f&&Ae.length>0?Ae.length===2?typeof Ae[1]==w?this[Ae[0]]=Ae[1].call(this,ot):this[Ae[0]]=Ae[1]:Ae.length===3?typeof Ae[1]!==w||Ae[1].exec&&Ae[1].test?this[Ae[0]]=ot?ot.replace(Ae[1],Ae[2]):h:this[Ae[0]]=ot?Ae[1].call(this,ot,Ae[2]):h:Ae.length===4&&(this[Ae[0]]=ot?Ae[3].call(this,ot.replace(Ae[1],Ae[2])):h):this[Ae]=ot||h;vr+=2}},jr=function(Zt,sr){for(var Ve in sr)if(typeof sr[Ve]===f&&sr[Ve].length>0){for(var Rr=0;Rr<sr[Ve].length;Rr++)if(St(sr[Ve][Rr],Zt))return Ve==="?"?h:Ve}else if(St(sr[Ve],Zt))return Ve==="?"?h:Ve;return Zt},Nt={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Xt={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[O,[S,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[O,[S,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[S,O],[/opios[\/ ]+([\w\.]+)/i],[O,[S,_e+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[O,[S,_e+" GX"]],[/\bopr\/([\w\.]+)/i],[O,[S,_e]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[O,[S,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[S,O],[/\bddg\/([\w\.]+)/i],[O,[S,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[O,[S,"UC"+L]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[O,[S,"WeChat"]],[/konqueror\/([\w\.]+)/i],[O,[S,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[O,[S,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[O,[S,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[O,[S,"Smart Lenovo "+L]],[/(avast|avg)\/([\w\.]+)/i],[[S,/(.+)/,"$1 Secure "+L],O],[/\bfocus\/([\w\.]+)/i],[O,[S,W+" Focus"]],[/\bopt\/([\w\.]+)/i],[O,[S,_e+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[O,[S,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[O,[S,"Dolphin"]],[/coast\/([\w\.]+)/i],[O,[S,_e+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[O,[S,"MIUI "+L]],[/fxios\/([-\w\.]+)/i],[O,[S,W]],[/\bqihu|(qi?ho?o?|360)browser/i],[[S,"360 "+L]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[S,/(.+)/,"$1 "+L],O],[/samsungbrowser\/([\w\.]+)/i],[O,[S,Me+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[S,/_/g," "],O],[/metasr[\/ ]?([\d\.]+)/i],[O,[S,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[S,"Sogou Mobile"],O],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[S,O],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[S],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[S,be],O],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[S,O],[/\bgsa\/([\w\.]+) .*safari\//i],[O,[S,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[O,[S,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[O,[S,j+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[S,j+" WebView"],O],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[O,[S,"Android "+L]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[S,O],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[O,[S,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[O,S],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[S,[O,jr,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[S,O],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[S,"Netscape"],O],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[O,[S,W+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[S,O],[/(cobalt)\/([\w\.]+)/i],[S,[O,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[P,"amd64"]],[/(ia32(?=;))/i],[[P,Pr]],[/((?:i[346]|x)86)[;\)]/i],[[P,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[P,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[P,"armhf"]],[/windows (ce|mobile); ppc;/i],[[P,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[P,/ower/,"",Pr]],[/(sun4\w)[;\)]/i],[[P,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[P,Pr]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[b,[x,Me],[T,d]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[b,[x,Me],[T,I]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[b,[x,m],[T,I]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[b,[x,m],[T,d]],[/(macintosh);/i],[b,[x,m]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[b,[x,fe],[T,I]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[b,[x,Z],[T,d]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[b,[x,Z],[T,I]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[b,/_/g," "],[x,ve],[T,I]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[b,/_/g," "],[x,ve],[T,d]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[b,[x,"OPPO"],[T,I]],[/\b(opd2\d{3}a?) bui/i],[b,[x,"OPPO"],[T,d]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[b,[x,"Vivo"],[T,I]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[b,[x,"Realme"],[T,I]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[b,[x,ge],[T,I]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[b,[x,ge],[T,d]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[b,[x,ne],[T,d]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[b,[x,ne],[T,I]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[b,[x,"Lenovo"],[T,d]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[b,/_/g," "],[x,"Nokia"],[T,I]],[/(pixel c)\b/i],[b,[x,$],[T,d]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[b,[x,$],[T,I]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[b,[x,oe],[T,I]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[b,"Xperia Tablet"],[x,oe],[T,d]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[b,[x,"OnePlus"],[T,I]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[b,[x,l],[T,d]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[b,/(.+)/g,"Fire Phone $1"],[x,l],[T,I]],[/(playbook);[-\w\),; ]+(rim)/i],[b,x,[T,d]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[b,[x,N],[T,I]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[b,[x,D],[T,d]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[b,[x,D],[T,I]],[/(nexus 9)/i],[b,[x,"HTC"],[T,d]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[x,[b,/_/g," "],[T,I]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[b,[x,"Acer"],[T,d]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[b,[x,"Meizu"],[T,I]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[b,[x,"Ulefone"],[T,I]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[x,b,[T,I]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[x,b,[T,d]],[/(surface duo)/i],[b,[x,de],[T,d]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[b,[x,"Fairphone"],[T,I]],[/(u304aa)/i],[b,[x,"AT&T"],[T,I]],[/\bsie-(\w*)/i],[b,[x,"Siemens"],[T,I]],[/\b(rct\w+) b/i],[b,[x,"RCA"],[T,d]],[/\b(venue[\d ]{2,7}) b/i],[b,[x,"Dell"],[T,d]],[/\b(q(?:mv|ta)\w+) b/i],[b,[x,"Verizon"],[T,d]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[b,[x,"Barnes & Noble"],[T,d]],[/\b(tm\d{3}\w+) b/i],[b,[x,"NuVision"],[T,d]],[/\b(k88) b/i],[b,[x,"ZTE"],[T,d]],[/\b(nx\d{3}j) b/i],[b,[x,"ZTE"],[T,I]],[/\b(gen\d{3}) b.+49h/i],[b,[x,"Swiss"],[T,I]],[/\b(zur\d{3}) b/i],[b,[x,"Swiss"],[T,d]],[/\b((zeki)?tb.*\b) b/i],[b,[x,"Zeki"],[T,d]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[x,"Dragon Touch"],b,[T,d]],[/\b(ns-?\w{0,9}) b/i],[b,[x,"Insignia"],[T,d]],[/\b((nxa|next)-?\w{0,9}) b/i],[b,[x,"NextBook"],[T,d]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[x,"Voice"],b,[T,I]],[/\b(lvtel\-)?(v1[12]) b/i],[[x,"LvTel"],b,[T,I]],[/\b(ph-1) /i],[b,[x,"Essential"],[T,I]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[b,[x,"Envizen"],[T,d]],[/\b(trio[-\w\. ]+) b/i],[b,[x,"MachSpeed"],[T,d]],[/\btu_(1491) b/i],[b,[x,"Rotor"],[T,d]],[/(shield[\w ]+) b/i],[b,[x,"Nvidia"],[T,d]],[/(sprint) (\w+)/i],[x,b,[T,I]],[/(kin\.[onetw]{3})/i],[[b,/\./g," "],[x,de],[T,I]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[b,[x,we],[T,d]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[b,[x,we],[T,I]],[/smart-tv.+(samsung)/i],[x,[T,v]],[/hbbtv.+maple;(\d+)/i],[[b,/^/,"SmartTV"],[x,Me],[T,v]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[x,ne],[T,v]],[/(apple) ?tv/i],[x,[b,m+" TV"],[T,v]],[/crkey/i],[[b,j+"cast"],[x,$],[T,v]],[/droid.+aft(\w+)( bui|\))/i],[b,[x,l],[T,v]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[b,[x,fe],[T,v]],[/(bravia[\w ]+)( bui|\))/i],[b,[x,oe],[T,v]],[/(mitv-\w{5}) bui/i],[b,[x,ve],[T,v]],[/Hbbtv.*(technisat) (.*);/i],[x,b,[T,v]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[x,Qt],[b,Qt],[T,v]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[T,v]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[x,b,[T,R]],[/droid.+; (shield) bui/i],[b,[x,"Nvidia"],[T,R]],[/(playstation [345portablevi]+)/i],[b,[x,oe],[T,R]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[b,[x,de],[T,R]],[/((pebble))app/i],[x,b,[T,c]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[b,[x,m],[T,c]],[/droid.+; (glass) \d/i],[b,[x,$],[T,c]],[/droid.+; (wt63?0{2,3})\)/i],[b,[x,we],[T,c]],[/(quest( \d| pro)?)/i],[b,[x,be],[T,c]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[x,[T,u]],[/(aeobc)\b/i],[b,[x,l],[T,u]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[b,[T,I]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[b,[T,d]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[T,d]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[T,I]],[/(android[-\w\. ]{0,9});.+buil/i],[b,[x,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[O,[S,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[O,[S,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[S,O],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[O,S]],os:[[/microsoft (windows) (vista|xp)/i],[S,O],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[S,[O,jr,Nt]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[O,jr,Nt],[S,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[O,/_/g,"."],[S,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[S,xt],[O,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[O,S],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[S,O],[/\(bb(10);/i],[O,[S,N]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[O,[S,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[O,[S,W+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[O,[S,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[O,[S,"watchOS"]],[/crkey\/([\d\.]+)/i],[O,[S,j+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[S,ht],O],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[S,O],[/(sunos) ?([\w\.\d]*)/i],[[S,"Solaris"],O],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[S,O]]},Mr=function(Zt,sr){if(typeof Zt===f&&(sr=Zt,Zt=h),!(this instanceof Mr))return new Mr(Zt,sr).getResult();var Ve=typeof _!==k&&_.navigator?_.navigator:h,Rr=Zt||(Ve&&Ve.userAgent?Ve.userAgent:""),wr=Ve&&Ve.userAgentData?Ve.userAgentData:h,Ae=sr?function(ot,vr){var br={};for(var Vr in ot)vr[Vr]&&vr[Vr].length%2==0?br[Vr]=vr[Vr].concat(ot[Vr]):br[Vr]=ot[Vr];return br}(Xt,sr):Xt,Ot=Ve&&Ve.userAgent==Rr;return this.getBrowser=function(){var ot,vr={};return vr[S]=h,vr[O]=h,It.call(vr,Rr,Ae.browser),vr[s]=typeof(ot=vr[O])===g?ot.replace(/[^\d\.]/g,"").split(".")[0]:h,Ot&&Ve&&Ve.brave&&typeof Ve.brave.isBrave==w&&(vr[S]="Brave"),vr},this.getCPU=function(){var ot={};return ot[P]=h,It.call(ot,Rr,Ae.cpu),ot},this.getDevice=function(){var ot={};return ot[x]=h,ot[b]=h,ot[T]=h,It.call(ot,Rr,Ae.device),Ot&&!ot[T]&&wr&&wr.mobile&&(ot[T]=I),Ot&&ot[b]=="Macintosh"&&Ve&&typeof Ve.standalone!==k&&Ve.maxTouchPoints&&Ve.maxTouchPoints>2&&(ot[b]="iPad",ot[T]=d),ot},this.getEngine=function(){var ot={};return ot[S]=h,ot[O]=h,It.call(ot,Rr,Ae.engine),ot},this.getOS=function(){var ot={};return ot[S]=h,ot[O]=h,It.call(ot,Rr,Ae.os),Ot&&!ot[S]&&wr&&wr.platform&&wr.platform!="Unknown"&&(ot[S]=wr.platform.replace(/chrome os/i,ht).replace(/macos/i,xt)),ot},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return Rr},this.setUA=function(ot){return Rr=typeof ot===g&&ot.length>500?Qt(ot,500):ot,this},this.setUA(Rr),this};Mr.VERSION="1.0.38",Mr.BROWSER=Jt([S,O,s]),Mr.CPU=Jt([P]),Mr.DEVICE=Jt([b,x,T,R,I,v,d,c,u]),Mr.ENGINE=Mr.OS=Jt([S,O]),typeof p!==k?(C.exports&&(p=C.exports=Mr),p.UAParser=Mr):o.amdO?(E=(function(){return Mr}).call(p,o,p,C))===h||(C.exports=E):typeof _!==k&&(_.UAParser=Mr);var Br=typeof _!==k&&(_.jQuery||_.Zepto);if(Br&&!Br.ua){var Fr=new Mr;Br.ua=Fr.getResult(),Br.ua.get=function(){return Fr.getUA()},Br.ua.set=function(Zt){Fr.setUA(Zt);var sr=Fr.getResult();for(var Ve in sr)Br.ua[Ve]=sr[Ve]}}})(typeof window=="object"?window:this)},952:(C,p,o)=>{var E;if(typeof globalThis=="object")E=globalThis;else try{E=o(4903)}catch{}finally{if(E||typeof window>"u"||(E=window),!E)throw new Error("Could not determine global this")}var _=E.WebSocket||E.MozWebSocket,h=o(9840);function w(k,f){return f?new _(k,f):new _(k)}_&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(k){Object.defineProperty(w,k,{get:function(){return _[k]}})}),C.exports={w3cwebsocket:_?w:null,version:h}},9840:(C,p,o)=>{C.exports=o(9003).version},8624:(C,p,o)=>{o.r(p),o.d(p,{DOMException:()=>c,Headers:()=>s,Request:()=>R,Response:()=>d,fetch:()=>u});var E=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||o.g!==void 0&&o.g||{},_={searchParams:"URLSearchParams"in E,iterable:"Symbol"in E&&"iterator"in Symbol,blob:"FileReader"in E&&"Blob"in E&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in E,arrayBuffer:"ArrayBuffer"in E};if(_.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],w=ArrayBuffer.isView||function(l){return l&&h.indexOf(Object.prototype.toString.call(l))>-1};function k(l){if(typeof l!="string"&&(l=String(l)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(l)||l==="")throw new TypeError('Invalid character in header field name: "'+l+'"');return l.toLowerCase()}function f(l){return typeof l!="string"&&(l=String(l)),l}function g(l){var m={next:function(){var D=l.shift();return{done:D===void 0,value:D}}};return _.iterable&&(m[Symbol.iterator]=function(){return m}),m}function s(l){this.map={},l instanceof s?l.forEach(function(m,D){this.append(D,m)},this):Array.isArray(l)?l.forEach(function(m){if(m.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+m.length);this.append(m[0],m[1])},this):l&&Object.getOwnPropertyNames(l).forEach(function(m){this.append(m,l[m])},this)}function b(l){if(!l._noBody)return l.bodyUsed?Promise.reject(new TypeError("Already read")):void(l.bodyUsed=!0)}function S(l){return new Promise(function(m,D){l.onload=function(){m(l.result)},l.onerror=function(){D(l.error)}})}function T(l){var m=new FileReader,D=S(m);return m.readAsArrayBuffer(l),D}function x(l){if(l.slice)return l.slice(0);var m=new Uint8Array(l.byteLength);return m.set(new Uint8Array(l)),m.buffer}function O(){return this.bodyUsed=!1,this._initBody=function(l){var m;this.bodyUsed=this.bodyUsed,this._bodyInit=l,l?typeof l=="string"?this._bodyText=l:_.blob&&Blob.prototype.isPrototypeOf(l)?this._bodyBlob=l:_.formData&&FormData.prototype.isPrototypeOf(l)?this._bodyFormData=l:_.searchParams&&URLSearchParams.prototype.isPrototypeOf(l)?this._bodyText=l.toString():_.arrayBuffer&&_.blob&&(m=l)&&DataView.prototype.isPrototypeOf(m)?(this._bodyArrayBuffer=x(l.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):_.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(l)||w(l))?this._bodyArrayBuffer=x(l):this._bodyText=l=Object.prototype.toString.call(l):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof l=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):_.searchParams&&URLSearchParams.prototype.isPrototypeOf(l)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},_.blob&&(this.blob=function(){var l=b(this);if(l)return l;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var l=b(this);return l||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(_.blob)return this.blob().then(T);throw new Error("could not read as ArrayBuffer")},this.text=function(){var l,m,D,N,L,j=b(this);if(j)return j;if(this._bodyBlob)return l=this._bodyBlob,m=new FileReader,D=S(m),N=/charset=([A-Za-z0-9_-]+)/.exec(l.type),L=N?N[1]:"utf-8",m.readAsText(l,L),D;if(this._bodyArrayBuffer)return Promise.resolve(function(W){for(var $=new Uint8Array(W),Z=new Array($.length),ne=0;ne<$.length;ne++)Z[ne]=String.fromCharCode($[ne]);return Z.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},_.formData&&(this.formData=function(){return this.text().then(I)}),this.json=function(){return this.text().then(JSON.parse)},this}s.prototype.append=function(l,m){l=k(l),m=f(m);var D=this.map[l];this.map[l]=D?D+", "+m:m},s.prototype.delete=function(l){delete this.map[k(l)]},s.prototype.get=function(l){return l=k(l),this.has(l)?this.map[l]:null},s.prototype.has=function(l){return this.map.hasOwnProperty(k(l))},s.prototype.set=function(l,m){this.map[k(l)]=f(m)},s.prototype.forEach=function(l,m){for(var D in this.map)this.map.hasOwnProperty(D)&&l.call(m,this.map[D],D,this)},s.prototype.keys=function(){var l=[];return this.forEach(function(m,D){l.push(D)}),g(l)},s.prototype.values=function(){var l=[];return this.forEach(function(m){l.push(m)}),g(l)},s.prototype.entries=function(){var l=[];return this.forEach(function(m,D){l.push([D,m])}),g(l)},_.iterable&&(s.prototype[Symbol.iterator]=s.prototype.entries);var P=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function R(l,m){if(!(this instanceof R))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var D,N,L=(m=m||{}).body;if(l instanceof R){if(l.bodyUsed)throw new TypeError("Already read");this.url=l.url,this.credentials=l.credentials,m.headers||(this.headers=new s(l.headers)),this.method=l.method,this.mode=l.mode,this.signal=l.signal,L||l._bodyInit==null||(L=l._bodyInit,l.bodyUsed=!0)}else this.url=String(l);if(this.credentials=m.credentials||this.credentials||"same-origin",!m.headers&&this.headers||(this.headers=new s(m.headers)),this.method=(D=m.method||this.method||"GET",N=D.toUpperCase(),P.indexOf(N)>-1?N:D),this.mode=m.mode||this.mode||null,this.signal=m.signal||this.signal||function(){if("AbortController"in E)return new AbortController().signal}(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&L)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(L),!(this.method!=="GET"&&this.method!=="HEAD"||m.cache!=="no-store"&&m.cache!=="no-cache")){var j=/([?&])_=[^&]*/;j.test(this.url)?this.url=this.url.replace(j,"$1_="+new Date().getTime()):this.url+=(/\?/.test(this.url)?"&":"?")+"_="+new Date().getTime()}}function I(l){var m=new FormData;return l.trim().split("&").forEach(function(D){if(D){var N=D.split("="),L=N.shift().replace(/\+/g," "),j=N.join("=").replace(/\+/g," ");m.append(decodeURIComponent(L),decodeURIComponent(j))}}),m}function d(l,m){if(!(this instanceof d))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(m||(m={}),this.type="default",this.status=m.status===void 0?200:m.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=m.statusText===void 0?"":""+m.statusText,this.headers=new s(m.headers),this.url=m.url||"",this._initBody(l)}R.prototype.clone=function(){return new R(this,{body:this._bodyInit})},O.call(R.prototype),O.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},d.error=function(){var l=new d(null,{status:200,statusText:""});return l.ok=!1,l.status=0,l.type="error",l};var v=[301,302,303,307,308];d.redirect=function(l,m){if(v.indexOf(m)===-1)throw new RangeError("Invalid status code");return new d(null,{status:m,headers:{location:l}})};var c=E.DOMException;try{new c}catch{(c=function(m,D){this.message=m,this.name=D;var N=Error(m);this.stack=N.stack}).prototype=Object.create(Error.prototype),c.prototype.constructor=c}function u(l,m){return new Promise(function(D,N){var L=new R(l,m);if(L.signal&&L.signal.aborted)return N(new c("Aborted","AbortError"));var j=new XMLHttpRequest;function W(){j.abort()}if(j.onload=function(){var Z,ne,de={statusText:j.statusText,headers:(Z=j.getAllResponseHeaders()||"",ne=new s,Z.replace(/\r?\n[\t ]+/g," ").split("\r").map(function(_e){return _e.indexOf(`
`)===0?_e.substr(1,_e.length):_e}).forEach(function(_e){var Me=_e.split(":"),fe=Me.shift().trim();if(fe){var oe=Me.join(":").trim();try{ne.append(fe,oe)}catch(ve){console.warn("Response "+ve.message)}}}),ne)};L.url.indexOf("file://")===0&&(j.status<200||j.status>599)?de.status=200:de.status=j.status,de.url="responseURL"in j?j.responseURL:de.headers.get("X-Request-URL");var ge="response"in j?j.response:j.responseText;setTimeout(function(){D(new d(ge,de))},0)},j.onerror=function(){setTimeout(function(){N(new TypeError("Network request failed"))},0)},j.ontimeout=function(){setTimeout(function(){N(new TypeError("Network request timed out"))},0)},j.onabort=function(){setTimeout(function(){N(new c("Aborted","AbortError"))},0)},j.open(L.method,function(Z){try{return Z===""&&E.location.href?E.location.href:Z}catch{return Z}}(L.url),!0),L.credentials==="include"?j.withCredentials=!0:L.credentials==="omit"&&(j.withCredentials=!1),"responseType"in j&&(_.blob?j.responseType="blob":_.arrayBuffer&&(j.responseType="arraybuffer")),m&&typeof m.headers=="object"&&!(m.headers instanceof s||E.Headers&&m.headers instanceof E.Headers)){var $=[];Object.getOwnPropertyNames(m.headers).forEach(function(Z){$.push(k(Z)),j.setRequestHeader(Z,f(m.headers[Z]))}),L.headers.forEach(function(Z,ne){$.indexOf(ne)===-1&&j.setRequestHeader(ne,Z)})}else L.headers.forEach(function(Z,ne){j.setRequestHeader(ne,Z)});L.signal&&(L.signal.addEventListener("abort",W),j.onreadystatechange=function(){j.readyState===4&&L.signal.removeEventListener("abort",W)}),j.send(L._bodyInit===void 0?null:L._bodyInit)})}u.polyfill=!0,E.fetch||(E.fetch=u,E.Headers=s,E.Request=R,E.Response=d)},477:()=>{},4633:(C,p,o)=>{var E=o(3738).default;function _(){C.exports=_=function(){return w},C.exports.__esModule=!0,C.exports.default=C.exports;var h,w={},k=Object.prototype,f=k.hasOwnProperty,g=Object.defineProperty||function(fe,oe,ve){fe[oe]=ve.value},s=typeof Symbol=="function"?Symbol:{},b=s.iterator||"@@iterator",S=s.asyncIterator||"@@asyncIterator",T=s.toStringTag||"@@toStringTag";function x(fe,oe,ve){return Object.defineProperty(fe,oe,{value:ve,enumerable:!0,configurable:!0,writable:!0}),fe[oe]}try{x({},"")}catch{x=function(oe,ve,we){return oe[ve]=we}}function O(fe,oe,ve,we){var be=oe&&oe.prototype instanceof u?oe:u,ht=Object.create(be.prototype),xt=new _e(we||[]);return g(ht,"_invoke",{value:Z(fe,ve,xt)}),ht}function P(fe,oe,ve){try{return{type:"normal",arg:fe.call(oe,ve)}}catch(we){return{type:"throw",arg:we}}}w.wrap=O;var R="suspendedStart",I="suspendedYield",d="executing",v="completed",c={};function u(){}function l(){}function m(){}var D={};x(D,b,function(){return this});var N=Object.getPrototypeOf,L=N&&N(N(Me([])));L&&L!==k&&f.call(L,b)&&(D=L);var j=m.prototype=u.prototype=Object.create(D);function W(fe){["next","throw","return"].forEach(function(oe){x(fe,oe,function(ve){return this._invoke(oe,ve)})})}function $(fe,oe){function ve(be,ht,xt,Jt){var St=P(fe[be],fe,ht);if(St.type!=="throw"){var Pr=St.arg,Qt=Pr.value;return Qt&&E(Qt)=="object"&&f.call(Qt,"__await")?oe.resolve(Qt.__await).then(function(It){ve("next",It,xt,Jt)},function(It){ve("throw",It,xt,Jt)}):oe.resolve(Qt).then(function(It){Pr.value=It,xt(Pr)},function(It){return ve("throw",It,xt,Jt)})}Jt(St.arg)}var we;g(this,"_invoke",{value:function(be,ht){function xt(){return new oe(function(Jt,St){ve(be,ht,Jt,St)})}return we=we?we.then(xt,xt):xt()}})}function Z(fe,oe,ve){var we=R;return function(be,ht){if(we===d)throw Error("Generator is already running");if(we===v){if(be==="throw")throw ht;return{value:h,done:!0}}for(ve.method=be,ve.arg=ht;;){var xt=ve.delegate;if(xt){var Jt=ne(xt,ve);if(Jt){if(Jt===c)continue;return Jt}}if(ve.method==="next")ve.sent=ve._sent=ve.arg;else if(ve.method==="throw"){if(we===R)throw we=v,ve.arg;ve.dispatchException(ve.arg)}else ve.method==="return"&&ve.abrupt("return",ve.arg);we=d;var St=P(fe,oe,ve);if(St.type==="normal"){if(we=ve.done?v:I,St.arg===c)continue;return{value:St.arg,done:ve.done}}St.type==="throw"&&(we=v,ve.method="throw",ve.arg=St.arg)}}}function ne(fe,oe){var ve=oe.method,we=fe.iterator[ve];if(we===h)return oe.delegate=null,ve==="throw"&&fe.iterator.return&&(oe.method="return",oe.arg=h,ne(fe,oe),oe.method==="throw")||ve!=="return"&&(oe.method="throw",oe.arg=new TypeError("The iterator does not provide a '"+ve+"' method")),c;var be=P(we,fe.iterator,oe.arg);if(be.type==="throw")return oe.method="throw",oe.arg=be.arg,oe.delegate=null,c;var ht=be.arg;return ht?ht.done?(oe[fe.resultName]=ht.value,oe.next=fe.nextLoc,oe.method!=="return"&&(oe.method="next",oe.arg=h),oe.delegate=null,c):ht:(oe.method="throw",oe.arg=new TypeError("iterator result is not an object"),oe.delegate=null,c)}function de(fe){var oe={tryLoc:fe[0]};1 in fe&&(oe.catchLoc=fe[1]),2 in fe&&(oe.finallyLoc=fe[2],oe.afterLoc=fe[3]),this.tryEntries.push(oe)}function ge(fe){var oe=fe.completion||{};oe.type="normal",delete oe.arg,fe.completion=oe}function _e(fe){this.tryEntries=[{tryLoc:"root"}],fe.forEach(de,this),this.reset(!0)}function Me(fe){if(fe||fe===""){var oe=fe[b];if(oe)return oe.call(fe);if(typeof fe.next=="function")return fe;if(!isNaN(fe.length)){var ve=-1,we=function be(){for(;++ve<fe.length;)if(f.call(fe,ve))return be.value=fe[ve],be.done=!1,be;return be.value=h,be.done=!0,be};return we.next=we}}throw new TypeError(E(fe)+" is not iterable")}return l.prototype=m,g(j,"constructor",{value:m,configurable:!0}),g(m,"constructor",{value:l,configurable:!0}),l.displayName=x(m,T,"GeneratorFunction"),w.isGeneratorFunction=function(fe){var oe=typeof fe=="function"&&fe.constructor;return!!oe&&(oe===l||(oe.displayName||oe.name)==="GeneratorFunction")},w.mark=function(fe){return Object.setPrototypeOf?Object.setPrototypeOf(fe,m):(fe.__proto__=m,x(fe,T,"GeneratorFunction")),fe.prototype=Object.create(j),fe},w.awrap=function(fe){return{__await:fe}},W($.prototype),x($.prototype,S,function(){return this}),w.AsyncIterator=$,w.async=function(fe,oe,ve,we,be){be===void 0&&(be=Promise);var ht=new $(O(fe,oe,ve,we),be);return w.isGeneratorFunction(oe)?ht:ht.next().then(function(xt){return xt.done?xt.value:ht.next()})},W(j),x(j,T,"Generator"),x(j,b,function(){return this}),x(j,"toString",function(){return"[object Generator]"}),w.keys=function(fe){var oe=Object(fe),ve=[];for(var we in oe)ve.push(we);return ve.reverse(),function be(){for(;ve.length;){var ht=ve.pop();if(ht in oe)return be.value=ht,be.done=!1,be}return be.done=!0,be}},w.values=Me,_e.prototype={constructor:_e,reset:function(fe){if(this.prev=0,this.next=0,this.sent=this._sent=h,this.done=!1,this.delegate=null,this.method="next",this.arg=h,this.tryEntries.forEach(ge),!fe)for(var oe in this)oe.charAt(0)==="t"&&f.call(this,oe)&&!isNaN(+oe.slice(1))&&(this[oe]=h)},stop:function(){this.done=!0;var fe=this.tryEntries[0].completion;if(fe.type==="throw")throw fe.arg;return this.rval},dispatchException:function(fe){if(this.done)throw fe;var oe=this;function ve(St,Pr){return ht.type="throw",ht.arg=fe,oe.next=St,Pr&&(oe.method="next",oe.arg=h),!!Pr}for(var we=this.tryEntries.length-1;we>=0;--we){var be=this.tryEntries[we],ht=be.completion;if(be.tryLoc==="root")return ve("end");if(be.tryLoc<=this.prev){var xt=f.call(be,"catchLoc"),Jt=f.call(be,"finallyLoc");if(xt&&Jt){if(this.prev<be.catchLoc)return ve(be.catchLoc,!0);if(this.prev<be.finallyLoc)return ve(be.finallyLoc)}else if(xt){if(this.prev<be.catchLoc)return ve(be.catchLoc,!0)}else{if(!Jt)throw Error("try statement without catch or finally");if(this.prev<be.finallyLoc)return ve(be.finallyLoc)}}}},abrupt:function(fe,oe){for(var ve=this.tryEntries.length-1;ve>=0;--ve){var we=this.tryEntries[ve];if(we.tryLoc<=this.prev&&f.call(we,"finallyLoc")&&this.prev<we.finallyLoc){var be=we;break}}be&&(fe==="break"||fe==="continue")&&be.tryLoc<=oe&&oe<=be.finallyLoc&&(be=null);var ht=be?be.completion:{};return ht.type=fe,ht.arg=oe,be?(this.method="next",this.next=be.finallyLoc,c):this.complete(ht)},complete:function(fe,oe){if(fe.type==="throw")throw fe.arg;return fe.type==="break"||fe.type==="continue"?this.next=fe.arg:fe.type==="return"?(this.rval=this.arg=fe.arg,this.method="return",this.next="end"):fe.type==="normal"&&oe&&(this.next=oe),c},finish:function(fe){for(var oe=this.tryEntries.length-1;oe>=0;--oe){var ve=this.tryEntries[oe];if(ve.finallyLoc===fe)return this.complete(ve.completion,ve.afterLoc),ge(ve),c}},catch:function(fe){for(var oe=this.tryEntries.length-1;oe>=0;--oe){var ve=this.tryEntries[oe];if(ve.tryLoc===fe){var we=ve.completion;if(we.type==="throw"){var be=we.arg;ge(ve)}return be}}throw Error("illegal catch attempt")},delegateYield:function(fe,oe,ve){return this.delegate={iterator:Me(fe),resultName:oe,nextLoc:ve},this.method==="next"&&(this.arg=h),c}},w}C.exports=_,C.exports.__esModule=!0,C.exports.default=C.exports},3738:C=>{function p(o){return C.exports=p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},C.exports.__esModule=!0,C.exports.default=C.exports,p(o)}C.exports=p,C.exports.__esModule=!0,C.exports.default=C.exports},4756:(C,p,o)=>{var E=o(4633)();C.exports=E;try{regeneratorRuntime=E}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=E:Function("r","regeneratorRuntime = r")(E)}},3145:(C,p,o)=>{function E(_,h){(h==null||h>_.length)&&(h=_.length);for(var w=0,k=Array(h);w<h;w++)k[w]=_[w];return k}o.d(p,{A:()=>E})},467:(C,p,o)=>{function E(h,w,k,f,g,s,b){try{var S=h[s](b),T=S.value}catch(x){return void k(x)}S.done?w(T):Promise.resolve(T).then(f,g)}function _(h){return function(){var w=this,k=arguments;return new Promise(function(f,g){var s=h.apply(w,k);function b(T){E(s,f,g,b,S,"next",T)}function S(T){E(s,f,g,b,S,"throw",T)}b(void 0)})}}o.d(p,{A:()=>_})},3029:(C,p,o)=>{function E(_,h){if(!(_ instanceof h))throw new TypeError("Cannot call a class as a function")}o.d(p,{A:()=>E})},2901:(C,p,o)=>{o.d(p,{A:()=>h});var E=o(816);function _(w,k){for(var f=0;f<k.length;f++){var g=k[f];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(w,(0,E.A)(g.key),g)}}function h(w,k,f){return k&&_(w.prototype,k),f&&_(w,f),Object.defineProperty(w,"prototype",{writable:!1}),w}},4467:(C,p,o)=>{o.d(p,{A:()=>_});var E=o(816);function _(h,w,k){return(w=(0,E.A)(w))in h?Object.defineProperty(h,w,{value:k,enumerable:!0,configurable:!0,writable:!0}):h[w]=k,h}},296:(C,p,o)=>{o.d(p,{A:()=>_});var E=o(7800);function _(h,w){return function(k){if(Array.isArray(k))return k}(h)||function(k,f){var g=k==null?null:typeof Symbol<"u"&&k[Symbol.iterator]||k["@@iterator"];if(g!=null){var s,b,S,T,x=[],O=!0,P=!1;try{if(S=(g=g.call(k)).next,f===0){if(Object(g)!==g)return;O=!1}else for(;!(O=(s=S.call(g)).done)&&(x.push(s.value),x.length!==f);O=!0);}catch(R){P=!0,b=R}finally{try{if(!O&&g.return!=null&&(T=g.return(),Object(T)!==T))return}finally{if(P)throw b}}return x}}(h,w)||(0,E.A)(h,w)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},5458:(C,p,o)=>{o.d(p,{A:()=>h});var E=o(3145),_=o(7800);function h(w){return function(k){if(Array.isArray(k))return(0,E.A)(k)}(w)||function(k){if(typeof Symbol<"u"&&k[Symbol.iterator]!=null||k["@@iterator"]!=null)return Array.from(k)}(w)||(0,_.A)(w)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}},816:(C,p,o)=>{o.d(p,{A:()=>_});var E=o(2284);function _(h){var w=function(k,f){if((0,E.A)(k)!="object"||!k)return k;var g=k[Symbol.toPrimitive];if(g!==void 0){var s=g.call(k,f||"default");if((0,E.A)(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(k)}(h,"string");return(0,E.A)(w)=="symbol"?w:w+""}},2284:(C,p,o)=>{function E(_){return E=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},E(_)}o.d(p,{A:()=>E})},7800:(C,p,o)=>{o.d(p,{A:()=>_});var E=o(3145);function _(h,w){if(h){if(typeof h=="string")return(0,E.A)(h,w);var k={}.toString.call(h).slice(8,-1);return k==="Object"&&h.constructor&&(k=h.constructor.name),k==="Map"||k==="Set"?Array.from(h):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?(0,E.A)(h,w):void 0}}},7949:C=>{C.exports=JSON.parse('{"name":"protoo-client","version":"4.0.6","description":"protoo JavaScript client module","author":"Iñaki Baz Castillo <ibc@aliax.net>","homepage":"https://protoo.versatica.com","license":"MIT","repository":{"type":"git","url":"https://github.com/ibc/protoo.git"},"main":"lib/index.js","keywords":["nodejs","browser","websocket"],"engines":{"node":">=8.0.0"},"scripts":{"lint":"eslint -c .eslintrc.js lib"},"dependencies":{"debug":"^4.3.1","events":"^3.2.0","retry":"^0.12.0"},"devDependencies":{"eslint":"^5.16.0"},"optionalDependencies":{"websocket":"^1.0.33"}}')},9003:C=>{C.exports={version:"1.0.35"}}},i={};function a(C){var p=i[C];if(p!==void 0)return p.exports;var o=i[C]={exports:{}};return n[C].call(o.exports,o,o.exports,a),o.exports}a.amdO={},a.n=C=>{var p=C&&C.__esModule?()=>C.default:()=>C;return a.d(p,{a:p}),p},a.d=(C,p)=>{for(var o in p)a.o(p,o)&&!a.o(C,o)&&Object.defineProperty(C,o,{enumerable:!0,get:p[o]})},a.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),a.o=(C,p)=>Object.prototype.hasOwnProperty.call(C,p),a.r=C=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})};var y={};return(()=>{a.r(y),a.d(y,{CameraDeviceInfo:()=>wc,DeviceInfo:()=>ao,MicrophoneDeviceInfo:()=>bc,VideoSDK:()=>Kl,ZujoSDK:()=>cS});var C=a(2284),p=a(467),o=a(3029),E=a(2901),_=a(4467),h=a(4756),w=a.n(h),k=a(6880),f=a.n(k);function g(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function s(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?g(Object(B),!0).forEach(function(q){(0,_.A)(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):g(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}function b(M){return"Minified Redux error #"+M+"; visit https://redux.js.org/Errors?code="+M+" for the full message or use the non-minified dev environment for full errors. "}var S=typeof Symbol=="function"&&Symbol.observable||"@@observable",T=function(){return Math.random().toString(36).substring(7).split("").join(".")},x={INIT:"@@redux/INIT"+T(),REPLACE:"@@redux/REPLACE"+T(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+T()}};function O(M){if(typeof M!="object"||M===null)return!1;for(var A=M;Object.getPrototypeOf(A)!==null;)A=Object.getPrototypeOf(A);return Object.getPrototypeOf(M)===A}function P(M,A,B){var q;if(typeof A=="function"&&typeof B=="function"||typeof B=="function"&&typeof arguments[3]=="function")throw new Error(b(0));if(typeof A=="function"&&B===void 0&&(B=A,A=void 0),B!==void 0){if(typeof B!="function")throw new Error(b(1));return B(P)(M,A)}if(typeof M!="function")throw new Error(b(2));var ee=M,te=A,ce=[],le=ce,V=!1;function K(){le===ce&&(le=ce.slice())}function J(){if(V)throw new Error(b(3));return te}function Q(Le){if(typeof Le!="function")throw new Error(b(4));if(V)throw new Error(b(5));var at=!0;return K(),le.push(Le),function(){if(at){if(V)throw new Error(b(6));at=!1,K();var Ce=le.indexOf(Le);le.splice(Ce,1),ce=null}}}function Te(Le){if(!O(Le))throw new Error(b(7));if(Le.type===void 0)throw new Error(b(8));if(V)throw new Error(b(9));try{V=!0,te=ee(te,Le)}finally{V=!1}for(var at=ce=le,Ce=0;Ce<at.length;Ce++)(0,at[Ce])();return Le}return Te({type:x.INIT}),(q={dispatch:Te,subscribe:Q,getState:J,replaceReducer:function(Le){if(typeof Le!="function")throw new Error(b(10));ee=Le,Te({type:x.REPLACE})}})[S]=function(){var Le,at=Q;return(Le={subscribe:function(Ce){if(typeof Ce!="object"||Ce===null)throw new Error(b(11));function Qe(){Ce.next&&Ce.next(J())}return Qe(),{unsubscribe:at(Qe)}}})[S]=function(){return this},Le},q}function R(){for(var M=arguments.length,A=new Array(M),B=0;B<M;B++)A[B]=arguments[B];return A.length===0?function(q){return q}:A.length===1?A[0]:A.reduce(function(q,ee){return function(){return q(ee.apply(void 0,arguments))}})}function I(){for(var M=arguments.length,A=new Array(M),B=0;B<M;B++)A[B]=arguments[B];return function(q){return function(){var ee=q.apply(void 0,arguments),te=function(){throw new Error(b(15))},ce={getState:ee.getState,dispatch:function(){return te.apply(void 0,arguments)}},le=A.map(function(V){return V(ce)});return te=R.apply(void 0,le)(ee.dispatch),s(s({},ee),{},{dispatch:te})}}}function d(M){return function(A){var B=A.dispatch,q=A.getState;return function(ee){return function(te){return typeof te=="function"?te(B,q,M):ee(te)}}}}var v=d();v.withExtraArgument=d;const c=v;var u=a(2211),l=a.n(u);function m(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function D(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?m(Object(B),!0).forEach(function(q){(0,_.A)(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):m(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}var N={url:null,state:"new",activeSpeakerId:null,statsPeerId:null,faceDetection:!1};const L=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:N,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"SET_ROOM_URL":var B=A.payload.url;return D(D({},M),{},{url:B});case"SET_ROOM_STATE":var q=A.payload.state;return D(D({},M),{},q==="connected"?{state:q}:{state:q,activeSpeakerId:null,statsPeerId:null});case"SET_ROOM_ACTIVE_SPEAKER":var ee=A.payload.peerId;return D(D({},M),{},{activeSpeakerId:ee});case"SET_ROOM_STATS_PEER_ID":var te=A.payload.peerId;return M.statsPeerId===te?D(D({},M),{},{statsPeerId:null}):D(D({},M),{},{statsPeerId:te});case"SET_FACE_DETECTION":var ce=A.payload;return D(D({},M),{},{faceDetection:ce});case"REMOVE_PEER":var le=A.payload.peerId,V=D({},M);return le&&le===M.activeSpeakerId&&(V.activeSpeakerId=null),le&&le===M.statsPeerId&&(V.statsPeerId=null),V;default:return M}};function j(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function W(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?j(Object(B),!0).forEach(function(q){(0,_.A)(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):j(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}var $={id:null,displayName:null,displayNameSet:!1,device:null,canSendMic:!1,canSendWebcam:!1,canChangeWebcam:!1,webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1};const Z=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:$,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"SET_ROOM_STATE":return A.payload.state==="closed"?W(W({},M),{},{webcamInProgress:!1,shareInProgress:!1,audioOnly:!1,audioOnlyInProgress:!1,audioMuted:!1,restartIceInProgress:!1}):M;case"SET_ME":var B=A.payload,q=B.peerId,ee=B.displayName,te=B.displayNameSet,ce=B.device;return W(W({},M),{},{id:q,displayName:ee,displayNameSet:te,device:ce});case"SET_MEDIA_CAPABILITIES":var le=A.payload,V=le.canSendMic,K=le.canSendWebcam;return W(W({},M),{},{canSendMic:V,canSendWebcam:K});case"SET_CAN_CHANGE_WEBCAM":var J=A.payload;return W(W({},M),{},{canChangeWebcam:J});case"SET_WEBCAM_IN_PROGRESS":var Q=A.payload.flag;return W(W({},M),{},{webcamInProgress:Q});case"SET_SHARE_IN_PROGRESS":var Te=A.payload.flag;return W(W({},M),{},{shareInProgress:Te});case"SET_DISPLAY_NAME":var Le=A.payload.displayName;return Le||(Le=M.displayName),W(W({},M),{},{displayName:Le,displayNameSet:!0});case"SET_AUDIO_ONLY_STATE":var at=A.payload.enabled;return W(W({},M),{},{audioOnly:at});case"SET_AUDIO_ONLY_IN_PROGRESS":var Ce=A.payload.flag;return W(W({},M),{},{audioOnlyInProgress:Ce});case"SET_AUDIO_MUTED_STATE":var Qe=A.payload.enabled;return W(W({},M),{},{audioMuted:Qe});case"SET_RESTART_ICE_IN_PROGRESS":var Oe=A.payload.flag;return W(W({},M),{},{restartIceInProgress:Oe});default:return M}};function ne(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function de(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?ne(Object(B),!0).forEach(function(q){(0,_.A)(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):ne(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}var ge={};const _e=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ge,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"SET_ROOM_STATE":return A.payload.state==="closed"?{}:M;case"ADD_PRODUCER":var B=A.payload.producer;return de(de({},M),{},(0,_.A)({},B.id,B));case"REMOVE_PRODUCER":var q=A.payload.producerId,ee=de({},M);return delete ee[q],ee;case"SET_PRODUCER_PAUSED":var te=A.payload.producerId,ce=de(de({},M[te]),{},{paused:!0});return de(de({},M),{},(0,_.A)({},te,ce));case"SET_PRODUCER_RESUMED":var le=A.payload.producerId,V=de(de({},M[le]),{},{paused:!1});return de(de({},M),{},(0,_.A)({},le,V));case"SET_PRODUCER_TRACK":var K=A.payload,J=K.producerId,Q=K.track,Te=de(de({},M[J]),{},{track:Q});return de(de({},M),{},(0,_.A)({},J,Te));case"SET_PRODUCER_SCORE":var Le=A.payload,at=Le.producerId,Ce=Le.score,Qe=M[at];if(!Qe)return M;var Oe=de(de({},Qe),{},{score:Ce});return de(de({},M),{},(0,_.A)({},at,Oe));default:return M}};function Me(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function fe(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?Me(Object(B),!0).forEach(function(q){(0,_.A)(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):Me(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}var oe={};const ve=function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oe,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"SET_ROOM_STATE":return A.payload.state==="closed"?{}:M;case"ADD_DATA_PRODUCER":var B=A.payload.dataProducer;return fe(fe({},M),{},(0,_.A)({},B.id,B));case"REMOVE_DATA_PRODUCER":var q=A.payload.dataProducerId,ee=fe({},M);return delete ee[q],ee;default:return M}};var we=a(5458);function be(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function ht(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?be(Object(B),!0).forEach(function(q){(0,_.A)(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):be(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}var xt={};function Jt(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function St(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?Jt(Object(B),!0).forEach(function(q){(0,_.A)(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):Jt(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}var Pr={};function Qt(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function It(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?Qt(Object(B),!0).forEach(function(q){(0,_.A)(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):Qt(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}var jr={},Nt=[];const Xt=function(M){for(var A=Object.keys(M),B={},q=0;q<A.length;q++){var ee=A[q];typeof M[ee]=="function"&&(B[ee]=M[ee])}var te,ce=Object.keys(B);try{(function(le){Object.keys(le).forEach(function(V){var K=le[V];if(K(void 0,{type:x.INIT})===void 0)throw new Error(b(12));if(K(void 0,{type:x.PROBE_UNKNOWN_ACTION()})===void 0)throw new Error(b(13))})})(B)}catch(le){te=le}return function(le,V){if(le===void 0&&(le={}),te)throw te;for(var K=!1,J={},Q=0;Q<ce.length;Q++){var Te=ce[Q],Le=B[Te],at=le[Te],Ce=Le(at,V);if(Ce===void 0)throw V&&V.type,new Error(b(14));J[Te]=Ce,K=K||Ce!==at}return(K=K||ce.length!==Object.keys(le).length)?J:le}}({room:L,me:Z,producers:_e,dataProducers:ve,peers:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xt,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"SET_ROOM_STATE":return A.payload.state==="closed"?{}:M;case"ADD_PEER":var B=A.payload.peer;return ht(ht({},M),{},(0,_.A)({},B.id,B));case"REMOVE_PEER":var q=A.payload.peerId,ee=ht({},M);return delete ee[q],ee;case"SET_PEER_DISPLAY_NAME":var te=A.payload,ce=te.displayName,le=M[te.peerId];if(!le)throw new Error("no Peer found");var V=ht(ht({},le),{},{displayName:ce});return ht(ht({},M),{},(0,_.A)({},V.id,V));case"ADD_CONSUMER":var K=A.payload,J=K.consumer,Q=M[K.peerId];if(!Q)throw new Error("no Peer found for new Consumer");var Te=[].concat((0,we.A)(Q.consumers),[J.id]),Le=ht(ht({},Q),{},{consumers:Te});return ht(ht({},M),{},(0,_.A)({},Le.id,Le));case"REMOVE_CONSUMER":var at=A.payload,Ce=at.consumerId,Qe=M[at.peerId];if(!Qe)return M;var Oe=Qe.consumers.indexOf(Ce);if(Oe===-1)throw new Error("Consumer not found");var pe=Qe.consumers.slice();pe.splice(Oe,1);var Pt=ht(ht({},Qe),{},{consumers:pe});return ht(ht({},M),{},(0,_.A)({},Pt.id,Pt));case"ADD_DATA_CONSUMER":var Ke=A.payload,_t=Ke.dataConsumer,gt=Ke.peerId;if(!gt)return M;var bt=M[gt];if(!bt)throw new Error("no Peer found for new DataConsumer");var Ct=[].concat((0,we.A)(bt.dataConsumers),[_t.id]),ze=ht(ht({},bt),{},{dataConsumers:Ct});return ht(ht({},M),{},(0,_.A)({},ze.id,ze));case"REMOVE_DATA_CONSUMER":var gr=A.payload,mn=gr.dataConsumerId,zt=gr.peerId;if(!zt)return M;var Dn=M[zt];if(!Dn)return M;var ai=Dn.dataConsumers.indexOf(mn);if(ai===-1)throw new Error("DataConsumer not found");var Ki=Dn.dataConsumers.slice();Ki.splice(ai,1);var Ts=ht(ht({},Dn),{},{dataConsumers:Ki});return ht(ht({},M),{},(0,_.A)({},Ts.id,Ts));default:return M}},consumers:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pr,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"SET_ROOM_STATE":return A.payload.state==="closed"?{}:M;case"ADD_CONSUMER":var B=A.payload.consumer;return St(St({},M),{},(0,_.A)({},B.id,B));case"REMOVE_CONSUMER":var q=A.payload.consumerId,ee=St({},M);return delete ee[q],ee;case"SET_CONSUMER_PAUSED":var te,ce=A.payload,le=ce.consumerId,V=ce.originator,K=M[le];return te=St(St({},K),{},V==="local"?{locallyPaused:!0}:{remotelyPaused:!0}),St(St({},M),{},(0,_.A)({},le,te));case"SET_CONSUMER_RESUMED":var J,Q=A.payload,Te=Q.consumerId,Le=Q.originator,at=M[Te];return J=St(St({},at),{},Le==="local"?{locallyPaused:!1}:{remotelyPaused:!1}),St(St({},M),{},(0,_.A)({},Te,J));case"SET_CONSUMER_CURRENT_LAYERS":var Ce=A.payload,Qe=Ce.consumerId,Oe=Ce.spatialLayer,pe=Ce.temporalLayer,Pt=St(St({},M[Qe]),{},{currentSpatialLayer:Oe,currentTemporalLayer:pe});return St(St({},M),{},(0,_.A)({},Qe,Pt));case"SET_CONSUMER_PREFERRED_LAYERS":var Ke=A.payload,_t=Ke.consumerId,gt=Ke.spatialLayer,bt=Ke.temporalLayer,Ct=St(St({},M[_t]),{},{preferredSpatialLayer:gt,preferredTemporalLayer:bt});return St(St({},M),{},(0,_.A)({},_t,Ct));case"SET_CONSUMER_PRIORITY":var ze=A.payload,gr=ze.consumerId,mn=ze.priority,zt=St(St({},M[gr]),{},{priority:mn});return St(St({},M),{},(0,_.A)({},gr,zt));case"SET_CONSUMER_TRACK":var Dn=A.payload,ai=Dn.consumerId,Ki=Dn.track,Ts=St(St({},M[ai]),{},{track:Ki});return St(St({},M),{},(0,_.A)({},ai,Ts));case"SET_CONSUMER_SCORE":var ma=A.payload,Vs=ma.consumerId,Ri=ma.score,Jl=M[Vs];if(!Jl)return M;var jd=St(St({},Jl),{},{score:Ri});return St(St({},M),{},(0,_.A)({},Vs,jd));default:return M}},dataConsumers:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:jr,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"SET_ROOM_STATE":return A.payload.state==="closed"?{}:M;case"ADD_DATA_CONSUMER":var B=A.payload.dataConsumer;return It(It({},M),{},(0,_.A)({},B.id,B));case"REMOVE_DATA_CONSUMER":var q=A.payload.dataConsumerId,ee=It({},M);return delete ee[q],ee;default:return M}},notifications:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Nt,A=arguments.length>1?arguments[1]:void 0;switch(A.type){case"ADD_NOTIFICATION":var B=A.payload.notification;return[].concat((0,we.A)(M),[B]);case"REMOVE_NOTIFICATION":var q=A.payload.notificationId;return M.filter(function(ee){return ee.id!==q});case"REMOVE_ALL_NOTIFICATIONS":return[];default:return M}}});var Mr=a(2487),Br=a(7007),Fr=a(296),Zt=(a(2487).default,(0,E.A)(function M(){(0,o.A)(this,M),this.roomClient=null})),sr=new(function(){function M(){(0,o.A)(this,M),M.instance||(M.instance=new Zt)}return(0,E.A)(M,[{key:"getInstance",value:function(){return M.instance}}])}());Object.freeze(sr);var Ve=sr.getInstance(),Rr=function(){return(0,E.A)(function M(A){(0,o.A)(this,M),this.id=A.id,this.kind=A.track.kind,this.codec=A.codec,this.track=A.track,this.producerOrConsumer=A.instance,A.appData&&A.appData.share===!0&&A.track.kind==="video"&&(this.kind="share"),A.appData&&A.appData.share===!0&&A.track.kind==="audio"&&(this.kind="shareAudio")},[{key:"pause",value:function(){Ve.roomClient._pauseConsumer(this.producerOrConsumer)}},{key:"resume",value:function(){Ve.roomClient._resumeConsumer(this.producerOrConsumer)}},{key:"paused",get:function(){return this.producerOrConsumer.paused}}])}();function wr(M,A){var B=typeof Symbol<"u"&&M[Symbol.iterator]||M["@@iterator"];if(!B){if(Array.isArray(M)||(B=function(V,K){if(V){if(typeof V=="string")return Ae(V,K);var J={}.toString.call(V).slice(8,-1);return J==="Object"&&V.constructor&&(J=V.constructor.name),J==="Map"||J==="Set"?Array.from(V):J==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(J)?Ae(V,K):void 0}}(M))||A){B&&(M=B);var q=0,ee=function(){};return{s:ee,n:function(){return q>=M.length?{done:!0}:{done:!1,value:M[q++]}},e:function(V){throw V},f:ee}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var te,ce=!0,le=!1;return{s:function(){B=B.call(M)},n:function(){var V=B.next();return ce=V.done,V},e:function(V){le=!0,te=V},f:function(){try{ce||B.return==null||B.return()}finally{if(le)throw te}}}}function Ae(M,A){(A==null||A>M.length)&&(A=M.length);for(var B=0,q=Array(A);B<A;B++)q[B]=M[B];return q}var Ot="stream-enabled",ot="stream-disabled",vr="media-status-changed",br="video-quality-changed",Vr=function(){return(0,E.A)(function te(ce){var le=this;(0,o.A)(this,te),(0,_.A)(this,"captureImage",(0,p.A)(w().mark(function V(){var K,J,Q,Te,Le,at,Ce,Qe,Oe=arguments;return w().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:J=(K=Oe.length>0&&Oe[0]!==void 0?Oe[0]:{}).height,Q=K.width,pe.prev=1,Te=(0,we.A)(le.streams.values()),Le=wr(Te),pe.prev=4,Ce=w().mark(function Pt(){var Ke,_t,gt,bt,Ct;return w().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if((Ke=at.value).kind!="video"){ze.next=19;break}return ze.prev=2,(_t=new MediaStream).addTrack(Ke.track),(gt=document.createElement("video")).srcObject=_t,gt.playsInline=!0,(bt=document.createElement("canvas")).id="canvasId",ze.next=12,new Promise(function(gr,mn){gt.addEventListener("loadeddata",(0,p.A)(w().mark(function zt(){var Dn,ai,Ki,Ts,ma,Vs;return w().wrap(function(Ri){for(;;)switch(Ri.prev=Ri.next){case 0:return Dn=gt.videoWidth,ai=gt.videoHeight,Ki=16/9,J==null&&Q==null&&(J=ai,Q=Dn),J==null&&J==null||(J<=0||J>ai)&&(J=ai),Q==null&&Q==null||(Q<=0||Q>Dn)&&(Q=Dn),J==null&&(J=Q/Ki),Q==null&&(Q=J*Ki),bt.width=Q,bt.height=J,Ri.prev=9,Ri.next=12,gt.play();case 12:document.body.appendChild(gt),Ts=(bt.width-Dn*Ki)/2,ma=(bt.height-ai*Ki)/2,bt.getContext("2d").clearRect(0,0,Ts/2,ma/2),bt.getContext("2d").drawImage(gt,0,0),Vs=bt.toDataURL("image/jpeg").split(";base64,")[1],document.body.appendChild(bt),document.body.removeChild(bt),document.body.removeChild(gt),gr(Vs),Ri.next=28;break;case 24:Ri.prev=24,Ri.t0=Ri.catch(9),mn(Ri.t0),console.log("error in video",Ri.t0);case 28:case"end":return Ri.stop()}},zt,null,[[9,24]])})))});case 12:return Ct=ze.sent,ze.abrupt("return",{v:Ct});case 16:ze.prev=16,ze.t0=ze.catch(2),console.error("err on image capture",ze.t0);case 19:case"end":return ze.stop()}},Pt,null,[[2,16]])}),Le.s();case 7:if((at=Le.n()).done){pe.next=14;break}return pe.delegateYield(Ce(),"t0",9);case 9:if(!(Qe=pe.t0)){pe.next=12;break}return pe.abrupt("return",Qe.v);case 12:pe.next=7;break;case 14:pe.next=19;break;case 16:pe.prev=16,pe.t1=pe.catch(4),Le.e(pe.t1);case 19:return pe.prev=19,Le.f(),pe.finish(19);case 22:throw new Error("Camera must be on to capture an image");case 25:pe.prev=25,pe.t2=pe.catch(1),console.error("Error in captureImage::",pe.t2),Ve.roomClient._videosdkLogs&&Ve.roomClient._videosdkLogs.pushLogs({logText:"Error on image capture",logType:"ERROR",attributes:{error:pe.t2.message}});case 29:case"end":return pe.stop()}},V,null,[[1,25],[4,16,19,22]])}))),this.id=ce.id,this.displayName=ce.displayName,this.streams=new Map,this.quality="low",this.local=ce.local||!1,this.pinState={cam:!1,share:!1},this.webcamOn=!1,this.micOn=!1,this.mode=ce.mode,this.metaData=ce.metaData,this.eventEmitter=new Br.EventEmitter},[{key:"_setPinState",value:function(te){te.cam!=null&&(this.pinState.cam=te.cam),te.share!=null&&(this.pinState.share=te.share)}},{key:"remove",value:function(){Ve.roomClient.removePeer(this.id)}},{key:"enableMic",value:function(){Ve.roomClient.enablePeerMic(this.id)}},{key:"disableMic",value:function(){Ve.roomClient.disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){Ve.roomClient.enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){Ve.roomClient.disablePeerWebcam(this.id)}},{key:"addStream",value:function(te){this.streams.set(te.id,te),te.kind!=="video"||this.local||Ve.roomClient.setConsumerQuality(te.id,this.quality),this.eventEmitter.emit(Ot,te)}},{key:"updateStream",value:function(te){this.streams.set(te.id,te),this.eventEmitter.emit(Ot,te)}},{key:"deleteStream",value:function(te){var ce=this.streams.get(te);if(ce!=null)return this.streams.delete(te),this.eventEmitter.emit(ot,ce),ce}},{key:"updateParticipantMediaState",value:function(te,ce){te=="audio"?this.micOn=ce:te=="video"&&(this.webcamOn=ce),this.eventEmitter.emit(vr,{peerId:this.id,kind:te,newStatus:ce})}},{key:"videoQualityChanged",value:function(te,ce){this.eventEmitter.emit(br,{peerId:this.id,prevQuality:te,currentQuality:ce})}},{key:"setQuality",value:function(te){this.quality===te||this.local||(this.quality=te,(0,we.A)(this.streams.entries()).forEach(function(ce){var le=ce[1];le.kind==="video"&&Ve.roomClient.setConsumerQuality(le.id,te)}))}},{key:"setViewPort",value:function(te,ce){(0,we.A)(this.streams.entries()).forEach(function(le){var V=le[1];V.kind==="video"&&Ve.roomClient.setViewPort(V.producerOrConsumer,te,ce)})}},{key:"pin",value:function(te){switch(te){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!0,share:!0});break;case"CAM":this._setPinState({cam:!0});break;case"SHARE":this._setPinState({share:!0});break;default:throw new Error("Unknown pin type")}Ve.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"unpin",value:function(te){switch(te){case"SHARE_AND_CAM":case void 0:this._setPinState({cam:!1,share:!1});break;case"CAM":this._setPinState({cam:!1});break;case"SHARE":this._setPinState({share:!1});break;default:throw new Error("Unknown unpin type")}Ve.roomClient.pinStateChange({peerId:this.id,state:this.pinState})}},{key:"switchTo",value:(ee=(0,p.A)(w().mark(function te(ce){var le,V,K;return w().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return le=ce.meetingId,V=ce.payload,K=ce.token,J.next=3,Ve.roomClient.switchPeerRoom({peerId:this.id,roomId:le,payload:V,token:K});case 3:case"end":return J.stop()}},te,this)})),function(te){return ee.apply(this,arguments)})},{key:"getVideoStats",value:(q=(0,p.A)(w().mark(function te(){var ce,le,V,K,J;return w().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(!this.local){Q.next=6;break}return Q.next=3,Ve.roomClient.getVideoRemoteStats();case 3:return Q.abrupt("return",Q.sent);case 6:ce=(0,we.A)(this.streams.entries()),le=wr(ce),Q.prev=8,le.s();case 10:if((V=le.n()).done){Q.next=18;break}if(K=(0,Fr.A)(V.value,2),J=K[0],K[1].kind!="video"){Q.next=16;break}return Q.next=15,Ve.roomClient.getConsumerRemoteStats(J);case 15:return Q.abrupt("return",Q.sent);case 16:Q.next=10;break;case 18:Q.next=23;break;case 20:Q.prev=20,Q.t0=Q.catch(8),le.e(Q.t0);case 23:return Q.prev=23,le.f(),Q.finish(23);case 26:case"end":return Q.stop()}},te,this,[[8,20,23,26]])})),function(){return q.apply(this,arguments)})},{key:"getShareStats",value:(B=(0,p.A)(w().mark(function te(){var ce,le,V,K,J;return w().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(!this.local){Q.next=6;break}return Q.next=3,Ve.roomClient.getShareRemoteStats();case 3:return Q.abrupt("return",Q.sent);case 6:ce=(0,we.A)(this.streams.entries()),le=wr(ce),Q.prev=8,le.s();case 10:if((V=le.n()).done){Q.next=18;break}if(K=(0,Fr.A)(V.value,2),J=K[0],K[1].kind!="share"){Q.next=16;break}return Q.next=15,Ve.roomClient.getConsumerRemoteStats(J);case 15:return Q.abrupt("return",Q.sent);case 16:Q.next=10;break;case 18:Q.next=23;break;case 20:Q.prev=20,Q.t0=Q.catch(8),le.e(Q.t0);case 23:return Q.prev=23,le.f(),Q.finish(23);case 26:case"end":return Q.stop()}},te,this,[[8,20,23,26]])})),function(){return B.apply(this,arguments)})},{key:"getShareAudioStats",value:(A=(0,p.A)(w().mark(function te(){var ce,le,V,K,J;return w().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(!this.local){Q.next=6;break}return Q.next=3,Ve.roomClient.getShareAudioRemoteStats();case 3:return Q.abrupt("return",Q.sent);case 6:ce=(0,we.A)(this.streams.entries()),le=wr(ce),Q.prev=8,le.s();case 10:if((V=le.n()).done){Q.next=18;break}if(K=(0,Fr.A)(V.value,2),J=K[0],K[1].kind!="shareAudio"){Q.next=16;break}return Q.next=15,Ve.roomClient.getConsumerRemoteStats(J);case 15:return Q.abrupt("return",Q.sent);case 16:Q.next=10;break;case 18:Q.next=23;break;case 20:Q.prev=20,Q.t0=Q.catch(8),le.e(Q.t0);case 23:return Q.prev=23,le.f(),Q.finish(23);case 26:case"end":return Q.stop()}},te,this,[[8,20,23,26]])})),function(){return A.apply(this,arguments)})},{key:"getAudioStats",value:(M=(0,p.A)(w().mark(function te(){var ce,le,V,K,J;return w().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:if(this.micOn){Q.next=2;break}return Q.abrupt("return",[]);case 2:if(!this.local){Q.next=8;break}return Q.next=5,Ve.roomClient.getAudioRemoteStats();case 5:return Q.abrupt("return",Q.sent);case 8:ce=(0,we.A)(this.streams.entries()),le=wr(ce),Q.prev=10,le.s();case 12:if((V=le.n()).done){Q.next=20;break}if(K=(0,Fr.A)(V.value,2),J=K[0],K[1].kind!="audio"){Q.next=18;break}return Q.next=17,Ve.roomClient.getConsumerRemoteStats(J);case 17:return Q.abrupt("return",Q.sent);case 18:Q.next=12;break;case 20:Q.next=25;break;case 22:Q.prev=22,Q.t0=Q.catch(10),le.e(Q.t0);case 25:return Q.prev=25,le.f(),Q.finish(25);case 28:case"end":return Q.stop()}},te,this,[[10,22,25,28]])})),function(){return M.apply(this,arguments)})},{key:"consumeMicStreams",value:function(){Ve.roomClient.consumeMicStreams(this.id)}},{key:"consumeWebcamStreams",value:function(){Ve.roomClient.consumeWebcamStreams(this.id)}},{key:"stopConsumingWebcamStreams",value:function(){Ve.roomClient.stopConsumingWebcamStreams(this.id)}},{key:"stopConsumingMicStreams",value:function(){Ve.roomClient.stopConsumingMicStreams(this.id)}},{key:"on",value:function(te,ce){switch(te){case Ot:case ot:case vr:case br:this.eventEmitter.on(te,ce);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(te,ce){switch(te){case Ot:case ot:case vr:case br:this.eventEmitter.off(te,ce);break;default:throw new Error("Invalid event type")}}}]);var M,A,B,q,ee}();function di(M,A){if(A&&((0,C.A)(A)=="object"||typeof A=="function"))return A;if(A!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}(M)}function Mt(M){return Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(A){return A.__proto__||Object.getPrototypeOf(A)},Mt(M)}function pi(M,A){return pi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,q){return B.__proto__=q,B},pi(M,A)}function Pi(M,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(A&&A.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),A&&pi(M,A)}var hi={CHARACTER_SPEAKING:"CHARACTER_SPEAKING",CHARACTER_THINKING:"CHARACTER_THINKING",CHARACTER_LISTENING:"CHARACTER_LISTENING"};function ls(M,A,B){return A=Mt(A),di(M,Wi()?Reflect.construct(A,B||[],Mt(M).constructor):A.apply(M,B))}function Wi(){try{var M=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Wi=function(){return!!M})()}function At(M,A,B){We(M,A),A.set(M,B)}function We(M,A){if(A.has(M))throw new TypeError("Cannot initialize the same private elements twice on an object")}function ut(M,A){return M.get(Ue(M,A))}function rt(M,A,B){return M.set(Ue(M,A),B),B}function Ue(M,A,B){if(typeof M=="function"?M===A:M.has(A))return arguments.length<3?A:B;throw new TypeError("Private element is not present on this object")}var Er="stream-enabled",De="stream-disabled",dr="character-joined",Tr="character-left",Sr="media-status-changed",Gr="video-quality-changed",ie="character-state-changed",G="character-message",ue=new WeakMap,Ee=new WeakMap,Ne=new WeakMap,dt=new WeakMap,Tt=new WeakMap,$e=new WeakMap,nt=new WeakSet,et=function(M){function A(V){var K,J,Q;return(0,o.A)(this,A),K=ls(this,A,[{id:V.id,displayName:V.displayName,mode:"CONFERENCE"}]),We(J=K,Q=nt),Q.add(J),At(K,ue,void 0),At(K,Ee,void 0),At(K,Ne,void 0),At(K,dt,void 0),At(K,Tt,void 0),At(K,$e,void 0),(0,_.A)(K,"captureImage",(0,p.A)(w().mark(function Te(){var Le,at=arguments;return w().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:throw(Le=at.length>0&&at[0]!==void 0?at[0]:{}).height,Le.width,new Error("captureImage method is not supported on character");case 2:case"end":return Ce.stop()}},Te)}))),rt(dt,K,V.interactionId||null),K.id=V.id||null,rt(ue,K,V.characterRole),rt(Ee,K,V.characterMode),rt(Ne,K,V.knowledgeBases||[]),K.displayName=V.displayName,rt(Tt,K,V.state||hi.CHARACTER_LISTENING),rt($e,K,V.roomClient),K}return Pi(A,M),(0,E.A)(A,[{key:"join",value:(le=(0,p.A)(w().mark(function V(){var K;return w().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,ut($e,this).joinCharacter({interactionId:ut(dt,this),characterId:this.id,characterRole:ut(ue,this),displayName:this.displayName,characterMode:ut(Ee,this),knowledgeBases:ut(Ne,this)});case 2:(K=J.sent)&&(this.id=K.characterId,this.displayName=K.displayName,rt(Ee,this,K.characterMode),rt(ue,this,K.characterRole),rt(dt,this,K.interactionId),rt(Ne,this,K.knowledgeBases),ut($e,this)._eventEmitter.emit("INIT_CHARACTER",this));case 4:case"end":return J.stop()}},V,this)})),function(){return le.apply(this,arguments)})},{key:"leave",value:(ce=(0,p.A)(w().mark(function V(){return w().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,ut($e,this).removeCharacter();case 2:case"end":return K.stop()}},V,this)})),function(){return ce.apply(this,arguments)})},{key:"remove",value:(te=(0,p.A)(w().mark(function V(){return w().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:throw new Error("remove method is not supported on character");case 1:case"end":return K.stop()}},V)})),function(){return te.apply(this,arguments)})},{key:"sendMessage",value:(ee=(0,p.A)(w().mark(function V(K){return w().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,ut($e,this).sendCharacterMessage({interactionId:ut(dt,this),text:K});case 2:case"end":return J.stop()}},V,this)})),function(V){return ee.apply(this,arguments)})},{key:"handleCharacterStateChanged",value:function(V){Object.keys(hi).includes(V.status)&&(Ue(nt,this,kt).call(this,V.status),this.eventEmitter.emit(ie,V))}},{key:"handleCharacterMessage",value:function(V){this.eventEmitter.emit(G,V)}},{key:"interrupt",value:(q=(0,p.A)(w().mark(function V(){return w().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,ut($e,this).interruptCharacter({interactionId:ut(dt,this)});case 2:case"end":return K.stop()}},V,this)})),function(){return q.apply(this,arguments)})},{key:"enableMic",value:function(){ut($e,this).enablePeerMic(this.id)}},{key:"disableMic",value:function(){ut($e,this).disablePeerMic(this.id)}},{key:"enableWebcam",value:function(){ut($e,this).enablePeerWebcam(this.id)}},{key:"disableWebcam",value:function(){ut($e,this).disablePeerWebcam(this.id)}},{key:"updateStream",value:function(V){throw new Error("updateStream method is not supported on character")}},{key:"switchTo",value:(B=(0,p.A)(w().mark(function V(K){return w().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:throw K.meetingId,K.payload,K.token,new Error("switchTo method is not supported on character");case 2:case"end":return J.stop()}},V)})),function(V){return B.apply(this,arguments)})},{key:"on",value:function(V,K){switch(V){case Er:case De:case dr:case Tr:case Sr:case Gr:case ie:case G:this.eventEmitter.on(V,K);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(V,K){switch(V){case Er:case De:case dr:case Tr:case Sr:case Gr:case ie:case G:this.eventEmitter.off(V,K);break;default:throw new Error("Invalid event type")}}},{key:"state",get:function(){return ut(Tt,this)}},{key:"knowledgeBases",get:function(){return ut(Ne,this)}},{key:"characterMode",get:function(){return ut(Ee,this)}},{key:"characterRole",get:function(){return ut(ue,this)}},{key:"interactionId",get:function(){return ut(dt,this)}}]);var B,q,ee,te,ce,le}(Vr);function kt(M){rt(Tt,this,M)}function Ht(M,A,B){(function(q,ee){if(ee.has(q))throw new TypeError("Cannot initialize the same private elements twice on an object")})(M,A),A.set(M,B)}function ke(M,A,B){if(typeof M=="function"?M===A:M.has(A))return arguments.length<3?A:B;throw new TypeError("Private element is not present on this object")}var Cr=new WeakMap,kr=function(){return(0,E.A)(function A(B,q){var ee,te,ce,le=B.id,V=B.displayName;(0,o.A)(this,A),Ht(this,Cr,void 0),this.id=le,this.displayName=V,te=this,ce=q,(ee=Cr).set(ke(ee,te),ce)},[{key:"switchTo",value:(M=(0,p.A)(w().mark(function A(B){var q,ee,te;return w().wrap(function(ce){for(;;)switch(ce.prev=ce.next){case 0:return q=B.meetingId,ee=B.payload,te=B.token,ce.next=3,Ve.roomClient.connectionSwitchPeerRoom({roomId:q,connectionRoomId:(le=Cr,V=this,le.get(ke(le,V))),payload:ee,peerId:this.id,token:te});case 3:case"end":return ce.stop()}var le,V},A,this)})),function(A){return M.apply(this,arguments)})}]);var M}(),Zr="participant-joined",en="participant-left",us="chat-message",Ti=function(){return(0,E.A)(function A(B,q){var ee=this;(0,o.A)(this,A),this.eventEmitter=new Br.EventEmitter,this.id=B,this.participants=new Map,q.forEach(function(te){ee.participants.set(te.id,new kr(te,ee.id))})},[{key:"participantJoin",value:function(A){var B=new kr(A,this.id);this.participants.set(A.id,B),this.eventEmitter.emit(Zr,B)}},{key:"participantLeft",value:function(A){this.participants.delete(A),this.eventEmitter.emit(en,A)}},{key:"sendChatMessage",value:function(A){Ve.roomClient.connectionSendChatMessage({roomId:this.id,message:A})}},{key:"sendChatMessageEvent",value:function(A){var B=A.participantId,q=A.message;this.eventEmitter.emit(us,{participantId:B,message:q})}},{key:"end",value:(M=(0,p.A)(w().mark(function A(){return w().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,Ve.roomClient.connectionEndMeeting({roomId:this.id});case 2:case"end":return B.stop()}},A,this)})),function(){return M.apply(this,arguments)})},{key:"on",value:function(A,B){switch(A){case Zr:case en:case us:this.eventEmitter.on(A,B);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(A,B){switch(A){case Zr:case en:case us:this.eventEmitter.off(A,B);break;default:throw new Error("Invalid event type")}}}]);var M}(),Pe=function(){return(0,E.A)(function M(A){var B=A.roomId,q=A.peers,ee=A.payload;(0,o.A)(this,M),this.id=B,this.payload=ee,this.meeting=new Ti(B,q)},[{key:"close",value:function(){Ve.roomClient.closeConnection(this.id)}}])}();function Vi(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function Se(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?Vi(Object(B),!0).forEach(function(q){(0,_.A)(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):Vi(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}function Fe(M,A){if(A.has(M))throw new TypeError("Cannot initialize the same private elements twice on an object")}function He(M,A){return M.get(pt(M,A))}function pt(M,A,B){if(typeof M=="function"?M===A:M.has(A))return arguments.length<3?A:B;throw new TypeError("Private element is not present on this object")}var qt="error",ct="meeting-joined",Vt="meeting-left",Kt="participant-mode-changed",Rt="participant-joined",yr="participant-left",Yt="speaker-changed",mr="presenter-changed",$r="main-participant-changed",tn="chat-message",_n="entry-requested",kn="entry-responded",fi="recording-state-changed",Yn="recording-started",xi="recording-stopped",Oi="livestream-state-changed",es="livestream-started",Es="livestream-stopped",$i="hls-state-changed",ks="hls-started",Xs="hls-stopped",$a="whiteboard-started",qa="whiteboard-stopped",Ka="video-state-changed",Ga="video-seeked",Ja="mic-requested",Qa="webcam-requested",Ya="stream-enabled",Xa="stream-disabled",Za="pin-state-changed",eo="connection-open",to="connection-close",ro="switch-meeting",no="meeting-state-changed",io="transcription-state-changed",so="transcription-text",Ca="character-joined",Pa="character-left",Cs=new WeakMap,Ta=new WeakSet,Dt=function(){return(0,E.A)(function V(K,J,Q){var Te,Le,at,Ce,Qe,Oe=this;(0,o.A)(this,V),Fe(Te=this,Le=Ta),Le.add(Te),function(pe,Pt,Ke){Fe(pe,Pt),Pt.set(pe,Ke)}(this,Cs,void 0),(0,_.A)(this,"pubSub",{publish:(Qe=(0,p.A)(w().mark(function pe(Pt,Ke,_t,gt){return w().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:if(gt==null){bt.next=3;break}if((0,C.A)(gt)=="object"){bt.next=3;break}throw new Error('"payload" can only be object.');case 3:return bt.next=5,Oe.roomClient.pubsubPublish(Pt,Ke,_t,gt);case 5:case"end":return bt.stop()}},pe)})),function(pe,Pt,Ke,_t){return Qe.apply(this,arguments)}),subscribe:(Ce=(0,p.A)(w().mark(function pe(Pt,Ke){var _t;return w().wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:if(!He(Cs,Oe).listeners(Pt).includes(Ke)){gt.next=2;break}return gt.abrupt("return");case 2:return gt.next=4,Oe.roomClient.pubsubSubscribe(Pt);case 4:return _t=gt.sent,He(Cs,Oe).on(Pt,Ke),gt.abrupt("return",_t);case 7:case"end":return gt.stop()}},pe)})),function(pe,Pt){return Ce.apply(this,arguments)}),unsubscribe:(at=(0,p.A)(w().mark(function pe(Pt,Ke){return w().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:if(He(Cs,Oe).off(Pt,Ke),He(Cs,Oe).listeners(Pt).length!=0){_t.next=4;break}return _t.next=4,Oe.roomClient.pubsubUnsubscribe(Pt);case 4:case"end":return _t.stop()}},pe)})),function(pe,Pt){return at.apply(this,arguments)})}),(0,_.A)(this,"uploadBase64File",function(){var pe=(0,p.A)(w().mark(function Pt(Ke){var _t,gt,bt,Ct,ze,gr,mn;return w().wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:if(_t=Ke.base64Data,gt=Ke.token,bt=Ke.fileName,zt.prev=1,_t&&gt&&bt){zt.next=4;break}throw new Error("please provide base64Data, token and fileName");case 4:return Ct="https://".concat(Oe.baseUrl,"/base64-upload?roomId=").concat(Oe.id),ze={fileName:bt,base64Data:_t},zt.next=8,fetch(Ct,{method:"POST",body:JSON.stringify(ze),headers:{"Content-Type":"application/json",Authorization:gt}});case 8:return gr=zt.sent,zt.next=11,gr.json();case 11:return mn=zt.sent,zt.abrupt("return",mn.url);case 15:zt.prev=15,zt.t0=zt.catch(1),console.error("Error while Uploading Base64 File::",zt.t0),Oe.roomClient._videosdkLogs&&Oe.roomClient._videosdkLogs.pushLogs({logText:"Error while Uploading Base64 File",logType:"ERROR",attributes:{error:zt.t0.message}});case 19:case"end":return zt.stop()}},Pt,null,[[1,15]])}));return function(Pt){return pe.apply(this,arguments)}}()),(0,_.A)(this,"fetchBase64File",function(){var pe=(0,p.A)(w().mark(function Pt(Ke){var _t,gt,bt,Ct,ze;return w().wrap(function(gr){for(;;)switch(gr.prev=gr.next){case 0:if(_t=Ke.url,gt=Ke.token,gr.prev=1,_t&&gt){gr.next=4;break}throw new Error("please provide url and token");case 4:return gr.next=6,fetch(_t,{headers:{Authorization:gt}});case 6:return bt=gr.sent,gr.next=9,bt.arrayBuffer();case 9:return Ct=gr.sent,ze=window.btoa(new Uint8Array(Ct).reduce(function(mn,zt){return mn+String.fromCharCode(zt)},"")),gr.abrupt("return",ze);case 14:gr.prev=14,gr.t0=gr.catch(1),console.error("Error while fetching Base64 File::",gr.t0),Oe.roomClient._videosdkLogs&&Oe.roomClient._videosdkLogs.pushLogs({logText:"Error while fetching Base64 File",logType:"ERROR",attributes:{error:gr.t0.message}});case 18:case"end":return gr.stop()}},Pt,null,[[1,14]])}));return function(Pt){return pe.apply(this,arguments)}}()),this.id=K,this.roomClient=Q,this.activeSpeakerId=null,this.activePresenterId=null,this.mainParticipantId=null,this.connections=new Map,this.localParticipant=J,this.participants=new Map,this.characters=new Map,this.baseUrl=null,this.livestreamState="LIVESTREAM_STOPPED",this.recordingState="RECORDING_STOPPED",this.hlsState="HLS_STOPPED",this.transcriptionState="TRANSCRIPTION_STOPPED",this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null},this.messages=[],this.eventEmitter=new Br.EventEmitter,function(pe,Pt,Ke){pe.set(pt(pe,Pt),Ke)}(Cs,this,new Br.EventEmitter),this.eventEmitter.setMaxListeners(9999),He(Cs,this).setMaxListeners(9999),this.roomClient.on("ERROR",function(pe){return Oe.handleError(pe)}),this.roomClient.on("ADD_PEER",function(pe){return Oe.handlePeerAdd(pe)}),this.roomClient.on("REMOVE_PEER",function(pe){return Oe.handlePeerRemove(pe)}),this.roomClient.on("ADD_PRODUCER",function(pe){return Oe.handleProducerAdd(pe)}),this.roomClient.on("UPDATE_PRODUCER",function(pe){return Oe.handleUpdateProducer(pe)}),this.roomClient.on("REMOVE_PRODUCER",function(pe){return Oe.handleProducerRemove(pe)}),this.roomClient.on("ADD_CONSUMER",function(pe){return Oe.handleConsumerAdd(pe)}),this.roomClient.on("REMOVE_CONSUMER",function(pe){return Oe.handleConsumerRemove(pe)}),this.roomClient.on("PARTICIPANT_MEDIA_STATE_CHANGED",function(pe){return Oe.handleParticipantMediaStateChanged(pe)}),this.roomClient.on("CHAT_MESSAGE",function(pe){return Oe.handleNewChatMessage(pe)}),this.roomClient.on("SET_ROOM_ACTIVE_SPEAKER",function(pe){return Oe.handleSpeakerChange(pe)}),this.roomClient.on("ENTRY_REQUESTED",function(pe){return Oe.handleEntryRequested(pe)}),this.roomClient.on("ENTRY_RESPONDED",function(pe){return Oe.handleEntryResponded(pe)}),this.roomClient.on("MEETING_JOINED",function(pe){return Oe.handleMeetingJoined(pe)}),this.roomClient.on("MEETING_LEFT",function(pe){return Oe.handleMeetingLeft(pe)}),this.roomClient.on("RECORDING_STATE_CHANGED",function(pe){Oe.handleRecordingStateChanged(pe)}),this.roomClient.on("RECORDING_STARTED",function(pe){return Oe.handleRecordingStarted(pe)}),this.roomClient.on("RECORDING_STOPPED",function(pe){return Oe.handleRecordingStopped(pe)}),this.roomClient.on("LIVESTREAM_STATE_CHANGED",function(pe){Oe.handleLivestreamStateChanged(pe)}),this.roomClient.on("LIVESTREAM_STARTED",function(pe){return Oe.handleLivestreamStarted(pe)}),this.roomClient.on("LIVESTREAM_STOPPED",function(pe){return Oe.handleLivestreamStopped(pe)}),this.roomClient.on("HLS_STATE_CHANGED",function(pe){Oe.handleHlsStateChanged(pe)}),this.roomClient.on("HLS_STARTED",function(pe){Oe.handleHlsStarted(pe)}),this.roomClient.on("HLS_STOPPED",function(pe){Oe.handleHlsStopped(pe)}),this.roomClient.on("TRANSCRIPTION_STATE_CHANGED",function(pe){Oe.handleTranscriptionStateChanged(pe)}),this.roomClient.on("TRANSCRIPTION_TEXT",function(pe){Oe.handleTranscriptionText(pe)}),this.roomClient.on("WHITEBOARD_STARTED",function(pe){return Oe.handleWhiteboardStarted(pe)}),this.roomClient.on("WHITEBOARD_STOPPED",function(pe){return Oe.handleWhiteboardStopped(pe)}),this.roomClient.on("VIDEO_STATE_CHANGED",function(pe){return Oe.handleVideoStateChanged(pe)}),this.roomClient.on("VIDEO_SEEKED",function(pe){return Oe.handleVideoSeeked(pe)}),this.roomClient.on("PIN_STATE_CHANGED",function(pe){Oe.handlePinStateChanged(pe)}),this.roomClient.on("MIC_REQUESTED",function(pe){return Oe.handleMicRequested(pe)}),this.roomClient.on("WEBCAM_REQUESTED",function(pe){return Oe.handleWebcamRequested(pe)}),this.roomClient.on("CONNECTION_OPEN",function(pe){return Oe.handleConnectionOpen(pe)}),this.roomClient.on("CONNECTION_CLOSE",function(pe){return Oe.handleConnectionClose(pe)}),this.roomClient.on("CONNECTION_PARTICIPANT_JOIN",function(pe){return Oe.handleConnectionParticipantJoin(pe)}),this.roomClient.on("SWITCH_ROOM",function(pe){return Oe.handleSwitchMeeting(pe)}),this.roomClient.on("CONNECTION_CHAT_MESSAGE",function(pe){return Oe.handleConnectionChatMessage(pe)}),this.roomClient.on("CONNECTION_PARTICIPANT_LEFT",function(pe){Oe.handleConnectionParticipantLeft(pe)}),this.roomClient.on("PUBSUB_MESSAGE",function(pe){return pt(Ta,Oe,Y).call(Oe,pe)}),this.roomClient.on("PEER_MODE_CHANGED",function(pe){return pt(Ta,Oe,it).call(Oe,pe)}),this.updateMainParticipant(this.localParticipant.id),this.roomClient.on("MEETING_STATE_CHANGED",function(pe){return Oe.handleMeetingStateChanged(pe)}),this.roomClient.on("VIDEO_QUALITY_CHANGED",function(pe){return Oe.handleVideoQualityChanged(pe)}),this.roomClient.on("ADD_CHARACTER",function(pe){return Oe.handleAddCharacter(pe)}),this.roomClient.on("INIT_CHARACTER",function(pe){return Oe.handleInitCharacter(pe)}),this.roomClient.on("REMOVE_CHARACTER",function(pe){return Oe.handleRemoveCharacter(pe)}),this.roomClient.on("CHARACTER_STATE_CHANGED",function(pe){return Oe.handleCharacterStateChanged(pe)}),this.roomClient.on("CHARACTER_MESSAGE",function(pe){return Oe.handleCharacterMessage(pe)})},[{key:"handleError",value:function(V){this.eventEmitter.listenerCount(qt)>0&&this.eventEmitter.emit(qt,V)}},{key:"join",value:function(){this.roomClient.join()}},{key:"changeMode",value:function(V){this.roomClient.changeMode(V)}},{key:"leave",value:function(){this.roomClient.close({sendLeft:!0})}},{key:"end",value:function(){this.roomClient.closeRoom()}},{key:"respondEntry",value:function(V,K){this.roomClient.respondEntry(V,K)}},{key:"pinnedParticipants",get:function(){return this.roomClient._pinnedParticipants}},{key:"muteMic",value:function(){this.roomClient.disableMic()}},{key:"unmuteMic",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableMic(V)}},{key:"publishAudio",value:(le=(0,p.A)(w().mark(function V(){var K,J=arguments;return w().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return K=J.length>0&&J[0]!==void 0?J[0]:void 0,Q.next=3,this.roomClient.enableMic(K);case 3:return Q.abrupt("return");case 4:case"end":return Q.stop()}},V,this)})),function(){return le.apply(this,arguments)})},{key:"unpublishAudio",value:(ce=(0,p.A)(w().mark(function V(){return w().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,this.roomClient.disableMic();case 2:return K.abrupt("return");case 3:case"end":return K.stop()}},V,this)})),function(){return ce.apply(this,arguments)})},{key:"disableWebcam",value:function(){this.roomClient.disableWebcam()}},{key:"enableWebcam",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableWebcam(V)}},{key:"publishVideo",value:(te=(0,p.A)(w().mark(function V(){var K,J=arguments;return w().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return K=J.length>0&&J[0]!==void 0?J[0]:void 0,this.roomClient.enableWebcam(K),Q.abrupt("return");case 3:case"end":return Q.stop()}},V,this)})),function(){return te.apply(this,arguments)})},{key:"unpublishVideo",value:(ee=(0,p.A)(w().mark(function V(){return w().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return this.roomClient.disableWebcam(),K.abrupt("return");case 2:case"end":return K.stop()}},V,this)})),function(){return ee.apply(this,arguments)})},{key:"disableScreenShare",value:function(){this.roomClient.disableShare()}},{key:"enableScreenShare",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(V)}},{key:"pubblishScreenShare",value:function(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0;this.roomClient.enableShare(V)}},{key:"unpublishScreenShare",value:function(){this.roomClient.disableShare()}},{key:"sendChatMessage",value:function(V){this.roomClient.sendChatMessage(V);var K={text:V,timestamp:new Date().getTime(),senderId:this.localParticipant.id,senderName:this.localParticipant.displayName};this.handleNewChatMessage(K)}},{key:"startRecording",value:function(V,K,J,Q){this.roomClient.startRecording(V,K,J,Q)}},{key:"stopRecording",value:function(){this.roomClient.stopRecording()}},{key:"startTranscription",value:function(V){this.roomClient.startTranscription(V)}},{key:"stopTranscription",value:function(){this.roomClient.stopTranscription()}},{key:"startLivestream",value:function(V,K){this.roomClient.startLivestream(V,K)}},{key:"stopLivestream",value:function(){this.roomClient.stopLivestream()}},{key:"startHls",value:(q=(0,p.A)(w().mark(function V(K,J){return w().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:return Q.next=2,this.roomClient.startHls(K,J);case 2:case"end":return Q.stop()}},V,this)})),function(V,K){return q.apply(this,arguments)})},{key:"stopHls",value:function(){this.roomClient.stopHls()}},{key:"createCharacter",value:function(V){if(!V.interactionId&&!V.id)throw new Error("InteractionId or id is required");return new et(Se(Se({},V),{},{roomClient:this.roomClient}))}},{key:"getMics",value:(B=(0,p.A)(w().mark(function V(){return w().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,this.roomClient.getMics();case 2:return K.abrupt("return",K.sent);case 3:case"end":return K.stop()}},V,this)})),function(){return B.apply(this,arguments)})},{key:"getWebcams",value:(A=(0,p.A)(w().mark(function V(){return w().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,this.roomClient.getWebcams();case 2:return K.abrupt("return",K.sent);case 3:case"end":return K.stop()}},V,this)})),function(){return A.apply(this,arguments)})},{key:"changeMic",value:function(V){this.roomClient.changeMic(V)}},{key:"changeWebcam",value:function(V){this.roomClient.changeWebcam(V)}},{key:"replaceWebcamStream",value:function(V){this.roomClient.replaceWebcamStream(V)}},{key:"setWebcamQuality",value:function(V){this.roomClient.setWebcamQuality(V)}},{key:"startWhiteboard",value:function(){this.roomClient.startWhiteboard()}},{key:"stopWhiteboard",value:function(){this.roomClient.stopWhiteboard()}},{key:"startVideo",value:function(V){var K=V.link;this.roomClient.startVideo({link:K})}},{key:"stopVideo",value:function(){this.roomClient.stopVideo()}},{key:"resumeVideo",value:function(){this.roomClient.resumeVideo()}},{key:"refreshConnection",value:function(){this.roomClient.restartIce()}},{key:"pauseVideo",value:function(V){var K=V.currentTime;this.roomClient.pauseVideo(K)}},{key:"seekVideo",value:function(V){var K=V.currentTime;this.roomClient.seekVideo(K)}},{key:"handlePeerAdd",value:function(V){var K=V.peer,J=new Vr(K);this.participants.set(J.id,J),this.eventEmitter.emit(Rt,J),this.participants.size===1&&this.updateMainParticipant(J.id)}},{key:"handlePeerRemove",value:function(V){var K=V.peerId,J=this.participants.get(K);J!=null&&(this.participants.delete(K),this.eventEmitter.emit(yr,J),this.activePresenterId===J.id&&(this.activePresenterId=null,this.eventEmitter.emit(mr,this.activePresenterId)),this.mainParticipantId===J.id&&(this.participants.size>0?this.updateMainParticipant(this.participants.entries().next().value[1].id):this.updateMainParticipant(this.localParticipant.id)))}},{key:"handleProducerAdd",value:function(V){var K=V.producer,J=new Rr(K);this.localParticipant.addStream(J),J.kind==="share"&&(this.activePresenterId=this.localParticipant.id,this.eventEmitter.emit(mr,this.activePresenterId),this.updateMainParticipant(this.localParticipant.id))}},{key:"handleUpdateProducer",value:function(V){var K=V.producer,J=new Rr(K);this.localParticipant.updateStream(J)}},{key:"handleProducerRemove",value:function(V){var K=V.producerId,J=this.localParticipant.deleteStream(K);if(J&&J.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(mr,this.activePresenterId);var Q=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||Q||this.localParticipant.id)}}},{key:"handleConsumerAdd",value:function(V){var K=V.consumer,J=V.peerId,Q=this.participants.get(J)||this.characters.get(J);if(Q){var Te=new Rr(K);Q.addStream(Te),this.eventEmitter.emit(Ya,Te),Te.kind==="share"&&(this.activePresenterId=Q.id,this.eventEmitter.emit(mr,this.activePresenterId),this.updateMainParticipant(Q.id))}}},{key:"handleConsumerRemove",value:function(V){var K=V.consumerId,J=V.peerId,Q=this.participants.get(J)||this.characters.get(J);if(Q!=null&&Q){var Te=Q.deleteStream(K);if(this.eventEmitter.emit(Xa,Te),Te&&Te.kind==="share"){this.activePresenterId=null,this.eventEmitter.emit(mr,this.activePresenterId);var Le=this.participants.size>0?this.participants.entries().next().value[1].id:null;this.updateMainParticipant(this.activeSpeakerId||Le||this.localParticipant.id)}}}},{key:"handleParticipantMediaStateChanged",value:function(V){var K=V.peerId,J=V.kind,Q=V.newState,Te=this.participants.get(K)||this.characters.get(K);this.localParticipant.id==K&&(Te=this.localParticipant),Te&&Te&&(J=="audio"?Te.micOn=Q:J=="video"&&(Te.webcamOn=Q),Te.updateParticipantMediaState(J,Q))}},{key:"handleSpeakerChange",value:function(V){var K=V.peerId;this.activeSpeakerId!==K&&(this.activeSpeakerId=K,this.eventEmitter.emit(Yt,K),K&&K!==this.localParticipant.id&&this.activePresenterId!==this.mainParticipantId&&K!==this.mainParticipantId&&this.updateMainParticipant(K))}},{key:"handleNewChatMessage",value:function(V){var K=V.senderId,J={senderId:K,text:V.text,timestamp:V.timestamp};if(this.localParticipant.id===K)J.senderName=this.localParticipant.displayName;else{var Q=this.participants.get(K);Q&&(J.senderName=Q.displayName)}this.messages.push(J),this.eventEmitter.emit(tn,J)}},{key:"updateMainParticipant",value:function(V){this.mainParticipantId=V;var K=null;K=V===this.localParticipant.id?this.localParticipant:this.participants.get(this.mainParticipantId),this.eventEmitter.emit($r,K)}},{key:"handleEntryRequested",value:function(V){var K=this,J=V.id,Q=V.name;this.eventEmitter.emit(_n,{participantId:J,name:Q,allow:function(){K.roomClient.respondEntry(J,"allowed")},deny:function(){K.roomClient.respondEntry(J,"denied")}})}},{key:"handleEntryResponded",value:function(V){var K=V.id,J=V.decision;this.eventEmitter.emit(kn,K,J)}},{key:"handleMeetingJoined",value:function(V){var K=V.peers,J=V.poll,Q=V.messages,Te=V.baseUrl;this.baseUrl=Te,Q.length>0&&(this.messages=Q),this.eventEmitter.emit(ct,{peers:K,poll:J,messages:Q})}},{key:"handleMeetingLeft",value:function(V){this.eventEmitter.emit(Vt,V)}},{key:"handleRecordingStateChanged",value:function(V){this.recordingState=V.status,this.eventEmitter.emit(fi,V)}},{key:"handleLivestreamStateChanged",value:function(V){this.livestreamState=V.status,this.eventEmitter.emit(Oi,V)}},{key:"handleHlsStateChanged",value:function(V){this.hlsState=V.status,V.status=="HLS_PLAYABLE"?this.hlsUrls={downstreamUrl:V.downstreamUrl,playbackHlsUrl:V.playbackHlsUrl,livestreamUrl:V.livestreamUrl}:V.status=="HLS_STOPPED"&&(this.hlsUrls={downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),this.eventEmitter.emit($i,V)}},{key:"handleTranscriptionStateChanged",value:function(V){this.transcriptionState=V.status,this.eventEmitter.emit(io,V)}},{key:"handleTranscriptionText",value:function(V){this.eventEmitter.emit(so,V)}},{key:"handleRecordingStarted",value:function(){this.eventEmitter.emit(Yn)}},{key:"handleRecordingStopped",value:function(){this.eventEmitter.emit(xi)}},{key:"handleLivestreamStarted",value:function(){this.eventEmitter.emit(es)}},{key:"handleLivestreamStopped",value:function(){this.eventEmitter.emit(Es)}},{key:"handleHlsStarted",value:function(V){this.eventEmitter.emit(ks,V)}},{key:"handleHlsStopped",value:function(){this.eventEmitter.emit(Xs)}},{key:"handleWhiteboardStarted",value:function(V){this.eventEmitter.emit($a,V)}},{key:"handleWhiteboardStopped",value:function(V){(function(K){if(K==null)throw new TypeError("Cannot destructure "+K)})(V),this.eventEmitter.emit(qa)}},{key:"handleAddCharacter",value:function(V){var K,J=V.id,Q=(K=this.characters.get(J))!==null&&K!==void 0?K:new et(Se(Se({},V),{},{state:hi.CHARACTER_LISTENING,roomClient:this.roomClient}));this.characters.set(J,Q),this.eventEmitter.emit(Ca,Q),Q.eventEmitter.emit(Ca)}},{key:"handleInitCharacter",value:function(V){this.characters.set(V.id,V)}},{key:"handleRemoveCharacter",value:function(V){var K=V.id;if(this.characters.has(K)){var J=this.characters.get(K);this.eventEmitter.emit(Pa,J),J.eventEmitter.emit(Pa),this.characters.delete(K)}}},{key:"handleCharacterStateChanged",value:function(V){var K=V.id;this.characters.has(K)&&this.characters.get(K).handleCharacterStateChanged(V)}},{key:"handleCharacterMessage",value:function(V){var K=V.id;this.characters.has(K)&&this.characters.get(K).handleCharacterMessage(V)}},{key:"handleVideoStateChanged",value:function(V){this.eventEmitter.emit(Ka,V)}},{key:"handleVideoSeeked",value:function(V){var K=V.currentTime;this.eventEmitter.emit(Ga,{currentTime:K})}},{key:"handlePinStateChanged",value:function(V){var K=V.peerId,J=V.state,Q=V.pinnedBy;this.eventEmitter.emit(Za,{participantId:K,state:J,pinnedBy:Q})}},{key:"handleMeetingStateChanged",value:function(V){var K=V.state;this.eventEmitter.emit(no,{state:K})}},{key:"handleVideoQualityChanged",value:function(V){var K=V.peerId,J=V.prevQuality,Q=V.currentQuality,Te=this.participants.get(K)||this.characters.get(K);Te&&Te&&Te.videoQualityChanged(J,Q)}},{key:"handleMicRequested",value:function(V){var K=this,J=V.peerId;this.eventEmitter.emit(Ja,{participantId:J,accept:function(){return K.unmuteMic()},reject:function(){}})}},{key:"handleWebcamRequested",value:function(V){var K=this,J=V.peerId;this.eventEmitter.emit(Qa,{participantId:J,accept:function(){return K.enableWebcam()},reject:function(){}})}},{key:"handleConnectionParticipantJoin",value:function(V){var K=V.roomId,J=V.peer,Q=this.connections.get(K);Q!=null&&Q.meeting.participantJoin(J)}},{key:"handleConnectionParticipantLeft",value:function(V){var K=V.roomId,J=V.peerId,Q=this.connections.get(K);Q!=null&&Q.meeting.participantLeft(J)}},{key:"handleConnectionOpen",value:function(V){var K=V.peers,J=V.roomId,Q=V.payload,Te=new Pe({roomId:J,peers:K,payload:Q});this.connections.set(Te.id,Te),this.eventEmitter.emit(eo,Te)}},{key:"handleConnectionClose",value:function(V){var K=V.roomId;this.connections.get(K)!=null&&(this.connections.delete(K),this.eventEmitter.emit(to,K))}},{key:"handleSwitchMeeting",value:function(V){var K=V.roomId,J=V.token,Q=V.payload,Te=V.peerId,Le=V.connectionPeerId,at=V.connectionRoomId,Ce=Te?{meetingId:K,payload:Q,token:J,participantId:Te}:{meetingId:K,payload:Q,token:J,connectionParticipantId:Le,connectionMeetingId:at};this.eventEmitter.emit(ro,Ce)}},{key:"handleConnectionChatMessage",value:function(V){var K=V.roomId,J=V.peerId,Q=V.message,Te=this.connections.get(K);Te!=null&&Te.meeting.sendChatMessageEvent({participantId:J,message:Q})}},{key:"connectTo",value:(M=(0,p.A)(w().mark(function V(K){var J,Q;return w().wrap(function(Te){for(;;)switch(Te.prev=Te.next){case 0:return J=K.meetingId,Q=K.payload,Te.next=3,this.roomClient.openConnection({roomId:J,payload:Q});case 3:case"end":return Te.stop()}},V,this)})),function(V){return M.apply(this,arguments)})},{key:"selectedCameraDevice",get:function(){var V;return(V=this.roomClient._webcam)===null||V===void 0?void 0:V.device}},{key:"selectedMicrophoneDevice",get:function(){var V;return(V=this.roomClient._mic)===null||V===void 0?void 0:V.device}},{key:"on",value:function(V,K){switch(V){case Rt:case yr:case Yt:case mr:case $r:case tn:case _n:case kn:case fi:case Yn:case xi:case Oi:case es:case Es:case ks:case Xs:case $i:case io:case so:case Ya:case Xa:case $a:case qa:case Ca:case Pa:case ct:case Vt:case Ka:case Ga:case Ja:case Qa:case Za:case eo:case to:case ro:case no:case Kt:case qt:this.eventEmitter.on(V,K);break;default:throw new Error("Invalid event type")}}},{key:"off",value:function(V,K){switch(V){case Rt:case yr:case Yt:case mr:case $r:case tn:case _n:case kn:case fi:case Yn:case xi:case Oi:case es:case Es:case $i:case ks:case Xs:case io:case so:case Ya:case Xa:case $a:case qa:case Ca:case Pa:case ct:case Vt:case Ka:case Ga:case Ja:case Qa:case Za:case eo:case to:case ro:case no:case qt:case Kt:this.eventEmitter.off(V,K);break;default:throw new Error("Invalid event type")}}}]);var M,A,B,q,ee,te,ce,le}();function Y(M){var A=M.topic,B=M.message,q=M.senderId,ee=M.timestamp,te=M.senderName,ce=M.id,le=M.payload;A&&B&&He(Cs,this).emit(A,{message:B,senderId:q,timestamp:ee,topic:A,senderName:te,id:ce,payload:le})}function it(M){var A=M.peerId,B=M.mode;A===this.localParticipant.id?this.localParticipant.mode=B:this.participants.get(A).mode=B,this.eventEmitter.emit(Kt,{participantId:A,mode:B})}var vt=a(7080),Xn=a(5071),Cn=a(2107),zs=a(4973),xa=a(9027);function No(M,A,B){return A=Mt(A),di(M,Tl()?Reflect.construct(A,B||[],Mt(M).constructor):A.apply(M,B))}function Tl(){try{var M=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Tl=function(){return!!M})()}var ao=function(M){function A(B,q,ee,te){return(0,o.A)(this,A),No(this,A,[B,q,ee,te])}return Pi(A,M),(0,E.A)(A)}((0,E.A)(function M(A,B,q,ee){(0,o.A)(this,M),this.deviceId=A,this.groupId=B,this.kind=q,this.label=ee})),wc=function(M){function A(B,q,ee,te){return(0,o.A)(this,A),No(this,A,[B,q,ee,te])}return Pi(A,M),(0,E.A)(A)}(ao),bc=function(M){function A(B,q,ee,te){return(0,o.A)(this,A),No(this,A,[B,q,ee,te])}return Pi(A,M),(0,E.A)(A)}(ao),xl=function(M){function A(B,q,ee,te){return(0,o.A)(this,A),No(this,A,[B,q,ee,te])}return Pi(A,M),(0,E.A)(A)}(ao),wi={AUDIO:"audio",VIDEO:"video",AUDIO_AND_VIDEO:"audio_video"},hd=(a(328),a(7654));function jo(M,A){return M==null||A==null?NaN:M<A?-1:M>A?1:M>=A?0:NaN}function fd(M,A){return M==null||A==null?NaN:A<M?-1:A>M?1:A>=M?0:NaN}function Ol(M){let A,B,q;function ee(te,ce,le=0,V=te.length){if(le<V){if(A(ce,ce)!==0)return V;do{const K=le+V>>>1;B(te[K],ce)<0?le=K+1:V=K}while(le<V)}return le}return M.length!==2?(A=jo,B=(te,ce)=>jo(M(te),ce),q=(te,ce)=>M(te)-ce):(A=M===jo||M===fd?M:md,B=M,q=M),{left:ee,center:function(te,ce,le=0,V=te.length){const K=ee(te,ce,le,V-1);return K>le&&q(te[K-1],ce)>-q(te[K],ce)?K-1:K},right:function(te,ce,le=0,V=te.length){if(le<V){if(A(ce,ce)!==0)return V;do{const K=le+V>>>1;B(te[K],ce)<=0?le=K+1:V=K}while(le<V)}return le}}}function md(){return 0}const gd=Ol(jo),vd=gd.right,yd=(Ol(function(M){return M===null?NaN:+M}).center,vd);function _d(M,A){switch(arguments.length){case 0:break;case 1:this.range(M);break;default:this.range(A).domain(M)}return this}function Zs(){var M,A=[.5],B=[0,1],q=1;function ee(te){return te!=null&&te<=te?B[yd(A,te,0,q)]:M}return ee.domain=function(te){return arguments.length?(A=Array.from(te),q=Math.min(A.length,B.length-1),ee):A.slice()},ee.range=function(te){return arguments.length?(B=Array.from(te),q=Math.min(A.length,B.length-1),ee):B.slice()},ee.invertExtent=function(te){var ce=B.indexOf(te);return[A[ce-1],A[ce]]},ee.unknown=function(te){return arguments.length?(M=te,ee):M},ee.copy=function(){return Zs().domain(A).range(B).unknown(M)},_d.apply(ee,arguments)}function Dl(M,A){var B=Object.keys(M);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(M);A&&(q=q.filter(function(ee){return Object.getOwnPropertyDescriptor(M,ee).enumerable})),B.push.apply(B,q)}return B}function ds(M){for(var A=1;A<arguments.length;A++){var B=arguments[A]!=null?arguments[A]:{};A%2?Dl(Object(B),!0).forEach(function(q){lr(M,q,B[q])}):Object.getOwnPropertyDescriptors?Object.defineProperties(M,Object.getOwnPropertyDescriptors(B)):Dl(Object(B)).forEach(function(q){Object.defineProperty(M,q,Object.getOwnPropertyDescriptor(B,q))})}return M}function Di(M,A){if(!(M instanceof A))throw new TypeError("Cannot call a class as a function")}function wd(M,A){for(var B=0;B<A.length;B++){var q=A[B];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(M,Al(q.key),q)}}function Ii(M,A,B){return A&&wd(M.prototype,A),Object.defineProperty(M,"prototype",{writable:!1}),M}function lr(M,A,B){return(A=Al(A))in M?Object.defineProperty(M,A,{value:B,enumerable:!0,configurable:!0,writable:!0}):M[A]=B,M}function Bo(M,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(A&&A.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),Object.defineProperty(M,"prototype",{writable:!1}),A&&Sc(M,A)}function un(M){return un=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(A){return A.__proto__||Object.getPrototypeOf(A)},un(M)}function Sc(M,A){return Sc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(B,q){return B.__proto__=q,B},Sc(M,A)}function ea(M,A){if(M==null)return{};var B,q,ee=function(ce,le){if(ce==null)return{};var V,K,J={},Q=Object.keys(ce);for(K=0;K<Q.length;K++)V=Q[K],le.indexOf(V)>=0||(J[V]=ce[V]);return J}(M,A);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(M);for(q=0;q<te.length;q++)B=te[q],A.indexOf(B)>=0||Object.prototype.propertyIsEnumerable.call(M,B)&&(ee[B]=M[B])}return ee}function Dr(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function Fo(M){var A=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var B,q=un(M);if(A){var ee=un(this).constructor;B=Reflect.construct(q,arguments,ee)}else B=q.apply(this,arguments);return function(te,ce){if(ce&&(typeof ce=="object"||typeof ce=="function"))return ce;if(ce!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Dr(te)}(this,B)}}function Il(M,A){for(;!Object.prototype.hasOwnProperty.call(M,A)&&(M=un(M))!==null;);return M}function Rc(){return Rc=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(M,A,B){var q=Il(M,A);if(q){var ee=Object.getOwnPropertyDescriptor(q,A);return ee.get?ee.get.call(arguments.length<3?M:B):ee.value}},Rc.apply(this,arguments)}function Ec(M,A,B,q){return Ec=typeof Reflect<"u"&&Reflect.set?Reflect.set:function(ee,te,ce,le){var V,K=Il(ee,te);if(K){if((V=Object.getOwnPropertyDescriptor(K,te)).set)return V.set.call(le,ce),!0;if(!V.writable)return!1}if(V=Object.getOwnPropertyDescriptor(le,te)){if(!V.writable)return!1;V.value=ce,Object.defineProperty(le,te,V)}else lr(le,te,ce);return!0},Ec(M,A,B,q)}function Nn(M,A,B,q,ee){if(!Ec(M,A,B,q||M)&&ee)throw new TypeError("failed to set property");return B}function Mi(M,A){return function(B){if(Array.isArray(B))return B}(M)||function(B,q){var ee=B==null?null:typeof Symbol<"u"&&B[Symbol.iterator]||B["@@iterator"];if(ee!=null){var te,ce,le,V,K=[],J=!0,Q=!1;try{if(le=(ee=ee.call(B)).next,q===0){if(Object(ee)!==ee)return;J=!1}else for(;!(J=(te=le.call(ee)).done)&&(K.push(te.value),K.length!==q);J=!0);}catch(Te){Q=!0,ce=Te}finally{try{if(!J&&ee.return!=null&&(V=ee.return(),Object(V)!==V))return}finally{if(Q)throw ce}}return K}}(M,A)||Ml(M,A)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function ta(M){return function(A){if(Array.isArray(A))return kc(A)}(M)||function(A){if(typeof Symbol<"u"&&A[Symbol.iterator]!=null||A["@@iterator"]!=null)return Array.from(A)}(M)||Ml(M)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Ml(M,A){if(M){if(typeof M=="string")return kc(M,A);var B=Object.prototype.toString.call(M).slice(8,-1);return B==="Object"&&M.constructor&&(B=M.constructor.name),B==="Map"||B==="Set"?Array.from(M):B==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(B)?kc(M,A):void 0}}function kc(M,A){(A==null||A>M.length)&&(A=M.length);for(var B=0,q=new Array(A);B<A;B++)q[B]=M[B];return q}function Al(M){var A=function(B,q){if(typeof B!="object"||B===null)return B;var ee=B[Symbol.toPrimitive];if(ee!==void 0){var te=ee.call(B,q||"default");if(typeof te!="object")return te;throw new TypeError("@@toPrimitive must return a primitive value.")}return(q==="string"?String:Number)(B)}(M,"string");return typeof A=="symbol"?A:String(A)}function he(M,A){return function(B,q){return q.get?q.get.call(B):q.value}(M,Ll(M,A,"get"))}function Ft(M,A,B){return function(q,ee,te){if(ee.set)ee.set.call(q,te);else{if(!ee.writable)throw new TypeError("attempted to set read only private field");ee.value=te}}(M,Ll(M,A,"set"),B),B}function Ll(M,A,B){if(!A.has(M))throw new TypeError("attempted to "+B+" private field on non-instance");return A.get(M)}function nr(M,A,B){if(!A.has(M))throw new TypeError("attempted to get private field on non-instance");return B}function Nl(M,A){if(A.has(M))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ut(M,A,B){Nl(M,A),A.set(M,B)}function Zn(M,A){Nl(M,A),A.add(M)}var Uo="https://speed.cloudflare.com",jl={autoStart:!0,downloadApiUrl:"".concat(Uo,"/__down"),uploadApiUrl:"".concat(Uo,"/__up"),logMeasurementApiUrl:null,logAimApiUrl:"https://aim.cloudflare.com/__log",turnServerUri:"turn.speed.cloudflare.com:50000",turnServerCredsApiUrl:"".concat(Uo,"/turn-creds"),turnServerUser:null,turnServerPass:null,rpkiInvalidHost:"invalid.rpki.cloudflare.com",cfTraceUrl:"".concat(Uo,"/cdn-cgi/trace"),includeCredentials:!1,measurements:[{type:"latency",numPackets:1},{type:"download",bytes:1e5,count:1,bypassMinDuration:!0},{type:"latency",numPackets:20},{type:"download",bytes:1e5,count:9},{type:"download",bytes:1e6,count:8},{type:"upload",bytes:1e5,count:8},{type:"packetLoss",numPackets:1e3,batchSize:10,batchWaitTime:10,responsesWaitTime:3e3},{type:"upload",bytes:1e6,count:6},{type:"download",bytes:1e7,count:6},{type:"upload",bytes:1e7,count:4},{type:"download",bytes:25e6,count:4},{type:"upload",bytes:25e6,count:4},{type:"download",bytes:1e8,count:3},{type:"upload",bytes:5e7,count:3},{type:"download",bytes:25e7,count:2}],measureDownloadLoadedLatency:!0,measureUploadLoadedLatency:!0,loadedLatencyThrottle:400,bandwidthFinishRequestDuration:1e3,estimatedServerTime:10,latencyPercentile:.5,bandwidthPercentile:.9,bandwidthMinRequestDuration:10,loadedRequestMinDuration:250,loadedLatencyMaxPoints:20},Bl={aimMeasurementScoring:{packetLoss:Zs([.01,.05,.25,.5],[10,5,0,-10,-20]),latency:Zs([10,20,50,100,500],[20,10,5,0,-10,-20]),loadedLatencyIncrease:Zs([10,20,50,100,500],[20,10,5,0,-10,-20]),jitter:Zs([10,20,100,500],[10,5,0,-10,-20]),download:Zs([1e6,1e7,5e7,1e8],[0,5,10,20,30]),upload:Zs([1e6,1e7,5e7,1e8],[0,5,10,20,30])},aimExperiencesDefs:{streaming:{input:["latency","packetLoss","download","loadedLatencyIncrease"],pointThresholds:[15,20,40,60]},gaming:{input:["latency","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,30]},rtc:{input:["latency","jitter","packetLoss","loadedLatencyIncrease"],pointThresholds:[5,15,25,40]}}},bd=function(M){var A=M.headers.get("server-timing");if(A){var B=A.match(/dur=([0-9.]+)/);if(B)return+B[1]}},Sd=function(M){return M.responseStart-M.requestStart},Rd=function(M){return M.responseEnd-M.responseStart},Ed=function(M){return M.ping+M.payloadDownloadTime},kd=function(M){return M.ttfb},Cd=function(M,A){var B=M.duration,q=M.transferSize,ee=B/1e3;return ee?8*(q||1.005*+A)/ee:void 0},X=function(M,A){var B=M.duration/1e3;return B?8*A*1.005/B:void 0},F=hd(function(M){return"0".repeat(M)}),U=new WeakMap,z=new WeakMap,H=new WeakMap,re=new WeakMap,se=new WeakMap,Ie=new WeakMap,Re=new WeakMap,wt=new WeakMap,qe=new WeakMap,yt=new WeakMap,ae=new WeakMap,st=new WeakMap,Je=new WeakMap,lt=new WeakMap,ye=new WeakMap,Ge=new WeakMap,ir=new WeakMap,er=new WeakMap,ar=new WeakMap,or=new WeakMap,rr=new WeakMap,pr=new WeakMap,Gt=new WeakSet,Wt=new WeakSet,xr=new WeakSet,tr=new WeakSet;function ur(M){var A=this;M!==he(this,st)&&(Ft(this,st,M),setTimeout(function(){return he(A,re).call(A,he(A,st))}))}function Ar(M,A){var B=this,q=he(this,qe)[M],ee=q.bytes,te=q.dir,ce=he(this,lt),le=ce[te].hasOwnProperty(ee)?ce[te][ee]:{timings:[],numMeasurements:he(this,qe).filter(function(V){var K=V.bytes,J=V.dir;return ee===K&&te===J}).map(function(V){return V.count}).reduce(function(V,K){return V+K},0)};A&&le.timings.push(A),le.timings=le.timings.slice(-le.numMeasurements),ce[te][ee]=le,A?setTimeout(function(){he(B,Ie).call(B,ds({type:te,bytes:ee},A),ce)}):he(this,se).call(this,he(this,qe)[M],ce)}function nn(){var M=this,A=he(this,qe),B=A[he(this,ye)];if(he(this,Ge)>=B.count){var q=he(this,Je);if(he(this,er)>this.finishRequestDuration&&!B.bypassMinDuration){var ee=B.dir;he(this,Je)[ee]=!0,Object.values(he(this,Je)).every(function(Ce){return Ce})&&he(this,Re).call(this,he(this,lt))}Ft(this,Ge,0),Ft(this,er,-1/0),performance.clearResourceTimings();do Ft(this,ye,he(this,ye)+1);while(he(this,ye)<A.length&&q[A[he(this,ye)].dir]);if(he(this,ye)>=A.length)return Ft(this,Je,{down:!0,up:!0}),nr(this,Gt,ur).call(this,!1),void he(this,Re).call(this,he(this,lt));B=A[he(this,ye)]}var te=he(this,ye);he(this,Ge)===0&&nr(this,Wt,Ar).call(this,te);var ce=B,le=ce.bytes,V=ce.dir==="down",K=he(this,V?yt:ae),J=Object.assign({},he(this,U));V&&(J.bytes="".concat(le));var Q,Te="".concat(K.startsWith("http")||K.startsWith("//")?"":window.location.origin).concat(K,"?").concat(Object.entries(J).map(function(Ce){var Qe=Mi(Ce,2),Oe=Qe[0],pe=Qe[1];return"".concat(Oe,"=").concat(pe)}).join("&")),Le=Object.assign({},V?{}:{method:"POST",body:F(le)},he(this,z)),at=Ft(this,rr,fetch(Te,Le).then(function(Ce){if(Ce.ok)return Ce;throw Error(Ce.statusText)}).then(function(Ce){return M.getServerTime&&(Q=M.getServerTime(Ce)),Ce}).then(function(Ce){return Ce.text().then(function(Qe){return he(M,H)&&he(M,H).call(M,{url:Te,headers:Ce.headers,body:Qe}),Qe})}).then(function(Ce,Qe){if(at._cancel)Qe("cancelled");else{var Oe=performance.getEntriesByName(Te).slice(-1)[0],pe={transferSize:Oe.transferSize,ttfb:Sd(Oe),payloadDownloadTime:Rd(Oe),serverTime:Q||-1,measTime:new Date};if(pe.ping=Math.max(.01,pe.ttfb-(Q||he(M,or))),pe.duration=(V?Ed:kd)(pe),pe.bps=(V?Cd:X)(pe,le),V&&le){var Pt=+le;pe.transferSize&&(pe.transferSize<Pt||pe.transferSize/Pt>1.05)&&console.warn("Requested ".concat(Pt,"B but received ").concat(pe.transferSize,"B (").concat(Math.round(pe.transferSize/Pt*1e4)/100,"%)."))}nr(M,Wt,Ar).call(M,te,pe);var Ke=pe.duration;Ft(M,er,he(M,er)<0?Ke:Math.min(he(M,er),Ke)),Ft(M,Ge,he(M,Ge)+1),Ft(M,ir,0),he(M,ar)?Ft(M,pr,setTimeout(function(){return nr(M,xr,nn).call(M)},he(M,ar))):nr(M,xr,nn).call(M)}}).catch(function(Ce){var Qe,Oe;at._cancel||(console.warn("Error fetching ".concat(Te,": ").concat(Ce)),Ft(M,ir,(Qe=he(M,ir),Oe=Qe++,Qe)),Oe<20?nr(M,xr,nn).call(M):(Ft(M,ir,0),nr(M,Gt,ur).call(M,!1),he(M,wt).call(M,"Connection failed to ".concat(Te,". Gave up after ").concat(20," retries."))))}))}function fn(){var M=he(this,rr);M&&(M._cancel=!0)}var cr=function(){function M(A){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},q=B.downloadApiUrl,ee=B.uploadApiUrl,te=B.throttleMs,ce=te===void 0?0:te,le=B.estimatedServerTime,V=le===void 0?0:le;if(Di(this,M),Zn(this,tr),Zn(this,xr),Zn(this,Wt),Zn(this,Gt),Ut(this,U,{writable:!0,value:{}}),Ut(this,z,{writable:!0,value:{}}),lr(this,"finishRequestDuration",1e3),lr(this,"getServerTime",bd),Ut(this,H,{writable:!0,value:function(K){return K}}),Ut(this,re,{writable:!0,value:function(){}}),Ut(this,se,{writable:!0,value:function(){}}),Ut(this,Ie,{writable:!0,value:function(){}}),Ut(this,Re,{writable:!0,value:function(){}}),Ut(this,wt,{writable:!0,value:function(){}}),Ut(this,qe,{writable:!0,value:void 0}),Ut(this,yt,{writable:!0,value:void 0}),Ut(this,ae,{writable:!0,value:void 0}),Ut(this,st,{writable:!0,value:!1}),Ut(this,Je,{writable:!0,value:{down:!1,up:!1}}),Ut(this,lt,{writable:!0,value:{down:{},up:{}}}),Ut(this,ye,{writable:!0,value:0}),Ut(this,Ge,{writable:!0,value:0}),Ut(this,ir,{writable:!0,value:0}),Ut(this,er,{writable:!0,value:-1/0}),Ut(this,ar,{writable:!0,value:0}),Ut(this,or,{writable:!0,value:0}),Ut(this,rr,{writable:!0,value:void 0}),Ut(this,pr,{writable:!0,value:void 0}),!A)throw new Error("Missing measurements argument");if(!q)throw new Error("Missing downloadApiUrl argument");if(!ee)throw new Error("Missing uploadApiUrl argument");Ft(this,qe,A),Ft(this,yt,q),Ft(this,ae,ee),Ft(this,ar,ce),Ft(this,or,Math.max(0,V))}return Ii(M,[{key:"results",get:function(){return he(this,lt)}},{key:"qsParams",get:function(){return he(this,U)},set:function(A){Ft(this,U,A)}},{key:"fetchOptions",get:function(){return he(this,z)},set:function(A){Ft(this,z,A)}},{key:"responseHook",set:function(A){Ft(this,H,A)}},{key:"onRunningChange",set:function(A){Ft(this,re,A)}},{key:"onNewMeasurementStarted",set:function(A){Ft(this,se,A)}},{key:"onMeasurementResult",set:function(A){Ft(this,Ie,A)}},{key:"onFinished",set:function(A){Ft(this,Re,A)}},{key:"onConnectionError",set:function(A){Ft(this,wt,A)}},{key:"pause",value:function(){clearTimeout(he(this,pr)),nr(this,tr,fn).call(this),nr(this,Gt,ur).call(this,!1)}},{key:"play",value:function(){he(this,st)||(nr(this,Gt,ur).call(this,!0),nr(this,xr,nn).call(this))}}]),M}(),sn=["measureParallelLatency","parallelLatencyThrottleMs","downloadApiUrl","uploadApiUrl","estimatedServerTime"],Ur=new WeakMap,wn=new WeakSet;function bn(M){var A=this;he(this,Ur)&&(M?setTimeout(function(){return he(A,Ur).play()},20):he(this,Ur).pause())}var Ir=function(M){Bo(B,M);var A=Fo(B);function B(q){var ee,te,ce,le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},V=le.measureParallelLatency,K=V!==void 0&&V,J=le.parallelLatencyThrottleMs,Q=J===void 0?100:J,Te=le.downloadApiUrl,Le=le.uploadApiUrl,at=le.estimatedServerTime,Ce=at===void 0?0:at,Qe=ea(le,sn);return Di(this,B),Zn(Dr(ce=A.call(this,q,ds({downloadApiUrl:Te,uploadApiUrl:Le,estimatedServerTime:Ce},Qe))),wn),Ut(Dr(ce),Ur,{writable:!0,value:void 0}),K&&(Ft(Dr(ce),Ur,new cr([{dir:"down",bytes:0,count:1/0,bypassMinDuration:!0}],{downloadApiUrl:Te,uploadApiUrl:Le,estimatedServerTime:Ce,throttleMs:Q})),he(Dr(ce),Ur).qsParams={during:"".concat(q[0].dir,"load")},Nn((ee=Dr(ce),un(B.prototype)),"onRunningChange",nr(Dr(ce),wn,bn),ee,!0),Nn((te=Dr(ce),un(B.prototype)),"onConnectionError",function(){return he(Dr(ce),Ur).pause()},te,!0)),ce}return Ii(B,[{key:"latencyResults",get:function(){return he(this,Ur)&&he(this,Ur).results.down[0].timings}},{key:"onParallelLatencyResult",set:function(q){he(this,Ur)&&(he(this,Ur).onMeasurementResult=function(ee){return q(ee)})}},{key:"fetchOptions",get:function(){return Rc(un(B.prototype),"fetchOptions",this)},set:function(q){Nn(un(B.prototype),"fetchOptions",q,this,!0),he(this,Ur)&&(he(this,Ur).fetchOptions=q)}},{key:"onRunningChange",set:function(q){var ee=this;Nn(un(B.prototype),"onRunningChange",function(te){nr(ee,wn,bn).call(ee,te),q(te)},this,!0)}},{key:"onConnectionError",set:function(q){var ee=this;Nn(un(B.prototype),"onConnectionError",function(){he(ee,Ur)&&he(ee,Ur).pause(),q.apply(void 0,arguments)},this,!0)}}]),B}(cr),jn=["measurementId","logApiUrl"],jt=new WeakMap,gn=new WeakMap,Lt=new WeakMap,hr=new WeakMap,qr=new WeakSet,an=new WeakSet;function on(M){he(this,hr)&&(Ft(this,Lt,+M.headers.get("cf-meta-request-time")),Ft(this,gn,M.body.slice(-300).split("___").pop()))}function Xr(M){if(he(this,hr)){var A={type:M.type,bytes:M.bytes,ping:Math.round(M.ping),ttfb:Math.round(M.ttfb),payloadDownloadTime:Math.round(M.payloadDownloadTime),duration:Math.round(M.duration),transferSize:Math.round(M.transferSize),serverTime:Math.round(M.serverTime),token:he(this,gn),requestTime:he(this,Lt),measId:he(this,jt)};Ft(this,gn,null),Ft(this,Lt,null),fetch(he(this,hr),ds({method:"POST",body:JSON.stringify(A)},this.fetchOptions))}}var bi=function(M){Bo(B,M);var A=Fo(B);function B(q){var ee,te,ce,le,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=V.measurementId,J=V.logApiUrl,Q=ea(V,jn);return Di(this,B),Zn(Dr(le=A.call(this,q,Q)),an),Zn(Dr(le),qr),Ut(Dr(le),jt,{writable:!0,value:void 0}),Ut(Dr(le),gn,{writable:!0,value:void 0}),Ut(Dr(le),Lt,{writable:!0,value:void 0}),Ut(Dr(le),hr,{writable:!0,value:void 0}),Ft(Dr(le),jt,K),Ft(Dr(le),hr,J),Nn((ee=Dr(le),un(B.prototype)),"qsParams",J?{measId:he(Dr(le),jt)}:{},ee,!0),Nn((te=Dr(le),un(B.prototype)),"responseHook",function(Te){return nr(Dr(le),qr,on).call(Dr(le),Te)},te,!0),Nn((ce=Dr(le),un(B.prototype)),"onMeasurementResult",function(Te){return nr(Dr(le),an,Xr).call(Dr(le),Te)},ce,!0),le}return Ii(B,[{key:"qsParams",set:function(q){Nn(un(B.prototype),"qsParams",he(this,hr)?ds({measId:he(this,jt)},q):q,this,!0)}},{key:"responseHook",set:function(q){var ee=this;Nn(un(B.prototype),"responseHook",function(te){q(te),nr(ee,qr,on).call(ee,te)},this,!0)}},{key:"onMeasurementResult",set:function(q){var ee=this;Nn(un(B.prototype),"onMeasurementResult",function(te){for(var ce=arguments.length,le=new Array(ce>1?ce-1:0),V=1;V<ce;V++)le[V-1]=arguments[V];q.apply(void 0,[te].concat(le)),nr(ee,an,Xr).call(ee,te)},this,!0)}}]),B}(Ir),Ai=new WeakMap,mi=new WeakMap,zn=new WeakMap,ei=new WeakSet,qi=new WeakSet,Li=new WeakSet,rn=function(){function M(A){if(Di(this,M),Zn(this,Li),Zn(this,qi),Zn(this,ei),Ut(this,Ai,{writable:!0,value:!1}),Ut(this,mi,{writable:!0,value:void 0}),Ut(this,zn,{writable:!0,value:void 0}),!A)throw new Error("Missing operation to perform");Ft(this,zn,A),this.play()}return Ii(M,[{key:"pause",value:function(){nr(this,Li,ti).call(this),nr(this,ei,Ni).call(this,!1)}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){he(this,Ai)||(nr(this,ei,Ni).call(this,!0),nr(this,qi,Bn).call(this))}}]),M}();function Ni(M){M!==he(this,Ai)&&Ft(this,Ai,M)}function Bn(){var M=this,A=Ft(this,mi,he(this,zn).call(this).then(function(){!A._cancel&&nr(M,qi,Bn).call(M)}))}function ti(){var M=he(this,mi);M&&(M._cancel=!0)}var Pn=new WeakMap,Si=function(){function M(){var A=this,B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=B.download,ee=B.upload;if(Di(this,M),lr(this,"qsParams",{}),lr(this,"fetchOptions",{}),Ut(this,Pn,{writable:!0,value:[]}),!q&&!ee)throw new Error("Missing at least one of download/upload config");[[q,"download"],[ee,"upload"]].filter(function(ce){return Mi(ce,1)[0]}).forEach(function(ce){var le=Mi(ce,2),V=le[0],K=le[1],J=V.apiUrl,Q=V.chunkSize;if(!J)throw new Error("Missing ".concat(K," apiUrl argument"));if(!Q)throw new Error("Missing ".concat(K," chunkSize argument"))});var te=function(ce){var le=ce.apiUrl,V=ce.qsParams,K=V===void 0?{}:V,J=ce.fetchOptions,Q=J===void 0?{}:J;return new rn(function(){var Te=Object.assign({},K,A.qsParams),Le="".concat(le.startsWith("http")||le.startsWith("//")?"":window.location.origin).concat(le,"?").concat(Object.entries(Te).map(function(Ce){var Qe=Mi(Ce,2),Oe=Qe[0],pe=Qe[1];return"".concat(Oe,"=").concat(pe)}).join("&")),at=Object.assign({},Q,A.fetchOptions);return fetch(Le,at).then(function(Ce){if(Ce.ok)return Ce;throw Error(Ce.statusText)}).then(function(Ce){return Ce.text()})})};q&&he(this,Pn).push(te({apiUrl:q.apiUrl,qsParams:{bytes:"".concat(q.chunkSize)}})),ee&&he(this,Pn).push(te({apiUrl:ee.apiUrl,fetchOptions:{method:"POST",body:"0".repeat(ee.chunkSize)}}))}return Ii(M,[{key:"pause",value:function(){he(this,Pn).forEach(function(A){return A.pause()})}},{key:"stop",value:function(){this.pause()}},{key:"play",value:function(){he(this,Pn).forEach(function(A){return A.play()})}}]),M}(),ji=["iceServers","acceptIceCandidate","dataChannelCfg"],ri=new WeakMap,ni=new WeakMap,ii=new WeakMap,Sn=new WeakMap,Hn=new WeakMap,si=function(){function M(){var A=this,B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=B.iceServers,ee=q===void 0?[]:q,te=B.acceptIceCandidate,ce=te===void 0?function(Le){var at=Le.protocol||"";if(!at&&Le.candidate){var Ce=Le.candidate.split(" ");Ce.length>=3&&(at=Ce[2])}return at.toLowerCase()==="udp"}:te,le=B.dataChannelCfg,V=le===void 0?{ordered:!1,maxRetransmits:0}:le,K=ea(B,ji);Di(this,M),lr(this,"onOpen",function(){}),lr(this,"onClose",function(){}),lr(this,"onMessageReceived",function(){}),Ut(this,ri,{writable:!0,value:!1}),Ut(this,ni,{writable:!0,value:void 0}),Ut(this,ii,{writable:!0,value:void 0}),Ut(this,Sn,{writable:!0,value:void 0}),Ut(this,Hn,{writable:!0,value:void 0});var J=new RTCPeerConnection(ds({iceServers:ee},K)),Q=new RTCPeerConnection(ds({iceServers:ee},K)),Te=J.createDataChannel("channel",V);Te.onopen=function(){Ft(A,ri,!0),A.onOpen()},Te.onclose=function(){return A.close()},Q.ondatachannel=function(Le){var at=Le.channel;at.onclose=function(){return A.close()},at.onmessage=function(Ce){return A.onMessageReceived(Ce.data)},Ft(A,Hn,at)},J.onicecandidate=function(Le){Le.candidate&&ce(Le.candidate)&&Q.addIceCandidate(Le.candidate)},Q.onicecandidate=function(Le){Le.candidate&&ce(Le.candidate)&&J.addIceCandidate(Le.candidate)},J.createOffer().then(function(Le){return J.setLocalDescription(Le)}).then(function(){return Q.setRemoteDescription(J.localDescription)}).then(function(){return Q.createAnswer()}).then(function(Le){return Q.setLocalDescription(Le)}).then(function(){return J.setRemoteDescription(Q.localDescription)}),Ft(this,ni,J),Ft(this,ii,Q),Ft(this,Sn,Te),Ft(this,ri,!1)}return Ii(M,[{key:"send",value:function(A){return he(this,Sn).send(A)}},{key:"close",value:function(){return he(this,ni)&&he(this,ni).close(),he(this,ii)&&he(this,ii).close(),he(this,Sn)&&he(this,Sn).close(),he(this,Hn)&&he(this,Hn).close(),he(this,ri)&&this.onClose(),Ft(this,ri,!1),this}}]),M}(),Tn=new WeakMap,Wn=new WeakMap,Lr=new WeakMap,Fn=new WeakMap,Nr=new WeakMap,_r=new WeakMap,mt=function(){function M(){var A=this,B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=B.turnServerUri,ee=B.turnServerCredsApi,te=B.turnServerCredsApiParser,ce=te===void 0?function(_t){return{turnServerUser:_t.username,turnServerPass:_t.credential}}:te,le=B.turnServerCredsApiIncludeCredentials,V=le!==void 0&&le,K=B.turnServerUser,J=B.turnServerPass,Q=B.numMsgs,Te=Q===void 0?100:Q,Le=B.batchSize,at=Le===void 0?10:Le,Ce=B.batchWaitTime,Qe=Ce===void 0?10:Ce,Oe=B.responsesWaitTime,pe=Oe===void 0?5e3:Oe,Pt=B.connectionTimeout,Ke=Pt===void 0?5e3:Pt;if(Di(this,M),Ut(this,Tn,{writable:!0,value:function(){}}),Ut(this,Wn,{writable:!0,value:function(){}}),Ut(this,Lr,{writable:!0,value:function(){}}),lr(this,"onMsgSent",function(){}),lr(this,"onAllMsgsSent",function(){}),lr(this,"onMsgReceived",function(){}),Ut(this,Fn,{writable:!0,value:{}}),Ut(this,Nr,{writable:!0,value:void 0}),Ut(this,_r,{writable:!0,value:void 0}),!q)throw new Error("Missing turnServerUri argument");if(!(K&&J||ee))throw new Error("Missing either turnServerCredsApi or turnServerUser+turnServerPass arguments");Ft(this,_r,Te),(K&&J?Promise.resolve({turnServerUser:K,turnServerPass:J}):fetch(ee,{credentials:V?"include":void 0}).then(function(_t){return _t.json()}).then(function(_t){if(_t.error)throw _t.error;return _t}).then(ce)).catch(function(_t){return he(A,Tn).call(A,_t)}).then(function(_t){var gt=_t.turnServerUser,bt=_t.turnServerPass,Ct=Ft(A,Nr,new si({iceServers:[{urls:"turn:".concat(q,"?transport=udp"),username:gt,credential:bt}],iceTransportPolicy:"relay"})),ze=!1;setTimeout(function(){ze||(Ct.close(),he(A,Wn).call(A,"ICE connection timeout!"))},Ke);var gr=he(A,Fn);Ct.onOpen=function(){ze=!0;var mn=A;(function zt(Dn){if(Dn<=Te){for(var ai=Dn;ai<=Math.min(Te,Dn+at-1);)gr[ai]=!1,Ct.send(ai),mn.onMsgSent(ai),ai++;setTimeout(function(){return zt(ai)},Qe)}else{mn.onAllMsgsSent(Object.keys(gr).length);var Ki=function(){Ct.close(),he(mn,Lr).call(mn,mn.results)},Ts=setTimeout(Ki,pe),ma=Object.values(he(mn,Fn)).filter(function(Vs){return!Vs}).length;Ct.onMessageReceived=function(Vs){clearTimeout(Ts),gr[Vs]=!0,mn.onMsgReceived(Vs),--ma<=0&&Object.values(he(mn,Fn)).every(function(Ri){return Ri})?Ki():Ts=setTimeout(Ki,pe)}}})(1)},Ct.onMessageReceived=function(mn){gr[mn]=!0,A.onMsgReceived(mn)}}).catch(function(_t){return he(A,Wn).call(A,_t.toString())})}return Ii(M,[{key:"onCredentialsFailure",set:function(A){Ft(this,Tn,A)}},{key:"onConnectionError",set:function(A){Ft(this,Wn,A)}},{key:"onFinished",set:function(A){Ft(this,Lr,A)}},{key:"results",get:function(){var A=he(this,_r),B=Object.keys(he(this,Fn)).length,q=Object.entries(he(this,Fn)).filter(function(ee){return!Mi(ee,2)[1]}).map(function(ee){return+Mi(ee,1)[0]});return{totalMessages:A,numMessagesSent:B,packetLoss:q.length/B,lostMessages:q}}}]),M}(),Ye=["downloadChunkSize","uploadChunkSize","downloadApiUrl","uploadApiUrl"],Bt=new WeakMap,Jr=function(M){Bo(B,M);var A=Fo(B);function B(){var q,ee,te,ce,le=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},V=le.downloadChunkSize,K=le.uploadChunkSize,J=le.downloadApiUrl,Q=le.uploadApiUrl,Te=ea(le,Ye);return Di(this,B),Ut(Dr(ce=A.call(this,Te)),Bt,{writable:!0,value:void 0}),(V||K)&&(Ft(Dr(ce),Bt,new Si({download:V?{apiUrl:J,chunkSize:V}:null,upload:K?{apiUrl:Q,chunkSize:K}:null})),Nn((q=Dr(ce),un(B.prototype)),"onCredentialsFailure",Nn((te=Dr(ce),un(B.prototype)),"onConnectionError",Nn((ee=Dr(ce),un(B.prototype)),"onFinished",function(){return he(Dr(ce),Bt).stop()},ee,!0),te,!0),q,!0)),ce}return Ii(B,[{key:"qsParams",set:function(q){he(this,Bt)&&(he(this,Bt).qsParams=q)}},{key:"fetchOptions",set:function(q){he(this,Bt)&&(he(this,Bt).fetchOptions=q)}},{key:"onCredentialsFailure",set:function(q){var ee=this;Nn(un(B.prototype),"onCredentialsFailure",function(){q.apply(void 0,arguments),he(ee,Bt)&&he(ee,Bt).stop()},this,!0)}},{key:"onConnectionError",set:function(q){var ee=this;Nn(un(B.prototype),"onConnectionError",function(){q.apply(void 0,arguments),he(ee,Bt)&&he(ee,Bt).stop()},this,!0)}},{key:"onFinished",set:function(q){var ee=this;Nn(un(B.prototype),"onFinished",function(){q.apply(void 0,arguments),he(ee,Bt)&&he(ee,Bt).stop()},this,!0)}}]),B}(mt),Vn=["reachable"],gi=Ii(function M(A){var B=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ee=q.timeout,te=ee===void 0?-1:ee,ce=q.fetchOptions,le=ce===void 0?{}:ce;Di(this,M),lr(this,"onFinished",function(){});var V=!1,K=function(J){var Q=J.reachable,Te=ea(J,Vn);V||(V=!0,B.onFinished(ds({targetUrl:A,reachable:Q},Te)))};fetch(A,le).then(function(J){K({reachable:!0,response:J})}).catch(function(J){K({reachable:!1,error:J})}),te>0&&setTimeout(function(){return K({reachable:!1,error:"Request timeout"})},te)}),ra=function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;if(!M.length)return 0;var B=M.slice().sort(function(ce,le){return ce-le}),q=(M.length-1)*A,ee=q%1;if(ee===0)return B[Math.round(q)];var te=[Math.floor,Math.ceil].map(function(ce){return B[ce(q)]});return te[0]+(te[1]-te[0])*ee},ts=new WeakMap,Et=new WeakMap,dn=function(){function M(A){var B=this;Di(this,M),lr(this,"getLatencyPoints",function(q){return q.timings.map(function(ee){return ee.ping})}),lr(this,"getLatency",function(q){return ra(B.getLatencyPoints(q),he(B,ts).latencyPercentile)}),lr(this,"getBandwidthPoints",function(q){return Object.entries(q).map(function(ee){var te=Mi(ee,2),ce=te[0];return te[1].timings.map(function(le){var V=le.bps,K=le.duration,J=le.ping,Q=le.measTime,Te=le.serverTime,Le=le.transferSize;return{bytes:+ce,bps:V,duration:K,ping:J,measTime:Q,serverTime:Te,transferSize:Le}})}).flat()}),lr(this,"getBandwidth",function(q){return ra(B.getBandwidthPoints(q).filter(function(ee){return ee.duration>=he(B,ts).bandwidthMinRequestDuration}).map(function(ee){return ee.bps}).filter(function(ee){return ee}),he(B,ts).bandwidthPercentile)}),lr(this,"getLoadedLatency",function(q){return B.getLatency({timings:he(B,Et).call(B,q)})}),lr(this,"getLoadedJitter",function(q){return B.getJitter({timings:he(B,Et).call(B,q)})}),lr(this,"getLoadedLatencyPoints",function(q){return B.getLatencyPoints({timings:he(B,Et).call(B,q)})}),lr(this,"getPacketLoss",function(q){return q.packetLoss}),lr(this,"getPacketLossDetails",function(q){return q}),lr(this,"getReachability",function(q){return!!q.reachable}),lr(this,"getReachabilityDetails",function(q){return{host:q.host,reachable:q.reachable}}),Ut(this,ts,{writable:!0,value:void 0}),Ut(this,Et,{writable:!0,value:function(q){return Object.values(q).filter(function(ee){return ee.timings.length&&Math.min.apply(Math,ta(ee.timings.map(function(te){return te.duration})))>=he(B,ts).loadedRequestMinDuration}).map(function(ee){return ee.sideLatency||[]}).flat().slice(-he(B,ts).loadedLatencyMaxPoints)}}),Ft(this,ts,A)}return Ii(M,[{key:"getJitter",value:function(A){var B=this.getLatencyPoints(A);return B.length<2?null:B.reduce(function(q,ee){var te=q.sumDeltas,ce=te===void 0?0:te,le=q.prevLatency;return{sumDeltas:ce+(le!==void 0?Math.abs(le-ee):0),prevLatency:ee}},{}).sumDeltas/(B.length-1)}}]),M}(),ha=["bad","poor","average","good","great"],Oa={loadedLatencyIncrease:function(M){return M.latency&&(M.downLoadedLatency||M.upLoadedLatency)?Math.max(M.downLoadedLatency,M.upLoadedLatency)-M.latency:void 0}},Da={packetLoss:0},Hs=new WeakMap,Fl=function(){function M(A){Di(this,M),Ut(this,Hs,{writable:!0,value:void 0}),Ft(this,Hs,A)}return Ii(M,[{key:"getScores",value:function(A){var B=Object.assign.apply(Object,ta(Object.entries(he(this,Hs).aimMeasurementScoring).map(function(q){var ee=Mi(q,2),te=ee[0],ce=ee[1],le=Oa.hasOwnProperty(te)?Oa[te](A):A[te];return le===void 0?Da.hasOwnProperty(te)?lr({},te,Da[te]):{}:lr({},te,le===void 0?0:+ce(le))})));return Object.assign.apply(Object,[{}].concat(ta(Object.entries(he(this,Hs).aimExperiencesDefs).filter(function(q){return Mi(q,2)[1].input.every(function(ee){return B.hasOwnProperty(ee)})}).map(function(q){var ee,te=Mi(q,2),ce=te[0],le=te[1],V=le.input,K=le.pointThresholds,J=Math.max(0,(ee=V.map(function(Te){return B[Te]}),ee.reduce(function(Te,Le){return Te+Le},0))),Q=Zs(K,[0,1,2,3,4])(J);return lr({},ce,{points:J,classificationIdx:Q,classificationName:ha[Q]})}))))}}]),M}(),Ia=new WeakMap,zo=new WeakMap,Cc=new WeakMap,On=new WeakMap,Pc=new WeakMap,Pd=new WeakMap,Ul=new WeakMap,zl=new WeakMap,Td=function(){function M(A){var B=this;Di(this,M),lr(this,"raw",void 0),lr(this,"getUnloadedLatency",function(){return he(B,On).call(B,"getLatency","latency")}),lr(this,"getUnloadedJitter",function(){return he(B,On).call(B,"getJitter","latency")}),lr(this,"getUnloadedLatencyPoints",function(){return he(B,On).call(B,"getLatencyPoints","latency",[])}),lr(this,"getDownLoadedLatency",function(){return he(B,On).call(B,"getLoadedLatency","download")}),lr(this,"getDownLoadedJitter",function(){return he(B,On).call(B,"getLoadedJitter","download")}),lr(this,"getDownLoadedLatencyPoints",function(){return he(B,On).call(B,"getLoadedLatencyPoints","download",[])}),lr(this,"getUpLoadedLatency",function(){return he(B,On).call(B,"getLoadedLatency","upload")}),lr(this,"getUpLoadedJitter",function(){return he(B,On).call(B,"getLoadedJitter","upload")}),lr(this,"getUpLoadedLatencyPoints",function(){return he(B,On).call(B,"getLoadedLatencyPoints","upload",[])}),lr(this,"getDownloadBandwidth",function(){return he(B,On).call(B,"getBandwidth","download")}),lr(this,"getDownloadBandwidthPoints",function(){return he(B,On).call(B,"getBandwidthPoints","download",[])}),lr(this,"getUploadBandwidth",function(){return he(B,On).call(B,"getBandwidth","upload")}),lr(this,"getUploadBandwidthPoints",function(){return he(B,On).call(B,"getBandwidthPoints","upload",[])}),lr(this,"getPacketLoss",function(){return he(B,On).call(B,"getPacketLoss","packetLoss")}),lr(this,"getPacketLossDetails",function(){return he(B,On).call(B,"getPacketLossDetails","packetLoss",void 0,!0)}),lr(this,"getScores",function(){return he(B,Cc).getScores(B.getSummary())}),Ut(this,Ia,{writable:!0,value:void 0}),Ut(this,zo,{writable:!0,value:void 0}),Ut(this,Cc,{writable:!0,value:void 0}),Ut(this,On,{writable:!0,value:function(q,ee){var te=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,ce=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return B.raw.hasOwnProperty(ee)&&B.raw[ee].started?ce&&B.raw[ee].error?{error:B.raw[ee].error}:he(B,zo)[q](B.raw[ee].results):te}}),Ut(this,Pc,{writable:!0,value:function(){return he(B,On).call(B,"getReachability","v4Reachability")}}),Ut(this,Pd,{writable:!0,value:function(){return he(B,On).call(B,"getReachabilityDetails","v4Reachability")}}),Ut(this,Ul,{writable:!0,value:function(){return he(B,On).call(B,"getReachability","v6Reachability")}}),Ut(this,zl,{writable:!0,value:function(){return he(B,On).call(B,"getReachabilityDetails","v6Reachability")}}),Ft(this,Ia,A),this.clear(),Ft(this,zo,new dn(he(this,Ia))),Ft(this,Cc,new Fl(he(this,Ia)))}return Ii(M,[{key:"isFinished",get:function(){return Object.values(this.raw).every(function(A){return A.finished})}},{key:"clear",value:function(){this.raw=Object.assign.apply(Object,[{}].concat(ta(ta(new Set(he(this,Ia).measurements.map(function(A){return A.type}))).map(function(A){return lr({},A,{started:!1,finished:!1,results:{}})}))))}},{key:"getSummary",value:function(){var A={download:this.getDownloadBandwidth,upload:this.getUploadBandwidth,latency:this.getUnloadedLatency,jitter:this.getUnloadedJitter,downLoadedLatency:this.getDownLoadedLatency,downLoadedJitter:this.getDownLoadedJitter,upLoadedLatency:this.getUpLoadedLatency,upLoadedJitter:this.getUpLoadedJitter,packetLoss:this.getPacketLoss,v4Reachability:he(this,Pc),v6Reachability:he(this,Ul)};return Object.assign.apply(Object,ta(Object.entries(A).map(function(B){var q=Mi(B,2),ee=q[0],te=(0,q[1])();return te===void 0?{}:lr({},ee,te)})))}}]),M}(),Ho=function(M){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return M&&Math.round(M*Math.pow(10,A))/Math.pow(10,A)},Wo=function(M){return M.map(function(A){return Ho(A,2)})},Tc=function(M){return M.map(function(A){return{bytes:+A.bytes,bps:Ho(A.bps)}})},Hl={latencyMs:["getUnloadedLatencyPoints",Wo],download:["getDownloadBandwidthPoints",Tc],upload:["getUploadBandwidthPoints",Tc],downLoadedLatencyMs:["getDownLoadedLatencyPoints",Wo],upLoadedLatencyMs:["getUpLoadedLatencyPoints",Wo],packetLoss:["getPacketLossDetails",function(M){return M.error?void 0:{numMessages:M.numMessagesSent,lossRatio:Ho(M.packetLoss,4)}}]},Wl=function(M,A){var B=A.apiUrl,q={};Object.entries(Hl).forEach(function(te){var ce=Mi(te,2),le=ce[0],V=Mi(ce[1],2),K=V[0],J=V[1],Q=J===void 0?function(Le){return Le}:J,Te=M[K]();Te&&(q[le]=Q(Te))});var ee=M.getScores();ee&&(q.scores=Object.assign.apply(Object,[{}].concat(ta(Object.entries(ee).map(function(te){var ce,le=Mi(te,2),V=le[0],K=le[1];return lr({},V,{points:(ce=K).points,classification:ce.classificationName})}))))),fetch(B,{method:"POST",body:JSON.stringify(q)})},xd=["type"],Xe=["numPackets"],Vo=["bytes"],$h=["latency","latencyUnderLoad","download","upload"],Iv=function(){return"".concat(Math.round(1e16*Math.random()))},qh=new WeakMap,xc=new WeakMap,$n=new WeakMap,Vl=new WeakMap,Od=new WeakMap,fa=new WeakMap,Oc=new WeakMap,Dd=new WeakMap,Id=new WeakMap,oo=new WeakMap,Md=new WeakMap,$l=new WeakSet,Kh=new WeakSet,ql=new WeakSet,$o=new WeakSet,Mv=new WeakSet,Av=new WeakSet,Ps=new WeakSet,nS=function(){function M(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Di(this,M),Zn(this,Ps),Zn(this,Av),Zn(this,Mv),Zn(this,$o),Zn(this,ql),Zn(this,Kh),Zn(this,$l),lr(this,"onRunningChange",function(){}),lr(this,"onResultsChange",function(){}),Ut(this,qh,{writable:!0,value:function(){}}),Ut(this,xc,{writable:!0,value:function(){}}),Ut(this,$n,{writable:!0,value:void 0}),Ut(this,Vl,{writable:!0,value:void 0}),Ut(this,Od,{writable:!0,value:Iv()}),Ut(this,fa,{writable:!0,value:-1}),Ut(this,Oc,{writable:!0,value:void 0}),Ut(this,Dd,{writable:!0,value:1e6}),Ut(this,Id,{writable:!0,value:1e6}),Ut(this,oo,{writable:!0,value:!1}),Ut(this,Md,{writable:!0,value:!1}),Ft(this,$n,Object.assign({},jl,A,Bl)),Ft(this,Vl,new Td(he(this,$n))),he(this,$n).autoStart&&this.play()}return Ii(M,[{key:"results",get:function(){return he(this,Vl)}},{key:"isRunning",get:function(){return he(this,oo)}},{key:"isFinished",get:function(){return he(this,Md)}},{key:"onFinish",set:function(A){Ft(this,qh,A)}},{key:"onError",set:function(A){Ft(this,xc,A)}},{key:"pause",value:function(){$h.includes(nr(this,ql,Ld).call(this))&&he(this,Oc).pause(),nr(this,$l,Ad).call(this,!1)}},{key:"play",value:function(){he(this,oo)||(nr(this,$l,Ad).call(this,!0),nr(this,Ps,Ws).call(this))}},{key:"restart",value:function(){nr(this,Mv,iS).call(this),this.play()}}]),M}();function Ad(M){M!==he(this,oo)&&(Ft(this,oo,M),this.onRunningChange(he(this,oo)))}function Lv(M){var A=this;M!==he(this,Md)&&(Ft(this,Md,M),M&&setTimeout(function(){return he(A,qh).call(A,A.results)}))}function Ld(){return he(this,fa)<0||he(this,fa)>=he(this,$n).measurements.length?null:he(this,$n).measurements[he(this,fa)].type}function Dc(){return he(this,Vl).raw[nr(this,ql,Ld).call(this)]||void 0}function iS(){nr(this,Av,sS).call(this),Ft(this,Od,Iv()),Ft(this,fa,-1),Ft(this,Oc,void 0),nr(this,$l,Ad).call(this,!1),nr(this,Kh,Lv).call(this,!1),he(this,Vl).clear()}function sS(){var M=he(this,Oc);M&&(M.onFinished=M.onConnectionError=M.onFail=M.onMsgReceived=M.onCredentialsFailure=M.onMeasurementResult=function(){},$h.includes(nr(this,ql,Ld).call(this))&&M.pause())}function Ws(){var M,A=this;if(!($h.includes(nr(this,ql,Ld).call(this))&&nr(this,$o,Dc).call(this)&&nr(this,$o,Dc).call(this).started)||nr(this,$o,Dc).call(this).finished||nr(this,$o,Dc).call(this).finishedCurrentRound||nr(this,$o,Dc).call(this).error){if(Ft(this,fa,(M=he(this,fa),++M)),he(this,fa)>=he(this,$n).measurements.length)return nr(this,$l,Ad).call(this,!1),void nr(this,Kh,Lv).call(this,!0);var B,q=he(this,$n).measurements[he(this,fa)],ee=q.type,te=ea(q,xd),ce=nr(this,$o,Dc).call(this),le=he(this,$n),V=le.downloadApiUrl,K=le.uploadApiUrl,J=le.estimatedServerTime;switch(ee){case"v4Reachability":case"v6Reachability":(B=new gi("https://".concat(te.host),{fetchOptions:{method:"GET",mode:"no-cors"}})).onFinished=function(Ke){ce.finished=!0,ce.results=ds({host:te.host},Ke),A.onResultsChange({type:ee}),nr(A,Ps,Ws).call(A)};break;case"rpki":(B=new gi("https://".concat(he(this,$n).rpkiInvalidHost),{timeout:5e3})).onFinished=function(Ke){(Ke.response?Ke.response.json():Promise.resolve()).then(function(_t){ce.finished=!0,ce.results=ds({host:he(A,$n).rpkiInvalidHost,filteringInvalids:!Ke.reachable},_t?{asn:_t.asn,name:_t.name}:{}),A.onResultsChange({type:ee}),nr(A,Ps,Ws).call(A)})};break;case"nxdomain":(B=new gi("https://".concat(te.nxhost),{fetchOptions:{mode:"no-cors"}})).onFinished=function(Ke){ce.finished=!0,ce.results={host:te.nxhost,reachable:Ke.reachable},A.onResultsChange({type:ee}),nr(A,Ps,Ws).call(A)};break;case"packetLoss":case"packetLossUnderLoad":ce.finished=!1;var Q=te.numPackets,Te=ea(te,Xe),Le=he(this,$n),at=Le.turnServerUri,Ce=Le.turnServerCredsApiUrl,Qe=Le.turnServerUser,Oe=Le.turnServerPass,pe=Le.includeCredentials;(B=new Jr(ds({turnServerUri:at,turnServerCredsApi:Ce,turnServerCredsApiIncludeCredentials:pe,turnServerUser:Qe,turnServerPass:Oe,numMsgs:Q,downloadChunkSize:te.loadDown?he(this,Dd):void 0,uploadChunkSize:te.loadUp?he(this,Id):void 0,downloadApiUrl:V,uploadApiUrl:K},Te))).onMsgReceived=function(){ce.results=Object.assign({},B.results),A.onResultsChange({type:ee})},B.onFinished=function(){ce.finished=!0,A.onResultsChange({type:ee}),nr(A,Ps,Ws).call(A)},B.onConnectionError=function(Ke){ce.error=Ke,A.onResultsChange({type:ee}),he(A,xc).call(A,"Connection error while measuring packet loss: ".concat(Ke)),nr(A,Ps,Ws).call(A)},B.onCredentialsFailure=function(){ce.error="unable to get turn server credentials",A.onResultsChange({type:ee}),he(A,xc).call(A,"Error while measuring packet loss: unable to get turn server credentials."),nr(A,Ps,Ws).call(A)};break;case"latency":case"latencyUnderLoad":ce.finished=!1,(B=new bi([{dir:"down",bytes:0,count:te.numPackets,bypassMinDuration:!0}],{downloadApiUrl:V,uploadApiUrl:K,estimatedServerTime:J,logApiUrl:he(this,$n).logMeasurementApiUrl,measurementId:he(this,Od),downloadChunkSize:te.loadDown?he(this,Dd):void 0,uploadChunkSize:te.loadUp?he(this,Id):void 0})).fetchOptions={credentials:he(this,$n).includeCredentials?"include":void 0},B.onMeasurementResult=B.onNewMeasurementStarted=function(Ke,_t){ce.results=Object.assign({},_t.down[0]),A.onResultsChange({type:ee})},B.onFinished=function(){ce.finished=!0,A.onResultsChange({type:ee}),he(A,oo)&&nr(A,Ps,Ws).call(A)},B.onConnectionError=function(Ke){ce.error=Ke,A.onResultsChange({type:ee}),he(A,xc).call(A,"Connection error while measuring latency: ".concat(Ke)),nr(A,Ps,Ws).call(A)},B.play();break;case"download":case"upload":if(ce.finished||ce.error)nr(this,Ps,Ws).call(this);else{delete ce.finishedCurrentRound;var Pt=he(this,$n)["measure".concat(ee==="download"?"Down":"Up","loadLoadedLatency")];(B=new bi([ds({dir:ee==="download"?"down":"up"},te)],{downloadApiUrl:V,uploadApiUrl:K,estimatedServerTime:J,logApiUrl:he(this,$n).logMeasurementApiUrl,measurementId:he(this,Od),measureParallelLatency:Pt,parallelLatencyThrottleMs:he(this,$n).loadedLatencyThrottle})).fetchOptions={credentials:he(this,$n).includeCredentials?"include":void 0},B.finishRequestDuration=he(this,$n).bandwidthFinishRequestDuration,B.onNewMeasurementStarted=function(Ke){var _t=Ke.count,gt=Ke.bytes,bt=ce.results=Object.assign({},ce.results);!bt.hasOwnProperty(gt)&&(bt[gt]={timings:[],numMeasurements:0,sideLatency:Pt?[]:void 0}),bt[gt].numMeasurements-bt[gt].timings.length!==_t&&(bt[gt].numMeasurements+=_t,A.onResultsChange({type:ee}))},B.onMeasurementResult=function(Ke){var _t=Ke.bytes,gt=ea(Ke,Vo);ce.results[_t].timings.push(gt),ce.results=Object.assign({},ce.results),A.onResultsChange({type:ee})},B.onParallelLatencyResult=function(Ke){ce.results[te.bytes].sideLatency.push(Ke),ce.results=Object.assign({},ce.results),A.onResultsChange({type:ee})},B.onFinished=function(Ke){var _t=!he(A,$n).measurements.slice(he(A,fa)+1).map(function(Ct){return Ct.type}).includes(ee),gt=Math.min.apply(Math,ta(Object.values(ee==="download"?Ke.down:Ke.up).slice(-1)[0].timings.map(function(Ct){return Ct.duration})));if(_t||!te.bypassMinDuration&&gt>he(A,$n).bandwidthFinishRequestDuration){ce.finished=!0,A.onResultsChange({type:ee});var bt=.5*Object.keys(ce.results).map(function(Ct){return+Ct}).sort(function(Ct,ze){return ze-Ct})[0];ee==="download"&&Ft(A,Dd,bt),ee==="upload"&&Ft(A,Id,bt)}else ce.finishedCurrentRound=!0;he(A,oo)&&nr(A,Ps,Ws).call(A)},B.onConnectionError=function(Ke){ce.error=Ke,A.onResultsChange({type:ee}),he(A,xc).call(A,"Connection error while measuring ".concat(ee,": ").concat(Ke)),nr(A,Ps,Ws).call(A)},B.play()}}Ft(this,Oc,B),ce.started=!0,this.onResultsChange({type:ee})}else he(this,Oc).play()}var Nd=new WeakMap,Gh=new WeakMap,aS=function(M){Bo(B,M);var A=Fo(B);function B(q){var ee,te;Di(this,B);for(var ce=arguments.length,le=new Array(ce>1?ce-1:0),V=1;V<ce;V++)le[V-1]=arguments[V];return Ut(Dr(te=A.call.apply(A,[this,q].concat(le))),Nd,{writable:!0,value:void 0}),Ut(Dr(te),Gh,{writable:!0,value:function(K){he(Dr(te),Nd)&&Wl(K,{apiUrl:he(Dr(te),Nd)})}}),Nn((ee=Dr(te),un(B.prototype)),"onFinish",he(Dr(te),Gh),ee,!0),Ft(Dr(te),Nd,Object.assign({},jl,q,Bl).logAimApiUrl),te}return Ii(B,[{key:"onFinish",set:function(q){var ee=this;Nn(un(B.prototype),"onFinish",function(te){q(te),he(ee,Gh).call(ee,te)},this,!0)}}]),B}(nS);function Nv(M,A){var B=typeof Symbol<"u"&&M[Symbol.iterator]||M["@@iterator"];if(!B){if(Array.isArray(M)||(B=function(V,K){if(V){if(typeof V=="string")return jv(V,K);var J={}.toString.call(V).slice(8,-1);return J==="Object"&&V.constructor&&(J=V.constructor.name),J==="Map"||J==="Set"?Array.from(V):J==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(J)?jv(V,K):void 0}}(M))||A){B&&(M=B);var q=0,ee=function(){};return{s:ee,n:function(){return q>=M.length?{done:!0}:{done:!1,value:M[q++]}},e:function(V){throw V},f:ee}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var te,ce=!0,le=!1;return{s:function(){B=B.call(M)},n:function(){var V=B.next();return ce=V.done,V},e:function(V){le=!0,te=V},f:function(){try{ce||B.return==null||B.return()}finally{if(le)throw te}}}}function jv(M,A){(A==null||A>M.length)&&(A=M.length);for(var B=0,q=Array(A);B<A;B++)q[B]=M[B];return q}var oS=[c],Bv=!1,Kl=function(){return(0,E.A)(function J(){(0,o.A)(this,J)},null,[{key:"config",value:function(J){if(!J)throw new Error("'token' is empty, please provide it in config");this.apiKey=J;var Q=P(Xt,void 0,I.apply(void 0,oS));window.STORE=Q,Mr.default.init({store:Q})}},{key:"getCameras",value:(K=(0,p.A)(w().mark(function J(){var Q,Te,Le,at;return w().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(Ce.prev=0,Q=navigator.userAgent.includes("Firefox"),Te=[],!Q){Ce.next=8;break}return Ce.next=6,new Promise(function(Qe,Oe){navigator.mediaDevices.getUserMedia({audio:!1,video:!0}).then(function(){var pe=(0,p.A)(w().mark(function Pt(Ke){var _t;return w().wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:return gt.next=2,navigator.mediaDevices.enumerateDevices();case 2:_t=gt.sent,Te=_t.filter(function(bt){return bt.kind==="videoinput"}).map(function(bt){return new wc(bt.deviceId,bt.groupId,bt.kind,bt.label)}),Qe(Te),Ke.getTracks().forEach(function(bt){return bt.stop()});case 6:case"end":return gt.stop()}},Pt)}));return function(Pt){return pe.apply(this,arguments)}}()).catch(function(pe){console.error("Error in getCameras()",pe),Oe(pe)})});case 6:Ce.next=12;break;case 8:return Ce.next=10,navigator.mediaDevices.enumerateDevices();case 10:Le=Ce.sent,Te=Le.filter(function(Qe){return Qe.kind==="videoinput"}).map(function(Qe){return new wc(Qe.deviceId,Qe.groupId,Qe.kind,Qe.label)});case 12:return Ce.abrupt("return",Te);case 15:Ce.prev=15,Ce.t0=Ce.catch(0),at=Ce.t0.message,Ce.t0 instanceof TypeError&&Ce.t0.name==="TypeError"&&(at=vt.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getCameras(), ".concat(at));case 20:case"end":return Ce.stop()}},J,null,[[0,15]])})),function(){return K.apply(this,arguments)})},{key:"getMicrophones",value:(V=(0,p.A)(w().mark(function J(){var Q,Te,Le,at;return w().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(Ce.prev=0,Q=navigator.userAgent.includes("Firefox"),Te=[],!Q){Ce.next=8;break}return Ce.next=6,new Promise(function(Qe,Oe){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var pe=(0,p.A)(w().mark(function Pt(Ke){var _t;return w().wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:return gt.next=2,navigator.mediaDevices.enumerateDevices();case 2:_t=gt.sent,Te=_t.filter(function(bt){return bt.kind==="audioinput"}).map(function(bt){return new bc(bt.deviceId,bt.groupId,bt.kind,bt.label)}),Qe(Te),Ke.getTracks().forEach(function(bt){return bt.stop()});case 6:case"end":return gt.stop()}},Pt)}));return function(Pt){return pe.apply(this,arguments)}}()).catch(function(pe){console.error("Error in getMicrophones()",pe),Oe(pe)})});case 6:Ce.next=12;break;case 8:return Ce.next=10,navigator.mediaDevices.enumerateDevices();case 10:Le=Ce.sent,Te=Le.filter(function(Qe){return Qe.kind==="audioinput"}).map(function(Qe){return new bc(Qe.deviceId,Qe.groupId,Qe.kind,Qe.label)});case 12:return Ce.abrupt("return",Te);case 15:Ce.prev=15,Ce.t0=Ce.catch(0),at=Ce.t0.message,Ce.t0 instanceof TypeError&&Ce.t0.name==="TypeError"&&(at=vt.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message),console.error("An error occurred in getMicrophones(), ".concat(at));case 20:case"end":return Ce.stop()}},J,null,[[0,15]])})),function(){return V.apply(this,arguments)})},{key:"getPlaybackDevices",value:(le=(0,p.A)(w().mark(function J(){var Q,Te,Le,at;return w().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:if(Ce.prev=0,Q=navigator.userAgent.includes("Firefox"),Te=[],!Q){Ce.next=8;break}return Ce.next=6,new Promise(function(Qe,Oe){navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(function(){var pe=(0,p.A)(w().mark(function Pt(Ke){var _t;return w().wrap(function(gt){for(;;)switch(gt.prev=gt.next){case 0:return gt.next=2,navigator.mediaDevices.enumerateDevices();case 2:_t=gt.sent,Te=_t.filter(function(bt){return bt.kind==="audiooutput"}).map(function(bt){return new xl(bt.deviceId,bt.groupId,bt.kind,bt.label)}),Qe(Te),Ke.getTracks().forEach(function(bt){return bt.stop()});case 6:case"end":return gt.stop()}},Pt)}));return function(Pt){return pe.apply(this,arguments)}}()).catch(function(pe){console.error("Error in getPlaybackDevices()",pe),Oe(pe)})});case 6:Ce.next=12;break;case 8:return Ce.next=10,navigator.mediaDevices.enumerateDevices();case 10:Le=Ce.sent,Te=Le.filter(function(Qe){return Qe.kind==="audiooutput"}).map(function(Qe){return new xl(Qe.deviceId,Qe.groupId,Qe.kind,Qe.label)});case 12:return Ce.abrupt("return",Te);case 15:Ce.prev=15,Ce.t0=Ce.catch(0),at=Ce.t0.message,Ce.t0 instanceof TypeError&&Ce.t0.name==="TypeError"&&(at="Playback device access unavailable: Please ensure your device is compatible and that you're on a secure website (https://)"),console.error("An error occurred in getPlaybackDevices(), ".concat(at));case 20:case"end":return Ce.stop()}},J,null,[[0,15]])})),function(){return le.apply(this,arguments)})},{key:"getDevices",value:(ce=(0,p.A)(w().mark(function J(){var Q,Te,Le,at,Ce,Qe;return w().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:return Oe.prev=0,Oe.next=3,navigator.mediaDevices.enumerateDevices();case 3:Q=Oe.sent,Te=[],Le=Nv(Q);try{for(Le.s();!(at=Le.n()).done;)Ce=at.value,Te.push(new ao(Ce.deviceId,Ce.groupId,Ce.kind,Ce.label))}catch(pe){Le.e(pe)}finally{Le.f()}return Oe.abrupt("return",Te);case 10:Oe.prev=10,Oe.t0=Oe.catch(0),Qe=Oe.t0.message,Oe.t0 instanceof TypeError&&(Qe=Oe.t0.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":Oe.t0.message),console.error("An error occurred in getDevices(), ".concat(Qe));case 15:case"end":return Oe.stop()}},J,null,[[0,10]])})),function(){return ce.apply(this,arguments)})},{key:"on",value:function(J,Q){if(J!=="device-changed")throw new Error("Unsupported event type");this.addDeviceChangeEvent(),this.eventEmitter.on(J,Q)}},{key:"addDeviceChangeEvent",value:function(){var J=this;if(!Bv){this.getDevices().then(function(Te){J.devices=Te});try{navigator.mediaDevices.addEventListener("devicechange",function(){var Te=(0,p.A)(w().mark(function Le(at){var Ce,Qe,Oe,pe,Pt;return w().wrap(function(Ke){for(;;)switch(Ke.prev=Ke.next){case 0:return Ce=J.devices,Ke.next=3,J.getDevices();case 3:J.devices=Ke.sent,Qe=new Array,Oe=Nv(J.devices),Ke.prev=6,Pt=w().mark(function _t(){var gt;return w().wrap(function(bt){for(;;)switch(bt.prev=bt.next){case 0:gt=pe.value,Ce.filter(function(Ct){return Ct.deviceId==gt.deviceId&&Ct.kind==gt.kind}).length==0?Qe.push(gt):Ce=Ce.filter(function(Ct){return!(Ct.deviceId==gt.deviceId&&Ct.kind==gt.kind)});case 3:case"end":return bt.stop()}},_t)}),Oe.s();case 9:if((pe=Oe.n()).done){Ke.next=13;break}return Ke.delegateYield(Pt(),"t0",11);case 11:Ke.next=9;break;case 13:Ke.next=18;break;case 15:Ke.prev=15,Ke.t1=Ke.catch(6),Oe.e(Ke.t1);case 18:return Ke.prev=18,Oe.f(),Ke.finish(18);case 21:Qe.length!=0&&J.eventEmitter.emit("device-changed",{devices:J.devices}),Ce.length!=0&&J.eventEmitter.emit("device-changed",{devices:J.devices});case 23:case"end":return Ke.stop()}},Le,null,[[6,15,18,21]])}));return function(Le){return Te.apply(this,arguments)}}()),Bv=!0}catch(Te){var Q=Te.message;Te instanceof TypeError&&(Q=Te.name==="TypeError"?"Could not access devices : Please ensure your devices is compatible and that you're on a secure website (https://)":Te.message),console.error("An error occurred in device-change event, ".concat(Q))}}}},{key:"off",value:function(J,Q){if(J!=="device-changed")throw new Error("Unsupported event type");this.eventEmitter.off(J,Q)}},{key:"checkPermissions",value:(te=(0,p.A)(w().mark(function J(Q){var Te,Le,at,Ce,Qe;return w().wrap(function(Oe){for(;;)switch(Oe.prev=Oe.next){case 0:if(Q||(Q=wi.AUDIO_AND_VIDEO),Te=new Map,!Q.includes(wi.AUDIO)&&!Q.includes(wi.AUDIO_AND_VIDEO)){Oe.next=15;break}return Le=!0,Oe.prev=4,Oe.next=7,navigator.permissions.query({name:"microphone"});case 7:(at=Oe.sent).state!="prompt"&&at.state!="denied"||(Le=!1),Oe.next=14;break;case 11:throw Oe.prev=11,Oe.t0=Oe.catch(4),Error("Browser does not support microphone permission check");case 14:Te.set(wi.AUDIO,Le);case 15:if(!Q.includes(wi.VIDEO)&&!Q.includes(wi.AUDIO_AND_VIDEO)){Oe.next=28;break}return Ce=!0,Oe.prev=17,Oe.next=20,navigator.permissions.query({name:"camera"});case 20:(Qe=Oe.sent).state!="prompt"&&Qe.state!="denied"||(Ce=!1),Oe.next=27;break;case 24:throw Oe.prev=24,Oe.t1=Oe.catch(17),Error("Browser does not support camera permission check");case 27:Te.set(wi.VIDEO,Ce);case 28:return Oe.abrupt("return",Te);case 29:case"end":return Oe.stop()}},J,null,[[4,11],[17,24]])})),function(J){return te.apply(this,arguments)})},{key:"requestPermission",value:(ee=(0,p.A)(w().mark(function J(Q){var Te,Le,at,Ce,Qe,Oe,pe,Pt,Ke,_t,gt,bt,Ct;return w().wrap(function(ze){for(;;)switch(ze.prev=ze.next){case 0:if(Q||(Q=wi.AUDIO_AND_VIDEO),Te=new Map,!Q.includes(wi.AUDIO_AND_VIDEO)){ze.next=32;break}return at={audio:!0,video:!0},Ce=!0,ze.prev=5,ze.next=8,navigator.mediaDevices.getUserMedia(at);case 8:Le=ze.sent,ze.next=30;break;case 11:if(ze.prev=11,ze.t0=ze.catch(5),!(ze.t0 instanceof DOMException)){ze.next=27;break}ze.t1=ze.t0.name,ze.next=ze.t1==="NotAllowedError"?17:ze.t1==="NotReadableError"?19:ze.t1==="NotFoundError"?21:24;break;case 17:return ze.t0.message==="Permission denied by system"&&(Qe=vt.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),ze.abrupt("break",25);case 19:return Qe=Gl(ze.t0,"video"),ze.abrupt("break",25);case 21:return Qe=vt.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Qe=vt.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),ze.abrupt("break",25);case 24:Qe=ze.t0.message;case 25:ze.next=28;break;case 27:Qe=ze.t0 instanceof TypeError&&ze.t0.name==="TypeError"?vt.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:ze.t0.message;case 28:Ce=!1,Qe&&console.error("An error occurred in request permission, ".concat(Qe));case 30:Le&&setTimeout(function(){Le.getTracks().forEach(function(gr){gr.stop()})},100),Te.set(wi.AUDIO_AND_VIDEO,Ce);case 32:if(!Q.includes(wi.VIDEO)){ze.next=62;break}return pe={audio:!1,video:!0},Pt=!0,ze.prev=35,ze.next=38,navigator.mediaDevices.getUserMedia(pe);case 38:Oe=ze.sent,ze.next=60;break;case 41:if(ze.prev=41,ze.t2=ze.catch(35),!(ze.t2 instanceof DOMException)){ze.next=57;break}ze.t3=ze.t2.name,ze.next=ze.t3==="NotAllowedError"?47:ze.t3==="NotReadableError"?49:ze.t3==="NotFoundError"?51:54;break;case 47:return ze.t2.message==="Permission denied by system"&&(Ke=vt.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),ze.abrupt("break",55);case 49:return Ke=Gl(ze.t2,"video"),ze.abrupt("break",55);case 51:return Ke=vt.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Ke=vt.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),ze.abrupt("break",55);case 54:Ke=ze.t2.message;case 55:ze.next=58;break;case 57:Ke=ze.t2 instanceof TypeError&&ze.t2.name==="TypeError"?vt.q.ERROR_CAMERA_ACCESS_UNAVAILABLE.message:ze.t2.message;case 58:Pt=!1,Ke&&console.error("An error occurred in request permission, ".concat(Ke));case 60:Oe&&Oe.getTracks().forEach(function(gr){gr.stop()}),Te.set(wi.VIDEO,Pt);case 62:if(!Q.includes(wi.AUDIO)){ze.next=92;break}return gt={audio:!0,video:!1},bt=!0,ze.prev=65,ze.next=68,navigator.mediaDevices.getUserMedia(gt);case 68:_t=ze.sent,ze.next=90;break;case 71:if(ze.prev=71,ze.t4=ze.catch(65),!(ze.t4 instanceof DOMException)){ze.next=87;break}ze.t5=ze.t4.name,ze.next=ze.t5==="NotAllowedError"?77:ze.t5==="NotReadableError"?79:ze.t5==="NotFoundError"?81:84;break;case 77:return ze.t4.message==="Permission denied by system"&&(Ct=vt.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),ze.abrupt("break",85);case 79:return Ct=Gl(ze.t4,"audio"),ze.abrupt("break",85);case 81:return Ct=vt.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(Ct=vt.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),ze.abrupt("break",85);case 84:Ct=ze.t4.message;case 85:ze.next=88;break;case 87:Ct=ze.t4 instanceof TypeError&&ze.t4.name==="TypeError"?vt.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE.message:ze.t4.message;case 88:bt=!1,Ct&&console.error("An error occurred in request permission, ".concat(Ct));case 90:_t&&_t.getTracks().forEach(function(gr){gr.stop()}),Te.set(wi.AUDIO,bt);case 92:return ze.abrupt("return",Te);case 93:case"end":return ze.stop()}},J,null,[[5,11],[35,41],[65,71]])})),function(J){return ee.apply(this,arguments)})},{key:"isInt",value:function(J){return typeof J=="number"&&J%1==0}},{key:"getNetworkStats",value:(q=(0,p.A)(w().mark(function J(){var Q,Te,Le,at=arguments;return w().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return(Q=(at.length>0&&at[0]!==void 0?at[0]:{}).timeoutDuration)&&this.isInt(Q)||(Q=6e4),Te=new Promise(function(Qe,Oe){setTimeout(function(){Oe("Not able to get NetworkStats due to timeout")},Q)}),Le=new Promise(function(Qe,Oe){if(navigator.onLine){var pe=new aS({measureDownloadLoadedLatency:!1,measureUploadLoadedLatency:!1,measurements:[{type:"upload",bytes:3e6,count:1,bypassMinDuration:!0},{type:"download",bytes:3e6,count:1,bypassMinDuration:!0}]});pe.isRunning?(pe.onFinish=function(Pt){Qe({downloadSpeed:parseFloat(Number(Pt.getDownloadBandwidth()/1048576).toFixed(2)),uploadSpeed:parseFloat(Number(Pt.getUploadBandwidth()/1048576).toFixed(2))})},pe.onError=function(Pt){Oe("Not able to get NetworkStats")}):Oe("Not able to get NetworkStats")}else Oe("Not able to get NetworkStats due to no Network")}),Ce.abrupt("return",Promise.race([Le,Te]));case 5:case"end":return Ce.stop()}},J,this)})),function(){return q.apply(this,arguments)})},{key:"analytics",value:function(J){var Q,Te,Le;!J&&navigator&&navigator.userAgent&&(Te=navigator.userAgent,delete(Le=f().parse(Te)).engine);try{var at;(at=J)!==null&&at!==void 0&&at.browserUserAgent||(Te=navigator.userAgent,delete(Le=f().parse(Te)).engine)}catch{}J&&J.rawUserAgent&&(Te=J.rawUserAgent,delete(Le=f().parse(Te)).engine),J||(J={});var Ce={};Ce.sdkType=J.sdkType||"javascript",Ce.sdkVersion=J.sdkVersion||"0.0.95",Ce.platform=J.platform||((Q=Le)===null||Q===void 0||(Q=Q.platform)===null||Q===void 0?void 0:Q.type)||"",J.browserUserAgent=="null"?Ce.browserUserAgent=void 0:Ce.browserUserAgent=Le,J.deviceUserAgent&&(Ce.deviceUserAgent=J.deviceUserAgent),this._deviceInfo=Ce}},{key:"initMeeting",value:function(J){var Q,Te=J.meetingId,Le=J.customCameraVideoTrack,at=Le===void 0?void 0:Le,Ce=J.customMicrophoneAudioTrack,Qe=Ce===void 0?void 0:Ce,Oe=J.autoConsume,pe=Oe===void 0||Oe,Pt=J.preferredProtocol,Ke=J.mode,_t=J.multiStream,gt=_t===void 0||_t,bt=J.participantId,Ct=J.name,ze=J.micEnabled,gr=J.webcamEnabled,mn=J.maxResolution,zt=J.metaData,Dn=J.chatEnabled,ai=J.useSpartialLayerAnalytics,Ki=J.signalingBaseUrl,Ts=J.defaultCamera,ma=J.debugMode,Vs=ma===void 0||ma;if(!Te)throw new Error("'meetingId' is empty, please verify it or generate new meetingId using the API.");var Ri=bt?bt.toString():l()({length:8}).toLowerCase(),Jl=Ct||l()({length:6}).toLowerCase();switch(this._deviceInfo||this.analytics(),typeof Pt!="string"&&(Pt="UDP_OVER_TCP"),(Q=Pt)===null||Q===void 0?void 0:Q.toUpperCase()){case"UDP_ONLY":case"UDP_OVER_TCP":case"TCP_ONLY":Pt=Pt.toUpperCase();break;default:Pt="UDP_OVER_TCP"}if(Ke||(Ke=Cn.n.CONFERENCE),Ke!==Cn.n.CONFERENCE&&Ke!==Cn.n.VIEWER)throw new Error('"mode" can only be either '.concat(Cn.n.CONFERENCE," or ").concat(Cn.n.VIEWER));if(zt!=null&&(0,C.A)(zt)!="object")throw new Error('"metaData" can only be object.');var jd=this._deviceInfo.sdkType==="react-native",lS=jd?Ts?Ts==="front"?1:0:at?at.getVideoTracks()[0].getConstraints().facingMode==="user"?1:0:jd?1:0:0,Uv=new Mr.default({roomId:Te,peerId:Ri,secret:this.apiKey,device:"unknown",displayName:Jl,mode:Ke,useSimulcast:gt,produce:!0,consume:!0,useSharingSimulcast:!0,datachannel:Dn!==!1,micEnabled:ze!==!1,webcamEnabled:gr!==!1,maxResolution:mn||"hd",useSpartialLayerAnalytics:ai,_deviceInfo:this._deviceInfo,customCameraVideoTrack:at,customMicrophoneAudioTrack:Qe,autoConsume:pe,preferredProtocol:Pt,signalingBaseUrl:Ki,metaData:zt,defaultCameraIndex:lS,debugMode:Vs});Ve.roomClient=Uv;var uS=new Vr({id:Ri,displayName:Jl,local:!0,mode:Ke,metaData:zt});return new Dt(Te,uS,Uv)}},{key:"createCameraVideoTrack",value:(B=(0,p.A)(w().mark(function J(Q){var Te,Le,at,Ce,Qe,Oe,pe,Pt,Ke,_t,gt,bt,Ct,ze,gr,mn;return w().wrap(function(zt){for(;;)switch(zt.prev=zt.next){case 0:if(Te=Q.cameraId,Le=Te===void 0?void 0:Te,at=Q.encoderConfig,Ce=at===void 0?void 0:at,Qe=Q.facingMode,Oe=Qe===void 0?void 0:Qe,pe=Q.optimizationMode,Pt=pe===void 0?void 0:pe,Ke=Q.multiStream,_t=Ke===void 0||Ke,!Le){zt.next=6;break}return zt.next=4,this.getCameras();case 4:(gt=zt.sent)&&gt.some(function(Dn){return Dn.deviceId})&&(gt.some(function(Dn){return Dn.deviceId===Le})||console.error("No camera device found for the given cameraId, please check the passed cameraId. The default camera will be used instead."));case 6:return zt.prev=6,bt=Ce?xa.$.videoProfiles[Ce]:xa.$.videoProfiles.h360p_w640p,Ct={video:{deviceId:Le||void 0,facingMode:Oe||void 0,width:bt.width,height:bt.height,frameRate:bt.frameRate}},zt.next=11,(0,zs.lp)(Ct);case 11:return ze=zt.sent,Pt&&(ze.contentHint=Pt),ze.encoderConfig=Ce||"h360p_w640p",ze.contentHint=Pt||"",ze.multiStream=_t,ze.cameraId=Le,zt.abrupt("return",ze);case 20:if(zt.prev=20,zt.t0=zt.catch(6),zt.t0.name!=="SecurityError"){zt.next=26;break}gr=vt.q.ERROR_RN_CAMERA_ACCESS_DENIED_OR_DISMISSED.message,zt.next=46;break;case 26:if(zt.t0.name!=="DOMException"){zt.next=30;break}gr=vt.q.ERROR_RN_CAMERA_NOT_FOUND.message,zt.next=46;break;case 30:if(!(zt.t0 instanceof DOMException)){zt.next=45;break}zt.t1=zt.t0.name,zt.next=zt.t1==="NotAllowedError"?34:zt.t1==="NotReadableError"?36:zt.t1==="NotFoundError"?38:41;break;case 34:return gr=Fv(zt.t0,"video"),zt.abrupt("break",43);case 36:return gr=Gl(zt.t0,"video"),zt.abrupt("break",43);case 38:return gr=vt.q.ERROR_CAMERA_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(gr=vt.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS.message),zt.abrupt("break",43);case 41:return gr=zt.t0.message,zt.abrupt("break",43);case 43:zt.next=46;break;case 45:zt.t0.message=="getUserMedia is not implemented in this browser"?(mn=vt.q.ERROR_CAMERA_ACCESS_UNAVAILABLE,gr=mn.message):gr=zt.t0.message;case 46:console.error("An error occurred in creating video track, ".concat(gr));case 47:case"end":return zt.stop()}},J,this,[[6,20]])})),function(J){return B.apply(this,arguments)})},{key:"createScreenShareVideoTrack",value:(A=(0,p.A)(w().mark(function J(Q){var Te,Le,at,Ce,Qe,Oe,pe,Pt,Ke;return w().wrap(function(_t){for(;;)switch(_t.prev=_t.next){case 0:return Te=Q.encoderConfig,Le=Te===void 0?void 0:Te,at=Q.optimizationMode,Ce=at===void 0?void 0:at,Qe=Q.withAudio,Oe=Qe===void 0?"enable":Qe,pe=Le?xa.$.screenShareProfiles[Le]:xa.$.screenShareProfiles.h720p_15fps,Pt={audio:Oe==="enable",video:{width:pe.width,height:pe.height,frameRate:pe.frameRate}},_t.next=5,(0,zs.Zu)(Pt);case 5:return Ke=_t.sent,Ce&&(Ke.contentHint=Ce),_t.abrupt("return",Ke);case 8:case"end":return _t.stop()}},J)})),function(J){return A.apply(this,arguments)})},{key:"createMicrophoneAudioTrack",value:(M=(0,p.A)(w().mark(function J(Q){var Te,Le,at,Ce,Qe,Oe,pe,Pt,Ke,_t,gt,bt;return w().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:if(Te=Q.noiseConfig,Le=Te===void 0?void 0:Te,at=Q.encoderConfig,Ce=at===void 0?void 0:at,Qe=Q.microphoneId,!(Oe=Qe===void 0?void 0:Qe)){Ct.next=6;break}return Ct.next=4,this.getMicrophones();case 4:(pe=Ct.sent)&&pe.some(function(ze){return ze.deviceId})&&(pe.some(function(ze){return ze.deviceId===Oe})||console.error("No microphone device found for the given microphoneId, please check the passed microphoneId. The default microphone will be used instead."));case 6:return Ct.prev=6,Pt=Ce?xa.$.audioProfiles[Ce]:xa.$.audioProfiles.speech_standard,Ke={audio:{deviceId:Oe,sampleRate:Pt.sampleRate,echoCancellation:Le?Le&&Le.acousticEchoCancellation:Pt.echoCancellation,autoGainControl:Le?Le&&Le.autoGainControl:Pt.autoGainControl,noiseSuppression:Le?Le&&Le.noiseSuppression:Pt.noiseSuppression,channelCount:Pt.channelCount}},Ct.next=11,(0,zs.lp)(Ke);case 11:return(_t=Ct.sent).encoderConfig=Ce||"speech_standard",_t.microphoneId=Oe,Ct.abrupt("return",_t);case 17:if(Ct.prev=17,Ct.t0=Ct.catch(6),Ct.t0.name!=="SecurityError"){Ct.next=23;break}gt=vt.q.ERROR_RN_MIC_ACCESS_DENIED_OR_DISMISSED.message,Ct.next=43;break;case 23:if(Ct.t0.name!=="DOMException"){Ct.next=27;break}gt=vt.q.ERROR_RN_MIC_NOT_FOUND.message,Ct.next=43;break;case 27:if(!(Ct.t0 instanceof DOMException)){Ct.next=42;break}Ct.t1=Ct.t0.name,Ct.next=Ct.t1==="NotAllowedError"?31:Ct.t1==="NotReadableError"?33:Ct.t1==="NotFoundError"?35:38;break;case 31:return gt=Fv(Ct.t0,"audio"),Ct.abrupt("break",40);case 33:return gt=Gl(Ct.t0,"audio"),Ct.abrupt("break",40);case 35:return gt=vt.q.ERROR_MICROPHONE_NOT_FOUND.message,navigator&&navigator.userAgent&&navigator.userAgent.indexOf("Firefox")!=-1&&(gt=vt.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS.message),Ct.abrupt("break",40);case 38:return gt=Ct.t0.message,Ct.abrupt("break",40);case 40:Ct.next=43;break;case 42:Ct.t0.message=="getUserMedia is not implemented in this browser"?(bt=vt.q.ERROR_MICROPHONE_ACCESS_UNAVAILABLE,gt=bt.message):gt=Ct.t0.message;case 43:console.error("An error occurred in creating audio track, ".concat(gt));case 44:case"end":return Ct.stop()}},J,this,[[6,17]])})),function(J){return M.apply(this,arguments)})}]);var M,A,B,q,ee,te,ce,le,V,K}();function Fv(M,A){return(M.message==="Permission denied"||M.message==="Permission dismissed"?A==="video"?vt.q.ERROR_CAMERA_ACCESS_DENIED_OR_DISMISSED:vt.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:M.message.includes("The request is not allowed by the user agent")?A==="video"?vt.q.ERROR_CAMERA_PERMISSION_OR_AUTOPLAY_ISSUE:vt.q.ERROR_MICROPHONE_ACCESS_DENIED_OR_DISMISSED:M.message==="Permission denied by system"?A==="video"?vt.q.ERROR_CAMERA_PERMISSION_DENIED_BY_OS:vt.q.ERROR_MICROPHONE_PERMISSION_DENIED_BY_OS:A==="video"?vt.q.ERROR_GET_VIDEO_MEDIA_PERMISSION_DENIED:vt.q.ERROR_GET_AUDIO_MEDIA_PERMISSION_DENIED).message}function Gl(M,A){return(M.message==="Device in use"?A==="video"?vt.q.ERROR_CAMERA_IN_USE:vt.q.ERROR_MICROPHONE_IN_USE:A==="video"?vt.q.ERROR_VIDEO_SOURCE_INITIATION_FAILED:vt.q.ERROR_MICROPHONE_IN_USE).message}(0,_.A)(Kl,"devices",[]),(0,_.A)(Kl,"eventEmitter",new Br),(0,_.A)(Kl,"Constants",{errors:vt.s,recordingEvents:{RECORDING_STARTING:"RECORDING_STARTING",RECORDING_STARTED:"RECORDING_STARTED",RECORDING_STOPPING:"RECORDING_STOPPING",RECORDING_STOPPED:"RECORDING_STOPPED"},livestreamEvents:{LIVESTREAM_STARTING:"LIVESTREAM_STARTING",LIVESTREAM_STARTED:"LIVESTREAM_STARTED",LIVESTREAM_STOPPING:"LIVESTREAM_STOPPING",LIVESTREAM_STOPPED:"LIVESTREAM_STOPPED"},characterState:hi,characterMode:{TEXT:"text",CO_PILOT:"co_pilot",AUTO_PILOT:"auto_pilot",VISION_PILOT:"vision_pilot"},hlsEvents:Xn.V,transcriptionEvents:{TRANSCRIPTION_STARTING:"TRANSCRIPTION_STARTING",TRANSCRIPTION_STARTED:"TRANSCRIPTION_STARTED",TRANSCRIPTION_STOPPING:"TRANSCRIPTION_STOPPING",TRANSCRIPTION_STOPPED:"TRANSCRIPTION_STOPPED"},modes:Cn.n,permission:wi});var cS=Kl})(),y})())})(Ob);var Nc=Ob.exports,zr="videosdk-live-react-sdk",tt={"participant-joined":zr+"-participant-joined","participant-left":zr+"-participant-left","speaker-changed":zr+"-speaker-changed","presenter-changed":zr+"-presenter-changed","main-participant-changed":zr+"-main-participant-changed","entry-requested":zr+"-entry-requested","entry-responded":zr+"-entry-responded","recording-started":zr+"-recording-started","recording-stopped":zr+"-recording-stopped","chat-message":zr+"-chat-message","meeting-joined":zr+"-meeting-joined","meeting-left":zr+"-meeting-left","live-stream-started":zr+"-live-stream-started","live-stream-stopped":zr+"-live-stream-stopped","video-state-changed":zr+"-video-state-changed","video-seeked":zr+"-video-seeked","webcam-requested":zr+"-webcam-requested","mic-requested":zr+"-mic-requested","pin-state-changed":zr+"-pin-state-changed","connection-open":zr+"-connection-open","connection-close":zr+"-connection-close","switch-meeting":zr+"-switch-meeting",error:zr+"-error","hls-started":zr+"-hls-started","hls-stopped":zr+"-hls-stopped","hls-state-changed":zr+"-hls-state-changed","hls-playable-state-changed":zr+"-hls-playable-state-changed","recording-state-changed":zr+"-recording-state-changed","livestream-state-changed":zr+"-livestream-state-changed","meeting-state-changed":zr+"-meeting-state-changed","participant-mode-changed":zr+"-participant-mode-changed","transcription-state-changed":zr+"-transcription-state-changed","transcription-text":zr+"-transcription-text","character-joined":zr+"-character-joined","character-left":zr+"-character-left","whiteboard-started":zr+"-whiteboard-started","whiteboard-stopped":zr+"-whiteboard-stopped"},Ze=new yx;Ze.setMaxListeners(9999);var Db=xe.createContext(),mv=function(t){var r=t===void 0?{}:t,n=r.onParticipantJoined,i=n===void 0?function(){}:n,a=r.onParticipantLeft,y=a===void 0?function(){}:a,C=r.onSpeakerChanged,p=C===void 0?function(){}:C,o=r.onPresenterChanged,E=o===void 0?function(){}:o,_=r.onMainParticipantChanged,h=_===void 0?function(){}:_,w=r.onEntryRequested,k=w===void 0?function(){}:w,f=r.onEntryResponded,g=f===void 0?function(){}:f,s=r.onRecordingStarted,b=s===void 0?function(){}:s,S=r.onRecordingStopped,T=S===void 0?function(){}:S,x=r.onChatMessage,O=x===void 0?function(){}:x,P=r.onMeetingJoined,R=P===void 0?function(){}:P,I=r.onMeetingLeft,d=I===void 0?function(){}:I,v=r.onLiveStreamStarted,c=v===void 0?function(){}:v,u=r.onLiveStreamStopped,l=u===void 0?function(){}:u,m=r.onVideoStateChanged,D=m===void 0?function(){}:m,N=r.onVideoSeeked,L=N===void 0?function(){}:N,j=r.onWebcamRequested,W=j===void 0?function(){}:j,$=r.onMicRequested,Z=$===void 0?function(){}:$,ne=r.onPinStateChanged,de=ne===void 0?function(){}:ne,ge=r.onConnectionOpen,_e=ge===void 0?function(){}:ge,Me=r.onConnetionClose,fe=Me===void 0?function(){}:Me,oe=r.onSwitchMeeting,ve=oe===void 0?function(){}:oe,we=r.onError,be=we===void 0?function(){}:we,ht=r.onHlsStarted,xt=ht===void 0?function(){}:ht,Jt=r.onHlsStopped,St=Jt===void 0?function(){}:Jt,Pr=r.onHlsStateChanged,Qt=Pr===void 0?function(){}:Pr,It=r.onRecordingStateChanged,jr=It===void 0?function(){}:It,Nt=r.onLivestreamStateChanged,Xt=Nt===void 0?function(){}:Nt,Mr=r.onMeetingStateChanged,Br=Mr===void 0?function(){}:Mr,Fr=r.onParticipantModeChanged,Zt=Fr===void 0?function(){}:Fr,sr=r.onCharacterJoined,Ve=sr===void 0?function(){}:sr,Rr=r.onCharacterLeft,wr=Rr===void 0?function(){}:Rr;return xe.useEffect(function(){return Ze.on(tt["participant-joined"],i),Ze.on(tt["participant-left"],y),Ze.on(tt["speaker-changed"],p),Ze.on(tt["presenter-changed"],E),Ze.on(tt["main-participant-changed"],h),Ze.on(tt["entry-requested"],k),Ze.on(tt["entry-responded"],g),Ze.on(tt["recording-started"],b),Ze.on(tt["recording-stopped"],T),Ze.on(tt["chat-message"],O),Ze.on(tt["meeting-joined"],R),Ze.on(tt["meeting-left"],d),Ze.on(tt["live-stream-started"],c),Ze.on(tt["live-stream-stopped"],l),Ze.on(tt["video-state-changed"],D),Ze.on(tt["video-seeked"],L),Ze.on(tt["webcam-requested"],W),Ze.on(tt["mic-requested"],Z),Ze.on(tt["pin-state-changed"],de),Ze.on(tt["connection-open"],_e),Ze.on(tt["connection-close"],fe),Ze.on(tt["switch-meeting"],ve),Ze.on(tt.error,be),Ze.on(tt["hls-started"],xt),Ze.on(tt["hls-stopped"],St),Ze.on(tt["hls-state-changed"],Qt),Ze.on(tt["recording-state-changed"],jr),Ze.on(tt["livestream-state-changed"],Xt),Ze.on(tt["meeting-state-changed"],Br),Ze.on(tt["participant-mode-changed"],Zt),Ze.on(tt["character-joined"],Ve),Ze.on(tt["character-left"],wr),function(){Ze.off(tt["meeting-state-changed"],Br),Ze.off(tt["participant-joined"],i),Ze.off(tt["participant-left"],y),Ze.off(tt["speaker-changed"],p),Ze.off(tt["presenter-changed"],E),Ze.off(tt["main-participant-changed"],h),Ze.off(tt["entry-requested"],k),Ze.off(tt["entry-responded"],g),Ze.off(tt["recording-started"],b),Ze.off(tt["recording-stopped"],T),Ze.off(tt["chat-message"],O),Ze.off(tt["meeting-joined"],R),Ze.off(tt["meeting-left"],d),Ze.off(tt["live-stream-started"],c),Ze.off(tt["live-stream-stopped"],l),Ze.off(tt["video-state-changed"],D),Ze.off(tt["video-seeked"],L),Ze.off(tt["webcam-requested"],W),Ze.off(tt["mic-requested"],Z),Ze.off(tt["pin-state-changed"],de),Ze.off(tt["connection-open"],_e),Ze.off(tt["connection-close"],fe),Ze.off(tt["switch-meeting"],ve),Ze.off(tt.error,be),Ze.off(tt["hls-started"],xt),Ze.off(tt["hls-stopped"],St),Ze.off(tt["hls-state-changed"],Qt),Ze.off(tt["recording-state-changed"],jr),Ze.off(tt["livestream-state-changed"],Xt),Ze.off(tt["participant-mode-changed"],Zt),Ze.off(tt["character-joined"],Ve),Ze.off(tt["character-left"],wr)}},[]),xe.useContext(Db)},_x="0.1.101",wx=function(t){var r=t.children,n=t.config,i=t.token,a=t.joinWithoutUserInteraction,y=t.reinitialiseMeetingOnConfigChange,C=t.deviceInfo,p=xe.useState(null),o=p[0],E=p[1],_=xe.useState(null),h=_[0],w=_[1],k=xe.useState(null),f=k[0],g=k[1],s=xe.useState(null),b=s[0],S=s[1],T=xe.useState(null),x=T[0],O=T[1],P=xe.useState(!1),R=P[0],I=P[1],d=xe.useState(!1),v=d[0],c=d[1],u=xe.useState(!1),l=u[0],m=u[1],D=xe.useState(!1),N=D[0],L=D[1],j=xe.useState([]),W=j[0],$=j[1],Z=xe.useState(new Map),ne=Z[0],de=Z[1],ge=xe.useState(new Map),_e=ge[0],Me=ge[1],fe=xe.useState(new Map),oe=fe[0],ve=fe[1],we=xe.useState(!1),be=we[0],ht=we[1],xt=xe.useState(new Map),Jt=xt[0],St=xt[1],Pr=xe.useState(!1),Qt=Pr[0],It=Pr[1],jr=xe.useState(!1),Nt=jr[0],Xt=jr[1],Mr=xe.useState("RECORDING_STOPPED"),Br=Mr[0],Fr=Mr[1],Zt=xe.useState("LIVESTREAM_STOPPED"),sr=Zt[0],Ve=Zt[1],Rr=xe.useState("HLS_STOPPED"),wr=Rr[0],Ae=Rr[1],Ot=xe.useState({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),ot=Ot[0],vr=Ot[1],br=xe.useState("TRANSCRIPTION_STOPPED"),Vr=br[0],di=br[1],Mt=xe.useRef(),pi=xe.useRef(),Pi=xe.useRef(),hi=xe.useRef(),ls=xe.useRef(),Wi=xe.useRef(n),At=xe.useRef(i),We=xe.useRef(!1),ut=xe.useRef(),rt=xe.useMemo(function(){return y},[]);xe.useEffect(function(){Mt.current=o},[o]),xe.useEffect(function(){pi.current=R},[R]),xe.useEffect(function(){Pi.current=v},[v]),xe.useEffect(function(){hi.current=l},[l]),xe.useEffect(function(){ls.current=N},[N]),xe.useEffect(function(){Wi.current=n},[n]),xe.useEffect(function(){At.current=i},[i]),xe.useEffect(function(){ut.current=Nt},[Nt]);var Ue=function(){E(null),w(null),g(null),S(null),O(null),I(!1),c(!1),m(!1),L(!1),$([]),ht(!1),de(new Map),Me(new Map),ve(new Map),St(new Map),It(!1),Xt(!1),Fr("RECORDING_STOPPED"),Ve("LIVESTREAM_STOPPED"),Ae("HLS_STOPPED"),di("TRANSCRIPTION_STOPPED"),vr({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null})},Er=function(Y){de(function(it){it.set(Y.id,Y);var vt=new Map(it);return vt}),Ze.emit(tt["participant-joined"],Y)},De=function(Y){de(function(it){it.delete(Y.id);var vt=new Map(it);return vt}),Ze.emit(tt["participant-left"],Y)},dr=function(Y){var it,vt;O(Y),m(Y===(Mt==null||(it=Mt.current)===null||it===void 0||(vt=it.localParticipant)===null||vt===void 0?void 0:vt.id)),Ze.emit(tt["presenter-changed"],Y)},Tr=function(Y){g(Y),Ze.emit(tt["main-participant-changed"],Y)},Sr=function(Y){S(Y),Ze.emit(tt["speaker-changed"],Y)},Gr=function(Y){$(function(it){return[].concat(it,[Y])}),Ze.emit(tt["chat-message"],Y)},ie=function(Y){Ze.emit(tt["entry-requested"],Y)},G=function(Y,it){Ze.emit(tt["entry-responded"],Y,it)},ue=function(){L(!0),Ze.emit(tt["recording-started"])},Ee=function(){L(!1),Ze.emit(tt["recording-stopped"])},Ne=function(Y){Y.track.readyState==="live"&&(Y.kind==="video"?c(!0):Y.kind==="audio"&&I(!0))},dt=function(Y){Y.kind==="video"?c(!1):Y.kind==="audio"&&I(!1)},Tt=function(Y){ht(!0),Ze.emit(tt["live-stream-started"],Y)},$e=function(){ht(!1),Ze.emit(tt["live-stream-stopped"])},nt=function(Y){Xt(!0),Ze.emit(tt["hls-started"],Y)},et=function(){Xt(!1),Ze.emit(tt["hls-stopped"])},kt=function(Y){Ze.emit(tt["video-state-changed"],Y)},Ht=function(Y){Ze.emit(tt["video-seeked"],Y)},ke=function(Y){Ze.emit(tt["webcam-requested"],Y)},Cr=function(Y){Ze.emit(tt["mic-requested"],Y)},kr=function(Y){We.current=!0,$(function(it){return[].concat(it,Y.messages)}),Ze.emit(tt["meeting-joined"],Y),It(!0)},Zr=function(){Ze.emit(tt["meeting-left"]);var Y=Mt.current;if(Y){var it;typeof(Y==null?void 0:Y.off)=="function"&&(Y.off("meeting-state-changed",pt),Y.off("participant-joined",Er),Y.off("participant-left",De),Y.off("presenter-changed",dr),Y.off("main-participant-changed",Tr),Y.off("speaker-changed",Sr),Y.off("entry-requested",ie),Y.off("entry-responded",G),Y.off("chat-message",Gr),Y.off("recording-started",ue),Y.off("recording-stopped",Ee),Y.off("meeting-joined",kr),Y.off("meeting-left",Zr),Y.off("livestream-started",Tt),Y.off("livestream-stopped",$e),Y.off("video-state-changed",kt),Y.off("video-seeked",Ht),Y.off("webcam-requested",ke),Y.off("mic-requested",Cr),Y.off("pin-state-changed",en),Y.off("connection-open",us),Y.off("connection-close",Ti),Y.off("switch-meeting",Pe),Y.off("error",Vi),Y.off("hls-started",nt),Y.off("hls-stopped",et),Y.off("recording-state-changed",Se),Y.off("livestream-state-changed",Fe),Y.off("hls-state-changed",He),Y.off("participant-mode-changed",Yt),Y.off("whiteboard-stopped",Kt),Y.off("whiteboard-started",Vt),Y.off("transcription-state-changed",qt),Y.off("character-joined",Rt),Y.off("character-left",yr)),typeof(Y==null||(it=Y.localParticipant)===null||it===void 0?void 0:it.off)=="function"&&(Y.localParticipant.off("stream-enabled",Ne),Y.localParticipant.off("stream-disabled",dt)),Ue()}},en=function(Y){var it=Y.participantId,vt=Y.state,Xn=Y.pinnedBy;ve(function(Cn){!vt.cam&&!vt.share?Cn.delete(it):Cn.set(it,vt);var zs=new Map(Cn);return zs}),Ze.emit(tt["pin-state-changed"],{participantId:it,state:vt,pinnedBy:Xn})},us=function(Y){St(function(it){it.set(Y.id,Y);var vt=new Map(it);return vt}),Ze.emit(tt["connection-open"],Y)},Ti=function(Y){St(function(it){it.delete(Y);var vt=new Map(it);return vt}),Ze.emit(tt["connection-close"],Y)},Pe=function(Y){Ze.emit(tt["switch-meeting"],Y)},Vi=function(Y){Ze.emit(tt.error,Y)},Se=function(Y){Fr(Y==null?void 0:Y.status),Ze.emit(tt["recording-state-changed"],Y)},Fe=function(Y){Ve(Y==null?void 0:Y.status),Ze.emit(tt["livestream-state-changed"],Y)},He=function(Y){Ae(Y==null?void 0:Y.status),(Y==null?void 0:Y.status)=="HLS_PLAYABLE"?vr({downstreamUrl:Y==null?void 0:Y.downstreamUrl,playbackHlsUrl:Y==null?void 0:Y.playbackHlsUrl,livestreamUrl:Y==null?void 0:Y.livestreamUrl}):(Y==null?void 0:Y.status)=="HLS_STOPPED"&&vr({downstreamUrl:null,playbackHlsUrl:null,livestreamUrl:null}),Ze.emit(tt["hls-state-changed"],Y)},pt=function(Y){Ze.emit(tt["meeting-state-changed"],Y)},qt=function(Y){di(Y==null?void 0:Y.status),Ze.emit(tt["transcription-state-changed"],Y)},ct=function(Y){Ze.emit(tt["transcription-text"],Y)},Vt=function(Y){Ze.emit(tt["whiteboard-started"],Y)},Kt=function(Y){Ze.emit(tt["whiteboard-stopped"],Y)},Rt=function(Y){Me(function(it){it.set(Y.id,Y);var vt=new Map(it);return vt}),Ze.emit(tt["character-joined"],Y)},yr=function(Y){Me(function(it){it.delete(Y.id);var vt=new Map(it);return vt}),Ze.emit(tt["character-left"],Y)},Yt=function(Y){var it,vt;de(function(Xn){var Cn=Xn.get(Y.participantId);Cn.mode=Y.mode,Xn.set(Cn.id,Cn);var zs=new Map(Xn);return zs}),Y.participantId===(Mt==null||(it=Mt.current)===null||it===void 0||(vt=it.localParticipant)===null||vt===void 0?void 0:vt.id)&&w(function(Xn){return Xn.mode=Y.mode,Xn}),Ze.emit(tt["participant-mode-changed"],Y)},mr=function(){var Y=Nc.VideoSDK&&Nc.VideoSDK.initMeeting(Wi.current);E(Y);var it=Y.localParticipant,vt=Y.participants,Xn=Y.characters;vt.set(it.id,it),de(vt),Me(Xn),w(it),Y.on("meeting-state-changed",pt),Y.on("participant-joined",Er),Y.on("participant-left",De),Y.on("presenter-changed",dr),Y.on("main-participant-changed",Tr),Y.on("speaker-changed",Sr),Y.on("entry-requested",ie),Y.on("entry-responded",G),Y.on("chat-message",Gr),Y.on("recording-started",ue),Y.on("recording-stopped",Ee),Y.on("meeting-joined",kr),Y.on("meeting-left",Zr),Y.on("livestream-started",Tt),Y.on("livestream-stopped",$e),Y.on("video-state-changed",kt),Y.on("video-seeked",Ht),Y.on("webcam-requested",ke),Y.on("mic-requested",Cr),Y.on("pin-state-changed",en),Y.on("connection-open",us),Y.on("connection-close",Ti),Y.on("switch-meeting",Pe),Y.on("error",Vi),Y.on("hls-started",nt),Y.on("hls-stopped",et),Y.on("recording-state-changed",Se),Y.on("livestream-state-changed",Fe),Y.on("hls-state-changed",He),Y.on("participant-mode-changed",Yt),Y.on("transcription-state-changed",qt),Y.on("transcription-text",ct),Y.on("whiteboard-started",Vt),Y.on("whiteboard-stopped",Kt),Y.on("character-joined",Rt),Y.on("character-left",yr),Y.localParticipant.on("stream-enabled",Ne),Y.localParticipant.on("stream-disabled",dt),Y.join()},$r=function(){var Y=Mt.current;Y&&Y.leave()},tn=function(){var Y=Mt.current;Y&&Y.end()},_n=function(Y,it,vt,Xn){var Cn=Mt.current;Cn&&Cn.startRecording(Y,it,vt,Xn)},kn=function(){var Y=Mt.current;if(Y){var it=ls.current;it&&Y.stopRecording()}},fi=function(Y){Y===void 0&&(Y=void 0);var it=Mt.current;it&&it.unmuteMic(Y)},Yn=function(){var Y=Mt.current;Y&&Y.muteMic()},xi=function(Y){Y===void 0&&(Y=void 0);var it=pi.current;it?Yn():fi(Y)},Oi=function(){var Y=Mt.current;Y&&Y.disableWebcam()},es=function(Y){Y===void 0&&(Y=void 0);var it=Mt.current;it&&it.enableWebcam(Y)},Es=function(Y){Y===void 0&&(Y=void 0);var it=Pi.current;it?Oi():es(Y)},$i=function(){var Y=Mt.current;Y&&Y.disableScreenShare()},ks=function(Y){Y===void 0&&(Y=void 0);var it=Mt.current;it&&it.enableScreenShare(Y)},Xs=function(Y){Y===void 0&&(Y=void 0);var it=hi.current;it?$i():ks(Y)},$a=function(Y){var it=Mt.current;it&&it.changeMode(Y)},qa=function(Y){var it=Mt.current;it&&it.sendChatMessage(Y)},Ka=function(Y,it){var vt=Mt.current;vt&&vt.respondEntry(Y,it)},Ga=function(){try{var Y=Mt.current;return Promise.resolve(function(){if(Y)return Promise.resolve(Y.getMics())}())}catch(it){return Promise.reject(it)}},Ja=function(){try{var Y=Mt.current;return Promise.resolve(function(){if(Y)return Promise.resolve(Y.getWebcams())}())}catch(it){return Promise.reject(it)}},Qa=function(Y){var it=Mt.current;it&&it.changeWebcam(Y)},Ya=function(Y){var it=Mt.current;it&&it.replaceWebcamStream(Y)},Xa=function(Y){var it=Mt.current;it&&it.changeMic(Y)},Za=function(Y){var it=Y.link,vt=Mt.current;vt&&vt.startVideo({link:it})},eo=function(){var Y=Mt.current;Y&&Y.stopVideo()},to=function(){var Y=Mt.current;Y&&Y.resumeVideo()},ro=function(Y){var it=Y.currentTime,vt=Mt.current;vt&&vt.pauseVideo({currentTime:it})},no=function(Y){var it=Y.currentTime,vt=Mt.current;vt&&vt.seekVideo({currentTime:it})},io=function(Y,it){var vt=Mt.current;vt&&vt.startLivestream(Y,it)},so=function(){var Y=Mt.current;Y&&Y.stopLivestream()},Ca=function(Y){var it=Y.meetingId,vt=Y.payload;try{var Xn=Mt.current,Cn=function(){if(Xn)return Promise.resolve(Xn.connectTo({meetingId:it,payload:vt})).then(function(){})}();return Promise.resolve(Cn&&Cn.then?Cn.then(function(){}):void 0)}catch(zs){return Promise.reject(zs)}},Pa=function(Y,it){var vt=Mt.current;vt&&vt.startHls(Y,it)},Cs=function(){var Y=Mt.current;Y&&Y.stopHls()},Ta=function(){Nc.VideoSDK.config(At.current),C?Nc.VideoSDK.analytics(C):Nc.VideoSDK.analytics({sdkType:"react-web",sdkVersion:_x}),a&&mr()};return xe.useEffect(function(){Ta()},[]),xe.useEffect(function(){rt&&We.current&&($r(),Ta(),!a&&mr())},[n.meetingId,i,rt]),f_.createElement(Db.Provider,{value:{meetingId:o==null?void 0:o.id,meeting:o,baseUrl:o==null?void 0:o.baseUrl,localParticipant:h,mainParticipant:f,activeSpeakerId:b,participants:ne,characters:_e,presenterId:x,localMicOn:R,localWebcamOn:v,localScreenShareOn:l,messages:W,isRecording:N,isLiveStreaming:be,pinnedParticipants:oe,connections:Jt,isHls:Nt,recordingState:Br,livestreamState:sr,hlsState:wr,hlsUrls:ot,transcriptionState:Vr,isMeetingJoined:Qt,selectedCameraDevice:o==null?void 0:o.selectedCameraDevice,selectedMicrophoneDevice:o==null?void 0:o.selectedMicrophoneDevice,join:mr,leave:$r,end:tn,startRecording:_n,stopRecording:kn,sendChatMessage:qa,respondEntry:Ka,muteMic:Yn,unmuteMic:fi,toggleMic:xi,disableWebcam:Oi,enableWebcam:es,toggleWebcam:Es,disableScreenShare:$i,enableScreenShare:ks,toggleScreenShare:Xs,getMics:Ga,getWebcams:Ja,changeWebcam:Qa,replaceWebcamStream:Ya,changeMic:Xa,changeMode:$a,startVideo:Za,stopVideo:eo,resumeVideo:to,pauseVideo:ro,seekVideo:no,startLivestream:io,stopLivestream:so,connectTo:Ca,startHls:Pa,stopHls:Cs}},r)},bx=function(t,r){var n={},i=n.onStreamEnabled,a=i===void 0?function(){}:i,y=n.onStreamDisabled,C=y===void 0?function(){}:y,p=n.onMediaStatusChanged,o=p===void 0?function(){}:p,E=n.onVideoQualityChanged,_=E===void 0?function(){}:E,h=xe.useState(null),w=h[0],k=h[1],f=xe.useState(null),g=f[0],s=f[1],b=xe.useState(null),S=b[0],T=b[1],x=xe.useState(null),O=x[0],P=x[1],R=mv(),I=xe.useMemo(function(){var Ae,Ot=R==null?void 0:R.participants,ot=R==null?void 0:R.localParticipant,vr=R==null?void 0:R.activeSpeakerId,br=R==null?void 0:R.mainParticipant,Vr=(R==null||(Ae=R.pinnedParticipants)===null||Ae===void 0?void 0:Ae.get(t))||{cam:!1,share:!1};return{participants:Ot,localParticipant:ot,activeSpeakerId:vr,mainParticipant:br,pinState:Vr}},[R]),d=I.participants,v=I.localParticipant,c=I.activeSpeakerId,u=I.mainParticipant,l=I.pinState,m=d==null?void 0:d.get(t),D=xe.useState(m==null?void 0:m.webcamOn),N=D[0],L=D[1],j=xe.useState(m==null?void 0:m.micOn),W=j[0],$=j[1],Z=xe.useState(m==null?void 0:m.mode),ne=Z[0],de=Z[1],ge=function(Ot){if(Ot.track.readyState==="live")switch(Ot.kind){case"video":w!=null&&k(null),k(Ot);break;case"audio":g!=null&&s(null),s(Ot);break;case"share":S!=null&&T(null),T(Ot);break;case"shareAudio":O!=null&&P(null),P(Ot);break}},_e=function(Ot){switch(Ot.kind){case"video":k(null);break;case"audio":s(null);break;case"share":T(null);break;case"shareAudio":P(null);break}},Me=function(Ot){ge(Ot),a(Ot)},fe=function(Ot){t===Ot.participantId&&de(Ot.mode)},oe=function(Ot){_e(Ot),C(Ot)},ve=function(Ot){var ot=Ot.peerId,vr=Ot.prevQuality,br=Ot.currentQuality;_({peerId:ot,prevQuality:vr,currentQuality:br})},we=function(Ot){var ot=Ot.kind,vr=Ot.peerId,br=Ot.newStatus;ot=="audio"?$(br):ot=="video"&&L(br),o({kind:ot,peerId:vr,newStatus:br})},be=function(Ot){m==null||m.setQuality(Ot)},ht=function(Ot,ot){m==null||m.setViewPort(Ot,ot)},xt=function(){m==null||m.enableMic()},Jt=function(){m==null||m.disableMic()},St=function(){m==null||m.enableWebcam()},Pr=function(){m==null||m.disableWebcam()},Qt=function(Ot){m==null||m.pin(Ot)},It=function(Ot){m==null||m.unpin(Ot)},jr=function(){m==null||m.remove()},Nt=function(Ot){var ot=Ot===void 0?{}:Ot,vr=ot.height,br=ot.width;return Promise.resolve(m==null?void 0:m.captureImage({height:vr,width:br}))},Xt=function(){return Promise.resolve(m==null?void 0:m.getAudioStats())},Mr=function(){return Promise.resolve(m==null?void 0:m.getVideoStats())},Br=function(){return Promise.resolve(m==null?void 0:m.getShareStats())},Fr=function(){return Promise.resolve(m==null?void 0:m.getShareAudioStats())},Zt=function(){m==null||m.consumeWebcamStreams()},sr=function(){m==null||m.consumeMicStreams()},Ve=function(){m==null||m.stopConsumingWebcamStreams()},Rr=function(){m==null||m.stopConsumingMicStreams()},wr=function(Ot){return Promise.resolve(m==null?void 0:m.switchTo(Ot)).then(function(){})};return xe.useEffect(function(){var Ae=m==null?void 0:m.streams;return Ae&&Ae.forEach(function(Ot){ge(Ot)}),m!=null&&m.micOn&&$(W),m!=null&&m.webcamOn&&L(N),m==null||m.on("stream-enabled",Me),m==null||m.on("stream-disabled",oe),m==null||m.on("media-status-changed",we),m==null||m.on("video-quality-changed",ve),Ze.on(tt["participant-mode-changed"],fe),function(){m==null||m.off("stream-enabled",Me),m==null||m.off("stream-disabled",oe),m==null||m.off("media-status-changed",we),m==null||m.off("video-quality-changed",ve),Ze.off(tt["participant-mode-changed"],fe)}},[m]),{displayName:m==null?void 0:m.displayName,participant:m,webcamStream:w,micStream:g,screenShareStream:S,screenShareAudioStream:O,webcamOn:N||!!w,micOn:W||!!g,mode:ne,metaData:m==null?void 0:m.metaData,screenShareOn:!!S,isLocal:(v==null?void 0:v.id)===t,isActiveSpeaker:c===t,isMainParticipant:(u==null?void 0:u.id)===t,pinState:l,consumeMicStreams:sr,consumeWebcamStreams:Zt,stopConsumingMicStreams:Rr,stopConsumingWebcamStreams:Ve,setQuality:be,setViewPort:ht,enableMic:xt,disableMic:Jt,enableWebcam:St,disableWebcam:Pr,captureImage:Nt,pin:Qt,unpin:It,remove:jr,switchTo:wr,getAudioStats:Xt,getVideoStats:Mr,getShareStats:Br,getShareAudioStats:Fr}};typeof Symbol<"u"&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")));typeof Symbol<"u"&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));Nc.VideoSDK.Constants;const Ib="https://cloud-colab-backend.onrender.com",Mb=localStorage.getItem("authToken"),Sx=async()=>{const e=await fetch(`${Ib}/get-token`,{method:"GET",headers:{Authorization:Mb}}),{token:t}=await e.json();return t},Rx=async({token:e})=>{const t=await fetch(`${Ib}/create-meeting`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:Mb},body:JSON.stringify({token:e})}),{roomId:r}=await t.json();return r},Ex="modulepreload",kx=function(e){return"/"+e},Oy={},hs=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const y=document.querySelector("meta[property=csp-nonce]"),C=(y==null?void 0:y.nonce)||(y==null?void 0:y.getAttribute("nonce"));i=Promise.allSettled(r.map(p=>{if(p=kx(p),p in Oy)return;Oy[p]=!0;const o=p.endsWith(".css"),E=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${E}`))return;const _=document.createElement("link");if(_.rel=o?"stylesheet":Ex,o||(_.as="script"),_.crossOrigin="",_.href=p,C&&_.setAttribute("nonce",C),document.head.appendChild(_),o)return new Promise((h,w)=>{_.addEventListener("load",h),_.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${p}`)))})}))}function a(y){const C=new Event("vite:preloadError",{cancelable:!0});if(C.payload=y,window.dispatchEvent(C),!C.defaultPrevented)throw y}return i.then(y=>{for(const C of y||[])C.status==="rejected"&&a(C.reason);return t().catch(a)})};var Cx=function(t,r,n){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");typeof r=="function"&&(n=r,r={}),r=r||{},n=n||function(){},a.type=r.type||"text/javascript",a.charset=r.charset||"utf8",a.async="async"in r?!!r.async:!0,a.src=t,r.attrs&&Px(a,r.attrs),r.text&&(a.text=""+r.text);var y="onload"in a?Dy:Tx;y(a,n),a.onload||Dy(a,n),i.appendChild(a)};function Px(e,t){for(var r in t)e.setAttribute(r,t[r])}function Dy(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function Tx(e,t){e.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,t(null,e))}}var xx=function(t){return Ox(t)&&!Dx(t)};function Ox(e){return!!e&&typeof e=="object"}function Dx(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||Ax(e)}var Ix=typeof Symbol=="function"&&Symbol.for,Mx=Ix?Symbol.for("react.element"):60103;function Ax(e){return e.$$typeof===Mx}function Lx(e){return Array.isArray(e)?[]:{}}function Ku(e,t){return t.clone!==!1&&t.isMergeableObject(e)?vl(Lx(e),e,t):e}function Nx(e,t,r){return e.concat(t).map(function(n){return Ku(n,r)})}function jx(e,t){if(!t.customMerge)return vl;var r=t.customMerge(e);return typeof r=="function"?r:vl}function Bx(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return Object.propertyIsEnumerable.call(e,t)}):[]}function Iy(e){return Object.keys(e).concat(Bx(e))}function Ab(e,t){try{return t in e}catch{return!1}}function Fx(e,t){return Ab(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function Ux(e,t,r){var n={};return r.isMergeableObject(e)&&Iy(e).forEach(function(i){n[i]=Ku(e[i],r)}),Iy(t).forEach(function(i){Fx(e,i)||(Ab(e,i)&&r.isMergeableObject(t[i])?n[i]=jx(i,r)(e[i],t[i],r):n[i]=Ku(t[i],r))}),n}function vl(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||Nx,r.isMergeableObject=r.isMergeableObject||xx,r.cloneUnlessOtherwiseSpecified=Ku;var n=Array.isArray(t),i=Array.isArray(e),a=n===i;return a?n?r.arrayMerge(e,t,r):Ux(e,t,r):Ku(t,r)}vl.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(n,i){return vl(n,i,r)},{})};var zx=vl,Lb=zx,Hx=Object.create,Mh=Object.defineProperty,Wx=Object.getOwnPropertyDescriptor,Vx=Object.getOwnPropertyNames,$x=Object.getPrototypeOf,qx=Object.prototype.hasOwnProperty,Kx=(e,t)=>{for(var r in t)Mh(e,r,{get:t[r],enumerable:!0})},Nb=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of Vx(t))!qx.call(e,i)&&i!==r&&Mh(e,i,{get:()=>t[i],enumerable:!(n=Wx(t,i))||n.enumerable});return e},gv=(e,t,r)=>(r=e!=null?Hx($x(e)):{},Nb(!e||!e.__esModule?Mh(r,"default",{value:e,enumerable:!0}):r,e)),Gx=e=>Nb(Mh({},"__esModule",{value:!0}),e),jb={};Kx(jb,{callPlayer:()=>uO,getConfig:()=>cO,getSDK:()=>oO,isBlobUrl:()=>pO,isMediaStream:()=>dO,lazy:()=>Xx,omit:()=>lO,parseEndTime:()=>iO,parseStartTime:()=>nO,queryString:()=>aO,randomString:()=>sO,supportsWebKitPresentationMode:()=>hO});var Ah=Gx(jb),Jx=gv(xe),Qx=gv(Cx),Yx=gv(Lb);const Xx=e=>Jx.default.lazy(async()=>{const t=await e();return typeof t.default=="function"?t:t.default}),Zx=/[?&#](?:start|t)=([0-9hms]+)/,eO=/[?&#]end=([0-9hms]+)/,Lm=/(\d+)(h|m|s)/g,tO=/^\d+$/;function Bb(e,t){if(e instanceof Array)return;const r=e.match(t);if(r){const n=r[1];if(n.match(Lm))return rO(n);if(tO.test(n))return parseInt(n)}}function rO(e){let t=0,r=Lm.exec(e);for(;r!==null;){const[,n,i]=r;i==="h"&&(t+=parseInt(n,10)*60*60),i==="m"&&(t+=parseInt(n,10)*60),i==="s"&&(t+=parseInt(n,10)),r=Lm.exec(e)}return t}function nO(e){return Bb(e,Zx)}function iO(e){return Bb(e,eO)}function sO(){return Math.random().toString(36).substr(2,5)}function aO(e){return Object.keys(e).map(t=>`${t}=${e[t]}`).join("&")}function Tf(e){return window[e]?window[e]:window.exports&&window.exports[e]?window.exports[e]:window.module&&window.module.exports&&window.module.exports[e]?window.module.exports[e]:null}const Ac={},oO=function(t,r,n=null,i=()=>!0,a=Qx.default){const y=Tf(r);return y&&i(y)?Promise.resolve(y):new Promise((C,p)=>{if(Ac[t]){Ac[t].push({resolve:C,reject:p});return}Ac[t]=[{resolve:C,reject:p}];const o=E=>{Ac[t].forEach(_=>_.resolve(E))};if(n){const E=window[n];window[n]=function(){E&&E(),o(Tf(r))}}a(t,E=>{E?(Ac[t].forEach(_=>_.reject(E)),Ac[t]=null):n||o(Tf(r))})})};function cO(e,t){return(0,Yx.default)(t.config,e.config)}function lO(e,...t){const r=[].concat(...t),n={},i=Object.keys(e);for(const a of i)r.indexOf(a)===-1&&(n[a]=e[a]);return n}function uO(e,...t){if(!this.player||!this.player[e]){let r=`ReactPlayer: ${this.constructor.displayName} player could not call %c${e}%c – `;return this.player?this.player[e]||(r+="The method was not available"):r+="The player was not available",console.warn(r,"font-weight: bold",""),null}return this.player[e](...t)}function dO(e){return typeof window<"u"&&typeof window.MediaStream<"u"&&e instanceof window.MediaStream}function pO(e){return/^blob:/.test(e)}function hO(e=document.createElement("video")){const t=/iPhone|iPod/.test(navigator.userAgent)===!1;return e.webkitSupportsPresentationMode&&typeof e.webkitSetPresentationMode=="function"&&t}var vv=Object.defineProperty,fO=Object.getOwnPropertyDescriptor,mO=Object.getOwnPropertyNames,gO=Object.prototype.hasOwnProperty,vO=(e,t)=>{for(var r in t)vv(e,r,{get:t[r],enumerable:!0})},yO=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of mO(t))!gO.call(e,i)&&i!==r&&vv(e,i,{get:()=>t[i],enumerable:!(n=fO(t,i))||n.enumerable});return e},_O=e=>yO(vv({},"__esModule",{value:!0}),e),Fb={};vO(Fb,{AUDIO_EXTENSIONS:()=>yv,DASH_EXTENSIONS:()=>Zb,FLV_EXTENSIONS:()=>e2,HLS_EXTENSIONS:()=>wv,MATCH_URL_DAILYMOTION:()=>Jb,MATCH_URL_FACEBOOK:()=>Wb,MATCH_URL_FACEBOOK_WATCH:()=>Vb,MATCH_URL_KALTURA:()=>Xb,MATCH_URL_MIXCLOUD:()=>Qb,MATCH_URL_MUX:()=>Hb,MATCH_URL_SOUNDCLOUD:()=>Ub,MATCH_URL_STREAMABLE:()=>$b,MATCH_URL_TWITCH_CHANNEL:()=>Gb,MATCH_URL_TWITCH_VIDEO:()=>Kb,MATCH_URL_VIDYARD:()=>Yb,MATCH_URL_VIMEO:()=>zb,MATCH_URL_WISTIA:()=>qb,MATCH_URL_YOUTUBE:()=>Nm,VIDEO_EXTENSIONS:()=>_v,canPlay:()=>bO});var wO=_O(Fb),My=Ah;const Nm=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,Ub=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,zb=/vimeo\.com\/(?!progressive_redirect).+/,Hb=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,Wb=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,Vb=/^https?:\/\/fb\.watch\/.+$/,$b=/streamable\.com\/([a-z0-9]+)$/,qb=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,Kb=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,Gb=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,Jb=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,Qb=/mixcloud\.com\/([^/]+\/[^/]+)/,Yb=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,Xb=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,yv=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,_v=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,wv=/\.(m3u8)($|\?)/i,Zb=/\.(mpd)($|\?)/i,e2=/\.(flv)($|\?)/i,jm=e=>{if(e instanceof Array){for(const t of e)if(typeof t=="string"&&jm(t)||jm(t.src))return!0;return!1}return(0,My.isMediaStream)(e)||(0,My.isBlobUrl)(e)?!0:yv.test(e)||_v.test(e)||wv.test(e)||Zb.test(e)||e2.test(e)},bO={youtube:e=>e instanceof Array?e.every(t=>Nm.test(t)):Nm.test(e),soundcloud:e=>Ub.test(e)&&!yv.test(e),vimeo:e=>zb.test(e)&&!_v.test(e)&&!wv.test(e),mux:e=>Hb.test(e),facebook:e=>Wb.test(e)||Vb.test(e),streamable:e=>$b.test(e),wistia:e=>qb.test(e),twitch:e=>Kb.test(e)||Gb.test(e),dailymotion:e=>Jb.test(e),mixcloud:e=>Qb.test(e),vidyard:e=>Yb.test(e),kaltura:e=>Xb.test(e),file:jm};var bv=Object.defineProperty,SO=Object.getOwnPropertyDescriptor,RO=Object.getOwnPropertyNames,EO=Object.prototype.hasOwnProperty,kO=(e,t)=>{for(var r in t)bv(e,r,{get:t[r],enumerable:!0})},CO=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of RO(t))!EO.call(e,i)&&i!==r&&bv(e,i,{get:()=>t[i],enumerable:!(n=SO(t,i))||n.enumerable});return e},PO=e=>CO(bv({},"__esModule",{value:!0}),e),t2={};kO(t2,{default:()=>xO});var TO=PO(t2),ps=Ah,rs=wO,xO=[{key:"youtube",name:"YouTube",canPlay:rs.canPlay.youtube,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./YouTube-2aH6y-Fa.js").then(e=>e.Y),[]))},{key:"soundcloud",name:"SoundCloud",canPlay:rs.canPlay.soundcloud,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./SoundCloud-JOKQw7JX.js").then(e=>e.S),[]))},{key:"vimeo",name:"Vimeo",canPlay:rs.canPlay.vimeo,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./Vimeo-Cp9HmyJn.js").then(e=>e.V),[]))},{key:"mux",name:"Mux",canPlay:rs.canPlay.mux,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./Mux-DeTuxNcp.js").then(e=>e.M),[]))},{key:"facebook",name:"Facebook",canPlay:rs.canPlay.facebook,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./Facebook-BneSNITl.js").then(e=>e.F),[]))},{key:"streamable",name:"Streamable",canPlay:rs.canPlay.streamable,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./Streamable-BjWVeb5n.js").then(e=>e.S),[]))},{key:"wistia",name:"Wistia",canPlay:rs.canPlay.wistia,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./Wistia-DN73VCwU.js").then(e=>e.W),[]))},{key:"twitch",name:"Twitch",canPlay:rs.canPlay.twitch,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./Twitch-B2R7dlUr.js").then(e=>e.T),[]))},{key:"dailymotion",name:"DailyMotion",canPlay:rs.canPlay.dailymotion,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./DailyMotion-CTpLzeTW.js").then(e=>e.D),[]))},{key:"mixcloud",name:"Mixcloud",canPlay:rs.canPlay.mixcloud,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./Mixcloud-Bp-xN2Bu.js").then(e=>e.M),[]))},{key:"vidyard",name:"Vidyard",canPlay:rs.canPlay.vidyard,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./Vidyard-BcjGfbuI.js").then(e=>e.V),[]))},{key:"kaltura",name:"Kaltura",canPlay:rs.canPlay.kaltura,lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./Kaltura-ffS8yD0l.js").then(e=>e.K),[]))},{key:"file",name:"FilePlayer",canPlay:rs.canPlay.file,canEnablePIP:e=>rs.canPlay.file(e)&&(document.pictureInPictureEnabled||(0,ps.supportsWebKitPresentationMode)())&&!rs.AUDIO_EXTENSIONS.test(e),lazyPlayer:(0,ps.lazy)(()=>hs(()=>import("./FilePlayer-8Ayi7B6R.js").then(e=>e.F),[]))}],Ay=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function OO(e,t){return!!(e===t||Ay(e)&&Ay(t))}function DO(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!OO(e[r],t[r]))return!1;return!0}function IO(e,t){t===void 0&&(t=DO);var r,n=[],i,a=!1;function y(){for(var C=[],p=0;p<arguments.length;p++)C[p]=arguments[p];return a&&r===this&&t(C,n)||(i=e.apply(this,C),a=!0,r=this,n=C),i}return y}const MO=Object.freeze(Object.defineProperty({__proto__:null,default:IO},Symbol.toStringTag,{value:"Module"})),AO=dS(MO);var LO=typeof Element<"u",NO=typeof Map=="function",jO=typeof Set=="function",BO=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function _p(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!_p(e[n],t[n]))return!1;return!0}var a;if(NO&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(a=e.entries();!(n=a.next()).done;)if(!t.has(n.value[0]))return!1;for(a=e.entries();!(n=a.next()).done;)if(!_p(n.value[1],t.get(n.value[0])))return!1;return!0}if(jO&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(a=e.entries();!(n=a.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(BO&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[n]))return!1;if(LO&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&e.$$typeof)&&!_p(e[i[n]],t[i[n]]))return!1;return!0}return e!==e&&t!==t}var r2=function(t,r){try{return _p(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}},n2={exports:{}},FO="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",UO=FO,zO=UO;function i2(){}function s2(){}s2.resetWarningCache=i2;var HO=function(){function e(n,i,a,y,C,p){if(p!==zO){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s2,resetWarningCache:i2};return r.PropTypes=r,r};n2.exports=HO();var WO=n2.exports,VO=Object.create,Lh=Object.defineProperty,$O=Object.getOwnPropertyDescriptor,qO=Object.getOwnPropertyNames,KO=Object.getPrototypeOf,GO=Object.prototype.hasOwnProperty,JO=(e,t)=>{for(var r in t)Lh(e,r,{get:t[r],enumerable:!0})},a2=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of qO(t))!GO.call(e,i)&&i!==r&&Lh(e,i,{get:()=>t[i],enumerable:!(n=$O(t,i))||n.enumerable});return e},QO=(e,t,r)=>(r=e!=null?VO(KO(e)):{},a2(!e||!e.__esModule?Lh(r,"default",{value:e,enumerable:!0}):r,e)),YO=e=>a2(Lh({},"__esModule",{value:!0}),e),o2={};JO(o2,{defaultProps:()=>e4,propTypes:()=>ZO});var c2=YO(o2),XO=QO(WO);const{string:Bi,bool:ns,number:Lc,array:xf,oneOfType:ou,shape:xs,object:Qi,func:vi,node:Ly}=XO.default,ZO={url:ou([Bi,xf,Qi]),playing:ns,loop:ns,controls:ns,volume:Lc,muted:ns,playbackRate:Lc,width:ou([Bi,Lc]),height:ou([Bi,Lc]),style:Qi,progressInterval:Lc,playsinline:ns,pip:ns,stopOnUnmount:ns,light:ou([ns,Bi,Qi]),playIcon:Ly,previewTabIndex:Lc,previewAriaLabel:Bi,fallback:Ly,oEmbedUrl:Bi,wrapper:ou([Bi,vi,xs({render:vi.isRequired})]),config:xs({soundcloud:xs({options:Qi}),youtube:xs({playerVars:Qi,embedOptions:Qi,onUnstarted:vi}),facebook:xs({appId:Bi,version:Bi,playerId:Bi,attributes:Qi}),dailymotion:xs({params:Qi}),vimeo:xs({playerOptions:Qi,title:Bi}),mux:xs({attributes:Qi,version:Bi}),file:xs({attributes:Qi,tracks:xf,forceVideo:ns,forceAudio:ns,forceHLS:ns,forceSafariHLS:ns,forceDisableHls:ns,forceDASH:ns,forceFLV:ns,hlsOptions:Qi,hlsVersion:Bi,dashVersion:Bi,flvVersion:Bi}),wistia:xs({options:Qi,playerId:Bi,customControls:xf}),mixcloud:xs({options:Qi}),twitch:xs({options:Qi,playerId:Bi}),vidyard:xs({options:Qi})}),onReady:vi,onStart:vi,onPlay:vi,onPause:vi,onBuffer:vi,onBufferEnd:vi,onEnded:vi,onError:vi,onDuration:vi,onSeek:vi,onPlaybackRateChange:vi,onPlaybackQualityChange:vi,onProgress:vi,onClickPreview:vi,onEnablePIP:vi,onDisablePIP:vi},Fi=()=>{},e4={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:Fi},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:Fi,onStart:Fi,onPlay:Fi,onPause:Fi,onBuffer:Fi,onBufferEnd:Fi,onEnded:Fi,onError:Fi,onDuration:Fi,onSeek:Fi,onPlaybackRateChange:Fi,onPlaybackQualityChange:Fi,onProgress:Fi,onClickPreview:Fi,onEnablePIP:Fi,onDisablePIP:Fi};var t4=Object.create,cd=Object.defineProperty,r4=Object.getOwnPropertyDescriptor,n4=Object.getOwnPropertyNames,i4=Object.getPrototypeOf,s4=Object.prototype.hasOwnProperty,a4=(e,t,r)=>t in e?cd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,o4=(e,t)=>{for(var r in t)cd(e,r,{get:t[r],enumerable:!0})},l2=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of n4(t))!s4.call(e,i)&&i!==r&&cd(e,i,{get:()=>t[i],enumerable:!(n=r4(t,i))||n.enumerable});return e},u2=(e,t,r)=>(r=e!=null?t4(i4(e)):{},l2(!e||!e.__esModule?cd(r,"default",{value:e,enumerable:!0}):r,e)),c4=e=>l2(cd({},"__esModule",{value:!0}),e),Kn=(e,t,r)=>(a4(e,typeof t!="symbol"?t+"":t,r),r),d2={};o4(d2,{default:()=>Nh});var l4=c4(d2),Ny=u2(xe),u4=u2(r2),p2=c2,d4=Ah;const p4=5e3;class Nh extends Ny.Component{constructor(){super(...arguments),Kn(this,"mounted",!1),Kn(this,"isReady",!1),Kn(this,"isPlaying",!1),Kn(this,"isLoading",!0),Kn(this,"loadOnReady",null),Kn(this,"startOnPlay",!0),Kn(this,"seekOnPlay",null),Kn(this,"onDurationCalled",!1),Kn(this,"handlePlayerMount",t=>{if(this.player){this.progress();return}this.player=t,this.player.load(this.props.url),this.progress()}),Kn(this,"getInternalPlayer",t=>this.player?this.player[t]:null),Kn(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const t=this.getCurrentTime()||0,r=this.getSecondsLoaded(),n=this.getDuration();if(n){const i={playedSeconds:t,played:t/n};r!==null&&(i.loadedSeconds=r,i.loaded=r/n),(i.playedSeconds!==this.prevPlayed||i.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(i),this.prevPlayed=i.playedSeconds,this.prevLoaded=i.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),Kn(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:t,playing:r,volume:n,muted:i}=this.props;t(),!i&&n!==null&&this.player.setVolume(n),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):r&&this.player.play(),this.handleDurationCheck()}),Kn(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:t,onPlay:r,playbackRate:n}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&n!==1&&this.player.setPlaybackRate(n),t(),this.startOnPlay=!1),r(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),Kn(this,"handlePause",t=>{this.isPlaying=!1,this.isLoading||this.props.onPause(t)}),Kn(this,"handleEnded",()=>{const{activePlayer:t,loop:r,onEnded:n}=this.props;t.loopOnEnded&&r&&this.seekTo(0),r||(this.isPlaying=!1,n())}),Kn(this,"handleError",(...t)=>{this.isLoading=!1,this.props.onError(...t)}),Kn(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const t=this.getDuration();t?this.onDurationCalled||(this.props.onDuration(t),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),Kn(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(t){if(!this.player)return;const{url:r,playing:n,volume:i,muted:a,playbackRate:y,pip:C,loop:p,activePlayer:o,disableDeferredLoading:E}=this.props;if(!(0,u4.default)(t.url,r)){if(this.isLoading&&!o.forceLoad&&!E&&!(0,d4.isMediaStream)(r)){console.warn(`ReactPlayer: the attempt to load ${r} is being deferred until the player has loaded`),this.loadOnReady=r;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(r,this.isReady)}!t.playing&&n&&!this.isPlaying&&this.player.play(),t.playing&&!n&&this.isPlaying&&this.player.pause(),!t.pip&&C&&this.player.enablePIP&&this.player.enablePIP(),t.pip&&!C&&this.player.disablePIP&&this.player.disablePIP(),t.volume!==i&&i!==null&&this.player.setVolume(i),t.muted!==a&&(a?this.player.mute():(this.player.unmute(),i!==null&&setTimeout(()=>this.player.setVolume(i)))),t.playbackRate!==y&&this.player.setPlaybackRate&&this.player.setPlaybackRate(y),t.loop!==p&&this.player.setLoop&&this.player.setLoop(p)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(t,r,n){if(!this.isReady){t!==0&&(this.seekOnPlay=t,setTimeout(()=>{this.seekOnPlay=null},p4));return}if(r?r==="fraction":t>0&&t<1){const a=this.player.getDuration();if(!a){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(a*t,n);return}this.player.seekTo(t,n)}render(){const t=this.props.activePlayer;return t?Ny.default.createElement(t,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}Kn(Nh,"displayName","Player");Kn(Nh,"propTypes",p2.propTypes);Kn(Nh,"defaultProps",p2.defaultProps);var h4=Object.create,ld=Object.defineProperty,f4=Object.getOwnPropertyDescriptor,m4=Object.getOwnPropertyNames,g4=Object.getPrototypeOf,v4=Object.prototype.hasOwnProperty,y4=(e,t,r)=>t in e?ld(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,_4=(e,t)=>{for(var r in t)ld(e,r,{get:t[r],enumerable:!0})},h2=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of m4(t))!v4.call(e,i)&&i!==r&&ld(e,i,{get:()=>t[i],enumerable:!(n=f4(t,i))||n.enumerable});return e},ud=(e,t,r)=>(r=e!=null?h4(g4(e)):{},h2(!e||!e.__esModule?ld(r,"default",{value:e,enumerable:!0}):r,e)),w4=e=>h2(ld({},"__esModule",{value:!0}),e),qn=(e,t,r)=>(y4(e,typeof t!="symbol"?t+"":t,r),r),f2={};_4(f2,{createReactPlayer:()=>x4});var b4=w4(f2),jc=ud(xe),S4=ud(Lb),Of=ud(AO),jy=ud(r2),gu=c2,m2=Ah,R4=ud(l4);const E4=(0,m2.lazy)(()=>hs(()=>import("./Preview-pU0yETFq.js").then(e=>e.P),[])),k4=typeof window<"u"&&window.document&&typeof document<"u",C4=typeof Jh<"u"&&Jh.window&&Jh.window.document,P4=Object.keys(gu.propTypes),T4=k4||C4?jc.Suspense:()=>null,cu=[],x4=(e,t)=>{var r;return r=class extends jc.Component{constructor(){super(...arguments),qn(this,"state",{showPreview:!!this.props.light}),qn(this,"references",{wrapper:n=>{this.wrapper=n},player:n=>{this.player=n}}),qn(this,"handleClickPreview",n=>{this.setState({showPreview:!1}),this.props.onClickPreview(n)}),qn(this,"showPreview",()=>{this.setState({showPreview:!0})}),qn(this,"getDuration",()=>this.player?this.player.getDuration():null),qn(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),qn(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),qn(this,"getInternalPlayer",(n="player")=>this.player?this.player.getInternalPlayer(n):null),qn(this,"seekTo",(n,i,a)=>{if(!this.player)return null;this.player.seekTo(n,i,a)}),qn(this,"handleReady",()=>{this.props.onReady(this)}),qn(this,"getActivePlayer",(0,Of.default)(n=>{for(const i of[...cu,...e])if(i.canPlay(n))return i;return t||null})),qn(this,"getConfig",(0,Of.default)((n,i)=>{const{config:a}=this.props;return S4.default.all([gu.defaultProps.config,gu.defaultProps.config[i]||{},a,a[i]||{}])})),qn(this,"getAttributes",(0,Of.default)(n=>(0,m2.omit)(this.props,P4))),qn(this,"renderActivePlayer",n=>{if(!n)return null;const i=this.getActivePlayer(n);if(!i)return null;const a=this.getConfig(n,i.key);return jc.default.createElement(R4.default,{...this.props,key:i.key,ref:this.references.player,config:a,activePlayer:i.lazyPlayer||i,onReady:this.handleReady})})}shouldComponentUpdate(n,i){return!(0,jy.default)(this.props,n)||!(0,jy.default)(this.state,i)}componentDidUpdate(n){const{light:i}=this.props;!n.light&&i&&this.setState({showPreview:!0}),n.light&&!i&&this.setState({showPreview:!1})}renderPreview(n){if(!n)return null;const{light:i,playIcon:a,previewTabIndex:y,oEmbedUrl:C,previewAriaLabel:p}=this.props;return jc.default.createElement(E4,{url:n,light:i,playIcon:a,previewTabIndex:y,previewAriaLabel:p,oEmbedUrl:C,onClick:this.handleClickPreview})}render(){const{url:n,style:i,width:a,height:y,fallback:C,wrapper:p}=this.props,{showPreview:o}=this.state,E=this.getAttributes(n),_=typeof p=="string"?this.references.wrapper:void 0;return jc.default.createElement(p,{ref:_,style:{...i,width:a,height:y},...E},jc.default.createElement(T4,{fallback:C},o?this.renderPreview(n):this.renderActivePlayer(n)))}},qn(r,"displayName","ReactPlayer"),qn(r,"propTypes",gu.propTypes),qn(r,"defaultProps",gu.defaultProps),qn(r,"addCustomPlayer",n=>{cu.push(n)}),qn(r,"removeCustomPlayers",()=>{cu.length=0}),qn(r,"canPlay",n=>{for(const i of[...cu,...e])if(i.canPlay(n))return!0;return!1}),qn(r,"canEnablePIP",n=>{for(const i of[...cu,...e])if(i.canEnablePIP&&i.canEnablePIP(n))return!0;return!1}),r};var O4=Object.create,jh=Object.defineProperty,D4=Object.getOwnPropertyDescriptor,I4=Object.getOwnPropertyNames,M4=Object.getPrototypeOf,A4=Object.prototype.hasOwnProperty,L4=(e,t)=>{for(var r in t)jh(e,r,{get:t[r],enumerable:!0})},g2=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of I4(t))!A4.call(e,i)&&i!==r&&jh(e,i,{get:()=>t[i],enumerable:!(n=D4(t,i))||n.enumerable});return e},N4=(e,t,r)=>(r=e!=null?O4(M4(e)):{},g2(!e||!e.__esModule?jh(r,"default",{value:e,enumerable:!0}):r,e)),j4=e=>g2(jh({},"__esModule",{value:!0}),e),v2={};L4(v2,{default:()=>z4});var B4=j4(v2),Bm=N4(TO),F4=b4;const U4=Bm.default[Bm.default.length-1];var z4=(0,F4.createReactPlayer)(Bm.default,U4);const H4=oh(B4);function W4({style:e}){return me.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",style:e,children:me.jsxs("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,children:[me.jsx("path",{d:"M14.186 2.753v3.596c0 .487.194.955.54 1.3a1.85 1.85 0 0 0 1.306.539h4.125"}),me.jsx("path",{d:"M20.25 8.568v8.568a4.25 4.25 0 0 1-1.362 2.97a4.28 4.28 0 0 1-3.072 1.14h-7.59a4.3 4.3 0 0 1-3.1-1.124a4.26 4.26 0 0 1-1.376-2.986V6.862a4.25 4.25 0 0 1 1.362-2.97a4.28 4.28 0 0 1 3.072-1.14h5.714a3.5 3.5 0 0 1 2.361.905l2.96 2.722a2.97 2.97 0 0 1 1.031 2.189M7.647 7.647h3.265M7.647 12h8.706m-8.706 4.353h8.706"})]})})}function V4(){return me.jsx("div",{children:me.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",children:me.jsx("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h7v2H5v14h7v2zm11-4l-1.375-1.45l2.55-2.55H9v-2h8.175l-2.55-2.55L16 7l5 5z"})})})}function $4({style:e}){return me.jsx("div",{children:me.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",style:e,children:me.jsx("path",{fill:"currentColor",d:"M12 8q2.95 0 5.813 1.188T22.9 12.75q.3.3.3.7t-.3.7l-2.3 2.25q-.275.275-.638.3t-.662-.2l-2.9-2.2q-.2-.15-.3-.35t-.1-.45v-2.85q-.95-.3-1.95-.475T12 10t-2.05.175T8 10.65v2.85q0 .25-.1.45t-.3.35l-2.9 2.2q-.3.225-.663.2t-.637-.3l-2.3-2.25q-.3-.3-.3-.7t.3-.7q2.2-2.375 5.075-3.562T12 8"})})})}function y2({style:e}){return me.jsx("div",{children:me.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20",style:e,children:me.jsx("path",{fill:"currentColor",d:"M9 18v-1.06A8 8 0 0 1 2 9h2a6 6 0 1 0 12 0h2a8 8 0 0 1-7 7.94V18h3v2H6v-2zM6 4a4 4 0 1 1 8 0v5a4 4 0 1 1-8 0z"})})})}function _2({style:e}){return me.jsx("div",{children:me.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 20 20",style:e,children:me.jsx("path",{fill:"currentColor",fillRule:"evenodd",d:"M1 8a2 2 0 0 1 2-2h.93a2 2 0 0 0 1.664-.89l.812-1.22A2 2 0 0 1 8.07 3h3.86a2 2 0 0 1 1.664.89l.812 1.22A2 2 0 0 0 16.07 6H17a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2zm13.5 3a4.5 4.5 0 1 1-9 0a4.5 4.5 0 0 1 9 0M10 14a3 3 0 1 0 0-6a3 3 0 0 0 0 6",clipRule:"evenodd"})})})}function q4({style:e}){return me.jsx("div",{children:me.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",style:e,children:me.jsx("path",{fill:"currentColor",d:"M17.75 14.95L16.3 13.5q.35-.575.525-1.2T17 11h2q0 1.1-.325 2.088t-.925 1.862m-2.95-3L9 6.15V5q0-1.25.875-2.125T12 2t2.125.875T15 5v6q0 .275-.062.5t-.138.45M11 21v-3.1q-2.6-.35-4.3-2.312T5 11h2q0 2.075 1.463 3.538T12 16q.85 0 1.613-.262T15 15l1.425 1.425q-.725.575-1.588.963T13 17.9V21zm8.8 1.6L1.4 4.2l1.4-1.4l18.4 18.4z"})})})}function K4({style:e}){return me.jsx("div",{children:me.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24",style:e,children:me.jsx("path",{fill:"currentColor",d:"M1.2 4.47L2.5 3.2L20 20.72L18.73 22l-2-2H4a2 2 0 0 1-2-2V6c0-.22.04-.43.1-.63zM7 4l2-2h6l2 2h3a2 2 0 0 1 2 2v12c0 .6-.26 1.13-.68 1.5l-4.99-5c.43-.73.67-1.59.67-2.5a5 5 0 0 0-5-5c-.91 0-1.77.24-2.5.67L5.82 4zm0 8a5 5 0 0 0 5 5c.5 0 1.03-.08 1.5-.23L11.72 15A3.064 3.064 0 0 1 9 12.28L7.23 10.5c-.15.47-.23 1-.23 1.5m5-3a3 3 0 0 1 3 3a3 3 0 0 1-.17 1L11 9.17A3 3 0 0 1 12 9"})})})}function G4({getMeetingAndToken:e}){const[t,r]=xe.useState(null),n=async()=>{localStorage.setItem("meetingId",t),await e(t)};return me.jsx("div",{className:"flex justify-center items-center h-[80vh] w-full",children:me.jsxs("div",{className:"w-6/12 h-auto rounded-lg shadow-lg m-auto p-5 text-neutral flex gap-3 flex-col",children:[me.jsx("input",{type:"text",className:"input input-bordered w-full max-w-xs",placeholder:"Enter Meeting Id",onChange:i=>{r(i.target.value)}}),me.jsx("button",{className:"btn btn-accent btn-md",onClick:n,children:"Join"}),me.jsx("span",{className:"text-center",children:" or "}),me.jsx("button",{className:"btn btn-primary btn-md",onClick:n,children:"Create Meeting"})]})})}function J4(e){const t=xe.useRef(null),{webcamStream:r,micStream:n,webcamOn:i,micOn:a,isLocal:y,displayName:C}=bx(e.participantId),p=xe.useMemo(()=>{if(i&&r){const o=new MediaStream;return o.addTrack(r.track),o}},[r,i]);return xe.useEffect(()=>{if(t.current)if(a&&n){const o=new MediaStream;o.addTrack(n.track),t.current.srcObject=o,t.current.play().catch(E=>console.error("videoElem.current.play() failed",E))}else t.current.srcObject=null},[n,a]),me.jsxs("div",{className:"w-full",children:[me.jsxs("div",{className:"join w-full",children:[me.jsx("div",{className:"join-item  text-lg p-3 font-bold",children:C}),me.jsx("div",{className:"join-item text-white text-xs py-3 px-2",children:i?me.jsx(_2,{style:{fontSize:15}}):me.jsx(K4,{style:{fontSize:20}})}),me.jsx("div",{className:"join-item text-white  text-xs py-3 px-2",children:a?me.jsx(y2,{style:{fontSize:15}}):me.jsx(q4,{style:{fontSize:20}})})]}),me.jsx("audio",{ref:t,autoPlay:!0,playsInline:!0,muted:y}),me.jsx("div",{className:"w-full h-auto  p-0 m-0",children:i&&me.jsx(H4,{playsinline:!0,pip:!1,light:!1,controls:!1,muted:!0,playing:!0,url:p,height:"100%",width:"100%",onError:o=>{console.log(o,"participant video error")}})})]})}function Q4(e){const[t,r]=xe.useState(null),{join:n,participants:i}=mv({onMeetingJoined:()=>{r("JOINED")},onMeetingLeft:()=>{e.onMeetingLeave()}}),a=()=>{r("JOINING"),n()};return me.jsxs("div",{className:"w-full h-5/6",children:[me.jsx("div",{className:"w-full",children:me.jsxs("h3",{children:[" Meeting Id: ",e.meetingId]})}),me.jsx("div",{className:"w-full flex  flex-col-reverse",children:t&&t=="JOINED"?me.jsxs("div",{children:[me.jsx("div",{className:"w-full py-4  flex flex-row items-center justify-center",children:me.jsx(Y4,{})}),me.jsx("div",{className:"w-full sm:grid sm:grid-cols-2 gap-3",children:[...i.keys()].map(y=>me.jsx("div",{className:"w-full bg-base-300 mb-2 rounded-lg shadow-xl",children:me.jsx("div",{className:"w-full",children:me.jsx(J4,{participantId:y},y)})}))})]}):t&&t=="JOINING"?me.jsx("div",{className:"flex  justify-center items-center h-[80vh] w-full",children:me.jsx("p",{className:"btn btn-primary btn-wide",children:"Joining the meeting..."})}):me.jsx("div",{className:"flex  justify-center items-center h-[80vh] w-full",children:me.jsx("button",{className:"btn btn-primary btn-wide",onClick:a,children:"Joing Now"})})})]})}function Y4(){const{leave:e,toggleMic:t,toggleWebcam:r}=mv();return me.jsxs("div",{className:" join",children:[me.jsx("button",{className:"join-item py-4 px-2 w-10 bg-base-300 ",onClick:()=>e(),children:me.jsx($4,{style:{color:"red",fontSize:20}})}),me.jsx("button",{className:"join-item py-4 px-2 w-10 bg-base-300",onClick:()=>t(),children:me.jsx(y2,{style:{color:"white",fontSize:20}})}),me.jsx("button",{className:"join-item py-4 px-2 w-10 bg-base-300 ",onClick:()=>r(),children:me.jsx(_2,{style:{color:"white",fontSize:20}})})]})}function X4({user:e}){const[t,r]=xe.useState(null),[n,i]=xe.useState(null),a=async C=>{const p=await Sx();console.log(p),i(p);const o=C??await Rx({token:p});r(o),console.log(`meeting id: ${o}`),localStorage.setItem("meetingId",o)},y=()=>{r(null)};return xe.useEffect(()=>{},[]),n&&t?me.jsx(wx,{config:{meetingId:t,micEnabled:!0,webcamEnabled:!0,name:e.fullname},token:n,children:me.jsx(Q4,{meetingId:t,onMeetingLeave:y})}):me.jsx("div",{className:"flex  justify-center items-center h-[80vh] w-full",children:me.jsx(G4,{getMeetingAndToken:a})})}const ka=Object.create(null);ka.open="0";ka.close="1";ka.ping="2";ka.pong="3";ka.message="4";ka.upgrade="5";ka.noop="6";const wp=Object.create(null);Object.keys(ka).forEach(e=>{wp[ka[e]]=e});const Fm={type:"error",data:"parser error"},w2=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",b2=typeof ArrayBuffer=="function",S2=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,Sv=({type:e,data:t},r,n)=>w2&&t instanceof Blob?r?n(t):By(t,n):b2&&(t instanceof ArrayBuffer||S2(t))?r?n(t):By(new Blob([t]),n):n(ka[e]+(t||"")),By=(e,t)=>{const r=new FileReader;return r.onload=function(){const n=r.result.split(",")[1];t("b"+(n||""))},r.readAsDataURL(e)};function Fy(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Df;function Z4(e,t){if(w2&&e.data instanceof Blob)return e.data.arrayBuffer().then(Fy).then(t);if(b2&&(e.data instanceof ArrayBuffer||S2(e.data)))return t(Fy(e.data));Sv(e,!1,r=>{Df||(Df=new TextEncoder),t(Df.encode(r))})}const Uy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vu=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Uy.length;e++)vu[Uy.charCodeAt(e)]=e;const e6=e=>{let t=e.length*.75,r=e.length,n,i=0,a,y,C,p;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const o=new ArrayBuffer(t),E=new Uint8Array(o);for(n=0;n<r;n+=4)a=vu[e.charCodeAt(n)],y=vu[e.charCodeAt(n+1)],C=vu[e.charCodeAt(n+2)],p=vu[e.charCodeAt(n+3)],E[i++]=a<<2|y>>4,E[i++]=(y&15)<<4|C>>2,E[i++]=(C&3)<<6|p&63;return o},t6=typeof ArrayBuffer=="function",Rv=(e,t)=>{if(typeof e!="string")return{type:"message",data:R2(e,t)};const r=e.charAt(0);return r==="b"?{type:"message",data:r6(e.substring(1),t)}:wp[r]?e.length>1?{type:wp[r],data:e.substring(1)}:{type:wp[r]}:Fm},r6=(e,t)=>{if(t6){const r=e6(e);return R2(r,t)}else return{base64:!0,data:e}},R2=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},E2="",n6=(e,t)=>{const r=e.length,n=new Array(r);let i=0;e.forEach((a,y)=>{Sv(a,!1,C=>{n[y]=C,++i===r&&t(n.join(E2))})})},i6=(e,t)=>{const r=e.split(E2),n=[];for(let i=0;i<r.length;i++){const a=Rv(r[i],t);if(n.push(a),a.type==="error")break}return n};function s6(){return new TransformStream({transform(e,t){Z4(e,r=>{const n=r.length;let i;if(n<126)i=new Uint8Array(1),new DataView(i.buffer).setUint8(0,n);else if(n<65536){i=new Uint8Array(3);const a=new DataView(i.buffer);a.setUint8(0,126),a.setUint16(1,n)}else{i=new Uint8Array(9);const a=new DataView(i.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(n))}e.data&&typeof e.data!="string"&&(i[0]|=128),t.enqueue(i),t.enqueue(r)})}})}let If;function np(e){return e.reduce((t,r)=>t+r.length,0)}function ip(e,t){if(e[0].length===t)return e.shift();const r=new Uint8Array(t);let n=0;for(let i=0;i<t;i++)r[i]=e[0][n++],n===e[0].length&&(e.shift(),n=0);return e.length&&n<e[0].length&&(e[0]=e[0].slice(n)),r}function a6(e,t){If||(If=new TextDecoder);const r=[];let n=0,i=-1,a=!1;return new TransformStream({transform(y,C){for(r.push(y);;){if(n===0){if(np(r)<1)break;const p=ip(r,1);a=(p[0]&128)===128,i=p[0]&127,i<126?n=3:i===126?n=1:n=2}else if(n===1){if(np(r)<2)break;const p=ip(r,2);i=new DataView(p.buffer,p.byteOffset,p.length).getUint16(0),n=3}else if(n===2){if(np(r)<8)break;const p=ip(r,8),o=new DataView(p.buffer,p.byteOffset,p.length),E=o.getUint32(0);if(E>Math.pow(2,21)-1){C.enqueue(Fm);break}i=E*Math.pow(2,32)+o.getUint32(4),n=3}else{if(np(r)<i)break;const p=ip(r,i);C.enqueue(Rv(a?p:If.decode(p),t)),n=0}if(i===0||i>e){C.enqueue(Fm);break}}}})}const k2=4;function li(e){if(e)return o6(e)}function o6(e){for(var t in li.prototype)e[t]=li.prototype[t];return e}li.prototype.on=li.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};li.prototype.once=function(e,t){function r(){this.off(e,r),t.apply(this,arguments)}return r.fn=t,this.on(e,r),this};li.prototype.off=li.prototype.removeListener=li.prototype.removeAllListeners=li.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var r=this._callbacks["$"+e];if(!r)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,i=0;i<r.length;i++)if(n=r[i],n===t||n.fn===t){r.splice(i,1);break}return r.length===0&&delete this._callbacks["$"+e],this};li.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),r=this._callbacks["$"+e],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(r){r=r.slice(0);for(var n=0,i=r.length;n<i;++n)r[n].apply(this,t)}return this};li.prototype.emitReserved=li.prototype.emit;li.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};li.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Bh=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,r)=>r(t,0),Ks=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),c6="arraybuffer";function C2(e,...t){return t.reduce((r,n)=>(e.hasOwnProperty(n)&&(r[n]=e[n]),r),{})}const l6=Ks.setTimeout,u6=Ks.clearTimeout;function Fh(e,t){t.useNativeTimers?(e.setTimeoutFn=l6.bind(Ks),e.clearTimeoutFn=u6.bind(Ks)):(e.setTimeoutFn=Ks.setTimeout.bind(Ks),e.clearTimeoutFn=Ks.clearTimeout.bind(Ks))}const d6=1.33;function p6(e){return typeof e=="string"?h6(e):Math.ceil((e.byteLength||e.size)*d6)}function h6(e){let t=0,r=0;for(let n=0,i=e.length;n<i;n++)t=e.charCodeAt(n),t<128?r+=1:t<2048?r+=2:t<55296||t>=57344?r+=3:(n++,r+=4);return r}function P2(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function f6(e){let t="";for(let r in e)e.hasOwnProperty(r)&&(t.length&&(t+="&"),t+=encodeURIComponent(r)+"="+encodeURIComponent(e[r]));return t}function m6(e){let t={},r=e.split("&");for(let n=0,i=r.length;n<i;n++){let a=r[n].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}class g6 extends Error{constructor(t,r,n){super(t),this.description=r,this.context=n,this.type="TransportError"}}class Ev extends li{constructor(t){super(),this.writable=!1,Fh(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,r,n){return super.emitReserved("error",new g6(t,r,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const r=Rv(t,this.socket.binaryType);this.onPacket(r)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,r={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(r)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const r=f6(t);return r.length?"?"+r:""}}class v6 extends Ev{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const r=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||r()})),this.writable||(n++,this.once("drain",function(){--n||r()}))}else r()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const r=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};i6(t,this.socket.binaryType).forEach(r),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,n6(t,r=>{this.doWrite(r,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",r=this.query||{};return this.opts.timestampRequests!==!1&&(r[this.opts.timestampParam]=P2()),!this.supportsBinary&&!r.sid&&(r.b64=1),this.createUri(t,r)}}let T2=!1;try{T2=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const y6=T2;function _6(){}class w6 extends v6{constructor(t){if(super(t),typeof location<"u"){const r=location.protocol==="https:";let n=location.port;n||(n=r?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||n!==t.port}}doWrite(t,r){const n=this.request({method:"POST",data:t});n.on("success",r),n.on("error",(i,a)=>{this.onError("xhr post error",i,a)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(r,n)=>{this.onError("xhr poll error",r,n)}),this.pollXhr=t}}let al=class bp extends li{constructor(t,r,n){super(),this.createRequest=t,Fh(this,n),this._opts=n,this._method=n.method||"GET",this._uri=r,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var t;const r=C2(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");r.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(r);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let i in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(i)&&n.setRequestHeader(i,this._opts.extraHeaders[i])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var i;n.readyState===3&&((i=this._opts.cookieJar)===null||i===void 0||i.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(i){this.setTimeoutFn(()=>{this._onError(i)},0);return}typeof document<"u"&&(this._index=bp.requestsCount++,bp.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=_6,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete bp.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};al.requestsCount=0;al.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",zy);else if(typeof addEventListener=="function"){const e="onpagehide"in Ks?"pagehide":"unload";addEventListener(e,zy,!1)}}function zy(){for(let e in al.requests)al.requests.hasOwnProperty(e)&&al.requests[e].abort()}const b6=function(){const e=x2({xdomain:!1});return e&&e.responseType!==null}();class S6 extends w6{constructor(t){super(t);const r=t&&t.forceBase64;this.supportsBinary=b6&&!r}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new al(x2,this.uri(),t)}}function x2(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||y6))return new XMLHttpRequest}catch{}if(!t)try{return new Ks[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const O2=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class R6 extends Ev{get name(){return"websocket"}doOpen(){const t=this.uri(),r=this.opts.protocols,n=O2?{}:C2(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,r,n)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],i=r===t.length-1;Sv(n,this.supportsBinary,a=>{try{this.doWrite(n,a)}catch{}i&&Bh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",r=this.query||{};return this.opts.timestampRequests&&(r[this.opts.timestampParam]=P2()),this.supportsBinary||(r.b64=1),this.createUri(t,r)}}const Mf=Ks.WebSocket||Ks.MozWebSocket;class E6 extends R6{createSocket(t,r,n){return O2?new Mf(t,r,n):r?new Mf(t,r):new Mf(t)}doWrite(t,r){this.ws.send(r)}}class k6 extends Ev{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const r=a6(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=t.readable.pipeThrough(r).getReader(),i=s6();i.readable.pipeTo(t.writable),this._writer=i.writable.getWriter();const a=()=>{n.read().then(({done:C,value:p})=>{C||(this.onPacket(p),a())}).catch(C=>{})};a();const y={type:"open"};this.query.sid&&(y.data=`{"sid":"${this.query.sid}"}`),this._writer.write(y).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let r=0;r<t.length;r++){const n=t[r],i=r===t.length-1;this._writer.write(n).then(()=>{i&&Bh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const C6={websocket:E6,webtransport:k6,polling:S6},P6=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,T6=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Um(e){if(e.length>8e3)throw"URI too long";const t=e,r=e.indexOf("["),n=e.indexOf("]");r!=-1&&n!=-1&&(e=e.substring(0,r)+e.substring(r,n).replace(/:/g,";")+e.substring(n,e.length));let i=P6.exec(e||""),a={},y=14;for(;y--;)a[T6[y]]=i[y]||"";return r!=-1&&n!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=x6(a,a.path),a.queryKey=O6(a,a.query),a}function x6(e,t){const r=/\/{2,9}/g,n=t.replace(r,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&n.splice(0,1),t.slice(-1)=="/"&&n.splice(n.length-1,1),n}function O6(e,t){const r={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,i,a){i&&(r[i]=a)}),r}const zm=typeof addEventListener=="function"&&typeof removeEventListener=="function",Sp=[];zm&&addEventListener("offline",()=>{Sp.forEach(e=>e())},!1);class xo extends li{constructor(t,r){if(super(),this.binaryType=c6,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(r=t,t=null),t){const n=Um(t);r.hostname=n.host,r.secure=n.protocol==="https"||n.protocol==="wss",r.port=n.port,n.query&&(r.query=n.query)}else r.host&&(r.hostname=Um(r.host).host);Fh(this,r),this.secure=r.secure!=null?r.secure:typeof location<"u"&&location.protocol==="https:",r.hostname&&!r.port&&(r.port=this.secure?"443":"80"),this.hostname=r.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=r.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},r.transports.forEach(n=>{const i=n.prototype.name;this.transports.push(i),this._transportsByName[i]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},r),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=m6(this.opts.query)),zm&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Sp.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const r=Object.assign({},this.opts.query);r.EIO=k2,r.transport=t,this.id&&(r.sid=this.id);const n=Object.assign({},this.opts,{query:r,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&xo.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const r=this.createTransport(t);r.open(),this.setTransport(r)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",r=>this._onClose("transport close",r))}onOpen(){this.readyState="open",xo.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const r=new Error("server error");r.code=t.data,this._onError(r);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let r=1;for(let n=0;n<this.writeBuffer.length;n++){const i=this.writeBuffer[n].data;if(i&&(r+=p6(i)),n>0&&r>this._maxPayload)return this.writeBuffer.slice(0,n);r+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,Bh(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,r,n){return this._sendPacket("message",t,r,n),this}send(t,r,n){return this._sendPacket("message",t,r,n),this}_sendPacket(t,r,n,i){if(typeof r=="function"&&(i=r,r=void 0),typeof n=="function"&&(i=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const a={type:t,data:r,options:n};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},r=()=>{this.off("upgrade",r),this.off("upgradeError",r),t()},n=()=>{this.once("upgrade",r),this.once("upgradeError",r)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():t()}):this.upgrading?n():t()),this}_onError(t){if(xo.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,r){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),zm&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=Sp.indexOf(this._offlineEventListener);n!==-1&&Sp.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,r),this.writeBuffer=[],this._prevBufferLen=0}}}xo.protocol=k2;class D6 extends xo{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let r=this.createTransport(t),n=!1;xo.priorWebsocketSuccess=!1;const i=()=>{n||(r.send([{type:"ping",data:"probe"}]),r.once("packet",_=>{if(!n)if(_.type==="pong"&&_.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",r),!r)return;xo.priorWebsocketSuccess=r.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(E(),this.setTransport(r),r.send([{type:"upgrade"}]),this.emitReserved("upgrade",r),r=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=r.name,this.emitReserved("upgradeError",h)}}))};function a(){n||(n=!0,E(),r.close(),r=null)}const y=_=>{const h=new Error("probe error: "+_);h.transport=r.name,a(),this.emitReserved("upgradeError",h)};function C(){y("transport closed")}function p(){y("socket closed")}function o(_){r&&_.name!==r.name&&a()}const E=()=>{r.removeListener("open",i),r.removeListener("error",y),r.removeListener("close",C),this.off("close",p),this.off("upgrading",o)};r.once("open",i),r.once("error",y),r.once("close",C),this.once("close",p),this.once("upgrading",o),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{n||r.open()},200):r.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const r=[];for(let n=0;n<t.length;n++)~this.transports.indexOf(t[n])&&r.push(t[n]);return r}}let I6=class extends D6{constructor(t,r={}){const n=typeof t=="object"?t:r;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(i=>C6[i]).filter(i=>!!i)),super(t,n)}};function M6(e,t="",r){let n=e;r=r||typeof location<"u"&&location,e==null&&(e=r.protocol+"//"+r.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=r.protocol+e:e=r.host+e),/^(https?|wss?):\/\//.test(e)||(typeof r<"u"?e=r.protocol+"//"+e:e="https://"+e),n=Um(e)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const a=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+a+":"+n.port+t,n.href=n.protocol+"://"+a+(r&&r.port===n.port?"":":"+n.port),n}const A6=typeof ArrayBuffer=="function",L6=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,D2=Object.prototype.toString,N6=typeof Blob=="function"||typeof Blob<"u"&&D2.call(Blob)==="[object BlobConstructor]",j6=typeof File=="function"||typeof File<"u"&&D2.call(File)==="[object FileConstructor]";function kv(e){return A6&&(e instanceof ArrayBuffer||L6(e))||N6&&e instanceof Blob||j6&&e instanceof File}function Rp(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let r=0,n=e.length;r<n;r++)if(Rp(e[r]))return!0;return!1}if(kv(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return Rp(e.toJSON(),!0);for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&Rp(e[r]))return!0;return!1}function B6(e){const t=[],r=e.data,n=e;return n.data=Hm(r,t),n.attachments=t.length,{packet:n,buffers:t}}function Hm(e,t){if(!e)return e;if(kv(e)){const r={_placeholder:!0,num:t.length};return t.push(e),r}else if(Array.isArray(e)){const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=Hm(e[n],t);return r}else if(typeof e=="object"&&!(e instanceof Date)){const r={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=Hm(e[n],t));return r}return e}function F6(e,t){return e.data=Wm(e.data,t),delete e.attachments,e}function Wm(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let r=0;r<e.length;r++)e[r]=Wm(e[r],t);else if(typeof e=="object")for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(e[r]=Wm(e[r],t));return e}const U6=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],z6=5;var Kr;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Kr||(Kr={}));class H6{constructor(t){this.replacer=t}encode(t){return(t.type===Kr.EVENT||t.type===Kr.ACK)&&Rp(t)?this.encodeAsBinary({type:t.type===Kr.EVENT?Kr.BINARY_EVENT:Kr.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let r=""+t.type;return(t.type===Kr.BINARY_EVENT||t.type===Kr.BINARY_ACK)&&(r+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(r+=t.nsp+","),t.id!=null&&(r+=t.id),t.data!=null&&(r+=JSON.stringify(t.data,this.replacer)),r}encodeAsBinary(t){const r=B6(t),n=this.encodeAsString(r.packet),i=r.buffers;return i.unshift(n),i}}function Hy(e){return Object.prototype.toString.call(e)==="[object Object]"}class Cv extends li{constructor(t){super(),this.reviver=t}add(t){let r;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");r=this.decodeString(t);const n=r.type===Kr.BINARY_EVENT;n||r.type===Kr.BINARY_ACK?(r.type=n?Kr.EVENT:Kr.ACK,this.reconstructor=new W6(r),r.attachments===0&&super.emitReserved("decoded",r)):super.emitReserved("decoded",r)}else if(kv(t)||t.base64)if(this.reconstructor)r=this.reconstructor.takeBinaryData(t),r&&(this.reconstructor=null,super.emitReserved("decoded",r));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let r=0;const n={type:Number(t.charAt(0))};if(Kr[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===Kr.BINARY_EVENT||n.type===Kr.BINARY_ACK){const a=r+1;for(;t.charAt(++r)!=="-"&&r!=t.length;);const y=t.substring(a,r);if(y!=Number(y)||t.charAt(r)!=="-")throw new Error("Illegal attachments");n.attachments=Number(y)}if(t.charAt(r+1)==="/"){const a=r+1;for(;++r&&!(t.charAt(r)===","||r===t.length););n.nsp=t.substring(a,r)}else n.nsp="/";const i=t.charAt(r+1);if(i!==""&&Number(i)==i){const a=r+1;for(;++r;){const y=t.charAt(r);if(y==null||Number(y)!=y){--r;break}if(r===t.length)break}n.id=Number(t.substring(a,r+1))}if(t.charAt(++r)){const a=this.tryParse(t.substr(r));if(Cv.isPayloadValid(n.type,a))n.data=a;else throw new Error("invalid payload")}return n}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,r){switch(t){case Kr.CONNECT:return Hy(r);case Kr.DISCONNECT:return r===void 0;case Kr.CONNECT_ERROR:return typeof r=="string"||Hy(r);case Kr.EVENT:case Kr.BINARY_EVENT:return Array.isArray(r)&&(typeof r[0]=="number"||typeof r[0]=="string"&&U6.indexOf(r[0])===-1);case Kr.ACK:case Kr.BINARY_ACK:return Array.isArray(r)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class W6{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const r=F6(this.reconPack,this.buffers);return this.finishedReconstruction(),r}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const V6=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Cv,Encoder:H6,get PacketType(){return Kr},protocol:z6},Symbol.toStringTag,{value:"Module"}));function oa(e,t,r){return e.on(t,r),function(){e.off(t,r)}}const $6=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class I2 extends li{constructor(t,r,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=r,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[oa(t,"open",this.onopen.bind(this)),oa(t,"packet",this.onpacket.bind(this)),oa(t,"error",this.onerror.bind(this)),oa(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...r){var n,i,a;if($6.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(r.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(r),this;const y={type:Kr.EVENT,data:r};if(y.options={},y.options.compress=this.flags.compress!==!1,typeof r[r.length-1]=="function"){const E=this.ids++,_=r.pop();this._registerAckCallback(E,_),y.id=E}const C=(i=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||i===void 0?void 0:i.writable,p=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!C||(p?(this.notifyOutgoingListeners(y),this.packet(y)):this.sendBuffer.push(y)),this.flags={},this}_registerAckCallback(t,r){var n;const i=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(i===void 0){this.acks[t]=r;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let C=0;C<this.sendBuffer.length;C++)this.sendBuffer[C].id===t&&this.sendBuffer.splice(C,1);r.call(this,new Error("operation has timed out"))},i),y=(...C)=>{this.io.clearTimeoutFn(a),r.apply(this,C)};y.withError=!0,this.acks[t]=y}emitWithAck(t,...r){return new Promise((n,i)=>{const a=(y,C)=>y?i(y):n(C);a.withError=!0,r.push(a),this.emit(t,...r)})}_addToQueue(t){let r;typeof t[t.length-1]=="function"&&(r=t.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((i,...a)=>n!==this._queue[0]?void 0:(i!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),r&&r(i)):(this._queue.shift(),r&&r(null,...a)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const r=this._queue[0];r.pending&&!t||(r.pending=!0,r.tryCount++,this.flags=r.flags,this.emit.apply(this,r.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Kr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,r){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,r),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(n=>String(n.id)===t)){const n=this.acks[t];delete this.acks[t],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Kr.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Kr.EVENT:case Kr.BINARY_EVENT:this.onevent(t);break;case Kr.ACK:case Kr.BINARY_ACK:this.onack(t);break;case Kr.DISCONNECT:this.ondisconnect();break;case Kr.CONNECT_ERROR:this.destroy();const n=new Error(t.data.message);n.data=t.data.data,this.emitReserved("connect_error",n);break}}onevent(t){const r=t.data||[];t.id!=null&&r.push(this.ack(t.id)),this.connected?this.emitEvent(r):this.receiveBuffer.push(Object.freeze(r))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const r=this._anyListeners.slice();for(const n of r)n.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const r=this;let n=!1;return function(...i){n||(n=!0,r.packet({type:Kr.ACK,id:t,data:i}))}}onack(t){const r=this.acks[t.id];typeof r=="function"&&(delete this.acks[t.id],r.withError&&t.data.unshift(null),r.apply(this,t.data))}onconnect(t,r){this.id=t,this.recovered=r&&this._pid===r,this._pid=r,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Kr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const r=this._anyListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const r=this._anyOutgoingListeners;for(let n=0;n<r.length;n++)if(t===r[n])return r.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const r=this._anyOutgoingListeners.slice();for(const n of r)n.apply(this,t.data)}}}function kl(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}kl.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),r=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+r:e-r}return Math.min(e,this.max)|0};kl.prototype.reset=function(){this.attempts=0};kl.prototype.setMin=function(e){this.ms=e};kl.prototype.setMax=function(e){this.max=e};kl.prototype.setJitter=function(e){this.jitter=e};class Vm extends li{constructor(t,r){var n;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(r=t,t=void 0),r=r||{},r.path=r.path||"/socket.io",this.opts=r,Fh(this,r),this.reconnection(r.reconnection!==!1),this.reconnectionAttempts(r.reconnectionAttempts||1/0),this.reconnectionDelay(r.reconnectionDelay||1e3),this.reconnectionDelayMax(r.reconnectionDelayMax||5e3),this.randomizationFactor((n=r.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new kl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(r.timeout==null?2e4:r.timeout),this._readyState="closed",this.uri=t;const i=r.parser||V6;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=r.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var r;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(r=this.backoff)===null||r===void 0||r.setMin(t),this)}randomizationFactor(t){var r;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(r=this.backoff)===null||r===void 0||r.setJitter(t),this)}reconnectionDelayMax(t){var r;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(r=this.backoff)===null||r===void 0||r.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new I6(this.uri,this.opts);const r=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const i=oa(r,"open",function(){n.onopen(),t&&t()}),a=C=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",C),t?t(C):this.maybeReconnectOnOpen()},y=oa(r,"error",a);if(this._timeout!==!1){const C=this._timeout,p=this.setTimeoutFn(()=>{i(),a(new Error("timeout")),r.close()},C);this.opts.autoUnref&&p.unref(),this.subs.push(()=>{this.clearTimeoutFn(p)})}return this.subs.push(i),this.subs.push(y),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(oa(t,"ping",this.onping.bind(this)),oa(t,"data",this.ondata.bind(this)),oa(t,"error",this.onerror.bind(this)),oa(t,"close",this.onclose.bind(this)),oa(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(r){this.onclose("parse error",r)}}ondecoded(t){Bh(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,r){let n=this.nsps[t];return n?this._autoConnect&&!n.active&&n.connect():(n=new I2(this,t,r),this.nsps[t]=n),n}_destroy(t){const r=Object.keys(this.nsps);for(const n of r)if(this.nsps[n].active)return;this._close()}_packet(t){const r=this.encoder.encode(t);for(let n=0;n<r.length;n++)this.engine.write(r[n],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,r){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,r),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const r=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(i=>{i?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",i)):t.onreconnect()}))},r);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const lu={};function Ep(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const r=M6(e,t.path||"/socket.io"),n=r.source,i=r.id,a=r.path,y=lu[i]&&a in lu[i].nsps,C=t.forceNew||t["force new connection"]||t.multiplex===!1||y;let p;return C?p=new Vm(n,t):(lu[i]||(lu[i]=new Vm(n,t)),p=lu[i]),r.query&&!t.query&&(t.query=r.queryKey),p.socket(r.path,t)}Object.assign(Ep,{Manager:Vm,Socket:I2,io:Ep,connect:Ep});function M2(e,t){return function(){return e.apply(t,arguments)}}const{toString:q6}=Object.prototype,{getPrototypeOf:Pv}=Object,Uh=(e=>t=>{const r=q6.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),pa=e=>(e=e.toLowerCase(),t=>Uh(t)===e),zh=e=>t=>typeof t===e,{isArray:Cl}=Array,Gu=zh("undefined");function K6(e){return e!==null&&!Gu(e)&&e.constructor!==null&&!Gu(e.constructor)&&As(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const A2=pa("ArrayBuffer");function G6(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&A2(e.buffer),t}const J6=zh("string"),As=zh("function"),L2=zh("number"),Hh=e=>e!==null&&typeof e=="object",Q6=e=>e===!0||e===!1,kp=e=>{if(Uh(e)!=="object")return!1;const t=Pv(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Y6=pa("Date"),X6=pa("File"),Z6=pa("Blob"),e3=pa("FileList"),t3=e=>Hh(e)&&As(e.pipe),r3=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||As(e.append)&&((t=Uh(e))==="formdata"||t==="object"&&As(e.toString)&&e.toString()==="[object FormData]"))},n3=pa("URLSearchParams"),[i3,s3,a3,o3]=["ReadableStream","Request","Response","Headers"].map(pa),c3=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function dd(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let n,i;if(typeof e!="object"&&(e=[e]),Cl(e))for(n=0,i=e.length;n<i;n++)t.call(null,e[n],n,e);else{const a=r?Object.getOwnPropertyNames(e):Object.keys(e),y=a.length;let C;for(n=0;n<y;n++)C=a[n],t.call(null,e[C],C,e)}}function N2(e,t){t=t.toLowerCase();const r=Object.keys(e);let n=r.length,i;for(;n-- >0;)if(i=r[n],t===i.toLowerCase())return i;return null}const ec=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,j2=e=>!Gu(e)&&e!==ec;function $m(){const{caseless:e}=j2(this)&&this||{},t={},r=(n,i)=>{const a=e&&N2(t,i)||i;kp(t[a])&&kp(n)?t[a]=$m(t[a],n):kp(n)?t[a]=$m({},n):Cl(n)?t[a]=n.slice():t[a]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&dd(arguments[n],r);return t}const l3=(e,t,r,{allOwnKeys:n}={})=>(dd(t,(i,a)=>{r&&As(i)?e[a]=M2(i,r):e[a]=i},{allOwnKeys:n}),e),u3=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),d3=(e,t,r,n)=>{e.prototype=Object.create(t.prototype,n),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},p3=(e,t,r,n)=>{let i,a,y;const C={};if(t=t||{},e==null)return t;do{for(i=Object.getOwnPropertyNames(e),a=i.length;a-- >0;)y=i[a],(!n||n(y,e,t))&&!C[y]&&(t[y]=e[y],C[y]=!0);e=r!==!1&&Pv(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},h3=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const n=e.indexOf(t,r);return n!==-1&&n===r},f3=e=>{if(!e)return null;if(Cl(e))return e;let t=e.length;if(!L2(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},m3=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&Pv(Uint8Array)),g3=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let i;for(;(i=n.next())&&!i.done;){const a=i.value;t.call(e,a[0],a[1])}},v3=(e,t)=>{let r;const n=[];for(;(r=e.exec(t))!==null;)n.push(r);return n},y3=pa("HTMLFormElement"),_3=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,n,i){return n.toUpperCase()+i}),Wy=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),w3=pa("RegExp"),B2=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),n={};dd(r,(i,a)=>{let y;(y=t(i,a,e))!==!1&&(n[a]=y||i)}),Object.defineProperties(e,n)},b3=e=>{B2(e,(t,r)=>{if(As(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=e[r];if(As(n)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},S3=(e,t)=>{const r={},n=i=>{i.forEach(a=>{r[a]=!0})};return Cl(e)?n(e):n(String(e).split(t)),r},R3=()=>{},E3=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t,Af="abcdefghijklmnopqrstuvwxyz",Vy="0123456789",F2={DIGIT:Vy,ALPHA:Af,ALPHA_DIGIT:Af+Af.toUpperCase()+Vy},k3=(e=16,t=F2.ALPHA_DIGIT)=>{let r="";const{length:n}=t;for(;e--;)r+=t[Math.random()*n|0];return r};function C3(e){return!!(e&&As(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const P3=e=>{const t=new Array(10),r=(n,i)=>{if(Hh(n)){if(t.indexOf(n)>=0)return;if(!("toJSON"in n)){t[i]=n;const a=Cl(n)?[]:{};return dd(n,(y,C)=>{const p=r(y,i+1);!Gu(p)&&(a[C]=p)}),t[i]=void 0,a}}return n};return r(e,0)},T3=pa("AsyncFunction"),x3=e=>e&&(Hh(e)||As(e))&&As(e.then)&&As(e.catch),U2=((e,t)=>e?setImmediate:t?((r,n)=>(ec.addEventListener("message",({source:i,data:a})=>{i===ec&&a===r&&n.length&&n.shift()()},!1),i=>{n.push(i),ec.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",As(ec.postMessage)),O3=typeof queueMicrotask<"u"?queueMicrotask.bind(ec):typeof process<"u"&&process.nextTick||U2,Be={isArray:Cl,isArrayBuffer:A2,isBuffer:K6,isFormData:r3,isArrayBufferView:G6,isString:J6,isNumber:L2,isBoolean:Q6,isObject:Hh,isPlainObject:kp,isReadableStream:i3,isRequest:s3,isResponse:a3,isHeaders:o3,isUndefined:Gu,isDate:Y6,isFile:X6,isBlob:Z6,isRegExp:w3,isFunction:As,isStream:t3,isURLSearchParams:n3,isTypedArray:m3,isFileList:e3,forEach:dd,merge:$m,extend:l3,trim:c3,stripBOM:u3,inherits:d3,toFlatObject:p3,kindOf:Uh,kindOfTest:pa,endsWith:h3,toArray:f3,forEachEntry:g3,matchAll:v3,isHTMLForm:y3,hasOwnProperty:Wy,hasOwnProp:Wy,reduceDescriptors:B2,freezeMethods:b3,toObjectSet:S3,toCamelCase:_3,noop:R3,toFiniteNumber:E3,findKey:N2,global:ec,isContextDefined:j2,ALPHABET:F2,generateString:k3,isSpecCompliantForm:C3,toJSONObject:P3,isAsyncFn:T3,isThenable:x3,setImmediate:U2,asap:O3};function Or(e,t,r,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}Be.inherits(Or,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Be.toJSONObject(this.config),code:this.code,status:this.status}}});const z2=Or.prototype,H2={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{H2[e]={value:e}});Object.defineProperties(Or,H2);Object.defineProperty(z2,"isAxiosError",{value:!0});Or.from=(e,t,r,n,i,a)=>{const y=Object.create(z2);return Be.toFlatObject(e,y,function(p){return p!==Error.prototype},C=>C!=="isAxiosError"),Or.call(y,e.message,t,r,n,i),y.cause=e,y.name=e.name,a&&Object.assign(y,a),y};const D3=null;function qm(e){return Be.isPlainObject(e)||Be.isArray(e)}function W2(e){return Be.endsWith(e,"[]")?e.slice(0,-2):e}function $y(e,t,r){return e?e.concat(t).map(function(i,a){return i=W2(i),!r&&a?"["+i+"]":i}).join(r?".":""):t}function I3(e){return Be.isArray(e)&&!e.some(qm)}const M3=Be.toFlatObject(Be,{},null,function(t){return/^is[A-Z]/.test(t)});function Wh(e,t,r){if(!Be.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=Be.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(f,g){return!Be.isUndefined(g[f])});const n=r.metaTokens,i=r.visitor||E,a=r.dots,y=r.indexes,p=(r.Blob||typeof Blob<"u"&&Blob)&&Be.isSpecCompliantForm(t);if(!Be.isFunction(i))throw new TypeError("visitor must be a function");function o(k){if(k===null)return"";if(Be.isDate(k))return k.toISOString();if(!p&&Be.isBlob(k))throw new Or("Blob is not supported. Use a Buffer instead.");return Be.isArrayBuffer(k)||Be.isTypedArray(k)?p&&typeof Blob=="function"?new Blob([k]):Buffer.from(k):k}function E(k,f,g){let s=k;if(k&&!g&&typeof k=="object"){if(Be.endsWith(f,"{}"))f=n?f:f.slice(0,-2),k=JSON.stringify(k);else if(Be.isArray(k)&&I3(k)||(Be.isFileList(k)||Be.endsWith(f,"[]"))&&(s=Be.toArray(k)))return f=W2(f),s.forEach(function(S,T){!(Be.isUndefined(S)||S===null)&&t.append(y===!0?$y([f],T,a):y===null?f:f+"[]",o(S))}),!1}return qm(k)?!0:(t.append($y(g,f,a),o(k)),!1)}const _=[],h=Object.assign(M3,{defaultVisitor:E,convertValue:o,isVisitable:qm});function w(k,f){if(!Be.isUndefined(k)){if(_.indexOf(k)!==-1)throw Error("Circular reference detected in "+f.join("."));_.push(k),Be.forEach(k,function(s,b){(!(Be.isUndefined(s)||s===null)&&i.call(t,s,Be.isString(b)?b.trim():b,f,h))===!0&&w(s,f?f.concat(b):[b])}),_.pop()}}if(!Be.isObject(e))throw new TypeError("data must be an object");return w(e),t}function qy(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Tv(e,t){this._pairs=[],e&&Wh(e,this,t)}const V2=Tv.prototype;V2.append=function(t,r){this._pairs.push([t,r])};V2.toString=function(t){const r=t?function(n){return t.call(this,n,qy)}:qy;return this._pairs.map(function(i){return r(i[0])+"="+r(i[1])},"").join("&")};function A3(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $2(e,t,r){if(!t)return e;const n=r&&r.encode||A3,i=r&&r.serialize;let a;if(i?a=i(t,r):a=Be.isURLSearchParams(t)?t.toString():new Tv(t,r).toString(n),a){const y=e.indexOf("#");y!==-1&&(e=e.slice(0,y)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class Ky{constructor(){this.handlers=[]}use(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Be.forEach(this.handlers,function(n){n!==null&&t(n)})}}const q2={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},L3=typeof URLSearchParams<"u"?URLSearchParams:Tv,N3=typeof FormData<"u"?FormData:null,j3=typeof Blob<"u"?Blob:null,B3={isBrowser:!0,classes:{URLSearchParams:L3,FormData:N3,Blob:j3},protocols:["http","https","file","blob","url","data"]},xv=typeof window<"u"&&typeof document<"u",Km=typeof navigator=="object"&&navigator||void 0,F3=xv&&(!Km||["ReactNative","NativeScript","NS"].indexOf(Km.product)<0),U3=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",z3=xv&&window.location.href||"http://localhost",H3=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:xv,hasStandardBrowserEnv:F3,hasStandardBrowserWebWorkerEnv:U3,navigator:Km,origin:z3},Symbol.toStringTag,{value:"Module"})),ws={...H3,...B3};function W3(e,t){return Wh(e,new ws.classes.URLSearchParams,Object.assign({visitor:function(r,n,i,a){return ws.isNode&&Be.isBuffer(r)?(this.append(n,r.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function V3(e){return Be.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function $3(e){const t={},r=Object.keys(e);let n;const i=r.length;let a;for(n=0;n<i;n++)a=r[n],t[a]=e[a];return t}function K2(e){function t(r,n,i,a){let y=r[a++];if(y==="__proto__")return!0;const C=Number.isFinite(+y),p=a>=r.length;return y=!y&&Be.isArray(i)?i.length:y,p?(Be.hasOwnProp(i,y)?i[y]=[i[y],n]:i[y]=n,!C):((!i[y]||!Be.isObject(i[y]))&&(i[y]=[]),t(r,n,i[y],a)&&Be.isArray(i[y])&&(i[y]=$3(i[y])),!C)}if(Be.isFormData(e)&&Be.isFunction(e.entries)){const r={};return Be.forEachEntry(e,(n,i)=>{t(V3(n),i,r,0)}),r}return null}function q3(e,t,r){if(Be.isString(e))try{return(t||JSON.parse)(e),Be.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}const pd={transitional:q2,adapter:["xhr","http","fetch"],transformRequest:[function(t,r){const n=r.getContentType()||"",i=n.indexOf("application/json")>-1,a=Be.isObject(t);if(a&&Be.isHTMLForm(t)&&(t=new FormData(t)),Be.isFormData(t))return i?JSON.stringify(K2(t)):t;if(Be.isArrayBuffer(t)||Be.isBuffer(t)||Be.isStream(t)||Be.isFile(t)||Be.isBlob(t)||Be.isReadableStream(t))return t;if(Be.isArrayBufferView(t))return t.buffer;if(Be.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let C;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return W3(t,this.formSerializer).toString();if((C=Be.isFileList(t))||n.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return Wh(C?{"files[]":t}:t,p&&new p,this.formSerializer)}}return a||i?(r.setContentType("application/json",!1),q3(t)):t}],transformResponse:[function(t){const r=this.transitional||pd.transitional,n=r&&r.forcedJSONParsing,i=this.responseType==="json";if(Be.isResponse(t)||Be.isReadableStream(t))return t;if(t&&Be.isString(t)&&(n&&!this.responseType||i)){const y=!(r&&r.silentJSONParsing)&&i;try{return JSON.parse(t)}catch(C){if(y)throw C.name==="SyntaxError"?Or.from(C,Or.ERR_BAD_RESPONSE,this,null,this.response):C}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ws.classes.FormData,Blob:ws.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Be.forEach(["delete","get","head","post","put","patch"],e=>{pd.headers[e]={}});const K3=Be.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),G3=e=>{const t={};let r,n,i;return e&&e.split(`
`).forEach(function(y){i=y.indexOf(":"),r=y.substring(0,i).trim().toLowerCase(),n=y.substring(i+1).trim(),!(!r||t[r]&&K3[r])&&(r==="set-cookie"?t[r]?t[r].push(n):t[r]=[n]:t[r]=t[r]?t[r]+", "+n:n)}),t},Gy=Symbol("internals");function uu(e){return e&&String(e).trim().toLowerCase()}function Cp(e){return e===!1||e==null?e:Be.isArray(e)?e.map(Cp):String(e)}function J3(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(e);)t[n[1]]=n[2];return t}const Q3=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Lf(e,t,r,n,i){if(Be.isFunction(n))return n.call(this,t,r);if(i&&(t=r),!!Be.isString(t)){if(Be.isString(n))return t.indexOf(n)!==-1;if(Be.isRegExp(n))return n.test(t)}}function Y3(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,n)=>r.toUpperCase()+n)}function X3(e,t){const r=Be.toCamelCase(" "+t);["get","set","has"].forEach(n=>{Object.defineProperty(e,n+r,{value:function(i,a,y){return this[n].call(this,t,i,a,y)},configurable:!0})})}class bs{constructor(t){t&&this.set(t)}set(t,r,n){const i=this;function a(C,p,o){const E=uu(p);if(!E)throw new Error("header name must be a non-empty string");const _=Be.findKey(i,E);(!_||i[_]===void 0||o===!0||o===void 0&&i[_]!==!1)&&(i[_||p]=Cp(C))}const y=(C,p)=>Be.forEach(C,(o,E)=>a(o,E,p));if(Be.isPlainObject(t)||t instanceof this.constructor)y(t,r);else if(Be.isString(t)&&(t=t.trim())&&!Q3(t))y(G3(t),r);else if(Be.isHeaders(t))for(const[C,p]of t.entries())a(p,C,n);else t!=null&&a(r,t,n);return this}get(t,r){if(t=uu(t),t){const n=Be.findKey(this,t);if(n){const i=this[n];if(!r)return i;if(r===!0)return J3(i);if(Be.isFunction(r))return r.call(this,i,n);if(Be.isRegExp(r))return r.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=uu(t),t){const n=Be.findKey(this,t);return!!(n&&this[n]!==void 0&&(!r||Lf(this,this[n],n,r)))}return!1}delete(t,r){const n=this;let i=!1;function a(y){if(y=uu(y),y){const C=Be.findKey(n,y);C&&(!r||Lf(n,n[C],C,r))&&(delete n[C],i=!0)}}return Be.isArray(t)?t.forEach(a):a(t),i}clear(t){const r=Object.keys(this);let n=r.length,i=!1;for(;n--;){const a=r[n];(!t||Lf(this,this[a],a,t,!0))&&(delete this[a],i=!0)}return i}normalize(t){const r=this,n={};return Be.forEach(this,(i,a)=>{const y=Be.findKey(n,a);if(y){r[y]=Cp(i),delete r[a];return}const C=t?Y3(a):String(a).trim();C!==a&&delete r[a],r[C]=Cp(i),n[C]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return Be.forEach(this,(n,i)=>{n!=null&&n!==!1&&(r[i]=t&&Be.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const n=new this(t);return r.forEach(i=>n.set(i)),n}static accessor(t){const n=(this[Gy]=this[Gy]={accessors:{}}).accessors,i=this.prototype;function a(y){const C=uu(y);n[C]||(X3(i,y),n[C]=!0)}return Be.isArray(t)?t.forEach(a):a(t),this}}bs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Be.reduceDescriptors(bs.prototype,({value:e},t)=>{let r=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(n){this[r]=n}}});Be.freezeMethods(bs);function Nf(e,t){const r=this||pd,n=t||r,i=bs.from(n.headers);let a=n.data;return Be.forEach(e,function(C){a=C.call(r,a,i.normalize(),t?t.status:void 0)}),i.normalize(),a}function G2(e){return!!(e&&e.__CANCEL__)}function Pl(e,t,r){Or.call(this,e??"canceled",Or.ERR_CANCELED,t,r),this.name="CanceledError"}Be.inherits(Pl,Or,{__CANCEL__:!0});function J2(e,t,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?e(r):t(new Or("Request failed with status code "+r.status,[Or.ERR_BAD_REQUEST,Or.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Z3(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function eD(e,t){e=e||10;const r=new Array(e),n=new Array(e);let i=0,a=0,y;return t=t!==void 0?t:1e3,function(p){const o=Date.now(),E=n[a];y||(y=o),r[i]=p,n[i]=o;let _=a,h=0;for(;_!==i;)h+=r[_++],_=_%e;if(i=(i+1)%e,i===a&&(a=(a+1)%e),o-y<t)return;const w=E&&o-E;return w?Math.round(h*1e3/w):void 0}}function tD(e,t){let r=0,n=1e3/t,i,a;const y=(o,E=Date.now())=>{r=E,i=null,a&&(clearTimeout(a),a=null),e.apply(null,o)};return[(...o)=>{const E=Date.now(),_=E-r;_>=n?y(o,E):(i=o,a||(a=setTimeout(()=>{a=null,y(i)},n-_)))},()=>i&&y(i)]}const sh=(e,t,r=3)=>{let n=0;const i=eD(50,250);return tD(a=>{const y=a.loaded,C=a.lengthComputable?a.total:void 0,p=y-n,o=i(p),E=y<=C;n=y;const _={loaded:y,total:C,progress:C?y/C:void 0,bytes:p,rate:o||void 0,estimated:o&&C&&E?(C-y)/o:void 0,event:a,lengthComputable:C!=null,[t?"download":"upload"]:!0};e(_)},r)},Jy=(e,t)=>{const r=e!=null;return[n=>t[0]({lengthComputable:r,total:e,loaded:n}),t[1]]},Qy=e=>(...t)=>Be.asap(()=>e(...t)),rD=ws.hasStandardBrowserEnv?function(){const t=ws.navigator&&/(msie|trident)/i.test(ws.navigator.userAgent),r=document.createElement("a");let n;function i(a){let y=a;return t&&(r.setAttribute("href",y),y=r.href),r.setAttribute("href",y),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=i(window.location.href),function(y){const C=Be.isString(y)?i(y):y;return C.protocol===n.protocol&&C.host===n.host}}():function(){return function(){return!0}}(),nD=ws.hasStandardBrowserEnv?{write(e,t,r,n,i,a){const y=[e+"="+encodeURIComponent(t)];Be.isNumber(r)&&y.push("expires="+new Date(r).toGMTString()),Be.isString(n)&&y.push("path="+n),Be.isString(i)&&y.push("domain="+i),a===!0&&y.push("secure"),document.cookie=y.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function iD(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function sD(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function Q2(e,t){return e&&!iD(t)?sD(e,t):t}const Yy=e=>e instanceof bs?{...e}:e;function hc(e,t){t=t||{};const r={};function n(o,E,_){return Be.isPlainObject(o)&&Be.isPlainObject(E)?Be.merge.call({caseless:_},o,E):Be.isPlainObject(E)?Be.merge({},E):Be.isArray(E)?E.slice():E}function i(o,E,_){if(Be.isUndefined(E)){if(!Be.isUndefined(o))return n(void 0,o,_)}else return n(o,E,_)}function a(o,E){if(!Be.isUndefined(E))return n(void 0,E)}function y(o,E){if(Be.isUndefined(E)){if(!Be.isUndefined(o))return n(void 0,o)}else return n(void 0,E)}function C(o,E,_){if(_ in t)return n(o,E);if(_ in e)return n(void 0,o)}const p={url:a,method:a,data:a,baseURL:y,transformRequest:y,transformResponse:y,paramsSerializer:y,timeout:y,timeoutMessage:y,withCredentials:y,withXSRFToken:y,adapter:y,responseType:y,xsrfCookieName:y,xsrfHeaderName:y,onUploadProgress:y,onDownloadProgress:y,decompress:y,maxContentLength:y,maxBodyLength:y,beforeRedirect:y,transport:y,httpAgent:y,httpsAgent:y,cancelToken:y,socketPath:y,responseEncoding:y,validateStatus:C,headers:(o,E)=>i(Yy(o),Yy(E),!0)};return Be.forEach(Object.keys(Object.assign({},e,t)),function(E){const _=p[E]||i,h=_(e[E],t[E],E);Be.isUndefined(h)&&_!==C||(r[E]=h)}),r}const Y2=e=>{const t=hc({},e);let{data:r,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:a,headers:y,auth:C}=t;t.headers=y=bs.from(y),t.url=$2(Q2(t.baseURL,t.url),e.params,e.paramsSerializer),C&&y.set("Authorization","Basic "+btoa((C.username||"")+":"+(C.password?unescape(encodeURIComponent(C.password)):"")));let p;if(Be.isFormData(r)){if(ws.hasStandardBrowserEnv||ws.hasStandardBrowserWebWorkerEnv)y.setContentType(void 0);else if((p=y.getContentType())!==!1){const[o,...E]=p?p.split(";").map(_=>_.trim()).filter(Boolean):[];y.setContentType([o||"multipart/form-data",...E].join("; "))}}if(ws.hasStandardBrowserEnv&&(n&&Be.isFunction(n)&&(n=n(t)),n||n!==!1&&rD(t.url))){const o=i&&a&&nD.read(a);o&&y.set(i,o)}return t},aD=typeof XMLHttpRequest<"u",oD=aD&&function(e){return new Promise(function(r,n){const i=Y2(e);let a=i.data;const y=bs.from(i.headers).normalize();let{responseType:C,onUploadProgress:p,onDownloadProgress:o}=i,E,_,h,w,k;function f(){w&&w(),k&&k(),i.cancelToken&&i.cancelToken.unsubscribe(E),i.signal&&i.signal.removeEventListener("abort",E)}let g=new XMLHttpRequest;g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout;function s(){if(!g)return;const S=bs.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),x={data:!C||C==="text"||C==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:S,config:e,request:g};J2(function(P){r(P),f()},function(P){n(P),f()},x),g=null}"onloadend"in g?g.onloadend=s:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(s)},g.onabort=function(){g&&(n(new Or("Request aborted",Or.ECONNABORTED,e,g)),g=null)},g.onerror=function(){n(new Or("Network Error",Or.ERR_NETWORK,e,g)),g=null},g.ontimeout=function(){let T=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const x=i.transitional||q2;i.timeoutErrorMessage&&(T=i.timeoutErrorMessage),n(new Or(T,x.clarifyTimeoutError?Or.ETIMEDOUT:Or.ECONNABORTED,e,g)),g=null},a===void 0&&y.setContentType(null),"setRequestHeader"in g&&Be.forEach(y.toJSON(),function(T,x){g.setRequestHeader(x,T)}),Be.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),C&&C!=="json"&&(g.responseType=i.responseType),o&&([h,k]=sh(o,!0),g.addEventListener("progress",h)),p&&g.upload&&([_,w]=sh(p),g.upload.addEventListener("progress",_),g.upload.addEventListener("loadend",w)),(i.cancelToken||i.signal)&&(E=S=>{g&&(n(!S||S.type?new Pl(null,e,g):S),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(E),i.signal&&(i.signal.aborted?E():i.signal.addEventListener("abort",E)));const b=Z3(i.url);if(b&&ws.protocols.indexOf(b)===-1){n(new Or("Unsupported protocol "+b+":",Or.ERR_BAD_REQUEST,e));return}g.send(a||null)})},cD=(e,t)=>{const{length:r}=e=e?e.filter(Boolean):[];if(t||r){let n=new AbortController,i;const a=function(o){if(!i){i=!0,C();const E=o instanceof Error?o:this.reason;n.abort(E instanceof Or?E:new Pl(E instanceof Error?E.message:E))}};let y=t&&setTimeout(()=>{y=null,a(new Or(`timeout ${t} of ms exceeded`,Or.ETIMEDOUT))},t);const C=()=>{e&&(y&&clearTimeout(y),y=null,e.forEach(o=>{o.unsubscribe?o.unsubscribe(a):o.removeEventListener("abort",a)}),e=null)};e.forEach(o=>o.addEventListener("abort",a));const{signal:p}=n;return p.unsubscribe=()=>Be.asap(C),p}},lD=function*(e,t){let r=e.byteLength;if(!t||r<t){yield e;return}let n=0,i;for(;n<r;)i=n+t,yield e.slice(n,i),n=i},uD=async function*(e,t){for await(const r of dD(e))yield*lD(r,t)},dD=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)break;yield n}}finally{await t.cancel()}},Xy=(e,t,r,n)=>{const i=uD(e,t);let a=0,y,C=p=>{y||(y=!0,n&&n(p))};return new ReadableStream({async pull(p){try{const{done:o,value:E}=await i.next();if(o){C(),p.close();return}let _=E.byteLength;if(r){let h=a+=_;r(h)}p.enqueue(new Uint8Array(E))}catch(o){throw C(o),o}},cancel(p){return C(p),i.return()}},{highWaterMark:2})},Vh=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",X2=Vh&&typeof ReadableStream=="function",pD=Vh&&(typeof TextEncoder=="function"?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),Z2=(e,...t)=>{try{return!!e(...t)}catch{return!1}},hD=X2&&Z2(()=>{let e=!1;const t=new Request(ws.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Zy=64*1024,Gm=X2&&Z2(()=>Be.isReadableStream(new Response("").body)),ah={stream:Gm&&(e=>e.body)};Vh&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(t=>{!ah[t]&&(ah[t]=Be.isFunction(e[t])?r=>r[t]():(r,n)=>{throw new Or(`Response type '${t}' is not supported`,Or.ERR_NOT_SUPPORT,n)})})})(new Response);const fD=async e=>{if(e==null)return 0;if(Be.isBlob(e))return e.size;if(Be.isSpecCompliantForm(e))return(await new Request(ws.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Be.isArrayBufferView(e)||Be.isArrayBuffer(e))return e.byteLength;if(Be.isURLSearchParams(e)&&(e=e+""),Be.isString(e))return(await pD(e)).byteLength},mD=async(e,t)=>{const r=Be.toFiniteNumber(e.getContentLength());return r??fD(t)},gD=Vh&&(async e=>{let{url:t,method:r,data:n,signal:i,cancelToken:a,timeout:y,onDownloadProgress:C,onUploadProgress:p,responseType:o,headers:E,withCredentials:_="same-origin",fetchOptions:h}=Y2(e);o=o?(o+"").toLowerCase():"text";let w=cD([i,a&&a.toAbortSignal()],y),k;const f=w&&w.unsubscribe&&(()=>{w.unsubscribe()});let g;try{if(p&&hD&&r!=="get"&&r!=="head"&&(g=await mD(E,n))!==0){let x=new Request(t,{method:"POST",body:n,duplex:"half"}),O;if(Be.isFormData(n)&&(O=x.headers.get("content-type"))&&E.setContentType(O),x.body){const[P,R]=Jy(g,sh(Qy(p)));n=Xy(x.body,Zy,P,R)}}Be.isString(_)||(_=_?"include":"omit");const s="credentials"in Request.prototype;k=new Request(t,{...h,signal:w,method:r.toUpperCase(),headers:E.normalize().toJSON(),body:n,duplex:"half",credentials:s?_:void 0});let b=await fetch(k);const S=Gm&&(o==="stream"||o==="response");if(Gm&&(C||S&&f)){const x={};["status","statusText","headers"].forEach(I=>{x[I]=b[I]});const O=Be.toFiniteNumber(b.headers.get("content-length")),[P,R]=C&&Jy(O,sh(Qy(C),!0))||[];b=new Response(Xy(b.body,Zy,P,()=>{R&&R(),f&&f()}),x)}o=o||"text";let T=await ah[Be.findKey(ah,o)||"text"](b,e);return!S&&f&&f(),await new Promise((x,O)=>{J2(x,O,{data:T,headers:bs.from(b.headers),status:b.status,statusText:b.statusText,config:e,request:k})})}catch(s){throw f&&f(),s&&s.name==="TypeError"&&/fetch/i.test(s.message)?Object.assign(new Or("Network Error",Or.ERR_NETWORK,e,k),{cause:s.cause||s}):Or.from(s,s&&s.code,e,k)}}),Jm={http:D3,xhr:oD,fetch:gD};Be.forEach(Jm,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const e_=e=>`- ${e}`,vD=e=>Be.isFunction(e)||e===null||e===!1,eS={getAdapter:e=>{e=Be.isArray(e)?e:[e];const{length:t}=e;let r,n;const i={};for(let a=0;a<t;a++){r=e[a];let y;if(n=r,!vD(r)&&(n=Jm[(y=String(r)).toLowerCase()],n===void 0))throw new Or(`Unknown adapter '${y}'`);if(n)break;i[y||"#"+a]=n}if(!n){const a=Object.entries(i).map(([C,p])=>`adapter ${C} `+(p===!1?"is not supported by the environment":"is not available in the build"));let y=t?a.length>1?`since :
`+a.map(e_).join(`
`):" "+e_(a[0]):"as no adapter specified";throw new Or("There is no suitable adapter to dispatch the request "+y,"ERR_NOT_SUPPORT")}return n},adapters:Jm};function jf(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Pl(null,e)}function t_(e){return jf(e),e.headers=bs.from(e.headers),e.data=Nf.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),eS.getAdapter(e.adapter||pd.adapter)(e).then(function(n){return jf(e),n.data=Nf.call(e,e.transformResponse,n),n.headers=bs.from(n.headers),n},function(n){return G2(n)||(jf(e),n&&n.response&&(n.response.data=Nf.call(e,e.transformResponse,n.response),n.response.headers=bs.from(n.response.headers))),Promise.reject(n)})}const tS="1.7.7",Ov={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Ov[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const r_={};Ov.transitional=function(t,r,n){function i(a,y){return"[Axios v"+tS+"] Transitional option '"+a+"'"+y+(n?". "+n:"")}return(a,y,C)=>{if(t===!1)throw new Or(i(y," has been removed"+(r?" in "+r:"")),Or.ERR_DEPRECATED);return r&&!r_[y]&&(r_[y]=!0,console.warn(i(y," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(a,y,C):!0}};function yD(e,t,r){if(typeof e!="object")throw new Or("options must be an object",Or.ERR_BAD_OPTION_VALUE);const n=Object.keys(e);let i=n.length;for(;i-- >0;){const a=n[i],y=t[a];if(y){const C=e[a],p=C===void 0||y(C,a,e);if(p!==!0)throw new Or("option "+a+" must be "+p,Or.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Or("Unknown option "+a,Or.ERR_BAD_OPTION)}}const Qm={assertOptions:yD,validators:Ov},lo=Qm.validators;class ic{constructor(t){this.defaults=t,this.interceptors={request:new Ky,response:new Ky}}async request(t,r){try{return await this._request(t,r)}catch(n){if(n instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=hc(this.defaults,r);const{transitional:n,paramsSerializer:i,headers:a}=r;n!==void 0&&Qm.assertOptions(n,{silentJSONParsing:lo.transitional(lo.boolean),forcedJSONParsing:lo.transitional(lo.boolean),clarifyTimeoutError:lo.transitional(lo.boolean)},!1),i!=null&&(Be.isFunction(i)?r.paramsSerializer={serialize:i}:Qm.assertOptions(i,{encode:lo.function,serialize:lo.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let y=a&&Be.merge(a.common,a[r.method]);a&&Be.forEach(["delete","get","head","post","put","patch","common"],k=>{delete a[k]}),r.headers=bs.concat(y,a);const C=[];let p=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(r)===!1||(p=p&&f.synchronous,C.unshift(f.fulfilled,f.rejected))});const o=[];this.interceptors.response.forEach(function(f){o.push(f.fulfilled,f.rejected)});let E,_=0,h;if(!p){const k=[t_.bind(this),void 0];for(k.unshift.apply(k,C),k.push.apply(k,o),h=k.length,E=Promise.resolve(r);_<h;)E=E.then(k[_++],k[_++]);return E}h=C.length;let w=r;for(_=0;_<h;){const k=C[_++],f=C[_++];try{w=k(w)}catch(g){f.call(this,g);break}}try{E=t_.call(this,w)}catch(k){return Promise.reject(k)}for(_=0,h=o.length;_<h;)E=E.then(o[_++],o[_++]);return E}getUri(t){t=hc(this.defaults,t);const r=Q2(t.baseURL,t.url);return $2(r,t.params,t.paramsSerializer)}}Be.forEach(["delete","get","head","options"],function(t){ic.prototype[t]=function(r,n){return this.request(hc(n||{},{method:t,url:r,data:(n||{}).data}))}});Be.forEach(["post","put","patch"],function(t){function r(n){return function(a,y,C){return this.request(hc(C||{},{method:t,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:y}))}}ic.prototype[t]=r(),ic.prototype[t+"Form"]=r(!0)});class Dv{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(a){r=a});const n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a;const y=new Promise(C=>{n.subscribe(C),a=C}).then(i);return y.cancel=function(){n.unsubscribe(a)},y},t(function(a,y,C){n.reason||(n.reason=new Pl(a,y,C),r(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const t=new AbortController,r=n=>{t.abort(n)};return this.subscribe(r),t.signal.unsubscribe=()=>this.unsubscribe(r),t.signal}static source(){let t;return{token:new Dv(function(i){t=i}),cancel:t}}}function _D(e){return function(r){return e.apply(null,r)}}function wD(e){return Be.isObject(e)&&e.isAxiosError===!0}const Ym={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ym).forEach(([e,t])=>{Ym[t]=e});function rS(e){const t=new ic(e),r=M2(ic.prototype.request,t);return Be.extend(r,ic.prototype,t,{allOwnKeys:!0}),Be.extend(r,t,null,{allOwnKeys:!0}),r.create=function(i){return rS(hc(e,i))},r}const ui=rS(pd);ui.Axios=ic;ui.CanceledError=Pl;ui.CancelToken=Dv;ui.isCancel=G2;ui.VERSION=tS;ui.toFormData=Wh;ui.AxiosError=Or;ui.Cancel=ui.CanceledError;ui.all=function(t){return Promise.all(t)};ui.spread=_D;ui.isAxiosError=wD;ui.mergeConfig=hc;ui.AxiosHeaders=bs;ui.formToJSON=e=>K2(Be.isHTMLForm(e)?new FormData(e):e);ui.getAdapter=eS.getAdapter;ui.HttpStatusCode=Ym;ui.default=ui;const bD=()=>{const[e,t]=xe.useState(null),[r,n]=xe.useState(!1),i=p=>{p.preventDefault(),n(!0)},a=()=>{n(!1)},y=p=>{p.preventDefault(),n(!1);const o=p.dataTransfer.files[0];o&&t(o)},C=async()=>{if(!e){alert("Please select a file to upload.");return}const p=new FormData;p.append("file",e);try{if(!localStorage.getItem("meetingId"))throw{message:"Invalid meeting Section"};const o=localStorage.getItem("authToken"),E=localStorage.getItem("meetingId");p.append("meetingId",E);const _=await ui.post("/api/upload",p,{headers:{"Content-Type":"multipart/form-data",Authorization:o}});console.log(_.data),_.data.error?Sa.fire({text:_.data.reason,icon:"error",toast:!0,position:"top"}):Sa.fire({text:_.data.reason,icon:"success",toast:!0,position:"top"})}catch(o){Sa.fire({text:o.message,icon:"error",toast:!0,position:"center"}),console.error("Error uploading file:",o)}};return me.jsxs("div",{children:[me.jsxs("div",{className:`dropzone ${r?"dragging":""}`,onDragOver:i,onDragLeave:a,onDrop:y,onClick:()=>document.getElementById("file-input").click(),role:"button",tabIndex:0,children:[me.jsx("input",{type:"file",id:"file-input",style:{display:"none"},onChange:p=>t(p.target.files[0])}),me.jsx("p",{children:e?e.name:"Drag and drop a file here, or click to select"})]}),me.jsx("div",{className:"w-full py-1 flex items-center",children:me.jsx("button",{className:"btn btn-square btn-primary w-4/12 mx-auto",onClick:C,children:"Upload"})})]})};function SD(){const[e,t]=xe.useState({email:"",fullname:""});return xe.useEffect(()=>{localStorage.getItem("authToken")||(window.location.href="/"),async function(){const r=localStorage.getItem("authToken");let n=await fetch("/getUser",{method:"POST",headers:{Authorization:r}}),{fullname:i,email:a}=await n.json();t({email:a,fullname:i})}()},[]),me.jsxs("div",{className:"flex flex-col sm:flex-row w-full min-h-screen ",children:[me.jsx("div",{className:"w-auto sm:h-screen",children:me.jsx(ED,{})}),me.jsxs("div",{className:"w-full sm:w-[95%] flex flex-col h-screen ",children:[me.jsx(kD,{user:e}),me.jsx(RD,{user:e})]})]})}const RD=({user:e})=>me.jsxs("div",{className:"h-5/6  flex flex-col sm:flex-col  lg:flex-row",children:[me.jsx("div",{className:"w-full  sm:h-3/6 lg:h-auto overflow-y-scroll p-2",children:me.jsx(TD,{user:e})}),me.jsxs("div",{className:"w-full flex flex-col overflow-y-auto sm:h-3/6 lg:h-auto",children:[me.jsxs("div",{className:"w-full flex flex-row h-auto  sm:flex-row mx-auto   p-2",children:[me.jsxs("div",{className:"w-4/12",children:[me.jsx("h1",{children:"Drag and Drop File Upload"}),me.jsx(bD,{})]}),me.jsx("div",{className:"w-8/12 overflow-y-scroll",children:me.jsx(PD,{})})]}),me.jsx("div",{className:"w-full h-auto sm:h-4/6 bg-base-200",children:me.jsx(CD,{user:e})})]})]}),ED=()=>me.jsx("div",{className:"bg-base-200 h-auto sm:h-screen w-auto p-2",children:me.jsxs("ul",{className:"menu bg-secondary text-white rounded-box  flex flex-row sm:flex-col justify-center",children:[me.jsx("div",{className:"tooltip tooltip-right","data-tip":"Dashboard",children:me.jsx("li",{children:me.jsx("a",{children:me.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:me.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})})})}),me.jsx("div",{className:"tooltip tooltip-right","data-tip":"About",children:me.jsx("li",{children:me.jsx("a",{children:me.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:me.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})})}),me.jsx("div",{className:"tooltip tooltip-right","data-tip":"Logout",children:me.jsx("li",{children:me.jsx("a",{children:me.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:me.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})})})]})}),kD=({user:e})=>{function t(){localStorage.setItem("authToken",""),window.location.href="/"}return me.jsx("div",{className:"w-full  px-4 md:px-8 h-1/6",children:me.jsxs("div",{className:"w-full items-center justify-center sm:justify-between py-4 border-b flex flex-col sm:flex-row gap-3",children:[me.jsx("div",{className:"w-full sm:w-6/12",children:me.jsxs("h3",{className:"text-2xl font-bold",children:["Welcome ",e.fullname]})}),me.jsx("div",{className:"w-full sm:w-6/12",children:me.jsxs("button",{onClick:()=>t(),className:"btn-md btn bg-red-500 text-white float-right",children:[" ","Logout ",me.jsx(V4,{})," "]})})]})})},Bf=Ep("https://cloud-colab-backend.onrender.com:9090"),CD=({user:e})=>{const[t,r]=xe.useState(""),[n,i]=xe.useState([]),[a,y]=xe.useState([]),C=o=>{o.preventDefault(),Bf.emit("sendMessage",{message:t,sender:e.fullname}),r("")};function p(o){document.getElementById("file-input").click()}return xe.useEffect(()=>(Bf.on("receiveMessage",o=>{i(E=>[...E,o])}),()=>{Bf.off("receiveMessage")}),[]),xe.useEffect(()=>{let o=document.getElementById("chat-div");o.scrollTo(0,o.scrollHeight)},[n]),me.jsxs("div",{className:"flex flex-col h-auto p-2",children:[me.jsx("div",{className:"h-auto sm:h-[45vh] overflow-y-auto",id:"chat-div",children:n.map((o,E)=>me.jsxs("div",{className:"chat chat-start",children:[me.jsx("div",{className:"chat-header",children:o.sender}),me.jsxs("div",{className:"chat-bubble",children:[" ",o.message," "]}),me.jsx("div",{className:"chat-footer opacity-50",children:"Seen"})]},E))}),me.jsx("div",{className:"w-full bottom-0  flex justify-center items-center",children:me.jsx("div",{className:"join mx-auto flex ",children:me.jsxs("form",{onSubmit:C,className:"flex flex-row",children:[me.jsxs("span",{className:"join-item",children:[me.jsx("input",{type:"file",id:"file-input",style:{display:"none"},onChange:o=>y(o.target.files[0])}),me.jsx("span",{className:" bg-red-500 w-full",onClick:()=>p()})]}),me.jsx("input",{className:"input input-bordered join-item",placeholder:"Leave your message here",value:t,onChange:o=>r(o.target.value)}),me.jsx("button",{className:"btn join-item rounded-r-full",children:" Send "})]})})})]})},PD=()=>{const[e,t]=xe.useState([]);return xe.useEffect(()=>{setTimeout(async function(r){const n=localStorage.getItem("authToken"),i=localStorage.getItem("meetingId");let y=await(await fetch("api/getFiles",{method:"POST",headers:{"Content-Type":"application/json",Authorization:n},body:JSON.stringify({session:i})})).json();t(y.files)},5e3)}),me.jsx("div",{className:"w-full sm:h-auto",children:me.jsx("ul",{className:"flex flex-col gap-2 px-5",children:e.map(r=>me.jsx("li",{children:me.jsxs("div",{className:"w-full text-neutral px-2 py-1 bg-accent flex flex-row justify-between  rounded-lg",children:[me.jsx("div",{className:"flex flex-col",children:me.jsx("div",{children:me.jsxs("div",{children:[me.jsxs("span",{className:"font-bold text-xs",children:[r.filename," "]}),me.jsx(Zg,{to:"/"+r.filepath,children:" open "})]})})}),me.jsx("span",{children:me.jsx(W4,{})})]})}))})})},TD=({user:e})=>me.jsx("div",{className:"w-full ",children:me.jsx(X4,{user:e})}),xD=oC([{path:"/",element:me.jsx(ux,{})},{path:"/signup",element:me.jsx(lx,{})},{path:"/dashboard",element:me.jsx(SD,{})}]);v1(document.getElementById("root")).render(me.jsx(xe.StrictMode,{children:me.jsx(gC,{router:xD})}));export{hs as _,oh as g,wO as p,xe as r,Ah as u};
